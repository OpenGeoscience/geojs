!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(function(){try{return require("vtk.js")}catch(t){}}()):"function"==typeof define&&define.amd?define(["vtk.js"],e):"object"==typeof exports?exports.geo=e(function(){try{return require("vtk.js")}catch(t){}}()):t.geo=e(t["vtk.js"])}(self,function(t){return function(){var e={3267:function(t){
/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */
t.exports=function(){"use strict";function t(){return t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t.apply(this,arguments)}function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var r;r="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var i,o=r,a=["","webkit","Moz","MS","ms","o"],s="undefined"==typeof document?{style:{}}:document.createElement("div"),u="function",l=Math.round,c=Math.abs,f=Date.now;function h(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<a.length;){if((r=(n=a[o])?n+i:e)in t)return r;o++}}i="undefined"==typeof window?{}:window;var d=h(s.style,"touchAction"),p=void 0!==d;function m(){if(!p)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){return t[n]=!e||i.CSS.supports("touch-action",n)}),t}var g="compute",y="auto",v="manipulation",x="none",_="pan-x",b="pan-y",w=m(),M=/mobile|tablet|ip(ad|hone|od)|android/i,A="ontouchstart"in i,E=void 0!==h(i,"PointerEvent"),T=A&&M.test(navigator.userAgent),S="touch",C="pen",k="mouse",P="kinect",O=25,L=1,I=2,R=4,D=8,N=1,F=2,j=4,z=8,G=16,B=F|j,V=z|G,q=B|V,U=["x","y"],H=["clientX","clientY"];function W(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(void 0!==t.length)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function X(t,e){return typeof t===u?t.apply(e&&e[0]||void 0,e):t}function K(t,e){return t.indexOf(e)>-1}function Q(t){if(K(t,x))return x;var e=K(t,_),n=K(t,b);return e&&n?x:e||n?e?_:b:K(t,v)?v:y}var Y=function(){function t(t,e){this.manager=t,this.set(e)}var e=t.prototype;return e.set=function(t){t===g&&(t=this.compute()),p&&this.manager.element.style&&w[t]&&(this.manager.element.style[d]=t),this.actions=t.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var t=[];return W(this.manager.recognizers,function(e){X(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Q(t.join(" "))},e.preventDefaults=function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=K(r,x)&&!w[x],o=K(r,b)&&!w[b],a=K(r,_)&&!w[_];if(i){var s=1===t.pointers.length,u=t.distance<2,l=t.deltaTime<250;if(s&&u&&l)return}if(!a||!o)return i||o&&n&B||a&&n&V?this.preventSrc(e):void 0}},e.preventSrc=function(t){this.manager.session.prevented=!0,t.preventDefault()},t}();function $(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function Z(t){var e=t.length;if(1===e)return{x:l(t[0].clientX),y:l(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:l(n/e),y:l(r/e)}}function J(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:l(t.pointers[n].clientX),clientY:l(t.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:e,center:Z(e),deltaX:t.deltaX,deltaY:t.deltaY}}function tt(t,e,n){n||(n=U);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function et(t,e,n){n||(n=U);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}function nt(t,e){return t===e?N:c(t)>=c(e)?t<0?F:j:e<0?z:G}function rt(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==L&&o.eventType!==R||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}function it(t,e,n){return{x:e/t||0,y:n/t||0}}function ot(t,e){return tt(e[0],e[1],H)/tt(t[0],t[1],H)}function at(t,e){return et(e[1],e[0],H)+et(t[1],t[0],H)}function st(t,e){var n,r,i,o,a=t.lastInterval||e,s=e.timeStamp-a.timeStamp;if(e.eventType!==D&&(s>O||void 0===a.velocity)){var u=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,f=it(s,u,l);r=f.x,i=f.y,n=c(f.x)>c(f.y)?f.x:f.y,o=nt(u,l),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}function ut(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=J(e)),i>1&&!n.firstMultiple?n.firstMultiple=J(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,u=e.center=Z(r);e.timeStamp=f(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=et(s,u),e.distance=tt(s,u),rt(n,e),e.offsetDirection=nt(e.deltaX,e.deltaY);var l=it(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=c(l.x)>c(l.y)?l.x:l.y,e.scale=a?ot(a.pointers,r):1,e.rotation=a?at(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,st(n,e);var h,d=t.element,p=e.srcEvent;$(h=p.composedPath?p.composedPath()[0]:p.path?p.path[0]:p.target,d)&&(d=h),e.target=d}function lt(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&L&&r-i===0,a=e&(R|D)&&r-i===0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,ut(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function ct(t){return t.trim().split(/\s+/g)}function ft(t,e,n){W(ct(e),function(e){t.addEventListener(e,n,!1)})}function ht(t,e,n){W(ct(e),function(e){t.removeEventListener(e,n,!1)})}function dt(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var pt=function(){function t(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){X(t.options.enable,[t])&&n.handler(e)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&ft(this.element,this.evEl,this.domHandler),this.evTarget&&ft(this.target,this.evTarget,this.domHandler),this.evWin&&ft(dt(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&ht(this.element,this.evEl,this.domHandler),this.evTarget&&ht(this.target,this.evTarget,this.domHandler),this.evWin&&ht(dt(this.element),this.evWin,this.domHandler)},t}();function mt(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}var gt={pointerdown:L,pointermove:I,pointerup:R,pointercancel:D,pointerout:D},yt={2:S,3:C,4:k,5:P},vt="pointerdown",xt="pointermove pointerup pointercancel";i.MSPointerEvent&&!i.PointerEvent&&(vt="MSPointerDown",xt="MSPointerMove MSPointerUp MSPointerCancel");var _t=function(t){function n(){var e,r=n.prototype;return r.evEl=vt,r.evWin=xt,(e=t.apply(this,arguments)||this).store=e.manager.session.pointerEvents=[],e}return e(n,t),n.prototype.handler=function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=gt[r],o=yt[t.pointerType]||t.pointerType,a=o===S,s=mt(e,t.pointerId,"pointerId");i&L&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):i&(R|D)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))},n}(pt);function bt(t){return Array.prototype.slice.call(t,0)}function wt(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];mt(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort(function(t,n){return t[e]>n[e]}):r.sort()),r}var Mt={touchstart:L,touchmove:I,touchend:R,touchcancel:D},At="touchstart touchmove touchend touchcancel",Et=function(t){function n(){var e;return n.prototype.evTarget=At,(e=t.apply(this,arguments)||this).targetIds={},e}return e(n,t),n.prototype.handler=function(t){var e=Mt[t.type],n=Tt.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:S,srcEvent:t})},n}(pt);function Tt(t,e){var n,r,i=bt(t.touches),o=this.targetIds;if(e&(L|I)&&1===i.length)return o[i[0].identifier]=!0,[i,i];var a=bt(t.changedTouches),s=[],u=this.target;if(r=i.filter(function(t){return $(t.target,u)}),e===L)for(n=0;n<r.length;)o[r[n].identifier]=!0,n++;for(n=0;n<a.length;)o[a[n].identifier]&&s.push(a[n]),e&(R|D)&&delete o[a[n].identifier],n++;return s.length?[wt(r.concat(s),"identifier",!0),s]:void 0}var St={mousedown:L,mousemove:I,mouseup:R},Ct="mousedown",kt="mousemove mouseup",Pt=function(t){function n(){var e,r=n.prototype;return r.evEl=Ct,r.evWin=kt,(e=t.apply(this,arguments)||this).pressed=!1,e}return e(n,t),n.prototype.handler=function(t){var e=St[t.type];e&L&&0===t.button&&(this.pressed=!0),e&I&&1!==t.which&&(e=R),this.pressed&&(e&R&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:k,srcEvent:t}))},n}(pt),Ot=2500,Lt=25;function It(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY},r=this.lastTouches;this.lastTouches.push(n),setTimeout(function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)},Ot)}}function Rt(t,e){t&L?(this.primaryTouch=e.changedPointers[0].identifier,It.call(this,e)):t&(R|D)&&It.call(this,e)}function Dt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=Lt&&a<=Lt)return!0}return!1}var Nt=function(){return function(t){function r(e,r){var i;return(i=t.call(this,e,r)||this).handler=function(t,e,r){var o=r.pointerType===S,a=r.pointerType===k;if(!(a&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(o)Rt.call(n(n(i)),e,r);else if(a&&Dt.call(n(n(i)),r))return;i.callback(t,e,r)}},i.touch=new Et(i.manager,i.handler),i.mouse=new Pt(i.manager,i.handler),i.primaryTouch=null,i.lastTouches=[],i}return e(r,t),r.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(pt)}();function Ft(t){var e=t.options.inputClass;return new(e||(E?_t:T?Et:A?Nt:Pt))(t,lt)}function jt(t,e,n){return!!Array.isArray(t)&&(W(t,n[e],n),!0)}var zt=1,Gt=2,Bt=4,Vt=8,qt=Vt,Ut=16,Ht=32,Wt=1;function Xt(){return Wt++}function Kt(t,e){var n=e.manager;return n?n.get(t):t}function Qt(t){return t&Ut?"cancel":t&Vt?"end":t&Bt?"move":t&Gt?"start":""}var Yt=function(){function e(e){void 0===e&&(e={}),this.options=t({enable:!0},e),this.id=Xt(),this.manager=null,this.state=zt,this.simultaneous={},this.requireFail=[]}var n=e.prototype;return n.set=function(t){return o(this.options,t),this.manager&&this.manager.touchAction.update(),this},n.recognizeWith=function(t){if(jt(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Kt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},n.dropRecognizeWith=function(t){return jt(t,"dropRecognizeWith",this)||(t=Kt(t,this),delete this.simultaneous[t.id]),this},n.requireFailure=function(t){if(jt(t,"requireFailure",this))return this;var e=this.requireFail;return-1===mt(e,t=Kt(t,this))&&(e.push(t),t.requireFailure(this)),this},n.dropRequireFailure=function(t){if(jt(t,"dropRequireFailure",this))return this;t=Kt(t,this);var e=mt(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},n.hasRequireFailures=function(){return this.requireFail.length>0},n.canRecognizeWith=function(t){return!!this.simultaneous[t.id]},n.emit=function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<Vt&&r(e.options.event+Qt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=Vt&&r(e.options.event+Qt(n))},n.tryEmit=function(t){if(this.canEmit())return this.emit(t);this.state=Ht},n.canEmit=function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(Ht|zt)))return!1;t++}return!0},n.recognize=function(t){var e=o({},t);if(!X(this.options.enable,[this,e]))return this.reset(),void(this.state=Ht);this.state&(qt|Ut|Ht)&&(this.state=zt),this.state=this.process(e),this.state&(Gt|Bt|Vt|Ut)&&this.tryEmit(e)},n.process=function(t){},n.getTouchAction=function(){},n.reset=function(){},e}(),$t=function(n){function r(e){var r;return void 0===e&&(e={}),(r=n.call(this,t({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},e))||this).pTime=!1,r.pCenter=!1,r._timer=null,r._input=null,r.count=0,r}e(r,n);var i=r.prototype;return i.getTouchAction=function(){return[v]},i.process=function(t){var e=this,n=this.options,r=t.pointers.length===n.pointers,i=t.distance<n.threshold,o=t.deltaTime<n.time;if(this.reset(),t.eventType&L&&0===this.count)return this.failTimeout();if(i&&o&&r){if(t.eventType!==R)return this.failTimeout();var a=!this.pTime||t.timeStamp-this.pTime<n.interval,s=!this.pCenter||tt(this.pCenter,t.center)<n.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&a?this.count+=1:this.count=1,this._input=t,0===this.count%n.taps)return this.hasRequireFailures()?(this._timer=setTimeout(function(){e.state=qt,e.tryEmit()},n.interval),Gt):qt}return Ht},i.failTimeout=function(){var t=this;return this._timer=setTimeout(function(){t.state=Ht},this.options.interval),Ht},i.reset=function(){clearTimeout(this._timer)},i.emit=function(){this.state===qt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},r}(Yt),Zt=function(n){function r(e){return void 0===e&&(e={}),n.call(this,t({pointers:1},e))||this}e(r,n);var i=r.prototype;return i.attrTest=function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},i.process=function(t){var e=this.state,n=t.eventType,r=e&(Gt|Bt),i=this.attrTest(t);return r&&(n&D||!i)?e|Ut:r||i?n&R?e|Vt:e&Gt?e|Bt:Gt:Ht},r}(Yt);function Jt(t){return t===G?"down":t===z?"up":t===F?"left":t===j?"right":""}var te=function(n){function r(e){var r;return void 0===e&&(e={}),(r=n.call(this,t({event:"pan",threshold:10,pointers:1,direction:q},e))||this).pX=null,r.pY=null,r}e(r,n);var i=r.prototype;return i.getTouchAction=function(){var t=this.options.direction,e=[];return t&B&&e.push(b),t&V&&e.push(_),e},i.directionTest=function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&B?(i=0===o?N:o<0?F:j,n=o!==this.pX,r=Math.abs(t.deltaX)):(i=0===a?N:a<0?z:G,n=a!==this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},i.attrTest=function(t){return Zt.prototype.attrTest.call(this,t)&&(this.state&Gt||!(this.state&Gt)&&this.directionTest(t))},i.emit=function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Jt(t.direction);e&&(t.additionalEvent=this.options.event+e),n.prototype.emit.call(this,t)},r}(Zt),ee=function(n){function r(e){return void 0===e&&(e={}),n.call(this,t({event:"swipe",threshold:10,velocity:.3,direction:B|V,pointers:1},e))||this}e(r,n);var i=r.prototype;return i.getTouchAction=function(){return te.prototype.getTouchAction.call(this)},i.attrTest=function(t){var e,r=this.options.direction;return r&(B|V)?e=t.overallVelocity:r&B?e=t.overallVelocityX:r&V&&(e=t.overallVelocityY),n.prototype.attrTest.call(this,t)&&r&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers===this.options.pointers&&c(e)>this.options.velocity&&t.eventType&R},i.emit=function(t){var e=Jt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)},r}(Zt),ne=function(n){function r(e){return void 0===e&&(e={}),n.call(this,t({event:"pinch",threshold:0,pointers:2},e))||this}e(r,n);var i=r.prototype;return i.getTouchAction=function(){return[x]},i.attrTest=function(t){return n.prototype.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Gt)},i.emit=function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}n.prototype.emit.call(this,t)},r}(Zt),re=function(n){function r(e){return void 0===e&&(e={}),n.call(this,t({event:"rotate",threshold:0,pointers:2},e))||this}e(r,n);var i=r.prototype;return i.getTouchAction=function(){return[x]},i.attrTest=function(t){return n.prototype.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Gt)},r}(Zt),ie=function(n){function r(e){var r;return void 0===e&&(e={}),(r=n.call(this,t({event:"press",pointers:1,time:251,threshold:9},e))||this)._timer=null,r._input=null,r}e(r,n);var i=r.prototype;return i.getTouchAction=function(){return[y]},i.process=function(t){var e=this,n=this.options,r=t.pointers.length===n.pointers,i=t.distance<n.threshold,o=t.deltaTime>n.time;if(this._input=t,!i||!r||t.eventType&(R|D)&&!o)this.reset();else if(t.eventType&L)this.reset(),this._timer=setTimeout(function(){e.state=qt,e.tryEmit()},n.time);else if(t.eventType&R)return qt;return Ht},i.reset=function(){clearTimeout(this._timer)},i.emit=function(t){this.state===qt&&(t&&t.eventType&R?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))},r}(Yt),oe={domEvents:!1,touchAction:g,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ae=[[re,{enable:!1}],[ne,{enable:!1},["rotate"]],[ee,{direction:B}],[te,{direction:B},["swipe"]],[$t],[$t,{event:"doubletap",taps:2},["tap"]],[ie]],se=1,ue=2;function le(t,e){var n,r=t.element;r.style&&(W(t.options.cssProps,function(i,o){n=h(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={}))}function ce(t,e){var n=document.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}var fe=function(){function t(t,e){var n=this;this.options=o({},oe,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=Ft(this),this.touchAction=new Y(this,this.options.touchAction),le(this,!0),W(this.options.recognizers,function(t){var e=n.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}var e=t.prototype;return e.set=function(t){return o(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},e.stop=function(t){this.session.stopped=t?ue:se},e.recognize=function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&qt)&&(e.curRecognizer=null,i=null);for(var o=0;o<r.length;)n=r[o],e.stopped===ue||i&&n!==i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(Gt|Bt|Vt)&&(e.curRecognizer=n,i=n),o++}},e.get=function(t){if(t instanceof Yt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event===t)return e[n];return null},e.add=function(t){if(jt(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},e.remove=function(t){if(jt(t,"remove",this))return this;var e=this.get(t);if(t){var n=this.recognizers,r=mt(n,e);-1!==r&&(n.splice(r,1),this.touchAction.update())}return this},e.on=function(t,e){if(void 0===t||void 0===e)return this;var n=this.handlers;return W(ct(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this},e.off=function(t,e){if(void 0===t)return this;var n=this.handlers;return W(ct(t),function(t){e?n[t]&&n[t].splice(mt(n[t],e),1):delete n[t]}),this},e.emit=function(t,e){this.options.domEvents&&ce(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},e.destroy=function(){this.element&&le(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),he={touchstart:L,touchmove:I,touchend:R,touchcancel:D},de="touchstart",pe="touchstart touchmove touchend touchcancel",me=function(t){function n(){var e,r=n.prototype;return r.evTarget=de,r.evWin=pe,(e=t.apply(this,arguments)||this).started=!1,e}return e(n,t),n.prototype.handler=function(t){var e=he[t.type];if(e===L&&(this.started=!0),this.started){var n=ge.call(this,t,e);e&(R|D)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:S,srcEvent:t})}},n}(pt);function ge(t,e){var n=bt(t.touches),r=bt(t.changedTouches);return e&(R|D)&&(n=wt(n.concat(r),"identifier",!0)),[n,r]}function ye(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=window.console&&(window.console.warn||window.console.log);return i&&i.call(window.console,r,n),t.apply(this,arguments)}}var ve=ye(function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&void 0===t[r[i]])&&(t[r[i]]=e[r[i]]),i++;return t},"extend","Use `assign`."),xe=ye(function(t,e){return ve(t,e,!0)},"merge","Use `assign`.");function _e(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&o(r,n)}function be(t,e){return function(){return t.apply(e,arguments)}}return function(){var e=function(e,n){return void 0===n&&(n={}),new fe(e,t({recognizers:ae.concat()},n))};return e.VERSION="2.0.17-rc",e.DIRECTION_ALL=q,e.DIRECTION_DOWN=G,e.DIRECTION_LEFT=F,e.DIRECTION_RIGHT=j,e.DIRECTION_UP=z,e.DIRECTION_HORIZONTAL=B,e.DIRECTION_VERTICAL=V,e.DIRECTION_NONE=N,e.DIRECTION_DOWN=G,e.INPUT_START=L,e.INPUT_MOVE=I,e.INPUT_END=R,e.INPUT_CANCEL=D,e.STATE_POSSIBLE=zt,e.STATE_BEGAN=Gt,e.STATE_CHANGED=Bt,e.STATE_ENDED=Vt,e.STATE_RECOGNIZED=qt,e.STATE_CANCELLED=Ut,e.STATE_FAILED=Ht,e.Manager=fe,e.Input=pt,e.TouchAction=Y,e.TouchInput=Et,e.MouseInput=Pt,e.PointerEventInput=_t,e.TouchMouseInput=Nt,e.SingleTouchInput=me,e.Recognizer=Yt,e.AttrRecognizer=Zt,e.Tap=$t,e.Pan=te,e.Swipe=ee,e.Pinch=ne,e.Rotate=re,e.Press=ie,e.on=ft,e.off=ht,e.each=W,e.merge=xe,e.extend=ve,e.bindFn=be,e.assign=o,e.inherit=_e,e.bindFn=be,e.prefixed=h,e.toArray=bt,e.inArray=mt,e.uniqueArray=wt,e.splitStr=ct,e.boolOrFn=X,e.hasParent=$,e.addEventListeners=ft,e.removeEventListeners=ht,e.defaults=o({},oe,{preset:ae}),e}()}()},1845:function(t,e,n){"use strict";n.d(e,{A:function(){return M}});var r=n(1362),i=n(6082),o=n(4326),a=n(7575);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}var u=["3857","900913","3785","102113"];var l=function(t){if(!function(t){return"string"==typeof t}(t))return"projName"in t?t:(0,i.A)(t);if(function(t){return t in r.A}(t))return r.A[t];if(function(t){return 0!==t.indexOf("+")&&-1!==t.indexOf("[")||"object"===s(t)&&!("srsCode"in t)}(t)){var e=(0,i.A)(t);if(function(t){var e=(0,a.A)(t,"authority");if(e){var n=(0,a.A)(e,"epsg");return n&&u.indexOf(n)>-1}}(e))return r.A["EPSG:3857"];var n=function(t){var e=(0,a.A)(t,"extension");if(e)return(0,a.A)(e,"proj4")}(e);return n?(0,o.A)(n):e}return function(t){return"+"===t[0]}(t)?(0,o.A)(t):void 0};function c(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t}var f=n(7272),h=n(7e3),d={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},p=d.WGS84;var m={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var g in m){var y=m[g];y.datumName&&(m[y.datumName]=y)}var v=m;var x=function(t,e,n,r,i,o,a){var s={};return s.datum_type=void 0===t||"none"===t?h.A1:h.xK,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=h.a8),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=h.Y$,s.datum_params[3]*=h._3,s.datum_params[4]*=h._3,s.datum_params[5]*=h._3,s.datum_params[6]=s.datum_params[6]/1e6+1))),a&&(s.datum_type=h.G9,s.grids=a),s.a=n,s.b=r,s.es=i,s.ep2=o,s},_=n(8201);function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function w(t,e){if(!(this instanceof w))return new w(t);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(t){if(t)throw t};var n=l(t);if("object"===b(n)){var r=w.projections.get(n.projName);if(r){if(n.datumCode&&"none"!==n.datumCode){var i=(0,a.A)(v,n.datumCode);i&&(n.datum_params=n.datum_params||(i.towgs84?i.towgs84.split(","):null),n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var o,s,u,f,m,g,y,M=function(t,e,n,r,i){if(!t){var o=(0,a.A)(d,r);o||(o=p),t=o.a,e=o.b,n=o.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<h.H0)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}(n.a,n.b,n.rf,n.ellps,n.sphere),A=(o=M.a,s=M.b,M.rf,u=n.R_A,g=((f=o*o)-(m=s*s))/f,y=0,u?(f=(o*=1-g*(h.bA+g*(h.Q1+g*h.ej)))*o,g=0):y=Math.sqrt(g),{es:g,e:y,ep2:(f-m)/m}),E=(0,_.f)(n.nadgrids),T=n.datum||x(n.datumCode,n.datum_params,M.a,M.b,A.es,A.ep2,E);c(this,n),c(this,r),this.a=M.a,this.b=M.b,this.rf=M.rf,this.sphere=M.sphere,this.es=A.es,this.e=A.e,this.ep2=A.ep2,this.datum=T,"init"in this&&"function"==typeof this.init&&this.init(),e(null,this)}else e("Could not get projection name from: "+t)}else e("Could not parse to valid json: "+t)}w.projections=f.Ay,w.projections.start();var M=w},6165:function(t,e,n){"use strict";n.d(e,{A:function(){return o}});var r=n(7e3),i=n(9393);function o(t){return Math.abs(t)<r.sK?t:t-(0,i.A)(t)*Math.PI}},6269:function(t,e,n){"use strict";n.d(e,{A:function(){return o}});var r=n(7e3),i=n(9393);function o(t,e){return e||Math.abs(t)<=r.DF?t:t-(0,i.A)(t)*r.JM}},8597:function(t,e,n){"use strict";function r(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}n.d(e,{A:function(){return r}})},6449:function(t,e,n){"use strict";function r(t){var e=Math.exp(t);return e=(e+1/e)/2}n.d(e,{A:function(){return r}})},1341:function(t,e,n){"use strict";function r(t){return 1-.25*t*(1+t/16*(3+1.25*t))}n.d(e,{A:function(){return r}})},7954:function(t,e,n){"use strict";function r(t){return.375*t*(1+.25*t*(1+.46875*t))}n.d(e,{A:function(){return r}})},3611:function(t,e,n){"use strict";function r(t){return.05859375*t*t*(1+.75*t)}n.d(e,{A:function(){return r}})},4280:function(t,e,n){"use strict";function r(t){return t*t*t*(35/3072)}n.d(e,{A:function(){return r}})},2889:function(t,e,n){"use strict";function r(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}n.d(e,{A:function(){return r}})},4424:function(t,e,n){"use strict";function r(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}n.d(e,{A:function(){return r}})},364:function(t,e,n){"use strict";function r(t,e,n,r,i){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN}n.d(e,{A:function(){return r}})},1417:function(t,e,n){"use strict";function r(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}n.d(e,{A:function(){return r}})},7072:function(t,e,n){"use strict";function r(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}n.d(e,{A:function(){return r}})},6157:function(t,e,n){"use strict";n.d(e,{A:function(){return i}});var r=n(7e3);function i(t,e){for(var n,i,o=.5*t,a=r.sK-2*Math.atan(e),s=0;s<=15;s++)if(n=t*Math.sin(a),a+=i=r.sK-2*Math.atan(e*Math.pow((1-n)/(1+n),o))-a,Math.abs(i)<=1e-10)return a;return-9999}},6194:function(t,e,n){"use strict";n.d(e,{A:function(){return m}});var r=1,i=.25,o=.046875,a=.01953125,s=.01068115234375,u=.75,l=.46875,c=.013020833333333334,f=.007120768229166667,h=.3645833333333333,d=.005696614583333333,p=.3076171875;function m(t){var e=[];e[0]=r-t*(i+t*(o+t*(a+t*s))),e[1]=t*(u-t*(o+t*(a+t*s)));var n=t*t;return e[2]=n*(l-t*(c+t*f)),n*=t,e[3]=n*(h-t*d),e[4]=n*t*p,e}},112:function(t,e,n){"use strict";n.d(e,{A:function(){return a}});var r=n(3712),i=n(7e3),o=20;function a(t,e,n){for(var a=1/(1-e),s=t,u=o;u;--u){var l=Math.sin(s),c=1-e*l*l;if(s-=c=((0,r.A)(s,l,Math.cos(s),n)-t)*(c*Math.sqrt(c))*a,Math.abs(c)<i.H0)return s}return s}},3712:function(t,e,n){"use strict";function r(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}n.d(e,{A:function(){return r}})},5964:function(t,e,n){"use strict";function r(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e}n.d(e,{A:function(){return r}})},9393:function(t,e,n){"use strict";function r(t){return t<0?-1:1}n.d(e,{A:function(){return r}})},7897:function(t,e,n){"use strict";function r(t){var e=Math.exp(t);return e=(e-1/e)/2}n.d(e,{A:function(){return r}})},851:function(t,e,n){"use strict";n.d(e,{A:function(){return i}});var r=n(7e3);function i(t,e,n){var i=t*n,o=.5*t;return i=Math.pow((1-i)/(1+i),o),Math.tan(.5*(r.sK-e))/i}},7e3:function(t,e,n){"use strict";n.d(e,{A1:function(){return s},DF:function(){return b},G9:function(){return o},H0:function(){return g},JM:function(){return _},Q1:function(){return p},Vj:function(){return x},Y$:function(){return i},_3:function(){return f},a8:function(){return r},bA:function(){return d},bv:function(){return u},dX:function(){return v},ej:function(){return m},gS:function(){return c},sK:function(){return h},xK:function(){return a},zp:function(){return l},zq:function(){return y}});var r=1,i=2,o=3,a=4,s=5,u=6378137,l=6356752.314,c=.0066943799901413165,f=484813681109536e-20,h=Math.PI/2,d=.16666666666666666,p=.04722222222222222,m=.022156084656084655,g=1e-10,y=.017453292519943295,v=57.29577951308232,x=Math.PI/4,_=2*Math.PI,b=3.14159265359},3356:function(t,e,n){"use strict";n.d(e,{Fs:function(){return u},OI:function(){return i},Rw:function(){return a},jX:function(){return o},mj:function(){return s}});var r=n(7e3);function i(t,e){return t.datum_type===e.datum_type&&(!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===r.a8?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==r.Y$||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]))}function o(t,e,n){var i,o,a,s,u=t.x,l=t.y,c=t.z?t.z:0;if(l<-r.sK&&l>-1.001*r.sK)l=-r.sK;else if(l>r.sK&&l<1.001*r.sK)l=r.sK;else{if(l<-r.sK)return{x:-1/0,y:-1/0,z:t.z};if(l>r.sK)return{x:1/0,y:1/0,z:t.z}}return u>Math.PI&&(u-=2*Math.PI),o=Math.sin(l),s=Math.cos(l),a=o*o,{x:((i=n/Math.sqrt(1-e*a))+c)*s*Math.cos(u),y:(i+c)*s*Math.sin(u),z:(i*(1-e)+c)*o}}function a(t,e,n,i){var o,a,s,u,l,c,f,h,d,p,m,g,y,v,x,_=1e-12,b=t.x,w=t.y,M=t.z?t.z:0;if(o=Math.sqrt(b*b+w*w),a=Math.sqrt(b*b+w*w+M*M),o/n<_){if(v=0,a/n<_)return r.sK,x=-i,{x:t.x,y:t.y,z:t.z}}else v=Math.atan2(w,b);s=M/a,h=(u=o/a)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*u*u)),d=s*l,y=0;do{y++,c=e*(f=n/Math.sqrt(1-e*d*d))/(f+(x=o*h+M*d-f*(1-e*d*d))),g=(m=s*(l=1/Math.sqrt(1-c*(2-c)*u*u)))*h-(p=u*(1-c)*l)*d,h=p,d=m}while(g*g>1e-24&&y<30);return{x:v,y:Math.atan(m/Math.abs(p)),z:x}}function s(t,e,n){if(e===r.a8)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===r.Y$){var i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],l=n[5],c=n[6];return{x:c*(t.x-l*t.y+u*t.z)+i,y:c*(l*t.x+t.y-s*t.z)+o,z:c*(-u*t.x+s*t.y+t.z)+a}}}function u(t,e,n){if(e===r.a8)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===r.Y$){var i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],l=n[5],c=n[6],f=(t.x-i)/c,h=(t.y-o)/c,d=(t.z-a)/c;return{x:f+l*h-u*d,y:-l*f+h+s*d,z:u*f-s*h+d}}}},1362:function(t,e,n){"use strict";n.d(e,{A:function(){return s}});var r=n(4326),i=n(6082);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?a[t]=(0,r.A)(arguments[1]):a[t]=(0,i.A)(arguments[1]):n&&"object"===o(n)&&!("projName"in n)?a[t]=(0,i.A)(arguments[1]):(a[t]=n,n||delete a[t])}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){return Array.isArray(t)?a.apply(e,t):a(t)});if("string"==typeof t){if(t in a)return a[t]}else"EPSG"in t?a["EPSG:"+t.EPSG]=t:"ESRI"in t?a["ESRI:"+t.ESRI]=t:"IAU2000"in t?a["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(a);var s=a},9677:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return bt}});var r=n(1845),i=n(7e3),o=n(3356),a=n(6269);function s(t){return t===i.a8||t===i.Y$}function u(t,e,n){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;var r={x:-n.x,y:n.y},o={x:Number.NaN,y:Number.NaN},a=[];t:for(var s=0;s<t.grids.length;s++){var u=t.grids[s];if(a.push(u.name),u.isNull){o=r;break}if(null!==u.grid)for(var c=u.grid.subgrids,f=0,h=c.length;f<h;f++){var d=c[f],p=(Math.abs(d.del[1])+Math.abs(d.del[0]))/1e4,m=d.ll[0]-p,g=d.ll[1]-p,y=d.ll[0]+(d.lim[0]-1)*d.del[0]+p,v=d.ll[1]+(d.lim[1]-1)*d.del[1]+p;if(!(g>r.y||m>r.x||v<r.y||y<r.x)&&(o=l(r,e,d),!isNaN(o.x)))break t}else if(u.mandatory)return console.log("Unable to find mandatory grid '"+u.name+"'"),-1}return isNaN(o.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*i.dX+" "+r.y*i.dX+" tried: '"+a+"'"),-1):(n.x=-o.x,n.y=o.y,0)}function l(t,e,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var i={x:t.x,y:t.y};i.x-=n.ll[0],i.y-=n.ll[1],i.x=(0,a.A)(i.x-Math.PI)+Math.PI;var o=c(i,n);if(e){if(isNaN(o.x))return r;o.x=i.x-o.x,o.y=i.y-o.y;var s,u,l=9;do{if(u=c(o,n),isNaN(u.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}s={x:i.x-(u.x+o.x),y:i.y-(u.y+o.y)},o.x+=s.x,o.y+=s.y}while(l--&&Math.abs(s.x)>1e-12&&Math.abs(s.y)>1e-12);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=(0,a.A)(o.x+n.ll[0]),r.y=o.y+n.ll[1]}else isNaN(o.x)||(r.x=t.x+o.x,r.y=t.y+o.y);return r}function c(t,e){var n,r={x:t.x/e.del[0],y:t.y/e.del[1]},i=Math.floor(r.x),o=Math.floor(r.y),a=r.x-1*i,s=r.y-1*o,u={x:Number.NaN,y:Number.NaN};if(i<0||i>=e.lim[0])return u;if(o<0||o>=e.lim[1])return u;n=o*e.lim[0]+i;var l=e.cvs[n][0],c=e.cvs[n][1];n++;var f=e.cvs[n][0],h=e.cvs[n][1];n+=e.lim[0];var d=e.cvs[n][0],p=e.cvs[n][1];n--;var m=e.cvs[n][0],g=e.cvs[n][1],y=a*s,v=a*(1-s),x=(1-a)*(1-s),_=(1-a)*s;return u.x=x*l+v*f+_*m+y*d,u.y=x*c+v*h+_*g+y*p,u}function f(t,e,n){var r,i,o,a=n.x,s=n.y,u=n.z||0,l={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(r=a,i=-1!=="ew".indexOf(t.axis[o])?"x":"y"):1===o?(r=s,i=-1!=="ns".indexOf(t.axis[o])?"y":"x"):(r=u,i="z"),t.axis[o]){case"e":case"n":l[i]=r;break;case"w":case"s":l[i]=-r;break;case"u":void 0!==n[i]&&(l.z=r);break;case"d":void 0!==n[i]&&(l.z=-r);break;default:return null}return l}function h(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function d(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function p(t,e,n,a){var l,c=void 0!==(n=Array.isArray(n)?h(n):{x:n.x,y:n.y,z:n.z,m:n.m}).z;if(function(t){d(t.x),d(t.y)}(n),t.datum&&e.datum&&function(t,e){return(t.datum.datum_type===i.a8||t.datum.datum_type===i.Y$||t.datum.datum_type===i.G9)&&"WGS84"!==e.datumCode||(e.datum.datum_type===i.a8||e.datum.datum_type===i.Y$||e.datum.datum_type===i.G9)&&"WGS84"!==t.datumCode}(t,e)&&(n=p(t,l=new r.A("WGS84"),n,a),t=l),a&&"enu"!==t.axis&&(n=f(t,!1,n)),"longlat"===t.projName)n={x:n.x*i.zq,y:n.y*i.zq,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),!(n=t.inverse(n)))return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=function(t,e,n){if((0,o.OI)(t,e))return n;if(t.datum_type===i.A1||e.datum_type===i.A1)return n;var r=t.a,a=t.es;if(t.datum_type===i.G9){if(0!==u(t,!1,n))return;r=i.bv,a=i.gS}var l=e.a,c=e.b,f=e.es;if(e.datum_type===i.G9&&(l=i.bv,c=i.zp,f=i.gS),a===f&&r===l&&!s(t.datum_type)&&!s(e.datum_type))return n;if(n=(0,o.jX)(n,a,r),s(t.datum_type)&&(n=(0,o.mj)(n,t.datum_type,t.datum_params)),s(e.datum_type)&&(n=(0,o.Fs)(n,e.datum_type,e.datum_params)),n=(0,o.Rw)(n,f,l,c),e.datum_type===i.G9&&0!==u(e,!0,n))return;return n}(t.datum,e.datum,n),n)return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*i.dX,y:n.y*i.dX,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),a&&"enu"!==e.axis?f(e,!0,n):(n&&!c&&delete n.z,n)}function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}var g=(0,r.A)("WGS84");function y(t,e,n,r){var i,o,a;return Array.isArray(n)?(i=p(t,e,n,r)||{x:NaN,y:NaN},n.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof i.z?[i.x,i.y,i.z].concat(n.slice(3)):[i.x,i.y,n[2]].concat(n.slice(3)):[i.x,i.y].concat(n.slice(2)):[i.x,i.y]):(o=p(t,e,n,r),2===(a=Object.keys(n)).length||a.forEach(function(r){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;o[r]=n[r]}),o)}function v(t){return t instanceof r.A?t:"object"===m(t)&&"oProj"in t?t.oProj:(0,r.A)(t)}var x=function(t,e,n){var r,i,o,a=!1;return void 0===e?(i=v(t),r=g,a=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,i=v(t),r=g,a=!0),r||(r=v(t)),i||(i=v(e)),n?y(r,i,n):(o={forward:function(t,e){return y(r,i,t,e)},inverse:function(t,e){return y(i,r,t,e)}},a&&(o.oProj=i),o)},_="AJSAJS",b="AFAFAF",w=65,M=73,A=79,E=86,T=90,S={forward:C,inverse:function(t){var e=L(D(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:k};function C(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(d=t.easting,p=t.northing,m=t.zoneNumber,g=R(m),y=Math.floor(d/1e5),v=Math.floor(p/1e5)%20,i=y,o=v,a=g,s=a-1,u=_.charCodeAt(s),l=b.charCodeAt(s),c=u+i-1,f=l+o,h=!1,c>T&&(c=c-T+w-1,h=!0),(c===M||u<M&&c>M||(c>M||u<M)&&h)&&c++,(c===A||u<A&&c>A||(c>A||u<A)&&h)&&++c===M&&c++,c>T&&(c=c-T+w-1),f>E?(f=f-E+w-1,h=!0):h=!1,(f===M||l<M&&f>M||(f>M||l<M)&&h)&&f++,(f===A||l<A&&f>A||(f>A||l<A)&&h)&&++f===M&&f++,f>E&&(f=f-E+w-1),String.fromCharCode(c)+String.fromCharCode(f))+n.substr(n.length-5,e)+r.substr(r.length-5,e);var i,o,a,s,u,l,c,f,h;var d,p,m,g,y,v}(function(t){var e,n,r,i,o,a,s,u,l=t.lat,c=t.lon,f=6378137,h=.00669438,d=.9996,p=P(l),m=P(c);u=Math.floor((c+180)/6)+1,180===c&&(u=60);l>=56&&l<64&&c>=3&&c<12&&(u=32);l>=72&&l<84&&(c>=0&&c<9?u=31:c>=9&&c<21?u=33:c>=21&&c<33?u=35:c>=33&&c<42&&(u=37));s=P(6*(u-1)-180+3),e=h/(1-h),n=f/Math.sqrt(1-h*Math.sin(p)*Math.sin(p)),r=Math.tan(p)*Math.tan(p),i=e*Math.cos(p)*Math.cos(p),o=Math.cos(p)*(m-s),a=f*((1-h/4-3*h*h/64-5*h*h*h/256)*p-(3*h/8+3*h*h/32+45*h*h*h/1024)*Math.sin(2*p)+(15*h*h/256+45*h*h*h/1024)*Math.sin(4*p)-35*h*h*h/3072*Math.sin(6*p));var g=d*n*(o+(1-r+i)*o*o*o/6+(5-18*r+r*r+72*i-58*e)*o*o*o*o*o/120)+5e5,y=d*(a+n*Math.tan(p)*(o*o/2+(5-r+9*i+4*i*i)*o*o*o*o/24+(61-58*r+r*r+600*i-330*e)*o*o*o*o*o*o/720));l<0&&(y+=1e7);return{northing:Math.round(y),easting:Math.round(g),zoneNumber:u,zoneLetter:I(l)}}({lat:t[1],lon:t[0]}),e)}function k(t){var e=L(D(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function P(t){return t*(Math.PI/180)}function O(t){return t/Math.PI*180}function L(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,a,s,u,l,c,f,h,d,p=.9996,m=6378137,g=.00669438,y=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),v=n-5e5,x=e;r<"N"&&(x-=1e7),f=6*(i-1)-180+3,o=.006739496752268451,d=(h=x/p/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*h)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*h)+151*y*y*y/96*Math.sin(6*h),a=m/Math.sqrt(1-g*Math.sin(d)*Math.sin(d)),s=Math.tan(d)*Math.tan(d),u=o*Math.cos(d)*Math.cos(d),l=.99330562*m/Math.pow(1-g*Math.sin(d)*Math.sin(d),1.5),c=v/(a*p);var _=d-a*Math.tan(d)/l*(c*c/2-(5+3*s+10*u-4*u*u-9*o)*c*c*c*c/24+(61+90*s+298*u+45*s*s-1.6983531815716497-3*u*u)*c*c*c*c*c*c/720);_=O(_);var b,w=(c-(1+2*s+u)*c*c*c/6+(5-2*u+28*s-3*u*u+8*o+24*s*s)*c*c*c*c*c/120)/Math.cos(d);if(w=f+O(w),t.accuracy){var M=L({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});b={top:M.lat,right:M.lon,bottom:_,left:w}}else b={lat:_,lon:w};return b}function I(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function R(t){var e=t%6;return 0===e&&(e=6),e}function D(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,r=null,i="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,o++}var a=parseInt(i,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;r=t.substring(o,o+=2);for(var u=R(a),l=function(t,e){var n=_.charCodeAt(e-1),r=1e5,i=!1;for(;n!==t.charCodeAt(0);){if(++n===M&&n++,n===A&&n++,n>T){if(i)throw"Bad character: "+t;n=w,i=!0}r+=1e5}return r}(r.charAt(0),u),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n=b.charCodeAt(e-1),r=0,i=!1;for(;n!==t.charCodeAt(0);){if(++n===M&&n++,n===A&&n++,n>E){if(i)throw"Bad character: "+t;n=w,i=!0}r+=1e5}return r}(r.charAt(1),u);c<N(s);)c+=2e6;var f=n-o;if(f%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var h,d,p,m=f/2,g=0,y=0;return m>0&&(h=1e5/Math.pow(10,m),d=t.substring(o,o+m),g=parseFloat(d)*h,p=t.substring(o+m),y=parseFloat(p)*h),{easting:g+l,northing:y+c,zoneLetter:s,zoneNumber:a,accuracy:h}}function N(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function j(t,e,n){if(!(this instanceof j))return new j(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"===F(t))this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var r=t.split(",");this.x=parseFloat(r[0]),this.y=parseFloat(r[1]),this.z=parseFloat(r[2])||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}j.fromMGRS=function(t){return new j(k(t))},j.prototype.toMGRS=function(t){return C([this.x,this.y],t)};var z=j,G=n(1362),B=n(8201),V=n(5518),q=n(3426),U=n(2924),H=n(6789),W=n(3084),X=n(9872),K=n(431),Q=n(993),Y=n(6167),$=n(3245),Z=n(8506),J=n(4894),tt=n(5106),et=n(8104),nt=n(780),rt=n(741),it=n(6731),ot=n(969),at=n(1034),st=n(6155),ut=n(7724),lt=n(6671),ct=n(6014),ft=n(6145),ht=n(2513),dt=n(8067),pt=n(5904),mt=n(251),gt=n(1017),yt=n(8197),vt=n(9265),xt=n(4076);var _t=Object.assign(x,{defaultDatum:"WGS84",Proj:r.A,WGS84:new r.A("WGS84"),Point:z,toPoint:h,defs:G.A,nadgrid:B.A,transform:p,mgrs:S,version:"__VERSION__"});!function(t){t.Proj.projections.add(V.default),t.Proj.projections.add(q.default),t.Proj.projections.add(U.default),t.Proj.projections.add(H.default),t.Proj.projections.add(W.default),t.Proj.projections.add(X.default),t.Proj.projections.add(K.default),t.Proj.projections.add(Q.default),t.Proj.projections.add(Y.default),t.Proj.projections.add($.default),t.Proj.projections.add(Z.default),t.Proj.projections.add(J.default),t.Proj.projections.add(tt.default),t.Proj.projections.add(et.default),t.Proj.projections.add(nt.default),t.Proj.projections.add(rt.default),t.Proj.projections.add(it.default),t.Proj.projections.add(ot.default),t.Proj.projections.add(at.default),t.Proj.projections.add(st.default),t.Proj.projections.add(ut.default),t.Proj.projections.add(lt.default),t.Proj.projections.add(ct.default),t.Proj.projections.add(ft.default),t.Proj.projections.add(ht.default),t.Proj.projections.add(dt.default),t.Proj.projections.add(pt.default),t.Proj.projections.add(mt.default),t.Proj.projections.add(gt.default),t.Proj.projections.add(yt.default),t.Proj.projections.add(vt.default),t.Proj.projections.add(xt.default)}(_t);var bt=_t},7575:function(t,e,n){"use strict";n.d(e,{A:function(){return i}});var r=/[\s_\-\/\(\)]/g;function i(t,e){if(t[e])return t[e];for(var n,i=Object.keys(t),o=e.toLowerCase().replace(r,""),a=-1;++a<i.length;)if((n=i[a]).toLowerCase().replace(r,"")===o)return t[n]}},8201:function(t,e,n){"use strict";function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function s(n,r,o,a){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return i(c,"_invoke",function(n,r,i){var o,a,s,l=0,c=i||[],f=!1,h={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return o=e,a=0,s=t,h.n=n,u}};function d(n,r){for(a=n,s=r,e=0;!f&&l&&!i&&e<c.length;e++){var i,o=c[e],d=h.p,p=o[2];n>3?(i=p===r)&&(s=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=t):o[0]<=d&&((i=n<2&&d<o[1])?(a=0,h.v=r,h.n=o[1]):d<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,h.n=p,a=0))}if(i||n>1)return u;throw f=!0,r}return function(i,c,p){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&d(c,p),a=c,s=p;(e=a<2?t:s)||!f;){o||(a?a<3?(a>1&&(h.n=-1),d(a,s)):h.n=s:h.v=s);try{if(l=2,o){if(a||(i="next"),e=o[i]){if(!(e=e.call(o,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,a<2&&(a=0)}else 1===a&&(e=o.return)&&e.call(o),a<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=t}else if((e=(f=h.n<0)?s:n.call(r,h))!==u)break}catch(e){o=t,a=1,s=e}finally{l=1}}return{value:e,done:f}}}(n,o,a),!0),c}var u={};function l(){}function c(){}function f(){}e=Object.getPrototypeOf;var h=[][o]?e(e([][o]())):(i(e={},o,function(){return this}),e),d=f.prototype=l.prototype=Object.create(h);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,i(t,a,"GeneratorFunction")),t.prototype=Object.create(d),t}return c.prototype=f,i(d,"constructor",f),i(f,"constructor",c),c.displayName="GeneratorFunction",i(f,a,"GeneratorFunction"),i(d),i(d,a,"Generator"),i(d,o,function(){return this}),i(d,"toString",function(){return"[object Generator]"}),(r=function(){return{w:s,m:p}})()}function i(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}i=function(t,e,n,r){function a(e,n){i(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},i(t,e,n,r)}function o(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}n.d(e,{A:function(){return s},f:function(){return c}});var a={};function s(t,e,n){return e instanceof ArrayBuffer?function(t,e,n){var r=!0;void 0!==n&&!1===n.includeErrorFields&&(r=!1);var i=new DataView(e),o=function(t){var e=t.getInt32(8,!1);if(11===e)return!1;e=t.getInt32(8,!0),11!==e&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian");return!0}(i),s=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:p(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(i,o),u=function(t,e,n,r){for(var i=176,o=[],a=0;a<e.nSubgrids;a++){var s=g(t,i,n),u=y(t,i,s,n,r),l=Math.round(1+(s.upperLongitude-s.lowerLongitude)/s.longitudeInterval),c=Math.round(1+(s.upperLatitude-s.lowerLatitude)/s.latitudeInterval);o.push({ll:[d(s.lowerLongitude),d(s.lowerLatitude)],del:[d(s.longitudeInterval),d(s.latitudeInterval)],lim:[l,c],count:s.gridNodeCount,cvs:m(u)});var f=16;!1===r&&(f=8),i+=176+s.gridNodeCount*f}return o}(i,s,o,r),l={header:s,subgrids:u};return a[t]=l,l}(t,e,n):{ready:u(t,e)}}function u(t,e){return l.apply(this,arguments)}function l(){var t;return t=r().m(function t(e,n){var i,o,s,u,l,c,f,p,m,g,y,v,x,_,b,w,M,A;return r().w(function(t){for(;;)switch(t.n){case 0:return i=[],t.n=1,n.getImageCount();case 1:o=t.v,s=o-1;case 2:if(!(s>=0)){t.n=6;break}return t.n=3,n.getImage(s);case 3:return u=t.v,t.n=4,u.readRasters();case 4:for(l=t.v,c=l,f=[u.getWidth(),u.getHeight()],p=u.getBoundingBox().map(h),m=[u.fileDirectory.ModelPixelScale[0],u.fileDirectory.ModelPixelScale[1]].map(h),g=p[0]+(f[0]-1)*m[0],y=p[3]-(f[1]-1)*m[1],v=c[0],x=c[1],_=[],b=f[1]-1;b>=0;b--)for(w=f[0]-1;w>=0;w--)M=b*f[0]+w,_.push([-d(x[M]),d(v[M])]);i.push({del:m,lim:f,ll:[-g,y],cvs:_});case 5:s--,t.n=2;break;case 6:return A={header:{nSubgrids:o},subgrids:i},a[e]=A,t.a(2,A)}},t)}),l=function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function s(t){o(a,r,i,s,u,"next",t)}function u(t){o(a,r,i,s,u,"throw",t)}s(void 0)})},l.apply(this,arguments)}function c(t){return void 0===t?null:t.split(",").map(f)}function f(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:a[t]||null,isNull:!1}}function h(t){return t*Math.PI/180}function d(t){return t/3600*Math.PI/180}function p(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function m(t){return t.map(function(t){return[d(t.longitudeShift),d(t.latitudeShift)]})}function g(t,e,n){return{name:p(t,e+8,e+16).trim(),parent:p(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function y(t,e,n,r,i){var o=e+176,a=16;!1===i&&(a=8);for(var s=[],u=0;u<n.gridNodeCount;u++){var l={latitudeShift:t.getFloat32(o+u*a,r),longitudeShift:t.getFloat32(o+u*a+4,r)};!1!==i&&(l.latitudeAccuracy=t.getFloat32(o+u*a+8,r),l.longitudeAccuracy=t.getFloat32(o+u*a+12,r)),s.push(l)}return s}},4326:function(t,e,n){"use strict";n.d(e,{A:function(){return u}});var r=n(7e3),i={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},o=i,a={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}},s=n(7575);function u(t){var e,n,i,u={},l=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t},{}),c={proj:"projName",datum:"datumCode",rf:function(t){u.rf=parseFloat(t)},lat_0:function(t){u.lat0=t*r.zq},lat_1:function(t){u.lat1=t*r.zq},lat_2:function(t){u.lat2=t*r.zq},lat_ts:function(t){u.lat_ts=t*r.zq},lon_0:function(t){u.long0=t*r.zq},lon_1:function(t){u.long1=t*r.zq},lon_2:function(t){u.long2=t*r.zq},alpha:function(t){u.alpha=parseFloat(t)*r.zq},gamma:function(t){u.rectified_grid_angle=parseFloat(t)*r.zq},lonc:function(t){u.longc=t*r.zq},x_0:function(t){u.x0=parseFloat(t)},y_0:function(t){u.y0=parseFloat(t)},k_0:function(t){u.k0=parseFloat(t)},k:function(t){u.k0=parseFloat(t)},a:function(t){u.a=parseFloat(t)},b:function(t){u.b=parseFloat(t)},r:function(t){u.a=u.b=parseFloat(t)},r_a:function(){u.R_A=!0},zone:function(t){u.zone=parseInt(t,10)},south:function(){u.utmSouth=!0},towgs84:function(t){u.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){u.to_meter=parseFloat(t)},units:function(t){u.units=t;var e=(0,s.A)(a,t);e&&(u.to_meter=e.to_meter)},from_greenwich:function(t){u.from_greenwich=t*r.zq},pm:function(t){var e=(0,s.A)(o,t);u.from_greenwich=(e||parseFloat(t))*r.zq},nadgrids:function(t){"@null"===t?u.datumCode="none":u.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(u.axis=t)},approx:function(){u.approx=!0},over:function(){u.over=!0}};for(e in l)n=l[e],e in c?"function"==typeof(i=c[e])?i(n):u[i]=n:u[e]=n;return"string"==typeof u.datumCode&&"WGS84"!==u.datumCode&&(u.datumCode=u.datumCode.toLowerCase()),u.projStr=t,u}},7272:function(t,e,n){"use strict";n.d(e,{Cx:function(){return l}});var r=n(9402),i=n(2308),o=[r.default,i.default],a={},s=[];function u(t,e){var n=s.length;return t.names?(s[n]=t,t.names.forEach(function(t){a[t.toLowerCase()]=n}),this):(console.log(e),!0)}function l(t){return t.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}e.Ay={start:function(){o.forEach(u)},add:u,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==a[e]&&s[a[e]]||(e=l(e))in a&&s[a[e]]?s[a[e]]:void 0}}},4894:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return l},init:function(){return u},inverse:function(){return c},names:function(){return h},phi1z:function(){return f}});var r=n(7072),i=n(5964),o=n(6269),a=n(8597),s=n(7e3);function u(){Math.abs(this.lat1+this.lat2)<s.H0||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=(0,r.A)(this.e3,this.sin_po,this.cos_po),this.qs1=(0,i.A)(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=(0,r.A)(this.e3,this.sin_po,this.cos_po),this.qs2=(0,i.A)(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=(0,i.A)(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>s.H0?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function l(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=(0,i.A)(this.e3,this.sin_phi),a=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*(0,o.A)(e-this.long0,this.over),u=a*Math.sin(s)+this.x0,l=this.rh-a*Math.cos(s)+this.y0;return t.x=u,t.y=l,t}function c(t){var e,n,r,i,a,s;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,0!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?s=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,s=this.phi1z(this.e3,n)),a=(0,o.A)(i/this.ns0+this.long0,this.over),t.x=a,t.y=s,t}function f(t,e){var n,r,i,o,u=(0,a.A)(.5*e);if(t<s.H0)return u;for(var l=t*t,c=1;c<=25;c++)if(u+=o=.5*(i=1-(r=t*(n=Math.sin(u)))*r)*i/Math.cos(u)*(e/(1-l)-n/i+.5/t*Math.log((1-r)/(1+r))),Math.abs(o)<=1e-7)return u;return null}var h=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];e.default={init:u,forward:l,inverse:c,names:h,phi1z:f}},6014:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return g},forward:function(){return d},init:function(){return h},inverse:function(){return p},names:function(){return m}});var r=n(6269),i=n(7e3),o=n(1417),a=n(1341),s=n(7954),u=n(3611),l=n(4280),c=n(8597),f=n(364);function h(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function d(t){var e,n,c,f,h,d,p,m,g,y,v,x=t.x,_=t.y,b=Math.sin(t.y),w=Math.cos(t.y),M=(0,r.A)(x-this.long0,this.over);return this.sphere?Math.abs(this.sin_p12-1)<=i.H0?(t.x=this.x0+this.a*(i.sK-_)*Math.sin(M),t.y=this.y0-this.a*(i.sK-_)*Math.cos(M),t):Math.abs(this.sin_p12+1)<=i.H0?(t.x=this.x0+this.a*(i.sK+_)*Math.sin(M),t.y=this.y0+this.a*(i.sK+_)*Math.cos(M),t):(g=this.sin_p12*b+this.cos_p12*w*Math.cos(M),m=(p=Math.acos(g))?p/Math.sin(p):1,t.x=this.x0+this.a*m*w*Math.sin(M),t.y=this.y0+this.a*m*(this.cos_p12*b-this.sin_p12*w*Math.cos(M)),t):(e=(0,a.A)(this.es),n=(0,s.A)(this.es),c=(0,u.A)(this.es),f=(0,l.A)(this.es),Math.abs(this.sin_p12-1)<=i.H0?(h=this.a*(0,o.A)(e,n,c,f,i.sK),d=this.a*(0,o.A)(e,n,c,f,_),t.x=this.x0+(h-d)*Math.sin(M),t.y=this.y0-(h-d)*Math.cos(M),t):Math.abs(this.sin_p12+1)<=i.H0?(h=this.a*(0,o.A)(e,n,c,f,i.sK),d=this.a*(0,o.A)(e,n,c,f,_),t.x=this.x0+(h+d)*Math.sin(M),t.y=this.y0+(h+d)*Math.cos(M),t):Math.abs(x)<i.H0&&Math.abs(_-this.lat0)<i.H0?(t.x=t.y=0,t):(v=(y=function(t,e,n,r,i,o){var a,s,u,l,c,f,h,d,p,m,g,y,v,x=r-e,_=Math.atan((1-o)*Math.tan(t)),b=Math.atan((1-o)*Math.tan(n)),w=Math.sin(_),M=Math.cos(_),A=Math.sin(b),E=Math.cos(b),T=x,S=100;do{if(s=Math.sin(T),u=Math.cos(T),0===(l=Math.sqrt(E*s*(E*s)+(M*A-w*E*u)*(M*A-w*E*u))))return{azi1:0,s12:0};c=w*A+M*E*u,a=T,T=x+(1-(m=o/16*(d=1-(h=M*E*s/l)*h)*(4+o*(4-3*d))))*o*h*((f=Math.atan2(l,c))+m*l*((p=0!==d?c-2*w*A/d:0)+m*c*(2*p*p-1)))}while(Math.abs(T-a)>1e-12&&--S>0);return 0===S?{azi1:NaN,s12:NaN}:(v=i*(1-o)*(1+(g=d*(i*i-i*(1-o)*(i*(1-o)))/(i*(1-o)*(i*(1-o))))/16384*(4096+g*(g*(320-175*g)-768)))*(f-(y=g/1024*(256+g*(g*(74-47*g)-128)))*l*(p+y/4*(c*(2*p*p-1)-y/6*p*(4*l*l-3)*(4*p*p-3)))),{azi1:Math.atan2(E*s,M*A-w*E*u),s12:v})}(this.lat0,this.long0,_,x,this.a,this.f)).azi1,t.x=y.s12*Math.sin(v),t.y=y.s12*Math.cos(v),t))}function p(t){var e,n,h,d,p,m,g,y,v,x,_,b,w,M,A,E;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*i.sK*this.a)return;return n=e/this.a,h=Math.sin(n),d=Math.cos(n),p=this.long0,Math.abs(e)<=i.H0?m=this.lat0:(m=(0,c.A)(d*this.sin_p12+t.y*h*this.cos_p12/e),g=Math.abs(this.lat0)-i.sK,p=Math.abs(g)<=i.H0?this.lat0>=0?(0,r.A)(this.long0+Math.atan2(t.x,-t.y),this.over):(0,r.A)(this.long0-Math.atan2(-t.x,t.y),this.over):(0,r.A)(this.long0+Math.atan2(t.x*h,e*this.cos_p12*d-t.y*this.sin_p12*h),this.over)),t.x=p,t.y=m,t}return y=(0,a.A)(this.es),v=(0,s.A)(this.es),x=(0,u.A)(this.es),_=(0,l.A)(this.es),Math.abs(this.sin_p12-1)<=i.H0?(w=(b=this.a*(0,o.A)(y,v,x,_,i.sK))-(e=Math.sqrt(t.x*t.x+t.y*t.y)),m=(0,f.A)(w/this.a,y,v,x,_),p=(0,r.A)(this.long0+Math.atan2(t.x,-1*t.y),this.over),t.x=p,t.y=m,t):Math.abs(this.sin_p12+1)<=i.H0?(b=this.a*(0,o.A)(y,v,x,_,i.sK),w=(e=Math.sqrt(t.x*t.x+t.y*t.y))-b,m=(0,f.A)(w/this.a,y,v,x,_),p=(0,r.A)(this.long0+Math.atan2(t.x,t.y),this.over),t.x=p,t.y=m,t):(M=Math.atan2(t.x,t.y),A=Math.sqrt(t.x*t.x+t.y*t.y),E=function(t,e,n,r,i,o){var a,s,u,l,c=Math.atan((1-o)*Math.tan(t)),f=Math.sin(c),h=Math.cos(c),d=Math.sin(n),p=Math.cos(n),m=Math.atan2(f,h*p),g=h*d,y=1-g*g,v=y*(i*i-i*(1-o)*(i*(1-o)))/(i*(1-o)*(i*(1-o))),x=1+v/16384*(4096+v*(v*(320-175*v)-768)),_=v/1024*(256+v*(v*(74-47*v)-128)),b=r/(i*(1-o)*x),w=100;do{s=Math.cos(2*m+b),a=b,b=r/(i*(1-o)*x)+_*(u=Math.sin(b))*(s+_/4*((l=Math.cos(b))*(2*s*s-1)-_/6*s*(4*u*u-3)*(4*s*s-3)))}while(Math.abs(b-a)>1e-12&&--w>0);if(0===w)return{lat2:NaN,lon2:NaN};var M=f*u-h*l*p,A=o/16*y*(4+o*(4-3*y));return{lat2:Math.atan2(f*l+h*u*p,(1-o)*Math.sqrt(g*g+M*M)),lon2:e+(Math.atan2(u*d,h*l-f*u*p)-(1-A)*o*g*(b+A*u*(s+A*l*(2*s*s-1))))}}(this.lat0,this.long0,M,A,this.a,this.f),t.x=E.lon2,t.y=E.lat2,t)}var m=["Azimuthal_Equidistant","aeqd"],g={init:h,forward:d,inverse:p,names:m}},9265:function(t,e,n){"use strict";n.r(e),n.d(e,{init:function(){return f},names:function(){return g}});var r=n(6165),i=n(6269),o=n(4424),a=n(6194),s=n(112),u=n(3712),l=n(7e3),c=1e-10;function f(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<c)throw new Error;this.es?(this.en=(0,a.A)(this.es),this.m1=(0,u.A)(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=d,this.forward=h):(Math.abs(this.phi1)+c>=l.sK?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=m,this.forward=p)}function h(t){var e,n,r,o=(0,i.A)(t.x-(this.long0||0),this.over),a=t.y;return e=this.am1+this.m1-(0,u.A)(a,n=Math.sin(a),r=Math.cos(a),this.en),n=r*o/(e*Math.sqrt(1-this.es*n*n)),t.x=e*Math.sin(n),t.y=this.am1-e*Math.cos(n),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function d(t){var e,n,a,u;if(t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a,n=(0,o.A)(t.x,t.y=this.am1-t.y),u=(0,s.A)(this.am1+this.m1-n,this.es,this.en),(e=Math.abs(u))<l.sK)e=Math.sin(u),a=n*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(u);else{if(!(Math.abs(e-l.sK)<=c))throw new Error;a=0}return t.x=(0,i.A)(a+(this.long0||0),this.over),t.y=(0,r.A)(u),t}function p(t){var e,n,r=(0,i.A)(t.x-(this.long0||0),this.over),o=t.y;return n=this.cphi1+this.phi1-o,Math.abs(n)>c?(t.x=n*Math.sin(e=r*Math.cos(o)/n),t.y=this.cphi1-n*Math.cos(e)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function m(t){var e,n;t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var a=(0,o.A)(t.x,t.y=this.cphi1-t.y);if(n=this.cphi1+this.phi1-a,Math.abs(n)>l.sK)throw new Error;return e=Math.abs(Math.abs(n)-l.sK)<=c?0:a*Math.atan2(t.x,t.y)/Math.cos(n),t.x=(0,i.A)(e+(this.long0||0),this.over),t.y=(0,r.A)(n),t}var g=["bonne","Bonne (Werner lat_1=90)"];e.default={init:f,names:g}},3245:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return p},init:function(){return d},inverse:function(){return m},names:function(){return g}});var r=n(1417),i=n(1341),o=n(7954),a=n(3611),s=n(4280),u=n(2889),l=n(6269),c=n(6165),f=n(364),h=n(7e3);function d(){this.sphere||(this.e0=(0,i.A)(this.es),this.e1=(0,o.A)(this.es),this.e2=(0,a.A)(this.es),this.e3=(0,s.A)(this.es),this.ml0=this.a*(0,r.A)(this.e0,this.e1,this.e2,this.e3,this.lat0))}function p(t){var e,n,i=t.x,o=t.y;if(i=(0,l.A)(i-this.long0,this.over),this.sphere)e=this.a*Math.asin(Math.cos(o)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(o),Math.cos(i))-this.lat0);else{var a=Math.sin(o),s=Math.cos(o),c=(0,u.A)(this.a,this.e,a),f=Math.tan(o)*Math.tan(o),h=i*Math.cos(o),d=h*h,p=this.es*s*s/(1-this.es);e=c*h*(1-d*f*(1/6-(8-f+8*p)*d/120)),n=this.a*(0,r.A)(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+c*a/s*d*(.5+(5-f+6*p)*d/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function m(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var a=this.ml0/this.a+i,s=(0,f.A)(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-h.sK)<=h.H0)return t.x=this.long0,t.y=h.sK,i<0&&(t.y*=-1),t;var d=(0,u.A)(this.a,this.e,Math.sin(s)),p=d*d*d/this.a/this.a*(1-this.es),m=Math.pow(Math.tan(s),2),g=r*this.a/d,y=g*g;e=s-d*Math.tan(s)/p*g*g*(.5-(1+3*m)*g*g/24),n=g*(1-y*(m/3+(1+3*m)*m*y/15))/Math.cos(s)}return t.x=(0,l.A)(n+this.long0,this.over),t.y=(0,c.A)(e),t}var g=["Cassini","Cassini_Soldner","cass"];e.default={init:d,forward:p,inverse:m,names:g}},8104:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return f},forward:function(){return u},init:function(){return s},inverse:function(){return l},names:function(){return c}});var r=n(6269),i=n(5964),o=n(7072),a=n(7e3);function s(){this.sphere||(this.k0=(0,o.A)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function u(t){var e,n,o=t.x,a=t.y,s=(0,r.A)(o-this.long0,this.over);if(this.sphere)e=this.x0+this.a*s*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(a)/Math.cos(this.lat_ts);else{var u=(0,i.A)(this.e,Math.sin(a));e=this.x0+this.a*this.k0*s,n=this.y0+this.a*u*.5/this.k0}return t.x=e,t.y=n,t}function l(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=(0,r.A)(this.long0+t.x/this.a/Math.cos(this.lat_ts),this.over),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*a.sK:a.sK;for(var r,i,o,s,u=Math.asin(.5*e),l=0;l<30;l++)if(i=Math.sin(u),o=Math.cos(u),s=t*i,u+=r=Math.pow(1-s*s,2)/(2*o)*(e/(1-t*t)-i/(1-s*s)+.5/t*Math.log((1-s)/(1+s))),Math.abs(r)<=1e-10)return u;return NaN}(this.e,2*t.y*this.k0/this.a),e=(0,r.A)(this.long0+t.x/(this.a*this.k0),this.over)),t.x=e,t.y=n,t}var c=["cea"],f={init:s,forward:u,inverse:l,names:c}},780:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return a},init:function(){return o},inverse:function(){return s},names:function(){return u}});var r=n(6269),i=n(6165);function o(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function a(t){var e=t.x,n=t.y,o=(0,r.A)(e-this.long0,this.over),a=(0,i.A)(n-this.lat0);return t.x=this.x0+this.a*o*this.rc,t.y=this.y0+this.a*a,t}function s(t){var e=t.x,n=t.y;return t.x=(0,r.A)(this.long0+(e-this.x0)/(this.a*this.rc),this.over),t.y=(0,i.A)(this.lat0+(n-this.y0)/this.a),t}var u=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];e.default={init:o,forward:a,inverse:s,names:u}},7724:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return p},init:function(){return d},inverse:function(){return m},names:function(){return g}});var r=n(1341),i=n(7954),o=n(3611),a=n(4280),s=n(7072),u=n(1417),l=n(6269),c=n(6165),f=n(364),h=n(7e3);function d(){Math.abs(this.lat1+this.lat2)<h.H0||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=(0,r.A)(this.es),this.e1=(0,i.A)(this.es),this.e2=(0,o.A)(this.es),this.e3=(0,a.A)(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=(0,s.A)(this.e,this.sin_phi,this.cos_phi),this.ml1=(0,u.A)(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<h.H0?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=(0,s.A)(this.e,this.sin_phi,this.cos_phi),this.ml2=(0,u.A)(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=(0,u.A)(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function p(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=(0,u.A)(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var o=this.ns*(0,l.A)(n-this.long0,this.over),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t}function m(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=(0,l.A)(this.long0+o/this.ns,this.over),r=(0,c.A)(this.g-n/this.a),t.x=i,t.y=r,t;var a=this.g-n/this.a;return r=(0,f.A)(a,this.e0,this.e1,this.e2,this.e3),i=(0,l.A)(this.long0+o/this.ns,this.over),t.x=i,t.y=r,t}var g=["Equidistant_Conic","eqdc"];e.default={init:d,forward:p,inverse:m,names:g}},8197:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return c},init:function(){return l},inverse:function(){return f},names:function(){return h}});var r=n(6269),i=1.340264,o=-.081106,a=893e-6,s=.003796,u=Math.sqrt(3)/2;function l(){this.es=0,this.long0=void 0!==this.long0?this.long0:0,this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0}function c(t){var e=(0,r.A)(t.x-this.long0,this.over),n=t.y,l=Math.asin(u*Math.sin(n)),c=l*l,f=c*c*c;return t.x=e*Math.cos(l)/(u*(i+3*o*c+f*(7*a+9*s*c))),t.y=l*(i+o*c+f*(a+s*c)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function f(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e,n,l,c,f=t.y;for(c=0;c<12&&(f-=l=(f*(i+o*(e=f*f)+(n=e*e*e)*(a+s*e))-t.y)/(i+3*o*e+n*(7*a+9*s*e)),!(Math.abs(l)<1e-9));++c);return n=(e=f*f)*e*e,t.x=u*t.x*(i+3*o*e+n*(7*a+9*s*e))/Math.cos(f),t.y=Math.asin(Math.sin(f)/u),t.x=(0,r.A)(t.x+this.long0,this.over),t}var h=["eqearth","Equal Earth","Equal_Earth"];e.default={init:l,forward:c,inverse:f,names:h}},63:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return o},init:function(){return i},inverse:function(){return a},names:function(){return s}});var r=n(6269);function i(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0}function o(t){var e=t.x,n=t.y,i=(0,r.A)(e-this.long0,this.over),o=this.x0+this.a*i*Math.cos(this.lat0),a=this.y0+this.a*n;return this.t1=o,this.t2=Math.cos(this.lat0),t.x=o,t.y=a,t}function a(t){t.x-=this.x0,t.y-=this.y0;var e=t.y/this.a,n=(0,r.A)(this.long0+t.x/(this.a*Math.cos(this.lat0)),this.over);t.x=n,t.y=e}var s=["equi"];e.default={init:i,forward:o,inverse:a,names:s}},3426:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return m},forward:function(){return h},init:function(){return f},inverse:function(){return d},names:function(){return p}});var r=n(5518),i=n(7897),o=n(4424);function a(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/((0,o.A)(1,e)+1))),t<0?-e:e}function s(t,e){for(var n,r=2*Math.cos(2*e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return e+n*Math.sin(2*e)}var u=n(6449);function l(t,e,n){for(var r,o,a=Math.sin(e),s=Math.cos(e),l=(0,i.A)(n),c=(0,u.A)(n),f=2*s*c,h=-2*a*l,d=t.length-1,p=t[d],m=0,g=0,y=0;--d>=0;)r=g,o=m,p=f*(g=p)-r-h*(m=y)+t[d],y=h*g-o+f*m;return[(f=a*c)*p-(h=s*l)*y,f*y+h*p]}var c=n(6269);function f(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(r.default.init.apply(this),this.forward=r.default.forward,this.inverse=r.default.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var i=s(this.cbg,this.lat0);this.Zb=-this.Qn*(i+function(t,e){for(var n,r=2*Math.cos(e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return Math.sin(e)*n}(this.gtu,2*i))}function h(t){var e=(0,c.A)(t.x-this.long0,this.over),n=t.y;n=s(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),u=Math.sin(e),f=Math.cos(e);n=Math.atan2(r,f*i),e=Math.atan2(u*i,(0,o.A)(r,i*f)),e=a(Math.tan(e));var h,d,p=l(this.gtu,2*n,2*e);return n+=p[0],e+=p[1],Math.abs(e)<=2.623395162778?(h=this.a*(this.Qn*e)+this.x0,d=this.a*(this.Qn*n+this.Zb)+this.y0):(h=1/0,d=1/0),t.x=h,t.y=d,t}function d(t){var e,n,r=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(a=(a-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var u=l(this.utg,2*a,2*r);a+=u[0],r+=u[1],r=Math.atan((0,i.A)(r));var f=Math.sin(a),h=Math.cos(a),d=Math.sin(r),p=Math.cos(r);a=Math.atan2(f*p,(0,o.A)(d,p*h)),r=Math.atan2(d,p*h),e=(0,c.A)(r+this.long0,this.over),n=s(this.cgb,a)}else e=1/0,n=1/0;return t.x=e,t.y=n,t}var p=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"],m={init:f,forward:h,inverse:d,names:p}},4025:function(t,e,n){"use strict";function r(t,e){return Math.pow((1-t)/(1+t),e)}n.r(e),n.d(e,{default:function(){return c},forward:function(){return s},init:function(){return a},inverse:function(){return u},names:function(){return l}});var i=n(7e3),o=20;function a(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+i.Vj)/(Math.pow(Math.tan(.5*this.lat0+i.Vj),this.C)*r(this.e*t,this.ratexp))}function s(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+i.Vj),this.C)*r(this.e*Math.sin(n),this.ratexp))-i.sK,t.x=this.C*e,t}function u(t){for(var e=t.x/this.C,n=t.y,a=Math.pow(Math.tan(.5*n+i.Vj)/this.K,1/this.C),s=o;s>0&&(n=2*Math.atan(a*r(this.e*Math.sin(t.y),-.5*this.e))-i.sK,!(Math.abs(n-t.y)<1e-14));--s)t.y=n;return s?(t.x=e,t.y=n,t):null}var l=["gauss"],c={init:a,forward:s,inverse:u,names:l}},5904:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return o},init:function(){return i},inverse:function(){return a},names:function(){return s}});var r=n(3356);function i(){this.name="geocent"}function o(t){return(0,r.jX)(t,this.es,this.a)}function a(t){return(0,r.Rw)(t,this.es,this.a,this.b)}var s=["Geocentric","geocentric","geocent","Geocent"];e.default={init:i,forward:o,inverse:a,names:s}},1017:function(t,e,n){"use strict";n.r(e),n.d(e,{init:function(){return i},names:function(){return o}});var r=n(4424);function i(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}var o=["Geostationary Satellite View","Geostationary_Satellite","geos"];e.default={init:i,forward:function(t){var e,n,i,o,a=t.x,s=t.y;if(a-=this.long0,"ellipse"===this.shape){s=Math.atan(this.radius_p2*Math.tan(s));var u=this.radius_p/(0,r.A)(this.radius_p*Math.cos(s),Math.sin(s));if(n=u*Math.cos(a)*Math.cos(s),i=u*Math.sin(a)*Math.cos(s),o=u*Math.sin(s),(this.radius_g-n)*n-i*i-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(i/(0,r.A)(o,e)),t.y=this.radius_g_1*Math.atan(o/e)):(t.x=this.radius_g_1*Math.atan(i/e),t.y=this.radius_g_1*Math.atan(o/(0,r.A)(i,e)))}else"sphere"===this.shape&&(e=Math.cos(s),n=Math.cos(a)*e,i=Math.sin(a)*e,o=Math.sin(s),e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(i/(0,r.A)(o,e)),t.y=this.radius_g_1*Math.atan(o/e)):(t.x=this.radius_g_1*Math.atan(i/e),t.y=this.radius_g_1*Math.atan(o/(0,r.A)(i,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,n,i,o,a=-1,s=0,u=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(u=Math.tan(t.y/this.radius_g_1),s=Math.tan(t.x/this.radius_g_1)*(0,r.A)(1,u)):(s=Math.tan(t.x/this.radius_g_1),u=Math.tan(t.y/this.radius_g_1)*(0,r.A)(1,s));var l=u/this.radius_p;if(e=s*s+l*l+a*a,(i=(n=2*this.radius_g*a)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-n-Math.sqrt(i))/(2*e),a=this.radius_g+o*a,s*=o,u*=o,t.x=Math.atan2(s,a),t.y=Math.atan(u*Math.cos(t.x)/a),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(u=Math.tan(t.y/this.radius_g_1),s=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+u*u)):(s=Math.tan(t.x/this.radius_g_1),u=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+s*s)),e=s*s+u*u+a*a,(i=(n=2*this.radius_g*a)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-n-Math.sqrt(i))/(2*e),a=this.radius_g+o*a,s*=o,u*=o,t.x=Math.atan2(s,a),t.y=Math.atan(u*Math.cos(t.x)/a)}return t.x=t.x+this.long0,t},names:o}},5106:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return s},init:function(){return a},inverse:function(){return u},names:function(){return l}});var r=n(6269),i=n(8597),o=n(7e3);function a(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function s(t){var e,n,i,a,s,u,l,c=t.x,f=t.y;return i=(0,r.A)(c-this.long0,this.over),e=Math.sin(f),n=Math.cos(f),a=Math.cos(i),(s=this.sin_p14*e+this.cos_p14*n*a)>0||Math.abs(s)<=o.H0?(u=this.x0+1*this.a*n*Math.sin(i)/s,l=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*a)/s):(u=this.x0+this.infinity_dist*n*Math.sin(i),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*a)),t.x=u,t.y=l,t}function u(t){var e,n,o,a,s,u;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(a=Math.atan2(e,this.rc),n=Math.sin(a),o=Math.cos(a),u=(0,i.A)(o*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.atan2(t.x*n,e*this.cos_p14*o-t.y*this.sin_p14*n),s=(0,r.A)(this.long0+s,this.over)):(u=this.phic0,s=0),t.x=s,t.y=u,t}var l=["gnom"];e.default={init:a,forward:s,inverse:u,names:l}},6500:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return h},forward:function(){return l},init:function(){return u},inverse:function(){return c},names:function(){return f}});var r=n(7e3);function i(t,e,n){if(Math.abs(e)>r.sK)return Number.NaN;if(e===r.sK)return Number.POSITIVE_INFINITY;if(e===-1*r.sK)return Number.NEGATIVE_INFINITY;var i=t*n;return Math.log(Math.tan((r.sK+e)/2))+t*Math.log((1-i)/(1+i))/2}var o=n(7897),a=n(6449);function s(t,e){return 2*Math.atan(t*Math.exp(e))-r.sK}function u(){var t=this.b/this.a;this.e=Math.sqrt(1-t*t),this.lc=this.long0,this.rs=Math.sqrt(1+this.e*this.e*Math.pow(Math.cos(this.lat0),4)/(1-this.e*this.e));var e=Math.sin(this.lat0),n=Math.asin(e/this.rs),r=Math.sin(n);this.cp=i(0,n,r)-this.rs*i(this.e,this.lat0,e),this.n2=this.k0*this.a*Math.sqrt(1-this.e*this.e)/(1-this.e*this.e*e*e),this.xs=this.x0,this.ys=this.y0-this.n2*n,this.title||(this.title="Gauss Schreiber transverse mercator")}function l(t){var e=t.x,n=t.y,r=this.rs*(e-this.lc),s=this.cp+this.rs*i(this.e,n,Math.sin(n)),u=Math.asin(Math.sin(r)/(0,a.A)(s)),l=i(0,u,Math.sin(u));return t.x=this.xs+this.n2*l,t.y=this.ys+this.n2*Math.atan((0,o.A)(s)/Math.cos(r)),t}function c(t){var e=t.x,n=t.y,r=Math.atan((0,o.A)((e-this.xs)/this.n2)/Math.cos((n-this.ys)/this.n2)),u=Math.asin(Math.sin((n-this.ys)/this.n2)/(0,a.A)((e-this.xs)/this.n2)),l=i(0,u,Math.sin(u));return t.x=this.lc+r/this.rs,t.y=function(t,e){var n=s(1,e),r=0,i=0;do{r=n,i=t*Math.sin(r),n=s(Math.exp(t*Math.log((1+i)/(1-i))/2),e)}while(Math.abs(n-r)>1e-12);return n}(this.e,(l-this.cp)/this.rs),t}var f=["gstmerg","gstmerc"],h={init:u,forward:l,inverse:c,names:f}},6167:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return o},init:function(){return i},inverse:function(){return a},names:function(){return s}});var r=n(6269);function i(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function o(t){var e,n,i,o,a,s,u,l=t.x,c=t.y,f=(0,r.A)(l-this.long0,this.over);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),i=-f*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),a=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(o)),s=this.n*a,u=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),t.y=u*Math.cos(s)/1,t.x=u*Math.sin(s)/1,this.czech||(t.y*=-1,t.x*=-1),t}function a(t){var e,n,r,i,o,a,s,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e,s=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,l+=1}while(0===s&&l<15);return l>=15?null:t}var s=["Krovak","krovak"];e.default={init:i,forward:o,inverse:a,names:s}},8506:function(t,e,n){"use strict";n.r(e),n.d(e,{EQUIT:function(){return u},N_POLE:function(){return s},OBLIQ:function(){return l},S_POLE:function(){return a},forward:function(){return f},init:function(){return c},inverse:function(){return h},names:function(){return x}});var r=n(7e3),i=n(5964),o=n(6269),a=1,s=2,u=3,l=4;function c(){var t,e=Math.abs(this.lat0);if(Math.abs(e-r.sK)<r.H0?this.mode=this.lat0<0?a:s:Math.abs(e)<r.H0?this.mode=u:this.mode=l,this.es>0)switch(this.qp=(0,i.A)(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=t*d,e=t*t,n[0]+=e*p,n[1]=e*g,e*=t,n[0]+=e*m,n[1]+=e*y,n[2]=e*v,n}(this.es),this.mode){case s:case a:this.dd=1;break;case u:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case l:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=(0,i.A)(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===l&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function f(t){var e,n,a,s,u,l,c,f,h,d,p=t.x,m=t.y;if(p=(0,o.A)(p-this.long0,this.over),this.sphere){if(u=Math.sin(m),d=Math.cos(m),a=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+d*a:1+this.sinph0*u+this.cosph0*d*a)<=r.H0)return null;e=(n=Math.sqrt(2/n))*d*Math.sin(p),n*=this.mode===this.EQUIT?u:this.cosph0*u-this.sinph0*d*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(m+this.lat0)<r.H0)return null;n=r.Vj-.5*m,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(p),n*=a}}else{switch(c=0,f=0,h=0,a=Math.cos(p),s=Math.sin(p),u=Math.sin(m),l=(0,i.A)(this.e,u),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(c=l/this.qp,f=Math.sqrt(1-c*c)),this.mode){case this.OBLIQ:h=1+this.sinb1*c+this.cosb1*f*a;break;case this.EQUIT:h=1+f*a;break;case this.N_POLE:h=r.sK+m,l=this.qp-l;break;case this.S_POLE:h=m-r.sK,l=this.qp+l}if(Math.abs(h)<r.H0)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),n=this.mode===this.OBLIQ?this.ymf*h*(this.cosb1*c-this.sinb1*f*a):(h=Math.sqrt(2/(1+f*a)))*c*this.ymf,e=this.xmf*h*f*s;break;case this.N_POLE:case this.S_POLE:l>=0?(e=(h=Math.sqrt(l))*s,n=a*(this.mode===this.S_POLE?h:-h)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function h(t){t.x-=this.x0,t.y-=this.y0;var e,n,i,a,s,u,l,c,f,h,d=t.x/this.a,p=t.y/this.a;if(this.sphere){var m,g=0,y=0;if((n=.5*(m=Math.sqrt(d*d+p*p)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(y=Math.sin(n),g=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(m)<=r.H0?0:Math.asin(p*y/m),d*=y,p=g*m;break;case this.OBLIQ:n=Math.abs(m)<=r.H0?this.lat0:Math.asin(g*this.sinph0+p*y*this.cosph0/m),d*=y*this.cosph0,p=(g-Math.sin(n)*this.sinph0)*m;break;case this.N_POLE:p=-p,n=r.sK-n;break;case this.S_POLE:n-=r.sK}e=0!==p||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(d,p):0}else{if(l=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(d/=this.dd,p*=this.dd,(u=Math.sqrt(d*d+p*p))<r.H0)return t.x=this.long0,t.y=this.lat0,t;a=2*Math.asin(.5*u/this.rq),i=Math.cos(a),d*=a=Math.sin(a),this.mode===this.OBLIQ?(l=i*this.sinb1+p*a*this.cosb1/u,s=this.qp*l,p=u*this.cosb1*i-p*this.sinb1*a):(l=p*a/u,s=this.qp*l,p=u*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(p=-p),!(s=d*d+p*p))return t.x=this.long0,t.y=this.lat0,t;l=1-s/this.qp,this.mode===this.S_POLE&&(l=-l)}e=Math.atan2(d,p),c=Math.asin(l),f=this.apa,h=c+c,n=c+f[0]*Math.sin(h)+f[1]*Math.sin(h+h)+f[2]*Math.sin(h+h+h)}return t.x=(0,o.A)(this.long0+e,this.over),t.y=n,t}var d=.3333333333333333,p=.17222222222222222,m=.10257936507936508,g=.06388888888888888,y=.0664021164021164,v=.016415012942191543;var x=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];e.default={init:c,forward:f,inverse:h,names:x,S_POLE:a,N_POLE:s,EQUIT:u,OBLIQ:l}},993:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return c},init:function(){return l},inverse:function(){return f},names:function(){return h}});var r=n(7072),i=n(851),o=n(9393),a=n(6269),s=n(6157),u=n(7e3);function l(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<u.H0)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),o=(0,r.A)(this.e,e,n),a=(0,i.A)(this.e,this.lat1,e),s=Math.sin(this.lat2),l=Math.cos(this.lat2),c=(0,r.A)(this.e,s,l),f=(0,i.A)(this.e,this.lat2,s),h=Math.abs(Math.abs(this.lat0)-u.sK)<u.H0?0:(0,i.A)(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>u.H0?this.ns=Math.log(o/c)/Math.log(a/f):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=o/(this.ns*Math.pow(a,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function c(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=u.H0&&(n=(0,o.A)(n)*(u.sK-2*u.H0));var r,s,l=Math.abs(Math.abs(n)-u.sK);if(l>u.H0)r=(0,i.A)(this.e,n,Math.sin(n)),s=this.a*this.f0*Math.pow(r,this.ns);else{if((l=n*this.ns)<=0)return null;s=0}var c=this.ns*(0,a.A)(e-this.long0,this.over);return t.x=this.k0*(s*Math.sin(c))+this.x0,t.y=this.k0*(this.rh-s*Math.cos(c))+this.y0,t}function f(t){var e,n,r,i,o,l=(t.x-this.x0)/this.k0,c=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(l*l+c*c),n=1):(e=-Math.sqrt(l*l+c*c),n=-1);var f=0;if(0!==e&&(f=Math.atan2(n*l,n*c)),0!==e||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(i=(0,s.A)(this.e,r)))return null}else i=-u.sK;return o=(0,a.A)(f/this.ns+this.long0,this.over),t.x=o,t.y=i,t}var h=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];e.default={init:l,forward:c,inverse:f,names:h}},2308:function(t,e,n){"use strict";function r(){}function i(t){return t}n.r(e),n.d(e,{forward:function(){return i},init:function(){return r},inverse:function(){return i},names:function(){return o}});var o=["longlat","identity"];e.default={init:r,forward:i,inverse:i,names:o}},9402:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return l},init:function(){return u},inverse:function(){return c},names:function(){return f}});var r=n(7072),i=n(6269),o=n(851),a=n(6157),s=n(7e3);function u(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=(0,r.A)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function l(t){var e,n,r=t.x,a=t.y;if(a*s.dX>90&&a*s.dX<-90&&r*s.dX>180&&r*s.dX<-180)return null;if(Math.abs(Math.abs(a)-s.sK)<=s.H0)return null;if(this.sphere)e=this.x0+this.a*this.k0*(0,i.A)(r-this.long0,this.over),n=this.y0+this.a*this.k0*Math.log(Math.tan(s.Vj+.5*a));else{var u=Math.sin(a),l=(0,o.A)(this.e,a,u);e=this.x0+this.a*this.k0*(0,i.A)(r-this.long0,this.over),n=this.y0-this.a*this.k0*Math.log(l)}return t.x=e,t.y=n,t}function c(t){var e,n,r=t.x-this.x0,o=t.y-this.y0;if(this.sphere)n=s.sK-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var u=Math.exp(-o/(this.a*this.k0));if(-9999===(n=(0,a.A)(this.e,u)))return null}return e=(0,i.A)(this.long0+r/(this.a*this.k0),this.over),t.x=e,t.y=n,t}var f=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];e.default={init:u,forward:l,inverse:c,names:f}},969:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return o},init:function(){return i},inverse:function(){return a},names:function(){return s}});var r=n(6269);function i(){}function o(t){var e=t.x,n=t.y,i=(0,r.A)(e-this.long0,this.over),o=this.x0+this.a*i,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=o,t.y=a,t}function a(t){t.x-=this.x0,t.y-=this.y0;var e=(0,r.A)(this.long0+t.x/this.a,this.over),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var s=["Miller_Cylindrical","mill"];e.default={init:i,forward:o,inverse:a,names:s}},6155:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return a},init:function(){return o},inverse:function(){return s},names:function(){return u}});var r=n(6269),i=n(7e3);function o(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0}function a(t){for(var e=t.x,n=t.y,o=(0,r.A)(e-this.long0,this.over),a=n,s=Math.PI*Math.sin(n);;){var u=-(a+Math.sin(a)-s)/(1+Math.cos(a));if(a+=u,Math.abs(u)<i.H0)break}a/=2,Math.PI/2-Math.abs(n)<i.H0&&(o=0);var l=.900316316158*this.a*o*Math.cos(a)+this.x0,c=1.4142135623731*this.a*Math.sin(a)+this.y0;return t.x=l,t.y=c,t}function s(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var i=(0,r.A)(this.long0+t.x/(.900316316158*this.a*Math.cos(e)),this.over);i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var o=Math.asin(n);return t.x=i,t.y=o,t}var u=["Mollweide","moll"];e.default={init:o,forward:a,inverse:s,names:u}},6731:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return a},init:function(){return o},inverse:function(){return s},iterations:function(){return i},names:function(){return u}});var r=n(7e3),i=1;function o(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function a(t){var e,n=t.x,i=t.y-this.lat0,o=n-this.long0,a=i/r._3*1e-5,s=o,u=1,l=0;for(e=1;e<=10;e++)u*=a,l+=this.A[e]*u;var c,f=l,h=s,d=1,p=0,m=0,g=0;for(e=1;e<=6;e++)c=p*f+d*h,d=d*f-p*h,p=c,m=m+this.B_re[e]*d-this.B_im[e]*p,g=g+this.B_im[e]*d+this.B_re[e]*p;return t.x=g*this.a+this.x0,t.y=m*this.a+this.y0,t}function s(t){var e,n,i=t.x,o=t.y,a=i-this.x0,s=(o-this.y0)/this.a,u=a/this.a,l=1,c=0,f=0,h=0;for(e=1;e<=6;e++)n=c*s+l*u,l=l*s-c*u,c=n,f=f+this.C_re[e]*l-this.C_im[e]*c,h=h+this.C_im[e]*l+this.C_re[e]*c;for(var d=0;d<this.iterations;d++){var p,m=f,g=h,y=s,v=u;for(e=2;e<=6;e++)p=g*f+m*h,m=m*f-g*h,g=p,y+=(e-1)*(this.B_re[e]*m-this.B_im[e]*g),v+=(e-1)*(this.B_im[e]*m+this.B_re[e]*g);m=1,g=0;var x=this.B_re[1],_=this.B_im[1];for(e=2;e<=6;e++)p=g*f+m*h,m=m*f-g*h,g=p,x+=e*(this.B_re[e]*m-this.B_im[e]*g),_+=e*(this.B_im[e]*m+this.B_re[e]*g);var b=x*x+_*_;f=(y*x+v*_)/b,h=(v*x-y*_)/b}var w=f,M=h,A=1,E=0;for(e=1;e<=9;e++)A*=w,E+=this.D[e]*A;var T=this.lat0+E*r._3*1e5,S=this.long0+M;return t.x=S,t.y=T,t}var u=["New_Zealand_Map_Grid","nzmg"];e.default={init:o,forward:a,inverse:s,names:u}},4076:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return d},init:function(){return h},inverse:function(){return p},names:function(){return m}});var r=n(6269),i=n(7e3),o=n(1845),a=n(2308);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}var c={OBLIQUE:{forward:function(t,e){var n=e.x,o=e.y;n+=t.long0;var a=Math.cos(n),s=Math.sin(o),u=Math.cos(o);e.x=(0,r.A)(Math.atan2(u*Math.sin(n),t.sphip*u*a+t.cphip*s)+t.lamp),e.y=Math.asin(t.sphip*s-t.cphip*u*a);var l=t.obliqueProjection.forward(e);t.isIdentity&&(l.x*=i.dX,l.y*=i.dX);return l},inverse:function(t,e){t.isIdentity&&(e.x*=i.zq,e.y*=i.zq);var n=t.obliqueProjection.inverse(e),o=n.x,a=n.y;if(o<Number.MAX_VALUE){o-=t.lamp;var s=Math.cos(o),u=Math.sin(a),l=Math.cos(a);e.x=Math.atan2(l*Math.sin(o),t.sphip*l*s-t.cphip*u),e.y=Math.asin(t.sphip*u+t.cphip*l*s)}return e.x=(0,r.A)(e.x+t.long0),e}},TRANSVERSE:{forward:function(t,e){var n=e.x,o=e.y;n+=t.long0;var a=Math.cos(o),s=Math.cos(n);e.x=(0,r.A)(Math.atan2(a*Math.sin(n),Math.sin(o))+t.lamp),e.y=Math.asin(-1*a*s);var u=t.obliqueProjection.forward(e);t.isIdentity&&(u.x*=i.dX,u.y*=i.dX);return u},inverse:function(t,e){t.isIdentity&&(e.x*=i.zq,e.y*=i.zq);var n=t.obliqueProjection.inverse(e),o=n.x,a=n.y;if(o<Number.MAX_VALUE){var s=Math.cos(a);o-=t.lamp,e.x=Math.atan2(s*Math.sin(o),-1*Math.sin(a)),e.y=Math.asin(s*Math.cos(o))}return e.x=(0,r.A)(e.x+t.long0),e}}},f={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function h(){var t=this;if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=a.names.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if("ob_tran"===this.o_proj)throw new Error("Invalid value for o_proj: "+this.o_proj);var e,n=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),r=(0,o.A)(n);if(!r)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);r.long0=0,this.obliqueProjection=r;for(var u=Object.keys(f),h=function(e){if("undefined"!==l(t[e])){var n=parseFloat(t[e])*i.zq;if(isNaN(n))throw new Error("Invalid value for "+e+": "+t[e]);return n}},d=0;d<u.length;d++){var p=u[d],m=f[p],g=Object.entries(m);if(g.some(function(e){var n=s(e,1)[0];return void 0!==t[n]})){e=m;for(var y=0;y<g.length;y++){var v=s(g[y],2),x=v[0],_=v[1],b=h(x);if(void 0===b)throw new Error("Missing parameter: "+x+".");this[_]=b}break}}if(!e)throw new Error("No valid parameters provided for ob_tran projection.");var w=function(t,e){var n,r;if(e===f.ROTATE){var o=t.oLongC,a=t.oLatC,s=t.oAlpha;if(Math.abs(Math.abs(a)-i.sK)<=i.H0)throw new Error("Invalid value for o_lat_c: "+t.o_lat_c+" should be < 90");r=o+Math.atan2(-1*Math.cos(s),-1*Math.sin(s)*Math.sin(a)),n=Math.asin(Math.cos(a)*Math.sin(s))}else if(e===f.NEW_POLE)r=t.oLongP,n=t.oLatP;else{var u=t.oLong1,l=t.oLat1,c=t.oLong2,h=t.oLat2,d=Math.abs(l);if(Math.abs(l)>i.sK-i.H0)throw new Error("Invalid value for o_lat_1: "+t.o_lat_1+" should be < 90");if(Math.abs(h)>i.sK-i.H0)throw new Error("Invalid value for o_lat_2: "+t.o_lat_2+" should be < 90");if(Math.abs(l-h)<i.H0)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(d<i.H0)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");r=Math.atan2(Math.cos(l)*Math.sin(h)*Math.cos(u)-Math.sin(l)*Math.cos(h)*Math.cos(c),Math.sin(l)*Math.cos(h)*Math.sin(c)-Math.cos(l)*Math.sin(h)*Math.sin(u)),n=Math.atan(-1*Math.cos(r-u)/Math.tan(l))}return{lamp:r,phip:n}}(this,e),M=w.lamp,A=w.phip;this.lamp=M,Math.abs(A)>i.H0?(this.cphip=Math.cos(A),this.sphip=Math.sin(A),this.projectionType=c.OBLIQUE):this.projectionType=c.TRANSVERSE}function d(t){return this.projectionType.forward(this,t)}function p(t){return this.projectionType.inverse(this,t)}var m=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];e.default={init:h,forward:d,inverse:p,names:m}},431:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return f},init:function(){return c},inverse:function(){return h},names:function(){return d}});var r=n(851),i=n(6269),o=n(6157),a=n(7e3),s=n(7272);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}var l=1e-7;function c(){var t,e,n,o,c,f,h,d,p,m,g,y,v,x,_=0,b=0,w=0,M=0,A=0,E=0,T=0;this.no_off=(v=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],x="object"===u((y=this).projName)?Object.keys(y.projName)[0]:y.projName,"no_uoff"in y||"no_off"in y||-1!==v.indexOf(x)||-1!==v.indexOf((0,s.Cx)(x))),this.no_rot="no_rot"in this;var S=!1;"alpha"in this&&(S=!0);var C=!1;if("rectified_grid_angle"in this&&(C=!0),S&&(T=this.alpha),C&&(_=this.rectified_grid_angle),S||C)b=this.longc;else if(w=this.long1,A=this.lat1,M=this.long2,E=this.lat2,Math.abs(A-E)<=l||(t=Math.abs(A))<=l||Math.abs(t-a.sK)<=l||Math.abs(Math.abs(this.lat0)-a.sK)<=l||Math.abs(Math.abs(E)-a.sK)<=l)throw new Error;var k=1-this.es;e=Math.sqrt(k),Math.abs(this.lat0)>a.H0?(d=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*d*d,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/k),this.A=this.B*this.k0*e/t,(c=(o=this.B*e/(n*Math.sqrt(t)))*o-1)<=0?c=0:(c=Math.sqrt(c),this.lat0<0&&(c=-c)),this.E=c+=o,this.E*=Math.pow((0,r.A)(this.e,this.lat0,d),this.B)):(this.B=1/e,this.A=this.k0,this.E=o=c=1),S||C?(S?(g=Math.asin(Math.sin(T)/o),C||(_=T)):(g=_,T=Math.asin(o*Math.sin(g))),this.lam0=b-Math.asin(.5*(c-1/c)*Math.tan(g))/this.B):(f=Math.pow((0,r.A)(this.e,A,Math.sin(A)),this.B),h=Math.pow((0,r.A)(this.e,E,Math.sin(E)),this.B),c=this.E/f,p=(h-f)/(h+f),m=((m=this.E*this.E)-h*f)/(m+h*f),(t=w-M)<-Math.PI?M-=a.JM:t>Math.PI&&(M+=a.JM),this.lam0=(0,i.A)(.5*(w+M)-Math.atan(m*Math.tan(.5*this.B*(w-M))/p)/this.B,this.over),g=Math.atan(2*Math.sin(this.B*(0,i.A)(w-this.lam0,this.over))/(c-1/c)),_=T=Math.asin(o*Math.sin(g))),this.singam=Math.sin(g),this.cosgam=Math.cos(g),this.sinrot=Math.sin(_),this.cosrot=Math.cos(_),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(o*o-1)/Math.cos(T))),this.lat0<0&&(this.u_0=-this.u_0)),c=.5*g,this.v_pole_n=this.ArB*Math.log(Math.tan(a.Vj-c)),this.v_pole_s=this.ArB*Math.log(Math.tan(a.Vj+c))}function f(t){var e,n,i,o,s,u,c,f,h={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-a.sK)>a.H0){if(e=.5*((s=this.E/Math.pow((0,r.A)(this.e,t.y,Math.sin(t.y)),this.B))-(u=1/s)),n=.5*(s+u),o=Math.sin(this.B*t.x),i=(e*this.singam-o*this.cosgam)/n,Math.abs(Math.abs(i)-1)<a.H0)throw new Error;f=.5*this.ArB*Math.log((1-i)/(1+i)),u=Math.cos(this.B*t.x),c=Math.abs(u)<l?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+o*this.singam,u)}else f=t.y>0?this.v_pole_n:this.v_pole_s,c=this.ArB*t.y;return this.no_rot?(h.x=c,h.y=f):(c-=this.u_0,h.x=f*this.cosrot+c*this.sinrot,h.y=c*this.cosrot-f*this.sinrot),h.x=this.a*h.x+this.x0,h.y=this.a*h.y+this.y0,h}function h(t){var e,n,r,i,s,u,l,c={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),i=.5*((r=Math.exp(-this.BrA*n))-1/r),s=.5*(r+1/r),l=((u=Math.sin(this.BrA*e))*this.cosgam+i*this.singam)/s,Math.abs(Math.abs(l)-1)<a.H0)c.x=0,c.y=l<0?-a.sK:a.sK;else{if(c.y=this.E/Math.sqrt((1+l)/(1-l)),c.y=(0,o.A)(this.e,Math.pow(c.y,1/this.B)),c.y===1/0)throw new Error;c.x=-this.rB*Math.atan2(i*this.cosgam-u*this.singam,Math.cos(this.BrA*e))}return c.x+=this.lam0,c}var d=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];e.default={init:c,forward:f,inverse:h,names:d}},6145:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return s},init:function(){return a},inverse:function(){return u},names:function(){return l}});var r=n(6269),i=n(8597),o=n(7e3);function a(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function s(t){var e,n,i,a,s,u,l,c=t.x,f=t.y;return i=(0,r.A)(c-this.long0,this.over),e=Math.sin(f),n=Math.cos(f),a=Math.cos(i),((s=this.sin_p14*e+this.cos_p14*n*a)>0||Math.abs(s)<=o.H0)&&(u=1*this.a*n*Math.sin(i),l=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*a)),t.x=u,t.y=l,t}function u(t){var e,n,a,s,u,l,c;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=(0,i.A)(e/this.a),a=Math.sin(n),s=Math.cos(n),l=this.long0,Math.abs(e)<=o.H0?(c=this.lat0,t.x=l,t.y=c,t):(c=(0,i.A)(s*this.sin_p14+t.y*a*this.cos_p14/e),u=Math.abs(this.lat0)-o.sK,Math.abs(u)<=o.H0?(l=this.lat0>=0?(0,r.A)(this.long0+Math.atan2(t.x,-t.y),this.over):(0,r.A)(this.long0-Math.atan2(-t.x,t.y),this.over),t.x=l,t.y=c,t):(l=(0,r.A)(this.long0+Math.atan2(t.x*a,e*this.cos_p14*s-t.y*this.sin_p14*a),this.over),t.x=l,t.y=c,t))}var l=["ortho"];e.default={init:a,forward:s,inverse:u,names:l}},741:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return p},init:function(){return d},inverse:function(){return m},names:function(){return g}});var r=n(1341),i=n(7954),o=n(3611),a=n(4280),s=n(6269),u=n(6165),l=n(1417),c=n(7e3),f=n(2889),h=20;function d(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=(0,r.A)(this.es),this.e1=(0,i.A)(this.es),this.e2=(0,o.A)(this.es),this.e3=(0,a.A)(this.es),this.ml0=this.a*(0,l.A)(this.e0,this.e1,this.e2,this.e3,this.lat0)}function p(t){var e,n,r,i=t.x,o=t.y,a=(0,s.A)(i-this.long0,this.over);if(r=a*Math.sin(o),this.sphere)Math.abs(o)<=c.H0?(e=this.a*a,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(o),n=this.a*((0,u.A)(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=c.H0)e=this.a*a,n=-1*this.ml0;else{var h=(0,f.A)(this.a,this.e,Math.sin(o))/Math.tan(o);e=h*Math.sin(r),n=this.a*(0,l.A)(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+h*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t}function m(t){var e,n,r,i,o,a,u,f,d;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=c.H0)e=(0,s.A)(r/this.a+this.long0,this.over),n=0;else{var p;for(a=this.lat0+i/this.a,u=r*r/this.a/this.a+a*a,f=a,o=h;o;--o)if(f+=d=-1*(a*(f*(p=Math.tan(f))+1)-f-.5*(f*f+u)*p)/((f-a)/p-1),Math.abs(d)<=c.H0){n=f;break}e=(0,s.A)(this.long0+Math.asin(r*Math.tan(f)/this.a)/Math.sin(n),this.over)}else if(Math.abs(i+this.ml0)<=c.H0)n=0,e=(0,s.A)(this.long0+r/this.a,this.over);else{var m,g,y,v,x;for(a=(this.ml0+i)/this.a,u=r*r/this.a/this.a+a*a,f=a,o=h;o;--o)if(x=this.e*Math.sin(f),m=Math.sqrt(1-x*x)*Math.tan(f),g=this.a*(0,l.A)(this.e0,this.e1,this.e2,this.e3,f),y=this.e0-2*this.e1*Math.cos(2*f)+4*this.e2*Math.cos(4*f)-6*this.e3*Math.cos(6*f),f-=d=(a*(m*(v=g/this.a)+1)-v-.5*m*(v*v+u))/(this.es*Math.sin(2*f)*(v*v+u-2*a*v)/(4*m)+(a-v)*(m*y-2/Math.sin(2*f))-y),Math.abs(d)<=c.H0){n=f;break}m=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=(0,s.A)(this.long0+Math.asin(r*m/this.a)/Math.sin(n),this.over)}return t.x=e,t.y=n,t}var g=["Polyconic","American_Polyconic","poly"];e.default={init:d,forward:p,inverse:m,names:g}},2513:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return s},init:function(){return a},inverse:function(){return u},names:function(){return f}});var r=n(7e3),i={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},o={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function a(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=r.sK-r.Vj/2?this.face=i.TOP:this.lat0<=-(r.sK-r.Vj/2)?this.face=i.BOTTOM:Math.abs(this.long0)<=r.Vj?this.face=i.FRONT:Math.abs(this.long0)<=r.sK+r.Vj?this.face=this.long0>0?i.RIGHT:i.LEFT:this.face=i.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function s(t){var e,n,a,s,u,f,h={x:0,y:0},d={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===i.TOP)s=r.sK-e,n>=r.Vj&&n<=r.sK+r.Vj?(d.value=o.AREA_0,a=n-r.sK):n>r.sK+r.Vj||n<=-(r.sK+r.Vj)?(d.value=o.AREA_1,a=n>0?n-r.DF:n+r.DF):n>-(r.sK+r.Vj)&&n<=-r.Vj?(d.value=o.AREA_2,a=n+r.sK):(d.value=o.AREA_3,a=n);else if(this.face===i.BOTTOM)s=r.sK+e,n>=r.Vj&&n<=r.sK+r.Vj?(d.value=o.AREA_0,a=-n+r.sK):n<r.Vj&&n>=-r.Vj?(d.value=o.AREA_1,a=-n):n<-r.Vj&&n>=-(r.sK+r.Vj)?(d.value=o.AREA_2,a=-n-r.sK):(d.value=o.AREA_3,a=n>0?-n+r.DF:-n-r.DF);else{var p,m,g,y,v,x;this.face===i.RIGHT?n=c(n,+r.sK):this.face===i.BACK?n=c(n,+r.DF):this.face===i.LEFT&&(n=c(n,-r.sK)),y=Math.sin(e),v=Math.cos(e),x=Math.sin(n),p=v*Math.cos(n),m=v*x,g=y,this.face===i.FRONT?a=l(s=Math.acos(p),g,m,d):this.face===i.RIGHT?a=l(s=Math.acos(m),g,-p,d):this.face===i.BACK?a=l(s=Math.acos(-p),g,-m,d):this.face===i.LEFT?a=l(s=Math.acos(-m),g,p,d):(s=a=0,d.value=o.AREA_0)}return f=Math.atan(12/r.DF*(a+Math.acos(Math.sin(a)*Math.cos(r.Vj))-r.sK)),u=Math.sqrt((1-Math.cos(s))/(Math.cos(f)*Math.cos(f))/(1-Math.cos(Math.atan(1/Math.cos(a))))),d.value===o.AREA_1?f+=r.sK:d.value===o.AREA_2?f+=r.DF:d.value===o.AREA_3&&(f+=1.5*r.DF),h.x=u*Math.cos(f),h.y=u*Math.sin(f),h.x=h.x*this.a+this.x0,h.y=h.y*this.a+this.y0,t.x=h.x,t.y=h.y,t}function u(t){var e,n,a,s,u,l,f,h,d,p,m,g,y={lam:0,phi:0},v={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?v.value=o.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(v.value=o.AREA_1,e-=r.sK):t.x<0&&-t.x>=Math.abs(t.y)?(v.value=o.AREA_2,e=e<0?e+r.DF:e-r.DF):(v.value=o.AREA_3,e+=r.sK),d=r.DF/12*Math.tan(e),u=Math.sin(d)/(Math.cos(d)-1/Math.sqrt(2)),l=Math.atan(u),(f=1-(a=Math.cos(e))*a*(s=Math.tan(n))*s*(1-Math.cos(Math.atan(1/Math.cos(l)))))<-1?f=-1:f>1&&(f=1),this.face===i.TOP)h=Math.acos(f),y.phi=r.sK-h,v.value===o.AREA_0?y.lam=l+r.sK:v.value===o.AREA_1?y.lam=l<0?l+r.DF:l-r.DF:v.value===o.AREA_2?y.lam=l-r.sK:y.lam=l;else if(this.face===i.BOTTOM)h=Math.acos(f),y.phi=h-r.sK,v.value===o.AREA_0?y.lam=-l+r.sK:v.value===o.AREA_1?y.lam=-l:v.value===o.AREA_2?y.lam=-l-r.sK:y.lam=l<0?-l-r.DF:-l+r.DF;else{var x,_,b;d=(x=f)*x,_=(d+=(b=d>=1?0:Math.sqrt(1-d)*Math.sin(l))*b)>=1?0:Math.sqrt(1-d),v.value===o.AREA_1?(d=_,_=-b,b=d):v.value===o.AREA_2?(_=-_,b=-b):v.value===o.AREA_3&&(d=_,_=b,b=-d),this.face===i.RIGHT?(d=x,x=-_,_=d):this.face===i.BACK?(x=-x,_=-_):this.face===i.LEFT&&(d=x,x=_,_=-d),y.phi=Math.acos(-b)-r.sK,y.lam=Math.atan2(_,x),this.face===i.RIGHT?y.lam=c(y.lam,-r.sK):this.face===i.BACK?y.lam=c(y.lam,-r.DF):this.face===i.LEFT&&(y.lam=c(y.lam,+r.sK))}0!==this.es&&(p=y.phi<0?1:0,m=Math.tan(y.phi),g=this.b/Math.sqrt(m*m+this.one_minus_f_squared),y.phi=Math.atan(Math.sqrt(this.a*this.a-g*g)/(this.one_minus_f*g)),p&&(y.phi=-y.phi));return y.lam+=this.long0,t.x=y.lam,t.y=y.phi,t}function l(t,e,n,i){var a;return t<r.H0?(i.value=o.AREA_0,a=0):(a=Math.atan2(e,n),Math.abs(a)<=r.Vj?i.value=o.AREA_0:a>r.Vj&&a<=r.sK+r.Vj?(i.value=o.AREA_1,a-=r.sK):a>r.sK+r.Vj||a<=-(r.sK+r.Vj)?(i.value=o.AREA_2,a=a>=0?a-r.DF:a+r.DF):(i.value=o.AREA_3,a+=r.sK)),a}function c(t,e){var n=t+e;return n<-r.DF?n+=r.JM:n>+r.DF&&(n-=r.JM),n}var f=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];e.default={init:a,forward:s,inverse:u,names:f}},8067:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return m},init:function(){return p},inverse:function(){return g},names:function(){return y}});var r=n(7e3),i=n(6269),o=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],a=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],s=.8487,u=1.3523,l=r.dX/5,c=1/l,f=18,h=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},d=function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])};function p(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function m(t){var e=(0,i.A)(t.x-this.long0,this.over),n=Math.abs(t.y),d=Math.floor(n*l);d<0?d=0:d>=f&&(d=f-1),n=r.dX*(n-c*d);var p={x:h(o[d],n)*e,y:h(a[d],n)};return t.y<0&&(p.y=-p.y),p.x=p.x*this.a*s+this.x0,p.y=p.y*this.a*u+this.y0,p}function g(t){var e={x:(t.x-this.x0)/(this.a*s),y:Math.abs(t.y-this.y0)/(this.a*u)};if(e.y>=1)e.x/=o[f][0],e.y=t.y<0?-r.sK:r.sK;else{var n=Math.floor(e.y*f);for(n<0?n=0:n>=f&&(n=f-1);;)if(a[n][0]>e.y)--n;else{if(!(a[n+1][0]<=e.y))break;++n}var l=a[n],c=5*(e.y-l[0])/(a[n+1][0]-l[0]);c=function(t,e,n,r){for(var i=e;r;--r){var o=t(i);if(i-=o,Math.abs(o)<n)break}return i}(function(t){return(h(l,t)-e.y)/d(l,t)},c,r.H0,100),e.x/=h(o[n],c),e.y=(5*n+c)*r.zq,t.y<0&&(e.y=-e.y)}return e.x=(0,i.A)(e.x+this.long0,this.over),e}var y=["Robinson","robin"];e.default={init:p,forward:m,inverse:g,names:y}},1034:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return h},init:function(){return f},inverse:function(){return d},names:function(){return p}});var r=n(6269),i=n(6165),o=n(6194),a=n(3712),s=n(112),u=n(7e3),l=n(8597),c=20;function f(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=(0,o.A)(this.es)}function h(t){var e,n,i=t.x,o=t.y;if(i=(0,r.A)(i-this.long0,this.over),this.sphere){if(this.m)for(var s=this.n*Math.sin(o),l=c;l;--l){var f=(this.m*o+Math.sin(o)-s)/(this.m+Math.cos(o));if(o-=f,Math.abs(f)<u.H0)break}else o=1!==this.n?Math.asin(this.n*Math.sin(o)):o;e=this.a*this.C_x*i*(this.m+Math.cos(o)),n=this.a*this.C_y*o}else{var h=Math.sin(o),d=Math.cos(o);n=this.a*(0,a.A)(o,h,d,this.en),e=this.a*i*d/Math.sqrt(1-this.es*h*h)}return t.x=e,t.y=n,t}function d(t){var e,n,o,a;return t.x-=this.x0,o=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,o/=this.C_x*(this.m+Math.cos(e)),this.m?e=(0,l.A)((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=(0,l.A)(Math.sin(e)/this.n)),o=(0,r.A)(o+this.long0,this.over),e=(0,i.A)(e)):(e=(0,s.A)(t.y/this.a,this.es,this.en),(a=Math.abs(e))<u.sK?(a=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*a*a)/(this.a*Math.cos(e)),o=(0,r.A)(n,this.over)):a-u.H0<u.sK&&(o=this.long0)),t.x=o,t.y=e,t}var p=["Sinusoidal","sinu"];e.default={init:f,forward:h,inverse:d,names:p}},9872:function(t,e,n){"use strict";function r(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),o=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*u}function i(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t}function o(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,u=0,l=o,c=-1e3,f=0;Math.abs(l-c)>1e-7;){if(++f>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=s,t.y=l,t}n.r(e),n.d(e,{forward:function(){return i},init:function(){return r},inverse:function(){return o},names:function(){return a}});var a=["somerc"];e.default={init:r,forward:i,inverse:o,names:a}},3084:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return f},init:function(){return c},inverse:function(){return h},names:function(){return d},ssfn_:function(){return l}});var r=n(7e3),i=n(9393),o=n(7072),a=n(851),s=n(6157),u=n(6269);function l(t,e,n){return e*=n,Math.tan(.5*(r.sK+t))*Math.pow((1-e)/(1+e),.5*n)}function c(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=r.H0&&(this.k0=.5*(1+(0,i.A)(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=r.H0&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=r.H0&&Math.abs(Math.cos(this.lat_ts))>r.H0&&(this.k0=.5*this.cons*(0,o.A)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/(0,a.A)(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=(0,o.A)(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(l(this.lat0,this.sinlat0,this.e))-r.sK,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function f(t){var e,n,i,o,s,c,f=t.x,h=t.y,d=Math.sin(h),p=Math.cos(h),m=(0,u.A)(f-this.long0,this.over);return Math.abs(Math.abs(f-this.long0)-Math.PI)<=r.H0&&Math.abs(h+this.lat0)<=r.H0?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*d+this.coslat0*p*Math.cos(m)),t.x=this.a*e*p*Math.sin(m)+this.x0,t.y=this.a*e*(this.coslat0*d-this.sinlat0*p*Math.cos(m))+this.y0,t):(n=2*Math.atan(l(h,d,this.e))-r.sK,o=Math.cos(n),i=Math.sin(n),Math.abs(this.coslat0)<=r.H0?(s=(0,a.A)(this.e,h*this.con,this.con*d),c=2*this.a*this.k0*s/this.cons,t.x=this.x0+c*Math.sin(f-this.long0),t.y=this.y0-this.con*c*Math.cos(f-this.long0),t):(Math.abs(this.sinlat0)<r.H0?(e=2*this.a*this.k0/(1+o*Math.cos(m)),t.y=e*i):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*i+this.cosX0*o*Math.cos(m))),t.y=e*(this.cosX0*i-this.sinX0*o*Math.cos(m))+this.y0),t.x=e*o*Math.sin(m)+this.x0,t))}function h(t){var e,n,i,o,a;t.x-=this.x0,t.y-=this.y0;var l=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var c=2*Math.atan(l/(2*this.a*this.k0));return e=this.long0,n=this.lat0,l<=r.H0?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(c)*this.sinlat0+t.y*Math.sin(c)*this.coslat0/l),e=Math.abs(this.coslat0)<r.H0?this.lat0>0?(0,u.A)(this.long0+Math.atan2(t.x,-1*t.y),this.over):(0,u.A)(this.long0+Math.atan2(t.x,t.y),this.over):(0,u.A)(this.long0+Math.atan2(t.x*Math.sin(c),l*this.coslat0*Math.cos(c)-t.y*this.sinlat0*Math.sin(c)),this.over),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=r.H0){if(l<=r.H0)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,i=l*this.cons/(2*this.a*this.k0),n=this.con*(0,s.A)(this.e,i),e=this.con*(0,u.A)(this.con*this.long0+Math.atan2(t.x,-1*t.y),this.over)}else o=2*Math.atan(l*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,l<=r.H0?a=this.X0:(a=Math.asin(Math.cos(o)*this.sinX0+t.y*Math.sin(o)*this.cosX0/l),e=(0,u.A)(this.long0+Math.atan2(t.x*Math.sin(o),l*this.cosX0*Math.cos(o)-t.y*this.sinX0*Math.sin(o)),this.over)),n=-1*(0,s.A)(this.e,Math.tan(.5*(r.sK+a)));return t.x=e,t.y=n,t}var d=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];e.default={init:c,forward:f,inverse:h,names:d,ssfn_:l}},6789:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return s},init:function(){return a},inverse:function(){return u},names:function(){return l}});var r=n(4025),i=n(6269),o=n(4424);function a(){r.default.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function s(t){var e,n,o,a;return t.x=(0,i.A)(t.x-this.long0,this.over),r.default.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),o=Math.cos(t.x),a=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*o),t.x=a*n*Math.sin(t.x),t.y=a*(this.cosc0*e-this.sinc0*n*o),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function u(t){var e,n,a,s,u;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,u=(0,o.A)(t.x,t.y)){var l=2*Math.atan2(u,this.R2);e=Math.sin(l),n=Math.cos(l),s=Math.asin(n*this.sinc0+t.y*e*this.cosc0/u),a=Math.atan2(t.x*e,u*this.cosc0*n-t.y*this.sinc0*e)}else s=this.phic0,a=0;return t.x=a,t.y=s,r.default.inverse.apply(this,[t]),t.x=(0,i.A)(t.x+this.long0,this.over),t}var l=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];e.default={init:a,forward:s,inverse:u,names:l}},5518:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return c},init:function(){return l},inverse:function(){return f},names:function(){return h}});var r=n(6194),i=n(3712),o=n(112),a=n(6269),s=n(7e3),u=n(9393);function l(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=(0,r.A)(this.es),this.ml0=(0,i.A)(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function c(t){var e,n,r,o=t.x,u=t.y,l=(0,a.A)(o-this.long0,this.over),c=Math.sin(u),f=Math.cos(u);if(this.es){var h=f*l,d=Math.pow(h,2),p=this.ep2*Math.pow(f,2),m=Math.pow(p,2),g=Math.abs(f)>s.H0?Math.tan(u):0,y=Math.pow(g,2),v=Math.pow(y,2);e=1-this.es*Math.pow(c,2),h/=Math.sqrt(e);var x=(0,i.A)(u,c,f,this.en);n=this.a*(this.k0*h*(1+d/6*(1-y+p+d/20*(5-18*y+v+14*p-58*y*p+d/42*(61+179*v-v*y-479*y)))))+this.x0,r=this.a*(this.k0*(x-this.ml0+c*l*h/2*(1+d/12*(5-y+9*p+4*m+d/30*(61+v-58*y+270*p-330*y*p+d/56*(1385+543*v-v*y-3111*y))))))+this.y0}else{var _=f*Math.sin(l);if(Math.abs(Math.abs(_)-1)<s.H0)return 93;if(n=.5*this.a*this.k0*Math.log((1+_)/(1-_))+this.x0,r=f*Math.cos(l)/Math.sqrt(1-Math.pow(_,2)),(_=Math.abs(r))>=1){if(_-1>s.H0)return 93;r=0}else r=Math.acos(r);u<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=n,t.y=r,t}function f(t){var e,n,r,i,l=(t.x-this.x0)*(1/this.a),c=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+c/this.k0,n=(0,o.A)(e,this.es,this.en),Math.abs(n)<s.sK){var f=Math.sin(n),h=Math.cos(n),d=Math.abs(h)>s.H0?Math.tan(n):0,p=this.ep2*Math.pow(h,2),m=Math.pow(p,2),g=Math.pow(d,2),y=Math.pow(g,2);e=1-this.es*Math.pow(f,2);var v=l*Math.sqrt(e)/this.k0,x=Math.pow(v,2);r=n-(e*=d)*x/(1-this.es)*.5*(1-x/12*(5+3*g-9*p*g+p-4*m-x/30*(61+90*g-252*p*g+45*y+46*p-x/56*(1385+3633*g+4095*y+1574*y*g)))),i=(0,a.A)(this.long0+v*(1-x/6*(1+2*g+p-x/20*(5+28*g+24*y+8*p*g+6*p-x/42*(61+662*g+1320*y+720*y*g))))/h,this.over)}else r=s.sK*(0,u.A)(c),i=0;else{var _=Math.exp(l/this.k0),b=.5*(_-1/_),w=this.lat0+c/this.k0,M=Math.cos(w);e=Math.sqrt((1-Math.pow(M,2))/(1+Math.pow(b,2))),r=Math.asin(e),c<0&&(r=-r),i=0===b&&0===M?0:(0,a.A)(Math.atan2(b,M)+this.long0,this.over)}return t.x=i,t.y=r,t}var h=["Fast_Transverse_Mercator","Fast Transverse Mercator"];e.default={init:l,forward:c,inverse:f,names:h}},251:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return u},init:function(){return s},inverse:function(){return l},names:function(){return c}});var r=n(7e3),i=n(4424),o={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},a={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function s(){if(Object.keys(a).forEach(function(t){if(void 0===this[t])this[t]=a[t].def;else{if(a[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);a[t].num&&(this[t]=parseFloat(this[t]))}a[t].degrees&&(this[t]=this[t]*r.zq)}.bind(this)),Math.abs(Math.abs(this.lat0)-r.sK)<r.H0?this.mode=this.lat0<0?o.S_POLE:o.N_POLE:Math.abs(this.lat0)<r.H0?this.mode=o.EQUIT:(this.mode=o.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function u(t){t.x-=this.long0;var e,n,r,i,a=Math.sin(t.y),s=Math.cos(t.y),u=Math.cos(t.x);switch(this.mode){case o.OBLIQ:n=this.sinph0*a+this.cosph0*s*u;break;case o.EQUIT:n=s*u;break;case o.S_POLE:n=-a;break;case o.N_POLE:n=a}switch(e=(n=this.pn1/(this.p-n))*s*Math.sin(t.x),this.mode){case o.OBLIQ:n*=this.cosph0*a-this.sinph0*s*u;break;case o.EQUIT:n*=a;break;case o.N_POLE:n*=-s*u;break;case o.S_POLE:n*=s*u}return i=1/((r=n*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-n*this.sg)*this.cw*i,n=r*i,t.x=e*this.a,t.y=n*this.a,t}function l(t){t.x/=this.a,t.y/=this.a;var e,n,a,s={x:t.x,y:t.y};a=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*a,n=this.pn1*t.y*this.cw*a,t.x=e*this.cg+n*this.sg,t.y=n*this.cg-e*this.sg;var u=(0,i.A)(t.x,t.y);if(Math.abs(u)<r.H0)s.x=0,s.y=t.y;else{var l,c;switch(c=1-u*u*this.pfact,c=(this.p-Math.sqrt(c))/(this.pn1/u+u/this.pn1),l=Math.sqrt(1-c*c),this.mode){case o.OBLIQ:s.y=Math.asin(l*this.sinph0+t.y*c*this.cosph0/u),t.y=(l-this.sinph0*Math.sin(s.y))*u,t.x*=c*this.cosph0;break;case o.EQUIT:s.y=Math.asin(t.y*c/u),t.y=l*u,t.x*=c;break;case o.N_POLE:s.y=Math.asin(l),t.y=-t.y;break;case o.S_POLE:s.y=-Math.asin(l)}s.x=Math.atan2(t.x,t.y)}return t.x=s.x+this.long0,t.y=s.y,t}var c=["Tilted_Perspective","tpers"];e.default={init:s,forward:u,inverse:l,names:c}},2924:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return l},dependsOn:function(){return a},init:function(){return s},names:function(){return u}});var r=n(6269);var i=n(3426),o=n(7e3),a="etmerc";function s(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*((0,r.A)(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*o.zq,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,i.default.init.apply(this),this.forward=i.default.forward,this.inverse=i.default.inverse}var u=["Universal Transverse Mercator System","utm"],l={init:s,names:u,dependsOn:a}},6671:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return s},init:function(){return a},inverse:function(){return u},names:function(){return l}});var r=n(6269),i=n(7e3),o=n(8597);function a(){this.R=this.a}function s(t){var e,n,a=t.x,s=t.y,u=(0,r.A)(a-this.long0,this.over);Math.abs(s)<=i.H0&&(e=this.x0+this.R*u,n=this.y0);var l=(0,o.A)(2*Math.abs(s/Math.PI));(Math.abs(u)<=i.H0||Math.abs(Math.abs(s)-i.sK)<=i.H0)&&(e=this.x0,n=s>=0?this.y0+Math.PI*this.R*Math.tan(.5*l):this.y0+Math.PI*this.R*-Math.tan(.5*l));var c=.5*Math.abs(Math.PI/u-u/Math.PI),f=c*c,h=Math.sin(l),d=Math.cos(l),p=d/(h+d-1),m=p*p,g=p*(2/h-1),y=g*g,v=Math.PI*this.R*(c*(p-y)+Math.sqrt(f*(p-y)*(p-y)-(y+f)*(m-y)))/(y+f);u<0&&(v=-v),e=this.x0+v;var x=f+p;return v=Math.PI*this.R*(g*x-c*Math.sqrt((y+f)*(f+1)-x*x))/(y+f),n=s>=0?this.y0+v:this.y0-v,t.x=e,t.y=n,t}function u(t){var e,n,o,a,s,u,l,c,f,h,d,p;return t.x-=this.x0,t.y-=this.y0,d=Math.PI*this.R,s=(o=t.x/d)*o+(a=t.y/d)*a,d=3*(a*a/(c=-2*(u=-Math.abs(a)*(1+s))+1+2*a*a+s*s)+(2*(l=u-2*a*a+o*o)*l*l/c/c/c-9*u*l/c/c)/27)/(f=(u-l*l/3/c)/c)/(h=2*Math.sqrt(-f/3)),Math.abs(d)>1&&(d=d>=0?1:-1),p=Math.acos(d)/3,n=t.y>=0?(-h*Math.cos(p+Math.PI/3)-l/3/c)*Math.PI:-(-h*Math.cos(p+Math.PI/3)-l/3/c)*Math.PI,e=Math.abs(o)<i.H0?this.long0:(0,r.A)(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(o*o-a*a)+s*s))/2/o,this.over),t.x=e,t.y=n,t}var l=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];e.default={init:a,forward:s,inverse:u,names:l}},8695:function(t){t.exports={momentum:"geo_action_momentum",pan:"geo_action_pan",rotate:"geo_action_rotate",select:"geo_action_select",unzoomselect:"geo_action_unzoomselect",zoom:"geo_action_zoom",zoomrotate:"geo_action_zoom_rotate",zoomselect:"geo_action_zoomselect",annotation_edit_handle:"geo_annotation_edit_handle",annotation_cursor:"geo_annotation_cursor"}},6978:function(t,e,n){var r=n(6409),i=n(8695),o=n(5325),a=n(642),s=n(6546),u=0,l={create:"create",done:"done",highlight:"highlight",edit:"edit",cursor:"cursor"},c="annotationAction",f={fill:!0,fillColor:function(t){return t.selected?{r:0,g:1,b:1}:{r:.3,g:.3,b:.3}},fillOpacity:function(t){return t.selected?.5:.25},radius:function(t){return"edge"===t.type||"rotate"===t.type?8:10},scaled:!1,stroke:!0,strokeColor:{r:0,g:0,b:1},strokeOpacity:1,strokeWidth:function(t){return"edge"===t.type||"rotate"===t.type?2:3},rotateHandleOffset:24,rotateHandleRotation:-Math.PI/4,resizeHandleOffset:48,resizeHandleRotation:-Math.PI/4,handles:{vertex:!0,edge:!0,center:!0,rotate:!0,resize:!0}},h=function(t,e){"use strict";if(!(this instanceof h))return new h(t,e);var n=this,p=a.deepMerge({},this.constructor.defaults,e||{}),m=p.annotationId;delete p.annotationId,void 0===m||p.layer&&p.layer.annotationById(m)?(u+=1,void 0!==m&&console.warn("Annotation id "+m+" is in use; using "+u+" instead."),m=u):m>u&&(u=m);var g=p.name||t.charAt(0).toUpperCase()+t.substr(1)+" "+m,y=p.label||null,v=p.description||void 0,x=t,_=p.layer,b=p.state||l.done;delete p.state,delete p.layer,delete p.name,delete p.label,delete p.description,p.constraint&&(a.isFunction(p.constraint)?this._selectionConstraint=p.constraint:this._selectionConstraint=d(p.constraint)),this._exit=function(){n.layer()&&n.layer().geoOff(r.mousemove,n._cursorHandleMousemove)},this.id=function(){return m},this.newId=function(){return m=u+=1,n},this.name=function(t){return void 0===t?g:(null!==t&&(""+t).trim()&&(t=(""+t).trim())!==g&&(g=t,n.modified()),n)},this.label=function(t,e){return void 0===t?null!==y||e?y:g:(t!==y&&(y=t,n.modified()),n)},this._labelPosition=function(){return a.centerFromPerimeter(n._coordinates())},this._rotateHandlePosition=function(t,e){var r,i,o,s=n.layer().map(),u=n._coordinates(),l=a.centerFromPerimeter(n._coordinates()),c=l?s.gcsToDisplay(l,null):void 0,f=0;if(l){for(t=t||0,e=e||0,u=u.outer?u.outer:u,r=0;r<u.length;r+=1)i=s.gcsToDisplay(u[r],null),f=Math.max(f,Math.pow(i.x-c.x,2)+Math.pow(i.y-c.y,2));return o=Math.sqrt(f)+t,i=s.displayToGcs({x:c.x+o*Math.cos(e),y:c.y-o*Math.sin(e)},null)}},this.labelRecord=function(){var t=n.options("showLabel");if(t){var e=n.state();if(!(!0===t&&e===l.create||!0!==t&&t.indexOf(e)<0)){var r=n.labelStyle(),i={text:n.label(),position:n._labelPosition()};if(i.position)return r&&(i.style=r),i}}},this.description=function(t){return void 0===t?v:(t!==v&&(v=t,n.modified()),n)},this.layer=function(t){return void 0===t?_:(_=t,n)},this._cursorHandleMousemove=function(t){n.layer()._handleMouseMoveModifiers(t);var e=n._cursorCenter,r=t.mapgcs.x-e.x,i=t.mapgcs.y-e.y;if(r||i){var o=n._coordinates(),a=n._coordinatesMapFunc(o,function(t){return{x:t.x+r,y:t.y+i}});return n._coordinates(a),n._cursorCenter=t.mapgcs,n.modified(),n.draw(),!0}return!1},this.state=function(t){if(void 0===t)return b;if(b!==t&&(b=t,n.layer()&&n.layer().geoTrigger(r.annotation.state,{annotation:n}),n.layer()&&n.layer().geoOff(r.mousemove,n._cursorHandleMousemove),b===l.cursor))n._cursorCenter=a.centerFromPerimeter(n._coordinates()),n.layer()&&n.layer().geoOn(r.mousemove,n._cursorHandleMousemove);return n},this.actions=function(t){switch(t||(t=n.state()),t){case l.edit:return[{action:i.annotation_edit_handle,name:"annotation edit",owner:c,input:"left"},{action:i.annotation_edit_handle,name:"annotation edit",owner:c,input:"pan"}];case l.cursor:return[{action:i.annotation_cursor,name:"annotation cursor",owner:c,input:"pan"},{action:i.annotation_cursor,name:"annotation cursor",owner:c,input:"left"}];default:return[]}},this.processAction=function(t){},this.processEditAction=function(t){if(t&&n._editHandle&&n._editHandle.handle)switch(n._editHandle.handle.type){case"vertex":return n._processEditActionVertex(t);case"edge":return n._processEditActionEdge(t);case"center":return n._processEditActionCenter(t);case"rotate":return n._processEditActionRotate(t);case"resize":return n._processEditActionResize(t)}},this._copyOfCoordinates=function(t){return(t=t||n._coordinates()).outer?{outer:t.outer.slice(),inner:(t.inner||[]).map(function(t){return t.slice()})}:t.slice()},this.selectEditHandle=function(t,e){e&&n._editHandle&&n._editHandle.handle&&n._editHandle.handle.selected&&(n._editHandle.handle.selected=!1),t.selected=e;var i=(n._editHandle||{}).amountRotated||0;return n._editHandle={handle:t,startCoordinates:n._copyOfCoordinates(),center:a.centerFromPerimeter(n._coordinates()),rotatePosition:n._rotateHandlePosition(t.style.rotateHandleOffset,t.style.rotateHandleRotation+i),startAmountRotated:i,amountRotated:i,resizePosition:n._rotateHandlePosition(t.style.resizeHandleOffset,t.style.resizeHandleRotation)},n.layer()&&n.layer().geoTrigger(r.annotation.select_edit_handle,{annotation:n,handle:n._editHandle,enable:e}),n},this.options=function(t,e){if(void 0===t)return p;if("string"==typeof t&&void 0===e)return p[t];var i;if(void 0===e?(i=void 0!==t[n._coordinateOption],p=a.deepMerge(p,t),["style","createStyle","editStyle","editHandleStyle","labelStyle","highlightStyle","cursorStyle"].forEach(function(e){void 0!==t[e]&&Object.assign(p[e],t[e])})):(i=t===n._coordinateOption,p[t]=e),p.coordinates){var o=p.coordinates;delete p.coordinates,n._coordinates(o)}if(void 0!==p.name){var s=p.name;delete p.name,n.name(s)}if(void 0!==p.label){var u=p.label;delete p.label,n.label(u)}if(void 0!==p.description){var l=p.description;delete p.description,n.description(l)}return n.modified(),i&&n.layer()&&n.layer().geoTrigger(r.annotation.coordinates,{annotation:n}),n},this.style=function(t,e,r){return r=r||"style",void 0===t?p[r]:"string"==typeof t&&void 0===e?(p[r]||{})[t]:(void 0===p[r]&&(p[r]={}),void 0===e?p[r]=a.deepMerge(p[r],t):p[r][t]=e,n.modified(),n)},["createStyle","editStyle","editHandleStyle","labelStyle","highlightStyle","cursorStyle"].forEach(function(t){n[t]=function(e,r){return n.style(e,r,t)}}),this.styleForState=function(t){return(t=t||n.state())===l.edit||t===l.highlight?Object.assign({},p.style,p[t+"Style"]):t===l.create?Object.assign({},p.style,p.editStyle,p[t+"Style"]):t===l.cursor?Object.assign({},p.style,p.editStyle,p.createStyle,p[t+"Style"]):p[t+"Style"]||p.style||{}},this.type=function(){return x},this.features=function(){return[]},this.mouseClick=function(t){},this.mouseClickEdit=function(t){},this.mouseMove=function(t){},this._coordinates=function(t){return[]},this._coordinateOption="vertices",this.coordinates=function(t){var e=n._coordinates()||[];if(e.length||e.outer&&e.outer.length||(e=[]),n.layer()){var r=n.layer().map();(t=null===t?r.gcs():void 0===t?r.ingcs():t)!==r.gcs()&&(e=n._convertCoordinates(r.gcs(),t,e))}return e},this.modified=function(){return n.layer()&&n.layer().modified(),n},this.draw=function(){return n.layer()&&(n.layer()._update(),n.layer().draw()),n},this._geojsonStyles=function(){return["closed","fill","fillColor","fillOpacity","lineCap","lineJoin","radius","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]},this._geojsonCoordinates=function(t){return[]},this._geojsonGeometryType=function(){return""},this.geojson=function(t,e){var r,i,o,u=n._geojsonCoordinates(t),l=n._geojsonGeometryType(),c=n._geojsonStyles(),f=n.options("style")||{},h=n.labelStyle()||{};if(u&&u.length&&l){var d={type:"Feature",geometry:{type:l,coordinates:u},properties:{annotationType:x,name:n.name(),annotationId:n.id()}};for(y&&(d.properties.label=y),v&&(d.properties.description=v),!1===n.options("showLabel")&&(d.properties.showLabel=n.options("showLabel")),r=0;r<c.length;r+=1)if(i=c[r],void 0!==(o=a.ensureFunction(f[i])())){var p=((n.constructor.defaults||{}).style||{})[i];i.toLowerCase().match(/color$/)&&(o=a.convertColorToHex(o,"needed"),p=void 0!==p?a.convertColorToHex(p,"needed"):p),o!==p&&(d.properties[i]=o)}for(r=0;r<s.usedStyles.length;r+=1)i=s.usedStyles[r],void 0!==(o=a.ensureFunction(h[i])())&&(i.toLowerCase().match(/color$/)&&(o=a.convertColorToHex(o,"needed")),d.properties["label"+i.charAt(0).toUpperCase()+i.slice(1)]=o);if(e){var m=n.layer().map();t=null===t?m.gcs():void 0===t?m.ingcs():t,d.crs={type:"name",properties:{type:"proj4",name:t}}}return d}},this._addEditHandles=function(t,e,r,i){var o,s=Object.assign({},f,n.editHandleStyle()),u=a.ensureFunction(s.handles)()||{},l=n._editHandle&&n._editHandle.handle&&n._editHandle.handle.selected?n._editHandle.handle:void 0;r=Object.assign({},r),Object.keys(u).forEach(function(t){!1===u[t]&&(r[t]=!1)}),t[3]||(t[3]={point:[]}),o=t[3].point,(e.outer?[e.outer].concat(e.inner||[]):[e]).forEach(function(t,e){t.forEach(function(n,a){!1!==r.vertex&&o.push(Object.assign({},n,{type:"vertex",index:a,vindex:e,style:s,editHandle:!0})),!1===r.edge||a===t.length-1||n.x===t[a+1].x&&n.y===t[a+1].y||o.push(Object.assign({x:(n.x+t[a+1].x)/2,y:(n.y+t[a+1].y)/2},{type:"edge",index:a,vindex:e,style:s,editHandle:!0})),!1===r.edge||i||a!==t.length-1||n.x===t[0].x&&n.y===t[0].y||o.push(Object.assign({x:(n.x+t[0].x)/2,y:(n.y+t[0].y)/2},{type:"edge",index:a,vindex:e,style:s,editHandle:!0}))})}),!1!==r.center&&o.push(Object.assign({},a.centerFromPerimeter(n._coordinates()),{type:"center",style:s,editHandle:!0})),!1!==r.rotate&&(o.push(Object.assign(n._rotateHandlePosition(s.rotateHandleOffset,s.rotateHandleRotation+(l&&"rotate"===l.type?n._editHandle.amountRotated:0)),{type:"rotate",style:s,editHandle:!0})),!n._editHandle||l&&"rotate"===l.type||(n._editHandle.amountRotated=0)),!1!==r.resize&&o.push(Object.assign(n._rotateHandlePosition(s.resizeHandleOffset,s.resizeHandleRotation),{type:"resize",style:s,editHandle:!0})),l&&o.forEach(function(t){t.type===l.type&&t.index===l.index&&t.vindex===l.vindex&&(t.selected=!0)})},this._coordinatesMapFunc=function(t,e){return t.outer?{outer:t.outer.map(e),inner:(t.inner||[]).map(function(t){return t.map(e)})}:t.map(e)},this._firstPointDifferent=function(t,e){return t=t.outer?t.outer:t,e=e.outer?e.outer:e,t[0].x!==e[0].x||t[0].y!==e[0].y},this._processEditActionCenter=function(t){var e=n._editHandle.startCoordinates,r=t.mouse.mapgcs.x-t.state.origin.mapgcs.x,i=t.mouse.mapgcs.y-t.state.origin.mapgcs.y,o=n._coordinates(),a=n._coordinatesMapFunc(e,function(t){return{x:t.x+r,y:t.y+i}});return!!n._firstPointDifferent(a,o)&&(n._coordinates(a),!0)},this._processEditActionRotate=function(t){var e=n._editHandle,r=e.startCoordinates,i=t.mouse.mapgcs.x-t.state.origin.mapgcs.x,o=t.mouse.mapgcs.y-t.state.origin.mapgcs.y,a=Math.atan2(e.rotatePosition.y-e.center.y,e.rotatePosition.x-e.center.x),s=Math.atan2(e.rotatePosition.y+o-e.center.y,e.rotatePosition.x+i-e.center.x)-a,u=n._coordinates(),l=n._coordinatesMapFunc(r,function(t){var n=t.x-e.center.x,r=t.y-e.center.y;return{x:n*Math.cos(s)-r*Math.sin(s)+e.center.x,y:n*Math.sin(s)+r*Math.cos(s)+e.center.y}});return!!n._firstPointDifferent(l,u)&&(n._coordinates(l),e.amountRotated=e.startAmountRotated+s,!0)},this._processEditActionResize=function(t){var e=n._editHandle,r=e.startCoordinates,i=t.mouse.mapgcs.x-t.state.origin.mapgcs.x,o=t.mouse.mapgcs.y-t.state.origin.mapgcs.y,a=n.layer().map(),s=a.gcsToDisplay(e.center,null),u=a.gcsToDisplay(e.resizePosition,null),l=a.gcsToDisplay({x:e.resizePosition.x+i,y:e.resizePosition.y+o},null),c=Math.pow(Math.pow(u.y-s.y,2)+Math.pow(u.x-s.x,2),.5)-e.handle.style.resizeHandleOffset,f=Math.pow(Math.pow(l.y-s.y,2)+Math.pow(l.x-s.x,2),.5)-e.handle.style.resizeHandleOffset,h=n._coordinates();if(f&&c){var d=f/c,p=n._coordinatesMapFunc(r,function(t){return{x:(t.x-e.center.x)*d+e.center.x,y:(t.y-e.center.y)*d+e.center.y}});if(n._firstPointDifferent(p,h))return n._coordinates(p),!0}return!1},this._processEditActionEdge=function(t){var e=n._editHandle,r=e.handle.index,i=e.handle.vindex,o=n._coordinates();o.outer?(i?o.inner[i-1]:o.outer).splice(r+1,0,{x:e.handle.x,y:e.handle.y}):o.splice(r+1,0,{x:e.handle.x,y:e.handle.y});return e.handle.type="vertex",e.handle.index+=1,e.startCoordinates=n._copyOfCoordinates(o),n.modified(),!0},this._processEditActionVertex=function(t,e){var i,o,a=n._editHandle,s=a.handle.index,u=a.handle.vindex,l=a.startCoordinates,c=n._coordinates(),f=c.outer?u?c.inner[u-1]:c.outer:c,h=f.length,d=f[s],p=t.mouse.mapgcs.x-t.state.origin.mapgcs.x,m=t.mouse.mapgcs.y-t.state.origin.mapgcs.y,g=n.layer(),y=g.options("adjacentPointProximity");return l.outer&&(l=u?l.inner[u-1]:l.outer),f[s]={x:l[s].x+p,y:l[s].y+m},g.displayDistance(f[s],null,l[s],null)<=y||(g.displayDistance(f[s],null,f[(s+1)%f.length],null)<=y?i=(s+1)%f.length:g.displayDistance(f[s],null,f[(s+f.length-1)%f.length],null)<=y&&(i=(s+f.length-1)%f.length)),o=0===i&&s===f.length-1||i===f.length-1&&0===s,!1===e&&o&&(i=void 0),void 0!==i&&f.length>(e||n.options("style").closed?3:2)&&(f[s]={x:f[i].x,y:f[i].y},t.event===r.actionup&&(e&&o&&(n.options("style").closed=!0),f.splice(s,1))),(f.length!==h||f[s].x!==d.x||f[s].y!==d.y)&&(n._coordinates(c),!0)},this._convertCoordinates=function(t,e,r){var i=!r;return r=(r=r||n._coordinates()).outer?{outer:o.transformCoordinates(t,e,r.outer),inner:(r.inner||[]).map(function(n){return o.transformCoordinates(t,e,n)})}:o.transformCoordinates(t,e,r),i&&n._coordinates(r),r}};function d(t){var e=Array.isArray(t)?t:[t];return function(t,n,r,i,o,a){var s,u=t;if(r||(r=[{x:n.x,y:n.y},{x:t.x,y:n.y},{x:t.x,y:t.y},{x:n.x,y:t.y}]),i){var l,c,f=(a+1)%4,h=(a+2)%4,d=(a+3)%4,p=Math.pow(Math.pow(r[a].x-r[f].x,2)+Math.pow(r[a].y-r[f].y,2),.5),m=Math.pow(Math.pow(r[a].x-r[d].x,2)+Math.pow(r[a].y-r[d].y,2),.5),g=Math.abs(p*m);e.forEach(function(t){var e,n;if(t.width?(e=t.width,n=t.height):n=(e=Math.pow(g*t,.5))/t,e!==n&&!(a%2)){var r=[n,e];e=r[0],n=r[1]}var i=Math.pow(e-m,2)+Math.pow(n-p,2);(void 0===s||i<s)&&(s=i,l={w:e,h:n})});var y=o[f],v={x:-l.w*Math.cos(y),y:-l.w*Math.sin(y)},x=o[a],_={x:-l.h*Math.cos(x),y:-l.h*Math.sin(x)};switch(i){case"vertex":r[a].x=r[h].x+v.x+_.x,r[a].y=r[h].y+v.y+_.y,r[f].x=r[h].x+v.x,r[f].y=r[h].y+v.y,r[d].x=r[h].x+_.x,r[d].y=r[h].y+_.y;break;case"edge":c={x:.5*(r[h].x+r[d].x),y:.5*(r[h].y+r[d].y)},r[h].x=c.x+_.x/2,r[h].y=c.y+_.y/2,r[a].x=c.x+v.x-_.x/2,r[a].y=c.y+v.y-_.y/2,r[f].x=c.x+v.x+_.x/2,r[f].y=c.y+v.y+_.y/2,r[d].x=c.x-_.x/2,r[d].y=c.y-_.y/2}}else{var b=Math.abs((t.x-n.x)*(t.y-n.y));e.forEach(function(e){var r,i;e.width?(r=e.width,i=e.height):i=(r=Math.pow(b*e,.5))/e;var o={x:n.x+Math.sign(t.x-n.x)*r,y:n.y+Math.sign(t.y-n.y)*i},a=Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2);(void 0===s||a<s)&&(s=a,u=o)}),r[0].y=r[1].y=n.y,r[0].x=r[3].x=n.x,r[1].x=r[2].x=u.x,r[2].y=r[3].y=u.y}return{corners:r,origin:n,pos:u}}}h.defaults={showLabel:!0},t.exports={state:l,actionOwner:c,annotation:h,_editHandleFeatureLevel:3,defaultEditHandleStyle:f,constrainAspectRatio:d,annotationActionOwner:c,continuousVerticesActions:function(t,e,n,r,o){return n||(n=t.state()),n===l.create?[{action:i["annotation_"+r],name:r+" create",owner:c,input:"left"},{action:i["annotation_"+r],name:r+" create",owner:c,input:"pan"}]:e.apply(t,o)},continuousVerticesProcessAction:function(t,e,n){var o=t.layer();if(t.state()===l.create&&o&&e.state.action===i["annotation_"+n]){var a=o.options("continuousPointProximity"),s=o.options("continuousPointCollinearity"),u=o.options("continuousCloseProximity");if(a||0===a){var c=t.options("vertices"),f=!1;if(!c.length)return c.push(e.mouse.mapgcs),c.push(e.mouse.mapgcs),!0;var h=o.displayDistance(c[c.length-2],null,e.mouse.map,"display");if(h&&h>a){if(c.length>=(t._lastClickVertexCount||1)+3){var d=o.displayDistance(c[c.length-3],null,c[c.length-2],null),p=h,m=o.displayDistance(c[c.length-3],null,e.mouse.map,"display");if(d&&m)(m*m-d*d-p*p)/(2*d*p)>Math.cos(s)&&c.pop()}c[c.length-1]=e.mouse.mapgcs,c.push(e.mouse.mapgcs),f=!0}return(u||0===u)&&e.event===r.actionup&&(!0===u||o.displayDistance(c[0],null,e.mouse.map,"display")<=a)?c.length<3+("polygon"===n?1:0)?"remove":(c.pop(),t.state(l.done),"done"):f}}}}},9894:function(t,e,n){var r=n(4626),i=n(1098).registerAnnotation,o=n(2225),a=n(642),s=n(3656),u=function(t,e){"use strict";if(!(this instanceof u))return new u(t,e);t=a.deepMerge({},this.constructor.defaults,t,{constraint:1}),s.call(this,t,e||"circle")};r(u,s),u.defaults=Object.assign({},s.defaults,{});var l={};l[o.capabilities.feature]=!0,i("circle",u,l),t.exports=u},3656:function(t,e,n){var r=n(4626),i=n(1098).registerAnnotation,o=n(2225),a=n(642),s=n(6978).state,u=n(4019),l=function(t,e){"use strict";if(!(this instanceof l))return new l(t,e);t=a.deepMerge({},this.constructor.defaults,t),u.call(this,t,e||"ellipse");var n=this;this.features=function(){var t,e=n.options(),r=n.state();if(t=[],e.corners&&e.corners.length>=4){var i=n.styleForState(r),a=Math.pow(Math.pow(e.corners[0].x-e.corners[1].x,2)+Math.pow(e.corners[0].y-e.corners[1].y,2),.5),u=Math.pow(Math.pow(e.corners[0].x-e.corners[3].x,2)+Math.pow(e.corners[0].y-e.corners[3].y,2),.5),l=Math.max(a,u)/2/n.layer().map().unitsPerPixel(0),c=a?u/a:1e20,f=-Math.atan2(e.corners[1].y-e.corners[0].y,e.corners[1].x-e.corners[0].x);t=[{marker:{x:(e.corners[0].x+e.corners[1].x+e.corners[2].x+e.corners[3].x)/4,y:(e.corners[0].y+e.corners[1].y+e.corners[2].y+e.corners[3].y)/4,style:Object.assign({},i,{radius:l,symbolValue:c,rotation:f,strokeOffset:0,radiusIncludesStroke:!1,scaleWithZoom:o.scaleMode.fill,rotateWithMap:!0,strokeOpacity:!1===i.stroke?0:i.strokeOpacity,fillOpacity:!1===i.fill?0:i.fillOpacity})}}]}return r===s.edit&&n._addEditHandles(t,e.corners),t},this.toPolygonList=function(t){var e=n._coordinates();if(e.length<3)return[];var r=t&&t.tolerance||0;if(!r){var i=n.layer().map();r=t&&t.pixelTolerance?i.unitsPerPixel(i.zoom())*t.pixelTolerance:.1*i.unitsPerPixel(i.zoomRange().max)}for(var o=Math.pow(Math.pow(e[0].x-e[1].x,2)+Math.pow(e[0].y-e[1].y,2),.5),a=Math.pow(Math.pow(e[0].x-e[3].x,2)+Math.pow(e[0].y-e[3].y,2),.5),s=(e[0].x+e[2].x)/2,u=(e[0].y+e[2].y)/2,l=Math.max(o,a)/2,c=-Math.atan2(e[1].y-e[0].y,e[1].x-e[0].x),f=Math.max(12,Math.ceil(Math.PI/Math.acos((l-r)/(l+r)))),h=o/2*(1+(1-Math.cos(Math.PI/f))/2),d=a/2*(1+(1-Math.cos(Math.PI/f))/2),p=[],m=Math.cos(c),g=Math.sin(c),y=0;y<f;y+=1){var v=2*Math.PI*y/f,x=Math.cos(v),_=Math.sin(v),b=s+h*m*x-d*g*_,w=u+h*g*x+d*m*_;p.push([b,w])}return[[p]]}};r(l,u),l.defaults=Object.assign({},u.defaults,{});var c={};c[o.capabilities.feature]=!0,i("ellipse",l,c),t.exports=l},4655:function(t,e,n){var r=n(6978);t.exports={state:r.state,actionOwner:r.actionOwner,annotation:r.annotation,_editHandleFeatureLevel:r._editHandleFeatureLevel,defaultEditHandleStyle:r.defaultEditHandleStyle,constrainAspectRatio:r.constrainAspectRatio,baseAnnotation:r,circleAnnotation:n(9894),ellipseAnnotation:n(3656),lineAnnotation:n(2612),pointAnnotation:n(400),polygonAnnotation:n(1920),rectangleAnnotation:n(4019),squareAnnotation:n(5229)}},2612:function(t,e,n){var r=n(4626),i=n(1098).registerAnnotation,o=n(9281),a=n(642),s=n(6978).annotation,u=n(6978).state,l=n(6978).continuousVerticesActions,c=n(6978).continuousVerticesProcessAction,f=function(t){"use strict";if(!(this instanceof f))return new f(t);(t=a.deepMerge({},this.constructor.defaults,{style:{line:function(t){return Array(e.options("vertices").length).fill(t)},position:function(t,n){return e.options("vertices")[n]}},createStyle:{line:function(t){return Array(e.options("vertices").length).fill(t)},position:function(t,n){return e.options("vertices")[n]}}},t)).vertices=t.vertices||t.coordinates||[],delete t.coordinates,s.call(this,"line",t);var e=this,n=this.actions,r=this.processEditAction;this.features=function(){var t,n=e.options(),r=e.state();if(r===u.create)t=[{line:{line:n.vertices,style:e.styleForState(r)}}];else t=[{line:{line:n.vertices,style:e.styleForState(r)}}],r===u.edit&&e._addEditHandles(t,n.vertices,void 0,!e.style("closed"));return t},this._coordinates=function(t){return t&&e.options("vertices",t),e.options("vertices")},this.mouseMove=function(t){if(e.state()===u.create){var n=e.options("vertices");return n.length?(n[n.length-1]=t.mapgcs,!0):void 0}},this.mouseClick=function(t){var n=e.layer();if(e.state()===u.create&&n){var r,i=!!t.buttonsDown.right;if(t.buttonsDown.left||t.buttonsDown.right){var o=e.options("vertices");if(!t.buttonsDown.right||o.length)return t.handled=!0,t.buttonsDown.left&&(o.length?o.length>=2&&n.displayDistance(o[o.length-2],null,t.map,"display")<=n.options("adjacentPointProximity")?(r=!0,e._lastClick&&t.time-e._lastClick<n.options("dblClickTime")&&(i=!0)):o.length>=2&&n.displayDistance(o[0],null,t.map,"display")<=n.options("finalPointProximity")?i="close":o[o.length-1]=t.mapgcs:o.push(t.mapgcs),i||r||o.push(t.mapgcs),e._lastClick=t.time,e._lastClickVertexCount=o.length),i?o.length<3?"remove":(o.pop(),e.options("style").closed="close"===i,e.state(u.done),"done"):!r}}},this.actions=function(t){return l(e,n,t,"line",arguments)},this.processAction=function(t){return c(e,t,"line")},this._geojsonCoordinates=function(t){var n=e.coordinates(t);if(n&&!(n.length<2)&&e.state()!==u.create){for(var r=[],i=0;i<n.length;i+=1)r.push([n[i].x,n[i].y]);return r}},this._geojsonGeometryType=function(){return"LineString"},this._geojsonStyles=function(){return["closed","lineCap","lineJoin","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]},this.processEditAction=function(t){return"vertex"===e._editHandle.handle.type?e._processEditActionVertex(t,!0):r.apply(e,arguments)},this.mouseClickEdit=function(t){var n,r=e.layer(),i=e._editHandle;if(e.state()===u.edit&&r&&t.buttonsDown.left&&i&&i.handle.selected&&"edge"===i.handle.type&&e.options("style").closed&&(t.handled=!0,e._lastClick&&t.time-e._lastClick<r.options("dblClickTime")&&(n=!0),e._lastClick=t.time,n)){var o=i.handle.index,a=e._coordinates(),s=a.slice(o+1).concat(a.slice(0,o+1));return e._coordinates(s),e.options("style").closed=!1,i.handle.index=void 0,!0}}};r(f,s),f.defaults=Object.assign({},s.defaults,{style:{strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3,closed:!1,lineCap:"butt",lineJoin:"miter"},highlightStyle:{strokeWidth:5},createStyle:{strokeColor:{r:0,g:0,b:1},strokeOpacity:1,strokeWidth:3,closed:!1,lineCap:"butt",lineJoin:"miter"},allowBooleanOperations:["annotation-cut"]});var h={};h[o.capabilities.basic]=[u.create],i("line",f,h),t.exports=f},400:function(t,e,n){var r=n(4626),i=n(642),o=n(1098).registerAnnotation,a=n(7541),s=n(6978).annotation,u=n(6978).state,l=function(t){"use strict";if(!(this instanceof l))return new l(t);(t=i.deepMerge({},this.constructor.defaults,t)).position=t.position||(t.coordinates?t.coordinates[0]:void 0),delete t.coordinates,s.call(this,"point",t);var e=this;this.features=function(){var t,n,r,o=e.options(),a=e.state();if(a===u.create)t=[];else n=e.styleForState(a),(o.style.scaled||0===o.style.scaled)&&(!0===o.style.scaled&&(o.style.scaled=e.layer().map().zoom()),n=Object.assign({},n,{radius:function(){var t=o.style.radius,n=e.layer().map().zoom();return i.isFunction(t)&&(t=t.apply(e,arguments)),t*=Math.pow(2,n-o.style.scaled),t}}),r=!0),t=[{point:{x:o.position.x,y:o.position.y,style:n,scaleOnZoom:r}}],a===u.edit&&e._addEditHandles(t,[o.position],{edge:!1,center:!1,resize:!1,rotate:!1});return t},this._coordinates=function(t){return t&&t.length>=1&&e.options("position",t[0]),e.state()===u.create?[]:[e.options("position")]},this._coordinateOption="position",this.mouseClick=function(t){if(e.state()===u.create&&t.buttonsDown.left)return t.handled=!0,e.options("position",t.mapgcs),e.state(u.done),"done"},this._geojsonStyles=function(){return["fill","fillColor","fillOpacity","radius","scaled","stroke","strokeColor","strokeOpacity","strokeWidth"]},this._geojsonCoordinates=function(t){var n=e.coordinates(t);if(n&&e.state()!==u.create&&!(n.length<1)&&void 0!==n[0])return[n[0].x,n[0].y]},this._geojsonGeometryType=function(){return"Point"}};r(l,s),l.defaults=Object.assign({},s.defaults,{style:{fill:!0,fillColor:{r:0,g:1,b:0},fillOpacity:.25,radius:10,scaled:!1,stroke:!0,strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3},createStyle:{fillColor:{r:.3,g:.3,b:.3},fillOpacity:.25,strokeColor:{r:0,g:0,b:1}},highlightStyle:{fillColor:{r:0,g:1,b:1},fillOpacity:.5,strokeWidth:5}});var c={};c[a.capabilities.feature]=!0,o("point",l,c),t.exports=l},1920:function(t,e,n){var r=n(4626),i=n(1098).registerAnnotation,o=n(9281),a=n(6645),s=n(642),u=n(6978).annotation,l=n(6978).state,c=n(6978).continuousVerticesActions,f=n(6978).continuousVerticesProcessAction,h=function(t){"use strict";if(!(this instanceof h))return new h(t);var e=this;(t=s.deepMerge({style:{polygon:function(t){return t.polygon}},createStyle:{line:function(t){var n=e._coordinates();return Array((n.outer||n).length).fill(t)},position:function(t,n){return void 0!==t.x?t:e.options("vertices")[n]}},cursorStyle:{position:s.identityFunction}},this.constructor.defaults,t)).vertices=t.vertices||t.coordinates||[],delete t.coordinates,u.call(this,"polygon",t);var n=this.actions,r=this.state;this.features=function(){var t,n=e.options(),r=e.state(),i=e.styleForState(r);if(r===l.create)t=[],n.vertices&&(n.vertices.outer||n.vertices.length>=3)&&(t[1]={polygon:{polygon:n.vertices,style:i}}),n.vertices&&n.vertices.length>=2&&(t[2]={line:{line:n.vertices,style:i}});else t=[{polygon:{polygon:n.vertices,style:i}}],r===l.edit&&e._addEditHandles(t,n.vertices);return t},this.toPolygonList=function(t){var n=e._coordinates();if(n.outer){var r=[[n.outer.map(function(t){return[t.x,t.y]})]];return(n.inner||[]).forEach(function(t){return r[0].push(t.map(function(t){return[t.x,t.y]}))}),r}return n.length<3||!n.map?[]:[[n.map(function(t){return[t.x,t.y]})]]},this._coordinates=function(t){return t&&e.options("vertices",t),e.options("vertices")},this.mouseMove=function(t){if(e.state()===l.create){var n=e.options("vertices");return n.length?(n[n.length-1]=t.mapgcs,!0):void 0}},this.mouseClick=function(t){var n=e.layer();if(e.state()===l.create&&n){var r,i=!!t.buttonsDown.right;if(t.buttonsDown.left||t.buttonsDown.right){var o=e.options("vertices");if(!t.buttonsDown.right||o.length)return t.handled=!0,t.buttonsDown.left&&(o.length?o.length>=2&&n.displayDistance(o[o.length-2],null,t.map,"display")<=n.options("adjacentPointProximity")?(r=!0,e._lastClick&&t.time-e._lastClick<n.options("dblClickTime")&&(i=!0)):o.length>=2&&n.displayDistance(o[0],null,t.map,"display")<=n.options("finalPointProximity")?i=!0:o[o.length-1]=t.mapgcs:o.push(t.mapgcs),i||r||o.push(t.mapgcs),e._lastClick=t.time,e._lastClickVertexCount=o.length),i?o.length<4?"remove":(o.pop(),e.state(l.done),"done"):!r}}},this.actions=function(t){return c(e,n,t,"polygon",arguments)},this.state=function(t){var n=r();if(t&&t!==n&&(n===l.create||n===l.edit)&&t===l.done){for(var i=s.polyops.union(e.options("vertices"),[],{style:"object-listlist-outer-list"}),o=!0;i.length>1&&o;){o=!1;for(var a=0;!o&&a<i[0].outer.length;a+=1)for(var u=i[0].outer[a],c=1;!o&&c<i.length;c+=1)for(var f=0;!o&&f<i[c].outer.length;f+=1){var h=i[c].outer[f];u.x===h.x&&u.y===h.y&&(i[0].inner=i[0].inner.concat(i[c].inner),i[0].outer=i[0].outer.slice(0,a).concat(i[c].outer.slice(f)).concat(i[c].outer.slice(0,f)).concat(i[0].outer.slice(a)),i.splice(c,1),o=!0)}}1===i.length&&e.options("vertices",i[0].inner.length?i[0]:i[0].outer)}return r(t)},this.processAction=function(t){return f(e,t,"polygon")},this._geojsonCoordinates=function(t){var n=e.coordinates(t);if(!(!n||!n.outer&&n.length<3||e.state()===l.create)){var r=[];return n.outer?((r=[n.outer.map(function(t){return[t.x,t.y]})])[0].push(r[0][0].slice()),(n.inner||[]).forEach(function(t){var e=t.map(function(t){return[t.x,t.y]});e.push(e[0].slice()),r.push(e)})):(r=[n.map(function(t){return[t.x,t.y]})])[0].push(r[0][0].slice()),r}},this._geojsonGeometryType=function(){return"Polygon"},this._geojsonStyles=function(){return["fill","fillColor","fillOpacity","lineCap","lineJoin","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]}};r(h,u),h.defaults=Object.assign({},u.defaults,{style:{fill:!0,fillColor:{r:0,g:1,b:0},fillOpacity:.25,stroke:!0,strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3,uniformPolygon:!0},highlightStyle:{fillColor:{r:0,g:1,b:1},fillOpacity:.5,strokeWidth:5},createStyle:{closed:!1,fillColor:{r:.3,g:.3,b:.3},fillOpacity:.25,stroke:!1,strokeColor:{r:0,g:0,b:1}},cursorStyle:{closed:!0,fillColor:{r:.3,g:.3,b:.3},fillOpacity:.25,stroke:!0,strokeColor:{r:0,g:0,b:1}},allowBooleanOperations:!0});var d={};d[a.capabilities.feature]=!0,d[o.capabilities.basic]=[l.create],i("polygon",h,d),t.exports=h},4019:function(t,e,n){var r=n(4626),i=n(6409),o=n(8695),a=n(1098).registerAnnotation,s=n(6645),u=n(642),l=n(6978).annotation,c=n(6978).state,f=n(6978).annotationActionOwner,h=function(t,e){"use strict";if(!(this instanceof h))return new h(t,e);(t=u.deepMerge({},this.constructor.defaults,t)).corners=t.corners||t.coordinates||[],delete t.coordinates,l.call(this,e||"rectangle",t);var n=this,r=this.actions,a=this.processEditAction;this.actions=function(t){return t||(t=n.state()),t===c.create?[{action:o.annotation_rectangle,name:"rectangle create",owner:f,input:"left",selectionRectangle:!0,selectionConstraint:this._selectionConstraint}]:r.apply(n,arguments)},this.processAction=function(t){var e=n.layer();if(n.state()===c.create&&e&&t.event===i.actionselection&&t.state.action===o.annotation_rectangle){var r=e.map(),a=[r.displayToGcs({x:t.lowerLeft.x,y:t.lowerLeft.y},null),r.displayToGcs({x:t.lowerLeft.x,y:t.upperRight.y},null),r.displayToGcs({x:t.upperRight.x,y:t.upperRight.y},null),r.displayToGcs({x:t.upperRight.x,y:t.lowerLeft.y},null)];return this._selectionConstraint&&t.mouse&&t.state.origin&&this._selectionConstraint(t.mouse.mapgcs,t.state.origin.mapgcs,a),e.displayDistance(a[0],null,a[1],null)*e.displayDistance(a[0],null,a[3],null)<.01?"remove":(n.options("corners",a),n.state(c.done),"done")}},this.features=function(){var t,e=n.options(),r=n.state();return t=[],e.corners&&e.corners.length>=4&&(t=[{polygon:{polygon:e.corners,style:n.styleForState(r)}}]),r===c.edit&&n._addEditHandles(t,e.corners),t},this.toPolygonList=function(t){return n._coordinates().length<3?[]:[[n._coordinates().map(function(t){return[t.x,t.y]})]]},this._coordinates=function(t){return t&&t.length>=4&&n.options("corners",t.slice(0,4)),n.options("corners")},this._coordinateOption="corners",this._geojsonCoordinates=function(t){var e=n.coordinates(t);if(e&&n.state()!==c.create&&!(e.length<4)){for(var r=[],i=0;i<4;i+=1)r.push([e[i].x,e[i].y]);return r.push([e[0].x,e[0].y]),[r]}},this._geojsonGeometryType=function(){return"Polygon"},this._geojsonStyles=function(){return["fill","fillColor","fillOpacity","lineCap","lineJoin","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]},this._setCornersFromMouse=function(t,e){var r=n.layer().map(),i=r.gcsToDisplay({x:t[0].x,y:t[0].y},null),o=r.gcsToDisplay(e.mapgcs,null),a={x:o.x,y:i.y},s={x:i.x,y:o.y};t[2]=Object.assign({},e.mapgcs),t[1]=r.displayToGcs(a,null),t[3]=r.displayToGcs(s,null),this._selectionConstraint&&this._selectionConstraint(e.mapgcs,t[0],t)},this.mouseMove=function(t){if(n.state()===c.create){var e=n.options("corners");return e.length?(n._setCornersFromMouse(e,t),!0):void 0}},this.mouseClick=function(t){var e=n.layer();if(n.state()===c.create&&e&&(t.buttonsDown.left||t.buttonsDown.right)){var r=n.options("corners");if(!t.buttonsDown.right||r.length)return t.handled=!0,r.length?(n._setCornersFromMouse(r,t),e.displayDistance(r[0],null,r[1],null)*e.displayDistance(r[0],null,r[3],null)<.01?"remove":(n.state(c.done),"done")):t.buttonsDown.left?(r.push(Object.assign({},t.mapgcs)),r.push(Object.assign({},t.mapgcs)),r.push(Object.assign({},t.mapgcs)),r.push(Object.assign({},t.mapgcs)),!0):void 0}},this.processEditAction=function(t){var e,r,i,o,s,u=n._editHandle.startCoordinates,l={x:t.mouse.mapgcs.x-t.state.origin.mapgcs.x,y:t.mouse.mapgcs.y-t.state.origin.mapgcs.y},c=n._editHandle.handle.type,f=n._editHandle.handle.index,h=[Math.atan2(u[1].y-u[0].y,u[1].x-u[0].x),Math.atan2(u[2].y-u[1].y,u[2].x-u[1].x),Math.atan2(u[3].y-u[2].y,u[3].x-u[2].x),Math.atan2(u[0].y-u[3].y,u[0].x-u[3].x)];switch(h[0]||h[1]||h[2]||h[3]||(h[1]=Math.PI/2,h[2]=Math.PI,h[3]=-Math.PI/2),h[0]||h[2]||(h[0]=h[1]-Math.PI/2,h[2]=h[1]+Math.PI/2),h[1]||h[3]||(h[1]=h[2]-Math.PI/2,h[3]=h[2]+Math.PI/2),c){case"vertex":return e=u.map(function(t){return{x:t.x,y:t.y}}),o=h[(f+1)%4],r={x:(l.x*Math.cos(o)+l.y*Math.sin(o))*Math.cos(o),y:(l.y*Math.sin(o)+l.x*Math.cos(o))*Math.sin(o)},s=h[f],i={x:(l.x*Math.cos(s)+l.y*Math.sin(s))*Math.cos(s),y:(l.y*Math.sin(s)+l.x*Math.cos(s))*Math.sin(s)},e[f].x+=l.x,e[f].y+=l.y,e[(f+1)%4].x+=r.x,e[(f+1)%4].y+=r.y,e[(f+3)%4].x+=i.x,e[(f+3)%4].y+=i.y,this._selectionConstraint&&(e=this._selectionConstraint(t.mouse.mapgcs,t.state.origin.mapgcs,e,"vertex",h,f).corners),n.options("corners",e),!0;case"edge":return e=u.map(function(t){return{x:t.x,y:t.y}}),o=h[(f+1)%4],l={x:(l.x*Math.cos(o)+l.y*Math.sin(o))*Math.cos(o),y:(l.y*Math.sin(o)+l.x*Math.cos(o))*Math.sin(o)},e[f].x+=l.x,e[f].y+=l.y,e[(f+1)%4].x+=l.x,e[(f+1)%4].y+=l.y,this._selectionConstraint&&(e=this._selectionConstraint(t.mouse.mapgcs,t.state.origin.mapgcs,e,"edge",h,f).corners),n.options("corners",e),!0}return a.apply(n,arguments)}};r(h,l),h.defaults=Object.assign({},l.defaults,{style:{fill:!0,fillColor:{r:0,g:1,b:0},fillOpacity:.25,polygon:function(t){return t.polygon},stroke:!0,strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3,uniformPolygon:!0},highlightStyle:{fillColor:{r:0,g:1,b:1},fillOpacity:.5,strokeWidth:5},createStyle:{fillColor:{r:.3,g:.3,b:.3},fillOpacity:.25,strokeColor:{r:0,g:0,b:1}},allowBooleanOperations:!0});var d={};d[s.capabilities.feature]=!0,a("rectangle",h,d),t.exports=h},5229:function(t,e,n){var r=n(4626),i=n(1098).registerAnnotation,o=n(6645),a=n(642),s=n(4019),u=function(t,e){"use strict";if(!(this instanceof u))return new u(t,e);t=a.deepMerge({},this.constructor.defaults,t,{constraint:1}),s.call(this,t,e||"square")};r(u,s),u.defaults=Object.assign({},s.defaults,{});var l={};l[o.capabilities.feature]=!0,i("square",u,l),t.exports=u},2075:function(t,e,n){function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var o=n(4626),a=n(6498),s=n(4655),u=n(6409),l=n(1098),c=n(5325),f=n(5616),h=n(7549),d=n(6546),p=n(2612),m=function(t){"use strict";if(!(this instanceof m))return new m(t);a.call(this,t);var e,i,o,g,y=n(7908),v=n(77),x=n(642),_=this,b=this._init,w=this._exit,M=this.draw,A=this._update,E=v(),T=null,S=[],C={},k=[],P={closed:{dataType:"boolean",keys:["closed","close"]},fill:{dataType:"boolean",keys:["fill"]},fillColor:{dataType:"color",keys:["fillColor","fill-color","marker-color","fill"]},fillOpacity:{dataType:"opacity",keys:["fillOpacity","fill-opacity"]},lineCap:{dataType:"text",keys:["lineCap","line-cap"]},lineJoin:{dataType:"text",keys:["lineJoin","line-join"]},radius:{dataType:"positive",keys:["radius"]},scaled:{dataType:"booleanOrNumber",keys:["scaled"]},stroke:{dataType:"boolean",keys:["stroke"]},strokeColor:{dataType:"color",keys:["strokeColor","stroke-color","stroke"]},strokeOffset:{dataType:"number",keys:["strokeOffset","stroke-offset"]},strokeOpacity:{dataType:"opacity",keys:["strokeOpacity","stroke-opacity"]},strokeWidth:{dataType:"positive",keys:["strokeWidth","stroke-width"]}},O={offset:"coordinate2",rotateWithMap:"boolean",rotation:"angle",scaleWithMap:"boolean",scale:"booleanOrNumber",shadowBlur:"numberOrBlank",shadowOffset:"coordinate2",strokeWidth:"numberOrBlank",visible:"boolean"};return d.usedStyles.forEach(function(t){P[t]={option:"labelStyle",dataType:O[t]||"text",keys:[t,"label"+t.charAt(0).toUpperCase()+t.slice(1),t.replace(/([A-Z])/g,"-$1").toLowerCase(),"label-"+t.replace(/([A-Z])/g,"-$1").toLowerCase()]}}),e=x.deepMerge({},{dblClickTime:300,adjacentPointProximity:5,continuousPointProximity:5,continuousPointCollinearity:1*Math.PI/180,continuousCloseProximity:10,finalPointProximity:10,showLabels:!0,clickToEdit:!1},t),this._processAction=function(t){var e;if(t.state&&t.state.actionRecord&&t.state.actionRecord.owner===s.actionOwner&&_.currentAnnotation)switch(_.mode()){case _.modes.edit:e=_.currentAnnotation.processEditAction(t),_.currentAnnotation&&_.currentAnnotation._editHandle&&_.currentAnnotation._editHandle.handle&&(_.geoTrigger(u.annotation.edit_action,{annotation:_.currentAnnotation,handle:_.currentAnnotation._editHandle?_.currentAnnotation._editHandle.handle:void 0,action:t.event}),t.event===u.actionup&&_._selectEditHandle({data:_.currentAnnotation._editHandle.handle},_.currentAnnotation._editHandle.handle.selected));break;case _.modes.cursor:_.currentAnnotation._cursorHandleMousemove(t.mouse),e=_.currentAnnotation.processAction(t),_.geoTrigger(u.annotation.cursor_action,{annotation:_.currentAnnotation,operation:_.currentBooleanOperation(),evt:t});break;default:e=_.currentAnnotation.processAction(t)}_._updateFromEvent(e)},this.currentBooleanOperation=function(){var t;return _._currentBooleanClass&&(t=_._currentBooleanClass.split("-")[1]),t},this._handleBooleanOperation=function(){var t=_.currentBooleanOperation();if(t&&_.currentAnnotation&&(_.currentAnnotation.toPolygonList||"cut"===t&&_.currentAnnotation instanceof p)){var e=_.currentAnnotation;if(_.removeAnnotation(_.currentAnnotation,!1),_.annotations().length||"difference"!==t&&"intersect"!==t){var n={annotation:e,operation:t};_.geoTrigger(u.annotation.boolean,n),!1!==n.cancel&&("cut"!==t?x.polyops[t](_,e.toPolygonList(),{correspond:{},keepAnnotations:"exact",style:_}):_.cutOperation(e))}}},this._extendLine=function(t,e,n){var r,i=e[0]-t[0],o=e[1]-t[1];if(!i&&!o)return t;var a=((i>0?n.min.x:n.max.x)-t[0])/(i||1);if(a<0){var s=t[1]+a*o;s>=n.min.y&&s<=n.max.y&&(r=[i>0?n.min.x:n.max.x,s])}if((a=((o>0?n.min.y:n.max.y)-t[1])/(o||1))<0){var u=t[0]+a*i;u>=n.min.x&&u<=n.max.x&&(!r||a<(n.min.x-t[0])/i)&&(r=[u,o>0?n.min.y:n.max.y])}return r},this._cutLineToPoly=function(t){for(var e,n=t.coordinates(null).map(function(t){return[t.x,t.y]}),r=0;r<n.length;r+=1){var i=n[r][0],o=n[r][1];r||(e={min:{x:i,y:o},max:{x:i,y:o}}),i<e.min.x&&(e.min.x=i),o<e.min.y&&(e.min.y=o),i>e.max.x&&(e.max.x=i),o>e.max.y&&(e.max.y=o)}for(var a=_.toPolygonList(),s=0;s<a.length;s+=1)for(var u=0;u<a[s].length;u+=1)for(var l=0;l<a[s][u].length;l+=1){var c=a[s][u][l][0],f=a[s][u][l][1];c<e.min.x&&(e.min.x=c),f<e.min.y&&(e.min.y=f),c>e.max.x&&(e.max.x=c),f>e.max.y&&(e.max.y=f)}if(_.annotations().forEach(function(t){if(t instanceof p)for(var n=t.coordinates(null),r=0;r<n.length;r+=1){var i=n[r].x,o=n[r].y;i<e.min.x&&(e.min.x=i),o<e.min.y&&(e.min.y=o),i>e.max.x&&(e.max.x=i),o>e.max.y&&(e.max.y=o)}}),void 0===e||e.min.x===e.max.x||e.min.y===e.max.y)return[];e={min:{x:e.min.x-.01*(e.max.x-e.min.x),y:e.min.y-.01*(e.max.y-e.min.y)},max:{x:e.max.x+.01*(e.max.x-e.min.x),y:e.max.y+.01*(e.max.y-e.min.y)}},n[0]=_._extendLine(n[0],n[1],e),n[n.length-1]=_._extendLine(n[n.length-1],n[n.length-2],e);for(var h=n.slice(),d=[[e.min.x,e.min.y],[e.max.x,e.min.y],[e.max.x,e.max.y],[e.min.x,e.max.y]],m=h.length-1,g=h[m][0]===e.min.x?0:h[m][1]===e.min.y?1:h[m][0]===e.max.x?2:3,y=h[0][0]===e.min.x?0:h[0][1]===e.min.y?1:h[0][0]===e.max.x?2:3,v=g;v%4!==y;v+=1)h.push(d[v%4]);return[[h]]},this.cutOperation=function(t){var e,n;e=t instanceof p?this._cutLineToPoly(t):t.toPolygonList();var i=_.annotations(),o={poly2:e,correspond:{},keepAnnotations:"exact",style:{fromPolygonList:function(t,e){n=t}}};o.poly1=_.toPolygonList(o),x.polyops.difference(o),x.polyops.intersect(_,e,{correspond:{},keepAnnotations:"exact",style:_});var a=(o.annotationIndices||{})[_.id()],s=o.correspond.poly1,u=o.correspond.exact1;n.forEach(function(t,e){for(var n,o={vertices:1===(t=t.map(function(t){return t.map(function(t){return{x:t[0],y:t[1]}})})).length?t[0]:{outer:t[0],inner:t.slice(1)}},c=function(){if(s[f]&&s[f].indexOf(e)>=0){var t=i[a[f]];return u[f]&&u[f].indexOf(e)>=0?(_.addAnnotation(t,_.map().gcs(),!1),{v:void 0}):(["name","description","label"].forEach(function(e){t[e](void 0,!0)&&(o[e]=t[e](void 0,!0))}),Object.entries(t.options()).forEach(function(t){var e=r(t,2),n=e[0],i=e[1];(["showLabel","style"].indexOf(n)>=0||n.endsWith("Style"))&&(o[n]=i)}),_.addAnnotation(l.createAnnotation("polygon",o),_.map().gcs(),!1),{v:void 0})}},f=0;f<s.length;f+=1)if(n=c())return n.v;_.addAnnotation(l.createAnnotation("polygon",o),_.map().gcs(),!1)})},this._updateFromEvent=function(t){switch(t){case"remove":_.removeAnnotation(_.currentAnnotation,!1),_.mode(null);break;case"done":_._handleBooleanOperation(),_.mode(null)}t&&(_.modified(),_.draw())},this._handleMouseMoveModifiers=function(t){var e=_.currentAnnotation.options("allowBooleanOperations");if(_.mode()!==_.modes.edit&&e&&(_.currentAnnotation._coordinates().length<2||_.mode()===_.modes.cursor)&&t.modifiers){var n=(t.modifiers.shift?"s":"")+(t.modifiers.ctrl?"c":"")+(t.modifiers.meta||t.modifiers.alt?"a":"");if(""===n&&!_._currentBooleanClass)return;var r=Object.keys(_._booleanClasses).find(function(t){return _._booleanClasses[t].includes(n)&&(!0===e||e.includes(t))});if(_._currentBooleanClass===r)return;_._currentBooleanClass=r;var i=_.map().node();Object.keys(_._booleanClasses).forEach(function(t){i.toggleClass(t,r===t)})}},this._handleMouseMove=function(t){_.mode()&&_.currentAnnotation&&(_._handleMouseMoveModifiers(t),_.currentAnnotation.mouseMove(t)&&(_.modified(),_.draw()))},this._selectEditHandle=function(t,e){if(t.data&&t.data.editHandle){if(f.each(k[s._editHandleFeatureLevel],function(t,e){e.feature.modified()}),_.currentAnnotation.selectEditHandle(t.data,e),_.draw(),_.map().node().toggleClass("annotation-input",!!e),_.map().interactor().removeAction(void 0,void 0,s.actionOwner),e){var n=_.currentAnnotation.actions(s.state.edit);f.each(n,function(t,e){_.map().interactor().addAction(e)})}return _}},this._handleMouseOn=function(t){t.data&&t.data.annotation&&(_.mode()===_.modes.edit&&_.currentAnnotation?_._selectEditHandle(t,!0):_.mode()||_.currentAnnotation||!_.options("clickToEdit")||(t.data.annotation.state(s.state.highlight),_.modified(),_.draw()))},this._handleMouseOff=function(t){t.data&&t.data.annotation&&(_.mode()===_.modes.edit&&t.data.editHandle&&t.data.selected?_._selectEditHandle(t,!1):t.data.annotation.state()===s.state.highlight&&(t.data.annotation.state(s.state.done),_.modified(),_.draw()))},this._handleMouseClick=function(t){var e,n=!1;if(_.mode()===_.modes.edit){if(_.map().interactor().hasAction(void 0,void 0,s.actionOwner))return e=_.currentAnnotation.mouseClickEdit(t),void _._updateFromEvent(e);_.mode(null),_.draw(),f.each(k,function(t,e){f.each(e,function(t,e){e.feature._clearSelectedFeatures()})}),n=!0}else if(_.mode()&&_.currentAnnotation)_._handleMouseMoveModifiers(t),e=_.currentAnnotation.mouseClick(t),_._updateFromEvent(e),n=!_.mode(),_.mode()===_.modes.cursor&&_.geoTrigger(u.annotation.cursor_click,{annotation:_.currentAnnotation,operation:_.currentBooleanOperation(),evt:t});else if(!_.mode()&&!_.currentAnnotation&&_.options("clickToEdit")){var r=_.annotations().filter(function(t){return t.state()===s.state.highlight});if(1!==r.length)return;_.mode(_.modes.edit,r[0]),_.draw(),n=!0}n&&_.map().interactor().retriggerMouseMove()},this.options=function(t,n){return void 0===t?e:"string"==typeof t&&void 0===n?e[t]:(void 0===n?e=x.deepMerge(e,t):e[t]=n,_.modified(),_)},this.displayDistance=function(t,e,n,r){var i=_.map();return"display"!==e&&(e=null===e?i.gcs():void 0===e?i.ingcs():e,t=i.gcsToDisplay(t,e)),"display"!==r&&(r=null===r?i.gcs():void 0===r?i.ingcs():r,n=i.gcsToDisplay(n,r)),Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))},this.addAnnotation=function(t,e,n,r){if(void 0===C[t.id()]){for(;_.annotationById(t.id());)t.newId();!1!==r&&_.geoTrigger(u.annotation.add_before,{annotation:t}),S.push(t),C[t.id()]=t,t.layer(_);var i=_.map();(e=null===e?i.gcs():void 0===e?i.ingcs():e)!==i.gcs()&&t._convertCoordinates(e,i.gcs()),!1!==n&&(_.modified(),_.draw()),!1!==r&&_.geoTrigger(u.annotation.add,{annotation:t})}return _},this.addMultipleAnnotations=function(t,e,n){var r=[];_.geoTrigger(u.annotation.add_before,{annotations:t});for(var i=0;i<t.length;i+=1){var o=t[i];void 0===C[o.id()]&&(this.addAnnotation(o,e,n,!1),r.push(o))}return r.length&&_.geoTrigger(u.annotation.add,{annotations:r}),_},this.removeAnnotation=function(t,e,n,r){return!(!t.id||void 0===C[t.id()])&&(n=S.indexOf(t),t===_.currentAnnotation&&(_.currentAnnotation=null),void 0!==C[t.id()]&&delete C[t.id()],t._exit(),S.splice(n,1),!1!==e&&(_.modified(),_.draw()),!1!==r&&_.geoTrigger(u.annotation.remove,{annotation:t}),!0)},this.removeAllAnnotations=function(t,e,n){for(var r,i=0,o=S.length-1;o>=0;o-=1)r=S[o],t&&r.state()===s.state.create||(_.removeAnnotation(r,!1,o,n),i+=1);return i&&!1!==e&&(_.modified(),_.draw()),i},this.annotations=function(){return S.slice()},this.annotationById=function(t){return null!=t&&(t=+t),C[t]},this.modes={edit:"edit",cursor:"cursor"},this._booleanClasses={"annotation-union":["s"],"annotation-intersect":["sc"],"annotation-difference":["c"],"annotation-xor":["sa"],"annotation-cut":["c","ca"]},this.mode=function(t,e,n,r){if(void 0===t)return T;if(t!==T||(t===_.modes.edit||t===_.modes.cursor)&&e!==_.editAnnotation||t!==_.modes.edit&&t!==_.modes.cursor&&t&&!_.currentAnnotation){var i,o,a,c,d=_.map().node(),p=T;if(T=t,d.toggleClass("annotation-input",!(!T||T===_.modes.edit||T===_.modes.cursor)),T&&T!==_.modes.edit||(Object.keys(_._booleanClasses).forEach(function(t){return d.toggleClass(t,!1)}),_._currentBooleanClass=void 0),g||(g=h(d[0])),T?g.bind("esc",function(){_.mode(null,void 0,void 0,"escape")}):g.unbind("esc"),_.currentAnnotation){switch(a=_.currentAnnotation.state(),c=_.currentAnnotation._copyOfCoordinates(),_.currentAnnotation.state()){case s.state.create:_.removeAnnotation(_.currentAnnotation);break;case s.state.edit:_.currentAnnotation.state(s.state.done),_.modified(),_.draw();break;case s.state.cursor:_.currentAnnotation.state(s.state.done),_.modified(),_.draw(),_.map().node().toggleClass("annotation-cursor",!1)}_.currentAnnotation=null}T===_.modes.edit?(_.currentAnnotation=e,_.currentAnnotation.state(s.state.edit),_.modified()):T===_.modes.cursor?(_.currentAnnotation=e,_.currentAnnotation.state(s.state.cursor),_.modified(),_.map().node().toggleClass("annotation-cursor",!0),o=_.currentAnnotation.actions(s.state.cursor)):l.registries.annotations[T]&&(i=l.registries.annotations[T].func),_.map().interactor().removeAction(void 0,void 0,s.actionOwner),i&&(n=Object.assign({},n||{},{state:s.state.create,layer:_}),_.currentAnnotation=i(n),_.addAnnotation(_.currentAnnotation,null),o=_.currentAnnotation.actions(s.state.create)),o&&f.each(o,function(t,e){_.map().interactor().addAction(e)}),_.geoTrigger(u.annotation.mode,{mode:T,oldMode:p,oldState:a,oldCoordinates:c,reason:r}),p!==_.modes.edit&&p!==_.modes.cursor||_.modified()}return _},this.geojson=function(t,e,r,i){if(void 0!==t){var o=l.createFileReader("geojsonReader",{layer:_,lineStyle:n(2612).defaults.style,pointStyle:n(400).defaults.style,polygonStyle:n(1920).defaults.style});if(!o.canRead(t))return;return!0===e&&_.removeAllAnnotations(!0,!1),"update"===e&&f.each(_.annotations(),function(t,e){e.options("updated",!1)}),o.read(t,function(t){f.each(t.slice(),function(t,e){_._geojsonFeatureToAnnotation(e,r),_.deleteFeature(e)})}),"update"===e&&f.each(_.annotations(),function(t,e){!1===e.options("updated")&&e.state()===s.state.done&&_.removeAnnotation(e,!1)}),_.modified(),_.draw(),S.length}t=null;var a=[];return f.each(S,function(t,e){var n=e.geojson(r,i);n&&a.push(n)}),a.length&&(t={type:"FeatureCollection",features:a}),t},this._geojsonFeatureToAnnotation=function(t,e){var n=t.data(),r=l.listAnnotations(),i=_.map();e=null===e?i.gcs():void 0===e?i.ingcs():e,f.each(n,function(n,o){var a,h,d,p,m=(o.properties||{}).annotationType||t.featureType,g=Object.assign({},o.properties||{});if(r.includes(m)){switch(g.style=g.style||{},g.labelStyle=g.labelStyle||{},delete g.annotationType,t.featureType){case"line":if(!(a=t.line()(o,n))||a.length<2)return;a=a.slice();break;case"polygon":if(!(a=t.polygon()(o,n))||!a.outer||a.outer.length<3)return;if((a={outer:a.outer.slice(),inner:(a.inner||[]).map(function(t){return t.slice()})}).outer[a.outer.length-1][0]===a.outer[0][0]&&a.outer[a.outer.length-1][1]===a.outer[0][1]&&(a.outer.splice(a.outer.length-1,1),a.outer.length<3))return;a.inner.forEach(function(t){t.length>3&&t[t.length-1][0]===t[0][0]&&t[t.length-1][1]===t[0][1]&&t.splice(t.length-1,1)}),a.inner&&a.inner.length||(a=a.outer);break;case"marker":a=o.geometry.coordinates[0].slice(0,4);break;case"point":a=[t.position()(o,n)]}h=o.crs&&"name"===o.crs.type&&o.crs.properties&&"proj4"===o.crs.properties.type&&o.crs.properties.name?o.crs.properties.name:e,[a.outer||a].concat(a.inner||[]).forEach(function(t){for(d=0;d<t.length;d+=1)t[d]=x.normalizeCoordinates(t[d]);if(h!==i.gcs()){var e=c.transformCoordinates(h,i.gcs(),t);for(d=0;d<t.length;d+=1)t[d]=e[d]}}),g.coordinates=a,f.each(P,function(e,r){var i;f.each(r.keys,function(t,e){void 0===i&&(i=_.validateAttribute(g[e],r.dataType))}),void 0===i&&(i=_.validateAttribute(t.style.get(e)(o,n),r.dataType)),void 0!==i&&(g[r.option||"style"][e]=i)}),f.each(P,function(t,e){f.each(e.keys,function(t,e){delete g[e]})}),void 0!==g.annotationId&&(p=_.annotationById(g.annotationId))&&delete g.annotationId,p&&p.type()===m&&p.state()===s.state.done&&!1===p.options("updated")?(delete g.state,delete g.layer,g.updated=!0,p.options(g),_.geoTrigger(u.annotation.update,{annotation:p})):(g.state=s.state.done,g.layer=_,g.updated="new",_.addAnnotation(l.createAnnotation(m,g),null))}})},this.validateAttribute=function(t,e){var n;if(null!=t){switch(e){case"angle":if(""===t)break;if(!(n=/^\s*([-.0-9eE]+)\s*(deg|rad|grad|turn)?\s*$/.exec((""+t).toLowerCase()))||!isFinite(n[1]))return;var r="grad"===n[2]?Math.PI/200:"deg"===n[2]?Math.PI/180:"turn"===n[2]?2*Math.PI:1;t=+n[1]*r;break;case"boolean":t=!!t&&["false","no","off"].indexOf((""+t).toLowerCase())<0;break;case"booleanOrNumber":if(!t&&0!==t&&""!==t||["true","false","off","on","no","yes"].indexOf((""+t).toLowerCase())>=0)t=!!t&&["false","no","off"].indexOf((""+t).toLowerCase())<0;else{if(!x.isNonNullFinite(t))return;t=+t}break;case"coordinate2":if(""===t)break;if(t&&x.isNonNullFinite(t.x)&&x.isNonNullFinite(t.y)){t.x=+t.x,t.y=+t.y;break}try{t=JSON.parse(t)}catch(t){}if(t&&x.isNonNullFinite(t.x)&&x.isNonNullFinite(t.y)){t.x=+t.x,t.y=+t.y;break}if(Array.isArray(t)&&x.isNonNullFinite(t[0])&&x.isNonNullFinite(t[1])){t={x:+t[0],y:+t[1]};break}if(!(n=/^\s*([-.0-9eE]+)(?:\s+|\s*,)\s*([-.0-9eE]+)\s*$/.exec(""+t))||!isFinite(n[1])||!isFinite(n[2]))return;t={x:+n[1],y:+n[2]};break;case"color":if(void 0===(t=x.convertColor(t))||void 0===t.r)return;break;case"number":if(!x.isNonNullFinite(t))return;t=+t;break;case"numberOrBlank":if(""===t)break;if(!x.isNonNullFinite(t))return;t=+t;break;case"opacity":if(""===t)return;if(t=+t,isNaN(t)||t<0||t>1)return;break;case"positive":if(t=+t,!isFinite(t)||t<=0)return;break;case"text":t=""+t}return t}},this._update=function(){if(_.timestamp()>E.timestamp()){var t=_.options("showLabels")?[]:null,e=_.options("clickToEdit")||_.mode()===_.modes.edit;f.each(k,function(t,e){f.each(e,function(t,e){e.data=[],delete e.feature.scaleOnZoom})}),f.each(S,function(n,r){var i=r.features();if(t){var o=r.labelRecord();o&&t.push(o)}f.each(i,function(t,n){void 0===k[t]&&(k[t]={}),f.each(n,function(n,i){if(k[t][n])(o=k[t][n].feature).selectionAPI()!==!!e&&(o.selectionAPI(e),e?(o.geoOn(u.feature.mouseon,_._handleMouseOn),o.geoOn(u.feature.mouseoff,_._handleMouseOff)):(o.geoOff(u.feature.mouseon,_._handleMouseOn),o.geoOff(u.feature.mouseoff,_._handleMouseOff)));else{var o=_.createFeature(n,{gcs:_.map().gcs(),selectionAPI:e});if(!o){var a="error_feature_"+n;return void(_[a]||(console.warn("Cannot create a "+n+" feature for annotations."),_[a]=!0))}e&&(o.geoOn(u.feature.mouseon,_._handleMouseOn),o.geoOn(u.feature.mouseoff,_._handleMouseOff));var s={};f.each(["closed","fill","fillColor","fillOpacity","line","lineCap","lineJoin","polygon","position","radius","radiusIncludesStroke","rotateWithMap","rotation","scaleWithZoom","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth","symbolValue","uniformPolygon"],function(t,e){var n;void 0!==o.style()[e]&&(n=o.style.get(e)),s[e]=function(t,r,i,o){var a=t&&t.style?t.style:t&&t[2]&&t[2].style?t[2].style:i.style,s=a?a[e]:t;return x.isFunction(s)&&(s=s(t,r,i,o)),void 0===s&&n&&(s=n(t,r,i,o)),s}}),o.style(s),k[t][n]={feature:o,style:s,data:[]}}var l=i.data||i;Array.isArray(l)||(l=[l]),l.forEach(function(e){e.annotation=r,k[t][n].data.push(e),i.scaleOnZoom&&(k[t][n].feature.scaleOnZoom=!0)})})})}),f.each(k,function(t,e){f.each(e,function(t,e){e.feature.data(e.data)})}),_._updateLabels(t),E.modified()}return A.call(_,arguments),_},this._updateLabels=function(t){if(!t||!t.length)return _._removeLabelFeature(),_;if(!i){if(!(l.registries.features[_.rendererName()]||{}).text){var e=l.rendererForFeatures(["text"]);o=l.createLayer("feature",_.map(),{renderer:e}),_.addChild(o),o._update(),_.geoTrigger(u.layerAdd,{target:_,layer:o})}var n={};d.usedStyles.forEach(function(t){n[t]=function(e,n){return e.style&&void 0!==e.style[t]?e.style[t]:(_.options("defaultLabelStyle")||{})[t]}}),i=(o||_).createFeature("text",{style:n,gcs:_.map().gcs(),position:function(t){return t.position}})}return i.data(t),_},this._handleZoom=function(){var t,e=_.features();for(t=0;t<e.length;t+=1)e[t].scaleOnZoom&&e[t].modified()},this._removeLabelFeature=function(){return o&&(o._exit(),_.removeChild(o),_.geoTrigger(u.layerRemove,{target:_,layer:o}),o=i=null),i&&(_.removeFeature(i),i=null),_},this.draw=function(){return _._update(),M.call(_),_},this.toPolygonList=function(t){var e=[],n=[];return(t=t||{}).annotationIndices||(t.annotationIndices={}),t.annotationIndices[_.id()]=n,S.forEach(function(r,i){r.toPolygonList&&(r.toPolygonList(t).forEach(function(t){return e.push(t)}),n.push(i))}),e},this.fromPolygonList=function(t,e){if(!t||!t.length)return _;var n,i,o,a=e.keepAnnotations,s={},u={},c=(e.annotationIndices||{})[_.id()];c&&e.correspond&&e.correspond.poly1&&c.length===e.correspond.poly1.length&&(n=e.correspond.poly1,i=e.correspond.exact1,o=_.annotations()),"all"!==a&&"none"!==a&&o&&o.forEach(function(t,e){c.indexOf(e)<0&&(s[t.id()]=!0)});var f=[];t.forEach(function(t,e){var l={vertices:1===(t=t.map(function(t){return t.map(function(t){return{x:t[0],y:t[1]}})})).length?t[0]:{outer:t[0],inner:t.slice(1)}};if(n)for(var h,d=function(){if(n[p]&&n[p].indexOf(e)>=0){var t=o[c[p]];return"all"!==a&&"none"!==a&&i&&i[p]&&i[p].indexOf(e)>=0?(s[t.id()]=!0,{v:void 0}):("all"!==a&&void 0===u[t.id()]&&(l.annotationId=t.id(),u[t.id()]=!0),["name","description","label"].forEach(function(e){t[e](void 0,!0)&&(l[e]=t[e](void 0,!0))}),Object.entries(t.options()).forEach(function(t){var e=r(t,2),n=e[0],i=e[1];(["showLabel","style"].indexOf(n)>=0||n.endsWith("Style"))&&(l[n]=i)}),0)}},p=0;p<n.length&&0!==(h=d());p+=1)if(h)return h.v;f.push(l)});var h=!1;return"all"!==a&&o&&o.filter(function(t){return void 0===s[t.id()]}).forEach(function(t){_.removeAnnotation(t,!1),h=!0}),f.forEach(function(t){_.addAnnotation(l.createAnnotation("polygon",t),_.map().gcs(),!1),h=!0}),h&&(_.modified(),_.draw()),_},this._init=function(){return b.call(_),_.map().interactor()||_.map().interactor(y({actions:[]})),_.geoOn(u.actionselection,_._processAction),_.geoOn(u.actionmove,_._processAction),_.geoOn(u.actionup,_._processAction),_.geoOn(u.mouseclick,_._handleMouseClick),_.geoOn(u.mousemove,_._handleMouseMove),_.geoOn(u.zoom,_._handleZoom),_},this._exit=function(){return g&&g.reset(),_._removeLabelFeature(),w.call(_),S=[],C={},k=[],_},_};o(m,a),l.registerLayer("annotation",m),t.exports=m},3578:function(t,e,n){var r=n(4626),i=n(1338),o=n(642),a=n(3638),s=n(1982),u=n(3503),l=n(4663),c=function(t){if(!(this instanceof c))return new c(t);var e=n(6409);return t=t||{},i.call(this,t),this._view=o.mat4AsArray(),this._proj=o.mat4AsArray(),this._projection=null,this._transform=o.mat4AsArray(),this._inverse=o.mat4AsArray(),this._bounds=null,this._display=null,this._world=null,this._viewport={width:1,height:1},this._createProj=function(){var t="perspective"===this._projection?u.frustum:u.ortho,e=this._clipbounds[this._projection];t(this._proj,e.left,e.right,e.bottom,e.top,e.near,e.far)},this._update=function(){this._bounds=null,this._display=null,this._world=null,this._transform=u.multiply(o.mat4AsArray(),this._proj,this._view),u.invert(this._inverse,this._transform),this.geoTrigger(e.camera.view,{camera:this})},Object.defineProperty(this,"view",{get:function(){return this._view},set:function(t){u.copy(this._view,t),this._update()},configurable:!0}),Object.defineProperty(this,"bounds",{get:function(){return null===this._bounds&&(this._bounds=this._getBounds()),this._bounds},set:function(t){this._setBounds(t),this._update()}}),Object.defineProperty(this,"clipbounds",{get:function(){return this._clipbounds[this._projection]},set:function(t){var e=this._clipbounds[this._projection];if((t={left:void 0===t.left?e.left:t.left,right:void 0===t.right?e.right:t.right,top:void 0===t.top?e.top:t.top,bottom:void 0===t.bottom?e.bottom:t.bottom,near:void 0===t.near?e.near:t.near,far:void 0===t.far?e.far:t.far}).left===t.right)throw new Error("Left and right values must be different");if(t.top===t.bottom)throw new Error("Top and bottom values must be different");if(t.near===t.far)throw new Error("Near and far values must be different");this._clipbounds[this._projection]=t,this._createProj(),this._update()}}),Object.defineProperty(this,"display",{get:function(){if(null===this._display){var t=this._clipbounds[this._projection],e=o.mat4AsArray();u.translate(e,e,[this.viewport.width/2,this.viewport.height/2,0]),u.scale(e,e,[this.viewport.width/(t.right-t.left),this.viewport.height/(t.bottom-t.top),1]),u.translate(e,e,[-(t.left+t.right)/2,-(t.top+t.bottom)/2,0]),u.multiply(e,e,this._transform),this._display=e}return this._display}}),Object.defineProperty(this,"world",{get:function(){return null===this._world&&(this._world=u.invert(o.mat4AsArray(),this.display)),this._world}}),Object.defineProperty(this,"projection",{get:function(){return this._projection},set:function(t){if(!this.constructor.projection[t])throw new Error("Unsupported projection type: "+t);t!==this._projection&&(this._projection=t,this._createProj(),this._update(),this.geoTrigger(e.camera.projection,{camera:this,projection:t}))}}),Object.defineProperty(this,"projectionMatrix",{get:function(){return this._proj}}),Object.defineProperty(this,"transform",{get:function(){return this._transform}}),Object.defineProperty(this,"inverse",{get:function(){return this._inverse}}),Object.defineProperty(this,"viewport",{get:function(){return{width:this._viewport.width,height:this._viewport.height,left:this._viewport.left,top:this._viewport.top}},set:function(t){if(!(t.width>0&&t.height>0))throw new Error("Invalid viewport dimensions");t.width===this._viewport.width&&t.height===this._viewport.height||(this._viewport.width&&this._viewport.height&&(this._scale([this._viewport.width/t.width,this._viewport.height/t.height,1]),this._translate([(t.width-this._viewport.width)/2,(t.height-this._viewport.height)/2,0])),this._viewport={width:t.width,height:t.height,left:t.left,top:t.top},this._update(),this.geoTrigger(e.camera.viewport,{camera:this,viewport:this.viewport}))}}),this._resetView=function(){return u.identity(this._view),this},this._translate=function(t){return u.translate(this._view,this._view,t),this},this._scale=function(t){return u.scale(this._view,this._view,t),this},this._worldToClip4=function(t){return l.transformMat4(t,t,this._transform)},this._clipToWorld4=function(t){return l.transformMat4(t,t,this._inverse)},this.applyProjection=function(t){var e;return"perspective"===this._projection?(e=1/(t[3]||1),t[0]=e*t[0],t[1]=e*t[1],t[2]=e*t[2],t[3]=e):t[3]=1,t},this.unapplyProjection=function(t){var e;return"perspective"===this._projection?(e=t[3]||1,t[0]=e*t[0],t[1]=e*t[1],t[2]=e*t[2],t[3]=e):t[3]=1,t},this.worldToDisplay4=function(t){return t=[t[0],t[1],t[2]||0,t[3]||1],(t=l.transformMat4(t,t,this.display))[3]&&1!==t[3]&&(t=[t[0]/t[3],t[1]/t[3],t[2]/t[3],1]),t},this.displayToWorld4=function(t){return t=[t[0],t[1],t[2]||0,t[3]||1],(t=l.transformMat4(t,t,this.world))[3]&&1!==t[3]&&(t=[t[0]/t[3],t[1]/t[3],t[2]/t[3],1]),t},this.worldToDisplay=function(t){var e=this._clipbounds[this._projection];return{x:(t=this.worldToDisplay4([t.x,t.y,-e.near]))[0],y:t[1]}},this.displayToWorld=function(t){return{x:(t=this.displayToWorld4([t.x,t.y,-1]))[0],y:t[1]}},this._getBounds=function(){var t,e,n,r,i={};return t=this.displayToWorld({x:0,y:0}),e=this.displayToWorld({x:this._viewport.width,y:0}),n=this.displayToWorld({x:0,y:this._viewport.height}),r=this.displayToWorld({x:this._viewport.width,y:this._viewport.height}),i.left=Math.min(t.x,e.x,n.x,r.x),i.bottom=Math.min(t.y,e.y,n.y,r.y),i.right=Math.max(t.x,e.x,n.x,r.x),i.top=Math.max(t.y,e.y,n.y,r.y),i},this._setBounds=function(t){var e={width:t.right-t.left,height:t.top-t.bottom},n={x:(t.left+t.right)/2,y:(t.bottom+t.top)/2};return this._viewFromCenterSizeRotation(n,e,0),this},this._viewFromCenterSizeRotation=function(t,e,n){var r,i,a,s=o.vec3AsArray(),u=o.vec3AsArray();return this._resetView(),(i=Math.abs(e.width))/(a=Math.abs(e.height))>=(r=this._viewport.width/this._viewport.height)?(a=i/r,u[0]=2/i,u[1]=2/a):(i=a*r,u[0]=2/i,u[1]=2/a),u[2]=1,this._scale(u),n&&this._rotate(n),s[0]=-t.x,s[1]=-t.y,s[2]=0,this._translate(s),this},this.viewFromCenterSizeRotation=function(t,e,n){return this._viewFromCenterSizeRotation(t,e,n),this._update(),this},this.pan=function(t){return t.x||t.y||t.z?(this._translate([t.x,t.y,t.z||0]),this._update(),this):this},this.zoom=function(t){return 1===t||(u.scale(this._view,this._view,[t,t,t]),this._update()),this},this._rotate=function(t,e,n){if(!t)return this;n=n||[0,0,-1],e?void 0!==e.x&&(e=[e.x||0,e.y||0,e.z||0]):e=[0,0,0];var r=[-e[0],-e[1],-e[2]];return u.translate(this._view,this._view,e),u.rotate(this._view,this._view,t,n),u.translate(this._view,this._view,r),this},this.css=function(t){var e;switch((t||"").toLowerCase()){case"display":case"":e=this.display;break;case"world":e=this.world;break;default:throw new Error("Unknown transform "+t)}return c.css(e)},this.ppMatrix=function(t,e){var n=t;function r(t){var r=n[t],i=r.toExponential(e);return r>=0&&(i=" "+i),i}return e=e||2,[[r(0),r(4),r(8),r(12)].join(" "),[r(1),r(5),r(9),r(13)].join(" "),[r(2),r(6),r(10),r(14)].join(" "),[r(3),r(7),r(11),r(15)].join(" ")].join("\n")},this.toString=function(){return this.ppMatrix(this._transform)},this.debug=function(){return["bounds",JSON.stringify(this.bounds),"view:",this.ppMatrix(this._view),"projection:",this.ppMatrix(this._proj),"transform:",this.ppMatrix(this._transform)].join("\n")},this.valueOf=function(){return this._transform},this._clipbounds=this.constructor.clipbounds,this._resetView(),this.projection=t.projection||"parallel",t.viewport&&(this.viewport=t.viewport),this._update(),this};c.projection={perspective:!0,parallel:!0},c.clipbounds={perspective:{left:-1,right:1,top:1,bottom:-1,far:2e3,near:.01},parallel:{left:-1,right:1,top:1,bottom:-1,far:-1,near:1}},c.css=function(t){return"matrix3d("+t.map(function(t){return(t=(+t).toPrecision(15)).indexOf("e")>=0?t=(+t).toString():t.indexOf(".")>=0&&(t=t.replace(/(\.|)0+$/,"")),t}).join(",")+")"},c.vec3=s,c.mat3=a,c.vec4=l,c.mat4=u,r(c,i),t.exports=c},1103:function(t,e,n){var r,i=n(4626),o=n(1098).registerRenderer,a=n(2274),s=function(t){"use strict";var e=n(5616);if(!(this instanceof s))return new s(t);t=t||{},a.call(this,t);var r=this,i=!0,o=this._init,u=this._exit;return this.clearCanvas=function(t){i=t},this.api=function(){return s.apiname},this._init=function(){if(r.initialized())return r;o.call(r);var n=t.canvas||e(document.createElement("canvas"));r.context2d=n[0].getContext("2d"),n.addClass("canvas-canvas"),e(r.layer().node().get(0)).append(n),r.canvas(n);var i=r.layer().map().size();return r._resize(0,0,i.width,i.height),r},this._resize=function(t,e,n,i){var o=r.canvas();return parseInt(o.attr("width"),10)===n&&parseInt(o.attr("height"),10)===i||(r._setWidthHeight(n,i),o.attr("width",n),o.attr("height",i),r._render()),r},this._render=function(){return r.layer().map().scheduleAnimationFrame(r._renderFrame),r},this._renderFrame=function(){var t,e=r.layer(),n=e.map(),o=n.size(),a=e.features?e.features():[];for(t=0;t<a.length;t+=1)if(a[t]._delayRender())return void r._render();for(i&&(r.context2d.setTransform(1,0,0,1,0,0),r.context2d.clearRect(0,0,o.width,o.height)),t=0;t<a.length;t+=1)a[t].visible()&&a[t]._renderOnCanvas(r.context2d,n)},this._exit=function(){r.canvas().remove(),u()},this};s.apiname="canvas",i(s,a),o("canvas",s),s.supported=function(){if(void 0===r){var t;try{t=document.createElement("canvas"),r=!(!t.getContext||!t.getContext("2d"))}catch(t){r=!1}t=void 0}return r},s.fallback=function(){return null},t.exports=s},9142:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(9163),a=n(77),s=n(642),u=function(t){"use strict";if(!(this instanceof u))return new u(t);o.call(this,t),n(5895).call(this);var e,r,i,l,c,f,h=n(6409),d=this,p=this._init,m=this._update,g=a();return this._computeGradient=function(){var t,e,n,r,i;if(i=d.style("color"),!d._grad||d._gradColors!==i){for(e in r=(n=(t=document.createElement("canvas")).getContext("2d")).createLinearGradient(0,0,0,256),t.width=1,t.height=256,i)r.addColorStop(e,s.convertColorToRGBA(i[e]));n.fillStyle=r,n.fillRect(0,0,1,256),d._grad=n.getImageData(0,0,1,256).data,d._gradColors=i}return d},this._createCircle=function(){var t,e,n,r,i,o,a;if(n=d.style("radius"),i=d.style("blurRadius"),o=d.style("gaussian"),a=d.style("scaleWithZoom")){var s=this.layer().map().zoom();n*=a=Math.pow(2,s),i*=a}if(!d._circle||d._circle.gaussian!==o||d._circle.radius!==n||d._circle.blurRadius!==i){if(e=(t=d._circle=document.createElement("canvas")).getContext("2d"),r=i+n,t.width=t.height=2*r,o){var u=e.createRadialGradient(r,r,0,r,r,r);u.addColorStop(0,"rgba(255,255,255,1)"),u.addColorStop(.1,"rgba(255,255,255,0.946)"),u.addColorStop(.2,"rgba(255,255,255,0.801)"),u.addColorStop(.3,"rgba(255,255,255,0.607)"),u.addColorStop(.4,"rgba(255,255,255,0.411)"),u.addColorStop(.5,"rgba(255,255,255,0.249)"),u.addColorStop(.6,"rgba(255,255,255,0.135)"),u.addColorStop(.7,"rgba(255,255,255,0.066)"),u.addColorStop(.8,"rgba(255,255,255,0.029)"),u.addColorStop(.9,"rgba(255,255,255,0.011)"),u.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=u,e.fillRect(0,0,2*r,2*r)}else e.shadowOffsetX=e.shadowOffsetY=2*r,e.shadowBlur=i,e.shadowColor="black",e.beginPath(),e.arc(-r,-r,n,0,2*Math.PI,!0),e.closePath(),e.fill();t.radius=n,t.blurRadius=i,t.gaussian=o,d._circle=t}return d},this._colorize=function(t,n){var o,a,s,u=new Uint32Array(n.buffer),l=t.length;for(e&&e.length===l||(e=new ArrayBuffer(l),r=new Uint8ClampedArray(e),i=new Uint32Array(e)),o=3,s=0;o<l;o+=4,s+=1)(a=t[o])&&(i[s]=u[a]);t.set(r)},this._renderPoints=function(t,e,n,r){var i,o,a,s=d.gcsPosition(),u=d.intensity(),l=d.minIntensity(),c=d.maxIntensity()-l||1;for(i=n.length-1;i>=0;i-=1)o=e.worldToDisplay(s[i]),(a=(u(n[i],i)-l)/c)<=0||(t.globalAlpha=a<.01?.01:a>1?1:a,t.drawImage(d._circle,o.x-r,o.y-r))},this._renderBinnedData=function(t,e,n,r,i){var o,a,s,u,l,c,f,h,p=d.gcsPosition(),m=d.intensity(),g=d.minIntensity(),y=d.maxIntensity()-g||1,v=e.size(),x=[],_=Math.ceil(r/i),b=Math.ceil(v.width/i)+2*_+2,w=Math.ceil(v.height/i)+2*_+2,M=n.length;for(o=0;o<M;o+=1)a=e.worldToDisplay(p[o]),isNaN(a.x)||isNaN(a.y)||(void 0===f&&(f=(a.x%i+i)%i,h=(a.y%i+i)%i),(u=Math.floor((a.x-f)/i)+_+1)<0||u>=b||(l=Math.floor((a.y-h)/i)+_+1)<0||l>=w||(s=(m(n[o],o)-g)/y)<=0||(s>1&&(s=1),x[l]=x[l]||[],u*=4,(c=x[l])[u]?(c[u]+=s,c[u+1]+=(1-c[u+1])*s,c[u+2]+=a.x*s,c[u+3]+=a.y*s):(c[u]=c[u+1]=s,c[u+2]=a.x*s,c[u+3]=a.y*s)));for(l=x.length-1;l>=0;l-=1)if(c=x[l])for(u=c.length-4;u>=0;u-=4)c[u]&&(s=c[u+1],t.globalAlpha=s<.01?.01:s>1?1:s,t.drawImage(d._circle,c[u+2]/c[u]-r,c[u+3]/c[u]-r))},this._renderOnCanvas=function(t,e){if(g.timestamp()<d.buildTime().timestamp()){var n,r,i=Date.now(),o=d.data()||[],a=d.style("radius")+d.style("blurRadius"),s=d.binned(),u=d.layer(),h=e.size();if(d.style("scaleWithZoom")&&(a*=Math.pow(2,e.zoom())),!0===s||"auto"===s)if(s=Math.max(Math.floor(a/8),Math.max(1.5,Math.min(3,a/2.5))),"auto"===d.binned())Math.ceil((h.width+2*a)/s)*Math.ceil((h.height+2*a)/s)>=o.length&&(s=0);(s<1||isNaN(s))&&(s=!1),d._binned=s,t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,h.width,h.height),c="",a>.5&&a<8192&&(e.scheduleAnimationFrame(d._setTransform,!1),u.canvas().css({transform:""}),d._createCircle(),d._computeGradient(),s?d._renderBinnedData(t,e,o,a,s):d._renderPoints(t,e,o,a),n=u.canvas()[0],r=t.getImageData(0,0,n.width,n.height),d._colorize(r.data,d._grad),t.putImageData(r,0,0)),l={zoom:e.zoom(),gcsOrigin:e.displayToGcs({x:0,y:0},null),rotation:e.rotation(),lastScale:void 0,lastOrigin:{x:0,y:0},lastRotation:void 0},g.modified(),u.renderer().clearCanvas(!1),f=Date.now()-i}return d},this._init=function(){return p.call(d,t),d.geoOn(h.pan,d._animatePan),d},this._update=function(){return m.call(d),(d.buildTime().timestamp()<=d.dataTime().timestamp()||d.updateTime().timestamp()<d.timestamp())&&d._build(),d.updateTime().modified(),d},this._setTransform=function(){d.layer()&&d.layer().canvas()&&d.layer().canvas()[0]&&(d.layer().canvas()[0].style.transform=c)},this._animatePan=function(){if(l){var t=d.layer().map(),e=t.zoom(),n=Math.pow(2,e-l.zoom),r=t.gcsToDisplay(l.gcsOrigin,null),i=t.rotation();if(l.lastScale!==n||l.lastOrigin.x!==r.x||l.lastOrigin.y!==r.y||l.lastRotation!==i){var o=" translate("+r.x+"px,"+r.y+"px) scale("+n+") rotate("+180*(i-l.rotation)/Math.PI+"deg)";if(t.scheduleAnimationFrame(d._setTransform),c=o,l.lastScale=n,l.lastOrigin.x=r.x,l.lastOrigin.y=r.y,l.lastRotation=i,l.timeout&&(window.clearTimeout(l.timeout),l.timeout=void 0),1!==parseFloat(n.toFixed(4))||0!==parseFloat((i-l.rotation).toFixed(4))||0!==parseFloat(r.x.toFixed(1))||0!==parseFloat(r.y.toFixed(1))){var a=d.updateDelay();a=a<0&&f?f-Math.floor(1e3/60*a):f?2*f:100,l.timeout=window.setTimeout(function(){l.timeout=void 0,d.buildTime().modified(),d.layer().draw()},d.updateDelay())}}}},d._init(t),this};r(u,o),i("canvas","heatmap",u),t.exports=u},8074:function(t,e,n){t.exports={canvasRenderer:n(1103),heatmapFeature:n(9142),isolineFeature:n(1195),lineFeature:n(2954),pixelmapFeature:n(5398),quadFeature:n(5578),textFeature:n(2213),tileLayer:n(511),trackFeature:n(1795)}},1195:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(2586),a=function(t){"use strict";return this instanceof a?(t=t||{},o.call(this,t),n(5895).call(this),this._init(t),this):new a(t)};r(a,o),i("canvas","isoline",a),t.exports=a},2954:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(9281),a=function(t){"use strict";if(!(this instanceof a))return new a(t);var e=n(5895);t=t||{},o.call(this,t),e.call(this);var r=this;return this._renderOnCanvas=function(t,e){var n,i,o,a,s,u=r.data(),l=r.position(),c=r.line(),f=r.style.get("strokeWidth"),h=r.style.get("strokeColor"),d=r.style.get("strokeOpacity"),p=r.style.get("lineCap"),m=r.style.get("lineJoin"),g=r.style.get("miterLimit")(u),y=r.style.get("closed"),v={},x={};u.forEach(function(e,u){if(!((i=c(e,u)).length<2)){for(x.closed=y(e,u),x.width=f(i[0],0,e,u),x.color=h(i[0],0,e,u),x.opacity=d(i[0],0,e,u),x.linecap=p(i[0],0,e,u),x.linejoin=m(i[0],0,e,u),x.strokeStyle="rgba("+255*x.color.g+", "+255*x.color.g+", "+255*x.color.b+", "+(void 0!==x.opacity?x.opacity:1)+")",v.strokeStyle===x.strokeStyle&&v.width===x.width&&v.linecap===x.linecap&&v.linejoin===x.linejoin&&v.miterlimit===x.miterlimit||(void 0!==v.strokeStyle&&t.stroke(),t.beginPath(),t.strokeStyle=x.strokeStyle,t.lineWidth=x.width,t.lineCap=x.linecap,t.lineJoin=x.linejoin,t.miterLimit=g),s=0;s<i.length;s+=1)o=r.featureGcsToDisplay(l(i[s],s,e,u)),s?t.lineTo(o.x,o.y):(a=o,t.moveTo(o.x,o.y));x.closed&&t.lineTo(a.x,a.y),n=v,v=x,x=n}}),void 0!==v.strokeStyle&&t.stroke()},this._init(t),this};r(a,o);var s={};s[o.capabilities.basic]=!0,s[o.capabilities.multicolor]=!1,i("canvas","line",a,s),t.exports=a},5895:function(t,e,n){var r=function(t){"use strict";if(!(this instanceof n(1338)))return new r(t);var e=this,i=this.draw,o={};return this._renderOnCanvas=function(){},this._delayRender=function(){return!1},this._canvasProperty=function(t,n,r){return t&&n?(o[n]!==r&&(o[n]=r,t[n]=r),e):(o={},e)},this.draw=function(){return e.ready&&(e._update(),e.renderer()._render(),i()),e},this};t.exports=r},5398:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(7761),a=n(6409),s=n(642),u=function(t){"use strict";if(!(this instanceof u))return new u(t);o.call(this,t),n(5895).call(this);var e,r,i=this._exit,l=this;return this.pointSearch=function(t,n){if(e){var r=e.pointSearch(t,n);if(!l.m_info)return this._pointSearchProcess(r);if(1===r.index.length&&r.extra&&r.extra[r.index[0]].basis){var i,o,a,s=r.extra[r.index[0]].basis;if(i=Math.floor(s.x*l.m_info.width),o=Math.floor(s.y*l.m_info.height),i>=0&&i<l.m_info.width&&o>=0&&o<l.m_info.height)return r={index:[a=l.m_info.indices[o*l.m_info.width+i]],found:[l.data()[a]]}}}return{index:[],found:[]}},this._preparePixelmap=function(t){var e,n,r,i=t||l;if(t&&t.m_info)return t.m_info;if(s.isReadyImage(i.m_srcImage)){for(i.m_info={width:i.m_srcImage.naturalWidth,height:i.m_srcImage.naturalHeight,canvas:document.createElement("canvas")},i.m_info.canvas.width=i.m_info.width,i.m_info.canvas.height=i.m_info.height,i.m_info.context=i.m_info.canvas.getContext("2d"),i.m_info.context.drawImage(i.m_srcImage,0,0),i.m_info.imageData=i.m_info.context.getImageData(0,0,i.m_info.canvas.width,i.m_info.canvas.height),r=i.m_info.imageData.data,i.m_info.indices=new Array(r.length/4),i.m_info.area=r.length/4,i.m_info.mappedColors={},e=0;e<r.length;e+=4)n=r[e]+(r[e+1]<<8)+(r[e+2]<<16),i.m_info.indices[e/4]=n,i.m_info.mappedColors[n]||(i.m_info.mappedColors[n]={first:e/4}),i.m_info.mappedColors[n].last=e/4;return i.m_info}},this._computePixelmap=function(t){var n,i,o,s,u,c,f,h,d,p,m=t||l,g=l.data()||[],y=l.style.get("color"),v=-1;if(r||!e||t||(e._hookRenderImageQuads=function(t){t.forEach(function(t){t.m_srcImage?l.buildTime().timestamp()>t._build&&(l._computePixelmap(t),t.image=t.m_info.context.canvas,t._build=l.buildTime().timestamp()):(t.m_srcImage=t.image,l._computePixelmap(t),t.image=t.m_info.context.canvas,t._build=l.buildTime().timestamp())})},r=!0),!m.m_info){if(l.indexModified(void 0,"clear"),!l._preparePixelmap(t))return;p=!0}for(i in l.indexModified(void 0,"clear"),f=m.m_info.mappedColors,h=m.m_info.area,f)f.hasOwnProperty(i)&&(s=[255*((s=y(g[i],+i)||{}).r||0),255*(s.g||0),255*(s.b||0),void 0===s.a?255:255*s.a],f[i].update=!f[i].color||f[i].color[0]!==s[0]||f[i].color[1]!==s[1]||f[i].color[2]!==s[2]||f[i].color[3]!==s[3],f[i].update&&(f[i].color=s,h=Math.min(f[i].first,h),v=Math.max(f[i].last,v)));if(!(h>=v)){for(u=m.m_info.imageData.data,c=m.m_info.indices,n=h;n<=v;n+=1)(i=c[n])!==o&&(o=i,s=f[i].color,d=f[i].update),d&&(u[4*n]=s[0],u[4*n+1]=s[1],u[4*n+2]=s[2],u[4*n+3]=s[3]);m.m_info.context.putImageData(m.m_info.imageData,0,0,0,Math.floor(h/m.m_info.width),m.m_info.width,Math.ceil((v+1)/m.m_info.width)),t||(e||(e=l.layer().createFeature("quad",{selectionAPI:!1,gcs:l.gcs(),visible:l.visible(void 0,!0)}),l.dependentFeatures([e]),e.style({image:l.m_info.canvas,position:l.style.get("position")}).data([{}]).draw(),r=!0),p&&l.geoTrigger(a.pixelmap.prepared,{pixelmap:l}))}},this._exit=function(){return e&&l.layer()&&(l.layer().deleteFeature(e),e=null,l.dependentFeatures([])),i(),l},t.quadFeature&&(e=t.quadFeature),this._init(t),this};r(u,o);var l={};l[o.capabilities.lookup]=!0,i("canvas","pixelmap",u,l),t.exports=u},5578:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(3842),a=n(642),s=function(t){"use strict";if(!(this instanceof s))return new s(t);o.call(this,t),n(5895).call(this);var e,r=n(5616),i=this,u=this._exit,l=this._init,c=this._update;return this._build=function(){i.position()&&((e=i._generateQuads()).imgQuads&&e.imgQuads.sort(function(t,e){return t.pos[2]-e.pos[2]}),i.buildTime().modified())},this._checkQuadUpdate=function(t,e){i.layer().map().scheduleAnimationFrame(i._checkIfChanged)},this._checkIfChanged=function(){if(e&&e.vidQuads&&e.vidQuads.length){var t=!1,n=!1;r.each(e.vidQuads,function(e,r){r.video&&void 0!==r.video.HAVE_CURRENT_DATA&&(!r.video.seeking&&r.video.readyState>=r.video.HAVE_CURRENT_DATA&&(t=!0),r.video.paused&&!r.video.seeking||(n=!0))}),t&&i.renderer()&&i.renderer()._render(),n&&i.layer().map().scheduleAnimationFrame(i._checkIfChanged)}},this._renderColorQuads=function(t,n){if(e.clrQuads&&e.clrQuads.length){var i=t.globalAlpha,o=i;r.each(e.clrQuads,function(e,r){var i=n.gcsToDisplay({x:r.pos[0],y:r.pos[1]},null),s=n.gcsToDisplay({x:r.pos[3],y:r.pos[4]},null),u=n.gcsToDisplay({x:r.pos[6],y:r.pos[7]},null),l=n.gcsToDisplay({x:r.pos[9],y:r.pos[10]},null);r.opacity!==o&&(o=r.opacity,t.globalAlpha=o),t.fillStyle=a.convertColorToHex(r.color,!0),t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(s.x,s.y),t.lineTo(l.x,l.y),t.lineTo(u.x,u.y),t.closePath(),t.fill()}),o!==i&&(t.globalAlpha=i)}},this._renderImageAndVideoQuads=function(t,n){if(e.imgQuads&&e.imgQuads.length||e.vidQuads&&e.vidQuads.length){var o=t.globalAlpha,s=o,u=i.nearestPixel();if(void 0!==u){if(!0!==u&&a.isNonNullFinite(u))u=i.layer().map().zoom()>=u;t.imageSmoothingEnabled=!u}i._hookRenderImageQuads&&i._hookRenderImageQuads(e.imgQuads),r.each([e.imgQuads,e.vidQuads],function(e,i){i&&r.each(i,function(e,r){var i,o,a;if(r.image)o=(i=r.image).width,a=i.height;else if(r.video&&(o=(i=r.video).videoWidth,a=i.videoHeight,i.seeking))return;if(i&&o&&a&&!(r.opacity<=0)){var u=n.gcsToDisplay({x:r.pos[0],y:r.pos[1]},null),l=n.gcsToDisplay({x:r.pos[6],y:r.pos[7]},null),c=n.gcsToDisplay({x:r.pos[9],y:r.pos[10]},null),f=Math.min(o,r.crop&&r.crop.x||o),h=Math.min(a,r.crop&&r.crop.y||a);if(t.setTransform((c.x-l.x)/f,(c.y-l.y)/f,(u.x-l.x)/h,(u.y-l.y)/h,l.x,l.y),r.opacity!==s&&(s=r.opacity,t.globalAlpha=s),r.crop){var d=Math.max(0,r.crop.left||0),p=Math.max(0,r.crop.top||0),m=Math.min(o,r.crop.right||o),g=Math.min(a,r.crop.bottom||a);o&&a&&f>0&&h>0&&m>d&&g>p&&t.drawImage(i,d,p,m-d,g-p,0,0,f,h)}else t.drawImage(i,0,0)}})}),s!==o&&(t.globalAlpha=o),t.setTransform(1,0,0,1,0,0),t.imageSmoothingEnabled=!0}},this._delayRender=function(){var t=!1;return e&&e.vidQuads&&e.vidQuads.length&&r.each(e.vidQuads,function(e,n){n.video&&void 0!==n.video.HAVE_CURRENT_DATA&&(t|=n.video.seeking&&n.delayRenderWhenSeeking)}),t},this._renderOnCanvas=function(t,n){e&&(i._renderImageAndVideoQuads(t,n),i._renderColorQuads(t,n))},this._update=function(){c.call(i),(i.buildTime().timestamp()<=i.dataTime().timestamp()||i.updateTime().timestamp()<i.timestamp())&&i._build(),i.updateTime().modified(),i.layer().map().scheduleAnimationFrame(i._checkIfChanged)},this._init=function(){l.call(i,t)},this._exit=function(){u.call(i)},i._init(t),this};r(s,o);var u={};u[o.capabilities.color]=!0,u[o.capabilities.image]=!0,u[o.capabilities.imageCrop]=!0,u[o.capabilities.imageFixedScale]=!0,u[o.capabilities.imageFull]=!1,u[o.capabilities.canvas]=!0,u[o.capabilities.video]=!0,u[o.capabilities.texture]=!1,i("canvas","quad",s,u),t.exports=s},2213:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(6546),a=n(642),s=n(3638),u=n(1982),l=function(t){"use strict";if(!(this instanceof l))return new l(t);var e=n(5895);t=t||{},o.call(this,t),e.call(this);var r=this,i="bold 16px sans-serif",c=new RegExp('^\\s*(?=(?:(?:[-a-z0-9]+\\s+){0,3}(italic|oblique))?)(?=(?:(?:[-a-z0-9]+\\s+){0,3}(small-caps))?)(?=(?:(?:[-a-z0-9]+\\s+){0,3}(bold(?:er)?|lighter|[1-9]00))?)(?=(?:(?:[-a-z0-9]+\\s+){0,3}((?:ultra-|extra-|semi-)?(?:condensed|expanded)))?)(?:(?:normal|\\1|\\2|\\3|\\4)\\s+){0,4}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))(?:/(normal|[.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])))?\\s+([-,\\"\\sa-z]+?)\\s*$',"i");return this.getFontFromStyles=function(t,e,n){var o=r.style.get("font")(e,n)||i;if(t){var a=c.exec(o);null===a&&(a=c.exec(i)),a[1]=r.style.get("fontStyle")(e,n)||a[1],a[2]=r.style.get("fontVariant")(e,n)||a[2],a[3]=r.style.get("fontWeight")(e,n)||a[3],a[4]=r.style.get("fontStretch")(e,n)||a[4],a[5]=r.style.get("fontSize")(e,n)||a[5]||"16px",a[6]=r.style.get("lineHeight")(e,n)||a[6],a[7]=r.style.get("fontFamily")(e,n)||a[7]||"sans-serif",o=(o=(a[1]||"")+" "+(a[2]||"")+" "+(a[3]||"")+" "+(a[4]||"")+" "+(a[5]||"")+(a[6]?"/"+a[6]:"")+" "+a[7]).trim().replace(/\s\s+/g," ")}return o},this._renderOnCanvas=function(t,e){var n,i,o,l,c,f,h,d,p,m,g,y,v,x,_=r.data(),b=r.style.get("position"),w=r.style.get("renderThreshold")(_),M=r.style.get("text"),A=e.rotation(),E=e.zoom(),T=e.size(),S=a.mat3AsArray();n=["fontStyle","fontVariant","fontWeight","fontStretch","fontSize","lineHeight","fontFamily"].some(function(t){return null!==r.style(t)&&void 0!==r.style(t)}),r._canvasProperty(),o=r.featureGcsToDisplay(_.map(b)),_.forEach(function(e,_){l=o[_],w>0&&(l.x<-w||l.x>T.width+w||l.y<-w||l.y>T.height+w)||((c=r.style.get("visible")(e,_))||void 0===c)&&(f=a.convertColorAndOpacity(r.style.get("color")(e,_),r.style.get("textOpacity")(e,_)),d=a.convertColorAndOpacity(r.style.get("textStrokeColor")(e,_),r.style.get("textOpacity")(e,_),{r:0,g:0,b:0,a:0}),0===f.a&&0===d.a||(r._canvasProperty(t,"fillStyle",a.convertColorToRGBA(f)),null!=(i=M(e,_))&&""!==i&&(r._canvasProperty(t,"font",r.getFontFromStyles(n,e,_)),r._canvasProperty(t,"textAlign",r.style.get("textAlign")(e,_)||"center"),r._canvasProperty(t,"textBaseline",r.style.get("textBaseline")(e,_)||"middle"),m=r.style.get("rotation")(e,_)||0,g=r.style.get("rotateWithMap")(e,_)&&A,y=r.style.get("textScaled")(e,_),y=a.isNonNullFinite(y)?Math.pow(2,E-y):null,v=r.style.get("offset")(e,_),x=a.mat3AsArray(),(m||g||y&&1!==y||v&&(v.x||v.y))&&(s.translate(x,x,[l.x,l.y]),g&&A&&s.rotate(x,x,A),s.translate(x,x,[v&&v.x?+v.x:0,v&&v.y?+v.y:0]),m&&s.rotate(x,x,m),y&&1!==y&&s.scale(x,x,[y,y]),s.translate(x,x,[-l.x,-l.y])),S[0]===x[0]&&S[1]===x[1]&&S[3]===x[3]&&S[4]===x[4]&&S[6]===x[6]&&S[7]===x[7]||(t.setTransform(x[0],x[1],x[3],x[4],x[6],x[7]),s.copy(S,x)),(f=a.convertColorAndOpacity(r.style.get("shadowColor")(e,_),void 0,{r:0,g:0,b:0,a:0})).a&&(v=r.style.get("shadowOffset")(e,_),h=r.style.get("shadowBlur")(e,_)),f.a&&(v&&(v.x||v.y)||h)?(r._canvasProperty(t,"shadowColor",a.convertColorToRGBA(f)),v&&(m||g)&&r.style.get("shadowRotate")(e,_)&&(x=[+v.x,+v.y,0],u.rotateZ(x,x,[0,0,0],m+(g?A:0)),v={x:x[0],y:x[1]}),r._canvasProperty(t,"shadowOffsetX",v&&v.x?+v.x:0),r._canvasProperty(t,"shadowOffsetY",v&&v.y?+v.y:0),r._canvasProperty(t,"shadowBlur",h||0)):r._canvasProperty(t,"shadowColor","rgba(0,0,0,0)"),d.a&&(p=r.style.get("textStrokeWidth")(e,_),isFinite(p)&&p>0&&(r._canvasProperty(t,"strokeStyle",a.convertColorToRGBA(d)),r._canvasProperty(t,"lineWidth",p),t.strokeText(i,l.x,l.y),r._canvasProperty(t,"shadowColor","rgba(0,0,0,0)"))),t.fillText(i,l.x,l.y))))}),r._canvasProperty(t,"globalAlpha",1),t.setTransform(1,0,0,1,0,0)},this};r(l,o);i("canvas","text",l,{}),t.exports=l},511:function(t,e,n){var r=function(){"use strict";var t,e=this,n=this._init,r=this._exit,i=this._update,o=0,a=[];this._drawTile=function(n){if(t){var r=e._tileBounds(n),i=n.index.level||0,s=e._tileOffset(i),u=e.tileCropFromBounds(n),l={};u&&(l.crop=u),l.ul=e.fromLocal(e.fromLevel({x:r.left-s.x,y:r.top-s.y},i),0),l.ll=e.fromLocal(e.fromLevel({x:r.left-s.x,y:r.bottom-s.y},i),0),l.ur=e.fromLocal(e.fromLevel({x:r.right-s.x,y:r.top-s.y},i),0),l.lr=e.fromLocal(e.fromLevel({x:r.right-s.x,y:r.bottom-s.y},i),0),l.ul.z=l.ll.z=l.ur.z=l.lr.z=i,o+=1,l.id=o,n.quadId=l.id,l.image=n.image,a.push(l),t.data(a),t._update(),e.draw()}},this._remove=function(n){if(void 0!==n.quadId&&t){for(var r=0;r<a.length;r+=1)if(a[r].id===n.quadId){a.splice(r,1);break}t.data(a),t._update(),e.draw()}},this._update=function(n){return i.call(e,n),t&&t.nearestPixel&&t.nearestPixel(e.nearestPixel()),e._addBaseQuadToTiles(t,a),e},this._exit=function(){e.deleteFeature(t),t=null,a=[],r.apply(e,arguments)},this._init=function(){n.apply(e,arguments),(t=e.createFeature("quad",{previewColor:e._options.previewColor,previewImage:e._options.previewImage})).geoTrigger=void 0,t.gcs(e._options.gcs||e.map().gcs()),t.data(a),t._update()},this._getSubLayer=function(){},this._updateSubLayers=void 0};(0,n(1098).registerLayerAdjustment)("canvas","tile",r),t.exports=r},1795:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(338),a=function(t){"use strict";return this instanceof a?(t=t||{},o.call(this,t),n(5895).call(this),this._init(t),this):new a(t)};r(a,o),i("canvas","track",a),t.exports=a},3561:function(t,e,n){var r=n(4626),i=n(1275),o=function(t){"use strict";if(!(this instanceof o))return new o(t);t=t||{},i.call(this,t);var e=n(642).ensureFunction;delete t.layer,delete t.renderer;var r=n(2493).d3,a=this,s=this._init,u=Object.assign({},{colorRange:[{r:.07514311,g:.468049805,b:1},{r:.468487184,g:.588057293,b:1},{r:.656658579,g:.707001303,b:1},{r:.821573924,g:.837809045,b:1},{r:.943467973,g:.943498599,b:.943398095},{r:1,g:.788626485,b:.750707739},{r:1,g:.6289553,b:.568237474},{r:1,g:.472800903,b:.404551679},{r:.916482116,g:.236630659,b:.209939162}],scale:r.scaleQuantize(),geoId:function(t){return t.properties.GEO_ID},scalarId:function(t){return t.id},scalarValue:function(t){return t.value}},t);return this.featureType="choropleth",this.scalar=function(t,e){var n,i;return void 0===t?a.choropleth.get("scalar")()||[]:(n=a.choropleth.get("scalarId"),i=a.choropleth.get("scalarValue"),u.scalar=t,u.scalarAggregator=e||r.mean,u.scalar._dictionary=t.reduce(function(t,e){var r,o;return r=n(e),o=i(e),t[r]=t[r]?t[r].push(o):[o],t},{}),a.dataTime().modified(),a)},this.choropleth=function(t,e){var n;return void 0===t?u:"string"==typeof t&&void 0===e?u[t]:(void 0===e?(n=Object.assign({},u,t),u=n):u[t]=e,a.modified(),a)},this.choropleth.get=function(t){var n,r={};if(void 0===t){for(n in u)u.hasOwnProperty(n)&&(r[n]=a.choropleth.get(n));return r}return e(u[t])},this._featureToPolygons=function(t,e){var n=a.layer().createFeature("polygon",{});return"Polygon"===t.geometry.type?n.data([{type:"Polygon",coordinates:t.geometry.coordinates}]):"MultiPolygon"===t.geometry.type&&n.data(t.geometry.coordinates.map(function(t){return{type:"Polygon",coordinates:t}})),n.polygon(function(t){return{outer:t.coordinates[0],inner:t.coordinates[1]}}).position(function(t){return{x:t[0],y:t[1]}}).style({fillColor:e}),n},this._generateScale=function(t){var e=r.extent(a.scalar(),t||void 0);return a.choropleth().scale.domain(e).range(a.choropleth().colorRange),a},this.createChoropleth=function(){var t=a.choropleth,e=a.data(),n=a.scalar(),r=t.get("scalarValue"),i=t.get("geoId");return a._generateScale(r),e.map(function(e){var r=i(e),o=n._dictionary[r],s=t().scalarAggregator(o),u=a.choropleth().scale(s);return a._featureToPolygons(e,u)})},this._init=function(t){return s.call(a,t),u&&a.dataTime().modified(),a},this._init(t),this};r(o,i),t.exports=o},6761:function(t,e,n){var r=n(4626),i=n(6124),o=function(t){"use strict";if(!(this instanceof o))return new o(t);var e=n(642),r=n(5905);t=t||{},i.call(this,t);var a=this,s=this._init;return this._createContours=function(){return r.createColoredMesh(a,!1)},this.contour=a.mesh,this._init=function(t){s.call(a,t);var n=Object.assign({},{opacity:1,value:function(t,n){return e.isNonNullFinite(t)?t:a.position()(t,n).z},position:function(t){return t||{x:0,y:0}},origin:function(t){return t.length>=3?[t[0],t[1],0]:[0,0,0]}},void 0===t.style?{}:t.style);a.style(n),a.contour(Object.assign({},{minColor:"black",minOpacity:0,maxColor:"black",maxOpacity:0,colorRange:[{r:.07514311,g:.468049805,b:1},{r:.468487184,g:.588057293,b:1},{r:.656658579,g:.707001303,b:1},{r:.821573924,g:.837809045,b:1},{r:.943467973,g:.943498599,b:.943398095},{r:1,g:.788626485,b:.750707739},{r:1,g:.6289553,b:.568237474},{r:1,g:.472800903,b:.404551679},{r:.916482116,g:.236630659,b:.209939162}]},t.mesh||{},t.contour||{})),(t.mesh||t.contour)&&a.dataTime().modified()},this._init(t),this};r(o,i),t.exports=o},9726:function(t,e,n){var r=n(4626),i=n(2274),o=n(1098).registerRenderer,a=function(t){"use strict";if(!(this instanceof a))return new a(t);i.call(this,t),t=t||{};var e=this;return this.api=function(){return"dom"},this._init=function(t){var n=e.layer().node();return!e.canvas()&&n&&n.length&&e.canvas(n[0]),e},this._init(t),this};r(a,i),o("dom",a),t.exports=a},6409:function(t){var e={layerAdd:"geo_layerAdd",layerRemove:"geo_layerRemove",layerMove:"geo_layerMove",zoom:"geo_zoom",rotate:"geo_rotate",pan:"geo_pan",resize:"geo_resize",draw:"geo_draw",drawEnd:"geo_drawEnd",unhidden:"geo_unhidden",hidden:"geo_hidden",mousemove:"geo_mousemove",mouseclick:"geo_mouseclick",mouseup:"geo_mouseup",mousedown:"geo_mousedown",brush:"geo_brush",brushend:"geo_brushend",brushstart:"geo_brushstart",select:"geo_select",zoomselect:"geo_zoomselect",unzoomselect:"geo_unzoomselect",actiondown:"geo_actiondown",actionmove:"geo_actionmove",actionup:"geo_actionup",actionselection:"geo_actionselection",actionwheel:"geo_actionwheel",keyaction:"geo_keyaction",transitionstart:"geo_transitionstart",transitionend:"geo_transitionend",transitioncancel:"geo_transitioncancel",parallelprojection:"geo_parallelprojection",feature:{mousemove:"geo_feature_mousemove",mouseover:"geo_feature_mouseover",mouseover_order:"geo_feature_mouseover_order",mouseout:"geo_feature_mouseout",mouseon:"geo_feature_mouseon",mouseoff:"geo_feature_mouseoff",mouseclick:"geo_feature_mouseclick",mouseclick_order:"geo_feature_mouseclick_order",mousedown:"geo_feature_mousedown",mouseup:"geo_feature_mouseup",brushend:"geo_feature_brushend",brush:"geo_feature_brush"},pixelmap:{prepared:"geo_pixelmap_prepared"},screenshot:{ready:"geo_screenshot_ready"},camera:{}};e.camera.view="geo_camera_view",e.camera.projection="geo_camera_projection",e.camera.viewport="geo_camera_viewport",e.annotation={},e.annotation.add="geo_annotation_add",e.annotation.add_before="geo_annotation_add_before",e.annotation.update="geo_annotation_update",e.annotation.coordinates="geo_annotation_coordinates",e.annotation.select_edit_handle="geo_annotation_select_edit_handle",e.annotation.edit_action="geo_annotation_edit_action",e.annotation.remove="geo_annotation_remove",e.annotation.state="geo_annotation_state",e.annotation.mode="geo_annotation_mode",e.annotation.boolean="geo_annotation_boolean",e.annotation.cursor_click="geo_annotation_cursor_click",e.annotation.cursor_action="geo_annotation_cursor_action",t.exports=e},1275:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var i=n(5616),o=n(4626),a=n(5402),s=n(77),u=n(5325),l=n(6409),c=function(t){"use strict";if(!(this instanceof c))return new c(t);a.call(this);var e=n(642);t=t||{};var r,o=this,f=this._exit,h=this.geoOn,d=this.geoOff,p=void 0===t.selectionAPI?"auto":t.selectionAPI,m={},g=void 0===t.layer?null:t.layer,y=t.gcs,v=void 0===t.visible||t.visible,x=void 0===t.bin?null:t.bin,_=void 0===t.renderer||g&&t.renderer===g.renderer()?null:t.renderer,b=s(),w=s(),M=s(),A=[],E=[];return this._subfeatureStyles={},Object.defineProperty(this,"ready",{get:function(){return r}}),this._bindMouseHandlers=function(){o.selectionAPI()&&(o._unbindMouseHandlers(),o.geoOn(l.mousemove,o._handleMousemove),o.geoOn(l.mousedown,o._handleMousedown),o.geoOn(l.mouseup,o._handleMouseup),o.geoOn(l.mouseclick,o._handleMouseclick),o.geoOn(l.brushend,o._handleBrushend),o.geoOn(l.brush,o._handleBrush))},this._unbindMouseHandlers=function(){o.geoOff(l.mousemove,o._handleMousemove),o.geoOff(l.mousedown,o._handleMousedown),o.geoOff(l.mouseup,o._handleMouseup),o.geoOff(l.mouseclick,o._handleMouseclick),o.geoOff(l.brushend,o._handleBrushend),o.geoOff(l.brush,o._handleBrush)},this.pointSearch=function(t,e){return{index:[],found:[]}},this.boxSearch=function(t,e,n,r){return o.polygonSearch([t,{x:t.x,y:e.y},e,{x:e.x,y:t.y}],n,r)},this.polygonSearch=function(t,e,n){return{index:[],found:[]}},this._handleMousedown=function(t){this._handleMousemove(t,l.feature.mousedown)},this._handleMouseup=function(t){this._handleMousemove(t,l.feature.mouseup)},this._handleMousemove=function(t,e){var n,r=t&&t.mouse?t.mouse:o.layer().map().interactor().mouse(),i=o.data(),a=o.pointSearch(r.geo),s=[],u=[],f=-1,h=-1;(E.length||a.index.length)&&(n=a.extra||{},a.index.length>1&&o.geoTrigger(l.feature.mouseover_order,{feature:o,mouse:r,previous:E,over:a,sourceEvent:t}),c.eventID+=1,e?a.index.forEach(function(s,u){o.geoTrigger(e,{data:i[s],index:s,extra:n[s],mouse:r,eventID:c.eventID,top:u===a.length-1,sourceEvent:t},!0)}):(E.length&&(f=E[E.length-1]),s=a.index.filter(function(t){return E.indexOf(t)<0}),u=E.filter(function(t){return a.index.indexOf(t)<0}),s.forEach(function(e,a){o.geoTrigger(l.feature.mouseover,{data:i[e],index:e,extra:n[e],mouse:r,eventID:c.eventID,top:a===s.length-1,sourceEvent:t},!0)}),c.eventID+=1,u.forEach(function(e,n){o.geoTrigger(l.feature.mouseout,{data:i[e],index:e,mouse:r,eventID:c.eventID,top:n===u.length-1,sourceEvent:t},!0)}),c.eventID+=1,a.index.forEach(function(e,s){o.geoTrigger(l.feature.mousemove,{data:i[e],index:e,extra:n[e],mouse:r,eventID:c.eventID,top:s===a.index.length-1,sourceEvent:t},!0)}),(E=a.index).length&&(h=E[E.length-1]),f!==h&&(-1!==f&&o.geoTrigger(l.feature.mouseoff,{data:i[f],index:f,mouse:r,sourceEvent:t},!0),-1!==h&&o.geoTrigger(l.feature.mouseon,{data:i[h],index:h,extra:n[h],mouse:r,sourceEvent:t},!0))))},this._clearSelectedFeatures=function(){return E=[],o},this._handleMouseclick=function(t){var e=o.layer().map().interactor().mouse(),n=o.data(),r=o.pointSearch(e.geo),i=r.extra||{};r.index.length>1&&o.geoTrigger(l.feature.mouseclick_order,{feature:o,mouse:e,over:r,sourceEvent:t}),e.buttonsDown=t.buttonsDown,c.eventID+=1,r.index.forEach(function(a,s){o.geoTrigger(l.feature.mouseclick,{data:n[a],index:a,extra:i[a],mouse:e,eventID:c.eventID,top:s===r.index.length-1,sourceEvent:t},!0)})},this._handleBrush=function(t){var e=[t.gcs.lowerLeft,t.gcs.lowerRight,t.gcs.upperRight,t.gcs.upperLeft];if(o.layer()){var n=o.layer().map();e=u.transformCoordinates(n.gcs(),n.ingcs(),e)}var r=o.polygonSearch(e);c.eventID+=1,r.index.forEach(function(e,n){o.geoTrigger(l.feature.brush,{data:r.found[n],index:e,mouse:t.mouse,brush:t,eventID:c.eventID,top:n===r.index.length-1},!0)})},this._handleBrushend=function(t){var e=[t.gcs.lowerLeft,t.gcs.lowerRight,t.gcs.upperRight,t.gcs.upperLeft];if(o.layer()){var n=o.layer().map();e=u.transformCoordinates(n.gcs(),n.ingcs(),e)}var r=o.polygonSearch(e);c.eventID+=1,r.index.forEach(function(e,n){o.geoTrigger(l.feature.brushend,{data:r.found[n],index:e,mouse:t.mouse,brush:t,eventID:c.eventID,top:n===r.index.length-1},!0)})},this.style=function(t,e){return void 0===t?m:"string"==typeof t&&void 0===e?m[t]:void 0===e?(m=Object.assign({},m,t),o.modified(),o):(m[t]=e,o.modified(),o)},this.style.get=function(t){var n;if(void 0===t){var r,i={};for(r in m)m.hasOwnProperty(r)&&(i[r]=o.style.get(r));return i}return n=t.toLowerCase().match(/color$/)?e.isFunction(m[t])?function(){return e.convertColor(m[t].apply(o,arguments))}:e.ensureFunction(e.convertColor(m[t])):e.ensureFunction(m[t]),n},this.updateStyleFromArray=function(t,e,n){if("string"!=typeof t)i.each(t,function(t,e){o.updateStyleFromArray(t,e)});else{var r;if(t.toLowerCase().match(/color$/)&&(r={r:0,g:0,b:0}),!Array.isArray(e))return o;o._subfeatureStyles[t]?e.length&&Array.isArray(e[0])?o.style(t,function(t,n,i,o){var a=(e[o]||[])[n];return void 0!==a?a:r}):o.style(t,function(t,n,i,o){var a=e[o];return void 0!==a?a:r}):o.style(t,function(t,n){var i=e[n];return void 0!==i?i:r})}return n&&o.visible()&&o.draw(),o},this.layer=function(){return g},this.renderer=function(){return _||g&&g.renderer()},this.gcs=function(t){return void 0===t?null==y&&g?g.map().ingcs():y:(y=t,o.modified(),o)},this.featureGcsToDisplay=function(t){var e=g.map();return t=e.gcsToWorld(t,o.gcs()),t=e.worldToDisplay(t),o.renderer().baseToLocal&&(t=o.renderer().baseToLocal(t)),t},this.visible=function(t,e){if(void 0===t)return!(!e&&g&&g.visible&&!g.visible())&&v;if(v!==t||e){v=t,g&&g.visible&&!g.visible()&&(t=!1),t?o._bindMouseHandlers():o._unbindMouseHandlers();for(var n=0;n<A.length;n+=1)A[n].visible(v,e)}return o},this.dependentFeatures=function(t){return void 0===t?A.slice():(A=t.slice(),o)},this.bin=function(t,n){if(void 0===t){if(null===x&&!n){var r=o.parent(),i=r?r.children().indexOf(o):-1;return i>=0?i:0}return x}return x=e.isNonNullFinite(t)?parseInt(t,10):null,o.modified(),o},this.dataTime=function(t){return void 0===t?b:(b=t,o.modified(),o)},this.buildTime=function(t){return void 0===t?w:(w=t,o.modified(),o)},this.updateTime=function(t){return void 0===t?M:(M=t,o.modified(),o)},this.data=function(t){return void 0===t?o.style("data")||[]:(o.style("data",t),o.dataTime().modified(),o.modified(),o)},this.selectionAPI=function(t,e){return void 0===t?!(!e&&g&&g.selectionAPI&&!g.selectionAPI())&&(e||"auto"!==p?p:!!o.geoIsOn(Object.values(l.feature))):("auto"!==t&&(t=!!t),(t!==p||e)&&(p=t,o._unbindMouseHandlers(),o._bindMouseHandlers()),o)},this.mouseOverOrderHighestIndex=function(t){t.over.index.sort();var e=t.feature.data();t.over.index.forEach(function(n,r){t.over.found[r]=e[n]})},this._init=function(t){if(!g)throw new Error("Feature requires a valid layer");m=Object.assign({},{opacity:1},void 0===t.style?{}:t.style),o._bindMouseHandlers(),r=!0},this._build=function(){},this._update=function(){},this.geoOn=function(t,e){var n="auto"===o.selectionAPI(void 0,!0),r=n&&o.selectionAPI(),i=h.apply(o,arguments);return n&&!r&&o.selectionAPI()&&o._bindMouseHandlers(),i},this.geoOff=function(t,e){var n="auto"===o.selectionAPI(void 0,!0),r=n&&o.selectionAPI(),i=d.apply(o,arguments);return n&&r&&!o.selectionAPI()&&o._unbindMouseHandlers(),i},this._exit=function(){o._unbindMouseHandlers(),E=[],m={},f(),r=!1},this._init(t),this};c.eventID=0,c.create=function(t,e){"use strict";if(!(t instanceof n(5156)))return console.warn("Invalid layer"),null;if("object"!==r(e))return console.warn("Invalid spec"),null;var i=e.type,o=t.createFeature(i,e);return o?(e.data=e.data||[],o.style(e)):(console.warn('Could not create feature type "'+i+'"'),null)},o(c,a),t.exports=c},6498:function(t,e,n){var r=n(4626),i=n(5156),o=n(6409),a=n(1098),s=function(t){"use strict";if(!(this instanceof s))return new s(t);i.call(this,t);var e=this,n=[],r=this._init,u=this._exit,l=this._update,c=this.visible,f=this.selectionAPI,h=this.draw;return this.createFeature=function(t,n){var r=a.createFeature(t,e,e.renderer(),n);return r?e.addFeature(r):console.warn("Layer renderer ("+e.rendererName()+') does not support feature type "'+t+'"'),r},this.addFeature=function(t){return e.removeFeature(t),e.addChild(t),n.push(t),e.dataTime().modified(),e.modified(),e},this.removeFeature=function(t){var r;return(r=n.indexOf(t))>=0&&(n.splice(r,1),e.removeChild(t),e.dataTime().modified(),e.modified()),e},this.deleteFeature=function(t){return t&&(n.indexOf(t)>=0&&t._exit(),e.removeFeature(t)),e},this.features=function(t){if(void 0===t)return n.slice();var r,i=n.slice();for(r=0;r<i.length;r+=1)t.indexOf(i[r])<0&&n.indexOf(i[r])>=0&&e.deleteFeature(i[r]);for(r=0;r<t.length;r+=1)e.addFeature(t[r]);return e},this.gcsFeatures=function(t){var n,r;return void 0===t?(this.features().forEach(function(t){void 0===n?n=t.gcs():t.gcs()!==n&&(r=!0)}),r?void 0:n):(e.features().forEach(function(e){e.gcs()!==t&&e.gcs(t)}),e)},this._init=function(){return e.initialized()||(r.call(e,!0),e.geoOn(o.resize,function(t){e.renderer()?(e.renderer()._resize(t.x,t.y,t.width,t.height),e._update({event:t}),e.renderer()._render()):e._update({event:t})}),e.geoOn(o.pan,function(t){e._update({event:t}),e.renderer()&&e.renderer()._render()}),e.geoOn(o.rotate,function(t){e._update({event:t}),e.renderer()&&e.renderer()._render()}),e.geoOn(o.zoom,function(t){e._update({event:t}),e.renderer()&&e.renderer()._render()})),e},this._update=function(t){var r;if(!n.length)return e;if(l.call(e,t),e.dataTime().timestamp()>e.updateTime().timestamp())for(r=0;r<n.length;r+=1)n[r].renderer(e.renderer());for(r=0;r<n.length;r+=1)n[r]._update();return e.updateTime().modified(),e},this._exit=function(){e.clear(),u()},this.draw=function(){return e.visible()&&(h(),e.renderer()&&e.renderer()._render()),e},this.visible=function(t){if(void 0===t)return c();if(e.visible()!==t){c(t);var r,i=n.slice();for(r=0;r<i.length;r+=1)i[r].visible(i[r].visible(void 0,!0),!0);t&&e.draw()}return e},this.selectionAPI=function(t){if(void 0===t)return f();if(e.selectionAPI()!==t){f(t);var r,i=n.slice();for(r=0;r<i.length;r+=1)i[r].selectionAPI(i[r].selectionAPI(void 0,!0),!0)}return e},this.clear=function(){for(;n.length;)e.deleteFeature(n[0]);return e},e};r(s,i),a.registerLayer("feature",s),t.exports=s},5938:function(t,e,n){var r=n(5616),i=function(t){if(!(this instanceof i))return new i(t);t=t||{},this._size=t.size||6,this._initialSize=t.initialSize||0,this._track=t.track||600,this._initialTrack=this._track,this._needed=t.needed||null,this._batch=!1;var e=this,n=1;return Object.defineProperty(this,"size",{get:function(){return e._size},set:function(t){e._size=t,e._initialSize>1&&t<e._initialSize&&(e._initialSize=t),e.next_item()}}),Object.defineProperty(this,"initialSize",{get:function(){return e._initialSize},set:function(t){e._initialSize=t,e.next_item()}}),Object.defineProperty(this,"track",{get:function(){return e._track},set:function(t){e._track=t}}),Object.defineProperty(this,"initialTrack",{get:function(){return e._initialTrack},set:function(t){e._initialTrack=t}}),Object.defineProperty(this,"length",{get:function(){return e._queue.length}}),Object.defineProperty(this,"processing",{get:function(){return e._processing}}),this.clear=function(){return e._queue=[],e._processing=0,e},this.add=function(t,n,i){if(t.__fetchQueue){var o=e._queue.indexOf(t);if(o>=0)return e._addToQueue(t,i,o),t}var a=r.Deferred(),s=r.Deferred();return a.done(function(){r.when(n.call(t)).always(s.resolve)}).fail(s.resolve),t.__fetchQueue=a,e._addToQueue(t,i),r.when(a,s).always(function(){e._processing>0&&(e._processing-=1),e._initialSize=0,e.next_item()}).promise(t),e.next_item(),t},this._addToQueue=function(t,n,r){var i=n?e._queue.length-1:0;if(t.__fetchQueue._batch=e._batch,!n&&e._batch)for(i=0;i<e._queue.length-(void 0===r?0:1)&&e._queue[i].__fetchQueue._batch===e._batch;i+=1);if(void 0===r)n?e._queue.push(t):i?e._queue.splice(i,0,t):e._queue.unshift(t);else if(r!==i){for(var o=r<i?1:-1,a=r;a!==i;a+=o)e._queue[a]=e._queue[a+o];e._queue[i]=t}},this.get=function(t){return e._queue.indexOf(t)},this.remove=function(t){var n=e._queue.indexOf(t);return n>=0&&(e._queue.splice(n,1),!0)},this.batch=function(t){return void 0===t?e._batch:(t?(e._batch=n,n+=1):e._batch=!1,e)},this.next_item=function(){if(!e._innextitem){if(e._innextitem=!0,e._queue.length>e._track&&e._needed)for(var t=e._queue.length-1;t>=0;t-=1)if(!e._needed(e._queue[t])){var n=e._queue.splice(t,1)[0];e._processing+=1,n.__fetchQueue.reject(),delete n.__fetchQueue}for(;e._processing<(e._initialSize||e._size)&&e._queue.length;){var r=e._queue.shift();if(r.__fetchQueue)e._processing+=1,!e._needed||e._needed(r)?r.__fetchQueue.resolve():r.__fetchQueue.reject(),delete r.__fetchQueue}e._innextitem=!1}},this.clear(),this};t.exports=i},703:function(t,e,n){var r=n(4626),i=n(6498),o=n(1338),a=function(t){"use strict";if(!(this instanceof a))return new a(t);if(o.call(this),!((t=t||{}).layer instanceof i))throw new Error("fileReader must be given a feature layer");var e=t.layer;return this.layer=function(){return e},this.canRead=function(t){return!1},this.read=function(t,e,n){var r=new Promise(function(t,n){throw e&&e(!1),new Error("The default file reader always fails")});return this.addPromise(r),r},this._getString=function(t,e,n){var r=function(t,e){var n=new FileReader;return e&&(n.onprogress=e),n.onloadend=function(){t(n.error||n.result)},n}(e,n);r.readAsText(t)},this};r(a,o),t.exports=a},5173:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach(function(e){a(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function a(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=n(4626),u=n(1098).registerFileReader,l=n(703),c=function(t){"use strict";if(!(this instanceof c))return new c(t);var e=n(5616),r=n(642).convertColor,i=n(2225),s=n(5325),u=this,f=o(o({},t),{},{pointStyle:o({fill:!0,fillColor:"#ff7800",fillOpacity:.8,stroke:!0,strokeColor:"#000",strokeWidth:1,strokeOpacity:1,radius:8},t.pointStyle),lineStyle:o({strokeColor:"#ff7800",strokeWidth:4,strokeOpacity:.5,strokeOffset:0,lineCap:"butt",lineJoin:"miter",uniformLine:!0,closed:!1},t.lineStyle),polygonStyle:o({fill:!0,fillColor:"#b0de5c",fillOpacity:.8,stroke:!0,strokeColor:"#999999",strokeWidth:2,strokeOpacity:1,uniformPolygon:!0,pattern:void 0},t.polygonStyle)});l.call(this,f),this.canRead=function(t){if(t instanceof File||t instanceof Blob)return!!("application/json"===t.type||t.name&&t.name.match(/\.json$/));if("string"==typeof t){try{JSON.parse(t)}catch(t){return!1}return!0}try{if(Array.isArray(u._featureArray(t)))return!0}catch(t){}return!1},this._readObject=function(t,n,r){var i;function o(t){try{i=JSON.parse(t),n(i)}catch(r){i||e.ajax({type:"GET",url:t,dataType:"text"}).done(function(t){try{i=JSON.parse(t),n(i)}catch(t){i||n(!1)}}).fail(function(){n(!1)})}}t instanceof File||t instanceof Blob?u._getString(t,o,r):"string"==typeof t?o(t):n(t)},this._featureArray=function(t){var e,n=[];switch(t.type){case"FeatureCollection":e=t.features;break;case"Feature":e=[t];break;case"GeometryCollection":e=t.geometries.map(function(t){return{type:"Feature",geometry:t,properties:{}}});break;case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":e=[{type:"Feature",geometry:t,properties:{}}];break;default:throw new Error("Invalid json type")}return e.forEach(function(t){Array.prototype.push.apply(n,u._feature(t))}),n=n.filter(function(t){return t.geometry&&t.geometry.coordinates&&t.geometry.coordinates.length})},this._feature=function(t){if("Feature"!==t.type)throw new Error("Invalid feature object");switch(t.geometry.type){case"Point":case"LineString":case"Polygon":return[t];case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.geometry.coordinates.map(function(e){return{type:"Feature",geometry:{type:t.geometry.type.replace("Multi",""),coordinates:e},properties:t.properties}});default:throw new Error("Invalid geometry type")}},this._position=function(t){return{x:t[0],y:t[1],z:t[2]||0}},this._style=function(t,e){var n=t.toLowerCase().match(/color$/);return n&&(e=r(e)),function(i,o,a,s){var u;return void 0!==(u=void 0!==a&&a.properties?a.properties:i.properties)&&u.hasOwnProperty(t)?n?r(u[t]):u[t]:e}},this.read=function(t,e,n){var r=new Promise(function(r,l){function c(t){return"Polygon"===t.geometry.type&&1===t.geometry.coordinates.length&&5===t.geometry.coordinates[0].length&&("ellipse"===(t.properties||{}).annotationType||"circle"===(t.properties||{}).annotationType)}u._readObject(t,function(t){if(!1===t)return e&&e(t),void l(new Error("Failed to parse GeoJSON"));var n,h,d=[];try{n=u._featureArray(t)}catch(t){return void l(t)}var p=n.filter(function(t){return"Point"===t.geometry.type});p.length&&(h=u.layer().createFeature("point"))&&(h.data(p).position(function(t){return u._position(t.geometry.coordinates)}).style([{}].concat(Object.keys(f.pointStyle)).reduce(function(t,e){return o(a({},e,p.some(function(t){return t.properties&&void 0!==t.properties[e]})?u._style(e,f.pointStyle[e]):f.pointStyle[e]),t)})),d.push(h));var m=n.filter(function(t){return"LineString"===t.geometry.type});m.length&&(h=u.layer().createFeature("line"))&&(h.data(m).line(function(t){return t.geometry.coordinates}).position(u._position).style([{}].concat(Object.keys(f.lineStyle)).reduce(function(t,e){return o(a({},e,m.some(function(t){return t.properties&&void 0!==t.properties[e]})?u._style(e,f.lineStyle[e]):f.lineStyle[e]),t)})),d.push(h));var g=n.filter(function(t){return"Polygon"===t.geometry.type&&!c(t)});g.length&&(h=u.layer().createFeature("polygon"))&&(h.data(g).polygon(function(t,e){return{outer:t.geometry.coordinates[0],inner:t.geometry.coordinates.slice(1)}}).position(u._position).style([{}].concat(Object.keys(f.polygonStyle)).reduce(function(t,e){return o(a({},e,g.some(function(t){return t.properties&&void 0!==t.properties[e]})?u._style(e,f.polygonStyle[e]):f.polygonStyle[e]),t)})),d.push(h));var y=n.filter(c);y.length&&(h=u.layer().createFeature("marker"))&&(y.forEach(function(t){var e=u.layer().map(),n=s.transformCoordinates(e.ingcs(),e.gcs(),t.geometry.coordinates[0]),r=Math.pow(Math.pow(n[0][0]-n[1][0],2)+Math.pow(n[0][1]-n[1][1],2),.5),i=Math.pow(Math.pow(n[0][0]-n[3][0],2)+Math.pow(n[0][1]-n[3][1],2),.5),o=Math.max(r,i)/2/e.unitsPerPixel(0),a=r?i/r:1e20,l=-Math.atan2(n[1][1]-n[0][1],n[1][0]-n[0][0]),c=s.transformCoordinates(e.gcs(),e.ingcs(),{x:(n[0][0]+n[1][0]+n[2][0]+n[3][0])/4,y:(n[0][1]+n[1][1]+n[2][1]+n[3][1])/4});t._props={pos:c,radius:o,aspect:a,rotation:l}}),h.data(y).position(function(t){return t._props.pos}).style([{}].concat(Object.keys(f.polygonStyle)).reduce(function(t,e){return o(a(a(a(a(a(a(a(a({},e,y.some(function(t){return t.properties&&void 0!==t.properties[e]})?u._style(e,f.polygonStyle[e]):f.polygonStyle[e]),"radius",function(t){return t._props.radius}),"radiusIncludesStroke",!1),"symbolValue",function(t){return t._props.aspect}),"rotation",function(t){return t._props.rotation}),"strokeOffset",0),"rotateWithMap",!0),"scaleWithZoom",i.scaleMode.fill),t)})),d.push(h)),e&&e(d),r(d)},n)});return u.addPromise(r),r}};s(c,l),u("geojsonReader",c),u("jsonReader",c),t.exports=c},3187:function(t,e,n){var r=n(4626),i=n(1275),o=function(t){"use strict";if(!(this instanceof o))return new o(t);t=t||{},i.call(this,t);var e=n(642),r=n(1098),a=this,s=this.draw,u=this.style,l=null,c=null,f=function(t){return t.children},h=[],d=this._init,p=this._exit;return this.featureType="graph",this._init=function(t){d.call(a,t);var n=e.deepMerge({},{nodes:{radius:5,fill:!0,fillColor:{r:1,g:0,b:0},strokeColor:{r:0,g:0,b:0}},links:{strokeColor:{r:0,g:0,b:0}},linkType:"path"},void 0===t.style?{}:t.style);return a.style(n),a.nodes(e.identityFunction),a},this._build=function(){a.children().forEach(function(t){t._build()})},this._update=function(){a.children().forEach(function(t){t._update()})},this._exit=function(){return a.data([]),h.forEach(function(t){t._exit(),a.removeChild(t)}),h=[],c._exit(),a.removeChild(c),p(),a},this.style=function(t,e){var n=u.call(a,t,e);return n!==a?n:(c.style(t.nodes),h.forEach(function(e){e.style(t.links)}),a)},this.style.get=u.get,this.links=function(t){return void 0===t?f:(f=e.ensureFunction(t),a)},this.nodes=function(t){return void 0===t?l:(l=t,a.modified(),a)},this.nodeFeature=function(){return c},this.linkFeatures=function(){return h},this.draw=function(){var t,e=a.layer(),n=a.data(),i=0;return t=a.style(),c.data(n),c.style(t.nodes),n.forEach(function(n){(n.children||[]).forEach(function(o){var s;i+=1,h.length<i&&(s=r.createFeature(t.linkType,e,e.renderer()).style(t.links),a.addChild(s),h.push(s)),h[i-1].data([n,o])})}),h.splice(i,h.length-i).forEach(function(t){t._exit(),a.removeChild(t)}),s(),a},c=r.createFeature("point",this.layer(),this.layer().renderer()),a.addChild(c),t.nodes&&this.nodes(t.nodes),this._init(t),this};r(o,i),t.exports=o},2499:function(t,e,n){var r=n(4626),i=n(6124),o=function(t){"use strict";if(!(this instanceof o))return new o(t);var e=n(642),r=n(5905);t=t||{},i.call(this,t);var a=this,s=this._init;return this._createGrids=function(){return r.createColoredMesh(a,!0)},this.grid=a.mesh,this._init=function(t){s.call(a,t);var n=Object.assign({},{opacity:1,value:function(t,n){return e.isNonNullFinite(t)?t:a.position()(t,n).z},position:function(t){return t||{x:0,y:0}},origin:function(t){return t.length>=3?[t[0],t[1],0]:[0,0,0]}},void 0===t.style?{}:t.style);a.style(n),a.grid(Object.assign({},{minColor:"black",minOpacity:0,maxColor:"black",maxOpacity:0,colorRange:[{r:.07514311,g:.468049805,b:1},{r:.468487184,g:.588057293,b:1},{r:.656658579,g:.707001303,b:1},{r:.821573924,g:.837809045,b:1},{r:.943467973,g:.943498599,b:.943398095},{r:1,g:.788626485,b:.750707739},{r:1,g:.6289553,b:.568237474},{r:1,g:.472800903,b:.404551679},{r:.916482116,g:.236630659,b:.209939162}]},t.mesh||{},t.grid||{})),(t.mesh||t.grid)&&a.dataTime().modified()},this._init(t),this};r(o,i),t.exports=o},9163:function(t,e,n){var r=n(4626),i=n(1275),o=n(5325),a=n(642),s=function(t){"use strict";if(!(this instanceof s))return new s(t);t=t||{},i.call(this,t);var e,n,r,u,l,c,f,h=this,d=this._init;return this.featureType="heatmap",e=t.position||a.identityFunction,n=t.intensity||function(t){return 1},r=void 0!==t.maxIntensity?t.maxIntensity:null,u=void 0!==t.minIntensity?t.minIntensity:null,c=void 0!==t.binned?t.binned:"auto",l=t.updateDelay||0===t.updateDelay?parseInt(t.updateDelay,10):-1,this.maxIntensity=function(t){return void 0===t?r:(r=t,h.dataTime().modified(),h.modified(),h)},this.minIntensity=function(t){return void 0===t?u:(u=t,h.dataTime().modified(),h.modified(),h)},this.updateDelay=function(t){return void 0===t?l:(l=parseInt(t,10),h)},this.binned=function(t){return void 0===t?c:("true"===t?t=!0:("false"===t||"auto"!==t&&!0!==t&&!1!==t&&((t=parseInt(t,10))<=0||isNaN(t)))&&(t=!1),c=t,h.dataTime().modified(),h.modified(),h)},this.position=function(t){return void 0===t?e:(e=t,h.dataTime().modified(),h.modified(),h)},this.gcsPosition=function(){return h._update(),f},this.intensity=function(t){return void 0===t?n:(n=t,h.dataTime().modified(),h.modified(),h)},this._init=function(t){d.call(h,t);var n=Object.assign({},{radius:10,blurRadius:10,gaussian:!0,color:{0:{r:0,g:0,b:0,a:0},.25:{r:0,g:0,b:1,a:.5},.5:{r:0,g:1,b:1,a:.6},.75:{r:1,g:1,b:0,a:.7},1:{r:1,g:0,b:0,a:.8}},scaleWithZoom:!1},void 0===t.style?{}:t.style);h.style(n),e&&h.dataTime().modified()},this._build=function(){var t=h.data(),e=null,n=[],i=null==r,a=null==u;return t.forEach(function(t,o){n.push(h.position()(t,o)),(i||a)&&(e=h.intensity()(t,o),null==r&&(r=e),null==u&&(u=e),i&&e>r&&(r=e),a&&e<u&&(u=e))}),a&&i&&u===r&&(u-=1),f=o.transformCoordinates(h.gcs(),h.layer().map().gcs(),n),h.buildTime().modified(),h},this._init(t),this};r(s,i),t.exports=s},4912:function(t,e,n){var r=n(4626),i=n(5289),o=function(t){if(!(this instanceof o))return new o(t);var e=n(5616);return t.size=t.size||{x:256,y:256},this._image=null,this._cors=t.crossDomain||null===t.crossDomain?t.crossDomain:"anonymous",i.call(this,t),Object.defineProperty(this,"image",{get:function(){return this._image}}),this.fetch=function(){var t;return this._image||(this._image=new Image(this.right-this.left,this.bottom-this.top),this._cors&&this._url.indexOf(":")>=0&&this._url.indexOf("/")===this._url.indexOf(":")+1&&(this._image.crossOrigin=this._cors),t=e.Deferred(),this._image.onload=t.resolve,this._image.onerror=t.reject,this._image.src=this._url,t.done(function(){this._fetched=!0}.bind(this)).promise(this)),this},this.fadeIn=function(t){var n=this.fetch(),r=e.Deferred();return e(this._image).css("display","none"),n.done(function(){e(this._image).fadeIn(t,function(){r.resolve()})}.bind(this)),r.promise(this)},this};r(o,i),t.exports=o},2257:function(t,e,n){
/**
 * GeoJS
 * @copyright 2013-2022, Kitware, Inc.
 * @license Apache-2.0
 * @namespace geo
 */
/*
 * Bundled with the following libraries:
 *
 * Proj4js
 * @copyright 2014, Mike Adair, Richard Greenwood, Didier Richard, Stephen Irons, Olivier Terral and Calvin Metcalf
 * @license MIT
 *
 * gl-matrix
 * @copyright 2015, Brandon Jones, Colin MacKenzie IV
 * @license MIT
 *
 * JQuery
 * @copyright jQuery Foundation and other contributors
 * @license MIT
 *
 * earcut
 * @copyright 2016, Mapbox
 * @license ISC
 *
 * kdbush
 * @copyright 2017, Vladimir Agafonkin
 * @license ISC
 */
var r=n(5616),i=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi;r.htmlPrefilter=function(t){return t.replace(i,"<$1></$2>")},n(7605),t.exports=Object.assign({annotationLayer:n(2075),camera:n(3578),choroplethFeature:n(3561),contourFeature:n(6761),domRenderer:n(9726),event:n(6409),feature:n(1275),featureLayer:n(6498),fetchQueue:n(5938),fileReader:n(703),geo_action:n(8695),graphFeature:n(3187),heatmapFeature:n(9163),imageTile:n(4912),isolineFeature:n(2586),geojsonReader:n(5173),gridFeature:n(2499),layer:n(5156),lineFeature:n(9281),map:n(6211),mapInteractor:n(7908),markerFeature:n(2225),meshFeature:n(6124),object:n(1338),osmLayer:n(4880),pathFeature:n(2266),pointFeature:n(7541),polygonFeature:n(6645),quadFeature:n(3842),pixelmapFeature:n(7761),pixelmapLayer:n(534),renderer:n(2274),sceneObject:n(5402),textFeature:n(6546),tile:n(5289),tileCache:n(9123),tileLayer:n(9264),timestamp:n(77),trackFeature:n(338),transform:n(5325),typedef:n(3170),vectorFeature:n(6858),inherit:n(4626),version:n(4081),sha:n(9079),annotation:n(4655),util:n(642),jQuery:r,canvas:n(8074),svg:n(6488),vtkjs:n(394),webgl:n(8635),gui:n(4812),vgl:n(1611)},n(1098)),window&&!window.$&&(window.$=r),window&&!window.jQuery&&(window.jQuery=r),window&&!window.geojsMap&&(window.geojsMap=function(){var t=r(".geojs-map").map(function(t,e){return r(e).data("data-geojs-map")});return 0===t.length?void 0:1===t.length?t[0]:t})},4626:function(t){t.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},2586:function(t,e,n){var r=n(4626),i=n(6124),o=n(1098),a=n(642),s={17:[{l0:1,h0:2,l1:0,h1:2}],18:[{l0:0,h0:1,l1:2,h1:1}],20:[{l0:2,h0:0,l1:1,h1:0}],22:[{l0:2,h0:0,l1:2,h1:1}],21:[{l0:1,h0:2,l1:1,h1:0}],19:[{l0:0,h0:1,l1:0,h1:2}],1:[{l0:2,h0:3,l1:1,h1:3}],2:[{l0:0,h0:2,l1:3,h1:2}],4:[{l0:3,h0:1,l1:0,h1:1}],8:[{l0:1,h0:0,l1:2,h1:0}],14:[{l0:3,h0:1,l1:3,h1:2}],13:[{l0:2,h0:3,l1:2,h1:0}],11:[{l0:1,h0:0,l1:1,h1:3}],7:[{l0:0,h0:2,l1:0,h1:1}],3:[{l0:0,h0:2,l1:1,h1:3}],10:[{l0:1,h0:0,l1:3,h1:2}],12:[{l0:3,h0:1,l1:2,h1:0}],5:[{l0:2,h0:3,l1:0,h1:1}],6:[{l0:0,h0:2,l1:0,h1:1},{l0:3,h0:1,l1:3,h1:2}],9:[{l0:1,h0:0,l1:1,h1:3},{l0:2,h0:3,l1:2,h1:0}]},u=function(t){"use strict";if(!(this instanceof u))return new u(t);var e=n(5325),r=n(6409),l=n(6546);t=t||{},i.call(this,t);var c,f,h,d,p,m=this,g=this.draw,y=this._exit,v=this._init,x=this.modified,_=this._update;return this.featureType="isoline",this.contour=m.mesh,this.isoline=m.mesh,this._createIsolines=function(){var t,e=m.style.get("value"),n=void 0!==m.style("used")?m.style.get("used"):function(t,n){return a.isNonNullFinite(e(t,n))},r=!1,i=[],o=m._createMesh({used:n,value:e});return(t=m._getValueList(o)).length?(t.forEach(function(t){var e=m._isolinesForValue(o,t);e.length&&(i=i.concat(e),r=r||!!t.label)}),{lines:i,mesh:o,values:t,hasLabels:r}):{}},this._getValueList=function(t){var e,n,r,i,o,s,u,l=m.isoline,c=l.get("values")(t),f=l.get("spacing")(t),h=l.get("count")(t),d=l.get("autofit")(t),p=l.get("levels")(t);if(!t.numVertices||!t.numElements)return[];if(e=a.getMinMaxValues(t.value,l.get("min")(t),l.get("max")(t),!0),t.minValue=e.min,t.maxValue=e.max,(n=t.maxValue-t.minValue)<=0)return[];if(Array.isArray(c))c=(c=c.map(function(t,e){return{value:void 0!==t.value?t.value:t,position:e,level:t.level}})).filter(function(e){return e.value>=t.minValue&&e.value<=t.maxValue});else if(f||d)for(f||(r=n/(2*h/3),o=Math.floor(Math.log10(r)),s=Math.max(0,-o),f=(r=(r/=i=Math.pow(10,o))>=5?5:r>=2?2:1)*i),c=[],u=Math.ceil(t.minValue/f);u<=Math.floor(t.maxValue/f);u+=1)c.push({value:u*f,position:u,fixedDigits:s});else for(c=Array(h),u=0;u<h;u+=1)c[u]={value:t.minValue+n*(u+1)/(h+1),position:u+1};return p.length&&c.forEach(function(t,e){if(void 0===t.level){t.level=0;for(var n=0,r=p[0];n<p.length&&!(t.position%r);r*=p[n+=1])t.level=n+1}if(l.get("label")(t,t.position)){var i=l.get("labelText")(t,t.position);void 0===i&&(i=void 0!==t.fixedDigits?""+parseFloat(t.value.toFixed(t.fixedDigits)):""+t.value),i&&(t.label=i)}}),c},this._addSegment=function(t,e,n){var r,i,o,a,s,u,l=[e,n],c=t.length;for(t.push(l),i=0;i<2;i+=1){for(r=c-1;r>=0;r-=1){if(a=(o=t[r])[0],s=o[o.length-1],n[0]===a[0]&&n[1]===a[1])u=l.concat(o.slice(1));else{if(e[0]!==s[0]||e[1]!==s[1])continue;u=o.concat(l.slice(1))}t.splice(c,1),t[r]=l=u,c=r,e=l[0],n=l[l.length-1];break}if(r<0)break}return t},this._chainVertex=function(t,e,n){var r=n[0],i=n[1],o=3*r,a=3*i,s=(e.value-t.value[r])/(t.value[i]-t.value[r]),u=1-s;return{x:t.pos[o]*u+t.pos[a]*s,y:t.pos[o+1]*u+t.pos[a+1]*s,z:t.pos[o+2]*u+t.pos[a+2]*s}},this._isolinesForValue=function(t,e){var n,r,i,o,a=e.value,u=Array(t.value.length),l=[];for(n=u.length-1;n>=0;n-=1)u[n]=t.value[n]<=a?0:1;var c=t.verticesPerElement,f="square"===t.shape,h=t.elements,d=h.length;for(r=0;r<d;r+=c){if(f){if(0===(i=8*u[h[r]]+4*u[h[r+1]]+2*u[h[r+2]]+u[h[r+3]])||15===i)continue}else if(16===(i=16+4*u[h[r]]+2*u[h[r+1]]+u[h[r+2]])||23===i)continue;s[i].forEach(function(t){l=m._addSegment(l,[h[r+t.l0],h[r+t.h0]],[h[r+t.l1],h[r+t.h1]])})}return o=l.map(function(n){var r=[];return n.forEach(function(n){var i=m._chainVertex(t,e,n);r.length&&i.x===r[r.length-1].x&&i.y===r[r.length-1].y||r.push(i)}),r.closed=r[0].x===r[r.length-1].x&&r[0].y===r[r.length-1].y,r.value=e.value,r.level=e.level,r.position=e.position,r.label=e.label,r}).filter(function(t){return t.length>1}),o},this.modified=function(){var t=x();return h&&h.modified(),p&&p.modified(),t},this.labelPositions=function(){if(m.dataTime().timestamp()>=m.buildTime().timestamp()&&m._build(),f=null,!p)return m;if(!(c&&c.hasLabels&&c.lines&&c.lines.length))return p.data([]),m;var t=m.isoline,n=t.get("labelSpacing"),r=t.get("labelOffset"),i=t.get("labelViewport")(c.mesh),o=m.gcs(),s=m.layer().map(),u=s.gcs(),l=s.rotation(),h=s.size(),d=[],g=0;return c.lines.forEach(function(t,c){if(t.label){var f,p,m,y,v,x,_,b,w,M,A,E=n(t.value,t.value.position),T=r(t.value,t.value.position)||0,S=s.gcsToDisplay(t,o),C=0;if(!(E<=0||isNaN(E))&&(g=Math.max(E,g),T=T+.5-Math.floor(T+.5),f=S.map(function(e,n){if(!t.closed&&n+1===S.length)return 0;var r=Math.sqrt(a.distance2dSquared(e,S[n+1<S.length?n+1:0]));return C+=r,r}),p=Math.floor(C/E)))for(A=e.transformCoordinates(o,u,t),y=(m=C/p)*T,v=0,x=0;x<S.length;x+=1){for(;v+f[x]>=y;)_=x+1===S.length?0:x+1,w=1-(b=(y-v)/f[x]),y+=m,i>0&&((M={x:S[x].x*w+S[_].x*b,y:S[x].y*w+S[_].y*b}).x<-i||M.x>h.width+i||M.y<-i||M.y>h.height+i)||d.push({x:A[x].x*w+A[_].x*b,y:A[x].y*w+A[_].y*b,z:A[x].z*w+A[_].z*b,line:t,rotation:Math.atan2(S[x].y-S[_].y,S[x].x-S[_].x)-l});v+=f[x]}}}),p.gcs(u),p.data(d),p.style("renderThreshold",2*g),f={zoom:s.zoom(),center:s.center(),rotation:l,size:h,labelViewport:i,maxSpacing:g,labelAutoUpdate:t.get("labelAutoUpdate")(c.mesh)},m},this.lastLabelPositions=function(){return Object.assign({},f)},this._updateLabelPositions=function(){var t=f;if(!t||!t.labelAutoUpdate)return m;var e=m.layer().map(),n=e.zoom(),r=e.size(),i=!!(Math.abs(n-t.zoom)>=2);if(!i&&t.labelViewport>0){var o=Math.sqrt(a.distance2dSquared(e.gcsToDisplay(e.center()),e.gcsToDisplay(t.center)))*Math.pow(2,t.zoom-n),s=t.labelViewport/2-2*t.maxSpacing-Math.max(r.width-t.size.width,r.height-t.size.height,0);i=i||o>=s}return i&&m.labelPositions().draw(),m},this._build=function(){if((c=m._createIsolines())&&c.lines&&c.lines.length){h||(h=m.layer().createFeature("line",{selectionAPI:!1,gcs:m.gcs(),visible:m.visible(void 0,!0),style:{closed:function(t){return t.closed}}}),m.dependentFeatures([h]));var t=m.style();if(h.data(c.lines).style(["antialiasing","lineCap","lineJoin","miterLimit","strokeWidth","strokeStyle","strokeColor","strokeOffset","strokeOpacity"].reduce(function(e,n){return n in t&&(e[n]=t[n]),e},{})),c.hasLabels){if(!p){if(!(o.registries.features[m.layer().rendererName()]||{}).text){var e=o.rendererForFeatures(["text"]);d=o.createLayer("feature",m.layer().map(),{renderer:e}),m.layer().addChild(d),m.layer().node().append(d.node())}p=(d||m.layer()).createFeature("text",{selectionAPI:!1,gcs:m.gcs(),visible:m.visible(void 0,!0),style:{text:function(t){return t.line.label}}}).geoOn(r.pan,m._updateLabelPositions)}l.usedStyles.forEach(function(e){"visible"!==e&&p.style(e,t[e])}),m.dependentFeatures([h,p])}}else h&&h.data([]);return m.buildTime().modified(),m.labelPositions(),m},this._update=function(){return _.call(m),(m.dataTime().timestamp()>=m.buildTime().timestamp()||m.updateTime().timestamp()<=m.timestamp())&&m._build(),m.updateTime().modified(),m},this.draw=function(){var t=g();return h&&h.draw(),p&&p.draw(),t},this._exit=function(){p&&((d||m.layer())&&(d||m.layer()).deleteFeature(p),d&&m.layer()&&m.layer().removeChild(d)),h&&m.layer()&&m.layer().deleteFeature(h),p=null,d=null,h=null,m.dependentFeatures([]),y()},this._init=function(t){t=t||{},v.call(m,t);var e=Object.assign({},{opacity:1,value:function(t,e){return m.position()(t,e).z},rotateWithMap:!0,rotation:u.rotationFunction(),strokeWidth:function(t,e,n,r){return n.level+.5},strokeColor:{r:0,g:0,b:0},textStrokeColor:{r:1,g:1,b:1,a:.75},textStrokeWidth:2,fontSize:"12px"},void 0===t.style?{}:t.style);m.style(e),m.isoline(Object.assign({},{count:15,autofit:!0,levels:[5,5],label:function(t){return t.level>=1},labelSpacing:200,labelViewport:1e4,labelAutoUpdate:!0},t.mesh||{},t.contour||{},t.isoline||{})),(t.mesh||t.contour||t.isoline)&&m.dataTime().modified()},this};u.rotationFunction=function(t,e){var n={higher:function(t){return t.rotation},lower:function(t){return t.rotation+Math.PI},map:function(t){var e=t.rotation,n=a.wrapAngle(e,!0);return(n>Math.PI/2||n<-Math.PI/2)&&(e+=Math.PI),e},screen:function(t){var n=t.rotation,r=a.wrapAngle(n+e.rotation(),!0);return(r>Math.PI/2||r<-Math.PI/2)&&(n+=Math.PI),n}};return n[t]||n.higher},r(u,i),t.exports=u},5156:function(t,e,n){var r=n(4626),i=n(5402),o=n(1275),a=n(1098).checkRenderer,s=n(1098).rendererForFeatures,u=n(1098).rendererForAnnotations,l=function(t){"use strict";if(!(this instanceof l))return new l(t);t=t||{},i.call(this,t);var e,r=n(5616),o=n(77),c=n(2274),f=n(1098).createRenderer,h=n(1098).adjustLayerForRenderer,d=n(6409),p=this,m=this._exit,g=void 0===t.id?l.newLayerId():t.id,y=void 0===t.name?"":t.name,v=void 0===t.map?null:t.map,x=null,_=void 0===t.canvas?null:t.canvas,b=t.renderer instanceof c?t.renderer:null,w=!1,M=void 0!==t.renderer?t.renderer instanceof c?t.renderer.api():t.renderer:t.annotations?u(t.annotations):s(t.features),A=void 0===t.autoshareRenderer||t.autoshareRenderer,E=o(),T=o(),S=void 0===t.sticky||t.sticky,C=void 0===t.active||t.active,k=void 0===t.opacity?1:t.opacity,P=t.attribution||null,O=void 0===t.visible||t.visible,L=void 0===t.selectionAPI||t.selectionAPI;if(M=a(M),!v)throw new Error("Layers must be initialized on a map.");function I(){return(p.parent()||p.map()).children().filter(function(t){return t instanceof l})}if(this.rendererName=function(){return M},this.autoshareRenderer=function(){return A},this.zIndex=function(t,n){return void 0===t?e:(n||I().reverse().forEach(function(e){e!==p&&e.zIndex()===t&&e.zIndex(t+1)}),t!==e&&(e=t,x.css("z-index",e),p.geoTrigger(d.layerMove,{layer:p})),p)},this.moveUp=function(t){var e,n,r,i,o=null;for(void 0===t&&(t=1),i=1,t<0&&(i=-1,t=-t),e=I().sort(function(t,e){return i*(t.zIndex()-e.zIndex())}),n=0;n<e.length;n+=1)if(null===o)e[n]===p&&(o=n);else{if(!(n-o<=t))break;r=p.zIndex(),p.zIndex(e[n].zIndex(),!0),e[n].zIndex(r,!0)}return p},this.moveDown=function(t){return void 0===t&&(t=1),p.moveUp(-t)},this.moveToTop=function(){return p.moveUp(I().length-1)},this.moveToBottom=function(){return p.moveDown(I().length-1)},this.sticky=function(){return S},this.active=function(t){return void 0===t?C:(C!==t&&(C=t,x.toggleClass("active",C)),p)},this.node=function(){return x},this.id=function(t){return void 0===t?g:(g=null===t?l.newLayerId():t,p.modified(),p)},this.name=function(t){return void 0===t?y:(y=t,x.attr("id",y),p.modified(),p)},this.map=function(){return v},this.renderer=function(){return b},this._renderer=function(t){return void 0===t?b:(b=t,p)},this.canvas=function(){return _},this._canvas=function(t){return void 0===t?_:(_=t,p)},this.dataTime=function(){return E},this.updateTime=function(){return T},this.initialized=function(t){return void 0!==t?(w=t,p):w},this.toLocal=function(t){return t},this.fromLocal=function(t){return t},this.attribution=function(t){return void 0!==t?(P=t,p.map().updateAttribution(),p):P},this.visible=function(t){return void 0===t?O:(O!==t&&(O=t,x.toggleClass("hidden",!O),p.modified()),p)},this.selectionAPI=function(t){return void 0===t?L:(L!==t&&(L=t),p)},this._init=function(e){if(w)return p;v.node().append(x);var n=Object.assign({},t);return delete n.map,b?p._canvas(b.canvas()):null===M?(p._renderer(null),p._canvas(x)):_?p._renderer(f(M,p,_,n)):(p._renderer(f(M,p,void 0,n)),p._canvas(b.canvas())),x.toggleClass("active",p.active()),w=!0,e||(p.geoOn(d.resize,function(t){p._update({event:t})}),p.geoOn(d.pan,function(t){p._update({event:t})}),p.geoOn(d.rotate,function(t){p._update({event:t})}),p.geoOn(d.zoom,function(t){p._update({event:t})})),p},this._exit=function(){p.geoOff(),b&&b._exit(),x.off(),x.remove(),t={},p._canvas(null),p._renderer(null),m()},this._update=function(t){return p},this.width=function(){return p.map().size().width},this.height=function(){return p.map().size().height},this.opacity=function(t){return void 0!==t?(k=t,x.css("opacity",k),p):k},(x=r(document.createElement("div"))).addClass("geojs-layer"),x.attr("renderer",M),y&&x.attr("id",y),p.opacity(k),p.visible(O),void 0===t.zIndex){var R=-1;I().forEach(function(t){void 0!==t.zIndex()&&(R=Math.max(R,t.zIndex()))}),t.zIndex=R+1}return p.zIndex(t.zIndex),h("all",p),p};l.newLayerId=function(){"use strict";var t=1;return function(){var e=t;return t+=1,e}}(),l.create=function(t,e){"use strict";if((e=e||{}).type=e.type||"feature",e.renderer=void 0===e.renderer?"webgl":e.renderer,e.renderer=a(e.renderer),!e.renderer)return console.warn("Invalid renderer"),null;var n=t.createLayer(e.type,e);return n?(e.features&&e.features.forEach(function(t){t.data=t.data||e.data,t.feature=o.create(n,t)}),n):(console.warn("Unable to create a layer"),null)},r(l,i),t.exports=l},9281:function(t,e,n){var r=n(4626),i=n(1275),o=n(77),a=n(5325),s=n(642),u=function(t){"use strict";if(!(this instanceof u))return new u(t);t=t||{},i.call(this,t);var e,n=this,r=this._init,l=o();return this.featureType="line",this._subfeatureStyles={lineCap:!0,lineJoin:!0,strokeColor:!0,strokeOffset:!0,strokeOpacity:!0,strokeWidth:!0},this.line=function(t){return void 0===t?n.style("line"):(n.style("line",t),n.dataTime().modified(),n.modified(),n)},this.position=function(t){return void 0===t?n.style("position"):(n.style("position",t),n.dataTime().modified(),n.modified(),n)},this._updatePointSearchInfo=function(){if(l.timestamp()>=n.dataTime().timestamp()&&l.timestamp()>=n.timestamp())return e;l.modified(),e=[];for(var t=n.data(),r=n.line(),i=n.style.get("strokeWidth"),o=s.isFunction(n.style("strokeWidth"))?void 0:i(),u=n.position(),c=n.style.get("closed"),f=s.isFunction(n.style("closed"))?void 0:c(),h=n.style.get("uniformLine"),d=s.isFunction(n.style("uniformLine"))?void 0:h(),p=n.gcs(),m=n.layer().map().gcs(),g=a.onlyInvertedY(p,m),y=0;y<t.length;y+=1){for(var v=t[y],x=void 0===f?c(v,y):f,_=void 0,b=void 0,w=void 0,M=void 0,A=void 0,E=void 0,T=void 0,S=void 0,C=[],k=void 0===d?h(v,y):d,P=r(v,y),O=0;O<P.length;O+=1){var L=P[O],I=u(L,O,v,y);g?I={x:I.x,y:-I.y}:p!==m&&(I=a.transformCoordinates(p,m,I)),void 0===E&&(E={x:I.x,y:I.y}),void 0===T&&(T={x:I.x,y:I.y}),I.x<E.x&&(E.x=I.x),I.x>T.x&&(T.x=I.x),I.y<E.y&&(E.y=I.y),I.y>T.y&&(T.y=I.y),k&&O||(S=void 0===o?i(L,O,v,y):o);var R=Math.ceil(S/2)+2;(void 0===T.r||R>T.r)&&(T.r=R);var D=R*R;_&&C.push({u:I,v:_,r:w>R?w:R,r2:M>D?M:D,i:O,j:b}),_=I,b=O,w=R,M=D,!A&&x&&(A={p:I,r:R,r2:D,i:O})}x&&A&&(_.x!==A.p.x||_.y!==A.p.y)&&C.push({u:_,v:A.p,r:w>A.r?w:A.r,r2:M>A.r2?M:A.r2,i:b,j:A.i}),C.min=E,C.max=T,e.push(C)}return e},this.pointSearch=function(t,r){var i=n.data(),o=[],u=[],l={};if(!i||!i.length||!n.layer())return{found:u,index:o,extra:l};n._updatePointSearchInfo();var c=n.layer().map();r=null===r?c.gcs():void 0===r?c.ingcs():r;var f,h,d,p,m=c.unitsPerPixel(c.zoom()),g=m*m,y=a.transformCoordinates(r,c.gcs(),t),v=n.style.get("strokeWidth"),x=n.style.get("strokeOpacity"),_=n.line();for(h=0;h<e.length;h+=1)for(p=e[h],f=null,d=0;d<p.length;d+=1)if(s.distance2dToLineSquared(y,p[d].u,p[d].v)<=p[d].r2*g&&(f||(f=_(i[h],h)),(x(f[p[d].i],p[d].i,i[h],h)>0||x(f[p[d].j],p[d].j,i[h],h)>0)&&(v(f[p[d].i],p[d].i,i[h],h)>0||v(f[p[d].j],p[d].j,i[h],h)>0))){u.push(i[h]),o.push(h),l[h]=d;break}return{found:u,index:o,extra:l}},this.polygonSearch=function(t,r,i){var o,u,l=n.data(),c=[],f=[],h={},d=n.layer().map(),p=n.style.get("strokeWidth"),m=n.style.get("strokeOpacity"),g=n.line();if(i=null===i?d.gcs():void 0===i?d.ingcs():i,t.outer||(t={outer:t,inner:[]}),!l||!l.length||t.outer.length<3)return{found:f,index:c,extra:h};(r=r||{}).partial=r.partial||!1,(t={outer:a.transformCoordinates(i,d.gcs(),t.outer),inner:(t.inner||[]).map(function(t){return a.transformCoordinates(i,d.gcs(),t)})}).outer.forEach(function(t){o||(o={x:t.x,y:t.y},u={x:t.x,y:t.y}),t.x<o.x&&(o.x=t.x),t.x>u.x&&(u.x=t.x),t.y<o.y&&(o.y=t.y),t.y>u.y&&(u.y=t.y)}),n._updatePointSearchInfo();var y,v,x,_,b,w,M=d.unitsPerPixel(d.zoom());for(y=0;y<e.length;y+=1)if(!(!(x=e[y]).max||x.max.x<o.x-x.max.r*M||x.min.x>u.x+x.max.r*M||x.max.y<o.y-x.max.r*M||x.min.y>u.y+x.max.r*M)){var A=void 0,E=void 0,T=void 0;for(v=0;v<x.length;v+=1)if(_=x[v].u,b=x[v].v,w=x[v].r,!(_.x<o.x-w*M&&b.x<o.x-w*M||_.x>u.x+w*M&&b.x>u.x+w*M||_.y<o.y-w*M&&b.y<o.y-w*M||_.y>u.y+w*M&&b.y>u.y+w*M||(T||(T=g(l[y],y)),m(T[x[v].i],x[v].i,l[y],y)<=0&&m(T[x[v].j],x[v].j,l[y],y)<=0||p(T[x[v].i],x[v].i,l[y],y)<=0&&p(T[x[v].j],x[v].j,l[y],y)<=0))){var S=s.distanceToPolygon2d(_,t),C=s.distanceToPolygon2d(b,t);if(S>-w*M&&S<w*M||C>-w*M&&C<w&M||S*C<0){E=!0;break}if(s.crossedLineSegmentPolygon2d(_,b,t)){E=!0;break}for(var k=w*w*M*M,P=0;P<t.outer.length&&!E;P+=1)E=s.distance2dToLineSquared(t.outer[P],_,b)<k;for(var O=0;O<t.inner.length&&!E;O+=1)for(var L=0;L<t.inner[O].length&&!E;L+=1)E=s.distance2dToLineSquared(t.inner[O][L],_,b)<k;if(E)break;S>0&&(A=!0)}(!r.partial&&A&&!E||r.partial&&(A||E))&&(c.push(y),f.push(l[y]),h[y]={partial:E,segment:v<e[y].length?v:0})}return{found:f,index:c,extra:h}},this.rdpSimplifyData=function(t,e,r,i){t=t||n.data(),r=r||n.style.get("position"),i=i||n.style.get("line");var o=n.layer().map(),u=o.gcs(),l=n.gcs(),c=n.style.get("closed");return void 0===e&&(e=.5*o.unitsPerPixel(o.zoom())),t=t.map(function(t,n){var o=i(t,n),f=a.transformCoordinates(l,u,o.map(function(e,i){return r(e,i,t,n)})),h=s.rdpLineSimplify(f,e,c(t,n),[]);for(var d in(h.length<2||2===h.length&&s.distance2dSquared(h[0],h[1])<e*e)&&(h=[]),h=a.transformCoordinates(u,l,h),t)!t.hasOwnProperty(d)||Array.isArray(t)&&d>=0&&d<t.length||(h[d]=t[d]);return h}),n.style("position",s.identityFunction),n.style("line",s.identityFunction),n.data(t),n},this._init=function(t){t=t||{},r.call(n,t);var e=Object.assign({},{strokeWidth:1,strokeColor:{r:1,g:.8431372549,b:0},strokeStyle:"solid",strokeOpacity:1,antialiasing:2,closed:!1,line:s.identityFunction,position:function(t){return Array.isArray(t)?{x:t[0],y:t[1],z:t[2]||0}:t},origin:function(t){return t.length>=3?t.slice(0,3):[0,0,0]}},void 0===t.style?{}:t.style);return void 0!==t.line&&(e.line=t.line),void 0!==t.position&&(e.position=t.position),n.style(e),n.dataTime().modified(),n},this._init(t),this};u.create=function(t,e){"use strict";return(e=e||{}).type="line",i.create(t,e)},u.capabilities={feature:"line",basic:"line.basic",multicolor:"line.multicolor"},r(u,i),t.exports=u},6211:function(t,e,n){var r=n(5616),i=n(4626),o=n(5402),a=function(t){"use strict";if(!(this instanceof a))return new a(t);if(void 0===(t=t||{}).node||null===t.node)return console.warn("map creation requires a node"),this;o.call(this,t);var e,i,s,u,l,c=n(3578),f=n(5325),h=n(642),d=n(1098),p=n(6409),m=n(7908),g=n(4231),y=this,v=this._exit,x=r(t.node),_=t.width||x.width()||512,b=t.height||x.height()||512,w=void 0===t.gcs?"EPSG:3857":t.gcs,M=void 0===t.ingcs?"EPSG:4326":t.ingcs,A={x:0,y:0},E=void 0===t.zoom?4:t.zoom,T=t.rotation?t.rotation:0,S=null,C=null,k={min:0,max:16,origMin:0},P=null,O=null,L=!!t.discreteZoom,I="function"==typeof t.allowRotation?t.allowRotation:void 0===t.allowRotation||!!t.allowRotation,R=t.maxBounds||{},D=t.camera||c(),N=t.animationQueue||[],F=void 0===t.autoResize||t.autoResize,j=t.autoshareRenderer,z=((R.left||0)+(R.right||0))/2,G=((R.bottom||0)+(R.top||0))/2;function B(){var t;void 0!==document.hidden?t="hidden":void 0!==document.msHidden?t="msHidden":void 0!==document.webkitHidden&&(t="webkitHidden"),y.geoTrigger(document[t]?p.hidden:p.unhidden)}function V(t){var e;void 0!==document.hidden?e="visibilitychange":void 0!==document.msHidden?e="msvisibilitychange":void 0!==document.webkitHidden&&(e="webkitvisibilitychange"),document.removeEventListener(e,B),!1!==t&&document.addEventListener(e,B)}function q(t,e){var n=t.zIndex(),r=e.zIndex();if(n!==r)return n-r;var i=t.node()[0],o=e.node()[0],a=i&&i.parentNode,s=o&&o.parentNode;if(a&&s&&a===s){var u=Array.from(a.children),l=u.indexOf(i),c=u.indexOf(o);if(l>=0&&c>=0)return l-c}return a?-1:s?1:0}function U(t,e,n,r,i){t.globalAlpha=e,i&&(t.globalCompositeOperation=i);var o=n.css("transform");o&&"matrix("===o.substr(0,7)?t.setTransform.apply(t,o.substr(7,o.length-8).split(",").map(parseFloat)):t.setTransform(1,0,0,1,0,0),t.drawImage(r,0,0),t.globalCompositeOperation="source-over"}function H(){for(var t=N.splice(0,N.length),e=1;e<t.length;e+=1)try{t[e].apply(y,arguments)}catch(t){console.error(t)}}function W(t,e,n){var r=e.width/2,i=e.height/2,o=Math.sin(n),a=Math.cos(n),s={},u={},l={},c={};return s.x=t.x+-r*a- -i*o,s.y=t.y+-r*o+-i*a,u.x=t.x+r*a- -i*o,u.y=t.y+r*o+-i*a,l.x=t.x+-r*a-i*o,l.y=t.y+-r*o+i*a,c.x=t.x+r*a-i*o,c.y=t.y+r*o+i*a,{left:Math.min(s.x,u.x,l.x,c.x),right:Math.max(s.x,u.x,l.x,c.x),bottom:Math.min(s.y,u.y,l.y,c.y),top:Math.max(s.y,u.y,l.y,c.y)}}function X(t,n){void 0===n&&(n=T),t=function(t,e){return e&&(t=W({x:(t.left+t.right)/2,y:(t.top+t.bottom)/2},{width:Math.abs(t.left-t.right),height:Math.abs(t.top-t.bottom)},e)),t}(t,n);var r=function(t){var e,n,r=t.right-t.left,i=t.top-t.bottom,o=Math.abs(r/i),a=_/b;return o>a?(e=1,n=o/a):(n=1,e=a/o),{x:e,y:n}}(t);return r.y>r.x?-Math.log2(Math.abs(t.right-t.left)*r.x/(_*e)):-Math.log2(Math.abs(t.top-t.bottom)*r.y/(b*e))}function K(){k.min=u?Math.max(k.origMin,X(R)):k.origMin}function Q(t,e,n){if(!I)return 0;if(e||"function"!=typeof I||(t=I(t)),!n){var r=2*Math.PI;t=t%r+(t>=0?0:r),Math.min(Math.abs(t),Math.abs(t-r))<1e-5&&(t=0)}return t}function Y(t,e,n,r){if(!i&&!s)return t;var o,a,u=R;if(e){u=Object.assign({},R);var l,c,f=Math.abs(t.right-t.left),h=Math.abs(t.top-t.bottom),d=Math.abs(Math.sin(e)),p=Math.abs(Math.cos(e));if(t.width&&t.height)l=t.width,c=t.height;else if(Math.abs(d-p)<5e-4)if(_&&b){var m=Math.abs(_/b),g=Math.pow(1+Math.pow(m,2),.5);c=(l=Math.max(f,h)/g)*m}else l=f*p,c=h*d;else l=(p*f-d*h)/(p*p-d*d),c=(p*h-d*f)/(p*p-d*d);var y=f-Math.max(p*l,d*c),v=h-Math.max(p*c,d*l);u.left-=y,u.right+=y,u.top+=v,u.bottom-=v}return r&&(u={left:u.left-(t.right-t.left)/2,right:u.right+(t.right-t.left)/2,top:u.top-(t.bottom-t.top)/2,bottom:u.bottom+(t.bottom-t.top)/2}),i&&(t.right-t.left>u.right-u.left?o=u.left-(t.right-t.left-(u.right-u.left))/2-t.left:t.left<u.left?o=u.left-t.left:t.right>u.right&&(o=u.right-t.right),o&&(!n||n.x*o>0)&&(n&&Math.abs(o)>Math.abs(n.x*n.unit)&&(o=Math.abs(n.x*n.unit)*o/Math.abs(o)),t={left:t.left+=o,right:t.right+=o,top:t.top,bottom:t.bottom})),s&&(t.top-t.bottom>u.top-u.bottom?a=u.bottom-(t.top-t.bottom-(u.top-u.bottom))/2-t.bottom:t.top>u.top?a=u.top-t.top:t.bottom<u.bottom&&(a=u.bottom-t.bottom),a&&(!n||-n.y*a>0)&&(n&&Math.abs(a)>Math.abs(n.y*n.unit)&&(a=Math.abs(n.y*n.unit)*a/Math.abs(a)),t={top:t.top+=a,bottom:t.bottom+=a,left:t.left,right:t.right})),t}function $(t,e){if(D.rotation=e||0,t.width&&t.height&&e){var n=(t.left+t.right)/2,r=(t.top+t.bottom)/2;D.viewFromCenterSizeRotation({x:n,y:r},t,e)}else D.bounds=t;A={x:(D.bounds.left+D.bounds.right)/2,y:(D.bounds.top+D.bounds.bottom)/2}}function Z(){y.size({width:x.width(),height:x.height()})}return R.left=f.transformCoordinates(R.gcs||M,w,{x:void 0!==R.left?R.left:-180,y:G}).x,R.right=f.transformCoordinates(R.gcs||M,w,{x:void 0!==R.right?R.right:180,y:G}).x,R.top=void 0!==R.top?f.transformCoordinates(R.gcs||M,w,{x:z,y:R.top}).y:R.right,R.bottom=void 0!==R.bottom?f.transformCoordinates(R.gcs||M,w,{x:z,y:R.bottom}).y:R.left,e=t.unitsPerPixel||(R.right-R.left)/256,D.viewport={width:_,height:b,left:x.offset().left,top:x.offset().top},t.center=h.normalizeCoordinates(t.center),i=void 0!==t.clampBoundsX&&t.clampBoundsX,s=void 0===t.clampBoundsY||t.clampBoundsY,u=void 0===t.clampZoom||t.clampZoom,this.unitsPerPixel=function(t,n){return t=t||0,n?(e=Math.pow(2,t)*n,y.draw(),y):Math.pow(2,-t)*e},this.animationQueue=function(t){if(void 0===t)return N;if(t!==N){if(N.length){t.length&&t[0]!==N[0]&&window.cancelAnimationFrame(N[0]);for(var e=t.length?1:0;e<N.length;e+=1)t.push(N[e])}N=t}return y},this.autoResize=function(t){return void 0===t?F:(t!==F&&(r(window).off("resize",Z),(F=t)&&r(window).on("resize",Z)),y)},this.clampBoundsX=function(t){return void 0===t?i:(t!==i&&(i=!!t,y.pan({x:0,y:0})),y)},this.clampBoundsY=function(t){return void 0===t?s:(t!==s&&(s=!!t,y.pan({x:0,y:0})),y)},this.clampZoom=function(t){return void 0===t?u:(t!==u&&(u=!!t,K(),y.zoom(E)),y)},this.allowRotation=function(t){return void 0===t?I:("function"!=typeof t&&(t=!!t),t!==I&&(I=t,y.rotation(T)),y)},this.origin=function(){return Object.assign({},l)},this.camera=function(){return D},this.gcs=function(t){if(void 0===t)return w;if(t!==w){var e=y.center(void 0,void 0);w=t,K();var n=y._fix_zoom(E);n!==E&&y.zoom(n),y.center(e,void 0)}return y},this.ingcs=function(t){return void 0===t?M:(M=t,y)},this.node=function(){return x},this.zoom=function(t,e,n,r,i){if(void 0===t)return E;var o,a,s=e&&(e.mapgcs||e.geo)&&e.map;if(s&&(r=!0),(t=y._fix_zoom(t,n))===E)return y;if(E=t,a=y.boundsFromZoomAndCenter(t,A,T,null,n,r),y.modified(),$(a,T),o={zoomLevel:E,screenPosition:e?e.map:void 0},i&&"pan"!==i||y.geoTrigger(p.zoom,o),s){var u=y.gcsToDisplay(e.mapgcs||e.geo,e.mapgcs?null:void 0);y.pan({x:e.map.x-u.x,y:e.map.y-u.y},n,!0,i)}else y.pan({x:0,y:0},n,r,i);return y},this.zoomAndCenter=function(t,e,n,r,i,o){return this.zoom(t,void 0,r,i,o||"pan"),this.center(e,n,r,i,o),this},this.pan=function(t,e,n,r){var i={screenDelta:t};if(t.x||t.y){var o=y.unitsPerPixel(E),a=Math.sin(T),s=Math.cos(T);D.pan({x:(t.x*s- -t.y*a)*o,y:(t.x*a+-t.y*s)*o})}var u=D.bounds;if((u=Y(u,T,"limited"===n?{x:t.x,y:t.y,unit:o}:void 0,!0===n))!==D.bounds){var l=y.gcsToDisplay({x:D.bounds.left,y:D.bounds.top},null);$(u=y.boundsFromZoomAndCenter(E,{x:(u.left+u.right)/2,y:(u.top+u.bottom)/2},T,null,e,!0),T);var c=y.gcsToDisplay({x:D.bounds.left,y:D.bounds.top},null);i.screenDelta.x+=c.x-l.x,i.screenDelta.y+=c.y-l.y}return A=D.displayToWorld({x:_/2,y:b/2}),r||y.geoTrigger(p.pan,i),y.modified(),y},this.rotation=function(t,e,n){if(void 0===t)return T;var r=e&&e.geo&&e.map;if((t=Q(t,n))===T)return y;T=t;var i=y.boundsFromZoomAndCenter(E,A,T,null,n,!0);y.modified(),$(i,T);var o={rotation:T,screenPosition:e?e.map:void 0};if(y.geoTrigger(p.rotate,o),r){var a=y.gcsToDisplay(e.geo);y.pan({x:e.map.x-a.x,y:e.map.y-a.y},void 0,!0)}else y.pan({x:0,y:0},void 0,!0);return K(),y.zoom(E,void 0,n),y},this.center=function(t,e,n,r,i){var o;return void 0===t?o=Object.assign({},y.worldToGcs(A,e)):(o=y.gcsToWorld(t,e),$(y.boundsFromZoomAndCenter(E,o,T,null,n,r),T),y.modified(),i||y.geoTrigger(p.pan,{screenDelta:{x:0,y:0}}),y)},this.createLayer=function(t,e){e=e||{},void 0!==y.autoshareRenderer()&&(e=Object.assign({autoshareRenderer:y.autoshareRenderer()},e));var n=d.createLayer(t,y,e);return n&&(y.addChild(n),y.children().forEach(function(t){t instanceof g&&t.moveToTop()}),n._update(),y.modified(),y.geoTrigger(p.layerAdd,{target:y,layer:n})),n},this.deleteLayer=function(t){return null!=t&&(t._exit(),y.removeChild(t),y.modified(),y.geoTrigger(p.layerRemove,{target:y,layer:t})),t},this.size=function(t){if(void 0===t)return{width:_,height:b};var e=y.center();_=t.width||_,b=t.height||b,K();var n=y._fix_zoom(E);return n!==E&&y.zoom(n),y.camera().viewport={width:_,height:b,left:x.offset().left,top:x.offset().top},y.center(e),y.geoTrigger(p.resize,{target:y,width:_,height:b}),y.modified(),y},this.rotatedSize=function(){if(!this.rotation())return{width:_,height:b};var t=W({x:0,y:0},{width:_,height:b},y.rotation());return{width:Math.abs(t.right-t.left),height:Math.abs(t.top-t.bottom)}},this.gcsToWorld=function(t,e){return Array.isArray(t)?t.map(function(t){return y.gcsToWorld(t,e)}):((e=null===e?w:void 0===e?M:e)!==w&&(t=f.transformCoordinates(e,w,t)),l.x||l.y||l.z?t=f.affineForward({origin:l},[t])[0]:"z"in t||(t={x:t.x,y:t.y,z:0}),t)},this.worldToGcs=function(t,e){return Array.isArray(t)?t.map(function(t){return y.worldToGcs(t,e)}):(l.x||l.y||l.z?t=f.affineInverse({origin:l},[t])[0]:"z"in t||(t={x:t.x,y:t.y,z:0}),(e=null===e?w:void 0===e?M:e)!==w&&(t=f.transformCoordinates(w,e,t)),t)},this.gcsToDisplay=function(t,e){return t=y.gcsToWorld(t,e),y.worldToDisplay(t)},this.worldToDisplay=function(t){return Array.isArray(t)?t.map(function(t){return D.worldToDisplay(t)}):D.worldToDisplay(t)},this.displayToGcs=function(t,e){return t=y.displayToWorld(t),y.worldToGcs(t,e)},this.displayToWorld=function(t){return Array.isArray(t)?t.map(function(t){return D.displayToWorld(t)}):D.displayToWorld(t)},this.draw=function(){var t,e=y.children();for(y.geoTrigger(p.draw,{target:y}),y._update(),t=0;t<e.length;t+=1)e[t].draw();return y.geoTrigger(p.drawEnd,{target:y}),y},this.fileReader=function(t,e){return void 0===t?S:("string"==typeof t?((e=e||{}).layer||(e.layer=y.createLayer("feature",Object.assign({},e))),e.renderer=e.layer.renderer().api(),S=d.createFileReader(t,e)):S=t,y)},this._init=function(t){if(null==x)throw new Error("Map require DIV node");return x.data("data-geojs-map")&&r.isFunction(x.data("data-geojs-map").exit)&&x.data("data-geojs-map").exit(),x.addClass("geojs-map"),x.data("data-geojs-map",y),V(),y},this._update=function(t){var e,n=y.children();for(e=0;e<n.length;e+=1)n[e]._update(t);return y},this.exit=function(){V(!1);var t,e=y.children();for(t=e.length-1;t>=0;t-=1)e[t]._exit(),y.removeChild(e[t]);y.interactor()&&(y.interactor().destroy(),y.interactor(null)),N=[],y.node().data("data-geojs-map",null),y.node().off(".geo"),y.node().empty(),r(window).off("resize",Z),v()},this.interactor=function(t){return void 0===t?C:(C&&C!==t&&C.destroy(),(C=t)&&(x.attr("tabindex")||x.attr("tabindex",0),C.map(y)),y)},this.zoomRange=function(t,e){return void 0===t?Object.assign({},k):(void 0!==t.max&&(k.max=t.max),void 0!==t.min&&(k.min=k.origMin=t.min),K(),e||y.zoom(E),y)},this.transition=function(t,e,n){if(void 0===t)return P;if(P){var i=h.deepMerge({},P.end);return i.center&&w!==M&&(i.center=f.transformCoordinates(w,M,i.center)),O=Object.assign({},i||{},O||{},t),y}var o=y.unitsPerPixel(0);function a(t){return Math.pow(2,-(t+1))*o*b}var s={center:void 0,zoom:y.zoom(),rotation:y.rotation(),duration:1e3,ease:function(t){return t},interp:function(t,e){return function(n){var i=[];return r.each(t,function(r){i.push(function(t,e,n){return t+(e-t)*n}(t[r],e[r],n))}),i}},done:null,zCoord:!0};function u(e){var n=P.done,r=O;if(!0===P.cancel)return y.geoTrigger(p.transitioncancel,t),n&&n({cancel:!0,source:P.cancelSource,transition:P}),P=null,void(O&&(r=O,O=null,y.transition(r,void 0,e)));if(P.start.time||(P.start.time=e,P.end.time=e+t.duration),P.time=e-P.start.time,e>=P.end.time||r){if(!r){if(P.end.center){var i=E!==y._fix_zoom(P.end.zoom)||!1===t.endClamp;y.center(P.end.center,null,i,i)}y.zoom(P.end.zoom,P.zoomOrigin,!1===t.endClamp,!1===t.endClamp),y.rotation(Q(P.end.rotation))}return y.geoTrigger(p.transitionend,t),n&&n({next:!!r}),P=null,void(O&&(r=O,O=null,y.transition(r,void 0,e)))}var a=P.ease((e-P.start.time)/t.duration),s=P.interp(a);P.zCoord&&(s[2]=function(t){return-Math.log2(t/o/b)-1}(s[2])),y._fix_zoom(s[2],!0)===E?y.center({x:s[0],y:s[1]},null,!0,!0):(A=y.gcsToWorld({x:s[0],y:s[1]},null),y.zoom(s[2],P.zoomOrigin,!0,!0)),y.rotation(s[3],void 0,!0),y.scheduleAnimationFrame(u)}return t.center&&(e=null===e?w:void 0===e?M:e,(t=h.deepMerge({},t)).center=h.normalizeCoordinates(t.center),e!==w&&(t.center=f.transformCoordinates(e,w,t.center))),t=h.deepMerge({},s,t),(P={start:{center:y.center(void 0,null),zoom:y.zoom(),rotation:y.rotation()},end:{center:t.center,zoom:y._fix_zoom(t.zoom),rotation:Q(t.rotation,void 0,!0)},ease:t.ease,zCoord:t.zCoord,done:t.done,duration:t.duration,zoomOrigin:t.zoomOrigin,endClamp:t.endClamp}).interp=t.interp([P.start.center.x,P.start.center.y,t.zCoord?a(P.start.zoom):P.start.zoom,P.start.rotation],[P.end.center?P.end.center.x:P.start.center.x,P.end.center?P.end.center.y:P.start.center.y,t.zCoord?a(P.end.zoom):P.end.zoom,P.end.rotation]),y.geoTrigger(p.transitionstart,t),p.cancelNavigation?(P=null,y.geoTrigger(p.transitionend,t),y):(p.cancelAnimation?(t.duration=0,u(0)):n?u(n):y.scheduleAnimationFrame(u),y)},this.transitionCancel=function(t){return!(!P||!0===P.cancel&&!O)&&(P.cancel=!0,P.cancelSource=t||P.cancelSource||"",O=null,!0)},this.bounds=function(t,e){var n;if(e=null===e?w:void 0===e?M:e,void 0!==t){if(e!==w){var r=f.transformCoordinates(e,w,[{x:t.left,y:t.top},{x:t.right,y:t.bottom}]);t={left:r[0].x,top:r[0].y,right:r[1].x,bottom:r[1].y}}t=Y(t,T),n=y.zoomAndCenterFromBounds(t,T,null),y.zoom(n.zoom,void 0,void 0,void 0,"pan"),y.center(n.center,null)}return y.boundsFromZoomAndCenter(E,A,T,e,!0,!0)},this.maxBounds=function(t,e){if(e=null===e?w:void 0===e?M:e,void 0===t)return{left:f.transformCoordinates(w,e,{x:R.left,y:0}).x,right:f.transformCoordinates(w,e,{x:R.right,y:0}).x,bottom:f.transformCoordinates(w,e,{x:0,y:R.bottom}).y,top:f.transformCoordinates(w,e,{x:0,y:R.top}).y};var n=((t.left||0)+(t.right||0))/2,r=((t.bottom||0)+(t.top||0))/2;return void 0!==t.left&&(R.left=f.transformCoordinates(e,w,{x:t.left,y:r}).x),void 0!==t.right&&(R.right=f.transformCoordinates(e,w,{x:t.right,y:r}).x),void 0!==t.bottom&&(R.bottom=f.transformCoordinates(e,w,{x:n,y:t.bottom}).y),void 0!==t.top&&(R.top=f.transformCoordinates(e,w,{x:n,y:t.top}).y),K(),y.zoom(E),y.pan({x:0,y:0}),y},this.corners=function(t){return[y.displayToGcs({x:0,y:0},t),y.displayToGcs({x:_,y:0},t),y.displayToGcs({x:_,y:b},t),y.displayToGcs({x:0,y:b},t)]},this.zoomAndCenterFromBounds=function(t,e,n){var r,i;if((n=null===n?w:void 0===n?M:n)!==w){var o=f.transformCoordinates(n,w,[{x:t.left,y:t.top},{x:t.right,y:t.bottom}]);t={left:o[0].x,top:o[0].y,right:o[1].x,bottom:o[1].y}}if(t.left>=t.right||t.bottom>=t.top)throw new Error("Invalid bounds provided");return i=y._fix_zoom(X(t,e)),r={x:((t=Y(t,e)).left+t.right)/2-l.x,y:(t.top+t.bottom)/2-l.y},n!==w&&(r=f.transformCoordinates(w,n,r)),{zoom:i,center:r}},this.boundsFromZoomAndCenter=function(t,e,n,r,i,o){var a,s,u,c,h,d;if(r=null===r?w:void 0===r?M:r,t=y._fix_zoom(t,i),d=y.unitsPerPixel(t),e=y.gcsToWorld(e,null),u=(a=_*d)/2,c=(s=b*d)/2,n?(e.x+=l.x,e.y+=l.y,(h=W(e,{width:a,height:s},n)).width=a,h.height=s,h=Y(h,n,void 0,o)):h=Y(h={left:e.x-u+l.x,right:e.x+u+l.x,bottom:e.y-c+l.y,top:e.y+c+l.y},0,void 0,o),r!==w){var p=f.transformCoordinates(w,r,[[h.left,h.top],[h.right,h.bottom]]);h={left:p[0][0],top:p[0][1],right:p[1][0],bottom:p[1][1]}}return h.width=a,h.height=s,h},this.discreteZoom=function(t){return void 0===t?L:(L!==(t=!!t)&&((L=t)&&y.zoom(Math.round(y.zoom())),y.interactor()&&y.interactor().options({discreteZoom:L})),y)},this.layers=this.children,this.sortedLayers=function(){return y.children().sort(q)},this.listSceneObjects=function(t){var e=[];return(t=t||y.sortedLayers()).forEach(function(t){if(e.indexOf(t)<0&&(e.push(t),t.children)){var n=t.children();n.length&&(e=e.concat(y.listSceneObjects(n)))}}),e},this.updateAttribution=function(){y.node().find(".geo-attribution").remove();var t=r("<div/>").addClass("geo-attribution").on("mousedown",function(t){t.stopPropagation()});return y.children().forEach(function(e){var n=e.attribution();n&&r("<span/>").addClass("geo-attribution-layer").html(n).appendTo(t)}),r("span",t).length&&t.appendTo(y.node()),y},this.screenshot=function(t,e,n,i){var o;if(!t||Array.isArray(t)||t.renderer||(e=e||t.type,n=n||t.encoderOptions,i=i||t,t=t.layers),(i=i||{}).wait){var a=Object.assign({},i,{wait:!1});o=r.Deferred();var s=function(){window.requestAnimationFrame(function(){o.resolve()})};return"idle"===i.wait?y.onIdle(s):s(),o.then(function(){return y.screenshot(t,e,n,a)})}o=r.when(),t?Array.isArray(t)||(t=[t]):(t=y.layers(),null!==i.attribution&&void 0!==i.attribution||(i.attribution=!0)),t=(t=t.filter(function(t){return y.layers().indexOf(t)>=0&&t.opacity()>0&&(!t.visible||t.visible())})).sort(q);var u=document.createElement("canvas");u.width=_,u.height=b;var l=u.getContext("2d");if(!1!==i.background&&null!==i.background){var c=i.background;void 0===i.background&&(l.fillStyle="white",l.fillRect(0,0,u.width,u.height),y.node().parents().get().reverse().forEach(function(t){(c=window.getComputedStyle(t).backgroundColor)&&"transparent"!==c&&(l.fillStyle=c,l.fillRect(0,0,u.width,u.height))}),c=window.getComputedStyle(y.node()[0]).backgroundColor),c&&"transparent"!==c&&(l.fillStyle=c,l.fillRect(0,0,u.width,u.height))}return t.forEach(function(t){var e=t.opacity();t.node().children("canvas").each(function(){var n=r(this);o=o.then(function(){t.renderer()&&"webgl"===t.renderer().api()&&t.renderer()._renderFrame(),U(l,e,n,n[0],t.node().css("mix-blend-mode"))})}),!t.node().children().not("canvas").length&&t.node().children().length||t.renderer()&&"webgl"===t.renderer().api()||(o=o.then(function(){return h.htmlToImage(t.node(),1).done(function(e){U(l,1,r([]),e,t.node().css("mix-blend-mode"))})}))}),i.attribution&&y.node().find(".geo-attribution").each(function(){var t=r(this);o=o.then(function(){return h.htmlToImage(t,1).done(function(t){U(l,1,r([]),t)})})}),i.html&&r(i.html).each(function(){var t=r(this);o=o.then(function(){return h.htmlToImage(t,1).done(function(e){U(l,1,r([]),e,t.css("mix-blend-mode"))})})}),o=o.then(function(){var t=u;if("canvas"!==e)try{u=u.toDataURL(e,n)}catch(t){console.warn("Failed to convert screenshot to output",t);var i=r.Deferred();return i.reject(),i}return y.geoTrigger(p.screenshot.ready,{canvas:t,screenshot:u}),u})},this.scheduleAnimationFrame=function(t,e){N.length||N.push(window.requestAnimationFrame(H));var n=N.indexOf(t,1);if(n>=0){if(!e)return;if(N.splice(n,1),"remove"===e)return}return N.push(t),N[0]},this._fix_zoom=function(t,e){return t=Math.round(1e6*t)/1e6,t=Math.max(Math.min(k.max,t),k.min),L&&!e&&(t=Math.round(t))<k.min&&(t=Math.ceil(k.min)),t},this.autoshareRenderer=function(t){return void 0===t?j:(j=null===t?void 0:t,y)},this._version=n(4081),this._geo=n(2257),this._init(t),this.node().on("dragover.geo",function(t){var e=t.originalEvent;y.fileReader()&&(e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy")}).on("drop.geo",function(t){var e,n,r=t.originalEvent,i=y.fileReader();function o(){y.draw()}if(i)for(r.stopPropagation(),r.preventDefault(),e=0;e<r.dataTransfer.files.length;e+=1)n=r.dataTransfer.files[e],i.canRead(n)&&i.read(n,o)}),l={x:0,y:0},this.zoomRange(t,!0),E=this._fix_zoom(E),T=Q(T),this.center(Object.assign({},t.center||A),void 0),null!==t.interactor&&this.interactor(t.interactor||m({discreteZoom:L})),F&&r(window).on("resize",Z),y.geoOn([p.layerAdd,p.layerRemove],y.updateAttribution),this};a.create=function(t){"use strict";var e=a(t),r=n(5156);return e&&e.zoom?(t.data=t.data||[],t.layers=t.layers||[],t.layers.forEach(function(n){n.data=n.data||t.data,n.layer=r.create(e,n)}),e):(console.warn("Could not create map."),null)},i(a,o),t.exports=a},7908:function(t,e,n){var r=n(4626),i=n(1338),o=n(642),a=n(7549),s=function(t){"use strict";if(!(this instanceof s))return new s(t);i.call(this);var e,r,u,l,c,f,h,d,p,m,g=n(5616),y=n(6409),v=n(8695),x=n(642).throttle,_=n(642).debounce,b=n(642).actionMatch,w=n(3842),M=this,A=0,E=null,T=!1,S=!1,C=function(){};function k(t){var e=t.x,n=t.y;return Math.sqrt(e*e+n*n)}function P(){f={boundDocumentHandlers:f.boundDocumentHandlers}}function O(t,n){n=n<=0?30:n;var r=function(){var t,n,r,i;if(!e.spring.enabled)return{x:0,y:0};var o=M.map().maxBounds(void 0,null),a=M.map().gcsToDisplay({x:o.left,y:o.top},null),s=M.map().gcsToDisplay({x:o.right,y:o.bottom},null),u=e.spring.springConstant,l=M.map().node().width(),c=M.map().node().height();return t=u*Math.max(0,a.x),n=u*Math.max(0,l-s.x),r=u*Math.max(0,a.y)/2,i=u*Math.max(0,c-s.y)/2,{x:t-n,y:r-i}}(),i=k(t),o=t.x/i,a=t.y/i;return i*=Math.exp(-e.momentum.drag*n),k(r)*n+i<e.momentum.minSpeed?null:(i>0?(o*=i,a*=i):(o=0,a=0),{x:o-r.x*n,y:a-r.y*n})}return e=o.deepMerge({},{throttle:30,discreteZoom:!1,actions:[{action:v.pan,input:"left",modifiers:{shift:!1,ctrl:!1},owner:"geo.mapInteractor",name:"button pan"},{action:v.zoom,input:"right",modifiers:{shift:!1,ctrl:!1},owner:"geo.mapInteractor",name:"button zoom"},{action:v.zoom,input:"wheel",modifiers:{shift:!1},owner:"geo.mapInteractor",name:"wheel zoom"},{action:v.rotate,input:"left",modifiers:{shift:!1,ctrl:!0},owner:"geo.mapInteractor",name:"button rotate"},{action:v.rotate,input:"wheel",modifiers:{shift:!0,ctrl:!1},owner:"geo.mapInteractor",name:"wheel rotate"},{action:v.select,input:"left",modifiers:{shift:!0,ctrl:!0},selectionRectangle:y.select,owner:"geo.mapInteractor",name:"drag select"},{action:v.zoomselect,input:"left",modifiers:{shift:!0,ctrl:!1},selectionRectangle:y.zoomselect,owner:"geo.mapInteractor",name:"drag zoom"},{action:v.unzoomselect,input:"right",modifiers:{shift:!0,ctrl:!1},selectionRectangle:y.unzoomselect,owner:"geo.mapInteractor",name:"drag unzoom"},{action:v.pan,input:"pan",owner:"geo.mapInteractor",name:"touch pan"},{action:v.zoomrotate,input:"rotate",owner:"geo.mapInteractor",name:"touch zoom and rotate"},{action:v.pan,input:"middle",modifiers:{shift:!1,ctrl:!1},owner:"geo.mapInteractor",name:"button pan"}],click:{enabled:!0,buttons:{left:!0,right:!0,middle:!0},duration:0,cancelOnMove:!0},keyboard:{actions:{"zoom.in":["plus","shift+plus","shift+ctrl+plus","=","shift+=","shift+ctrl+="],"zoom.out":["-","shift+-","shift+ctrl+-","_","shift+_","shift+ctrl+_"],"zoom.0":["1"],"zoom.3":["2"],"zoom.6":["3"],"zoom.9":["4"],"zoom.12":["5"],"zoom.15":["6"],"zoom.18":["7"],"pan.left":["left","shift+left","shift+ctrl+left"],"pan.right":["right","shift+right","shift+ctrl+right"],"pan.up":["up","shift+up","shift+ctrl+up"],"pan.down":["down","shift+down","shift+ctrl+down"],"rotate.ccw":["<","shift+<","shift+ctrl+<",".","shift+.","shift+ctrl+."],"rotate.cw":[">","shift+>","shift+ctrl+>",",","shift+,","shift+ctrl+,"],"rotate.0":["0"]},meta:{0:{shift:!1,ctrl:!1},1:{shift:!0,ctrl:!0},2:{shift:!0,ctrl:!1}},metakeyMouseEvents:["shift","ctrl","shift+ctrl","shift+alt","shift+meta"],focusHighlight:!0},alwaysTouch:!1,wheelScaleX:1,wheelScaleY:1,zoomScale:1,rotateWheelScale:6*Math.PI/180,zoomrotateMinimumRotation:5*Math.PI/180,zoomrotateReverseRotation:4*Math.PI/180,zoomrotateMinimumZoom:.05,zoomrotateMinimumPan:5,touchPanDelay:50,momentum:{enabled:!0,maxSpeed:2.5,minSpeed:.01,stopTime:250,drag:.01,actions:[v.pan,v.zoom]},spring:{enabled:!1,springConstant:5e-5},zoomAnimation:{enabled:!0,duration:500,ease:function(t){return(2-t)*t}}},t||{}),t&&t.actions&&(e.actions=o.deepMerge([],t.actions)),t&&t.momentum&&t.momentum.actions&&(e.momentum.actions=o.deepMerge([],t.momentum.actions)),t&&t.keyboard&&void 0!==t.keyboard.actions&&(e.keyboard.actions=o.deepMerge({},t.keyboard.actions)),r={page:{x:0,y:0},map:{x:0,y:0},geo:{x:0,y:0},mapgcs:{x:0,y:0},buttons:{left:!1,right:!1,middle:!1},modifiers:{alt:!1,ctrl:!1,shift:!1,meta:!1},time:new Date,deltaTime:1,velocity:{x:0,y:0}},f={},h={},this._handleKeys=function(t,n,r){r&&!0===r.simulated&&(n=r);var i,o,a=e.keyboard.meta||{0:{}},s=M.map(),u=s.size(),l=t,c="",f={};for(i in a)a.hasOwnProperty(i)&&(void 0!==a[i].shift&&n.shiftKey!==!!a[i].shift||void 0!==a[i].ctrl&&n.ctrlKey!==!!a[i].ctrl||void 0!==a[i].alt&&n.altKey!==!!a[i].alt||void 0!==a[i].meta&&n.metaKey!==!!a[i].meta||(o=i));if(void 0!==o){switch(n.stopPropagation(),n.preventDefault(),t.indexOf(".")>=0&&(l=t.substr(0,t.indexOf(".")),c=t.substr(t.indexOf(".")+1)),l){case"zoom":switch(c){case"in":f.zoomDelta=[.05,.25,1][o];break;case"out":f.zoomDelta=-[.05,.25,1][o];break;default:isNaN(parseFloat(c))||(f.zoom=parseFloat(c))}break;case"pan":switch(c){case"down":f.panY=-Math.max(1,[0,.05,.5][o]*u.height);break;case"left":f.panX=Math.max(1,[0,.05,.5][o]*u.width);break;case"right":f.panX=-Math.max(1,[0,.05,.5][o]*u.width);break;case"up":f.panY=Math.max(1,[0,.05,.5][o]*u.height)}break;case"rotate":switch(c){case"ccw":f.rotationDelta=[1,5,90][o]*Math.PI/180;break;case"cw":f.rotationDelta=-[1,5,90][o]*Math.PI/180;break;default:isNaN(parseFloat(c))||(f.rotation=parseFloat(c))}}s.geoTrigger(y.keyaction,{move:f,action:t,factor:o,event:n}),f.cancel||(void 0!==f.zoom?s.zoom(f.zoom):f.zoomDelta&&s.zoom(s.zoom()+f.zoomDelta),void 0!==f.rotation?s.rotation(f.rotation):f.rotationDelta&&s.rotation(s.rotation()+f.rotationDelta),(f.panX||f.panY)&&s.pan({x:f.panX||0,y:f.panY||0}))}},this.hasTouchSupport=function(){return"ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof window.DocumentTouch||(navigator.msMaxTouchPoints||navigator.maxTouchPoints)>1},this._handleTouch=function(t){var n=!1;if("mouse"===t.pointerType&&c.touchSupport&&(n=!0),"hammer.input"===t.type){if("pan"!==c.lastEventType||1===t.pointers.length)return;n=!0,c.lastEventType=null}var r=/^(.*)(start|end|move|tap)$/.exec(t.type);if(r&&3===r.length||(n=!0),n)f.boundDocumentHandlers&&c.lastEvent&&M._handleMouseUpDocument(c.lastEvent);else{t.which=r[1];var i=(new Date).valueOf();"pan"===t.which&&"pan"!==c.lastEventType&&i-c.lastTime<e.touchPanDelay||(c.lastTime=i,c.lastEventType=t.which,c.lastEvent=t,void 0===t.pageX&&void 0!==t.center&&void 0!==t.center.x&&(t.pageX=t.center.x,t.pageY=t.center.y),"start"===r[2]&&(M._handleMouseDown(t),M._setClickMaybe(!1),f.boundDocumentHandlers&&g(document).on("mousemove.geojs",M._handleMouseUpDocument)),"start"!==r[2]&&"move"!==r[2]||(f.boundDocumentHandlers?M._handleMouseMoveDocument(t):M._handleMouseMove(t)),"end"!==r[2]&&"cancel"!==r[2]||(f.boundDocumentHandlers?M._handleMouseUpDocument(t):M._handleMouseUp(t),c.lastEvent=null),"tap"!==r[2]||f.boundDocumentHandlers||(t.which=1,c.lastEventType=null,M._handleMouseDown(t),M._handleMouseUp(t),c.lastEventType=r[2]))}},this._repeatMouseMoveEvent=function(t){if(r&&r.modifiers){var e=r.modifiers.alt,n=r.modifiers.ctrl,i=r.modifiers.meta,o=r.modifiers.shift;M._getMouseModifiers(t),r.modifiers.alt===e&&r.modifiers.ctrl===n&&r.modifiers.meta===i&&r.modifiers.shift===o||(f.boundDocumentHandlers?M.map().geoTrigger(y.actionmove,{state:M.state(),mouse:M.mouse(),event:t}):M.map().geoTrigger(y.mousemove,M.mouse()))}},this.retriggerMouseMove=function(){M.map().geoTrigger(y.mousemove,M.mouse())},this._connectEvents=function(){if(!e.map)return M;M._disconnectEvents(),d=g(e.map.node()),M._handleMouseWheel=function(){var t={};function n(n){var r,i;T||(t!==h&&(h=t={kind:"wheel",scroll:{x:0,y:0}}),n.preventDefault(),n.deltaFactor=1,1===n.originalEvent.deltaMode?n.deltaFactor=40:2===n.originalEvent.deltaMode&&(n.deltaFactor=g(window).height()),r=n.originalEvent.deltaX||0,i=n.originalEvent.deltaY||0,r=r*e.wheelScaleX*n.deltaFactor/120,i=i*e.wheelScaleY*n.deltaFactor/120,t.scroll.x+=r,t.scroll.y+=i)}function i(n){var i,o;if(t===h){if(M._getMousePosition(n),M._getMouseButton(n),M._getMouseModifiers(n),o=(b({wheel:!0},r.modifiers,e.actions)||{}).action){var a=M.map().transitionCancel("wheel."+o);switch((a|=M.cancel(v.momentum,!0))&&(r.geo=M.map().displayToGcs(r.map),r.mapgcs=M.map().displayToGcs(r.map,null)),o){case v.pan:M.map().pan({x:h.scroll.x,y:h.scroll.y},void 0,"limited");break;case v.zoom:i=-h.scroll.y,C(i,r);break;case v.rotate:M.map().rotation(M.map().rotation()+h.scroll.y*e.rotateWheelScale,r)}M.map().geoTrigger(y.actionwheel,{state:M.state(),mouse:M.mouse(),eventData:n})}h={}}}return e.throttle>0?x(e.throttle,!1,i,n):function(t){n(t),i(t)}}(),C=function(){var t,n,r,i=0,a=400;function s(a,s){var u,l=M.map();t=o.deepMerge({},s),i+=a,void 0===r&&(n=r=l.zoom()),r+=a,l&&Math.abs(i)>=1&&e.discreteZoom&&!e.zoomAnimation.enabled&&(u=Math.round(i+l.zoom()),i=i+l.zoom()-u,l.zoom(u,t))}function u(){var o,a=M.map();a&&(e.zoomAnimation.enabled?(o=r,e.discreteZoom&&(o=Math.round(o))===n&&r!==n&&(o=n+(r>n?1:-1)),(o=Math.round(1e6*a._fix_zoom(o))/1e6)!==a.zoom()?(a.transitionCancel("debounced_zoom."+v.zoom),a.transition({zoom:o,zoomOrigin:t,duration:e.zoomAnimation.duration,ease:e.zoomAnimation.ease,done:function(t){t=t||{};var n=new RegExp("\\."+v.zoom+"$");t.next||t.cancel&&!((""+t.source).search(n)<0)||(r=void 0),e.discreteZoom&&t.cancel&&t.transition&&t.transition.end&&(""+t.source).search(n)<0&&a.zoom(t.transition.end.zoom,t.transition.end.zoomOrigin)}})):r=void 0):(o=i+a.zoom(),e.discreteZoom&&(o=Math.round(o)),a.zoom(o,t))),i=0}!0!==e.discreteZoom&&e.discreteZoom>0&&(a=e.discreteZoom);return(!0===e.discreteZoom||e.discreteZoom>0)&&!e.zoomAnimation.enabled?_(a,!1,u,s):function(t,e){(t||void 0!==r)&&(s(t,e),u())}}(),o.adjustActions(e.actions);var t={};if(["right","pan","rotate"].forEach(function(n){t[n]=e.actions.some(function(t){return t.input[n]})}),d.on("wheel.geojs",M._handleMouseWheel),d.on("mousemove.geojs",M._handleMouseMove),d.on("mousedown.geojs",M._handleMouseDown),d.on("mouseup.geojs",M._handleMouseUp),d.on("dragstart",function(){return!1}),t.right&&d.on("contextmenu.geojs",function(){return!1}),e.keyboard&&e.keyboard.actions){u=a(d[0]);var i=[];for(var s in e.keyboard.actions)e.keyboard.actions.hasOwnProperty(s)&&(u.bind(e.keyboard.actions[s],function(t){return function(e,n){M._handleKeys(t,e,n)}}(s)),i=i.concat(e.keyboard.actions[s]));e.keyboard.metakeyMouseEvents&&e.keyboard.metakeyMouseEvents.forEach(function(t){u.bind(t,M._repeatMouseMoveEvent,"keydown"),u.bind(t,M._repeatMouseMoveEvent,"keyup"),i.push(t)}),l=i}if(d.toggleClass("highlight-focus",!!(l&&l.length&&e.keyboard.focusHighlight)),(M.hasTouchSupport()||e.alwaysTouch)&&(t.pan||t.rotate)){var f;try{(f=n(3267))&&f.Manager||(f=void 0)}catch(t){}if(void 0!==f){var p=[],m=["hammer.input"];t.rotate&&(p.push([f.Rotate,{enable:!0}]),m=m.concat(["rotatestart","rotateend","rotatemove"])),t.pan&&(p.push([f.Pan,{direction:f.DIRECTION_ALL}]),m=m.concat(["panstart","panend","panmove"])),p.push([f.Tap,{event:"doubletap",taps:2}]),p.push([f.Tap,{event:"singletap"},void 0,["doubletap"]]),m=m.concat(["singletap"]);var w={recognizers:p,preventDefault:!0};(c={manager:new f.Manager(d[0],w),touchSupport:M.hasTouchSupport(),lastTime:0}).manager.get("doubletap").recognizeWith("singletap"),m.forEach(function(t){c.manager.on(t,M._handleTouch)})}}return M},this._disconnectEvents=function(){return l&&(u&&u.unbind(l),l=null,u=null),c&&(c.manager.destroy(),c=null),d&&(d.off(".geojs"),d=null),M._handleMouseWheel=function(){},C=function(){},M},this.map=function(t){return void 0!==t?(e.map=t,M._connectEvents(),M):e.map},this.options=function(t){return void 0===t?Object.assign({},e):(Object.assign(e,t),M._connectEvents(),M)},this._getMousePosition=function(t){if(void 0!==t.pageX&&void 0!==t.pageY){var e,n,i=d.offset();e=(n=(new Date).valueOf())-r.time,r.time=n,r.deltaTime=e,r.velocity={x:(t.pageX-r.page.x)/e,y:(t.pageY-r.page.y)/e},r.page={x:t.pageX,y:t.pageY},r.map={x:t.pageX-i.left,y:t.pageY-i.top};try{r.geo=M.map().displayToGcs(r.map),r.mapgcs=M.map().displayToGcs(r.map,null)}catch(t){r.geo=r.mapgcs=null}}},this._getMouseButton=function(t){if(void 0!==t.buttons||void 0!==t.which){for(var e in r.buttons)r.buttons.hasOwnProperty(e)&&(r.buttons[e]=!1);if(void 0!==t.buttons)r.buttons.left=!!(1&t.buttons),r.buttons.right=!!(2&t.buttons),r.buttons.middle=!!(4&t.buttons);else if("mouseup"!==t.type)switch(t.which){case 1:r.buttons.left=!0;break;case 2:r.buttons.middle=!0;break;case 3:r.buttons.right=!0}!t.which||t.which>=1&&t.which<=3||(r.buttons[t.which]=!0)}},this._getMouseModifiers=function(t){r.modifiers.alt=t.altKey,r.modifiers.ctrl=t.ctrlKey,r.modifiers.meta=t.metaKey,r.modifiers.shift=t.shiftKey},this._getSelection=function(){var t=f.origin,e=M.mouse(),n=M.map(),r={},i={},a=e.map;if(f.actionRecord&&o.isFunction(f.actionRecord.selectionConstraint)){var s=f.actionRecord.selectionConstraint(e.mapgcs,t.mapgcs);a=s?n.gcsToDisplay(s.pos,null):a}else if(e.modifiers.shift){var u=Math.pow(Math.abs((a.x-t.map.x)*(a.y-t.map.y)),.5);a={x:t.map.x+Math.sign(a.x-t.map.x)*u,y:t.map.y+Math.sign(a.y-t.map.y)*u}}return r.upperLeft={x:Math.min(t.map.x,a.x),y:Math.min(t.map.y,a.y)},r.lowerRight={x:Math.max(t.map.x,a.x),y:Math.max(t.map.y,a.y)},r.upperRight={x:r.lowerRight.x,y:r.upperLeft.y},r.lowerLeft={x:r.upperLeft.x,y:r.lowerRight.y},i.upperLeft=n.displayToGcs(r.upperLeft,null),i.lowerRight=n.displayToGcs(r.lowerRight,null),i.upperRight=n.displayToGcs(r.upperRight,null),i.lowerLeft=n.displayToGcs(r.lowerLeft,null),p.data([{ul:i.upperLeft,ur:i.upperRight,ll:i.lowerLeft,lr:i.lowerRight}]),p.draw(),{display:r,gcs:i,mouse:e,origin:Object.assign({},f.origin)}},this.cancel=function(t,e){var n;return(n=t?f.action===t:!!f.action)&&(e||(h={}),P()),n},this._setClickMaybe=function(t){S=t,m&&(window.clearTimeout(m),m=null)},this._handleMouseDown=function(t){var n,i;if(!(T||c&&"tap"===c.lastEventType&&(new Date).valueOf()-c.lastTime<1e3)){M._getMousePosition(t),M._getMouseButton(t),M._getMouseModifiers(t),M.map().geoTrigger(y.mousedown,M.mouse()),!e.click.enabled||r.buttons.left&&!e.click.buttons.left||r.buttons.right&&!e.click.buttons.right||r.buttons.middle&&!e.click.buttons.middle||(M._setClickMaybe({x:r.page.x,y:r.page.y,buttons:Object.assign({},r.buttons)}),e.click.duration>0&&(m=window.setTimeout(function(){S=!1,m=null},e.click.duration))),n=((i=b(r.buttons,r.modifiers,e.actions))||{}).action;var a=M.map();a.transitionCancel("_handleMouseDown"+(n?"."+n:"")),M.cancel(v.momentum),r.velocity={x:0,y:0},n&&(h={kind:"move"},A+=1,f={action:n,actionRecord:i,origin:o.deepMerge({},r),initialZoom:a.zoom(),initialRotation:a.rotation(),initialEventRotation:t.rotation,stateId:A,delta:{x:0,y:0}},i.selectionRectangle&&(E&&(E.clear(),a.deleteLayer(E),E=null),E=a.createLayer("feature",{features:[w.capabilities.color],autoshareRenderer:!1}),(p=E.createFeature("quad",{gcs:a.gcs()})).style({opacity:.25,color:{r:.3,g:.3,b:.3}}),a.geoTrigger(y.brushstart,M._getSelection())),a.geoTrigger(y.actiondown,{state:M.state(),mouse:M.mouse(),event:t}),e.throttle>0?g(document).on("mousemove.geojs",x(e.throttle,M._handleMouseMoveDocument)):g(document).on("mousemove.geojs",M._handleMouseMoveDocument),g(document).on("mouseup.geojs",M._handleMouseUpDocument),f.boundDocumentHandlers=!0)}},this._handleMouseMove=function(t){T||f.boundDocumentHandlers||(e.click.cancelOnMove&&S&&M._setClickMaybe(!1),M._getMousePosition(t),M._getMouseButton(t),M._getMouseModifiers(t),S||M.map().geoTrigger(y.mousemove,M.mouse()))},this._handleZoomrotate=function(t){var n=Math.log2(t.scale);if(!f.zoomrotateAllowZoom&&n&&Math.abs(n)>=Math.log2(1+e.zoomrotateMinimumZoom)&&(e.zoomrotateMinimumZoom&&(f.initialZoom-=n),f.zoomrotateAllowZoom=!0),f.zoomrotateAllowZoom&&n){var r=f.initialZoom+n;M.map().zoom(r,f.origin)}var i=(t.rotation-f.initialEventRotation)*Math.PI/180;if(!f.zoomrotateAllowRotation&&i&&Math.abs(i)>=e.zoomrotateMinimumRotation&&(e.zoomrotateMinimumRotation&&(f.initialEventRotation=t.rotation,i=0),f.zoomrotateAllowRotation=!0),f.zoomrotateAllowRotation){var a=f.initialRotation+i;(i=o.wrapAngle(a-M.map().rotation()))&&(i*(f.lastRotationDelta||0)>=0||Math.abs(i)>=e.zoomrotateReverseRotation)&&(M.map().rotation(a,f.origin),f.lastRotationDelta=i)}var s=f.origin.page;if(f.initialEventGeo){var u=d.offset();(s=M.map().gcsToDisplay(f.initialEventGeo)).x+=u.left,s.y+=u.top}var l=t.pageX-s.x,c=t.pageY-s.y,h=l*l+c*c;!f.zoomrotateAllowPan&&h&&h>=e.zoomrotateMinimumPan*e.zoomrotateMinimumPan&&(e.zoomrotateMinimumPan?(l=c=0,f.initialEventGeo=M.mouse().geo):f.initialEventGeo=f.origin.geo,f.zoomrotateAllowPan=!0),f.zoomrotateAllowPan&&(l||c)&&M.map().pan({x:l,y:c})},this._handleMouseMoveDocument=function(t){var n,i,o;if(M.map()&&!T&&"move"===h.kind){if(M._getMousePosition(t),M._getMouseButton(t),M._getMouseModifiers(t),e.click.cancelOnMove)if(void 0===S.x||void 0===S.y)M._setClickMaybe(!1);else if(!0!==e.click.cancelOnMove||r.page.x===S.x&&r.page.y===S.y){Math.sqrt(Math.pow(r.page.x-S.x,2)+Math.pow(r.page.y-S.y,2))>=e.click.cancelOnMove&&M._setClickMaybe(!1)}else M._setClickMaybe(!1);if(!S)if(f.action){if(n=r.map.x-f.origin.map.x-f.delta.x,i=r.map.y-f.origin.map.y-f.delta.y,f.delta.x+=n,f.delta.y+=i,f.action===v.pan)M.map().pan({x:n,y:i},void 0,"limited");else if(f.action===v.zoom)C(-i*e.zoomScale/120,f);else if(f.action===v.rotate){var a,s;void 0===f.origin.rotation&&(a=f.origin.map.x-M.map().size().width/2,s=f.origin.map.y-M.map().size().height/2,f.origin.rotation=M.map().rotation()-Math.atan2(s,a)),a=r.map.x-M.map().size().width/2,s=r.map.y-M.map().size().height/2,M.map().rotation(f.origin.rotation+Math.atan2(s,a))}else f.action===v.zoomrotate?M._handleZoomrotate(t):f.actionRecord.selectionRectangle&&(o=M._getSelection(),M.map().geoTrigger(y.brush,o));M.map().geoTrigger(y.actionmove,{state:M.state(),mouse:M.mouse(),event:t}),t.preventDefault()}else console.log("WARNING: Invalid state in mapInteractor.")}},this._zoomFromSelection=function(t,e,n){if((t===v.zoomselect||t===v.unzoomselect)&&e.x!==n.x&&e.y!==n.y){var r,i,o=M.map(),a=o.size(),s={x:Math.abs((n.x-e.x)/a.width),y:Math.abs((n.y-e.y)/a.height)};if(t===v.zoomselect?(i=o.displayToGcs({x:(e.x+n.x)/2,y:(e.y+n.y)/2},null),r=o.zoom()-Math.log2(Math.max(s.x,s.y))):(r=o.zoom()+Math.log2(Math.max(s.x,s.y)),i=o.center(void 0,null)),o.discreteZoom()&&(r=Math.floor(r)),o.zoom(r),t===v.zoomselect)o.center(i,null);else{var u=o.gcsToDisplay(i,null);o.pan({x:(e.x+n.x)/2-u.x,y:(e.y+n.y)/2-u.y})}}},this._handleMouseUpDocument=function(t){var n,i;if(!T&&(h={},M._setClickMaybe(!1),M._getMouseButton(t),M._getMouseModifiers(t),g(document).off(".geojs"),f.boundDocumentHandlers=!1,r.buttons.right&&t.preventDefault(),f.actionRecord&&f.actionRecord.selectionRectangle&&(M._getMousePosition(t),n=M._getSelection(),E.clear(),M.map().deleteLayer(E),E=null,p=null,M.map().geoTrigger(y.brushend,n),!0!==f.actionRecord.selectionRectangle&&M.map().geoTrigger(f.actionRecord.selectionRectangle,n),M._zoomFromSelection(f.action,n.display.lowerLeft,n.display.upperRight),M.map().geoTrigger(y.actionselection,{state:M.state(),mouse:M.mouse(),event:t,lowerLeft:n.display.lowerLeft,upperRight:n.display.upperRight})),M.map().geoTrigger(y.actionup,{state:M.state(),mouse:M.mouse(),event:t}),i=f.action,P(),e.momentum.enabled&&e.momentum.actions.includes(i))){var o=(new Date).valueOf(),a=o-r.time+r.deltaTime;o-r.time<e.momentum.stopTime?(r.velocity.x*=r.deltaTime/a,r.velocity.y*=r.deltaTime/a,r.deltaTime=a):r.velocity.x=r.velocity.y=0,M.springBack(!0,i)}},this._handleMouseUp=function(t){if(!T){M._getMouseButton(t),S&&M._handleMouseClick(t);var e=M.mouse();e.buttonsDown=S.buttons,M.map().geoTrigger(y.mouseup,e)}},this._handleMouseClick=function(t){f.actionRecord&&f.actionRecord.selectionRectangle&&(E.clear(),M.map().deleteLayer(E),E=null,p=null,f.action=f.actionRecord=null),M._getMouseButton(t),M._getMouseModifiers(t),M.cancel(v.pan),g(document).off(".geojs"),f.boundDocumentHandlers=!1;var e=M.mouse();e.buttonsDown=S.buttons,e.evt=t,M._setClickMaybe(!1),M.map().geoTrigger(y.mouseclick,e)},this._handleMouseWheel=function(){},this.springBack=function(t,n){f.action!==v.momentum&&(t||(r.velocity={x:0,y:0}),f.origAction=n,f.action=v.momentum,f.origin=M.mouse(),f.momentum=M.mouse(),f.start=new Date,f.handler=function(){var t,n,r,i;if(f.action===v.momentum&&M.map()&&!M.map().transition())if(i=Math.min(f.momentum.deltaTime,30),r=f.start.valueOf(),f.start=new Date,t=O(f.momentum.velocity,f.start-r)){if((n=k(t))>e.momentum.maxSpeed&&(n=e.momentum.maxSpeed/n,t.x=t.x*n,t.y=t.y*n),isFinite(t.x)&&isFinite(t.y)||(t.x=0,t.y=0),f.momentum.velocity.x=t.x,f.momentum.velocity.y=t.y,f.origAction===v.zoom){var o=f.momentum.velocity.y*i;C(-o*e.zoomScale/120,f)}else M.map().pan({x:f.momentum.velocity.x*i,y:f.momentum.velocity.y*i},void 0,"limited");f.handler&&M.map().scheduleAnimationFrame(f.handler)}else P()},f.handler&&M.map().scheduleAnimationFrame(f.handler))},this.destroy=function(){M._disconnectEvents(),M.map()&&g(M.map().node()).removeClass("highlight-focus"),M.map(null)},this.mouse=function(){return o.deepMerge({},r)},this.keyboard=function(t){return void 0===t?o.deepMerge({},e.keyboard||{}):M.options({keyboard:t})},this.state=function(){return o.deepMerge({},f)},this.pause=function(t){return void 0===t?T:(T=!!t,M)},this.addAction=function(t,n){t&&t.action&&t.input&&(o.addAction(e.actions,t,n),e.map&&e.actions.some(function(t){return t.input.right})&&(d.off("contextmenu.geojs"),d.on("contextmenu.geojs",function(){return!1})))},this.hasAction=function(t,n,r){return o.hasAction(e.actions,t,n,r)},this.removeAction=function(t,n,r){var i=o.removeAction(e.actions,t,n,r);return e.map&&!e.actions.some(function(t){return t.input.right})&&d.off("contextmenu.geojs"),i},this.simulateEvent=function(t,e){var n,r,i,o,a;if(!M.map())return M;if("keyboard"===t&&u){var s={shiftKey:e.shift||e.shiftKey||!1,ctrlKey:e.ctrl||e.ctrlKey||!1,altKey:e.alt||e.altKey||!1,metaKey:e.meta||e.metaKey||!1,toString:function(){return e.keys},stopPropagation:function(){},preventDefault:function(){},simulated:!0};return u.trigger(s,e.event),M}return r=e.page||{},e.map&&(i=d.offset(),r.x=e.map.x+i.left,r.y=e.map.y+i.top),"left"===e.button?(o=1,a=1):"right"===e.button?(o=3,a=2):"middle"===e.button&&(o=2,a=4),e.modifiers=e.modifiers||[],e.wheelDelta=e.wheelDelta||{},n=g.Event(t,{pageX:r.x,pageY:r.y,which:o,buttons:a,altKey:e.modifiers.indexOf("alt")>=0,ctrlKey:e.modifiers.indexOf("ctrl")>=0,metaKey:e.modifiers.indexOf("meta")>=0,shiftKey:e.modifiers.indexOf("shift")>=0,center:e.center,rotation:e.touch?e.rotation||0:e.rotation,scale:e.touch?e.scale||1:e.scale,pointers:e.pointers,pointerType:e.pointerType,originalEvent:{deltaX:e.wheelDelta.x,deltaY:e.wheelDelta.y,deltaMode:e.wheelMode,preventDefault:function(){},stopPropagation:function(){},stopImmediatePropagation:function(){}}}),e.touch&&c?M._handleTouch(n):d.trigger(n),t.indexOf(".geojs")>=0&&g(document).trigger(n),M},this._connectEvents(),this};r(s,i),t.exports=s},2225:function(t,e,n){function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return o(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var a=n(4626),s=n(1275),u=n(7541),l=function(t){"use strict";if(!(this instanceof l))return new l(t);t=t||{},u.call(this,t);var e=n(77),o=n(642),a=n(4279);a=a.__esModule?a.default:a;var s=this,c=this._init,f=null,h=e(),d=0,p=0,m=0;return this.featureType="marker",this._updateRangeTree=function(){if(!(h.timestamp()>=s.dataTime().timestamp()&&h.timestamp()>=s.timestamp())){var t,e,n=s.style.get("radius"),o=s.style.get("strokeWidth"),u=s.style.get("radiusIncludesStroke"),c=s.style.get("strokeOffset"),g=s.style.get("scaleWithZoom");e=s.position(),d=0,p=0,m=0,t=s.data().map(function(t,r){var i=e(t,r),a=g(t,r),s=n(t,r),f=o(t,r),h=Math.sign(c(t,r)),y=u(t,r),v=(y=void 0===y||y)?s+f*(h+1)/2:s+f,x=y?s+f*(h-1)/2:s;switch(a=l.scaleMode[a]||(a>=1&&a<=3?a:0)){case l.scaleMode.stroke:x>d&&(d=x),f>m&&(m=f);break;case l.scaleMode.fill:case l.scaleMode.all:v>p&&(p=v);break;default:v>d&&(d=v)}return[i.x,i.y]}),f=new a(t.length);var y,v=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}(t);try{for(v.s();!(y=v.n()).done;){var x=r(y.value,2),_=x[0],b=x[1];f.add(_,b)}}catch(t){v.e(t)}finally{v.f()}f.finish(),h.modified()}},this._approximateMaxRadius=function(t){s._updateRangeTree();var e=Math.pow(2,t);return Math.max(d+m*e,p*e)},this.pointSearch=function(t,e){var n,r,i,o,a=[],u=[],c=[],h=s.gcs(),d=s.style.get("radius"),p=s.style.get("strokeWidth"),m=s.style.get("radiusIncludesStroke"),g=s.style.get("strokeOffset"),y=s.style.get("scaleWithZoom");if(!(i=s.data())||!i.length)return{found:[],index:[]};s._updateRangeTree();var v=s.layer().map();e=null===e?v.gcs():void 0===e?v.ingcs():e;var x=v.gcsToDisplay(t,e),_=v.zoom(),b=Math.pow(2,_),w=this._approximateMaxRadius(_);return o=[v.displayToGcs({x:x.x-w,y:x.y-w},h),v.displayToGcs({x:x.x+w,y:x.y-w},h),v.displayToGcs({x:x.x-w,y:x.y+w},h),v.displayToGcs({x:x.x+w,y:x.y+w},h)],n={x:Math.min(o[0].x,o[1].x,o[2].x,o[3].x),y:Math.min(o[0].y,o[1].y,o[2].y,o[3].y)},r={x:Math.max(o[0].x,o[1].x,o[2].x,o[3].x),y:Math.max(o[0].y,o[1].y,o[2].y,o[3].y)},a=f.range(n.x,n.y,r.x,r.y),(a=Uint32Array.from(a).sort()).forEach(function(t){var e=i[t],n=d(i[t],t),r=y(i[t],t),o=g(i[t],t),a=r?p(i[t],t):0,f=m(e,t),_=(f=void 0===f||f)?n+a*(o-1)/2:n;n=_+a;var w,M,A,E=s.position()(e,t);switch(r=l.scaleMode[r]||(r>=1&&r<=3?r:0)){case l.scaleMode.fill:n=_*b+a;break;case l.scaleMode.stroke:n=_+a*b;break;case l.scaleMode.all:n*=b}n&&(A=n*n,(w=(E=v.gcsToDisplay(E,h)).x-x.x)*w+(M=E.y-x.y)*M<=A&&(u.push(e),c.push(t)))}),{found:u,index:c}},this.polygonSearch=function(t,e,n){var r,i,a,u,c=s.gcs(),h=[],d=[],p={},m=s.layer().map(),g=s.data(),y=s.style.get("radius"),v=s.style.get("strokeWidth"),x=s.style.get("radiusIncludesStroke"),_=s.style.get("strokeOffset"),b=s.style.get("scaleWithZoom"),w=m.zoom(),M=Math.pow(2,w),A=this._approximateMaxRadius(w);return n=null===n?m.gcs():void 0===n?m.ingcs():n,t.outer||(t={outer:t,inner:[]}),t.outer.length<3||!g||!g.length?{found:[],index:[],extra:{}}:((e=e||{}).partial=e.partial||!1,(t={outer:m.gcsToDisplay(t.outer,n),inner:(t.inner||[]).map(function(t){return m.gcsToDisplay(t,n)})}).outer.forEach(function(t){i||(i={x:t.x,y:t.y},a={x:t.x,y:t.y}),t.x<i.x&&(i.x=t.x),t.x>a.x&&(a.x=t.x),t.y<i.y&&(i.y=t.y),t.y>a.y&&(a.y=t.y)}),s._updateRangeTree(),u=[m.displayToGcs({x:i.x-A,y:i.y-A},c),m.displayToGcs({x:a.x+A,y:i.y-A},c),m.displayToGcs({x:a.x+A,y:a.y+A},c),m.displayToGcs({x:i.x-A,y:a.y+A},c)],i={x:Math.min(u[0].x,u[1].x,u[2].x,u[3].x),y:Math.min(u[0].y,u[1].y,u[2].y,u[3].y)},a={x:Math.max(u[0].x,u[1].x,u[2].x,u[3].x),y:Math.max(u[0].y,u[1].y,u[2].y,u[3].y)},r=f.range(i.x,i.y,a.x,a.y),(r=Uint32Array.from(r).sort()).forEach(function(n){var r=g[n],i=s.position()(r,n),a=y(r,n),u=b(r,n),f=_(r,n),w=u?v(r,n):0,A=x(r,n),E=(A=void 0===A||A)?a+w*(f-1)/2:a;switch(a=E+w,u=l.scaleMode[u]||(u>=1&&u<=3?u:0)){case l.scaleMode.fill:a=E*M+w;break;case l.scaleMode.stroke:a=E+w*M;break;case l.scaleMode.all:a*=M}if(a){i=m.gcsToDisplay(i,c);var T=o.distanceToPolygon2d(i,t);(T>=a||T>=0&&"center"===e.partial||T>=-a&&e.partial&&"center"!==e.partial)&&(h.push(r),d.push(n),p[n]={partial:T<a,distance:T})}}),{found:h,index:d,extra:p})},this._init=function(t){return t=o.deepMerge({},{style:Object.assign({},{radius:6.25,radiusIncludesStroke:!0,strokeColor:{r:.851,g:.604,b:0},strokeOffset:-1,strokeOpacity:1,strokeWidth:1.25,fillColor:{r:1,g:.839,b:.439},fillOpacity:.8,symbol:0,symbolValue:0,rotation:0,scaleWithZoom:l.scaleMode.none,rotateWithMap:!1},t&&void 0===t.style?{}:t.style)},t),c.call(s,t),s},s};l.create=function(t,e){"use strict";return(e=e||{}).type="marker",s.create(t,e)},l.capabilities={feature:"marker"},l.primitiveShapes=u.primitiveShapes,l.symbols={circle:0,ellipse:0,flowerBase:1,flowerMax:16,triangle:16,diamond:17,starBase:17,starMax:16,square:32,rectangle:32,crossBase:33,crossMax:16,oval:48,jackBase:49,jackMax:16,drop:64,dropBase:65,dropMax:16,arrow:80,arrowBase:81,arrowMax:16,length:96},["flower","star","cross","jack","drop","arrow"].forEach(function(t){for(var e=2;e<=l.symbols[t+"Max"];e+=1)l.symbols[t+e]=l.symbols[t+"Base"]-2+e}),l.scaleMode={none:0,fill:1,stroke:2,all:3},a(l,u),t.exports=l},6124:function(t,e,n){var r=n(4626),i=n(1275),o=function(t){"use strict";if(!(this instanceof o))return new o(t);var e=n(642);t=t||{},i.call(this,t);var r=this,a=this._init,s={};return this.featureType="mesh",this.mesh=function(t,e){if(void 0===t)return s;if("string"==typeof t&&void 0===e)return s[t];if(void 0===e){var n=Object.assign({},{gridWidth:function(){return t.gridHeight?Math.floor(r.data().length/t.gridHeight):Math.floor(Math.sqrt(r.data().length))},gridHeight:function(){return t.gridWidth?Math.floor(r.data().length/t.gridWidth):Math.floor(Math.sqrt(r.data().length))}},s,t);s=n}else s[t]=e;return r.modified(),r},this.mesh.get=function(t){if(void 0===t){var n,i={};for(n in s)s.hasOwnProperty(n)&&(i[n]=r.mesh.get(n));return i}return e.ensureFunction(s[t])},this.position=function(t){return void 0===t?r.style("position"):(r.style("position",t),r.dataTime().modified(),r.modified(),r)},this._createMesh=function(t,e){t=t||{},e=e||{};var n,i,o,a,s,u,l,c,f,h,d,p,m,g,y,v,x=r.data(),_=r.position(),b=r.mesh.get("elements")(x),w=r.mesh.get("elementPacking")(x),M=r.mesh.get("gridWidth")(x),A=r.mesh.get("gridHeight")(x),E=r.mesh.get("wrapLongitude")(x),T=r.mesh.get("x0")(x),S=r.mesh.get("y0")(x),C=r.mesh.get("dx")(x),k=r.mesh.get("dy")(x),P=M,O={shape:"square",elements:[],elementIndex:[]};if(b){var L=b.length&&Array.isArray(b[0]);if("square"===w||"triangle"!==w&&(!L&&!(b.length%4)&&b.length%3||L&&4===b[0].length))if(O.shape="square",L)for(n=0;n<b.length;n+=1)O.elements.push(b[n][0]),O.elements.push(b[n][1]),O.elements.push(b[n][3]),O.elements.push(b[n][2]),O.elements.push(b[n][3]),O.elements.push(b[n][1]),O.elementIndex.push(n),O.elementIndex.push(n);else for(n=o=0;n<b.length-3;n+=4,o+=1)O.elements.push(b[n]),O.elements.push(b[n+1]),O.elements.push(b[n+3]),O.elements.push(b[n+2]),O.elements.push(b[n+3]),O.elements.push(b[n+1]),O.elementIndex.push(o),O.elementIndex.push(o);else if(O.shape="triangle",L)for(n=0;n<b.length;n+=1)O.elements.push(b[n][0]),O.elements.push(b[n][1]),O.elements.push(b[n][2]),O.elementIndex.push(n);else for(O.elements=b.slice(0,b.length-b.length%3),n=o=0;n<b.length-2;n+=3,o+=1)O.elementIndex.push(o);u=x.length,c=!0}else{if(Object.keys(t).length?M*A>x.length&&(A=Math.floor(x.length/M)):Object.keys(e).length&&(M-1)*(A-1)>x.length&&(A=Math.floor(x.length/(M-1))+1),E=!(void 0!==E&&!E),!(c=null==T||null==S||!C||!k)&&E&&(T<-180||T>180||T+C*(M-1)<-180||T+C*(M-1)>180)&&C>-180&&C<180&&C*(M-1)<360.0001){for(p=[],m=[],n=0;n<M;n+=1){for(y=T+n*C;y<-180;)y+=360;for(;y>180;)y-=360;n&&Math.abs(y-p[p.length-1])>180&&(y>p[p.length-1]?(p.push(y-360),p.push(p[p.length-2]+360),m.push(n),m.push(n+1)):(p.push(y+360),p.push(p[p.length-2]-360),m.push(n),m.push(n+1)),g=n),p.push(y),m.push(n)}if(M+=2,Math.abs(Math.abs(P*C)-360)<.01){for(M+=1,y=T+P*C;y<-180;)y+=360;for(;y>180;)y-=360;p.push(y),m.push(0)}}if(u=M*A,void 0!==g)for(O.index=new Array(u),n=0;n<u;n+=1)v=n-(o=Math.floor(n/M))*M,(v+=v>g?-2:0)>=P&&(v-=P),v+=o*P,O.index[n]=v;for(o=s=0;o<A-1;o+=1,s+=1)for(n=0;n<M-1;n+=1,s+=1)n!==g&&(O.elements.push(s),O.elements.push(s+1),O.elements.push(s+M),O.elements.push(s+M+1),O.elements.push(s+M),O.elements.push(s+1),O.elementIndex.push(o*(M-1)+(m?m[n]:n)),O.elementIndex.push(o*(M-1)+(m?m[n]:n)))}O.verticesPerElement="triangle"===O.shape?3:6;var I=O.verticesPerElement;if(e.used){var R=new Array(O.elementIndex[O.elementIndex.length-1]+1);for(n=0;n<R.length;n+=1)R[n]=e.used(x[n],n);for(n=0;n<O.elementIndex.length&&R[O.elementIndex[n]];n+=1);if(n<O.elementIndex.length){for(o=n;n<O.elementIndex.length;n+=1)if(R[O.elementIndex[n]]){for(O.elementIndex[o]=O.elementIndex[n],a=0;a<3;a+=1)O.elements[3*o+a]=O.elements[3*n+a];o+=1}O.elements.splice(3*o),O.elementIndex.splice(o)}}if(t.used){for(n=0;n<u&&(s=O.index?O.index[n]:n,t.used(x[s],s));n+=1);if(n!==u){l=n;var D=new Array(u);for(o=0;o<l;o+=1)D[o]=o;if(D[l]=-1,!O.index)for(O.index=new Array(x.length),o=0;o<x.length;o+=1)O.index[o]=o;for(n=l+1;n<u;n+=1)s=O.index[n],t.used(x[s],s)?(D[n]=l,O.index[l]=O.index[n],l+=1):D[n]=-1;for(O.index.splice(l),n=a=0;n<O.elements.length;n+=I){for(o=0;o<I&&!(D[O.elements[n+o]]<0);o+=1)O.elements[a+o]=D[O.elements[n+o]];o===I&&(O.elementIndex[Math.floor(a/3)]=O.elementIndex[Math.floor(n/3)],6===I&&(O.elementIndex[Math.floor(a/3)+1]=O.elementIndex[Math.floor(n/3)+1]),a+=I)}O.elements.splice(a),O.elementIndex.splice(Math.floor(a/3)),u=l}}if(e.used&&void 0===g){var N=new Array(u),F=O.index;for(O.index=[],n=0;n<O.elements.length;n+=1)void 0===N[a=O.elements[n]]&&(N[a]=O.index.length,O.index.push(F?F[a]:a)),O.elements[n]=N[a];u=O.index.length}for(h in O.pos=new Array(3*u),t)"used"!==h&&t.hasOwnProperty(h)&&(O[h]=new Array(u));for(n=i=0;n<u;n+=1,i+=3)for(h in f=x[s=O.index?O.index[n]:n],c?(d=_(f,s),O.pos[i]=d.x,O.pos[i+1]=d.y,O.pos[i+2]=d.z||0):(O.pos[i]=void 0===g?T+C*(s%M):p[n%M],O.pos[i+1]=S+k*Math.floor(s/M),O.pos[i+2]=0,d={x:O.pos[i],y:O.pos[i+1],z:O.pos[i+2]}),t)"used"!==h&&t.hasOwnProperty(h)&&(O[h][n]=t[h](f,s,d));for(h in e)if("used"!==h&&e.hasOwnProperty(h)){var j=e[h];for(O[h]=new Array(O.elementIndex.length),n=0;n<O.elementIndex.length;n+=1)f=x[s=O.elementIndex[n]],O[h][n]=j(f,s)}return O.numVertices=u,O.numElements=O.elements.length/O.verticesPerElement,O},this._init=function(t){a.call(r,t),t=t||{};var e=Object.assign({},{position:function(t){return Array.isArray(t)?{x:t[0],y:t[1],z:t[2]||0}:t}},t.style||{});r.mesh(t.mesh||{}),r.style(e)},this};r(o,i),t.exports=o},1338:function(t,e,n){var r=n(4626),i=n(77),o=0,a=function(){"use strict";if(!(this instanceof a))return new a;var t=n(642),e=this,r=++o,s={},u=[],l=0;return this.onIdle=function(t){return l?u.push(t):t(),e},Object.defineProperty(this,"idle",{get:function(){return!l},configurable:!0}),Object.defineProperty(this,"_promises",{get:function(){return l},configurable:!0}),this.addPromise=function(t){function n(){t._geojsTracked&&t._geojsTracked[r]&&(l-=1,delete t._geojsTracked[r]),l||u.splice(0,u.length).forEach(function(t){t()})}return t._geojsTracked||(t._geojsTracked={}),t._geojsTracked[r]||(t._geojsTracked[r]=!0,l+=1),t.always?t.always(n):t.then(n,n),e},this.removePromise=function(t){return t._geojsTracked&&t._geojsTracked[r]&&(l-=1,delete t._geojsTracked[r],l||u.splice(0,u.length).forEach(function(t){t()})),e},this.geoOn=function(n,r){return Array.isArray(n)?(n.forEach(function(t){e.geoOn(t,r)}),e):t.isFunction(r)?(s.hasOwnProperty(n)||(s[n]=[]),s[n].push(r),e):(console.warn("Handler for "+n+" is not a function",r,e),e)},this.geoOnce=function(t,n){var r=function(i){e.geoOff(t,r),n.call(e,i)};return e.geoOn(t,r),r},this.geoIsOn=function(t,n){return Array.isArray(t)?t.some(function(t){return e.geoIsOn(t,n)}):(s[t]||[]).some(function(t){return t===n||void 0===n})},this.geoTrigger=function(t,n){return Array.isArray(t)?(t.forEach(function(t){e.geoTrigger(t,n)}),e):((n=n||{}).event=t,s.hasOwnProperty(t)&&s[t].forEach(function(r){try{r.call(e,n)}catch(e){console.warn("Event handler for "+t+" threw an error",e)}}),e)},this.geoOff=function(t,n){if(void 0===t&&(s={},u=[],l=0,r=++o),Array.isArray(t))return t.forEach(function(t){e.geoOff(t,n)}),e;if(n){if(Array.isArray(n))return n.forEach(function(n){e.geoOff(t,n)}),e}else s[t]=[];return s.hasOwnProperty(t)&&(s[t]=s[t].filter(function(t){return t!==n})),e},this._eventHandlers=function(){return s},this._exit=function(){e.geoOff()},i.call(this),this.modified(),this};r(a,i),t.exports=a},4880:function(t,e,n){var r=n(4626),i=n(9264),o=n(1098),a=n(3842),s=n(642),u=function(t){var e=n(4912);if(!(this instanceof u))return new u(t);void 0!==(t=t||{}).mapOpacity&&void 0===t.opacity&&((t=Object.assign({},t)).opacity=t.mapOpacity),t=s.deepMerge({},this.constructor.defaults,u.tileSources[this.constructor.defaults.source]||{},u.tileSources[t.source]||{},{name:""},t),i.call(this,t);var r=this;this.mapOpacity=this.opacity,this._getTile=function(t,n){var i=n||t;return e({index:t,size:{x:r._options.tileWidth,y:r._options.tileHeight},queue:r._queue,overlap:r._options.tileOverlap,scale:r._options.tileScale,url:r._options.url.call(r,i.x,i.y,Math.max(i.level||0,Math.min(0,r._options.minLevel||0)),r._options.subdomains),crossDomain:r._options.crossDomain})},this.source=function(t){if(void 0!==t)return u.tileSources[t]&&(r.url(u.tileSources[t].url),r.subdomains(u.tileSources[t].subdomains||"abc"),r.attribution(u.tileSources[t].attribution||""),r._options.maxLevel=u.tileSources[t].maxLevel||18,r._options.minLevel=u.tileSources[t].minLevel||0),r;for(var e in u.tileSources)if(u.tileSources[e].url===r.url())return e}};u.defaults=Object.assign({},i.defaults,{tileOffset:function(t){var e=256*Math.pow(2,t-1);return{x:e,y:e}},url:"",source:"osm"});var l='Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',c='<a href="https://carto.com"> Carto</a> Contributors <a href="https://www.openstreetmap.org/"> OpenStreetMap</a>';u.tileSources={"dark-matter-with-labels":{url:" https://{s}.basemaps.cartocdn.com/rastertiles/dark_all/{z}/{x}/{y}.png",attribution:c,name:"Carto Dark Matter With Labels",minLevel:0,maxLevel:18},"dark-matter-without-labels":{url:"https://{s}.basemaps.cartocdn.com/rastertiles/dark_nolabels/{z}/{x}/{y}.png",attribution:c,name:"Carto Dark Matter Without Labels",minLevel:0,maxLevel:18},"nationalmap-relief":{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSShadedReliefOnly/MapServer/tile/{z}/{y}/{x}",attribution:'Tile data from <a href="https://basemap.nationalmap.gov/">USGS</a>',name:"National Map Shaded Relief",minLevel:0,maxLevel:16},"nationalmap-satellite":{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryOnly/MapServer/tile/{z}/{y}/{x}",attribution:'Tile data from <a href="https://basemap.nationalmap.gov/">USGS</a>',name:"National Map Satellite",minLevel:0,maxLevel:16},"nationalmap-satellite-topo":{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryTopo/MapServer/tile/{z}/{y}/{x}",attribution:'Tile data from <a href="https://basemap.nationalmap.gov/">USGS</a>',name:"National Map Satellite and Topo",minLevel:0,maxLevel:16},"nationalmap-topo":{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer/tile/{z}/{y}/{x}",attribution:'Tile data from <a href="https://basemap.nationalmap.gov/">USGS</a>',name:"National Map Topo",minLevel:0,maxLevel:16},osm:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'Tile data &copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors',name:"OpenStreetMap",subdomains:"abc",minLevel:0,maxLevel:19},"positron-with-labels":{url:"https://{s}.basemaps.cartocdn.com/rastertiles/light_all/{z}/{x}/{y}.png",attribution:c,name:"Carto Positron With Labels",minLevel:0,maxLevel:18},"positron-without-labels":{url:"https://{s}.basemaps.cartocdn.com/rastertiles/light_nolabels/{z}/{x}/{y}.png",attribution:c,name:"Carto Positron Without Labels",minLevel:0,maxLevel:18},"stamen-terrain":{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png",attribution:l,name:"Stamen Terrain",subdomains:"abcd",minLevel:0,maxLevel:14},"stamen-terrain-background":{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/terrain-background/{z}/{x}/{y}.png",attribution:l,name:"Stamen Terrain Background",subdomains:"abcd",minLevel:0,maxLevel:14},"stamen-toner":{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png",attribution:l,name:"Stamen Toner",subdomains:"abcd",minLevel:0,maxLevel:20},"stamen-toner-lite":{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png",attribution:l,name:"Stamen Toner Lite",subdomains:"abcd",minLevel:0,maxLevel:20},"voyager-with-labels":{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}.png",attribution:c,name:"Carto Voyager With Labels",minLevel:0,maxLevel:18},"voyager-without-labels":{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager_nolabels/{z}/{x}/{y}.png",attribution:c,name:"Carto Voyager Without Labels",minLevel:0,maxLevel:18}},r(u,i),o.registerLayer("osm",u,[a.capabilities.image]),t.exports=u},2266:function(t,e,n){var r=n(4626),i=n(1275),o=function(t){"use strict";if(!(this instanceof o))return new o(t);t=t||{},i.call(this,t);var e=this,n=this._init;return this.featureType="path",this.position=function(t){return void 0===t?e.style("position"):(t!==e.style("position")&&(e.style("position",t),e.dataTime().modified(),e.modified()),e)},this._init=function(t){n.call(e,t);var r=Object.assign({},{strokeWidth:1,strokeColor:{r:1,g:1,b:1},position:function(t){return Array.isArray(t)?{x:t[0],y:t[1],z:t[2]||0}:t}},void 0===t.style?{}:t.style);return void 0!==t.position&&(r.position=t.position),e.style(r),r.position&&e.position(r.position),e.dataTime().modified(),e},this._init(t),this};r(o,i),t.exports=o},7761:function(t,e,n){var r=n(5616),i=n(4626),o=n(1275),a=n(642),s=function(t){"use strict";if(!(this instanceof s))return new s(t);t=t||{},o.call(this,t);var e,n=this,i=this._update,u=this._init;return this.featureType="pixelmap",this.position=function(t){return void 0===t?n.style("position"):(t!==n.style("position")&&(n.style("position",t),n.dataTime().modified(),n.modified()),n)},this.url=function(t){return void 0===t?n.style("url"):(t!==n.style("url")&&(n.m_srcImage=n.m_info=void 0,n.style("url",t),n.dataTime().modified(),n.modified()),n)},this.color=function(t){return void 0===t?n.style("color"):(t!==n.style("color")&&(n.style("color",t),n.dataTime().modified(),n.modified()),n)},this.indexModified=function(t,r){if(void 0===t){var i=e;return"clear"===r&&(e=void 0),i}return n.modified(),void 0===e&&(e=[t,t]),t<e[0]&&(e[0]=t),(r||t)>e[1]&&(e[1]=r||t),n},this._update=function(){return i.call(n),(n.buildTime().timestamp()<=n.dataTime().timestamp()||n.updateTime().timestamp()<n.timestamp())&&n._build(),n.updateTime().modified(),n},this.maxIndex=function(){if(n.m_info){if(void 0===n.m_info.maxIndex)for(var t in n.m_info.maxIndex=0,n.m_info.mappedColors)n.m_info.mappedColors.hasOwnProperty(t)&&(n.m_info.maxIndex=Math.max(n.m_info.maxIndex,t));return n.m_info.maxIndex}},this._computePixelmap=function(){},this._build=function(){if(n.m_srcImage)n.m_info,n._computePixelmap();else{var t=n.style.get("url")();if(a.isReadyImage(t))n.m_srcImage=t,n._computePixelmap();else if(t){var e,i,o=r.Deferred();t instanceof Image?(n.m_srcImage=t,e=t.onload,i=t.onerror):(n.m_srcImage=new Image,t.indexOf(":")>=0&&t.indexOf("/")===t.indexOf(":")+1&&(n.m_srcImage.crossOrigin=n.style.get("crossDomain")()||"anonymous")),n.m_srcImage.onload=function(){e&&e.apply(n,arguments),n.style.get("url")()===t&&(n.m_info=void 0,n._computePixelmap()),o.resolve()},n.m_srcImage.onerror=function(){i&&i.apply(n,arguments),o.reject()},o.promise(n),n.layer().addPromise(n),t instanceof Image||(n.m_srcImage.src=t)}}return n.buildTime().modified(),n},this._pointSearchProcess=function(t){for(var e=t.index.length-1;e>=0;e-=1)if(t.extra[t.index[e]]._quad&&t.extra[t.index[e]]._quad.image){var r=t.extra[t.index[e]]._quad.image;t.extra[t.index[e]]._quad.m_srcImage&&(r=t.extra[t.index[e]]._quad.m_srcImage);var i=t.extra[t.index[e]].basis,o=Math.floor(i.x*r.width),a=Math.floor(i.y*r.height),s=document.createElement("canvas");s.width=s.height=1;var u=s.getContext("2d");u.drawImage(r,o,a,1,1,0,0,1,1);var l=u.getImageData(0,0,1,1).data,c=l[0]+256*l[1]+256*l[2]*256;if(16777215===c)continue;return t={index:[c],found:[n.data()[c]]}}return{index:[],found:[]}},this._init=function(t){t=t||{},u.call(n,t);var e=Object.assign({},{color:function(t,e){return{r:(255&e)/255,g:(e>>8&255)/255,b:(e>>16&255)/255,a:1}},position:a.identityFunction},void 0===t.style?{}:t.style);return void 0!==t.position&&(e.position=t.position),void 0!==t.url&&(e.url=t.url),void 0!==t.color&&(e.color=t.color),n.style(e),n.dataTime().modified(),t.quadFeature&&(n.m_srcImage=!0,n._computePixelmap()),n},this};s.create=function(t,e){"use strict";return(e=e||{}).type="pixelmap",o.create(t,e)},s.capabilities={feature:"pixelmap",lookup:"pixelmap.lookup"},i(s,o),t.exports=s},534:function(t,e,n){var r=n(4626),i=n(9264),o=n(1098),a=n(3842),s=n(7761),u=n(642),l=function(t){var e,r=n(4912);if(!(this instanceof l))return new l(t);(t=t||{}).data&&(e=t.data,delete t.data),t=u.deepMerge({},this.constructor.defaults,t),i.call(this,t);var o,a=this._init,s=this;return this._getTile=function(t,e){var n=e||t;return r({index:t,size:{x:s._options.tileWidth,y:s._options.tileHeight},queue:s._queue,overlap:s._options.tileOverlap,scale:s._options.tileScale,url:s._options.url.call(s,n.x,n.y,Math.max(n.level||0,Math.min(0,s._options.minLevel||0)),s._options.subdomains),crossDomain:s._options.crossDomain})},this._init=function(){a.apply(s,arguments),s.nearestPixel(!0,!0);var n={quadFeature:s.features()[0]};t.style&&(n.style=t.style),t.color&&(n.color=t.color),o=s.createFeature("pixelmap",n),e&&o.data(e),s.style=o.style,s.data=o.data,s.indexModified=o.indexModified;var r=s.dataTime().modified;return s.dataTime().modified=function(){return o.dataTime().modified(),r()},["modified","geoOn","geoOff","geoOnce"].forEach(function(t){var e=s[t];s[t]=function(){return Array.isArray(arguments[0])||o[t].apply(this,arguments),e.apply(this,arguments)}}),s},s};l.defaults=Object.assign({},i.defaults,{features:[a.capabilities.image,s.capabilities.lookup],tileOffset:function(t){var e=256*Math.pow(2,t-1);return{x:e,y:e}},url:""}),r(l,i),o.registerLayer("pixelmap",l,[a.capabilities.image]),t.exports=l},7541:function(t,e,n){function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return o(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var a=n(4626),s=n(1275),u=function(t){"use strict";if(!(this instanceof u))return new u(t);t=t||{},s.call(this,t);var e=n(77),o=n(5966),a=n(6409),l=n(642),c=n(4279);c=c.__esModule?c.default:c;var f=this,h=this._init,d=null,p=e(),m=this.data,g=0,y=t.clustering,v=null,x=[],_=null,b=!1;return this.featureType="point",this.clustering=function(t){return void 0===t?y:(y&&!t?(v=null,y=!1,m(x)):t&&y!==t&&(y=t,f._clusterData()),f)},this._clusterData=function(){if(y){var t=!0===y?{radius:10}:y;!t.maxZoom&&this.layer()&&this.layer().map()&&((t=Object.assign({},t)).maxZoom=this.layer().map().zoomRange().max);var e=f.position(),n=f.layer().map(),r=n.gcsToDisplay(n.center(void 0,null),null),i=n.displayToGcs(r,f.gcs()),a=n.displayToGcs({x:r.x+t.radius,y:r.y},f.gcs()),s=Math.pow(Math.pow(a.y-i.y,2)+Math.pow(a.x-i.x,2),.5),u=n.zoom(),c=s*Math.pow(2,u);t=Object.assign({},t,{radius:c}),v=new o(t),x.forEach(function(t,n){var r=l.normalizeCoordinates(e(t,n));r.index=n,v.addPoint(r)}),_=null,f._handleZoom(n.zoom())}},this._handleZoom=function(t){var e=Math.floor(t);if(y&&e!==_){_=e;for(var n=v.points(e),r=v.clusters(e),i=new Array(n.length+r.length),o=0;o<n.length;o+=1)i[o]=x[n[o].index];for(var a=0,s=n.length;a<r.length;a+=1,s+=1){var u=r[a];u.__cluster=!0,i[s]=u}b=!0,f.data(i)}},this.position=function(t){if(void 0===t)return f.style("position");var e=l.isFunction(t);return f.style("position",function(n,r){return null!=n&&n.__cluster?n:e?t(n,r):t}),f.dataTime().modified(),f.modified(),f},this._updateRangeTree=function(){if(!(p.timestamp()>=f.dataTime().timestamp()&&p.timestamp()>=f.timestamp())){var t,e,n=f.style.get("radius"),o=f.style.get("stroke"),a=f.style.get("strokeWidth");e=f.position(),g=0,t=f.data().map(function(t,r){var i=e(t,r);return g=Math.max(g,n(t,r)+(o(t,r)?a(t,r):0)),[i.x,i.y]}),d=new c(t.length);var s,u=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}(t);try{for(u.s();!(s=u.n()).done;){var l=r(s.value,2),h=l[0],m=l[1];d.add(h,m)}}catch(t){u.e(t)}finally{u.f()}d.finish(),p.modified()}},this.pointSearch=function(t,e){var n,r,i,o,a,s,u=[],l=[],c=[],h=f.gcs(),p=f.style.get("fill"),m=f.style.get("stroke"),y=f.style.get("strokeWidth"),v=f.style.get("radius");return(i=f.data())&&i.length?(f._updateRangeTree(),o=f.layer().map(),a=o.gcsToDisplay(t,e),s=[o.displayToGcs({x:a.x-g,y:a.y-g},h),o.displayToGcs({x:a.x+g,y:a.y-g},h),o.displayToGcs({x:a.x-g,y:a.y+g},h),o.displayToGcs({x:a.x+g,y:a.y+g},h)],n={x:Math.min(s[0].x,s[1].x,s[2].x,s[3].x),y:Math.min(s[0].y,s[1].y,s[2].y,s[3].y)},r={x:Math.max(s[0].x,s[1].x,s[2].x,s[3].x),y:Math.max(s[0].y,s[1].y,s[2].y,s[3].y)},u=d.range(n.x,n.y,r.x,r.y),(u=Uint32Array.from(u).sort()).forEach(function(t){var e=i[t],n=m(i[t],t);if(n||p(i[t],t)){var r,s,u,d,g=f.position()(e,t);u=v(i[t],t),(u+=n?y(i[t],t):0)&&(d=u*u,(r=(g=o.gcsToDisplay(g,h)).x-a.x)*r+(s=g.y-a.y)*s<=d&&(l.push(e),c.push(t)))}}),{found:l,index:c}):{found:[],index:[]}},this.polygonSearch=function(t,e,n){var r,i,o,a,s=f.gcs(),u=[],c=[],h={},p=f.layer().map(),m=f.data(),y=f.style.get("fill"),v=f.style.get("stroke"),x=f.style.get("strokeWidth"),_=f.style.get("radius");return t.outer||(t={outer:t,inner:[]}),t.outer.length<3||!m||!m.length?{found:[],index:[],extra:{}}:((e=e||{}).partial=e.partial||!1,(t={outer:p.gcsToDisplay(t.outer,n),inner:(t.inner||[]).map(function(t){return p.gcsToDisplay(t,n)})}).outer.forEach(function(t){i||(i={x:t.x,y:t.y},o={x:t.x,y:t.y}),t.x<i.x&&(i.x=t.x),t.x>o.x&&(o.x=t.x),t.y<i.y&&(i.y=t.y),t.y>o.y&&(o.y=t.y)}),f._updateRangeTree(),a=[p.displayToGcs({x:i.x-g,y:i.y-g},s),p.displayToGcs({x:o.x+g,y:i.y-g},s),p.displayToGcs({x:o.x+g,y:o.y+g},s),p.displayToGcs({x:i.x-g,y:o.y+g},s)],i={x:Math.min(a[0].x,a[1].x,a[2].x,a[3].x),y:Math.min(a[0].y,a[1].y,a[2].y,a[3].y)},o={x:Math.max(a[0].x,a[1].x,a[2].x,a[3].x),y:Math.max(a[0].y,a[1].y,a[2].y,a[3].y)},r=d.range(i.x,i.y,o.x,o.y),(r=Uint32Array.from(r).sort()).forEach(function(n){var r=m[n],i=v(m[n],n);if(i||y(m[n],n)){var o=f.position()(r,n),a=_(m[n],n);if(a+=i?x(m[n],n):0){o=p.gcsToDisplay(o,s);var d=l.distanceToPolygon2d(o,t);(d>=a||d>=0&&"center"===e.partial||d>=-a&&e.partial&&"center"!==e.partial)&&(u.push(r),c.push(n),h[n]={partial:d<a,distance:d})}}}),{found:u,index:c,extra:h})},this.data=function(t){return void 0===t?m():(b||(x=t),y&&!b?f._clusterData():m(t),b=!1,f)},this._init=function(t){t=t||{},h.call(f,t);var e=l.deepMerge({},{radius:5,stroke:!0,strokeColor:{r:.851,g:.604,b:0},strokeWidth:1.25,strokeOpacity:1,fillColor:{r:1,g:.839,b:.439},fill:!0,fillOpacity:.8,position:function(t){return Array.isArray(t)?{x:t[0],y:t[1],z:t[2]||0}:t},origin:function(t){return t.length>=3?t.slice(0,3):[0,0,0]}},void 0===t.style?{}:t.style);return void 0!==t.position&&(e.position=t.position),f.style(e),e.position&&f.position(e.position),f.dataTime().modified(),f.geoOn(a.zoom,function(t){f._handleZoom(t.zoomLevel)}),f},f};u.create=function(t,e){"use strict";return(e=e||{}).type="point",s.create(t,e)},u.capabilities={feature:"point",stroke:"point.stroke"},u.primitiveShapes={auto:"auto",sprite:"sprite",triangle:"triangle",square:"square"},a(u,s),t.exports=u},6645:function(t,e,n){var r=n(4626),i=n(1275),o=n(5325),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},i.call(this,t);var e,r=n(642),s=this,u=this._init,l=this._exit,c=this.data,f=this.draw,h=this.modified,d=this.style,p=[];function m(t,e,n){var r=s.gcs(),i=s.layer().map().gcs();return t=t||s.data(),e=e||s.style.get("position"),n=n||s.style.get("polygon"),t.map(function(t,a){var u=n(t,a);if(u){var l,c,f,h,d,p,m,g,y;h=u.outer||(Array.isArray(u)?u:[]),l=new Array(h.length);for(var v=0;v<h.length;v+=1)l[v]=e.call(s,h[v],v,t,a),d=l[v].x,p=l[v].y,v?(d<f.min.x&&(f.min.x=d),p<f.min.y&&(f.min.y=p),d>f.max.x&&(f.max.x=d),p>f.max.y&&(f.max.y=p)):f={min:{x:d,y:p},max:{x:d,y:p}};c=(u.inner||[]).map(function(n){h=n||[];for(var r=new Array(h.length),i=0;i<h.length;i+=1)r[i]=e.call(s,h[i],i,t,a);return r}),m=o.transformCoordinates(r,i,l),g=c.map(function(t){return o.transformCoordinates(r,i,t)});for(var x=0;x<m.length;x+=1)d=m[x].x,p=m[x].y,x?(d<y.min.x&&(y.min.x=d),p<y.min.y&&(y.min.y=p),d>y.max.x&&(y.max.x=d),p>y.max.y&&(y.max.y=p)):y={min:{x:d,y:p},max:{x:d,y:p}};return{outer:l,inner:c,range:f,mapouter:m,mapinner:g,maprange:y}}})}function g(t){return r.isFunction(t)?function(e){return t(e[0],e[1],e[2],e[3])}:t}return this.featureType="polygon",this._subfeatureStyles={fillColor:!0,fillOpacity:!0,lineCap:!0,lineJoin:!0,strokeColor:!0,strokeOffset:!0,strokeOpacity:!0,strokeWidth:!0},this.data=function(t){var e=c(t);return void 0!==t&&(p=m(),s._checkForStroke()),e},this.polygonCoordinates=function(){return p},this.polygon=function(t){return void 0===t?s.style("polygon"):(s.style("polygon",t),s.dataTime().modified(),s.modified(),p=m(),s)},this.position=function(t){return void 0===t?s.style("position"):(s.style("position",t),s.dataTime().modified(),s.modified(),p=m(),s)},this.pointSearch=function(t,n){var i=[],a=[],u={},l=s.data(),c=s.layer().map();n=null===n?c.gcs():void 0===n?c.ingcs():n;var f=o.transformCoordinates(n,c.gcs(),t);(p.forEach(function(t,e){r.pointInPolygon(f,t.mapouter,t.mapinner,t.maprange)&&(a.push(e),u[e]=!0,i.push(l[e]))}),e)&&e.pointSearch(t).found.forEach(function(t){t.length&&4===t[0].length&&!u[t[0][3]]&&(a.push(t[0][3]),u[t[0][3]]=!0,i.push(l[t[0][3]]))});return{index:a,found:i}},this.polygonSearch=function(t,n,i){var a,u,l=s.data(),c=[],f=[],h={},d=t,m={},g=s.layer().map();if(i=null===i?g.gcs():void 0===i?g.ingcs():i,t.outer||(t={outer:t,inner:[]}),!l||!l.length||t.outer.length<3)return{found:f,index:c,extra:h};if((n=n||{}).partial=n.partial||!1,(t={outer:o.transformCoordinates(i,g.gcs(),t.outer),inner:(t.inner||[]).map(function(t){return o.transformCoordinates(i,g.gcs(),t)})}).outer.forEach(function(t){a||(a={x:t.x,y:t.y},u={x:t.x,y:t.y}),t.x<a.x&&(a.x=t.x),t.x>u.x&&(u.x=t.x),t.y<a.y&&(a.y=t.y),t.y>u.y&&(u.y=t.y)}),p.forEach(function(e,i){if(!(!e.mapouter.length||e.maprange&&(e.maprange.max.x<a.x||e.maprange.min.x>u.x||e.maprange.max.y<a.y||e.maprange.min.y>u.y))){for(var o,s,d=-1;d<e.mapinner.length&&!s;d+=1)for(var p=d<0?e.mapouter:e.mapinner[d],g=0,y=p.length,v=y-1;g<y;v=g,g+=1){var x=r.distanceToPolygon2d(p[g],t);if(x*r.distanceToPolygon2d(p[v],t)<0){s=!0;break}if(r.crossedLineSegmentPolygon2d(p[g],p[v],t)){s=!0;break}x>0&&(o=!0)}o||s||!r.pointInPolygon(t.outer[0],e.mapouter,e.mapinner,e.maprange)||(s=!0),(!n.partial&&o&&!s||n.partial&&(o||s))&&(c.push(i),f.push(l[i]),h[i]={partial:s},m[i]=!0)}}),e){var y=e.polygonSearch(d,n);y.found.forEach(function(t,e){t.length&&4===t[0].length&&(m[t[0][3]]||(c.push(t[0][3]),m[t[0][3]]=!0,f.push(l[t[0][3]]),h[y.index[e]]={partial:!1}),y.extra[y.index[e]].partial&&(h[y.index[e]].partial=!0))})}return{found:f,index:c,extra:h}},this.style=function(t,e){var n=d.apply(s,arguments);return void 0===t||"string"==typeof t&&void 0===e||s._checkForStroke(),n},this.style.get=d.get,this._getLoopData=function(t,e,n){var r,i=[];for(r=0;r<n.length;r+=1)i.push([n[r],r,t,e]);return i},this._checkForStroke=function(){if(!1!==d("stroke")){if(s.layer()){e||(e=s.layer().createFeature("line",{selectionAPI:!1,gcs:s.gcs(),visible:s.visible(void 0,!0),dynamicDraw:!0}),s.dependentFeatures([e]));var t,n=s.style();if(r.isFunction(n.stroke)||!n.stroke){var i=s.style.get("stroke"),o=s.style.get("strokeOpacity");t=function(t){return i(t[2],t[3])?o(t[0],t[1],t[2],t[3]):0}}else t=g(n.strokeOpacity);e.style({antialiasing:g(n.antialiasing),closed:!0,lineCap:g(n.lineCap),lineJoin:g(n.lineJoin),miterLimit:g(n.miterLimit),strokeWidth:g(n.strokeWidth),strokeStyle:g(n.strokeStyle),strokeColor:g(n.strokeColor),strokeOffset:g(n.strokeOffset),strokeOpacity:t,uniformLine:g(n.uniformPolygon)});var a=s.data(),u=s.style("position");if(a!==e._lastData||u!==e._lastPosVal){var l,c,f,h=[],p=s.style.get("position"),m=s.style.get("polygon");for(l=0;l<a.length;l+=1)(c=m(a[l],l))&&(f=c.outer||(Array.isArray(c)?c:[])).length>=2&&(h.push(s._getLoopData(a[l],l,f)),c.inner&&c.inner.forEach(function(t){t.length>=2&&h.push(s._getLoopData(a[l],l,t))}));e.position(function(t,e,n,r){return p(t[0],t[1],t[2],t[3])}),e.data(h),e._lastData=a,e._lastPosVal=u}}}else e&&s.layer()&&(s.layer().deleteFeature(e),e=null,s.dependentFeatures([]))},this.draw=function(){var t=f();return e&&e.draw(),t},this.modified=function(){var t=h();return e&&e.modified(),t},this.rdpSimplifyData=function(t,e,n,i,a){var u=s.layer().map(),l=u.gcs(),c=s.gcs(),f=m(t,n,i);return void 0===e&&(e=.5*u.unitsPerPixel(u.zoom())),f=f.map(function(t){return{outer:o.transformCoordinates(c,l,t.outer),inner:t.inner.map(function(t){return o.transformCoordinates(c,l,t)})}}),t=t.map(function(t,n){var i=f[n],a={};for(var s in t)!t.hasOwnProperty(s)||Array.isArray(t)&&s>=0&&s<t.length||(a[s]=t[s]);if(i&&i.outer.length>=3)if(a.inner=i.inner.filter(function(t){return t.length>=3}),a.outer=r.rdpLineSimplify(i.outer,e,!0,a.inner),a.outer.length>=3){var u=a.inner.slice();a.inner.map(function(t,n){u[n]=a.outer;var i=r.rdpLineSimplify(t,e,!0,u);return u[n]=i,i}).filter(function(t){return t.length>=3}),a.outer=o.transformCoordinates(l,c,a.outer),a.inner=a.inner.map(function(t){return o.transformCoordinates(l,c,t)})}else a.outer=a.inner=[];else a.outer=[];return a}),a?t:(s.style("position",r.identityFunction),s.style("polygon",r.identityFunction),s.data(t),s)},this.mouseOverOrderClosestBorder=function(t){var e=t.feature.data(),n=t.feature.layer().map(),i=o.transformCoordinates(n.ingcs(),t.feature.gcs(),t.mouse.geo),a=t.feature.polygonCoordinates(),s={};t.over.index.forEach(function(t,e){var n,o=a[t];o.outer.forEach(function(t,e){var a=o.outer[(e+1)%o.outer.length],s=r.distance2dToLineSquared(i,t,a);(void 0===n||s<n)&&(n=s)}),o.inner.forEach(function(t){t.forEach(function(e,o){var a=t[(o+1)%t.length],s=r.distance2dToLineSquared(i,e,a);(void 0===n||s<n)&&(n=s)})}),s[t]=n}),t.over.index.sort(function(t,e){return s[t]-s[e]}).reverse(),t.over.index.forEach(function(n,r){t.over.found[r]=e[n]})},this.toPolygonList=function(t){var e=s.style.get("polygon"),n=s.style.get("position");return s.data().map(function(t,r){var i=e(t,r),o=i.outer||(Array.isArray(i)?i:[]);if(o.length<3)return[];var a=[o.map(function(e,i){var o=n(e,i,t,r);return[o.x,o.y]})];return i.inner&&i.inner.forEach(function(e){a.push(e.map(function(e,i){var o=n(e,i,t,r);return[o.x,o.y]}))}),a})},this.fromPolygonList=function(t,e){return s.style({position:function(t){return{x:t[0],y:t[1]}},polygon:function(t){return{outer:t[0],inner:t.slice(1)}}}),s.data(t),s},this._exit=function(){e&&s.layer()&&(s.layer().deleteFeature(e),e=null,s.dependentFeatures([])),l()},this._init=function(t){t=t||{},u.call(s,t);var e=Object.assign({},{fill:!0,fillColor:{r:0,g:.5,b:.5},fillOpacity:1,stroke:!1,strokeWidth:1,strokeStyle:"solid",strokeColor:{r:0,g:1,b:1},strokeOpacity:1,polygon:r.identityFunction,position:function(t){return Array.isArray(t)?{x:t[0],y:t[1],z:t[2]||0}:t},origin:function(t){for(var e=0;e<t.length;e+=1)if(t[e].vertices.length>=3)return t[e].vertices.slice(0,3);return[0,0,0]}},void 0===t.style?{}:t.style);void 0!==t.polygon&&(e.polygon=t.polygon),void 0!==t.position&&(e.position=t.position),s.style(e),s._checkForStroke()},this};a.create=function(t,e){"use strict";return(e=e||{}).type="polygon",i.create(t,e)},a.capabilities={feature:"polygon"},r(a,i),t.exports=a},3842:function(t,e,n){var r=n(5616),i=n(4626),o=n(1275),a=function(t){"use strict";var e=n(5325),i=n(642);if(!(this instanceof a))return new a(t);t=t||{},o.call(this,t);var s,u,l=this,c=this._init,f=t.nearestPixel,h=0,d=[],p=[];return this.featureType="quad",this._objectListStart=function(t){r.each(t,function(t,e){e.used=!1})},this._objectListGet=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].entry===e)return t[n].used=!0,t[n].value},this._objectListAdd=function(t,e,n){t.push({entry:e,value:n,used:!0})},this._objectListEnd=function(t){for(var e=t.length-1;e>=0;e-=1)t[e].used||t.splice(e,1)},this.pointSearch=function(t,n){var o,a,s=[],c=[],f={},h=[{},{},{},{}],d=[{},{},{},{}],p=[0,1,2,0],m=[1,2,3,1],g=l.data(),y=l.layer().map();return n=null===n?y.gcs():void 0===n?y.ingcs():n,t=e.transformCoordinates(n,y.gcs(),t),u||l._generateQuads(),r.each([u.clrQuads,u.imgQuads,u.vidQuads],function(e,n){n.forEach(function(e,n){for(o=0;o<p.length;o+=1)h[o].x=e.pos[3*p[o]],h[o].y=e.pos[3*p[o]+1],h[o].z=e.pos[3*p[o]+2],d[o].x=e.pos[3*m[o]],d[o].y=e.pos[3*m[o]+1],d[o].z=e.pos[3*m[o]+2];if((i.pointInPolygon(t,h)||i.pointInPolygon(t,d))&&(c.push(e.idx),s.push(g[e.idx]),!(a=i.pointToTriangleBasis2d(t,h[0],h[1],h[2]))||a.x+a.y>1?(a=i.pointToTriangleBasis2d(t,d[2],d[1],d[0]))&&(a.x=1-a.x):a.y=1-a.y,a)){if(e.crop&&void 0!==e.crop.x&&void 0!==e.crop.y&&(a.x>=e.crop.x||a.y>=e.crop.y))return c.pop(),void s.pop();f[e.idx]={basis:a,_quad:e}}})}),{index:c,found:s,extra:f}},this.position=function(t){return void 0===t?l.style("position"):(l.style("position",i.ensureFunction(t)),l.dataTime().modified(),l.modified(),l)},this._positionToQuad=function(t,n,i,o){var a=t.call(l,i,o);if(a.ll&&a.ur||a.ul&&a.lr){var s=l.gcs(),u=l.layer().map().gcs(),c={};return r.each(["ll","lr","ul","ur"],function(t,r){void 0!==a[r]&&(c[r]={},void 0===a[r].x?c[r]=[a[r][0],a[r][1],a[r][2]]:c[r]=[a[r].x,a[r].y,a[r].z],void 0===c[r][2]&&(c[r][2]=n.call(l,i,o)),s!==u&&!1!==s&&(c[r]=e.transformCoordinates(s,u,c[r])))}),c.ll=c.ll||[c.ul[0],c.lr[1],(c.ul[2]+c.lr[2])/2],c.lr=c.lr||[c.ur[0],c.ll[1],(c.ur[2]+c.ll[2])/2],c.ur=c.ur||[c.lr[0],c.ul[1],(c.lr[2]+c.ul[2])/2],c.ul=c.ul||[c.ll[0],c.ur[1],(c.ll[2]+c.ur[2])/2],c}},this._checkQuadUpdate=function(t,e){},this._generateQuads=function(){var t,e,n=l.position(),o=l.style.get("image"),a=l.style.get("video"),c=l.style.get("delayRenderWhenSeeking"),f=l.style.get("color"),m=l.style.get("depth"),g=l.style.get("opacity"),y=l.style.get("drawOnAsyncResourceLoaded"),v=l.style.get("previewColor"),x=l.style.get("previewImage"),_=l.data(),b=[],w=[],M=[],A=[0,0,0];return l._objectListStart(d),l._objectListStart(p),r.each(_,function(u,_){if(_._cachedQuad)return e=_._cachedQuad.diag2,(void 0===t||_._cachedQuad.diag2&&_._cachedQuad.diag2<t)&&(A=_._cachedQuad.ll,t=_._cachedQuad.diag2),_._cachedQuad.clrquad&&b.push(_._cachedQuad.clrquad),_._cachedQuad.imgquad&&(_._cachedQuad.imageEntry&&l._objectListGet(d,_._cachedQuad.imageEntry),w.push(_._cachedQuad.imgquad)),void(_._cachedQuad.vidquad&&(_._cachedQuad.videoEntry&&l._objectListGet(p,_._cachedQuad.videoEntry),M.push(_._cachedQuad.vidquad)));var E,T,S,C,k,P,O,L,I,R,D,N,F={};if(O=l._positionToQuad(n,m,_,u),R=g.call(l,_,u),void 0!==O&&R&&!(R<0)){if(e=Math.pow(O.ll[0]-O.ur[0],2)+Math.pow(O.ll[1]-O.ur[1],2)+Math.pow(O.ll[2]-O.ur[0],2)+Math.pow(O.lr[0]-O.ur[0],2)+Math.pow(O.lr[1]-O.ur[1],2)+Math.pow(O.lr[2]-O.ur[0],2),F.diag2=e,F.ll=O.ll,(void 0===t||e&&e<t)&&(A=O.ll,t=e),O=[O.ll[0],O.ll[1],O.ll[2],O.lr[0],O.lr[1],O.lr[2],O.ul[0],O.ul[1],O.ul[2],O.ur[0],O.ur[1],O.ur[2]],E={idx:u,pos:O,opacity:R,zOffset:_.zOffset},_.reference&&(E.reference=_.reference),_.crop&&(E.crop=_.crop),I=(L=o.call(l,_,u))?null:a.call(l,_,u),_.texture&&_.texture.data&&_.texture.width&&_.texture.height){var j={width:_.texture.width,height:_.texture.height,type:_.texture.type||"RGBA",data:_.texture.data};E.imageTexture=j,w.push(E),F.imgquad=E}else if(L){if(F.imageEntry=L,void 0===(T=l._objectListGet(d,L))&&(L instanceof Image||L instanceof HTMLCanvasElement?T=L:(T=new Image).src=L,l._objectListAdd(d,L,T)),i.isReadyImage(T)||T instanceof HTMLCanvasElement)E.image=T;else if(D=void 0,(N=x.call(l,_,u))&&i.isReadyImage(N)?E.image=N:(D=v.call(l,_,u),E.color=i.convertColor(D),E.color&&void 0!==E.color.r&&void 0!==E.color.g&&void 0!==E.color.b?(b.push(E),F.clrquad=E):D=void 0),y.call(l,_,u))P=i.isReadyImage(T,!0)?null:r.Deferred(),C=T.onload,T.onload=function(){if(void 0!==D&&(b.includes(E)&&b.splice(b.indexOf(E),1),delete F.clrquad),E.image=T,l.dataTime().modified(),l.modified(),l._update(),l.layer().draw(),P&&P.resolve(),C)return C.apply(l,arguments)},k=T.onerror,T.onerror=function(){if(P&&P.reject(),k)return k.apply(l,arguments)},P&&l.layer().addPromise(P.promise());else if(void 0===D&&!E.image)return;w.push(E),F.imgquad=E}else if(I){if(F.videoEntry=I,void 0===(S=l._objectListGet(p,I))&&(I instanceof HTMLVideoElement?S=I:(S=document.createElement("video")).src=I,l._objectListAdd(p,I,S),r(S).off(".geojsvideo").on("seeking.geojsvideo canplay.geojsvideo pause.geojsvideo playing.geojsvideo",function(t){l._checkQuadUpdate(E,t)})),E.delayRenderWhenSeeking=c.call(l,_,u),void 0===E.delayRenderWhenSeeking&&(E.delayRenderWhenSeeking=!0),i.isReadyVideo(S))E.video=S;else if(D=v.call(l,_,u),E.color=i.convertColor(D),E.color&&void 0!==E.color.r&&void 0!==E.color.g&&void 0!==E.color.b?(b.push(E),F.clrquad=E):D=void 0,y.call(l,_,u))P=i.isReadyVideo(S,!0)?null:r.Deferred(),C=S.onloadeddata,S.onloadeddata=function(){if(void 0!==D&&(b.includes(E)&&b.splice(b.indexOf(E),1),delete F.clrquad),E.video=S,l.dataTime().modified(),l.modified(),l._update(),l.layer().draw(),P&&P.resolve(),C)return C.apply(l,arguments)},k=S.onerror,S.onerror=function(){if(P&&P.reject(),k)return k.apply(l,arguments)},P&&l.layer().addPromise(P.promise());else if(void 0===D&&!E.video)return;M.push(E),F.vidquad=E}else{if(E.color=i.convertColor(f.call(l,_,u)),!E.color||void 0===E.color.r||void 0===E.color.g||void 0===E.color.b)return;b.push(E),F.clrquad=E}F.clrquad&&(h+=1,F.clrquad.quadId=h),F.imgquad&&(h+=1,F.imgquad.quadId=h),F.vidquad&&(h+=1,F.vidquad.quadId=h),!1!==s&&(_._cachedQuad=F)}}),l._objectListEnd(d),l._objectListEnd(p),u={clrQuads:b,imgQuads:w,vidQuads:M,origin:new Float32Array(A)}},this.cacheUpdate=function(t){return null==t?r.each(l.data(),function(t,e){e._cachedQuad&&delete e._cachedQuad}):(isFinite(t)&&(t=l.data()[t]),t._cachedQuad&&delete t._cachedQuad),l.modified(),l},this.video=function(t){var e,n;return isFinite(t)&&(t=l.data()[t]),t._cachedQuad?e=(t._cachedQuad.vidquad||{}).video:(u||l._generateQuads(),(n=l.data().indexOf(t))>=0&&(e=l._objectListGet(p,l.style.get("video")(t,n)))),e instanceof HTMLVideoElement?e:null},this.nearestPixel=function(t){return void 0===t?f:(f=t,l.modified(),l)},this._init=function(t){t=t||{},c.call(l,t),s=!1!==t.cacheQuads;var e=Object.assign({},{color:{r:1,g:1,b:1},opacity:1,depth:0,drawOnAsyncResourceLoaded:!0,previewColor:null,previewImage:null,image:function(t){return t.image},video:function(t){return t.video},position:i.identityFunction},void 0===t.style?{}:t.style);void 0!==t.position&&(e.position=i.ensureFunction(t.position)),l.style(e),l.dataTime().modified()},l};a.create=function(t,e){"use strict";return(e=e||{}).type="quad",o.create(t,e)},a.capabilities={color:"quad.color",image:"quad.image",imageCrop:"quad.imageCrop",imageFixedScale:"quad.imageFixedScale",imageFull:"quad.imageFull",canvas:"quad.canvas",video:"quad.video",texture:"quad.texture"},i(a,o),t.exports=a},1098:function(t,e,n){var r=n(8695),i=n(1949),o={dom:{}},a={},s={},u={},l={},c={},f={},h={},d={},p={registerFileReader:function(t,e){f[t]=e},createFileReader:function(t,e){return f.hasOwnProperty(t)?f[t](e):null},registerRenderer:function(t,e){u[t]=e},createRenderer:function(t,e,n,r){if(u.hasOwnProperty(t)){var i=u[t]({layer:e,canvas:n,options:r});return i._init(),i}return null},checkRenderer:function(t,e){if(null===t)return t;if(u.hasOwnProperty(t)){var n=u[t];if(!n.supported||n.supported())return n.apiname||t;if(!n.fallback||e)return!1;var r=p.checkRenderer(n.fallback(),!0);return!1!==r&&console.warn(t+" renderer is unavailable, using "+r+" renderer instead"),r}return!1},rendererForFeatures:function(t){var e,n,r,i,o,a,s=["webgl","canvas","svg","vtkjs",null];for(n=0;n<s.length;n+=1)if(e=s[n],!1!==p.checkRenderer(e,!0)){if(!t)return e;if(l[e]){for(a=!0,i=0;i<t.length;i+=1){if(o=null,(r=t[i]).indexOf(".")>=0&&(o=r,r=r.substr(0,r.indexOf("."))),void 0===l[e][r]){a=!1;break}if(o&&c[e][r]&&!c[e][r][o]){a=!1;break}}if(a)return e}}return console.warn('There is no renderer available for the feature list "'+(t||[]).join(", ")+'".'),!1},registerFeature:function(t,e,n,r){t in l||(l[t]={},c[t]={});var i=l[t][e];return i&&console.warn("The "+t+"."+e+" feature is already registered"),l[t][e]=n,c[t][e]=r,i},createFeature:function(t,e,n,r){var o=n.api(),a={layer:e,renderer:n};if(o in l&&t in l[o]){void 0!==r&&i.deepMerge(a,r);var s=l[o][t](a);return void 0===e.gcs&&(e.gcs=function(){return e.map().gcs()}),s}return null},registerLayerAdjustment:function(t,e,n){t in h||(h[t]={});var r=h[t][e];return r&&console.warn("The "+t+"."+e+" layer adjustment is already registered"),h[t][e]=n,r},adjustLayerForRenderer:function(t,e){var n=e.rendererName();n&&h&&h[n]&&h[n][t]&&h[n][t].apply(e)},registerLayer:function(t,e,n){a[t]=e,s[t]=n},createLayer:function(t,e,n){var r={map:e},o=null;if(t in a){if(n.renderer||n.features||!s||(r.features=s[t]),void 0!==n){var u=n.data;delete n.data,i.deepMerge(r,n),u&&(r.data=u)}return(o=a[t](r)).layerName=t,o._init(),o}return null},registerWidget:function(t,e,n){t in o||(o[t]={});var r=o[t][e];return r&&console.warn("The "+t+"."+e+" widget is already registered"),o[t][e]=n,r},createWidget:function(t,e,n){var r={layer:e};if(t in o.dom)return void 0!==n&&i.deepMerge(r,n),o.dom[t](r);throw new Error("Cannot create unknown widget "+t)},registerAnnotation:function(t,e,n){var i=d[t];return i&&console.warn("The "+t+" annotation is already registered"),d[t]={func:e,features:n||{}},r["annotation_"+t]="geo_annotation_"+t,i},createAnnotation:function(t,e){if(d[t])return d[t].func(e);console.warn("The "+t+" annotation is not registered")},listAnnotations:function(){return Object.keys(d)},featuresForAnnotations:function(t){var e=[];return(Array.isArray(t)?t:Object.keys(t)).forEach(function(n){d[n]&&Object.keys(d[n].features).forEach(function(r){Array.isArray(t)||!0===t[n]||!Array.isArray(d[n].features[r])?e.push(r):t[n].forEach(function(t){d[n].features[r].includes(t)&&e.push(r)})})}),e},rendererForAnnotations:function(t){return p.rendererForFeatures(p.featuresForAnnotations(t))}};p.registries={annotations:d,features:l,featureCapabilities:c,fileReaders:f,layers:a,renderers:u,widgets:o},t.exports=p},2274:function(t,e,n){var r=n(4626),i=n(1338),o=function(t){"use strict";if(!(this instanceof o))return new o(t);i.call(this);var e=this,n=0,r=0,a=void 0===(t=t||{}).layer?null:t.layer,s=void 0===t.canvas?null:t.canvas,u=!1;return this.layer=function(){return a},this.canvas=function(t){return void 0===t?s:(s=t,e.modified(),e)},this.map=function(){return a?a.map():null},this.initialized=function(t){return void 0===t?u:(u=t,e)},this.api=function(){throw new Error("Should be implemented by derived classes")},this.width=function(){return n},this.height=function(){return r},this._setWidthHeight=function(t,i){return n=t,r=i,e},this._init=function(){return e},this._resize=function(t,n,r,i){return e._setWidthHeight(r,i),e},this._render=function(){return e},this};r(o,i),t.exports=o},5402:function(t,e,n){var r=n(4626),i=n(1338),o=function(t){"use strict";if(!(this instanceof o))return new o;i.call(this,t);var e=this,n=null,r=[],a=this._exit,s=this.geoTrigger,u=this.addPromise,l=this.removePromise;return this.addPromise=function(t){return n&&n.addPromise(t),u(t),e},this.removePromise=function(t){return n&&n.removePromise(t),l(t),e},this.parent=function(t){return void 0===t?n:(n=t,e)},this.addChild=function(t){return Array.isArray(t)?(t.forEach(e.addChild),e):(t.parent(e),r.push(t),e)},this.removeChild=function(t){return Array.isArray(t)?(t.forEach(e.removeChild),e):(r=r.filter(function(e){return e!==t}),e)},this.children=function(){return r.slice()},this.draw=function(t){return e.children().forEach(function(e){e.draw(t)}),e},this.geoTrigger=function(t,i,o){var a;return a=(i=i||{}).geo||{},i.geo=a,a.stopPropagation?e:!o&&n&&a._triggeredBy!==n?(a._triggeredBy=e,n.geoTrigger(t,i),e):(s.call(e,t,i),a.stopPropagation||r.forEach(function(n){n.geoTrigger&&(a._triggeredBy=e,n.geoTrigger(t,i))}),e)},this._exit=function(){r=[],n=null,a()},this};r(o,i),t.exports=o},9079:function(t){t.exports="ee211d0404e96876a22a741f9b0a90002ca0a983"},3832:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(3187),a=function(t){"use strict";var e=this;return this instanceof a?(o.call(this,t),this.select=function(){var t=e.renderer(),n={},r=e.nodeFeature(),i=e.linkFeatures();return n.nodes=t.select(r._svgid()),n.links=i.map(function(e){return t.select(e._svgid())}),n},this):new a(t)};r(a,o),i("svg","graph",a),t.exports=a},6488:function(t,e,n){n(6409).svg={rescale:n(4765)},t.exports={graphFeature:n(3832),lineFeature:n(9456),object:n(5005),pathFeature:n(9927),pointFeature:n(2602),quadFeature:n(4087),renderer:n(2493),tileLayer:n(4061),trackFeature:n(2037),uniqueID:n(7376),vectorFeature:n(5747)}},9456:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(9281),a=function(t){"use strict";if(!(this instanceof a))return new a(t);var e=n(2493).d3,r=n(5005),i=n(77),s=n(642);t=t||{},o.call(this,t),r.call(this);var u=this,l=this._init,c=i(),f=0,h=this._update;return this._init=function(t){return l.call(u,t),u},this._build=function(){var t,n,r=u.data()||[],i=u.style(),o=u.renderer(),a=u.position();for(h.call(u),i.fill=function(){return!1},r.forEach(function(n,r){var l,c,f=u.line()(n,r),h={};function d(t){return s.isFunction(t)?function(){return t(f[0],0,n,r)}:t}for(c in i)i.hasOwnProperty(c)&&(h[c]=d(i[c]));t=e.line().x(function(t){return u.featureGcsToDisplay(t).x}).y(function(t){return u.featureGcsToDisplay(t).y}).curve(u.style.get("closed")(n,r)&&f.length>2?e.curveLinearClosed:e.curveLinear),l={data:[f.map(function(t,e){return a(t,e,n,r)})],append:"path",attributes:{d:t},id:u._svgid()+r,classes:["svgLineFeature","svgSubLine-"+r],visible:u.visible,style:h},o._drawFeatures(l)}),n=r.length;n<f;n+=1)o._removeFeature(u._svgid()+n);return f=r.length,c.modified(),u.updateTime().modified(),u},this._update=function(){return h.call(u),u.timestamp()>=c.timestamp()&&u._build(),u},this._init(t),this};r(a,o);var s={};s[o.capabilities.basic]=!0,s[o.capabilities.multicolor]=!1,i("svg","line",a,s),t.exports=a},5005:function(t,e,n){var r=function(t){"use strict";var e=n(1338),i=n(7376);if(!(this instanceof e))return new r(t);var o="svg-"+i(),a=this._exit,s=this,u=this.visible,l=this.draw;return this._svgid=function(){return o},this.select=function(){return s.renderer().select(s._svgid())},this.draw=function(){return s.ready&&(s._update(),l()),s},this._exit=function(){s.renderer()._removeFeature(s._svgid()),a()},this.visible=function(t,e){return void 0!==t&&t!==u(void 0,!0)&&s.renderer()&&s.renderer()._scheduleUpdate(),u(t,e)},this};t.exports=r},9927:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(2266),a=function(t){"use strict";if(!(this instanceof a))return new a(t);var e=n(5005),r=n(77);t=t||{},o.call(this,t),e.call(this);var i=this,s=r(),u=this._update,l={style:{}};return this._build=function(){var t,e,n=i.data()||[],r=i.style.get(),o=i.style.get("position");return u.call(i),e=function(t){return"M"+t.source.x+","+t.source.y+"C"+t.source.x+","+(t.source.y+t.target.y)/2+" "+t.target.x+","+(t.source.y+t.target.y)/2+" "+t.target.x+","+t.target.y},t=[],n.forEach(function(e,r){var a,s;r<n.length-1&&(a=o(e,r),s=o(n[r+1],r+1),t.push({source:i.featureGcsToDisplay(a),target:i.featureGcsToDisplay(s)}))}),l.data=t,l.attributes={d:e},l.id=i._svgid(),l.append="path",l.classes=["svgPathFeature"],l.style=Object.assign({fill:function(){return!1},fillColor:{r:0,g:0,b:0}},r),l.visible=i.visible,i.renderer()._drawFeatures(l),s.modified(),i.updateTime().modified(),i},this._update=function(){return u.call(i),i.dataTime().timestamp()>=s.timestamp()&&i._build(),i},this._init(t),this};r(a,o),i("svg","path",a),t.exports=a},2602:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(7541),a=function(t){"use strict";if(!(this instanceof a))return new a(t);var e=n(5005),r=n(77);t=t||{},o.call(this,t),e.call(this);var i=this,s=this._init,u=this._update,l=r(),c={};return this._init=function(t){return s.call(i,t),i},this._build=function(){var t=i.data(),e=i.style.get(),n=i.renderer(),r=i.position();return u.call(i),t||(t=[]),c.id=i._svgid(),c.data=t,c.append="circle",c.attributes={r:n._convertScale(e.radius),cx:function(t){return i.featureGcsToDisplay(r(t)).x},cy:function(t){return i.featureGcsToDisplay(r(t)).y}},c.style=e,c.classes=["svgPointFeature"],c.visible=i.visible,i.renderer()._drawFeatures(c),l.modified(),i.updateTime().modified(),i},this._update=function(){return u.call(i),i.timestamp()>=l.timestamp()&&i._build(),i},this._init(t),this};r(a,o);var s={};s[o.capabilities.stroke]=!0,i("svg","point",a,s),t.exports=a},4087:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(3842),a=function(t){"use strict";if(!(this instanceof a))return new a(t);var e=n(5616),r=n(2493).d3,i=n(5005);o.call(this,t),i.call(this);var s,u=this,l=this._exit,c=this._init,f=this._update;return this._build=function(){if(this.position()){var t=u.renderer(),n=t.layer().map();s=u._generateQuads();var i=[];e.each(s.clrQuads,function(t,e){i.push({type:"clr",quad:e,zIndex:e.pos[2]})}),e.each(s.imgQuads,function(t,e){e.image&&i.push({type:"img",quad:e,zIndex:e.pos[2]})});var o={id:u._svgid(),data:i,dataIndex:function(t){return t.quad.quadId},append:function(t){var e=this.namespaceURI,n="clr"===t.type?"polygon":"image";return e?document.createElementNS(e,n):document.createElement(n)},attributes:{fill:function(t){if("clr"===t.type)return r.rgb(255*t.quad.color.r,255*t.quad.color.g,255*t.quad.color.b);1!==t.quad.opacity&&r.select(this).style("opacity",t.quad.opacity)},height:function(t){return"clr"===t.type?void 0:1},points:function(e){if("clr"===e.type&&!e.points){var r,i=[];for(r=0;r<e.quad.pos.length;r+=3){var o={x:e.quad.pos[r],y:e.quad.pos[r+1],z:e.quad.pos[r+2]};o=n.gcsToDisplay(o,null),o=t.baseToLocal(o),i.push(o.x+","+o.y)}e.points=i[0]+" "+i[1]+" "+i[3]+" "+i[2]}return"clr"===e.type?e.points:void 0},preserveAspectRatio:function(t){return"clr"===t.type?void 0:"none"},reference:function(t){return t.quad.reference},stroke:!1,transform:function(e){if("img"===e.type&&e.quad.image&&!e.svgTransform){var r,i,o,a,s=[],u=-1,l=e.quad.image.width,c=e.quad.image.height;for(o=0;o<e.quad.pos.length;o+=3){var f={x:e.quad.pos[o],y:e.quad.pos[o+1],z:e.quad.pos[o+2]};f=n.gcsToDisplay(f,null),f=t.baseToLocal(f),s.push(f)}for(o=0;o<4;o+=1)(r=Math.abs(s[(o+1)%4].x*(s[(o+2)%4].y-s[(o+3)%4].y)+s[(o+2)%4].x*(s[(o+3)%4].y-s[(o+1)%4].y)+s[(o+3)%4].x*(s[(o+1)%4].y-s[(o+2)%4].y))/2)>u&&(u=r,i=o);e.svgTransform=[3===i||2===i?s[1].x-s[0].x:s[3].x-s[2].x,3===i||2===i?s[1].y-s[0].y:s[3].y-s[2].y,0===i||2===i?s[1].x-s[3].x:s[0].x-s[2].x,0===i||2===i?s[1].y-s[3].y:s[0].y-s[2].y,2===i?s[3].x+s[0].x-s[1].x:s[2].x,2===i?s[3].y+s[0].y-s[1].y:s[2].y],Math.abs(e.svgTransform[1]/l)<1e-6&&Math.abs(e.svgTransform[2]/c)<1e-6&&(a=e.svgTransform[0]/l,e.svgTransform[4]=Math.round(e.svgTransform[4]/a)*a,a=e.svgTransform[3]/c,e.svgTransform[5]=Math.round(e.svgTransform[5]/a)*a)}return"img"===e.type&&e.quad.image?"matrix("+e.svgTransform.join(" ")+")":void 0},width:function(t){return"clr"===t.type?void 0:1},x:function(t){return"clr"===t.type?void 0:0},"xlink:href":function(t){return"clr"!==t.type&&t.quad.image?t.quad.image.src:void 0},y:function(t){return"clr"===t.type?void 0:0}},style:{fillOpacity:function(t){return"clr"===t.type?t.quad.opacity:void 0}},onlyRenderNew:!this.style("previewColor")&&!this.style("previewImage"),sortByZ:!0,visible:u.visible,classes:["svgQuadFeature"]};t._drawFeatures(o),u.buildTime().modified()}},this._update=function(){return f.call(u),(u.buildTime().timestamp()<=u.dataTime().timestamp()||u.buildTime().timestamp()<u.timestamp())&&u._build(),u},this._init=function(){c.call(u,t)},this._exit=function(){l.call(u)},u._init(t),this};r(a,o);var s={};s[o.capabilities.color]=!0,s[o.capabilities.image]=!0,s[o.capabilities.imageCrop]=!1,s[o.capabilities.imageFixedScale]=!1,s[o.capabilities.imageFull]=!1,s[o.capabilities.canvas]=!1,s[o.capabilities.video]=!1,i("svg","quad",a,s),t.exports=a},4765:function(t){t.exports="geo_svg_rescale"},2493:function(t,e,n){var r=n(4626),i=n(1098).registerRenderer,o=n(2274),a=function(t){"use strict";var e=a.d3,r=n(5005),i=n(642),s=n(6409),u=n(4765);if(!(this instanceof a))return new a(t);o.call(this,t);var l=this._exit;r.call(this,t),t=t||{};var c=this,f=null,h={},d=null,p=null,m=1,g={dx:0,dy:0,rx:0,ry:0,rotation:0},y={},v={},x=null,_=null;function b(t){return t?x.select(".group-"+t):x.select(".group-"+c._svgid())}function w(){var t=c.layer().map(),e=t.size().width,n=t.size().height;if(!e||!n)throw new Error("Map layer has size 0");c._setWidthHeight(e,n),p=Math.pow(e*e+n*n,.5),d={upperLeft:t.displayToGcs({x:0,y:0},null),lowerRight:t.displayToGcs({x:e,y:n},null),center:t.displayToGcs({x:e/2,y:n/2},null)}}return this._convertColor=function(t,n){return t=i.ensureFunction(t),n=n||function(){return!0},function(){var r="none";return n.apply(c,arguments)&&(r=t.apply(c,arguments)).hasOwnProperty("r")&&r.hasOwnProperty("g")&&r.hasOwnProperty("b")&&(r=e.rgb(255*r.r,255*r.g,255*r.b)),r}},this._convertScale=function(t){return t=i.ensureFunction(t),function(){return t.apply(c,arguments)/m}},this._setTransform=function(){if(d||w(),f){var t,e,n,r,i,o,a=c.layer().map(),s=a.gcsToDisplay(d.upperLeft,null),u=a.gcsToDisplay(d.lowerRight,null),l=a.gcsToDisplay(d.center,null),h=b();n=Math.sqrt(Math.pow(u.y-s.y,2)+Math.pow(u.x-s.x,2))/p,r=a.rotation(),i=-c.width()/2,o=-c.height()/2,t=n*i+l.x,e=n*o+l.y,r||(t=Math.round(t),e=Math.round(e));var y="matrix("+[n,0,0,n,t,e].join()+")";r&&(y+=" rotate("+[180*r/Math.PI,-i,-o].join()+")"),h.attr("transform",y),m=n,g.dx=t,g.dy=e,g.rx=i,g.ry=o,g.rotation=r}},this.baseToLocal=function(t){if(t={x:(t.x-g.dx)/m,y:(t.y-g.dy)/m},g.rotation){var e=Math.sin(-g.rotation),n=Math.cos(-g.rotation),r=t.x+g.rx,i=t.y+g.ry;t={x:r*n-i*e-g.rx,y:r*e+i*n-g.ry}}return t},this.localToBase=function(t){if(g.rotation){var e=Math.sin(g.rotation),n=Math.cos(g.rotation),r=t.x+g.rx,i=t.y+g.ry;t={x:r*n-i*e-g.rx,y:r*e+i*n-g.ry}}return t={x:t.x*m+g.dx,y:t.y*m+g.dy}},this._init=function(t){if(!c.canvas()){var n;t.widget=t.widget||!1,(x="d3Parent"in t?e.select(t.d3Parent).append("svg"):e.select(c.layer().node().get(0)).append("svg")).attr("display","block");var r=(_=x.append("defs")).append("filter").attr("id","geo-highlight").attr("x","-100%").attr("y","-100%").attr("width","300%").attr("height","300%");r.append("feMorphology").attr("operator","dilate").attr("radius",2).attr("in","SourceAlpha").attr("result","dilateOut"),r.append("feGaussianBlur").attr("stdDeviation",5).attr("in","dilateOut").attr("result","blurOut"),r.append("feColorMatrix").attr("type","matrix").attr("values","-1 0 0 0 1  0 -1 0 0 1  0 0 -1 0 1  0 0 0 1 0").attr("in","blurOut").attr("result","invertOut"),r.append("feBlend").attr("in","SourceGraphic").attr("in2","invertOut").attr("mode","normal"),t.widget||(n=t.canvas||x.append("g")),(r=_.append("filter").attr("id","geo-blur").attr("x","-100%").attr("y","-100%").attr("width","300%").attr("height","300%")).append("feGaussianBlur").attr("stdDeviation",20).attr("in","SourceGraphic"),f=c.layer().sticky(),x.attr("class",c._svgid()),x.attr("width",c.layer().node().width()),x.attr("height",c.layer().node().height()),t.widget?c.canvas(x):(n.attr("class","group-"+c._svgid()),c.canvas(n))}return c._setTransform(),c},this.api=function(){return a.apiname},this.scaleFactor=function(){return m},this._resize=function(t,e,n,r){return d||w(),x.attr("width",n),x.attr("height",r),c._setTransform(),c._setWidthHeight(n,r),c.layer().geoTrigger(u,{scale:m},!0),c},this._exit=function(){h={},c.canvas().remove(),x.remove(),x=void 0,_.remove(),_=void 0,y={},v={},l()},this._definitions=function(){return _},this._drawFeatures=function(t){return h[t.id]={data:t.data,index:t.dataIndex,style:t.style,visible:t.visible,attributes:t.attributes,classes:t.classes,append:t.append,onlyRenderNew:t.onlyRenderNew,sortByZ:t.sortByZ,parentId:t.parentId},c.__render(t.id,t.parentId)},this.__render=function(t,e){var n;if(void 0===t){for(n in h)h.hasOwnProperty(n)&&c.__render(n);return c}return e?c._renderFeature(t,e):(y[t]=!0,c.layer().map().scheduleAnimationFrame(c._renderFrame)),c},this._scheduleUpdate=function(){c.layer().map().scheduleAnimationFrame(c._renderFrame)},this._renderFrame=function(){var t;for(t in v)c.select(t).remove(),_.selectAll("."+t).remove();v={};var e=y;for(t in y={},e)e.hasOwnProperty(t)&&c._renderFeature(t);for(t in h)h.hasOwnProperty(t)&&void 0===e[t]&&c.select(t).attr("visibility",!h[t].visible||h[t].visible()?"visible":"hidden")},this._renderFeature=function(t,e){if(!h[t])return c;c.select(t).remove();var n,r,i=h[t].data,o=h[t].index,a=h[t].style,s=h[t].visible,u=h[t].attributes,l=h[t].classes,f=h[t].append,d=c.select(t,e).data(i,o);return n=d.enter().append(f),d.exit().remove(),function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&t.attr(n,e[n])}(r=n,u),r.attr("class",l.concat([t]).join(" ")),function(t,e){var n,r,i;function o(){return e.fill.apply(c,arguments)?null:"none"}function a(){return e.stroke.apply(c,arguments)?null:"none"}for(n in e)e.hasOwnProperty(n)&&(i=null,r=null,"strokeColor"===n?(r="stroke",i=c._convertColor(e[n],e.stroke)):"stroke"===n&&e[n]&&!e.hasOwnProperty("strokeColor")?(r="stroke",i=a):"strokeWidth"===n?(r="stroke-width",i=c._convertScale(e[n])):"strokeOpacity"===n?(r="stroke-opacity",i=e[n]):"fillColor"===n?(r="fill",i=c._convertColor(e[n],e.fill)):"fill"!==n||e.hasOwnProperty("fillColor")?"fillOpacity"===n?(r="fill-opacity",i=e[n]):"lineCap"===n?(r="stroke-linecap",i=e[n]):"lineJoin"===n?(r="stroke-linejoin",i=e[n]):"miterLimit"===n&&(r="stroke-miterlimit",i=e[n]):(r="fill",i=o),r&&t.style(r,i))}(r,a),s&&r.attr("visibility",s()?"visible":"hidden"),n.size()&&h[t].sortByZ&&d.sort(function(t,e){return(t.zIndex||0)-(e.zIndex||0)}),c},this.select=function(t,e){return b(e).selectAll("."+t)},this._removeFeature=function(t){return v[t]=!0,c.layer().map().scheduleAnimationFrame(c._renderFrame),delete h[t],y[t]&&delete y[t],c},this.draw=function(){},this.layer().geoOn(s.pan,c._setTransform),this.layer().geoOn(s.rotate,c._setTransform),this.layer().geoOn(s.zoom,function(){c._setTransform(),c.__render(),c.layer().geoTrigger(u,{scale:m},!0)}),this.layer().geoOn(s.resize,function(t){c._resize(t.x,t.y,t.width,t.height)}),this._init(t),this};a.apiname="svg",r(a,o),i("svg",a),i("d3",a),a.supported=function(){delete a.d3;try{a.d3=n(5127),a.d3&&a.d3.rgb||(a.d3=void 0)}catch(t){}return void 0!==a.d3},a.fallback=function(){return null},a.supported(),t.exports=a},4061:function(t,e,n){var r=function(){"use strict";var t,e=this,n=this._init,r=this._exit,i=this._update,o=0,a=[];this._drawTile=function(n){if(t){var r=e._tileBounds(n),i=n.index.level||0,s=e._tileOffset(i),u={};u.ul=e.fromLocal(e.fromLevel({x:r.left-s.x,y:r.top-s.y},i),0),u.ll=e.fromLocal(e.fromLevel({x:r.left-s.x,y:r.bottom-s.y},i),0),u.ur=e.fromLocal(e.fromLevel({x:r.right-s.x,y:r.top-s.y},i),0),u.lr=e.fromLocal(e.fromLevel({x:r.right-s.x,y:r.bottom-s.y},i),0),u.ul.z=u.ll.z=u.ur.z=u.lr.z=i,o+=1,u.id=o,n.quadId=u.id,u.image=n.image,u.reference=n.toString(),a.push(u),t.data(a),t._update(),e.draw()}},this._remove=function(n){if(void 0!==n.quadId&&t){for(var r=0;r<a.length;r+=1)if(a[r].id===n.quadId){a.splice(r,1);break}t.data(a),t._update(),e.draw()}},this._update=function(n){return i.call(e,n),e._addBaseQuadToTiles(t,a),e},this._exit=function(){e.deleteFeature(t),t=null,a=[],r.apply(e,arguments)},this._init=function(){n.apply(e,arguments),(t=e.createFeature("quad",{previewColor:e._options.previewColor,previewImage:e._options.previewImage})).geoTrigger=void 0,t.gcs(e._options.gcs||e.map().gcs()),t.data(a),t._update()},this._getSubLayer=function(){},this._updateSubLayers=void 0};(0,n(1098).registerLayerAdjustment)("svg","tile",r),t.exports=r},2037:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(338),a=function(t){"use strict";return this instanceof a?(t=t||{},o.call(this,t),n(5005).call(this),this._init(t),this):new a(t)};r(a,o),i("svg","track",a),t.exports=a},7376:function(t){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";t.exports=function(){var t,n=[];for(n.length=8,t=0;t<8;t+=1)n[t]=e.charAt(Math.floor(61*Math.random()));return n.join("")}},5747:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(6858),a={arrow:{attrs:{class:"geo-vector-arrow geo-vector-marker",viewBox:"0 0 10 10",refX:1,refY:5,markerHeight:5,markerWidth:5,orient:"auto"},path:"M 0 0 L 10 5 L 0 10 z"},point:{attrs:{class:"geo-vector-point geo-vector-marker",viewBox:"0 0 12 12",refX:6,refY:6,markerHeight:8,markerWidth:8,orient:"auto"},path:"M 6 3 A 3 3 0 1 1 5.99999 3 Z"},bar:{attrs:{class:"geo-vector-bar geo-vector-marker",viewBox:"0 0 10 10",refX:0,refY:5,markerHeight:6,markerWidth:6,orient:"auto"},path:"M 0 0 L 2 0 L 2 10 L 0 10 z"},wedge:{attrs:{class:"geo-vector-wedge geo-vector-marker",viewBox:"0 0 10 10",refX:10,refY:5,markerHeight:5,markerWidth:5,orient:"auto"},path:"M 0 0 L 1 0 L 10 5 L 1 10 L 0 10 L 9 5 L 0 0"}},s=function(t){"use strict";if(!(this instanceof s))return new s(t);var e=n(5005),r=n(77),i=n(2493).d3;t=t||{},o.call(this,t),e.call(this);var u=this,l=this._exit,c=this._update,f=r(),h={};function d(t,e,n){return u._svgid()+"_marker_"+e+"_"+n}function p(t,e,n,r,o){var s=u.renderer()._definitions().selectAll("g.marker-group#"+u._svgid()).data(t.length?[1]:[]);s.enter().append("g").attr("id",u._svgid).attr("class","marker-group"),s.exit().remove();var l=t.reduce(function(t,e,n){var i=a[o(e,n)],s=a[r(e,n)];return i&&t.push({data:e,dataIndex:n,head:!0}),s&&t.push({data:e,dataIndex:n,head:!1}),t},[]),c=(s=u.renderer()._definitions().selectAll("g.marker-group#"+u._svgid())).selectAll("marker.geo-vector-marker").data(l),f=u.renderer();c.enter().append("marker").each(function(t){var e=i.select(this),n=t.head?a[o(t.data,t.dataIndex)]:a[r(t.data,t.dataIndex)];Object.keys(n.attrs).forEach(function(t){e.attr(t,n.attrs[t])})}).attr("id",function(t){return d(t.data,t.dataIndex,t.head?"head":"tail")}).style("stroke",function(t){return f._convertColor(e)(t.data,t.dataIndex)}).style("fill",function(t){return f._convertColor(e)(t.data,t.dataIndex)}).style("opacity",function(t){return n(t.data,t.dataIndex)}).append("path").attr("d",function(t){return t.head?a[o(t.data,t.dataIndex)].path:a[r(t.data,t.dataIndex)].path}),c.exit().remove()}return this._build=function(){var t,e=u.data(),n=u.style.get(),r=u.renderer(),i=u.origin(),o=u.delta(),a=u.style("scale"),s=0;function l(){return a/r.scaleFactor()}return c.call(u),e||(e=[]),t=e.map(function(t,e){var n=u.featureGcsToDisplay(i(t,e)),r=o(t,e);return s=Math.max(s,r.x*r.x+r.y*r.y),{x1:n.x,y1:n.y,dx:r.x,dy:-r.y}}),s=Math.sqrt(s),a||(a=75/(s||1)),h.id=u._svgid(),h.data=e,h.append="line",h.attributes={x1:function(e,n){return t[n].x1},y1:function(e,n){return t[n].y1},x2:function(e,n){return t[n].x1+l()*t[n].dx},y2:function(e,n){return t[n].y1+l()*t[n].dy},"marker-start":function(t,e){return"url(#"+d(0,e,"tail")+")"},"marker-end":function(t,e){return"url(#"+d(0,e,"head")+")"}},h.style={stroke:function(){return!0},strokeColor:n.strokeColor,strokeWidth:n.strokeWidth,strokeOpacity:n.strokeOpacity,originStyle:n.originStyle,endStyle:n.endStyle},h.classes=["svgVectorFeature"],h.visible=u.visible,p(e,n.strokeColor,n.strokeOpacity,n.originStyle,n.endStyle),u.renderer()._drawFeatures(h),f.modified(),u.updateTime().modified(),u},this._update=function(){return c.call(u),u.timestamp()>=f.timestamp()?u._build():p(h.data,h.style.strokeColor,h.style.strokeOpacity,h.style.originStyle,h.style.endStyle),u},this._exit=function(){l.call(u),h={},p([],null,null,null,null)},this._init(t),this};s.markerConfigs=a,r(s,o),i("svg","vector",s),t.exports=s},6546:function(t,e,n){var r=n(4626),i=n(1275),o=function(t){"use strict";if(!(this instanceof o))return new o(t);t=t||{},i.call(this,t);var e=this,n=this._init;return this.featureType="text",this.position=function(t){return void 0===t?e.style("position"):(t!==e.style("position")&&(e.style("position",t),e.dataTime().modified(),e.modified()),e)},this.text=function(t){return void 0===t?e.style("text"):(t!==e.style("text")&&(e.style("text",t),e.dataTime().modified(),e.modified()),e)},this._init=function(t){t=t||{},n.call(e,t);var r=Object.assign({},{font:"bold 16px sans-serif",textAlign:"center",textBaseline:"middle",color:{r:0,g:0,b:0},rotation:0,rotateWithMap:!1,textScaled:!1,position:function(t){return Array.isArray(t)?{x:t[0],y:t[1],z:t[2]||0}:t},text:function(t){return t.text}},void 0===t.style?{}:t.style);void 0!==t.position&&(r.position=t.position),void 0!==t.text&&(r.text=t.text),e.style(r),r.position&&e.position(r.position),r.text&&e.text(r.text),e.dataTime().modified()},this._init(t),e};o.usedStyles=["visible","font","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","lineHeight","fontFamily","textAlign","textBaseline","color","textOpacity","rotation","rotateWithMap","textScaled","offset","shadowColor","shadowOffset","shadowBlur","shadowRotate","textStrokeColor","textStrokeWidth"],o.create=function(t,e){"use strict";return(e=e||{}).type="text",i.create(t,e)},o.capabilities={feature:"text"},r(o,i),t.exports=o},5289:function(t,e,n){var r=n(5616),i=function(t){if(!(this instanceof i))return new i(t);this._index=t.index,this._size=t.size,this._overlap=t.overlap||{x:0,y:0},this._wrap=t.wrap||{x:1,y:1},this._url=t.url,this._fetched=!1,this._queue=t.queue||null,Object.defineProperty(this,"index",{get:function(){return this._index}}),Object.defineProperty(this,"size",{get:function(){return this._size}}),Object.defineProperty(this,"overlap",{get:function(){return this._overlap}}),this.fetch=function(){return this._fetched||r.get(this._url).done(function(){this._fetched=!0}.bind(this)).promise(this),this},this.fetched=function(){return this._fetched},this.then=function(t,e){return this.fetched()||!this._queue||!this._queue.add||this.state&&"pending"!==this.state()?this.fetch():this._queue.add(this,this.fetch),this.done&&this.fail?this.done(t).fail(e):this.then(t,e),this},this.catch=function(t){return this.then(void 0,t),this},this.toString=function(){return[this._index.level||0,this._index.y,this._index.x,this._index.reference||0].join("_")},this.bounds=function(t,e){var n,r,i,o;return r=(n=this.size.x*(this.index.x-t.x)-this.overlap.x-e.x)+this.size.x+2*this.overlap.x,i=(o=this.size.y*(this.index.y-t.y)-this.overlap.y-e.y)+this.size.y+2*this.overlap.y,this.overlap.x&&this.index.x===t.x&&(n+=this.overlap.x),this.overlap.y&&this.index.y===t.y&&(o+=this.overlap.y),{left:n,right:r,bottom:i,top:o}},Object.defineProperty(this,"bottom",{get:function(){return this.size.y*(this.index.y+1)+this.overlap.y}}),Object.defineProperty(this,"top",{get:function(){return this.size.y*this.index.y-(this.index.y?this.overlap.y:0)}}),Object.defineProperty(this,"left",{get:function(){return this.size.x*this.index.x-(this.index.x?this.overlap.x:0)}}),Object.defineProperty(this,"right",{get:function(){return this.size.x*(this.index.x+1)+this.overlap.x}}),this.fadeIn=function(t){return r.noop(t),this}};t.exports=i},9123:function(t){var e=function(t){return this instanceof e?(t=t||{},this._size=t.size||64,Object.defineProperty(this,"size",{get:function(){return this._size},set:function(t){for(;this._atime.length>t;)this.remove(this._atime[this._atime.length-1]);this._size=t}}),Object.defineProperty(this,"length",{get:function(){return this._atime.length}}),this._access=function(t){return this._atime.indexOf(t)},this.remove=function(t){var e="string"==typeof t?t:t.toString();return e in this._cache&&(this._atime.splice(this._access(e),1),delete this._cache[e],!0)},this.clear=function(){return this._cache={},this._atime=[],this},this.get=function(t,e){return(t="string"==typeof t?t:t.toString())in this._cache?(e||(this._atime.splice(this._access(t),1),this._atime.unshift(t)),this._cache[t]):null},this.add=function(t,e,n){this.remove(t);var r=t.toString();this._cache[r]=t,this._atime.unshift(r),n||this.purge(e)},this.purge=function(t){for(var e;this._atime.length>this.size;){e=this._atime.pop();var n=this._cache[e];t&&t(n),delete this._cache[e]}},this.clear(),this):new e(t)};t.exports=e},9264:function(t,e,n){var r=n(4626),i=n(6498),o=n(642);function a(t,e){return(t%e+e)%e}function s(t){var e,n=/\$?\{(s|S|[sS]:[^{}]+|[^-{}]-[^-{}]|([^,{}]+,)+[^,{}]+)\}/,r=t.replace(new RegExp(n,"g"),"{s}").replace(/\$?\{[xX]\}/g,"{x}").replace(/\$?\{[yY]\}/g,"{y}").replace(/\$?\{[zZ]\}/g,"{z}"),i=t.match(n);if(i)if(i[2])e=i[1].split(",");else if(":"===i[1][1])e=i[1].substr(2).split("");else if("-"===i[1][1]){e=[];for(var o=i[1].charCodeAt(0),s=i[1].charCodeAt(2),u=Math.min(o,s);u<=Math.max(o,s);u+=1)e.push(String.fromCharCode(u))}return function(t,n,i,o){return r.replace(/\{s\}/g,function(t,e,n,r){return r[a(t+e+n,r.length)]}(t,n,i,e||o)).replace(/\{x\}/g,t).replace(/\{y\}/g,n).replace(/\{z\}/g,i)}}var u=function(t){"use strict";if(!(this instanceof u))return new u(t);i.call(this,t);var e=n(5616),r=n(6409),l=n(5325),c=n(9123),f=n(5938),h=n(1098).adjustLayerForRenderer,d=n(5289);if((t=o.deepMerge({},this.constructor.defaults,t||{})).cacheSize||(t.cacheSize=t.keepLower?600:200),"string"===e.type(t.subdomains)&&(t.subdomains=t.subdomains.split("")),t.baseUrl){var p=t.baseUrl;p&&"/"!==p.charAt(p.length-1)&&(p+="/"),t.url=p+"{z}/{x}/{y}."+(t.imageFormat||"png")}t.originalUrl=t.url,"string"===e.type(t.url)&&(t.url=s(t.url));var m,g,y,v=this._init,x=this._exit,_=this.visible,b=t.queueSize||6,w=t.initialQueueSize||0,M=[],A={},E=[],T=t.nearestPixel,S=this;this._options=o.deepMerge({},t),this.attribution(t.attribution),this._activeTiles={},this._tileTree={},this._cache=c({size:t.cacheSize}),this._queue=t.queue||f({size:b,initialSize:w,track:t.cacheSize,needed:function(t){return this._tileLayers&&this._tileLayers.length?this._tileLayers.some(function(e){return t===e.cache.get(t.toString(),!0)}):t===S.cache.get(t.toString(),!0)}}),this._queue._tileLayers=this._queue._tileLayers||[],this._queue._tileLayers.push(S),this._queue.initialTrack&&this._queue.track&&(this._queue.track=this._queue.initialTrack*this._queue._tileLayers.length);var C={};return Object.defineProperty(this,"options",{get:function(){return Object.assign({},S._options)}}),Object.defineProperty(this,"cache",{get:function(){return S._cache}}),Object.defineProperty(this,"activeTiles",{get:function(){return Object.assign({},S._activeTiles)}}),Object.defineProperty(this,"queue",{get:function(){return S._queue},set:function(t){S._queue!==t&&(this._queue&&this._queue._tileLayers&&this._queue._tileLayers.indexOf(S)>=0&&(this._queue._tileLayers.splice(this._queue._tileLayers.indexOf(S),1),this._queue.initialTrack&&this._queue.track&&this._queue._tileLayers.length&&(this._queue.track=this._queue.initialTrack*this._queue._tileLayers.length)),S._queue=t,S._queue._tileLayers=S._queue._tileLayers||[],S._queue._tileLayers.push(S),S._queue.initialTrack&&S._queue.track&&(S._queue.track=S._queue.initialTrack*S._queue._tileLayers.length))}}),Object.defineProperty(this,"queueSize",{get:function(){return b},set:function(t){b=t,S._queue.size=t}}),Object.defineProperty(this,"initialQueueSize",{get:function(){return w},set:function(t){w=t||0,S._queue.initialSize=t||b}}),Object.defineProperty(this,"reference",{get:function(){return S.id()+"_"+(m||0)},set:function(t){m=t},configurable:!0}),this.tilesAtZoom=function(t){if(S._options.tilesAtZoom)return S._options.tilesAtZoom.call(S,t);var e=Math.pow(2,t);return{x:e,y:e}},this.tilesMaxBounds=function(t){return S._options.tilesMaxBounds?S._options.tilesMaxBounds.call(S,t):null},this.tileCropFromBounds=function(t){if(S._options.tilesMaxBounds){var e=t.index.level,n=S._tileBounds(t);return void 0===E[e]&&(E[e]=S.tilesMaxBounds(e)||null),E[e]&&(n.right>E[e].x||n.bottom>E[e].y)?{x:Math.max(0,Math.min(E[e].x,n.right)-n.left),y:Math.max(0,Math.min(E[e].y,n.bottom)-n.top)}:void 0}},this.isValid=function(t){return S._options.minLevel<=t.level&&t.level<=S._options.maxLevel&&(!!(S._options.wrapX||0<=t.x&&t.x<=S.tilesAtZoom(t.level).x-1)&&!!(S._options.wrapY||0<=t.y&&t.y<=S.tilesAtZoom(t.level).y-1))},this._origin=function(t){var e,n=S.toLevel(S.toLocal(S.map().origin()),t),r=S._options;return{index:e={x:Math.floor(n.x/r.tileWidth),y:Math.floor(n.y/r.tileHeight)},offset:{x:n.x-r.tileWidth*e.x,y:n.y-r.tileHeight*e.y}}},this._tileBounds=function(t){var e=S._origin(t.index.level);return t.bounds(e.index,e.offset)},this.tileAtPoint=function(t,e){var n=S._origin(e),r=S.map();t=S.displayToLevel(r.gcsToDisplay(t,null),e),isNaN(t.x)&&(t.x=0),isNaN(t.y)&&(t.y=0);var i=S._tileOffset(e);return i&&(t.x+=i.x,t.y+=i.y),{x:Math.floor(n.index.x+(n.offset.x+t.x)/S._options.tileWidth),y:Math.floor(n.index.y+(n.offset.y+t.y)/S._options.tileHeight)}},this.gcsTileBounds=function(t,e){var n=t.index?t:d({index:t,size:{x:S._options.tileWidth,y:S._options.tileHeight},url:""}),r=S._tileOffset(n.index.level),i=n.bounds({x:0,y:0},r),o=S.map(),a=o.unitsPerPixel(n.index.level),s=[{x:i.left*a,y:S._topDown()*i.top*a},{x:i.right*a,y:S._topDown()*i.bottom*a}];return(e=null===e?o.gcs():void 0===e?o.ingcs():e)!==o.gcs()&&(s=l.transformCoordinates(o.gcs(),e,s)),{left:s[0].x,top:s[0].y,right:s[1].x,bottom:s[1].y}},this._getTile=function(t,e){var n=e||t;return d({index:t,size:{x:S._options.tileWidth,y:S._options.tileHeight},queue:S._queue,url:S._options.url.call(S,n.x,n.y,Math.max(n.level||0,Math.min(0,S._options.minLevel||0)),S._options.subdomains)})},this._getTileCached=function(t,e,n){var r=S.cache.get(S._tileHash(t));return null===r&&(r=S._getTile(t,e),S.cache.add(r,S.remove,n)),r},this._tileHash=function(t){return[t.level||0,t.y,t.x,t.reference||0].join("_")},this._getTileRange=function(t,e){var n=[S.tileAtPoint({x:e.left,y:e.top},t),S.tileAtPoint({x:e.right,y:e.top},t),S.tileAtPoint({x:e.left,y:e.bottom},t),S.tileAtPoint({x:e.right,y:e.bottom},t)];return{start:{x:Math.min(n[0].x,n[1].x,n[2].x,n[3].x),y:Math.min(n[0].y,n[1].y,n[2].y,n[3].y)},end:{x:Math.max(n[0].x,n[1].x,n[2].x,n[3].x),y:Math.max(n[0].y,n[1].y,n[2].y,n[3].y)}}},this._getTiles=function(t,n,r,i){var o,s,u,l,c,f,h,d,p,m,g,y=[],v=!1,x=S._options.keepLower?S._options.minLevel:Math.min(Math.max(t,S._options.minLevel),S._options.maxLevel);for(t<x&&(t=x),g=x;g<=t;g+=1){if(c=(h=S._getTileRange(g,n)).start,f=h.end,l=S.tilesAtZoom(g),!S._options.wrapX){if(c.x>=l.x||f.x<0)continue;c.x=Math.min(Math.max(c.x,0),l.x-1),f.x=Math.min(Math.max(f.x,0),l.x-1),g===x&&S._options.keepLower&&(c.x=0,f.x=l.x-1)}if(!S._options.wrapY){if(c.y>l.y||f.y<0)continue;c.y=Math.min(Math.max(c.y,0),l.y-1),f.y=Math.min(Math.max(f.y,0),l.y-1),g===x&&S._options.keepLower&&(c.y=0,f.y=l.y-1)}if(S._options.gcs&&S._options.gcs!==S.map().gcs()&&g!==x&&(f.x+1-c.x)*(f.y+1-c.y)>S.map().size().width*S.map().size().height/S._options.tileWidth/S._options.tileHeight*16)break;for(o=c.x;o<=f.x;o+=1)for(s=c.y;s<=f.y;s+=1)u={level:g,x:o,y:s,reference:S.reference},d={level:g,x:o,y:s,reference:S.reference},S._options.wrapX&&(d.x=a(d.x,l.x)),S._options.wrapY&&(d.y=a(d.y,l.y)),S.isValid(d)&&(i&&y.length<M.length&&(m=M[y.length],v=v||u.level!==m.level||u.x!==m.x||u.y!==m.y),y.push({index:u,source:d}))}if(i){if(!v&&y.length===M.length)return;M.splice(0,M.length),e.each(y,function(t,e){M.push(e.index)})}if(r){p={x:(c.x+f.x)/2,y:(c.y+f.y)/2,level:t,bottomLevel:t};for(var _=Math.max(f.x-c.x,f.y-c.y)+1;_>=1;_/=2)p.bottomLevel-=1;y.sort(S._loadMetric(p)),S._queue&&S._queue.batch(!0)}for(S.cache.size<y.length&&(console.log("Increasing cache size to "+y.length),S.cache.size=y.length),o=0;o<y.length;o+=1)y[o]=S._getTileCached(y[o].index,y[o].source,!0);return S.cache.purge(S.remove),y},this.gcs=function(t){if(void 0===t)return S._options.gcs||S.map().gcs();var e=S.gcs();return null===t?delete S._options.gcs:S._options.gcs=t,S.gcs()!==e&&(S.clear(),S.gcsFeatures(S.gcs()),S.modified(),S._update()),S},this.prefetch=function(t,n){var r;return r=S._getTiles(t,n,!0),e.when.apply(e,r.map(function(t){return t.fetch()}))},this._loadMetric=function(t){return function(e,n){var r,i,o,a,s;return e=e.index||e,n=n.index||n,e.level!==n.level?t.bottomLevel&&e.level>=t.bottomLevel!=n.level>=t.bottomLevel?e.level>=t.bottomLevel?-1:1:e.level-n.level:(s=Math.pow(2,e.level-t.level),o=(t.x+.5)*s-.5,a=(t.y+.5)*s-.5,(r=e.x-o)*r+(i=e.y-a)*i-((r=n.x-o)*r+(i=n.y-a)*i))}},this.fromLevel=function(t,e){var n=Math.pow(2,-e);return{x:t.x*n,y:t.y*n}},this.toLevel=function(t,e){var n=Math.pow(2,e);return{x:t.x*n,y:t.y*n}},this.drawTile=function(t){var e=t.toString();S._activeTiles.hasOwnProperty(e)?S._moveToTop(t):S._drawTile(t),S._activeTiles[e]=t},this._drawTile=function(t){if(null!==S.renderer())throw new Error("This draw method is not valid on renderer managed layers.");var n,r=t.index.level,i=e(S._getSubLayer(r)),o=S._tileBounds(t),a=S._options.animationDuration,s=e('<div class="geo-tile-container"/>').attr("tile-reference",t.toString());s.append(t.image),s.css({left:o.left-parseInt(i.attr("offsetx")||0,10)+"px",top:o.top-parseInt(i.attr("offsety")||0,10)+"px"}),(n=S.tileCropFromBounds(t))&&s.addClass("crop").css({width:n.x+"px",height:n.y+"px"}),a>0&&t.fadeIn(a),i.append(s),t.catch(function(){console.warn("Could not load tile at "+t.toString()),S._remove(t)})},this.remove=function(t){var e=t.toString(),n=S._activeTiles[e];if(n instanceof d&&S._remove(n),delete S._activeTiles[e],M&&t.index)for(var r=t.index,i=M.length-1;i>=0;i-=1){var o=M[i];if(o.level===r.level&&o.x===r.x&&o.y===r.y&&o.reference===r.reference){M.splice(i,1);break}}return n},this._remove=function(t){t.image&&(t.image.parentElement?e(t.image.parentElement).remove():console.log("No parent element to remove "+t.toString(),t),e(t.image).remove())},this._moveToTop=function(t){e.noop(t)},this._getViewBounds=function(){var t=S.map(),e=t.zoom(),n=S._options.tileRounding(e),r=Math.pow(2,e-n),i=t.size(),o=S.displayToLevel({x:0,y:0}),a=S.displayToLevel({x:i.width,y:0}),s=S.displayToLevel({x:0,y:i.height}),u=S.displayToLevel({x:i.width,y:i.height});return{level:n,scale:r,left:Math.min(o.x,a.x,s.x,u.x),right:Math.max(o.x,a.x,s.x,u.x),top:Math.min(o.y,a.y,s.y,u.y),bottom:Math.max(o.y,a.y,s.y,u.y)}},this._purge=function(t,e,n){var r,i;if(S._updating)return S;for(i in n||(n=S._getViewBounds()),S._activeTiles)r=S._activeTiles[i],S._canPurge(r,n,t,e)&&S.remove(r);return S},this.clear=function(){var t,e=[];for(t in S._activeTiles)e.push(S.remove(t));return S._tileTree={},M=[],e},this.reset=function(){return S.clear(),S._cache.clear(),S._queue.initialSize=w,S},this.toLocal=function(t,e){var n=S.map(),r=n.unitsPerPixel(void 0===e?n.zoom():e);return{x:t.x/r,y:S._topDown()*t.y/r}},this.fromLocal=function(t,e){var n=S.map(),r=n.unitsPerPixel(void 0===e?n.zoom():e);return{x:t.x*r,y:S._topDown()*t.y*r}},this._topDown=function(){return S._options.topDown?1:-1},this._getSubLayer=function(t){if(S.canvas()){var n=S.canvas().find("div[data-tile-layer="+t.toFixed()+"]").get(0);return n||(n=e('<div class=geo-tile-layer data-tile-layer="'+t.toFixed()+'"/>').get(0),S.canvas().append(n)),n}},this._updateSubLayers=function(t,n){var r=S.canvas(),i=parseInt(r.attr("lastlevel"),10),o=parseInt(r.attr("lastoffsetx")||0,10),a=parseInt(r.attr("lastoffsety")||0,10);if(i===t&&Math.abs(o-n.left)<65536&&Math.abs(a-n.top)<65536)return{x:o,y:a};var s=S.map(),u=S._tileOffset(t),l=parseInt((n.left+n.right-s.size().width)/2+u.x,10),c=parseInt((n.top+n.bottom-s.size().height)/2+u.y,10);return r.find(".geo-tile-layer").each(function(n,r){var i=e(r),o=parseInt(i.data("tileLayer"),10);i.css("transform","scale("+Math.pow(2,t-o)+")");var a=parseInt(l/Math.pow(2,t-o),10),s=parseInt(c/Math.pow(2,t-o),10),u=a-parseInt(i.attr("offsetx")||0,10),f=s-parseInt(i.attr("offsety")||0,10);i.attr({offsetx:a,offsety:s}),i.find(".geo-tile-container").each(function(t,n){e(n).css({left:parseInt(e(n).css("left"),10)-u+"px",top:parseInt(e(n).css("top"),10)-f+"px"})})}),r.attr({lastoffsetx:l,lastoffsety:c,lastlevel:t}),{x:l,y:c}},this._update=function(t){if(t&&t.event&&(t.event.event===r.zoom||t.event.event===r.rotate))return S;if(!S.visible())return S;var n,i=S.map(),o=i.bounds(void 0,null),a=i.zoom(),s=S._options.tileRounding(a);if(S._updateSubLayers){var u=S._getViewBounds(),l=S._updateSubLayers(s,u)||{x:0,y:0},c=S._tileOffset(s);if(null===S.renderer()){var f=Math.pow(2,a-s),h=i.rotation(),d=-c.x+-(u.left+u.right)/2+l.x,p=-c.y+-(u.bottom+u.top)/2+l.y,m=d+i.size().width/2,y=p+i.size().height/2;S.canvas().css({"transform-origin":-d+"px "+-p+"px"});var v="translate("+m+"px,"+y+"px)scale("+f+")";h&&(v+="rotate("+180*h/Math.PI+"deg)"),S.canvas().css("transform",v)}S.canvas().attr({scale:Math.pow(2,a-s),dx:-c.x+-(u.left+u.right)/2,dy:-c.y+-(u.bottom+u.top)/2,offsetx:l.x,offsety:l.y,rotation:i.rotation()})}if(void 0===(n=S._getTiles(s,o,!0,!0)))return S;if(S._tileTree={},n.forEach(function(t){if(t.fetched())delete A[t.toString()],S.drawTile(t),S._setTileTree(t);else{if(t._queued)(S._queue?S._queue.get(t):-1)>=0&&S._queue.add(t);else t.then(function(){if(!g&&t===S.cache.get(t.toString())){var e=i.zoom(),n=S._options.tileRounding(e),r=S._getViewBounds();S._canPurge(t,r,n)?S.remove(t):(S.drawTile(t),S._setTileTree(t))}}),t._queued=!0;S.addPromise(t),A[t.toString()]=t}}),e.when.apply(e,n).done(function(){var t=S.map().zoom(),e=S._options.tileRounding(t);S._purge(e,!0)}),"all"!==S._options.idleAfter)for(var x in A){var _=A[x];n.indexOf(_)<0&&(S.removePromise(_),delete A[x])}return S},this._setTileTree=function(t){if(!S._options.keepLower){var e=t.index;S._tileTree[e.level]=S._tileTree[e.level]||{},S._tileTree[e.level][e.x]=S._tileTree[e.level][e.x]||{},S._tileTree[e.level][e.x][e.y]=t}},this._getTileTree=function(t){return((S._tileTree[t.level]||{})[t.x]||{})[t.y]||null},this._isCovered=function(t){var e=t.index.level,n=t.index.x,r=t.index.y,i=[];return(i=S._getTileTree({level:e-1,x:Math.floor(n/2),y:Math.floor(r/2)}))?[i]:(i=[S._getTileTree({level:e+1,x:2*n,y:2*r}),S._getTileTree({level:e+1,x:2*n+1,y:2*r}),S._getTileTree({level:e+1,x:2*n,y:2*r+1}),S._getTileTree({level:e+1,x:2*n+1,y:2*r+1})]).every(function(t){return null!==t})?i:null},this._outOfBounds=function(t,e){var n=S._tileOffset(t.index.level),r=1;return t.index.level!==e.level&&(r=Math.pow(2,(e.level||0)-(t.index.level||0))),(t.bottom-n.y)*r<e.top||(t.left-n.x)*r>e.right||(t.top-n.y)*r>e.bottom||(t.right-n.x)*r<e.left},this._canPurge=function(t,e,n,r){if(S._options.keepLower){if((n=n||0)<t.index.level&&t.index.level!==S._options.minLevel)return!0;if(t.index.level===S._options.minLevel&&!S._options.wrapX&&!S._options.wrapY)return!1}else if((r||S._isCovered(t))&&n!==t.index.level&&(n>=S._options.minLevel||t.index.level!==S._options.minLevel)&&(n<S._options.maxLevel||t.index.level!==S._options.maxLevel))return!0;return!!e&&S._outOfBounds(t,e)},this.displayToLevel=function(t,e){var n,r=S.map(),i=r.zoom(),o=S._options.tileRounding(i),a=r.unitsPerPixel(void 0===e?o:e);if(void 0===t){var s=r.size();t={x:s.width/2,y:s.height/2}}try{n=r.displayToGcs(t,S._options.gcs||null)}catch(t){n={x:0,y:0}}return{x:n.x/a,y:S._topDown()*n.y/a}},this.url=function(t){return void 0===t?S._options.originalUrl:(t===S._options.originalUrl||(S._options.originalUrl=t,"string"===e.type(t)&&(t=s(t)),S._options.url=t,S.reset(),S.map().draw()),S)},this.subdomains=function(t){return void 0===t?S._options.subdomains:(t&&("string"===e.type(t)&&(t=t.indexOf(",")>=0?t.split(","):t.split("")),S._options.subdomains=t,S.reset(),S.map().draw()),S)},this._tileOffset=function(t){return void 0===C[t]&&(C[t]=S._options.tileOffset(t)),C[t]},this.visible=function(t){return void 0===t?_():(S.visible()!==t&&(_(t),t&&S._update()),S)},this.nearestPixel=function(t,e){return void 0===t?T:(T!==t&&(T=t,e||(S.modified(),S._update())),S)},Object.defineProperty(this,"baseQuad",{get:function(){return S._options.baseQuad},set:function(t){S._options.baseQuad=t,S._update()}}),this._addBaseQuadToTiles=function(t,e){t&&(this.baseQuad!==y&&(y&&e.splice(0,1),(y=this.baseQuad)&&(e.splice(0,0,this.baseQuad),t.cacheUpdate(0)),t.data(e)),t._update())},this._init=function(){var t;if(v.apply(S,arguments),null===S.renderer())for(t=0;t<=S._options.maxLevel;t+=1)S._getSubLayer(t);return S},this._exit=function(){return S.reset(),x.apply(S,arguments),g=!0,this._queue&&this._queue._tileLayers&&this._queue._tileLayers.indexOf(S)>=0&&(this._queue._tileLayers.splice(this._queue._tileLayers.indexOf(S),1),this._queue.initialTrack&&this._queue.track&&this._queue._tileLayers.length&&(this._queue.track=this._queue.initialTrack*this._queue._tileLayers.length)),S},h("tile",this),this};u.defaults={minLevel:0,maxLevel:18,tileOverlap:{x:0,y:0},tileWidth:256,tileHeight:256,wrapX:!0,wrapY:!1,url:null,subdomains:"abc",tileOffset:function(t){return{x:0,y:0}},tilesMaxBounds:null,topDown:!1,keepLower:!0,idleAfter:"view",tileRounding:Math.round,attribution:"",animationDuration:0},r(u,i),t.exports=u},77:function(t){var e=0,n=function(){"use strict";if(!(this instanceof n))return new n;var t=this,r=0;return this.modified=function(){return r=e+=1,t},this.timestamp=function(){return r},this.getMTime=this.timestamp,this};t.exports=n},338:function(t,e,n){var r=n(4626),i=n(1275),o=n(1098),a=n(642),s=function(t){"use strict";if(!(this instanceof s))return new s(t);var e=n(5325);t=t||{},i.call(this,t);var r,u,l,c,f,h=this,d={},p={startTime:void 0!==t.startTime?t.startTime:null,endTime:void 0!==t.endTime?t.endTime:null,duration:void 0!==t.duration?t.duration:null,start:0,end:0},m=this.draw,g=this._exit,y=this._init,v=this.modified,x=this.style,_=this._update;return this.featureType="track",this._linePosition=function(t){return function(e,n,r,i){var o=p.timeFunc(e,n,r,i);return"past"===t&&o>=p.start||"current"===t&&o<p.start?p.startPosition[i]:"current"===t&&o>p.end||"future"===t&&o<p.end?p.endPosition[i]:p.positionFunc(e,n,r,i)}},this._headPosition=function(t,e){return p.endPosition[e]},this._headText=function(t,e){return p.text[e]},this._updateTimeRange=function(){null!==p.endTime||null===p.endTime&&(null===p.startTime||null==p.duration)?(p.end=null!==p.endTime?p.endTime:p.timeExtents.end,null!==p.startTime&&(null===p.endTime||p.startTime<=p.endTime)?p.start=p.startTime:null!==p.duration?p.start=p.end-p.duration:p.start=p.timeExtents.start):(p.start=p.startTime,p.end=p.start+p.duration)},this.calculateTimePosition=function(t,n,r){h.dataTime().timestamp()>=h.buildTime().timestamp()&&h._build(),n=null===n?h.layer().map().gcs():void 0===n?h.gcs():n;var i=e({source:h.gcs(),target:n}),o=h.data(),a=[],s=o.map(function(e,n){var r=p.trackFunc(e,n);if(a.push(r),!r.length)return{x:0,y:0,z:0,posidx:-1};var i,o,s,u,l=0,c=r.length-1;if(1===r.length)return{posidx:l,angidx0:l,angidx1:l};if((i=p.timeFunc(r[l],l,e,n))>=t)return{posidx:l,angidx0:l,angidx1:l+1};if((o=p.timeFunc(r[c],c,e,n))<=t)return{posidx:c,angidx0:c-1,angidx1:c};for(;c-l>1;){if(s=Math.floor((c+l)/2),(u=p.timeFunc(r[s],s,e,n))===t)return{posidx:s,angidx0:s-1,angidx1:s+1};u<t?(i=u,l=s):(o=u,c=s)}var f=(t-i)/(o-i);return{posidx0:l,posidx1:c,factor0:1-f,factor1:f,angidx0:l,angidx1:c}});return s.forEach(function(t,e){var n,o,s;t.posidx<0||(void 0===t.posidx1?n=p.positionFunc(a[e][t.posidx],t.posidx,a[e],e):(o=i.forward(p.positionFunc(a[e][t.posidx0],t.posidx0,a[e],e),!0),s=i.forward(p.positionFunc(a[e][t.posidx1],t.posidx1,a[e],e),!0),n=i.inverse({x:o.x*t.factor0+s.x*t.factor1,y:o.y*t.factor0+s.y*t.factor1,z:(o.z||0)*t.factor0+(s.z||0)*t.factor1},!0)),t.x=n.x,t.y=n.y,t.z=n.z||0,r&&(void 0===t.posidx1&&(o=i.forward(t.angidx0===t.posidx?n:p.positionFunc(a[e][t.angidx0],t.angidx0,a[e],e),!0),s=i.forward(t.angidx1===t.posidx?n:p.positionFunc(a[e][t.angidx1],t.angidx1,a[e],e),!0)),t.angle=Math.atan2(s.y-o.y,s.x-o.x)))}),s},this._build=function(){h.buildTime().modified(),r||(r={past:h.layer().createFeature("line"),future:h.layer().createFeature("line"),current:h.layer().createFeature("line")},h.dependentFeatures([r.past,r.current,r.future]));var t=h.data();p.data=t,p.timeFunc=h.style.get("time"),p.positionFunc=h.style.get("position"),p.trackFunc=h.style.get("track"),p.textFunc=h.style.get("text"),["past","current","future"].forEach(function(e){r[e].style(h.style()).style(h[e+"Style"]()).line(h.style("track")).gcs(h.gcs()).data(t).position(h._linePosition(e))});var e,n,i={};if(t.forEach(function(t,e){var n,r=p.trackFunc(t,e);r.length&&(n=p.timeFunc(r[0],0,t,e),(void 0===i.start||n<i.start)&&(i.start=n),r.length>1&&(n=p.timeFunc(r[r.length-1],r.length-1,t,e)),(void 0===i.end||n>i.end)&&(i.end=n))}),p.timeExtents=i,h._updateTimeRange(),p.startPosition=h.calculateTimePosition(p.start,null),p.endPosition=h.calculateTimePosition(p.end,null,!0),p.text=t.map(function(t,r){var i=p.textFunc(t,r);return e|=null==i,null==i||""===i?"":(n=!0,p.startPosition[r].posidx<0&&(i=""),i)}),e&&!l){if(!(o.registries.features[h.layer().rendererName()]||{}).marker){var a=o.rendererForFeatures(["marker"]);u=o.createLayer("feature",h.layer().map(),{renderer:a}),h.layer().addChild(u),h.layer().node().append(u.node())}l=(u||h.layer()).createFeature("marker");var s=h.dependentFeatures();s.push(l),h.dependentFeatures(s)}if(n&&!f){if(!(o.registries.features[h.layer().rendererName()]||{}).text){var d=o.rendererForFeatures(["text"]);c=o.createLayer("feature",h.layer().map(),{renderer:d}),h.layer().addChild(c),h.layer().node().append(c.node())}f=(c||h.layer()).createFeature("text");var m=h.dependentFeatures();m.push(f),h.dependentFeatures(m)}if(l){l.headData=p.endPosition,l.style(h.markerStyle()).gcs(h.gcs()).data(t).position(h._headPosition);var g=l.style.get("radius");l.style("radius",function(t,e){return p.text[e]||p.startPosition[e].posidx<0?0:g(t,e)})}return f&&(f.headData=p.endPosition,f.style(h.textStyle()).gcs(h.gcs()).data(t).text(h._headText).position(h._headPosition)),h},this._updateTimeAndPosition=function(){r&&(h._updateTimeRange(),p.startPosition=h.calculateTimePosition(p.start,null),p.endPosition=h.calculateTimePosition(p.end,null,!0),r.past.modified(),r.current.modified(),r.future.modified(),l&&l.modified(),f&&f.modified(),h.updateTime().modified(),h.modified())},this._update=function(){return _.call(h),(h.dataTime().timestamp()>=h.buildTime().timestamp()||h.updateTime().timestamp()<=h.timestamp())&&h._build(),h.updateTime().modified(),h},this.draw=function(){var t=m();return r&&(r.past.draw(),r.current.draw(),r.future.draw()),l&&l.draw(),f&&f.draw(),t},this.modified=function(){var t=v();return r&&(r.past.modified(),r.current.modified(),r.future.modified()),l&&l.modified(),f&&f.modified(),t},this.style=function(t,e,n){return"style"===(n=n||"style")?x(t,e):void 0===t?d[n]:"string"==typeof t&&void 0===e?(d[n]||{})[t]:(void 0===d[n]&&(d[n]={}),void 0===e?d[n]=a.deepMerge(d[n],t):d[n][t]=e,h.modified(),h)},this.style.get=x.get,["markerStyle","textStyle","pastStyle","currentStyle","futureStyle"].forEach(function(t){h[t]=function(e,n){return h.style(e,n,t)}}),this.track=function(t){return void 0===t?h.style("track"):(h.style("track",t),h.dataTime().modified(),h.modified(),h)},this.position=function(t){return void 0===t?h.style("position"):(h.style("position",t),h.dataTime().modified(),h.modified(),h)},this.time=function(t){return void 0===t?h.style("time"):(h.style("time",t),h.dataTime().modified(),h.modified(),h)},this.timeRange=function(t){if(void 0===t)return{startTime:p.startTime,endTime:p.endTime,duration:p.duration,start:p.start,end:p.end,minimum:(p.timeExtents||{}).start,maximum:(p.timeExtents||{}).end};var e=!1;return void 0!==t.startTime&&t.startTime!==p.startTime&&(p.startTime=null===t.startTime?t.startTime:+t.startTime,e=!0),void 0!==t.endTime&&t.endTime!==p.endTime&&(p.endTime=null===t.endTime?t.endTime:+t.endTime,e=!0),void 0!==t.duration&&t.duration!==p.duration&&(p.duration=null===t.duration?t.duration:+t.duration,e=!0),e&&h._updateTimeAndPosition(),h},this.startTime=function(t){return void 0===t?p.startTime:(t!==p.startTime&&(p.startTime=null===t?t:+t,h._updateTimeAndPosition()),h)},this.endTime=function(t){return void 0===t?p.endTime:(t!==p.endTime&&(p.endTime=null===t?t:+t,h._updateTimeAndPosition()),h)},this.duration=function(t){return void 0===t?p.duration:(t!==p.duration&&(p.duration=null===t?t:+t,h._updateTimeAndPosition()),h)},this._mergeSearchResults=function(t,e){return t.extra=t.extra||{},e.forEach(function(e){return e.value.index.forEach(function(n,r){t.index.indexOf(n)<0&&(t.index.push(n),t.found.push(e.value.found[r]),t.where=t.where||{},e.value.extra&&e.value.extra[n]&&(t.extra[n]=e.value.extra[n]),a.isObject(t.extra[n])||(t.extra[n]={value:t.extra[n]}),t.extra[n].where=e.key)})}),t},this.pointSearch=function(t){var e=r.current.pointSearch(t),n=r.past.pointSearch(t),i=r.future.pointSearch(t),o=l?l.pointSearch(t):{index:[]};return this._mergeSearchResults(e,[{key:"marker",value:o},{key:"past",value:n},{key:"future",value:i}])},this.polygonSearch=function(t,e){var n=r.current.polygonSearch(t,e),i=r.past.polygonSearch(t,e),o=r.future.polygonSearch(t,e),a=l?l.polygonSearch(t,e):{index:[]};return this._mergeSearchResults(n,[{key:"marker",value:a},{key:"past",value:i},{key:"future",value:o}])},this._exit=function(){r&&h.layer()&&(h.layer().deleteFeature(r.past),h.layer().deleteFeature(r.current),h.layer().deleteFeature(r.future)),r=null,(u||h.layer())&&l&&(u||h.layer()).deleteFeature(l),u&&h.layer()&&h.layer().removeChild(u),u=null,(c||h.layer())&&f&&(c||h.layer()).deleteFeature(f),c&&h.layer()&&h.layer().removeChild(c),c=null,h.dependentFeatures([]),g()},this._init=function(t){t=t||{},y.call(h,t);var e=a.deepMerge({},{track:a.identityFunction,position:a.identityFunction,time:function(t,e){return void 0!==t.t?t.t:e},uniformLine:"drop",closed:!1},void 0===t.style?{}:t.style),n=a.deepMerge({},{rotateWithMap:!0,rotation:function(t,e){return-p.endPosition[e].angle||0}},void 0===t.markerStyle?{}:t.markerStyle),r=a.deepMerge({},{rotateWithMap:!0,rotation:function(t,e){return void 0!==p.endPosition[e].angle?-p.endPosition[e].angle+Math.PI/2:0}},void 0===t.textStyle?{}:t.textStyle),i=a.deepMerge({},{strokeOpacity:.25},void 0===t.pastStyle?{}:t.pastStyle),o=a.deepMerge({},{},void 0===t.currentStyle?{}:t.currentStyle),s=a.deepMerge({},{strokeOpacity:.25},void 0===t.futureStyle?{}:t.futureStyle);["track","position","time"].forEach(function(n){void 0!==t[n]&&(e[n]=t[n])}),h.style(e),h.markerStyle(n),h.textStyle(r),h.pastStyle(i),h.currentStyle(o),h.futureStyle(s)},this};r(s,i),t.exports=s},5325:function(t,e,n){var r=n(9677),i=n(1982),o=n(3503),a=n(642);r=r.__esModule?r.default:r;var s=n(9689);s.keys().forEach(function(t){r.Proj.projections.add(s(t))});var u={},l=/^(.* |)\+axis=e(n|s)u(| .*)$/,c=/(^|\s)\+(s[1-3][1-3]|[xyz]off)=\S/,f=function(t){"use strict";if(!(this instanceof f))return(t=t||{}).source in u||(Object.keys(u).length>=10&&(u={}),u[t.source]={}),t.target in u[t.source]||(Object.keys(u[t.source]).length>=10&&(u[t.source]={}),u[t.source][t.target]=new f(t)),u[t.source][t.target];var e,n,s,l,h,d,p,m=this,g={s11:0,s12:4,s13:8,xoff:12,s21:1,s22:5,s23:9,yoff:13,s31:2,s32:6,s33:10,zoff:14};function y(t){if(!c.exec(t))return{proj:t};var e,n,r=a.mat4AsArray(),i=[];return t.split(/(\s+)/).forEach(function(t){var e=/^\+(s[1-3][1-3]|[xyz]off)=(.*)$/.exec(t);e?r[g[e[1]]]=parseFloat(e[2]):i.push(t)}),n={proj:i.join(" "),orig:t},(e=o.invert(a.mat4AsArray(),r))?(n.matrix=r,n.inverse=e):console.warn("Affine transform is not invertable and will not be used: "+t),n}function v(){var t=y(m.source()),n=y(m.target()),i=t.proj,o=n.proj;l=t.matrix,h=t.inverse,d=n.matrix,p=n.inverse,e=new r(i,o)}this.source=function(t){return void 0===t?n||"EPSG:4326":(n=t,v(),m)},this.target=function(t){return void 0===t?s||"EPSG:3857":(s=t,v(),m)},this._forward=function(t){if(l){var n=i.transformMat4(a.vec3AsArray(),[t.x,t.y,t.z||0],h);t={x:n[0],y:n[1],z:n[2]}}var r=e.forward(t,!0);if(r.z=t.z||0,d){var o=i.transformMat4(a.vec3AsArray(),[r.x,r.y,r.z],d);r={x:o[0],y:o[1],z:o[2]}}return r},this._inverse=function(t){if(d){var n=i.transformMat4(a.vec3AsArray(),[t.x,t.y,t.z||0],p);t={x:n[0],y:n[1],z:n[2]}}var r=e.inverse(t,!0);if(r.z=t.z||0,l){var o=i.transformMat4(a.vec3AsArray(),[r.x,r.y,r.z],l);r={x:o[0],y:o[1],z:o[2]}}return r},this.forward=function(t){return Array.isArray(t)?t.map(m._forward):m._forward(t)},this.inverse=function(t){return Array.isArray(t)?t.map(m._inverse):m._inverse(t)},t=t||{};try{this.source(t.source)}catch(e){console.error("Can't use transform source: "+t.source),this.source("EPSG:4326")}try{this.target(t.target)}catch(e){console.error("Can't use transform target: "+t.target),this.target("EPSG:3857")}return this};f.defs=r.defs,f.lookup=function(t){var e,i,o=n(5616),a=o.Deferred();return r.defs.hasOwnProperty(t)?a.resolve(r.defs[t]):2!==(i=t.split(":")).length||"EPSG"!==i[0].toUpperCase()?a.reject("Invalid projection code").promise():(e=i[1],o.ajax({url:"https://epsg.io/"+encodeURIComponent(e)+".proj4"}).done(function(e){var n=(e.results||[])[0];return n?(r.defs(t,n),o.when(r.defs[t])):a.reject(e).promise()}))},f.transformCoordinates=function(t,e,n,r){"use strict";if(t===e||Array.isArray(n)&&!n.length)return n;if(Array.isArray(n)&&n.length>=3&&3===r&&!a.isObject(n[0])&&!c.test(t)&&!c.test(e))return f.transformCoordinatesFlatArray3(t,e,n);if(Array.isArray(n)&&n.length&&a.isObject(n[0])&&"x"in n[0]&&"y"in n[0]){var i=t.match(l),o=e.match(l);if(i&&o&&i[1]===o[1]&&i[3]===o[3])return"z"in n[0]?n.map(function(t){return{x:+t.x,y:-t.y,z:+t.z||0}}):n.map(function(t){return{x:+t.x,y:-t.y}})}var s,u=f({source:t,target:e});return a.isObject(n)&&"x"in n&&"y"in n?(s=u.forward({x:+n.x,y:+n.y,z:+n.z||0},!0),"z"in n?s:{x:s.x,y:s.y}):Array.isArray(n)&&1===n.length&&a.isObject(n[0])&&"x"in n[0]&&"y"in n[0]?(s=u.forward({x:+n[0].x,y:+n[0].y,z:+n[0].z||0},!0),"z"in n[0]?[s]:[{x:s.x,y:s.y}]):f.transformCoordinatesArray(u,n,r)},f.transformCoordinatesArray=function(t,e,n){var r,i,o,s,u,l,c,f,h,d={};function p(){if(Array.isArray(e[0]))if(2===e[0].length)s=function(t){return+e[t][0]},u=function(t){return+e[t][1]},c=function(t,e,n){f[t]=[e,n]};else{if(3!==e[0].length)throw new Error("Invalid coordinates. Requires two or three components per array");s=function(t){return+e[t][0]},u=function(t){return+e[t][1]},l=function(t){return+e[t][2]},c=function(t,e,n,r){f[t]=[e,n,r]}}else if(2===e.length)o=2,s=function(t){return+e[t*o]},u=function(t){return+e[t*o+1]},c=function(t,e,n){f[t]=e,f[t+1]=n};else if(3===e.length)o=3,s=function(t){return+e[t*o]},u=function(t){return+e[t*o+1]},l=function(t){return+e[t*o+2]},c=function(t,e,n,r){f[t]=e,f[t+1]=n,f[t+2]=r};else{if(!n)throw new Error("Invalid coordinates");if(2!==n&&3!==n)throw new Error("Number of components should be two or three");o=n,s=function(t){return+e[t]},u=function(t){return+e[t+1]},2===n?c=function(t,e,n){f[t]=e,f[t+1]=n}:(l=function(t){return+e[t+2]},c=function(t,e,n,r){f[t]=e,f[t+1]=n,f[t+2]=r})}}if(l=function(){return 0},!Array.isArray(e))throw new Error("Coordinates are not valid");if((f=[]).length=e.length,i=e.length,!e.length)return f;for(Array.isArray(e[0])||a.isObject(e[0])?(o=1,Array.isArray(e[0])?p():a.isObject(e[0])&&function(){if(!(e[0]&&"x"in e[0]&&"y"in e[0]))throw new Error("Invalid coordinates");s=function(t){return+e[t].x},u=function(t){return+e[t].y},"z"in e[0]?(l=function(t){return+e[t].z},c=function(t,e,n,i){f[r]={x:e,y:n,z:i}}):c=function(t,e,n){f[t]={x:e,y:n}}}()):p(),r=0;r<i;r+=o)d.x=s(r),d.y=u(r),d.z=l(r),h=t.forward(d,!0),c(r,h.x,h.y,h.z);return f},f.transformCoordinatesFlatArray3=function(t,e,n){"use strict";var i,o=t.match(l),a=e.match(l);if(o&&a&&o[1]===a[1]&&o[3]===a[3]){for(i=n.length-3+1;i>=0;i-=3)n[i]*=-1;return n}var s,u=r.Proj(t),c=r.Proj(e),f={},h=new r(u,c);for(i=n.length-3;i>=0;i-=3)f.x=+n[i],f.y=+n[i+1],f.z=+(n[i+2]||0),s=h.forward(f,!0),n[i]=s.x,n[i+1]=s.y,n[i+2]=void 0===s.z?f.z:s.z;return n},f.affineForward=function(t,e){"use strict";var n,r=t.origin,i=t.scale||{x:1,y:1,z:1};for(n=0;n<e.length;n+=1)e[n].x=(e[n].x-r.x)*i.x,e[n].y=(e[n].y-r.y)*i.y,e[n].z=((e[n].z||0)-(r.z||0))*i.z;return e},f.affineInverse=function(t,e){"use strict";var n,r=t.origin,i=t.scale||{x:1,y:1,z:1};for(n=0;n<e.length;n+=1)e[n].x=e[n].x/i.x+r.x,e[n].y=e[n].y/i.y+r.y,e[n].z=(e[n].z||0)/i.z+(r.z||0);return e},f.sphericalDistance=function(t,e,n,i,o){if(i=i||"EPSG:4326",o=o||r.WGS84,(n=n||i)!==i){var a=f.transformCoordinates(n,i,[t,e]);t=a[0],e=a[1]}var s=t.y*Math.PI/180,u=e.y*Math.PI/180,l=(e.x-t.x)*Math.PI/180,c=Math.sin(s),h=Math.cos(s),d=Math.sin(u),p=Math.cos(u),m=Math.atan2(Math.pow(Math.pow(p*Math.sin(l),2)+Math.pow(h*d-c*p*Math.cos(l),2),.5),c*d+h*p*Math.cos(l));return o.a*m},f.vincentyDistance=function(t,e,n,i,o,a){if(i=i||"EPSG:4326",o=o||r.WGS84,a=a||100,(n=n||i)!==i){var s=f.transformCoordinates(n,i,[t,e]);t=s[0],e=s[1]}var u,l,c,h,d,p,m,g,y,v,x=o.a,_=o.b||o.a*(1-(o.f||1/o.rf)),b=o.f||(o.rf?1/o.rf:1-_/x),w=t.y*Math.PI/180,M=e.y*Math.PI/180,A=((e.x-t.x)%360+360)%360*Math.PI/180,E=Math.atan((1-b)*Math.tan(w)),T=Math.atan((1-b)*Math.tan(M)),S=Math.sin(E),C=Math.cos(E),k=Math.sin(T),P=Math.cos(T),O=A,L=A+2*Math.PI;if(w===M&&!A)return{distance:0,alpha1:0,alpha2:0};for(v=a;v>0&&Math.abs(O-L)>1e-12;v-=1)u=Math.pow(Math.pow(P*Math.sin(O),2)+Math.pow(C*k-S*P*Math.cos(O),2),.5),l=S*k+C*P*Math.cos(O),c=Math.atan2(u,l),h=C*P*Math.sin(O)/u,L=O,O=A+(1-(m=b/16*(d=1-Math.pow(h,2))*(4+b*(4-3*d))))*b*h*(c+m*u*((p=l-(d?2*S*k/d:0))+m*l*(2*Math.pow(p,2)-1)));return v?{distance:_*(1+(g=d*(x*x-_*_)/(_*_))/16384*(4096+g*(g*(320-175*g)-768)))*(c-(y=g/1024*(256+g*(g*(74-47*g)-128)))*u*(p+y/4*(l*(2*Math.pow(p,2)-1)-y/6*p*(4*u*u-3)*(4*Math.pow(p,2)-3)))),alpha1:Math.atan2(P*Math.sin(O),C*k-S*P*Math.cos(O)),alpha2:Math.atan2(C*Math.sin(O),-S*P+C*k*Math.cos(O))}:void 0},f.onlyInvertedY=function(t,e){var n=t.match(l),r=e.match(l);return n&&r&&n[1]===r[1]&&n[3]===r[3]},f.proj4=r,t.exports=f},3170:function(t){t.exports={}},5734:function(t,e,n){var r=n(2493).d3,i=n(8524),o=n(4626),a=n(1098).registerWidget,s=n(642),u=n(7376);n(1159);var l=function(t){"use strict";if(!(this instanceof l))return new l(t);i.call(this,t);var e=this,n=[],o=t.width||300,a=t.ticks||6,f=this._init;return this._init=function(){f();var n=e.canvas();r.select(n).attr("class","color-legend-container"),e.popup=r.select(n).append("div").attr("class","color-legend-popup"),t.categories&&e.categories(t.categories)},this._draw=function(){if(r.select(e.canvas()).selectAll("div.geojs-color-legends").remove(),n.length){r.select(e.canvas()).style("display","block");var t=r.select(e.canvas()).append("div").attr("class","geojs-color-legends"),i=o;n.forEach(function(n,r){var o=t.append("div").attr("class","geojs-color-legend");o.append("div").attr("class","geojs-title").text(n.name);var a=o.append("svg").attr("class","svg").attr("width",i).attr("height","40px").attr("viewBox","-20 0 "+i+" 40");"discrete"===n.type?e._drawDiscrete(a,i-40,n):"continuous"===n.type&&e._drawContinous(a,i-40,n)})}else r.select(e.canvas()).style("display","none")},this.categories=function(t){return void 0===t?n:(n=e._prepareCategories(t),e._draw(),e)},this.addCategories=function(t){return n=n.concat(e._prepareCategories(t)),e._draw(),e},this.removeCategories=function(t){return n=n.filter(function(e){return-1===t.indexOf(e)}),e._draw(),e},this._prepareCategories=function(t){return t.forEach(function(t){t.color=t.colors.map(function(t){return s.convertColorToHex(t,!0)})}),t},this._drawDiscrete=function(t,n,i){function o(t){var e=Math.ceil(t.domain().length/a),n=t.domain().filter(function(t,n){return n%e===0});return r.axisBottom(t).tickFormat(r.format(".2s")).tickValues(n)}if(-1===["linear","log","sqrt","pow","quantile","ordinal"].indexOf(i.scale))throw new Error("unsupported scale");var u,l,f,h,d,p,m;if("ordinal"===i.scale){f=r.scaleOrdinal().domain(i.domain).range(i.colors),e._renderDiscreteColors(t,i.domain,f,n,function(t){return t}),h=r.scaleBand().domain(i.domain).rangeRound([0,n]);var g=Math.ceil(i.domain.length/a),y=i.domain.filter(function(t,e){return e%g===0});d=r.axisBottom(h).tickValues(y)}else if("quantile"===i.scale){u=[0,i.colors.length],p=s.range(0,i.colors.length-1),l=r.scaleQuantile().domain(i.domain).range(p),f=r.scaleQuantize().domain(u).range(i.colors),e._renderDiscreteColors(t,p,f,n,function(t){return l.invertExtent(t).join(" - ")});var v=[l.invertExtent(0)[0]];v=v.concat(p.map(function(t){return l.invertExtent(t)[1]})),d=o(h=r.scalePoint().domain(v).range([0,n]))}else if(-1!==["linear","log","sqrt","pow"].indexOf(i.scale)){u=[0,i.colors.length],l=r["scale"+i.scale.charAt(0).toUpperCase()+i.scale.slice(1)]().domain(i.domain).range(u).nice(),f=r.scaleQuantize().domain(u).range(i.colors),p=s.range(0,i.colors.length-1);var x=Math.max.apply(null,i.domain.map(function(t){return c(t)}));e._renderDiscreteColors(t,p,f,n,function(t){return e._popupFormatter(l.invert(t),x)+" - "+e._popupFormatter(l.invert(t+1),x)}),(m=p.slice()).push(i.colors.length),d=o(h=r.scalePoint().domain(m.map(function(t){return l.invert(t)})).range([0,n]))}i.endAxisLabelOnly&&d.tickValues([h.domain()[0],h.domain()[h.domain().length-1]]),e._renderAxis(t,d)},this._renderDiscreteColors=function(t,n,r,i,o){t.selectAll("rect").data(n).enter().append("rect").attr("width",i/n.length).attr("height","20px").attr("fill",function(t){return r(t)}).attr("transform",function(t,e){return"translate("+e*i/n.length+" ,0)"}).on("mousemove",function(t,n){e._showPopup(t,o(n))}).on("mouseout",e._hidePopup)},this._drawContinous=function(t,n,i){var o,s,l;if(-1===["linear","log","sqrt","pow"].indexOf(i.scale))throw new Error("unsupported scale");var f=[0];for(l=1;l<i.domain.length-1;l++)f.push(n/(i.domain.length-1)*l);f.push(n),o=r["scale"+i.scale.charAt(0).toUpperCase()+i.scale.slice(1)]().domain(i.domain).range(f).nice(),"log"===i.scale&&i.base&&o.base(i.base),"pow"===i.scale&&i.exponent&&o.exponent(i.exponent);var h=u(),d=Math.max.apply(null,i.domain.map(function(t){return c(t)})),p=t.append("defs").append("linearGradient").attr("id","gradient"+h);for(p.append("stop").attr("offset","0%").attr("stop-color",i.colors[0]),l=1;l<i.colors.length-1;l++)p.append("stop").attr("offset",(100/(i.colors.length-1)*l).toFixed(6)+"%").attr("stop-color",i.colors[l]);p.append("stop").attr("offset","100%").attr("stop-color",i.colors[i.colors.length-1]),t.append("rect").attr("fill","url(#gradient"+h+")").attr("width",n).attr("height","20px").on("mousemove",function(t){var n=o.invert(r.pointer(t)[0]),i=e._popupFormatter(n,d);e._showPopup(t,i)}).on("mouseout",e._hidePopup),s=r.axisBottom(o).ticks(a,".2s"),i.endAxisLabelOnly&&s.tickValues([i.domain[0],i.domain[i.domain.length-1]]),e._renderAxis(t,s)},this._renderAxis=function(t,e){t.append("g").attr("class","axis x").attr("transform","translate(0, 20)").call(e)},this._popupFormatter=function(t,e){return t=parseFloat(t.toFixed(8)),e=Math.min(e,c(t)),e=Math.min(e,Math.max(3,7-Math.trunc(t).toString().length)),r.format("."+e+"f")(t)},this.width=function(t){return void 0===t?o:(t!==o&&(o=t,e._prepareCategories(n),e._draw()),e)},this.ticks=function(t){return void 0===t?a:(t!==a&&(a=t,e._prepareCategories(n),e._draw()),e)},this._showPopup=function(t,n){var i=r.pointer(t,e.canvas());e.popup.text(n);var o=e.canvas().clientWidth,a=e.popup.node().clientWidth;e.popup.style("left",i[0]-(i[0]+a-o>-10?a:0)+"px").style("top",i[1]-22+"px").transition().duration(200).style("opacity",1)},this._hidePopup=function(){e.popup.transition().duration(200).style("opacity",0)},this};function c(t){if(!isFinite(t))return 0;for(var e=1,n=0;Math.round(t*e)/e!==t;){if(!isFinite(t*e))return 0;e*=10,n++}return n}o(l,i),a("dom","colorLegend",l),t.exports=l},8524:function(t,e,n){var r=n(8738),i=n(4626),o=n(1098).registerWidget,a=function(t){"use strict";if(!(this instanceof a))return new a(t);r.call(this,t);var e=this;return this._init=function(){return t.hasOwnProperty("parent")&&t.parent.addChild(e),e._createCanvas(),e._appendCanvasToParent(),e.canvas().addEventListener("mousedown",function(t){t.stopPropagation()}),e.reposition(),e},this._createCanvas=function(){e.canvas(document.createElement(t.el||"div"))},this};i(a,r),o("dom","dom",a),t.exports=a},4812:function(t,e,n){t.exports={colorLegendWidget:n(5734),domWidget:n(8524),legendWidget:n(9443),scaleWidget:n(2894),sliderWidget:n(3019),svgWidget:n(7854),uiLayer:n(4231),widget:n(8738)}},9443:function(t,e,n){var r=n(7854),i=n(4626),o=n(1098).registerWidget,a=function(t){"use strict";if(!(this instanceof a))return new a(t);r.call(this,t);var e=n(2493).d3,i=n(6409),o=this,s=[],u=null,l=null,c=null;this.categories=function(t){return void 0===t?s.slice():(s=t.slice().map(function(t){return"line"===t.type&&(t.style.fill=!1,t.style.stroke=!0),t}),o.draw(),o)},this.size=function(){var t,n=1,r=e.select(o.canvas()).append("text").style("opacity",1e-6);return s.forEach(function(t){r.text(t.name),n=Math.max(n,r.node().getBBox().width)}),r.remove(),t=20*(s.length+1),{width:n+50,height:t}},this.draw=function(){function t(t){t.style("fill",function(t){return t.style.fill||void 0===t.style.fill?t.style.fillColor:"none"}).style("fill-opacity",function(t){return void 0===t.style.fillOpacity?1:t.style.fillOpacity}).style("stroke",function(t){return t.style.stroke||void 0===t.style.stroke?t.style.strokeColor:"none"}).style("stroke-opacity",function(t){return void 0===t.style.strokeOpacity?1:t.style.strokeOpacity}).style("stroke-width",function(t){return void 0===t.style.strokeWidth?1.5:t.style.strokeWidth})}o._init(),c.attr("height",o.size().height+24).style("display",null);var e=o._scale(),n=l.selectAll("g.geo-label").data(s,function(t){return t.name}).enter().append("g").attr("class","geo-label").attr("transform",function(t,n){return"translate(0,"+e.y(n)+")"});return t(n.filter(function(t){return"point"!==t.type&&"line"!==t.type}).append("rect").attr("x",0).attr("y",-6).attr("rx",5).attr("ry",5).attr("width",40).attr("height",12)),t(n.filter(function(t){return"point"===t.type}).append("circle").attr("cx",20).attr("cy",0).attr("r",6)),t(n.filter(function(t){return"line"===t.type}).append("line").attr("x1",0).attr("y1",0).attr("x2",40).attr("y2",0)),n.append("text").attr("x","50px").attr("y",0).attr("dy","0.3em").text(function(t){return t.name}),o.reposition(),o},this._scale=function(){return{x:e.scaleLinear().domain([0,1]).range([0,o.size().width]),y:e.scaleLinear().domain([0,s.length-1]).range([6,o.size().height-6])}},this._init=function(){u||(o._createCanvas(),o._appendCanvasToParent());var t=o.size().width+24+4,n=o.size().height+24+4;u&&u.remove(),e.select(o.canvas()).attr("width",t).attr("height",n),u=e.select(o.canvas()).append("g"),l=u.append("g").attr("transform","translate("+[14,14]+")"),(c=l.append("rect").attr("x",-12).attr("y",-12).attr("width",t-4).attr("height",n-4).attr("rx",3).attr("ry",3)).style("stroke","black").style("stroke-width","1.5px").style("fill","white").style("fill-opacity",.75).style("display","none"),l.on("mousedown",function(t){t.stopPropagation()}),l.on("mouseover",function(){c.transition().duration(250).style("fill-opacity",1)}),l.on("mouseout",function(){c.transition().duration(250).style("fill-opacity",.75)}),o.reposition()},this.geoOn(i.resize,function(){o.draw()})};i(a,r),o("dom","legend",a),t.exports=a},2894:function(t,e,n){var r=n(5616),i=n(4626),o=n(7854),a=n(1098).registerWidget;n(615);var s=function(t){"use strict";if(!(this instanceof s))return new s(t);o.call(this,t);var e=n(6409),i=n(5325),a=n(642),u=n(2493).d3,l=this,c=this._exit,f=Object.assign({},{scale:1,maxWidth:200,maxHeight:"left"===t.orientation||"right"===t.orientation?200:20,orientation:"bottom",strokeWidth:2,tickLength:10,units:"si",distance:function(t,e,n){return"+proj=longlat +axis=enu"===n?Math.sqrt(a.distance2dSquared(t,e)):i.sphericalDistance(t,e,n)}},t);this._init=function(){return l._createCanvas(),l._appendCanvasToParent(),l.reposition(),u.select(l.canvas()).attr("width",f.maxWidth).attr("height",f.maxHeight),l.geoOn(e.pan,l._update),l._render(),l},this._exit=function(){l.geoOff(e.pan,l._update),c()},this._vertical=function(){return"left"===f.orientation||"right"===f.orientation},this._scaleValue=function(t,e,n){var r,i,o,a=[{multiple:1,digits:1},{multiple:1.5,digits:2},{multiple:2,digits:1},{multiple:3,digits:1},{multiple:5,digits:1},{multiple:8,digits:1}],u=(n=s.unitsTable[n]||n||s.unitsTable[f.units]||f.units)[0];return n.forEach(function(e){t>=e.scale*(e.minimum||1)&&(u=e)}),i=Math.floor(Math.log(t/u.scale)/Math.log(u.basis||10)),(a=u.multiples||a).forEach(function(e){var n=u.scale*e.multiple*Math.pow(10,i);n<=t&&(r=e,o=n)}),{html:(r.multiple*Math.pow(10,i)).toFixed(Math.max(0,-i+r.digits-1))+" "+u.unit,value:o,pixels:o/t*e,power:i,multiple:r,unitRecord:u,originalValue:t,originalPixels:e}},this._render=function(){var t,e,n,i,o,a,s=u.select(l.canvas()),c=l.layer().map(),h=f.maxWidth,d=f.maxHeight,p=f.strokeWidth,m=.5*p,g=f.tickLength,y=l._vertical();if(t=(y?f.maxHeight:f.maxWidth)-p,n={x:(e={x:(e=r(s.node()).offset()).left+("left"===f.orientation?h-m:m),y:e.top+("top"===f.orientation?d-m:m)}).x+(y?0:t),y:e.y+(y?t:0)},(i=f.distance(c.displayToGcs(e,null),c.displayToGcs(n,null),c.gcs())*f.scale)<=0||!isFinite(i))console.warn("The distance calculated for the scale is invalid: "+i);else{switch(o=l._scaleValue(i,t),y?d=o.pixels+p:h=o.pixels+p,s.attr("width",h).attr("height",d),s.select("polyline").empty()&&s.append("polyline").classed("geojs-scale-widget-bar",!0).attr("fill","none").attr("stroke-width",p),s.select("text").empty()&&s.append("text").classed("geojs-scale-widget-text",!0),f.orientation){case"bottom":a=[[m,g],[m,m],[h-m,m],[h-m,g]],s.select("text").attr("x",h/2).attr("y",2*p).attr("text-anchor","middle").attr("dominant-baseline","hanging");break;case"top":a=[[m,d-g],[m,d-m],[h-m,d-m],[h-m,d-g]],s.select("text").attr("x",h/2).attr("y",d-2*p).attr("text-anchor","middle").attr("dominant-baseline","alphabetic");break;case"left":a=[[h-g,m],[h-m,m],[h-m,d-m],[h-g,d-m]],s.select("text").attr("x",h-2*p).attr("y",d/2).attr("text-anchor","end").attr("dominant-baseline","middle");break;case"right":a=[[g,m],[m,m],[m,d-m],[g,d-m]],s.select("text").attr("x",2*p).attr("y",d/2).attr("text-anchor","start").attr("dominant-baseline","middle")}s.select("polyline").attr("points",a.map(function(t){return t.join(",")}).join(" ")),s.select("text").html(o.html)}},this._update=function(){l._render()},this.options=function(t,e){if(void 0===t){var n=Object.assign({},f);return n.position=l.position(void 0,!0),n}return"string"==typeof t&&void 0===e?"position"===t?l.position(void 0,!0):f[t]:(void 0===e?f=a.deepMerge(f,t):f[t]=e,(t.position||"position"===t)&&l.position(t.position||e),l._render(),l)}};i(s,o),s.unitsTable={si:[{unit:"nm",scale:1e-9},{unit:"m",scale:1e-6},{unit:"mm",scale:.001},{unit:"m",scale:1},{unit:"km",scale:1e3}],miles:[{unit:"in",scale:.0254},{unit:"in",scale:.0254,basis:12,multiples:[{multiple:1,digits:1},{multiple:1.5,digits:2},{multiple:2,digits:1},{multiple:3,digits:1},{multiple:6,digits:1},{multiple:9,digits:1}]},{unit:"ft",scale:.3048},{unit:"mi",scale:1609.344}],decmiles:[{unit:"mi",scale:1609.344}]},s.areaUnitsTable={si:[{unit:"nm",scale:1e-18},{unit:"m",scale:1e-12},{unit:"mm",scale:1e-6},{unit:"m",scale:1},{unit:"km",scale:1e6}],hectares:[{unit:"ha",scale:1e4}],decmiles:[{unit:"mi",scale:2589988.110336}],miles:[{unit:"in",scale:64516e-8},{unit:"ft",scale:.09290304},{unit:"mi",scale:2589988.110336}],acres:[{unit:"pl",scale:25.29285264},{unit:"rd",scale:1011.7141056},{unit:"ac",scale:4046.8564224}]},s.formatUnit=function(t,e,n,r){if(null!=t){if(!Array.isArray(e)){if(!(n=n||s.unitsTable)||!n[e||"si"])return;e=n[e||"si"]}var i;for(i=0;i<e.length-1&&!(t<e[i+1].scale);i+=1);if(t/=(e=e[i]).scale,!((r=Math.max(0,-Math.ceil(Math.log10(t))+(void 0===r||r<0?3:r)))>10)){var o=t.toFixed(r);if(r){for(;"0"===o.substr(o.length-1);)o=o.substr(0,o.length-1);"."===o.substr(o.length-1)&&(o=o.substr(0,o.length-1))}return o+" "+e.unit}}},a("dom","scale",s),t.exports=s},3019:function(t,e,n){var r=n(7854),i=n(4626),o=n(1098).registerWidget,a=function(t){"use strict";if(!(this instanceof a))return new a(t);r.call(this,t);var e,i,o,s,u,l,c,f=n(2493).d3,h=n(6409),d=this,p=this._exit,m=t.width||20,g=t.height||160,y=t.width?.5*t.width:10;function v(t,e,n,r,i){var o=e.append("g"),a=i/1024;return o.append("g").append("g").attr("transform","translate("+n+","+r+") scale("+a+") translate(-512,-512)").append("path").attr("d",t).attr("class","geo-glyphicon"),o}c={white:"#f4f4f4",black:"#505050"},this.size=function(){return{width:m,height:g}},this._init=function(){d._createCanvas(),d._appendCanvasToParent(),d.reposition();var t=f.select(d.canvas()),n=d.layer().map();function r(e,r){var o=i.invert(f.pointer(event,t.node())[1]),a=n.zoomRange();o=(1-o)*(a.max-a.min)+a.min,r?n.transition({zoom:o,ease:f.easeCubicInOut,duration:500,done:d._update()}):(n.zoom(o),d._update()),e.stopPropagation()}function a(){f.select(this).attr("filter",null),l.selectAll("circle,rect,path").transition().duration(100).style("fill",function(t){return c[t.fill]||null}).style("stroke",function(t){return c[t.stroke]||null})}return t.attr("width",m).attr("height",g),e=f.scaleLinear().domain([-4,4]).range([0,m]),i=f.scaleLinear().domain([0,1]).range([1.5*m,g-1.5*m]),t=t.append("g").classed("geo-ui-slider",!0),l=t,(o=t.append("g")).append("circle").datum({fill:"white",stroke:null}).classed("geo-zoom-in",!0).attr("cx",e(0)).attr("cy",i(0)-m+2).attr("r",(m-2)/2).style("cursor","pointer").on("click",function(){var t=n.zoom();n.transition({zoom:t+1,ease:f.easeCubicInOut,duration:500})}).on("mousedown",function(t){t.stopPropagation()}),v("M512 81.92c-237.568 0-430.080 192.614-430.080 430.080 0 237.568 192.563 430.080 430.080 430.080s430.080-192.563 430.080-430.080c0-237.517-192.563-430.080-430.080-430.080zM564.326 564.326v206.182h-104.653v-206.182h-206.234v-104.653h206.182v-206.234h104.704v206.182h206.182v104.704h-206.182z",o,e(0),i(0)-m+2,m+4).style("cursor","pointer").style("pointer-events","none").select("path").datum({fill:"black",stroke:null}),(s=t.append("g")).append("circle").datum({fill:"white",stroke:null}).classed("geo-zoom-out",!0).attr("cx",e(0)).attr("cy",i(1)+m-2).attr("r",(m-2)/2).style("cursor","pointer").on("click",function(){var t=n.zoom();n.transition({zoom:t-1,ease:f.easeCubicInOut,duration:500})}).on("mousedown",function(t){t.stopPropagation()}),v("M512 81.92c-237.568 0-430.080 192.614-430.080 430.080 0 237.568 192.563 430.080 430.080 430.080s430.080-192.563 430.080-430.080c0-237.517-192.563-430.080-430.080-430.080zM770.56 459.674v104.704h-517.12v-104.704h517.12z",s,e(0),i(1)+m-2,m+4).style("cursor","pointer").style("pointer-events","none").select("path").datum({fill:"black",stroke:null}),t.append("rect").datum({fill:"white",stroke:"black"}).classed("geo-zoom-track",!0).attr("x",e(0)-m/6).attr("y",i(0)).attr("rx",m/10).attr("ry",m/10).attr("width",m/3).attr("height",g-3*m).style("cursor","pointer").on("click",function(t){r(t,!0)}),u=t.append("rect").datum({fill:"black",stroke:null}).classed("geo-zoom-nub",!0).attr("x",e(-4)).attr("y",i(.5)-y/2).attr("rx",3).attr("ry",3).attr("width",m).attr("height",y).style("cursor","pointer").on("mousedown",function(t){f.select(document).on("mousemove.geo.slider",function(){r(t)}),f.select(document).on("mouseup.geo.slider",function(){r(t),f.select(document).on(".geo.slider",null)}),t.stopPropagation()}),l.selectAll("*").on("mouseover",function(){f.select(this).attr("filter","url(#geo-highlight)"),l.selectAll("rect,path,circle").transition().duration(100).style("fill",function(t){return t.fill||null}).style("stroke",function(t){return t.stroke||null})}).on("mouseout",a),d.geoOn(h.zoom,d._update),a(),d._update(),d},this._exit=function(){d.geoOff(h.zoom,d._update),l.remove(),p()},this._update=function(t){var e=d.layer().map(),n=e.zoomRange(),r=e.zoom(),o=f.scaleLinear();r=(t=t||{}).value||r,o.domain([n.min,n.max]).range([1,0]).clamp(!0),u.attr("y",i(o(r))-y/2)}};i(a,r),o("dom","slider",a),t.exports=a},7854:function(t,e,n){var r=n(8738),i=n(4626),o=n(1098).registerWidget,a=function(t){"use strict";if(!(this instanceof a))return new a(t);r.call(this,t);var e=n(2493),i=this,o=this._exit,s=null;return this._init=function(){var e;return t.hasOwnProperty("parent")&&(t.parent.addChild(i),e=t.parent.canvas()),i._createCanvas(e),i.canvas().addEventListener("mousedown",function(t){t.stopPropagation()}),i.reposition(),i},this._exit=function(){s&&s._exit(),o()},this._createCanvas=function(t){var n={layer:i.layer(),widget:!0};t&&(n.d3Parent=t),(s=e(n))._resize=function(){},i.canvas(s.canvas().node())},this};i(a,r),o("dom","svg",a),t.exports=a},4231:function(t,e,n){var r=n(4626),i=n(1098).registerLayer,o=n(5156),a=function(t){"use strict";var e=n(1098).createWidget;if(t.renderer="dom",t.sticky=!1,!(this instanceof a))return new a(t);o.call(this,t);var r=this,i=this._exit;this.createWidget=function(t,n){var i=e(t,r,n);return n&&"parent"in n||r.addChild(i),i._init(n),r.modified(),i},this.deleteWidget=function(t){return t._exit(),r.removeChild(t),r.modified(),r},this._exit=function(){r.children().forEach(function(t){r.deleteWidget(t)}),i()}};r(a,o),i("ui",a),t.exports=a},8738:function(t,e,n){var r=n(4626),i=n(5402),o=function(t){"use strict";if(!(this instanceof o))return new o(t);t=t||{},i.call(this,t);var e=n(6409),r=this,a=this._exit,s=t.layer,u=null,l=void 0===t.position?{left:0,top:0}:t.position;if(!(void 0===t.parent||t.parent instanceof o))throw new Error("Parent must be of type geo.gui.widget");t.parent&&r.parent(t.parent),this._init=function(){return r.modified(),r},this._exit=function(){if(r.children().forEach(function(t){r.removeChild(t),t._exit()}),r.layer().geoOff(e.pan,r.repositionEvent),r.parentCanvas().removeChild&&r.canvas())try{r.parentCanvas().removeChild(r.canvas())}catch(t){}a()},this.layer=function(){return s||r.parent()&&r.parent().layer()},this._createCanvas=function(){throw new Error("Must be defined in derived classes")},this.canvas=function(t){return void 0===t?u:(u=t,r)},this._appendCanvasToParent=function(){r.parentCanvas().appendChild(r.canvas())},this.parentCanvas=function(){return r.parent()?r.parent().canvas():r.layer().canvas()},this.position=function(t,n){if(void 0!==t){r.layer().geoOff(e.pan,r.repositionEvent);var i={};for(var o in l)l.hasOwnProperty(o)&&(i[o]=null);return(l=t).hasOwnProperty("x")&&l.hasOwnProperty("y")&&r.layer().geoOn(e.pan,r.repositionEvent),r.reposition(Object.assign(i,r.position())),r}if(l.hasOwnProperty("x")&&l.hasOwnProperty("y")&&!n){var a=r.layer().map().gcsToDisplay(l);return{left:a.x,top:a.y,right:null,bottom:null}}return l},this.reposition=function(t){if(t=t||r.position(),r.canvas()&&r.canvas().style)for(var e in r.canvas().style.position="absolute",t)t.hasOwnProperty(e)&&(/^\s*(-|\+)?(\d+(\.\d*)?|\d*\.\d+)([eE](-|\+)?\d+)?\s*$/.test(t[e])?r.canvas().style[e]=parseFloat(parseFloat(t[e]).toFixed(3))+"px":r.canvas().style[e]=t[e]);return r},this.repositionEvent=function(){return r.reposition()},this.isInViewport=function(){var t=r.position(),e=r.layer();return t.left>=0&&t.top>=0&&t.left<=e.width()&&t.top<=e.height()},l.hasOwnProperty("x")&&l.hasOwnProperty("y")&&this.layer().geoOn(e.pan,r.repositionEvent)};r(o,i),t.exports=o},5966:function(t,e,n){function r(t,e,n){this._group=t,this._zoom=e,this._points=[],this._clusters=[],this._count=0,this._parent=null,this._coord=null;var r=this;(n||[]).forEach(function(t){r._add(t)})}function i(t){var e,i,o=n(7235);for(this._opts=Object.assign({maxZoom:18,radius:5},t),this._clusters={},this._points={},e=this._opts.maxZoom;e>=0;e-=1)i=this._opts.radius*Math.pow(2,-e),this._clusters[e]=new o(i),this._points[e]=new o(i);this._topClusterLevel=new r(this,-1)}r.prototype._add=function(t){var e=1;t instanceof r?(this._clusters.push(t),e=t._count):this._points.push(t),t._parent=this,this._increment(e)},r.prototype._increment=function(t){this._coord=null,this._count+=t,this._parent&&this._parent._increment(t)},r.prototype.count=function(){return this._count},r.prototype.each=function(t){var e;for(e=0;e<this._points.length;e+=1)t.call(this,this._points[e],this._zoom);for(e=0;e<this._clusters.length;e+=1)this._clusters[e].each.call(this._clusters[e],t)},r.prototype.coords=function(){if(this._coord)return this._coord;var t,e={x:0,y:0};for(t=0;t<this._points.length;t+=1)e.x+=this._points[t].x,e.y+=this._points[t].y;for(t=0;t<this._clusters.length;t+=1)e.x+=this._clusters[t].coords().x*this._clusters[t].count(),e.y+=this._clusters[t].coords().y*this._clusters[t].count();return this._coord={x:e.x/this.count(),y:e.y/this.count()},this._coord},i.prototype.addPoint=function(t){var e,n,i,o,a,s;for(e=this._opts.maxZoom;e>=0;e-=1){if(n=this._clusters[e].getNearObject(t))return void n._add(t);if(n=this._points[e].getNearObject(t)){if(i=n._parent)for(s=i._points.length-1;s>=0;s-=1)if(i._points[s]===n){i._points.splice(s,1),i._increment(-1);break}for(o=new r(this,e,[n,t]),this._clusters[e].addObject(o,o.coords()),a=o,s=e-1;s>i._zoom;s-=1)a=new r(this,s,[a]),this._clusters[s].addObject(a,a.coords());for(i._add(a),s=e;s>=0&&this._points[s].removeObject(n,n);s-=1);return}this._points[e].addObject(t,t)}this._topClusterLevel._add(t)},i.prototype.points=function(t){return t=Math.min(Math.max(Math.floor(t),0),this._opts.maxZoom-1),this._points[Math.floor(t)].contents()},i.prototype.clusters=function(t){return t=Math.min(Math.max(Math.floor(t),0),this._opts.maxZoom-1),this._clusters[Math.floor(t)].contents()},t.exports=i},5637:function(t,e,n){var r=n(1949),i=n(3087);i=i.__esModule?i.default:i;var o={maxCount:1e3,count:0,memo:{}};function a(t,e){return o.count+=1,o.count>=o.maxCount&&(o.memo={},o.count=0),o.memo[t]=e,e}var s={convertColor:function(t){if(null==t||void 0!==t.r&&void 0!==t.g&&void 0!==t.b)return t;if(void 0!==o.memo[t])return o.memo[t];var e,n=t;if("string"==typeof t){var r=t.toLowerCase();if(i.hasOwnProperty(r))t={r:i[r][0]/255,g:i[r][1]/255,b:i[r][2]/255};else if("#"===t.charAt(0))4===t.length||5===t.length?(5===t.length&&(e=parseInt(t.slice(4),16)/15),t=4352*(3840&(t=parseInt(t.slice(1,4),16)))+272*(240&t)+17*(15&t)):7!==t.length&&9!==t.length||(9===t.length&&(e=parseInt(t.slice(7),16)/255),t=parseInt(t.slice(1,7),16));else if("transparent"===r)e=t=0;else if(r.indexOf("(")>=0)for(var u=0;u<s.cssColorConversions.length;u+=1){var l=s.cssColorConversions[u].regex.exec(r);if(l)return a(n,t=s.cssColorConversions[u].process(r,l))}}return isFinite(t)&&(t={r:((16711680&t)>>16)/255,g:((65280&t)>>8)/255,b:(255&t)/255}),void 0!==e&&t&&void 0!==t.r&&(t.a=e),a(n,t)},convertColorAndOpacity:function(t,e,n){return(t=s.convertColor(t))&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b||(t=s.convertColor(n||{r:0,g:0,b:0})),t&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b||(t={r:0,g:0,b:0}),t={r:isFinite(t.r)&&t.r>=0?t.r<=1?+t.r:1:0,g:isFinite(t.g)&&t.g>=0?t.g<=1?+t.g:1:0,b:isFinite(t.b)&&t.b>=0?t.b<=1?+t.b:1:0,a:r.isNonNullFinite(t.a)&&t.a>=0&&t.a<1?+t.a:1},r.isNonNullFinite(e)&&e<1&&(t.a=e<=0?0:t.a*e),t},convertColorToHex:function(t,e){var n,r=s.convertColor(t);return n=r.r||r.g||r.b?"#"+((1<<24)+(Math.round(255*r.r)<<16)+(Math.round(255*r.g)<<8)+Math.round(255*r.b)).toString(16).slice(1):"#000000",void 0!==r.a&&e&&(r.a<1||"needed"!==e)&&(n+=(256+Math.round(255*r.a)).toString(16).slice(1)),n},convertColorToRGBA:function(t){var e=s.convertColor(t);return e||(e={r:0,g:0,b:0}),(!r.isNonNullFinite(e.a)||e.a>1)&&(e.a=1),"rgba("+Math.round(255*e.r)+", "+Math.round(255*e.g)+", "+Math.round(255*e.b)+", "+ +(+e.a).toFixed(5)+")"},cssAngleUnitsBase:{deg:360,grad:400,rad:2*Math.PI,turn:1},cssNumberRegex:"[+-]?(?:\\d+\\.?\\d*|\\.\\d+)(?:[eE][+-]?\\d+)?"};s.cssColorConversions=[{name:"rgb",regex:new RegExp("^\\s*rgba?\\(\\s*("+s.cssNumberRegex+")\\s*(%?)\\s*,?\\s*("+s.cssNumberRegex+")\\s*(%?)\\s*,?\\s*("+s.cssNumberRegex+")\\s*(%?)\\s*([/,]?\\s*("+s.cssNumberRegex+")\\s*(%?)\\s*)?\\)\\s*$"),process:function(t,e){return t={r:Math.min(1,Math.max(0,+e[1]/(e[2]?100:255))),g:Math.min(1,Math.max(0,+e[3]/(e[4]?100:255))),b:Math.min(1,Math.max(0,+e[5]/(e[6]?100:255)))},e[7]&&(t.a=Math.min(1,Math.max(0,+e[8]/(e[9]?100:1)))),t}},{name:"hsl",regex:new RegExp("^\\s*hsla?\\(\\s*("+s.cssNumberRegex+")\\s*(deg|grad|rad|turn)?\\s*,?\\s*("+s.cssNumberRegex+")\\s*%\\s*,?\\s*("+s.cssNumberRegex+")\\s*%\\s*([/,]?\\s*("+s.cssNumberRegex+")\\s*(%?)\\s*)?\\)\\s*$"),process:function(t,e){var n=function(t,e,n){return 6*(n-=Math.floor(n))<1?t+(e-t)*n*6:6*n<3?e:6*n<4?t+(e-t)*(2/3-n)*6:t},r=+e[1]/(s.cssAngleUnitsBase[e[2]]||360),i=Math.min(1,Math.max(0,+e[3]/100)),o=Math.min(1,Math.max(0,+e[4]/100)),a=o<=.5?o*(i+1):o+i-o*i,u=2*o-a;return t={r:n(u,a,r+1/3),g:n(u,a,r),b:n(u,a,r-1/3)},e[5]&&(t.a=Math.min(1,Math.max(0,+e[6]/(e[7]?100:1)))),t}}],t.exports=s},1949:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var i=n(5616),o=n(9677);o=o.__esModule?o.default:o;var a,s,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l='<svg xmlns="http://www.w3.org/2000/svg"><foreignObject width="100%" height="100%"></foreignObject></svg>',c={},f=200,h=15;function d(){var t;for(t=0;t<arguments.length;t+=1)if(isFinite(arguments[t]))return arguments[t]}var p={pointInPolygon:function(t,e,n,r){return e.outer&&(n=e.inner,e=e.outer),!(e.length<3)&&(!(r&&r.min&&r.max&&(t.x<r.min.x||t.y<r.min.y||t.x>r.max.x||t.y>r.max.y))&&p.distanceToPolygon2d(t,n?{outer:e,inner:n}:e,!0)>0)},pointToTriangleBasis2d:function(t,e,n,r){var i=n.x-e.x,o=r.x-e.x,a=n.y-e.y,s=r.y-e.y,u=t.x-e.x,l=t.y-e.y,c=i*s-o*a;if(c)return{x:(u*s-l*o)/c,y:(u*-a+l*i)/c}},isReadyImage:function(t,e){return!!(t instanceof Image&&t.complete&&t.src&&(t.naturalWidth&&t.naturalHeight||e))},isReadyVideo:function(t,e){return!!(t instanceof HTMLVideoElement&&t.src&&void 0!==t.HAVE_CURRENT_DATA&&(t.videoWidth&&t.videoHeight&&t.readyState>=t.HAVE_CURRENT_DATA||e&&t.error))},isFunction:function(t){return"function"==typeof t},ensureFunction:function(t){return p.isFunction(t)?t:function(){return t}},isNonNullFinite:function(t){return isFinite(t)&&null!==t&&!1!==t&&""!==t},randomString:function(t){var e,n,r;for(t=t||8,e="",n=0;n<t;n+=1)r=Math.floor(62*Math.random()),e+=u.substring(r,r+1);return e},normalizeCoordinates:function(t){return t=t||{},Array.isArray(t)?{x:t[0],y:t[1],z:t[2]||0}:{x:d(t.x,t.longitude,t.lng,t.lon,0),y:d(t.y,t.latitude,t.lat,0),z:d(t.z,t.elevation,t.elev,t.height,0)}},range:function(t,e,n){n=n||1;for(var r=[],i=t;i<=e;i+=n)r.push(i);return r},compareArrays:function(t,e){return t.length===e.length&&t.every(function(t,n){return t===e[n]})},vec3AsArray:function(){return[0,0,0]},mat3AsArray:function(){return[1,0,0,0,1,0,0,0,1]},mat4AsArray:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},getGeomBuffer:function(t,e,n,r,i){r=void 0===r?.2:r,i=void 0===i?.1:i;var o=t.sourceByName(e),a=o.data(),s=Math.floor((r+1)*n);if((a=o.data())instanceof Float32Array&&(a.length===n||a.length>=n&&a.length<=s))return a;var u=n;return a instanceof Float32Array&&a.length&&n&&i>0&&(u=Math.floor((i+1)*n)),a=new Float32Array(u),o.setData(a),a},adjustActions:function(t){var e,n;for(n=0;n<t.length;n+=1){if(e=t[n],"string"===i.type(e.input)){var r={};r[e.input]=!0,e.input=r}if(e.modifiers||(e.modifiers={}),"string"===i.type(e.modifiers)){var o={};o[e.modifiers]=!0,e.modifiers=o}}},addAction:function(t,e,n){n?t.push(e):t.unshift(e),p.adjustActions(t)},hasAction:function(t,e,n,r){e&&e.action&&(n=e.name,r=e.owner,e=e.action);for(var i=0;i<t.length;i+=1)if(!(e&&t[i].action!==e||n&&t[i].name!==n||r&&t[i].owner!==r))return t[i];return null},removeAction:function(t,e,n,r){var i,o=0;do{(i=p.hasAction(t,e,n,r))&&(t.splice(t.indexOf(i),1),o+=1)}while(i);return o},actionMatch:function(t,e,n){var r;if(n.some(function(n){for(var i in n.input)if(n.input.hasOwnProperty(i)&&(!1===n.input[i]&&t[i]||n.input[i]&&!t[i]))return!1;for(var o in n.modifiers)if(n.modifiers.hasOwnProperty(o)&&(!1===n.modifiers[o]&&e[o]||n.modifiers[o]&&!e[o]))return!1;return r=n,!0}))return r},pixelCoordinateParams:function(t,e,n,r,o){var a,s,u;t&&(a=(t=i(t)).innerWidth(),s=t.innerHeight()),o=o||n,u=(r=r||e)!==e||o!==n;var l=Math.min(0,Math.floor(Math.log(Math.min((a||r)/r,(s||o)/o))/Math.log(2))),c=Math.max(0,Math.ceil(Math.log(Math.max(e/r,n/o))/Math.log(2)));return{map:{node:t,ingcs:"+proj=longlat +axis=esu",gcs:"+proj=longlat +axis=enu",maxBounds:{left:0,top:0,right:e,bottom:n},unitsPerPixel:Math.pow(2,c),center:{x:e/2,y:n/2},min:l,max:c,zoom:l,clampBoundsX:!0,clampBoundsY:!0,clampZoom:!0},layer:{maxLevel:c,minLevel:Math.min(0,c),wrapX:!1,wrapY:!1,tileOffset:function(){return{x:0,y:0}},attribution:"",tileWidth:r,tileHeight:o,tileRounding:Math.ceil,tilesAtZoom:u?function(t){var i=Math.pow(2,c-t);return{x:Math.ceil(e/r/i),y:Math.ceil(n/o/i)}}:void 0,tilesMaxBounds:u?function(t){var r=Math.pow(2,c-t);return{x:Math.floor(e/r),y:Math.floor(n/r)}}:void 0}}},centerFromPerimeter:function(t){var e,n,r,i,o,a;if(t&&t.outer&&(t=t.outer),t&&t.length){if(1===t.length)return{x:t[0].x,y:t[0].y};for(e={x:0,y:0},o=0,n=t[t.length-1],a=0;a<t.length;a+=1)r=n,n=t[a],i=Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2)),e.x+=(n.x+r.x)*i,e.y+=(n.y+r.y)*i,o+=2*i;return e.x/=o,e.y/=o,o?e:{x:n.x,y:n.y}}},distance2dSquared:function(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},distance2dToLineSquared:function(t,e,n){var r=n.x-e.x,i=n.y-e.y,o=r*r+i*i,a=0;return o&&(a=((t.x-e.x)*r+(t.y-e.y)*i)/o,a=Math.max(0,Math.min(1,a))),p.distance2dSquared(t,{x:e.x+a*r,y:e.y+a*i})},distanceToPolygon2d:function(t,e,n){for(var r,i,o=e.outer||e,a=!1,s=0,u=o.length,l=u-1;s<u;l=s,s+=1){var c=o[s],f=o[l];c.y>t.y!=f.y>t.y&&t.x<(f.x-c.x)*(t.y-c.y)/(f.y-c.y)+c.x&&(a=!a),i=n?1:p.distance2dToLineSquared(t,c,f),(void 0===r||i<r)&&(r=i)}return e.inner&&e.inner.forEach(function(e){var i=p.distanceToPolygon2d(t,e,n);i*i<r&&(r=i*i),i>0&&(a=!a)}),(a?1:-1)*Math.sqrt(r)},triangleTwiceSignedArea2d:function(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)},crossedLineSegmentPolygon2d:function(t,e,n){var r,i,o=n.outer||n,a=o.length;for(r=0,i=a-1;r<a;i=r,r+=1)if(p.crossedLineSegments2d(t,e,o[r],o[i]))return!0;if(n.inner)for(r=0;r<n.inner.length;r+=1)if(p.crossedLineSegmentPolygon2d(t,e,n.inner[r]))return!0;return!1},crossedLineSegments2d:function(t,e,n,r){return!(t.x>n.x&&t.x>r.x&&e.x>n.x&&e.x>r.x||t.x<n.x&&t.x<r.x&&e.x<n.x&&e.x<r.x||t.y>n.y&&t.y>r.y&&e.y>n.y&&e.y>r.y||t.y<n.y&&t.y<r.y&&e.y<n.y&&e.y<r.y)&&(!(t.x===n.x&&t.y===n.y||t.x===r.x&&t.y===r.y||e.x===n.x&&e.y===n.y||e.x===r.x&&e.y===r.y)&&!(p.triangleTwiceSignedArea2d(t,e,n)*p.triangleTwiceSignedArea2d(t,e,r)>0||p.triangleTwiceSignedArea2d(n,r,t)*p.triangleTwiceSignedArea2d(n,r,e)>0))},segmentCrossesLineList2d:function(t,e,n){return n.some(function(n){return n.some(function(r,i){return!!i&&p.crossedLineSegments2d(t,e,n[i-1],r)})})},rdpLineSimplify:function(t,e,n,r){if(t.length<=2||e<0)return t;var i,o,a,s=-1,u=e*e;if(n){for(i=1;i<t.length;i+=1)(o=p.distance2dSquared(t[0],t[i]))>s&&(s=o,a=i);return 4*s<=u?t.slice(a,a+1):(t=t.slice(a).concat(t.slice(0,a+1)),(t=p.rdpLineSimplify(t,e,!1,r)).splice(t.length-1),t)}for(i=1;i<t.length-1;i+=1)(o=p.distance2dToLineSquared(t[i],t[0],t[t.length-1]))>s&&(s=o,a=i);if(s<=u&&(!r||!p.segmentCrossesLineList2d(t[0],t[t.length-1],r)))return[t[0],t[t.length-1]];var l=t.slice(0,a+1),c=t.slice(a),f=p.rdpLineSimplify(l,e,!1,r?r.concat([c]):null),h=p.rdpLineSimplify(c,e,!1,r?r.concat([l]):null);return f.slice(0,f.length-1).concat(h)},getMinMaxValues:function(t,e,n,r){if(t.length&&(r||!i.isNumeric(e)||!i.isNumeric(n))){var o,a,s=t[0],u=t[0];for(a=t.length-1;a>0;a-=1)(o=t[a])<s&&(s=o),o>u&&(u=o);(!i.isNumeric(e)||r&&s>e)&&(e=s),(!i.isNumeric(n)||r&&u<n)&&(n=u)}return{min:e,max:n}},wrapAngle:function(t){return(t%=2*Math.PI)<-Math.PI?t+=2*Math.PI:t>=Math.PI&&(t-=2*Math.PI),t},escapeUnicodeHTML:function(t){return t.replace(/[^- 0-9A-Za-z~`!@#$%^&*()_+={}|[\]\\:";'<>?,./]/g,function(e,n){var r=e.charCodeAt(0);if(r<127)return e;if(r>=55296&&r<=57344){if(r<56320||n)return"";var i=t.charCodeAt(n-1);if(i<55296||i>=56320)return"";r=1024*(i-55296)+(r-56320)}return"&#"+r.toString(10)+";"})},deepMerge:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(var o=0,a=n;o<a.length;o++){var s=a[o];if(null!=s)for(var u in s)if("__proto__"!==u&&t!==s[u]){var l=s[u];if(l&&"object"===r(l)&&(l.constructor===Object||Array.isArray(l))){var c=t[u];Array.isArray(l)?Array.isArray(c)||(c=[]):("object"!==r(c)||Array.isArray(c))&&(c={}),t[u]=p.deepMerge(c,l)}else void 0!==l&&(t[u]=l)}}return t},dereferenceElements:function(t){var e=[];return i("img,image",t).each(function(){var t=i(this),n=t.is("image")?"href":"src";if(t.attr(n)){var r=new Image;("http"===t.attr(n).substr(0,4)||t[0].crossOrigin)&&(r.crossOrigin=t[0].crossOrigin||"anonymous");var o=i.Deferred();r.onload=function(){var e=document.createElement("canvas");e.width=r.naturalWidth,e.height=r.naturalHeight,e.getContext("2d").drawImage(r,0,0),t.attr(n,e.toDataURL("image/png")),"data:image"!==t.attr(n).substr(0,10)&&t.remove(),o.resolve()},r.onerror=function(){t.remove(),o.resolve()},r.src=t.attr(n),e.push(o)}}),e},dereferenceCssUrlsRegex:/url\(["']?(http[^)"']+|[^:)"']+)["']?\)/g,dereferenceCssUrls:function(t,e,n,r,o){var a=[],s=[];if(t=(t=t.replace(/\/\*[^\0]*?\*\//g,"")).replace(/\r/g,"\n").replace(/\s+\n/g,"\n").replace(/\n\s+/g,"\n").replace(/\n\n+/g,"\n"),o){var u=/(^[^?#]*)\/[^?#/]*([?#]|$)/g.exec(o);o=u&&u[1]?u[1]+"/":null}t.replace(p.dereferenceCssUrlsRegex,function(t,e){var n=a.length,r=i.Deferred(),u=new XMLHttpRequest;return a.push(r),s.push(""),/^[^/:][^:]*(\/|$)/g.exec(e)&&o&&(e=o+e),u.open("GET",e,!0),u.responseType="arraybuffer",u.onload=function(){if(200===this.status){var t,e=new Uint8Array(this.response),i=new Array(e.length);for(t=0;t<e.length;t+=1)i[t]=String.fromCharCode(e[t]);i=i.join(""),s[n]="url(data:"+u.getResponseHeader("content-type")+";base64,"+btoa(i)+")"}r.resolve()},u.onerror=r.resolve,u.send(),t}),i.when.apply(i,a).then(function(){var i=0;t=t.replace(p.dereferenceCssUrlsRegex,function(t,e){return s[(i+=1)-1]}),void 0===r?e.text(t):e.style[r]=t,n.resolve()})},htmlToImageSupported:function(){if(void 0===s){var t=i.Deferred(),e=i(l);e.attr({width:"10px",height:"10px","text-rendering":"optimizeLegibility"}),i("foreignObject",e).append("<div/>");var n=new Image;return n.onload=n.onerror=function(){var e=document.createElement("canvas");e.width=10,e.height=10,e.getContext("2d").drawImage(n,0,0);try{e.toDataURL(),s=!0}catch(t){console.warn("This browser does not support converting HTML to an image via SVG foreignObject.  Some functionality will be limited.",t),s=!1}t.resolve(s)},n.src="data:image/svg+xml;base64,"+btoa(p.escapeUnicodeHTML((new XMLSerializer).serializeToString(e[0]))),t}return s},htmlToImage:function(t,e){var n,r=i.Deferred(),o=[p.htmlToImageSupported()],a=i(t);for(t=i(t).clone();e&&e>0;)(a=a.parent()).is("div")&&((n=i("<div>").attr({class:a.attr("class"),id:a.attr("id")}).css({width:"100%",height:"100%",background:"none",margin:0})).append(t),t=n),e-=1;i("canvas",t).remove(),i("*",t).addBack().each(function(){for(var t=this.style,e=0;e<t.length;e+=1){var n=this.style[e];if(this.style[n].match(p.dereferenceCssUrlsRegex)){var r=i.Deferred();p.dereferenceCssUrls(this.style[n],this,r,n),o.push(r)}}}),(n=i('<div xmlns="http://www.w3.org/1999/xhtml">')).css({width:a.width()+"px",height:a.height()+"px"}),n.append(i("<head>"));var s=i("<body>");return n.append(s),s.css({width:a.width()+"px",height:a.height()+"px",background:"none",margin:0}),s.append(t),o=o.concat(p.dereferenceElements(t)),i('style,link[rel="stylesheet"]').each(function(){var t=i('<style type="text/css">'),e=i.Deferred();if(i(this).is("style")){var r=i(this).text();p.dereferenceCssUrls(r,t,e)}else{var a=i(this).attr("href");i.get(a).done(function(n){p.dereferenceCssUrls(n,t,e,void 0,a)}).fail(function(n,r,i){console.warn("Failed to dereference "+a,r,i),t.remove(),e.resolve()})}o.push(e),i("head",n).append(t)}),i.when.apply(i,o).then(function(){var t=i(l);t.attr({width:a.width()+"px",height:a.height()+"px","text-rendering":"optimizeLegibility"}),i("foreignObject",t).append(n);var e=new Image;p.htmlToImageSupported()?(e.onload=function(){r.resolve(e)},e.onerror=function(){console.warn("Failed to render html to image"),r.reject()},e.src="data:image/svg+xml;base64,"+btoa(p.escapeUnicodeHTML((new XMLSerializer).serializeToString(t[0])))):r.resolve(e)}),r},timeReport:function(t){return i.each(c,function(t,e){e.count?(e.stddev=Math.sqrt(Math.abs((e.sum2-e.sum*e.sum/e.count)/e.count)),e.average=e.sum/e.count):(e.stddev=0,e.average=0)}),t?c[t]:c},timeFunctionStart:function(t,e){c[t]&&!e||(c[t]={count:0,sum:0,sum2:0,max:0,recent:[]}),c[t].start=window.performance.now()},timeFunctionStop:function(t){if(c[t]&&c[t].start){var e=window.performance.now()-c[t].start;c[t].start=null,c[t].sum+=e,c[t].sum2+=e*e,c[t].count+=1,c[t].max=Math.max(c[t].max,e),c[t].recent.push(e),c[t].recent.length>f&&c[t].recent.splice(0,c[t].recent.length-f)}},timeRequestAnimationFrame:function(t,e,n,r){c.requestAnimationFrame&&!e||(c.requestAnimationFrame={count:0,sum:0,sum2:0,max:0,above_threshold:0,recent:[],recentsub:[]}),n&&(h=n),r&&(f=r),t&&a?(window.requestAnimationFrame=a,a=null):t||a||(a=window.requestAnimationFrame,window.requestAnimationFrame=function(t){return a.call(window,function(e){var n,r=c.requestAnimationFrame;r.timestamp!==e&&(r.nowDelta=window.performance.now()-e,Math.abs(r.nowDelta)<1e3&&(r.nowDelta=0),r.timestamp=e,r.subcalls=r.subcalls||0,r.start={sum:r.sum,sum2:r.sum2,count:r.count,max:r.max,above_threshold:r.above_threshold},r.recent.push([0]),r.recentsub.push([]),r.recent.length>f&&(r.recent.splice(0,r.recent.length-f),r.recentsub.splice(0,r.recentsub.length-f))),r.subcalls+=1,t.apply(this,arguments);var i=window.performance.now()-e;i-=r.nowDelta,r.sum=r.start.sum+i,r.sum2=r.start.sum2+i*i,r.count=r.start.count+1,r.max=Math.max(r.max,i),r.above_threshold=r.start.above_threshold+(i>=h?1:0),r.recent[r.recent.length-1]=i,(n=r.recentsub[r.recent.length-1]).push({total_duration:i,duration:i-(n.length?n[n.length-1].total_duration:0),callback:t.name||t})})})},isObject:function(t){var e=r(t);return null!=t&&("object"===e||"function"===e)},identityFunction:function(t){return t},packFloats:function(t){return t.length?((void 0===t[0]?0:Math.floor(250*Math.abs(t[0]))+1)+252*(void 0===t[1]?0:Math.floor(250*Math.abs(t[1]))+1)+252*(void 0===t[2]?0:Math.floor(250*Math.abs(t[2]))+1)*252)*(t[3]?-1:1):void 0===t?0:Math.floor(250*Math.abs(t))+1},radiusEarth:o.WGS84.a};t.exports=p},7235:function(t){var e={};e.Util={stamp:function(t){return t._leaflet_id=t._leaflet_id||++e.Util.lastId,t._leaflet_id},lastId:0};var n=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}};n.prototype={addObject:function(t,n){var r=this._getCoord(n.x),i=this._getCoord(n.y),o=this._grid,a=o[i]=o[i]||{},s=a[r]=a[r]||[],u=e.Util.stamp(t);n.obj=t,this._objectPoint[u]=n,s.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,n){var r,i,o=this._getCoord(n.x),a=this._getCoord(n.y),s=this._grid,u=s[a]=s[a]||{},l=u[o]=u[o]||[];for(delete this._objectPoint[e.Util.stamp(t)],r=0,i=l.length;r<i;r++)if(l[r]===t)return l.splice(r,1),1===i&&delete u[o],!0},eachObject:function(t,e){var n,r,i,o,a,s,u=this._grid;for(n in u)for(r in a=u[n])for(i=0,o=(s=a[r]).length;i<o;i++)t.call(e,s[i])&&(i--,o--)},getNearObject:function(t){var n,r,i,o,a,s,u,l,c=this._getCoord(t.x),f=this._getCoord(t.y),h=this._objectPoint,d=this._sqCellSize,p=null;for(n=f-1;n<=f+1;n++)if(o=this._grid[n])for(r=c-1;r<=c+1;r++)if(a=o[r])for(i=0,s=a.length;i<s;i++)u=a[i],(l=this._sqDist(h[e.Util.stamp(u)],t))<d&&(d=l,p=u);return p},contents:function(){return Object.values(this._objectPoint)},_getCoord:function(t){return Math.floor(t/this._cellSize)},_sqDist:function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r}},t.exports=n},642:function(t,e,n){t.exports=Object.assign(n(1949),n(5637),n(208),n(269),{DistanceGrid:n(7235),ClusterGroup:n(5966),mesh:n(5905),polyops:n(5647)})},5905:function(t,e,n){t.exports={createColoredMesh:function(t,e){var r,i,o,a,s,u=n(642),l=t.mesh,c=t.style.get("value"),f={used:void 0!==t.style("used")?t.style.get("used"):function(t,e){return u.isNonNullFinite(c(t,e))},opacity:t.style.get("opacity"),value:c},h=t._createMesh(e?{}:f,e?f:{});if(h.elementValues=!!e,!h.numVertices||!h.numElements)return h;var d=l.get("stepped")(h),p=l.get("opacityRange")(h),m=l.get("rangeValues")(h);if(h.stepped=!(void 0!==d&&!d),h.colorMap=[],h.minColor=Object.assign({a:l.get("minOpacity")(h)||0},u.convertColor(l.get("minColor")(h))),h.maxColor=Object.assign({a:l.get("maxOpacity")(h)||0},u.convertColor(l.get("maxColor")(h))),l.get("colorRange")(h).forEach(function(t,e){h.colorMap.push(Object.assign({a:p&&void 0!==p[e]?p[e]:1},u.convertColor(t)))}),r=u.getMinMaxValues(h.value,l.get("min")(h),l.get("max")(h)),h.minValue=r.min,h.maxValue=r.max,m&&h.colorMap&&(m.length===h.colorMap.length+1||!d&&m.length===h.colorMap.length)||(m=null),m)for(s=1;s<m.length;s+=1)if(m[s-1]>m[s]){m=null;break}for(m&&(h.minValue=m[0],h.maxValue=m[m.length-1]),(o=h.maxValue-h.minValue)||(h.colorMap=h.colorMap.slice(0,1),o=1,m=null),h.rangeValues=m,h.factor=(h.colorMap.length-(d?0:1))/o,a=0;a<h.value.length;a+=1)if(i=h.value[a],m&&i>=h.minValue&&i<=h.maxValue){for(s=1;s<m.length;s+=1)if(i<=m[s]){h.value[a]=s-1+(i-m[s-1])/(m[s]-m[s-1]);break}}else h.value[a]=(i-h.minValue)*h.factor;return h}}},269:function(t,e,n){var r,i,o=n(7945);t.exports={},t.exports.mockWebglRenderer=function(t){"use strict";var e=n(1611);if(void 0===t&&(t=!0),e._mocked)throw new Error("webgl renderer already mocked");var a={},s=function(t){a[t]=(a[t]||0)+1},u=function(t){return function(){s(t)}},l=0,c=function(t){return function(){return s(t),l+=1}},f={activeTexture:u("activeTexture"),attachShader:u("attachShader"),bindAttribLocation:u("bindAttribLocation"),bindBuffer:u("bindBuffer"),bindFramebuffer:u("bindFramebuffer"),bindTexture:u("bindTexture"),blendFuncSeparate:u("blendFuncSeparate"),bufferData:u("bufferData"),bufferSubData:u("bufferSubData"),checkFramebufferStatus:function(t){if(s("checkFramebufferStatus"),t===e.GL.FRAMEBUFFER)return e.GL.FRAMEBUFFER_COMPLETE},clear:u("clear"),clearColor:u("clearColor"),clearDepth:u("clearDepth"),compileShader:u("compileShader"),createBuffer:c("createBuffer"),createFramebuffer:u("createFramebuffer"),createProgram:c("createProgram"),createShader:c("createShader"),createTexture:c("createTexture"),deleteBuffer:u("deleteBuffer"),deleteProgram:u("deleteProgram"),deleteShader:u("deleteShader"),deleteTexture:u("deleteTexture"),detachShader:u("detachShader"),depthFunc:u("depthFunc"),disable:u("disable"),disableVertexAttribArray:u("disableVertexAttribArray"),drawArrays:u("drawArrays"),enable:u("enable"),enableVertexAttribArray:u("enableVertexAttribArray"),finish:u("finish"),getError:u("getError"),getExtension:c("getExtension"),getParameter:function(t){switch(s("getParameter"),t){case e.GL.ALIASED_POINT_SIZE_RANGE:return[1,64];case e.GL.DEPTH_BITS:return 16;case e.GL.MAX_TEXTURE_SIZE:return 4096}},getProgramParameter:function(t,n){if(s("getProgramParameter"),n===e.GL.LINK_STATUS)return!0},getShaderInfoLog:function(){return s("getShaderInfoLog"),"log"},getShaderParameter:function(t,n){if(s("getShaderParameter"),n===e.GL.COMPILE_STATUS)return!0},getSupportedExtensions:function(){return s("getSupportedExtensions"),[]},getUniformLocation:c("getUniformLocation"),isEnabled:function(t){if(s("isEnabled"),t===e.GL.BLEND)return!0},linkProgram:u("linkProgram"),pixelStorei:u("pixelStorei"),shaderSource:u("shaderSource"),texImage2D:u("texImage2D"),texParameteri:u("texParameteri"),uniform1iv:u("uniform1iv"),uniform1fv:u("uniform1fv"),uniform2fv:u("uniform2fv"),uniform3fv:u("uniform3fv"),uniform4fv:u("uniform4fv"),uniformMatrix3fv:u("uniformMatrix3fv"),uniformMatrix4fv:u("uniformMatrix4fv"),useProgram:u("useProgram"),vertexAttribPointer:u("vertexAttribPointer"),vertexAttrib3fv:u("vertexAttrib3fv"),viewport:u("viewport")};r=e.renderWindow;var h=function(){e.renderWindow=r;var t,n=new e.renderWindow;return e.renderWindow=h,n._setup=function(){var r,i=n.renderers(),o=n.windowSize(),a=n.windowPosition();for(t=Object.assign({},e.GL,f),r=0;r<i.length;r+=1)(i[r].width()>o[0]||0===i[r].width()||i[r].height()>o[1]||0===i[r].height())&&i[r].resize(a[0],a[1],o[0],o[1]);return!0},n.context=function(){return t},n};e.renderWindow=h,i=o.supported,o.supported=function(){return!!t},o._maxTextureSize=4096,o._maxPointSize=64,e._mocked=!0,e.mockCounts=function(){return a}},t.exports.restoreWebglRenderer=function(){var t=n(1611);t._mocked&&(t.renderWindow=r,o.supported=i,delete t._mocked,delete t.mockCounts)}},5647:function(t,e,n){function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var o=n(9061),a=o.PolyBool,s=o.GeometryEpsilon,u=new a,l=n(6211),c=n(1949),f={"+":"union","|":"union",add:"union","-":"difference",sub:"difference",subtract:"difference",minus:"difference","*":"intersect","&":"intersect",mul:"intersect",multiply:"intersect",intersection:"intersect",x:"xor","^":"xor"};function h(t,e,n){t="select"+t.charAt(0).toUpperCase()+t.slice(1);for(var r=new a(new s(e));n.length>1;){for(var i=[],o=Math.ceil(n.length/2),u=0;u<o;u+=1){var l=n[u];if(u+o<n.length){var c=n[u+o];try{l=r.combine(l,c)}catch(t){l=r.segments(r.polygon(l)),c=r.segments(r.polygon(c));for(var f=20;f>=6;f-=1){var h=new a(new s(Math.pow(.1,f)));try{l=h.combine(l,c);break}catch(t){}}}l=r[t](l)}i.push(l)}n=i}return n}function d(t,e,n){if(e=e||{},t.toPolygonList){if(e.style=t,!(t=t.toPolygonList(n)).length)return e.min=e.max=[0,0],e.epsilon=1e-10,t}else{if(e.style="",t.outer?(e.style="-outer",t=[[t.outer].concat(r(t.inner||[]))]):t.length&&t[0].outer&&(e.style="-outer-list",t=t.map(function(t){return[t.outer].concat(r(t.inner||[]))})),!t.length)return e.style="flat-listlist"+e.style,e.min=e.max=[0,0],e.epsilon=1e-10,t;void 0!==t[0].x?(e.style="object",t=[[t.map(function(t){return[t.x,t.y]})]]):void 0!==t[0][0].x?(e.style="object-list"+e.style,t=[t.map(function(t){return t.map(function(t){return[t.x,t.y]})})]):void 0===t[0][0][0]?(e.style="flat",t=[[t]]):void 0!==t[0][0][0].x?(e.style="object-listlist"+e.style,t=t.map(function(t){return t.map(function(t){return t.map(function(t){return[t.x,t.y]})})})):void 0===t[0][0][0][0]?(e.style="flat-list",t=[t]):e.style="flat-listlist"+e.style}return e.min=[t[0][0][0][0],t[0][0][0][1]],e.max=[t[0][0][0][0],t[0][0][0][1]],t.forEach(function(t){return t.forEach(function(t){return t.forEach(function(t){t[0]<e.min[0]&&(e.min[0]=t[0]),t[0]>e.max[0]&&(e.max[0]=t[0]),t[1]<e.min[1]&&(e.min[1]=t[1]),t[1]>e.max[1]&&(e.max[1]=t[1])})})}),e.epsilon=1e-10*Math.max(Math.max(e.max[0],e.max[1]),Math.max(Math.abs(e.min[0]),Math.abs(e.min[1]))),t}function p(t,e,n){return e.style.fromPolygonList?e.style.fromPolygonList(t,n):(e.style.includes("object")&&(t=t.map(function(t){return t.map(function(t){return t.map(function(t){return{x:t[0],y:t[1]}})})})),e.style.includes("outer")&&(t=[t.map(function(t){return{outer:t[0],inner:t.slice(1)}})]),e.style.endsWith("listlist")||(t=e.style.endsWith("list")?t[0]:t[0][0]),t)}function m(t,e,r,i){var o=n(5325);t=f[t]||t,e.poly1&&(e=(i=e).poly1,r=i.poly2);var a=(i=i||{}).ingcs||(i.map?i.map.ingcs():e.gcs?e.gcs():e.layer&&e.layer().gcs?e.layer().gcs():e.layer?e.layer().map().ingcs():e.map instanceof l?e.map().ingcs():void 0),s=i.ingcs||(i.map?i.map.ingcs():r.gcs?r.gcs():r.layer&&r.layer().gcs?r.layer().gcs():r.layer?r.layer().map().ingcs():r.map instanceof l?r.map().ingcs():a),m=i.gcs||(i.map?i.map.gcs():e.layer?e.layer().map().gcs():e.map instanceof l?e.map().gcs():void 0),g={},y={};e=d(e,g,i),r=d(r,y,i),g.epsilon=i.epsilon1||g.epsilon,y.epsilon=i.epsilon2||g.epsilon,a&&m&&a!==m&&(e=e.map(function(t){return t.map(function(t){return o.transformCoordinates(a,m,t)})})),s&&m&&s!==m&&(r=r.map(function(t){return t.map(function(t){return o.transformCoordinates(s,m,t)})}));var v=e.map(function(t){return u.segments({regions:t})}),x=r.map(function(t){return u.segments({regions:t})});v=h(i.innerOperation||"union",g.epsilon,v),x=h(i.innerOperation||"union",y.epsilon,x);var _=v;v[0]&&x[0]?(v[0].inverted=!1,x[0].inverted=!1,_=h(t,Math.max(g.epsilon,y.epsilon),[v[0],x[0]])):x[0]&&(_=x);var b,w,M=function(t){var e=[],n=[],r=[],i=[];t.forEach(function(t){return u.polygon(t).regions.forEach(function(t){var e=t.map(function(t){return{x:t[0],y:t[1]}});e.length<3||(i.push([]),n.forEach(function(t,r){c.pointInPolygon(e[0],t)?i[n.length].push(r):c.pointInPolygon(t[0],e)&&i[r].push(n.length)}),r.push(t),n.push(e))})});for(var o=Array(r.length),a=0;a<r.length;){for(var s=0;s<r.length;s+=1)void 0!==o[s]||i[s].length||(o[s]=e.length,e.push([r[s].reverse()]),a+=1);for(var l=0;l<r.length;l+=1)void 0===o[l]&&1===i[l].length&&void 0!==o[i[l][0]]&&(e[o[i[l][0]]].push(r[l]),o[l]=o[i[l][0]],a+=1);for(var f=0;f<r.length;f+=1)i[f]=i[f].filter(function(t){return void 0===o[t]})}return e.length?e:[[]]}(_);return i.correspond&&function(t,e,n,r){var i={},o=[];n.forEach(function(t,e){return t.forEach(function(t){return t.forEach(function(t){var n="_"+t[0]+"_"+t[1];i[n]?-1===i[n].indexOf(e)&&i[n].push(e):i[n]=[e],o.length<=e&&o.push(0),o[e]+=1})})}),["poly1","poly2"].forEach(function(a){var s="poly1"===a?t:e,u="poly1"===a?"exact1":"exact2";r[a]=Array(s.length),r[u]=Array(s.length),s.forEach(function(t,e){var s={},l=0;t.forEach(function(t){return t.forEach(function(t){var e="_"+t[0]+"_"+t[1];i[e]?i[e].forEach(function(t){s[t]=(s[t]||0)+1}):l+=1})}),Object.keys(s).forEach(function(i){s[i]!==o[+i]||l||t.length!==n[+i].length||(r[u][e]||(r[u][e]=[]),r[u][e].push(+i)),s[i]>=2&&(r[a][e]||(r[a][e]=[]),r[a][e].push(+i))})})})}(e,r,M,i.correspond),a&&m&&a!==m&&(M=M.map(function(t){return t.map(function(t){return o.transformCoordinates(m,a,t)})})),p(M,{style:i.style||(b=M,w=g.style,w.fromPolygonList?w:b.length>1?w.includes("outer")?w+(w.endsWith("list")?"":"-list"):w.endsWith("listlist")?w:w+(w.endsWith("list")?"list":"-listlist"):1===b.length&&b[0].length>1?w.includes("outer")||w.endsWith("list")?w:w+"-list":w)},i)}function g(t){return function(e,n,r){return m(t,e,n,r)}}t.exports={union:g("union"),intersect:g("intersect"),difference:g("difference"),xor:g("xor"),toPolygonList:d,fromPolygonList:p}},208:function(t){var e=function(t,e,n,r,i){var o,a=0;return"boolean"!=typeof e&&(i=r,r=n,n=e,e=void 0),"function"!=typeof r&&(i=r,r=function(){}),function(){var s=this,u=+new Date-a,l=arguments;function c(){a=+new Date,n.apply(s,l)}r.apply(s,l),i&&!o&&c(),o&&clearTimeout(o),void 0===i&&u>t?c():!0!==e&&(o=setTimeout(i?function(){o=void 0}:c,void 0===i?t-u:t))}};t.exports={throttle:e,debounce:function(t,n,r,i){return"boolean"!=typeof n&&(i=r,r=n,n=!1),e(t,!1,r,i=i||function(){},!!n)}}},6858:function(t,e,n){var r=n(4626),i=n(1275),o=n(642),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},i.call(this,t);var e=this,n=this._init;this.featureType="vector",this.origin=function(t){return void 0===t?e.style("origin"):(e.style("origin",t),e.dataTime().modified(),e)},this.delta=function(t){return void 0===t?e.style("delta"):(e.style("delta",t),e.dataTime().modified(),e)},this._init=function(t){n.call(e,t);var r=Object.assign({},{strokeColor:"black",strokeWidth:2,strokeOpacity:1,originStyle:"none",endStyle:"arrow",origin:{x:0,y:0,z:0},delta:o.identityFunction,scale:null},void 0===t.style?{}:t.style);return void 0!==t.origin&&(r.origin=t.origin),e.style(r),e.dataTime().modified(),e}};r(a,i),t.exports=a},4081:function(t){t.exports="0.0.0-semantically-released"},6552:function(t,e,n){n(698).GL={ACTIVE_ATTRIBUTES:35721,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALPHA:6406,ALPHA_BITS:3413,ALWAYS:519,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATTACHED_SHADERS:35717,BACK:1029,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BROWSER_DEFAULT_WEBGL:37444,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_BUFFER_BIT:16384,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,COMPILE_STATUS:35713,COMPRESSED_TEXTURE_FORMATS:34467,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_LOST_WEBGL:37442,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH_ATTACHMENT:36096,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DONT_CARE:4352,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,FASTEST:4353,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GREATER:516,GREEN_BITS:3411,HIGH_FLOAT:36338,HIGH_INT:36341,INCR:7682,INCR_WRAP:34055,INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE_ALPHA:6410,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_RENDERBUFFER_SIZE:34024,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIRRORED_REPEAT:33648,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,RED_BITS:3410,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,REPEAT:10497,REPLACE:7681,RGB:6407,RGB565:36194,RGB5_A1:32855,RGBA:6408,RGBA4:32854,SAMPLER_2D:35678,SAMPLER_CUBE:35680,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_CLEAR_VALUE:2961,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE2:33986,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE3:33987,TEXTURE30:34014,TEXTURE31:34015,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE_2D:3553,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,UNPACK_ALIGNMENT:3317,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VIEWPORT:2978,ZERO:0}},10:function(t,e,n){var r=n(698),i=n(4626),o=n(1982),a=n(3503);r.actor=function(){"use strict";if(!(this instanceof r.actor))return new r.actor;r.node.call(this);var t=this,e=a.create(),n=r.boundingObject.ReferenceFrame.Relative,i=null;return this.matrix=function(){return e},this.referenceFrame=function(){return n},this.mapper=function(){return i},this.setMapper=function(e){e!==i&&(i=e,t.boundsModified())},this.computeBounds=function(){if(null!=i){var n,r,a,s,u=t.computeBoundsTimestamp();(t.boundsDirtyTimestamp().getMTime()>u.getMTime()||i.boundsDirtyTimestamp().getMTime()>u.getMTime())&&(i.computeBounds(),r=[(n=i.bounds())[0],n[2],n[4]],a=[n[1],n[3],n[5]],o.transformMat4(r,r,e),o.transformMat4(a,a,e),s=[r[0]>a[0]?a[0]:r[0],r[0]>a[0]?r[0]:a[0],r[1]>a[1]?a[1]:r[1],r[1]>a[1]?r[1]:a[1],r[2]>a[2]?a[2]:r[2],r[2]>a[2]?r[2]:a[2]],t.setBounds(s[0],s[1],s[2],s[3],s[4],s[5]),u.modified())}else t.resetBounds()},t},i(r.actor,r.node)},8576:function(t,e,n){var r=n(698),i=n(4626);r.blendFunction=function(t,e){"use strict";if(!(this instanceof r.blendFunction))return new r.blendFunction(t,e);var n=t,i=e;return this.apply=function(t){t.m_context.blendFuncSeparate(n,i,r.GL.ONE,r.GL.ONE_MINUS_SRC_ALPHA)},this},r.blend=function(){"use strict";if(!(this instanceof r.blend))return new r.blend;r.materialAttribute.call(this,r.materialAttributeType.Blend);var t=!1,e=r.blendFunction(r.GL.SRC_ALPHA,r.GL.ONE_MINUS_SRC_ALPHA);return this.bind=function(n){return t=n.m_context.isEnabled(r.GL.BLEND),this.enabled()?(n.m_context.enable(r.GL.BLEND),e.apply(n)):n.m_context.disable(r.GL.BLEND),!0},this.undoBind=function(e){return t?e.m_context.enable(r.GL.BLEND):e.m_context.disable(r.GL.BLEND),!0},this},i(r.blend,r.materialAttribute)},3556:function(t,e,n){var r=n(698),i=n(4626),o=n(77);r.boundingObject=function(){"use strict";if(!(this instanceof r.boundingObject))return new r.boundingObject;r.object.call(this);var t=[0,0,0,0,0,0],e=o(),n=o();return e.modified(),n.modified(),this.bounds=function(){return t},this.hasValidBounds=function(t){return t[0]!==Number.MAX_VALUE&&t[1]!==-Number.MAX_VALUE&&t[2]!==Number.MAX_VALUE&&t[3]!==-Number.MAX_VALUE&&t[4]!==Number.MAX_VALUE&&t[5]!==-Number.MAX_VALUE},this.setBounds=function(n,r,i,o,a,s){if(this.hasValidBounds([n,r,i,o,a,s]))return t[0]=n,t[1]=r,t[2]=i,t[3]=o,t[4]=a,t[5]=s,this.modified(),e.modified(),!0},this.resetBounds=function(){t[0]=Number.MAX_VALUE,t[1]=-Number.MAX_VALUE,t[2]=Number.MAX_VALUE,t[3]=-Number.MAX_VALUE,t[4]=Number.MAX_VALUE,t[5]=-Number.MAX_VALUE,this.modified()},this.computeBounds=function(){},this.computeBoundsTimestamp=function(){return e},this.boundsDirtyTimestamp=function(){return n},this.resetBounds(),this},r.boundingObject.ReferenceFrame={Relative:0,Absolute:1},i(r.boundingObject,r.object)},4580:function(t,e,n){var r=n(698),i=n(4626),o=n(77),a=n(1982),s=n(4663),u=n(3503);r.camera=function(t){"use strict";if(!(this instanceof r.camera))return new r.camera(t);r.groupNode.call(this),t=t||{};var e=30*Math.PI/180,n=s.fromValues(0,0,1,1),i=s.fromValues(0,0,0,1),l=s.fromValues(0,1,0,0),c=1,f=s.fromValues(0,0,-1,0),h=u.create(),d=u.create(),p=o(),m=o(),g=-1,y=1,v=1,x=-1,_={zoom:1,tilesize:256},b=!1,w=[0,0,0,0],M=r.GL.COLOR_BUFFER_BIT|r.GL.DEPTH_BUFFER_BIT;return void 0!==t.parallelProjection&&(b=!!t.parallelProjection),this.setViewAspect=function(t){c=t,this.modified()},this.parallelExtents=function(){return _},this.setParallelExtents=function(t){var e,n,r=["width","height","zoom","tilesize"],i=!1;for(e=0;e<r.length;e+=1)void 0!==t[n=r[e]]&&t[n]!==_[n]&&(_[n]=t[n],i=!0);if(i&&_.width&&_.height&&void 0!==_.zoom&&_.tilesize){var o=this.unitsPerPixel(_.zoom,_.tilesize);y=o*_.width/2,g=-y,v=o*_.height/2,x=-v,this.modified()}},this.unitsPerPixel=function(t,e){return e=e||256,360*Math.pow(2,-t)/e},this.viewMatrix=function(){return this.computeViewMatrix()},this.setViewMatrix=function(t,e){e?h=t.slice():u.copy(h,t),p.modified()},this.projectionMatrix=function(){return this.computeProjectionMatrix()},this.setProjectionMatrix=function(t){u.copy(d,t),m.modified()},this.clearMask=function(){return M},this.clearColor=function(){return w},this.clearDepth=function(){return 1},this.computeDirectionOfProjection=function(){a.subtract(f,i,n),a.normalize(f,f),this.modified()},this.computeViewMatrix=function(){return p.getMTime()<this.getMTime()&&(u.lookAt(h,n,i,l),p.modified()),h},this.computeProjectionMatrix=function(){return m.getMTime()<this.getMTime()&&(b?u.ortho(d,g,y,x,v,.01,1e4):u.perspective(d,e,c,.01,1e4),m.modified()),d},this.computeDirectionOfProjection(),this},i(r.camera,r.groupNode)},7695:function(t,e,n){var r=n(698);r.data=function(){"use strict";if(!(this instanceof r.data))return new r.data;this.type=function(){}},r.data.raster=0,r.data.point=1,r.data.lineString=2,r.data.polygon=3,r.data.geometry=10},4831:function(t,e,n){var r=n(698);r.event={},r.event.keyPress="vgl.event.keyPress",r.event.mousePress="vgl.event.mousePress",r.event.mouseRelease="vgl.event.mouseRelease",r.event.contextMenu="vgl.event.contextMenu",r.event.configure="vgl.event.configure",r.event.enable="vgl.event.enable",r.event.mouseWheel="vgl.event.mouseWheel",r.event.keyRelease="vgl.event.keyRelease",r.event.middleButtonPress="vgl.event.middleButtonPress",r.event.startInteraction="vgl.event.startInteraction",r.event.enter="vgl.event.enter",r.event.rightButtonPress="vgl.event.rightButtonPress",r.event.middleButtonRelease="vgl.event.middleButtonRelease",r.event.char="vgl.event.char",r.event.disable="vgl.event.disable",r.event.endInteraction="vgl.event.endInteraction",r.event.mouseMove="vgl.event.mouseMove",r.event.mouseOut="vgl.event.mouseOut",r.event.expose="vgl.event.expose",r.event.timer="vgl.event.timer",r.event.leftButtonPress="vgl.event.leftButtonPress",r.event.leave="vgl.event.leave",r.event.rightButtonRelease="vgl.event.rightButtonRelease",r.event.leftButtonRelease="vgl.event.leftButtonRelease",r.event.click="vgl.event.click",r.event.dblClick="vgl.event.dblClick"},7327:function(t,e,n){var r=n(698),i=n(4626),o=n(77);r.primitive=function(){"use strict";if(!(this instanceof r.primitive))return new r.primitive;var t=0,e=0,n=null;return this.indices=function(){return n},this.numberOfIndices=function(){return null===n?0:n.length},this.primitiveType=function(){return t},this.setPrimitiveType=function(e){t=e},this.indicesValueType=function(){return e},this.setIndicesValueType=function(t){e=t},this.setIndices=function(t){n=new Uint16Array(t)},this},r.triangles=function(){"use strict";return this instanceof r.triangles?(r.primitive.call(this),this.setPrimitiveType(r.GL.TRIANGLES),this.setIndicesValueType(r.GL.UNSIGNED_SHORT),this):new r.triangles},i(r.triangles,r.primitive),r.points=function(){"use strict";return this instanceof r.points?(r.primitive.call(this),this.setPrimitiveType(r.GL.POINTS),this.setIndicesValueType(r.GL.UNSIGNED_SHORT),this):new r.points},i(r.points,r.primitive),r.sourceData=function(t){"use strict";if(!(this instanceof r.sourceData))return new r.sourceData(t);var e={},n=[],i=(t=t||{}).name||"Source "+(new Date).toISOString(),o=function(){this.m_numberOfComponents=0,this.m_dataType=0,this.m_dataTypeSize=0,this.m_normalized=!1,this.m_stride=0,this.m_offset=0};return this.data=function(){return n},this.getData=function(){return this.data()},this.dataToFloat32Array=function(){return n instanceof Float32Array||(n=new Float32Array(n)),n},this.setData=function(t){t instanceof Array||t instanceof Float32Array?n=t instanceof Float32Array?t:t.slice(0):console.log("[error] Requires array")},this.addAttribute=function(t,n,r,i,a,s,u){if(!e.hasOwnProperty(t)){var l=new o;l.m_dataType=n,l.m_dataTypeSize=r,l.m_offset=i,l.m_stride=a,l.m_numberOfComponents=s,l.m_normalized=u,e[t]=l}},this.hasKey=function(t){return e.hasOwnProperty(t)},this.keys=function(){return Object.keys(e)},this.attributeNumberOfComponents=function(t){return e.hasOwnProperty(t)?e[t].m_numberOfComponents:0},this.normalized=function(t){return!!e.hasOwnProperty(t)&&e[t].m_normalized},this.attributeDataType=function(t){if(e.hasOwnProperty(t))return e[t].m_dataType},this.attributeOffset=function(t){return e.hasOwnProperty(t)?e[t].m_offset:0},this.attributeStride=function(t){return e.hasOwnProperty(t)?e[t].m_stride:0},this.pushBack=function(t){},this.insert=function(t){var e;if(!n.length&&t.length&&t instanceof Float32Array)n=t;else if(n.slice||!n.length&&t.slice||(n=Array.prototype.slice.call(n)),t.length)if(!n.length&&t.slice)n=t.slice(0);else for(e=0;e<t.length;e+=1)n[n.length]=t[e];else n[n.length]=t},this.name=function(){return i},this},r.sourceDataAnyfv=function(t,e,n){"use strict";return this instanceof r.sourceDataAnyfv?(r.sourceData.call(this,n),this.addAttribute(e,r.GL.FLOAT,4,0,4*t,t,!1),this.pushBack=function(t){this.insert(t)},this):new r.sourceDataAnyfv(t,e,n)},i(r.sourceDataAnyfv,r.sourceData),r.sourceDataP3fv=function(t){"use strict";return this instanceof r.sourceDataP3fv?(r.sourceData.call(this,t),this.addAttribute(r.vertexAttributeKeys.Position,r.GL.FLOAT,4,0,12,3,!1),this.pushBack=function(t){this.insert(t)},this):new r.sourceDataP3fv(t)},i(r.sourceDataP3fv,r.sourceData),r.sourceDataT2fv=function(t){"use strict";return this instanceof r.sourceDataT2fv?(r.sourceData.call(this,t),this.addAttribute(r.vertexAttributeKeys.TextureCoordinate,r.GL.FLOAT,4,0,8,2,!1),this.pushBack=function(t){this.insert(t)},this):new r.sourceDataT2fv(t)},i(r.sourceDataT2fv,r.sourceData),r.geometryData=function(){"use strict";if(!(this instanceof r.geometryData))return new r.geometryData;r.data.call(this);var t=[],e=[],n=[0,0,0,0,0,0],i=o(),a=o();return this.type=function(){return r.data.geometry},this.name=function(){return""},this.addSource=function(t){return-1===e.indexOf(t)&&(e.push(t),t.hasKey(r.vertexAttributeKeys.Position)&&a.modified(),!0)},this.source=function(t){return t<e.length?e[t]:0},this.sourceByName=function(t){for(var n=0;n<e.length;n+=1)if(e[n].name()===t)return e[n];return 0},this.numberOfSources=function(){return e.length},this.sourceData=function(t){var n;for(n=0;n<e.length;n+=1)if(e[n].hasKey(t))return e[n];return null},this.addPrimitive=function(e){return t.push(e),!0},this.primitive=function(e){return e<t.length?t[e]:null},this.numberOfPrimitives=function(){return t.length},this.bounds=function(){return a.getMTime()>i.getMTime()&&this.computeBounds(),n},this.boundsDirty=function(t){return t&&a.modified(),a.getMTime()>i.getMTime()},this.setBounds=function(t,e,r,o,a,s){return n[0]=t,n[1]=e,n[2]=r,n[3]=o,n[4]=a,n[5]=s,i.modified(),!0},this},i(r.geometryData,r.data)},29:function(t,e,n){var r=n(698),i=n(4626);r.graphicsObject=function(t){"use strict";if(!(this instanceof r.graphicsObject))return new r.graphicsObject;r.object.call(this);return this._setup=function(t){return!1},this._cleanup=function(t){return!1},this},i(r.graphicsObject,r.object)},7616:function(t,e,n){var r=n(698),i=n(4626);r.groupNode=function(){"use strict";if(!(this instanceof r.groupNode))return new r.groupNode;r.node.call(this);var t=[];return this.addChild=function(e){return e instanceof r.node&&(-1===t.indexOf(e)&&(e.setParent(this),t.push(e),this.boundsDirtyTimestamp().modified(),!0))},this.removeChild=function(e){if(e.parent()===this){var n=t.indexOf(e);if(n>=0)return t.splice(n,1),e.setParent(null),this.boundsDirtyTimestamp().modified(),!0}return!1},this.removeChildren=function(){for(;t.length;)this.removeChild(t[0]);this.modified()},this.children=function(){return t},this.hasChild=function(e){var n=0,r=!1;for(n=0;n<t.length;n+=1)if(t[n]===e){r=!0;break}return r},this},i(r.groupNode,r.node)},1611:function(t,e,n){t.exports=n(698),n(6552),n(9156),n(3556),n(9838),n(4831),n(29),n(4970),n(1232),n(2971),n(10),n(7616),n(4580),n(8576),n(7695),n(7327),n(5763),n(5796),n(5794),n(796),n(8888),n(3471),n(4933),n(7205)},9838:function(t,e,n){var r=n(698),i=n(4626),o=n(77);r.mapper=function(t){"use strict";if(!(this instanceof r.mapper))return new r.mapper(t);r.boundingObject.call(this);var e=[0,1,1],n=null,i=[],a={},s=void 0!==(t=t||{}).dynamicDraw&&t.dynamicDraw,u=o(),l=null,c=this;function f(t){a={},i=[]}function h(t){c.deleteVertexBufferObjects(t),f(),function(t){if(n){t&&(l=t.m_context);var e,o,c,f,h,d,p,m=n.numberOfSources(),g=null;for(e=0;e<m;e+=1){for(g=l.createBuffer(),l.bindBuffer(r.GL.ARRAY_BUFFER,g),(p=n.source(e).data())instanceof Float32Array||(p=new Float32Array(p)),l.bufferData(r.GL.ARRAY_BUFFER,p,s?r.GL.DYNAMIC_DRAW:r.GL.STATIC_DRAW),f=n.source(e).keys(),h=[],o=0;o<f.length;o+=1)h.push(f[o]);a[e]=h,i[e]=g}for(d=n.numberOfPrimitives(),c=0;c<d;c+=1)g=l.createBuffer(),l.bindBuffer(r.GL.ARRAY_BUFFER,g),l.bufferData(r.GL.ARRAY_BUFFER,n.primitive(c).indices(),r.GL.STATIC_DRAW),i[e]=g,e+=1;u.modified()}}(t)}return this.deleteVertexBufferObjects=function(t){var e,n=l;if(t&&(n=t.m_context),n)for(e=0;e<i.length;e+=1)n.deleteBuffer(i[e])},this._cleanup=function(t){c.deleteVertexBufferObjects(t),f(t),c.modified()},this.computeBounds=function(){if(null!=n){var t=this.computeBoundsTimestamp(),e=null;this.boundsDirtyTimestamp().getMTime()>t.getMTime()&&(e=n.bounds(),this.setBounds(e[0],e[1],e[2],e[3],e[4],e[5]),t.modified())}else this.resetBounds()},this.color=function(){return e},this.geometryData=function(){return n},this.setGeometryData=function(t){n!==t&&(n=t,this.modified(),this.boundsDirtyTimestamp().modified())},this.updateSourceBuffer=function(t,e,o){if(o&&(l=o.m_context),!l)return!1;for(var a=-1,s=0;s<n.numberOfSources();s+=1)if(n.source(s).name()===t){a=s;break}return!(a<0||a>=i.length)&&(e||(e=n.source(s).dataToFloat32Array()),l.bindBuffer(r.GL.ARRAY_BUFFER,i[a]),e instanceof Float32Array?l.bufferSubData(r.GL.ARRAY_BUFFER,0,e):l.bufferSubData(r.GL.ARRAY_BUFFER,0,new Float32Array(e)),!0)},this.getSourceBuffer=function(t){var e=n.sourceByName(t);return e?e.dataToFloat32Array():new Float32Array},this.render=function(t,e){(this.getMTime()>u.getMTime()||t.m_contextChanged)&&h(t),(l=t.m_context).vertexAttrib3fv(r.vertexAttributeKeys.Color,this.color());var o,s,c=0,f=0,d=null;for(o in a)if(a.hasOwnProperty(o)){for(l.bindBuffer(r.GL.ARRAY_BUFFER,i[c]),f=0;f<a[o].length;f+=1)t.m_material.bindVertexData(t,a[o][f]);c+=1}for(s=n.numberOfPrimitives(),f=0;f<s;f+=1,c+=1)if((d=n.primitive(f)).numberOfIndices()){switch(l.bindBuffer(r.GL.ARRAY_BUFFER,i[c]),d.primitiveType()){case r.GL.POINTS:l.drawArrays(r.GL.POINTS,0,d.numberOfIndices());break;case r.GL.LINES:l.drawArrays(r.GL.LINES,0,d.numberOfIndices());break;case r.GL.LINE_STRIP:l.drawArrays(r.GL.LINE_STRIP,0,d.numberOfIndices());break;case r.GL.TRIANGLES:l.drawArrays(r.GL.TRIANGLES,0,d.numberOfIndices());break;case r.GL.TRIANGLE_STRIP:l.drawArrays(r.GL.TRIANGLE_STRIP,0,d.numberOfIndices())}l.bindBuffer(r.GL.ARRAY_BUFFER,null)}e||this.undoBindVertexData(t)},this.undoBindVertexData=function(t){var e,n;for(e in a)if(a.hasOwnProperty(e))for(n=0;n<a[e].length;n+=1)t.m_material.undoBindVertexData(t,a[e][n])},this},i(r.mapper,r.boundingObject)},4970:function(t,e,n){var r=n(698),i=n(4626);r.material=function(){"use strict";if(!(this instanceof r.material))return new r.material;r.graphicsObject.call(this);var t=this,e=new r.shaderProgram,n=100,i={},o={};return this.binNumber=function(){return n},this.setBinNumber=function(e){n=e,t.modified()},this.exists=function(t){return t.type()===r.materialAttributeType.Texture?i.hasOwnProperty(t.textureUnit()):o.hasOwnProperty(t.type())},this.addAttribute=function(n){return!t.exists(n)&&(n.type()===r.materialAttributeType.Texture?(i[n.textureUnit()]=n,t.modified(),!0):(n.type()===r.materialAttributeType.ShaderProgram&&(e=n),o[n.type()]=n,t.modified(),!0))},this.shaderProgram=function(){return e},this._cleanup=function(n){for(var r in o)o.hasOwnProperty(r)&&o[r]._cleanup(n);for(r in i)i.hasOwnProperty(r)&&i[r]._cleanup(n);e._cleanup(n),t.modified()},this.bind=function(t){var n=null;for(n in e.bind(t),o)o.hasOwnProperty(n)&&o[n]!==e&&o[n].bind(t);for(n in i)i.hasOwnProperty(n)&&i[n].bind(t)},this.undoBind=function(t){var e=null;for(e in o)o.hasOwnProperty(e)&&o[e].undoBind(t);for(e in i)i.hasOwnProperty(e)&&i[e].undoBind(t)},this.bindVertexData=function(t,e){var n=null;for(n in o)o.hasOwnProperty(n)&&o[n].bindVertexData(t,e)},this.undoBindVertexData=function(t,e){var n=null;for(n in o)o.hasOwnProperty(n)&&o[n].undoBindVertexData(t,e)},t},r.material.RenderBin={Base:0,Default:100,Opaque:100,Transparent:1e3,Overlay:1e4},i(r.material,r.graphicsObject)},1232:function(t,e,n){var r=n(698),i=n(4626);r.materialAttributeType={Undefined:0,ShaderProgram:1,Texture:2,Blend:3,Depth:4},r.materialAttribute=function(t){"use strict";if(!(this instanceof r.materialAttribute))return new r.materialAttribute(t);r.graphicsObject.call(this);var e=t;return this.type=function(){return e},this.enabled=function(){return true},this.bindVertexData=function(t,e){return!1},this.undoBindVertexData=function(t,e){return!1},this},i(r.materialAttribute,r.graphicsObject)},2971:function(t,e,n){var r=n(698),i=n(4626);r.node=function(){"use strict";if(!(this instanceof r.node))return new r.node;r.boundingObject.call(this);var t=null,e=null,n=!0;return this.material=function(){return e},this.setMaterial=function(t){return t!==e&&(e=t,this.modified(),!0)},this.visible=function(){return n},this.setVisible=function(t){return t!==n&&(n=t,this.modified(),!0)},this.parent=function(){return t},this.setParent=function(e){return e!==t&&(null!==t&&t.removeChild(this),t=e,this.modified(),!0)},this.boundsModified=function(){this.boundsDirtyTimestamp().modified(),null!==t&&t.boundsModified()},this},i(r.node,r.boundingObject)},9156:function(t,e,n){var r=n(698),i=n(77);r.object=function(){"use strict";if(!(this instanceof r.object))return new r.object;var t=i();return t.modified(),this.modified=function(){t.modified()},this.getMTime=function(){return t.getMTime()},this}},5763:function(t,e,n){var r=n(698),i=n(4626);r.renderWindow=function(t){"use strict";if(!(this instanceof r.renderWindow))return new r.renderWindow(t);r.graphicsObject.call(this);var e=this,n=0,i=0,o=400,a=400,s=t,u=null,l=[],c=null;return this.windowSize=function(){return[o,a]},this.windowPosition=function(){return[n,i]},this.renderers=function(){return l},this.activeRenderer=function(){return u},this.addRenderer=function(t){return!1===e.hasRenderer(t)&&(l.push(t),t.setRenderWindow(e),null===u&&(u=t),0!==t.layer()&&t.camera().setClearMask(r.GL.DepthBufferBit),e.modified(),!0)},this.hasRenderer=function(t){var e;for(e=0;e<l.length;e+=1)if(t===l[e])return!0;return!1},this.positionAndResize=function(t,r,s,u){var c;for(n=t,i=r,o=s,a=u,c=0;c<l.length;c+=1)l[c].positionAndResize(n,i,o,a);e.modified()},this._setup=function(t){c=null;try{var e;for(c=s.getContext("webgl")||s.getContext("experimental-webgl"),e=0;e<l.length;e+=1)(l[e].width()>o||0===l[e].width()||l[e].height()>a||0===l[e].height())&&l[e].resize(n,i,o,a);return!0}catch(t){}return c||console.warn("[ERROR] Unable to initialize WebGL. Your browser may not support it."),!1},this.context=function(){return c},this._cleanup=function(t){var n;for(n=0;n<l.length;n+=1)l[n]._cleanup(t);r.clearCachedShaders(t?t.m_context:null),e.modified()},this.render=function(){var t;for(l.sort(function(t,e){return t.layer()-e.layer()}),t=0;t<l.length;t+=1)l[t].render()},e},i(r.renderWindow,r.graphicsObject)},5796:function(t,e,n){var r=n(698),i=n(4626),o=n(3503);r.renderState=function(){"use strict";this.m_context=null,this.m_modelViewMatrix=o.create(),this.m_normalMatrix=o.create(),this.m_projectionMatrix=null,this.m_material=null,this.m_mapper=null},r.renderer=function(t){"use strict";if(!(this instanceof r.renderer))return new r.renderer(t);r.graphicsObject.call(this),t=t||{};var e=this;return e.m_renderWindow=null,e.m_contextChanged=!1,e.m_sceneRoot=new r.groupNode,e.m_camera=new r.camera(t),e.m_nearClippingPlaneTolerance=null,e.m_x=0,e.m_y=0,e.m_width=0,e.m_height=0,e.m_resizable=!0,e.m_resetScene=!0,e.m_layer=0,e.m_renderPasses=null,e.m_resetClippingRange=!0,e.m_depthBits=null,e.m_camera.addChild(e.m_sceneRoot),this.width=function(){return e.m_width},this.height=function(){return e.m_height},this.layer=function(){return e.m_layer},this.setLayer=function(t){e.m_layer=t,e.modified()},this.renderWindow=function(){return e.m_renderWindow},this.setRenderWindow=function(t){e.m_renderWindow!==t&&(e.m_renderWindow&&e.m_renderWindow.removeRenderer(this),e.m_renderWindow=t,e.m_contextChanged=!0,e.modified())},this.camera=function(){return e.m_camera},this.render=function(){var t,n,i,a=null,s=[],u=o.create(),l=null;if((n=new r.renderState).m_renderer=e,n.m_context=e.renderWindow().context(),e.m_depthBits&&!e.m_contextChanged||(e.m_depthBits=n.m_context.getParameter(r.GL.DEPTH_BITS)),n.m_contextChanged=e.m_contextChanged,e.m_renderPasses)for(t=0;t<e.m_renderPasses.length;t+=1){if(e.m_renderPasses[t].render(n))return void e.m_renderPasses[t].remove(n);e.m_renderPasses[t].remove(n)}for(n.m_context.enable(r.GL.DEPTH_TEST),n.m_context.depthFunc(r.GL.LEQUAL),e.m_camera.clearMask()&r.GL.COLOR_BUFFER_BIT&&(l=e.m_camera.clearColor(),n.m_context.clearColor(l[0],l[1],l[2],l[3])),e.m_camera.clearMask()&r.GL.DEPTH_BUFFER_BIT&&n.m_context.clearDepth(e.m_camera.clearDepth()),n.m_context.clear(e.m_camera.clearMask()),n.m_context.viewport(e.m_x,e.m_y,e.m_width,e.m_height),(i=e.m_sceneRoot.children()).length>0&&e.m_resetScene&&(e.m_resetScene=!1),t=0;t<i.length;t+=1)(a=i[t]).computeBounds(),a.visible()&&a.material().binNumber()>=0&&s.push([a.material().binNumber(),a]);for(s.sort(function(t,e){return t[0]-e[0]}),t=0;t<s.length;t+=1){if((a=s[t][1]).referenceFrame()===r.boundingObject.ReferenceFrame.Relative){var c=e.m_camera.viewMatrix();c instanceof Array&&(n.m_modelViewMatrix=new Array(16)),o.multiply(n.m_modelViewMatrix,c,a.matrix()),n.m_projectionMatrix=e.m_camera.projectionMatrix(),n.m_modelViewAlignment=e.m_camera.viewAlignment()}else n.m_modelViewMatrix=a.matrix(),n.m_modelViewAlignment=null,n.m_projectionMatrix=o.create(),o.ortho(n.m_projectionMatrix,0,e.m_width,0,e.m_height,-1,1);o.invert(u,n.m_modelViewMatrix),o.transpose(n.m_normalMatrix,u),n.m_material=a.material(),n.m_mapper=a.mapper(),n.m_material.bind(n),n.m_mapper.render(n),n.m_material.undoBind(n)}n.m_context.finish(),e.m_contextChanged=!1,e.m_lastRenderState=n},this.resize=function(t,n){t&&n&&e.positionAndResize(e.m_x,e.m_y,t,n)},this.positionAndResize=function(t,n,r,i){var o;if(t<0||n<0||r<=0||i<=0)console.log("[error] Invalid position and resize values",t,n,r,i);else if(e.m_resizable&&(e.m_width=r,e.m_height=i,e.m_camera.setViewAspect(r/i),e.m_camera.setParallelExtents({width:r,height:i}),e.modified()),e.m_renderPasses)for(o=0;o<e.m_renderPasses.length;o+=1)e.m_renderPasses[o].resize(r,i),e.m_renderPasses[o].renderer().positionAndResize(t,n,r,i)},this.addActor=function(t){return t instanceof r.actor&&(e.m_sceneRoot.addChild(t),e.modified(),!0)},this.hasActor=function(t){return e.m_sceneRoot.hasChild(t)},this.removeActor=function(t){return-1!==e.m_sceneRoot.children().indexOf(t)&&(e.m_lastRenderState&&(t.mapper()&&t.mapper()._cleanup(e.m_lastRenderState),t.material()&&t.material()._cleanup(e.m_lastRenderState)),t.modified(),e.m_sceneRoot.removeChild(t),e.modified(),!0)},this.setResetScene=function(t){e.m_resetScene!==t&&(e.m_resetScene=t,e.modified())},this._cleanup=function(t){for(var n=e.m_sceneRoot.children(),r=0;r<n.length;r+=1){var i=n[r];i.material()._cleanup(t),i.mapper()._cleanup(t)}e.m_sceneRoot.removeChildren(),e.modified()},e},i(r.renderer,r.graphicsObject)},5794:function(t,e,n){var r=n(698),i=n(4626),o=n(77);r.shader=function(t){"use strict";if(!(this instanceof r.shader))return new r.shader(t);r.object.call(this);var e=[],n=t,i="";this._getContextEntry=function(t){var n,r,i=t.m_context;for(n=0;n<e.length;n+=1)if(e[n].context===i)return e[n];return r={context:i,compileTimestamp:o()},e.push(r),r},this.removeContext=function(t){var n,r=t.m_context;for(n=0;n<e.length;n+=1)if(e[n].context===r)return void e.splice(n,1)},this.shaderHandle=function(t){return this._getContextEntry(t).shaderHandle},this.setShaderSource=function(t){i=t,this.modified()},this.compile=function(t){var e=this._getContextEntry(t);return this.getMTime()<e.compileTimestamp.getMTime()?e.shaderHandle:(t.m_context.deleteShader(e.shaderHandle),e.shaderHandle=t.m_context.createShader(n),t.m_context.shaderSource(e.shaderHandle,i),t.m_context.compileShader(e.shaderHandle),t.m_context.getShaderParameter(e.shaderHandle,r.GL.COMPILE_STATUS)?(e.compileTimestamp.modified(),e.shaderHandle):(console.log("[ERROR] An error occurred compiling the shaders: "+t.m_context.getShaderInfoLog(e.shaderHandle)),console.log(i),t.m_context.deleteShader(e.shaderHandle),null))},this.attachShader=function(t,e){t.m_context.attachShader(e,this.shaderHandle(t))}},i(r.shader,r.object),function(){"use strict";var t=[];r.getCachedShader=function(e,n,i){for(var o=0;o<t.length;o+=1)if(t[o].type===e&&t[o].context===n&&t[o].source===i)return o&&t.splice(0,0,t.splice(o,1)[0]),t[0].shader;var a=new r.shader(e);return a.setShaderSource(i),t.unshift({type:e,context:n,source:i,shader:a}),t.length>=10&&t.splice(10,t.length-10),a},r.clearCachedShaders=function(e){for(var n=t.length-1;n>=0;n-=1)null!=e&&t[n].context!==e||t.splice(n,1)}}()},796:function(t,e,n){var r=n(698),i=n(4626),o=n(77);r.shaderProgram=function(){"use strict";if(!(this instanceof r.shaderProgram))return new r.shaderProgram;r.materialAttribute.call(this,r.materialAttributeType.ShaderProgram);var t=this,e=0,n=o(),i=o(),a=[],s=[],u={},l={},c={};return this.queryUniformLocation=function(t,n){return t.m_context.getUniformLocation(e,n)},this.queryAttributeLocation=function(t,n){return t.m_context.getAttribLocation(e,n)},this.addShader=function(e){if(a.indexOf(e)>-1)return!1;var n;for(n=a.length-2;n>=0;n-=1)a[n].shaderType()===e.shaderType()&&a.splice(n,1);return a.push(e),t.modified(),!0},this.addUniform=function(e){return!(s.indexOf(e)>-1)&&(s.push(e),t.modified(),!0)},this.addVertexAttribute=function(e,n){u[n]=e,t.modified()},this.uniformLocation=function(t){return l[t]},this.attributeLocation=function(t){return c[t]},this.uniform=function(t){var e;for(e=0;e<s.length;e+=1)if(s[e].name()===t)return s[e];return null},this.updateUniforms=function(t){var e;for(e=0;e<s.length;e+=1)s[e].callGL(t,l[s[e].name()])},this.link=function(t){return t.m_context.linkProgram(e),!!t.m_context.getProgramParameter(e,r.GL.LINK_STATUS)||(console.log("[ERROR] Unable to initialize the shader program."),!1)},this.use=function(t){t.m_context.useProgram(e)},this._setup=function(t){0===e&&(e=t.m_context.createProgram())},this._cleanup=function(e){t.deleteVertexAndFragment(e),t.deleteProgram(e),t.modified()},this.deleteProgram=function(t){e&&t.m_context.deleteProgram(e),e=0},this.deleteVertexAndFragment=function(t){var n;for(n=0;n<a.length;n+=1)a[n].shaderHandle(t)&&t.m_context.detachShader(e,a[n].shaderHandle(t)),t.m_context.deleteShader(a[n].shaderHandle(t)),a[n].removeContext(t)},this.compileAndLink=function(r){var i;if(!(n.getMTime()>=this.getMTime())){for(t._setup(r),i=0;i<a.length;i+=1)a[i].compile(r),a[i].attachShader(r,e);t.bindAttributes(r),t.link(r)||(console.log("[ERROR] Failed to link Program"),t._cleanup(r)),n.modified()}},this.bind=function(e){var n=0;for(i.getMTime()<t.getMTime()?(t.compileAndLink(e),t.use(e),t.bindUniforms(e),i.modified()):t.use(e),n=0;n<s.length;n+=1)s[n].update(e,t);t.updateUniforms(e)},this.undoBind=function(t){t.m_context.useProgram(null)},this.bindVertexData=function(t,e){u.hasOwnProperty(e)&&u[e].bindVertexData(t,e)},this.undoBindVertexData=function(t,e){u.hasOwnProperty(e)&&u[e].undoBindVertexData(t,e)},this.bindUniforms=function(t){var e;for(e=0;e<s.length;e+=1)l[s[e].name()]=this.queryUniformLocation(t,s[e].name())},this.bindAttributes=function(t){var n,r;for(n in u)u.hasOwnProperty(n)&&(r=u[n].name(),t.m_context.bindAttribLocation(e,n,r),c[r]=n)},t},i(r.shaderProgram,r.materialAttribute)},8888:function(t,e,n){var r=n(698),i=n(4626),o=n(77);r.texture=function(){"use strict";if(!(this instanceof r.texture))return new r.texture;r.materialAttribute.call(this,r.materialAttributeType.Texture),this.m_width=0,this.m_height=0,this.m_depth=0,this.m_textureHandle=null,this.m_textureUnit=0,this.m_pixelFormat=r.GL.RGBA,this.m_pixelDataType=r.GL.UNSIGNED_BYTE,this.m_internalFormat=r.GL.RGBA,this.m_nearestPixel=!1,this.m_image=null,this.m_texture=null;var t=o(),e=this;function n(t){if(!(e.m_textureUnit>=0&&e.m_textureUnit<32))throw"[error] Texture unit "+e.m_textureUnit+" is not supported";t.m_context.activeTexture(r.GL.TEXTURE0+e.m_textureUnit)}return this.setup=function(e){n(e),e.m_context.deleteTexture(this.m_textureHandle),this.m_textureHandle=e.m_context.createTexture(),e.m_context.bindTexture(r.GL.TEXTURE_2D,this.m_textureHandle),e.m_context.texParameteri(r.GL.TEXTURE_2D,r.GL.TEXTURE_MIN_FILTER,this.m_nearestPixel?r.GL.NEAREST:r.GL.LINEAR),e.m_context.texParameteri(r.GL.TEXTURE_2D,r.GL.TEXTURE_MAG_FILTER,this.m_nearestPixel?r.GL.NEAREST:r.GL.LINEAR),e.m_context.texParameteri(r.GL.TEXTURE_2D,r.GL.TEXTURE_WRAP_S,r.GL.CLAMP_TO_EDGE),e.m_context.texParameteri(r.GL.TEXTURE_2D,r.GL.TEXTURE_WRAP_T,r.GL.CLAMP_TO_EDGE),null!==this.m_image?(e.m_context.pixelStorei(r.GL.UNPACK_ALIGNMENT,1),e.m_context.pixelStorei(r.GL.UNPACK_FLIP_Y_WEBGL,!0),this.updateDimensions(),this.computeInternalFormatUsingImage(),e.m_context.texImage2D(r.GL.TEXTURE_2D,0,this.m_internalFormat,this.m_pixelFormat,this.m_pixelDataType,this.m_image)):null!==this.m_texture?(e.m_context.pixelStorei(r.GL.UNPACK_ALIGNMENT,1),e.m_context.pixelStorei(r.GL.UNPACK_FLIP_Y_WEBGL,!0),this.updateDimensions(),e.m_context.texImage2D(r.GL.TEXTURE_2D,0,this.m_internalFormat,this.m_texture.width,this.m_texture.height,0,this.m_pixelFormat,this.m_pixelDataType,this.m_texture.data)):e.m_context.texImage2D(r.GL.TEXTURE_2D,0,this.m_internalFormat,this.m_width,this.m_height,0,this.m_pixelFormat,this.m_pixelDataType,null),e.m_context.bindTexture(r.GL.TEXTURE_2D,null),t.modified()},this.bind=function(e){this.getMTime()>t.getMTime()&&this.setup(e),n(e),e.m_context.bindTexture(r.GL.TEXTURE_2D,this.m_textureHandle)},this.undoBind=function(t){t.m_context.bindTexture(r.GL.TEXTURE_2D,null)},this.image=function(){return this.m_image},this.texture=function(){return this.m_texture},this.setImage=function(t){return null!==t&&(this.m_image=t,this.updateDimensions(),this.modified(),!0)},this.setTexture=function(t){return null!==t&&(this.m_texture=t,"Luminance"===t.type?(this.m_internalFormat=r.GL.LUMINANCE,this.m_pixelFormat=r.GL.LUMINANCE):"LuminanceAlpha"===t.type?(this.m_internalFormat=r.GL.LUMINANCE_ALPHA,this.m_pixelFormat=r.GL.LUMINANCE_ALPHA):(this.m_internalFormat=r.GL.RGBA,this.m_pixelFormat=r.GL.RGBA),this.updateDimensions(),this.modified(),!0)},this.nearestPixel=function(){return this.m_nearestPixel},this.setNearestPixel=function(t){return(t=!!t)!==this.m_nearestPixel&&(this.m_nearestPixel=t,this.modified(),!0)},this.textureUnit=function(){return this.m_textureUnit},this.setTextureUnit=function(t){return this.m_textureUnit!==t&&(this.m_textureUnit=t,this.modified(),!0)},this.computeInternalFormatUsingImage=function(){this.m_internalFormat=r.GL.RGBA,this.m_pixelFormat=r.GL.RGBA,this.m_pixelDataType=r.GL.UNSIGNED_BYTE},this.updateDimensions=function(){null!==this.m_image&&(this.m_width=this.m_image.width,this.m_height=this.m_image.height,this.m_depth=0),null!==this.m_texture&&(this.m_width=this.m_texture.width,this.m_height=this.m_texture.height,this.m_depth=0)},this.textureHandle=function(){return this.m_textureHandle},this},i(r.texture,r.materialAttribute),r.lookupTable=function(){"use strict";if(!(this instanceof r.lookupTable))return new r.lookupTable;r.texture.call(this);var t=o();return this.m_colorTable=[.07514311,.468049805,1,1,.247872569,.498782363,1,1,.339526309,.528909511,1,1,.409505078,.558608486,1,1,.468487184,.588057293,1,1,.520796675,.617435078,1,1,.568724526,.646924167,1,1,.613686735,.676713218,1,1,.656658579,.707001303,1,1,.698372844,.738002964,1,1,.739424025,.769954435,1,1,.780330104,.803121429,1,1,.821573924,.837809045,1,1,.863634967,.874374691,1,1,.907017747,.913245283,1,1,.936129275,.938743558,.983038586,1,.943467973,.943498599,.943398095,1,.990146732,.928791426,.917447482,1,1,.88332677,.861943246,1,1,.833985467,.803839606,1,1,.788626485,.750707739,1,1,.746206642,.701389973,1,1,.70590052,.654994046,1,1,.667019783,.610806959,1,1,.6289553,.568237474,1,1,.591130233,.526775617,1,1,.552955184,.485962266,1,1,.513776083,.445364274,1,1,.472800903,.404551679,1,1,.428977855,.363073592,1,1,.380759558,.320428137,1,.961891484,.313155629,.265499262,1,.916482116,.236630659,.209939162,1].map(function(t){return 255*t}),this.setup=function(e){0===this.textureUnit()?e.m_context.activeTexture(r.GL.TEXTURE0):1===this.textureUnit()&&e.m_context.activeTexture(r.GL.TEXTURE1),e.m_context.deleteTexture(this.m_textureHandle),this.m_textureHandle=e.m_context.createTexture(),e.m_context.bindTexture(r.GL.TEXTURE_2D,this.m_textureHandle),e.m_context.texParameteri(r.GL.TEXTURE_2D,r.GL.TEXTURE_MIN_FILTER,r.GL.LINEAR),e.m_context.texParameteri(r.GL.TEXTURE_2D,r.GL.TEXTURE_MAG_FILTER,r.GL.LINEAR),e.m_context.texParameteri(r.GL.TEXTURE_2D,r.GL.TEXTURE_WRAP_S,r.GL.CLAMP_TO_EDGE),e.m_context.texParameteri(r.GL.TEXTURE_2D,r.GL.TEXTURE_WRAP_T,r.GL.CLAMP_TO_EDGE),e.m_context.pixelStorei(r.GL.UNPACK_ALIGNMENT,1),this.m_width=this.m_colorTable.length/4,this.m_height=1,this.m_depth=0,e.m_context.texImage2D(r.GL.TEXTURE_2D,0,r.GL.RGBA,this.m_width,this.m_height,this.m_depth,r.GL.RGBA,r.GL.UNSIGNED_BYTE,new Uint8Array(this.m_colorTable)),e.m_context.bindTexture(r.GL.TEXTURE_2D,null),t.modified()},this.colorTable=function(){return this.m_colorTable},this.setColorTable=function(t){return this.m_colorTable!==t&&(this.m_colorTable=t,this.modified(),!0)},this},i(r.lookupTable,r.texture)},3471:function(t,e,n){var r=n(698),i=n(4626),o=n(3503);r.uniform=function(t,e){"use strict";if(!(this instanceof r.uniform))return new r.uniform(t,e);this.getTypeNumberOfComponents=function(t){switch(t){case r.GL.FLOAT:case r.GL.INT:case r.GL.BOOL:return 1;case r.GL.FLOAT_VEC2:case r.GL.INT_VEC2:case r.GL.BOOL_VEC2:return 2;case r.GL.FLOAT_VEC3:case r.GL.INT_VEC3:case r.GL.BOOL_VEC3:return 3;case r.GL.FLOAT_VEC4:case r.GL.INT_VEC4:case r.GL.BOOL_VEC4:return 4;case r.GL.FLOAT_MAT3:return 9;case r.GL.FLOAT_MAT4:return 16;default:return 0}};var n=t,i=e,o=new Array(this.getTypeNumberOfComponents(n)).fill(0);return this.name=function(){return i},this.set=function(t){var e=0,n=o.length;if(1!==n)for(e=0;e<n;e+=1)o[e]=t[e];else o[0]=t},this.callGL=function(t,e){switch(n){case r.GL.BOOL:case r.GL.INT:t.m_context.uniform1iv(e,o);break;case r.GL.FLOAT:t.m_context.uniform1fv(e,o);break;case r.GL.BOOL_VEC2:case r.GL.INT_VEC2:t.m_context.uniform2iv(e,o);break;case r.GL.FLOAT_VEC2:t.m_context.uniform2fv(e,o);break;case r.GL.BOOL_VEC3:case r.GL.INT_VEC3:t.m_context.uniform3iv(e,o);break;case r.GL.FLOAT_VEC3:t.m_context.uniform3fv(e,o);break;case r.GL.BOOL_VEC4:case r.GL.INT_VEC4:t.m_context.uniform4iv(e,o);break;case r.GL.FLOAT_VEC4:t.m_context.uniform4fv(e,o);break;case r.GL.FLOAT_MAT3:t.m_context.uniformMatrix3fv(e,r.GL.FALSE,o);break;case r.GL.FLOAT_MAT4:t.m_context.uniformMatrix4fv(e,r.GL.FALSE,o)}},this.update=function(t,e){},this},r.modelViewOriginUniform=function(t,e){"use strict";if(!(this instanceof r.modelViewOriginUniform))return new r.modelViewOriginUniform(t,e);t||(t="modelViewMatrix");var n=[(e=e||[0,0,0])[0],e[1],e[2]||0];return r.uniform.call(this,r.GL.FLOAT_MAT4,t),this.set(o.create()),this.setOrigin=function(t){n=[(t=t||[0,0,0])[0],t[1],t[2]||0]},this.update=function(t,e){var r=t.m_modelViewMatrix;if(t.m_modelViewAlignment){var i=t.m_modelViewAlignment;(r=r.slice?r.slice():Array.prototype.slice.call(r))[12]=Math.round(r[12]/i.roundx)*i.roundx+i.dx,r[13]=Math.round(r[13]/i.roundy)*i.roundy+i.dy}r=o.translate(o.create(),r,n),this.set(r)},this},i(r.modelViewOriginUniform,r.uniform),r.projectionUniform=function(t){"use strict";return this instanceof r.projectionUniform?(t||(t="projectionMatrix"),r.uniform.call(this,r.GL.FLOAT_MAT4,t),this.set(o.create()),this.update=function(t,e){this.set(t.m_projectionMatrix)},this):new r.projectionUniform(t)},i(r.projectionUniform,r.uniform),r.floatUniform=function(t,e){"use strict";if(!(this instanceof r.floatUniform))return new r.floatUniform(t,e);t||(t="floatUniform"),e=void 0===e?1:e,r.uniform.call(this,r.GL.FLOAT,t),this.set(e)},i(r.floatUniform,r.uniform)},4933:function(t,e,n){var r=n(698);r.vertexAttributeKeys={Position:0,Normal:1,TextureCoordinate:2,Color:3,Scalar:4,CountAttributeIndex:5},r.vertexAttributeKeysIndexed={Zero:0,One:1,Two:2,Three:3,Four:4,Five:5,Six:6,Seven:7,Eight:8,Nine:9},r.vertexAttribute=function(t){"use strict";if(!(this instanceof r.vertexAttribute))return new r.vertexAttribute(t);var e=t;this.name=function(){return e},this.bindVertexData=function(t,n){var r=t.m_mapper.geometryData().sourceData(n),i=t.m_material.shaderProgram();t.m_context.vertexAttribPointer(i.attributeLocation(e),r.attributeNumberOfComponents(n),r.attributeDataType(n),r.normalized(n),r.attributeStride(n),r.attributeOffset(n)),t.m_context.enableVertexAttribArray(i.attributeLocation(e))},this.undoBindVertexData=function(t,n){var r=t.m_material.shaderProgram();t.m_context.disableVertexAttribArray(r.attributeLocation(e))}}},698:function(t){t.exports={}},7205:function(t,e,n){var r=n(5616),i=n(698),o=n(4626);i.viewer=function(t,e){"use strict";if(!(this instanceof i.viewer))return new i.viewer(t,e);i.object.call(this);var n=t,o=i.renderer(e),a=i.renderWindow(n);return this.canvas=function(){return n},this.renderWindow=function(){return a},this.init=function(){null!==a?a._setup():console.log("[ERROR] No render window attached")},this.exit=function(t){null!==a?a._cleanup(t):console.log("[ERROR] No render window attached")},this.render=function(){a.render()},this.bindEventHandlers=function(){r(n).on("mousedown",this.handleMouseDown),r(n).on("mouseup",this.handleMouseUp),r(n).on("mousemove",this.handleMouseMove),r(n).on("mousewheel",this.handleMouseWheel),r(n).on("contextmenu",this.handleContextMenu)},this.unbindEventHandlers=function(){r(n).off("mousedown",this.handleMouseDown),r(n).off("mouseup",this.handleMouseUp),r(n).off("mousemove",this.handleMouseMove),r(n).off("mousewheel",this.handleMouseWheel),r(n).off("contextmenu",this.handleContextMenu)},this._init=function(){this.bindEventHandlers(),a.addRenderer(o)},this._init(),this},o(i.viewer,i.object)},394:function(t,e,n){t.exports={pointFeature:n(5380),vtkjsRenderer:n(9897)}},7015:function(t,e,n){var r=function(t){"use strict";if(!(this instanceof n(1338)))return new r(t);var e=this,i=this.draw;return this.draw=function(){return e.ready&&(e._update(),e.renderer()._render(),i()),e},this};t.exports=r},5380:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(7541),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},o.call(this,t);var e=n(5325),r=n(7015),i=n(9897).vtkjs,s=i.Rendering.Core.vtkActor,u=i.Common.Core.vtkDataArray,l=i.Rendering.Core.vtkGlyph3DMapper,c=i.Rendering.Core.vtkMapper,f=i.Common.DataModel.vtkPointSet,h=i.Filters.Sources.vtkSphereSource;r.call(this);var d,p,m,g,y,v=this,x=this._init,_=this._exit,b=this._update;return this._createPipeline=function(){p=f.newInstance(),(m=h.newInstance()).setThetaResolution(30),m.setPhiResolution(30);var t=l.newInstance({orient:!1,colorByArrayName:"color",scalarMode:c.ScalarMode.USE_POINT_FIELD_DATA,colorMode:c.ColorMode.DIRECT_SCALARS,scaling:!0,scaleArray:"diam",scaleMode:l.ScaleModes.SCALE_BY_MAGNITUDE});t.setInputData(p,0),t.setInputConnection(m.getOutputPort(),1),(d=s.newInstance()).setMapper(t),d.getProperty().setAmbient(1),v.renderer().contextRenderer().addActor(d)},this._init=function(){x.call(v,t),v.renderer().contextRenderer().setLayer(0),v._createPipeline()},this._build=function(){var t,n,r,i,o,a,s=v.data().length,l=new Array(3*s),c=v.data(),f=v.position(),h=v.style.get("radius"),d=v.style.get("fill"),m=v.style.get("fillColor"),x=v.style.get("fillOpacity"),_=v.layer().map().unitsPerPixel(v.layer().map().zoom());for(y&&y.length===s||(y=new Float32Array(s)),g&&g.length===4*s||(g=new Uint8Array(4*s)),t=n=r=0;t<s;t+=1,n+=3,r+=4)i=f(c[t],t),l[n]=i.x,l[n+1]=i.y,l[n+2]=i.z||0,a=a||l[n+2],y[t]=h(c[t],t)*_*2,o=m(c[t],t),g[r]=255*o.r,g[r+1]=255*o.g,g[r+2]=255*o.b,g[r+3]=d(c[t],t)?255*x(c[t],t):0;if(l=e.transformCoordinates(v.gcs(),v.layer().map().gcs(),l,3),!a&&v.gcs()!==v.layer().map().gcs())for(t=n=0;t<s;t+=1,n+=3)l[n+2]=0;p.getPoints().setData(l,3),p.getPointData().addArray(u.newInstance({name:"color",values:g,numberOfComponents:4})),p.getPointData().addArray(u.newInstance({name:"diam",values:y})),v.buildTime().modified()},this._update=function(){if(b.call(v),v.dataTime().getMTime()>=v.buildTime().getMTime()||v.updateTime().getMTime()<v.getMTime())v._build();else{var t=v.data(),e=v.style.get("radius"),n=v.layer().map().unitsPerPixel(v.layer().map().zoom()),r=p.getPointData().getArray("diam"),i=r.getData().map(function(r,i){return e(t[i],i)*n*2});r.setData(i),p.modified()}v.updateTime().modified()},this._exit=function(){v.renderer().contextRenderer().removeActor(d),_()},v._init(),this};r(a,o);var s={};s[o.capabilities.stroke]=!1,i("vtkjs","point",a,s),t.exports=a},9897:function(t,e,n){var r=n(4626),i=n(1098).registerRenderer,o=n(2274),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},o.call(this,t);var e=n(3503),r=n(6409),i=a.vtkjs.Rendering.Misc.vtkGenericRenderWindow,s=this,u=this._init,l=i.newInstance({background:[0,0,0,0]});l.setContainer(s.layer().node().get(0)),l.getInteractor().unbindEvents(),l.resize();var c=l.getRenderer(),f=l.getRenderWindow();return this.contextRenderer=function(){return c},this.api=function(){return a.apiname},this._init=function(){if(s.initialized())return s;u.call(s);var t=s.layer().map(),e=t.size();return s._resize(0,0,e.width,e.height),t.camera().clipbounds={near:-t.unitsPerPixel(),far:t.unitsPerPixel()},s},this._resize=function(t,e,n,r){return s._setWidthHeight(n,r),l.resize(),s._render(),s},this._render=function(){return s.layer().map().scheduleAnimationFrame(s._renderFrame,!0),s},this._renderFrame=function(){var t,e=s.layer().features();for(t=0;t<e.length;t+=1)e[t].visible()&&e[t]._update();s._updateRendererCamera(),f.render()},this._exit=function(){},this._updateRendererCamera=function(){var t=s.layer().map().camera(),n=t.view,r=t.projectionMatrix,i=e.create();e.copy(i,n);var o=e.create();e.copy(o,r),s.contextRenderer().getActiveCamera().setViewMatrix(i),s.contextRenderer().getActiveCamera().setProjectionMatrix(o)},s.layer().geoOn(r.pan,function(t){s._render()}),s.layer().geoOn(r.parallelprojection,function(t){}),this};a.apiname="vtkjs",r(a,o),i("vtkjs",a),a.supported=function(){delete a.vtkjs;try{a.vtkjs=n(4436)}catch(t){}return a.vtkjs&&a.vtkjs.Rendering||!window.vtk||!window.vtk.Rendering||(a.vtkjs=window.vtk),a.vtkjs&&a.vtkjs.Rendering||(a.vtkjs=void 0),void 0!==a.vtkjs},a.fallback=function(){return null},a.supported(),t.exports=a},3559:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(3561),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},o.call(this,t);var e=this,n=null,r=this._exit,i=this.draw,s=this._update;return this.draw=function(){if(e._update(),n)for(var t=0;t<n.length;t+=1)n[t].draw();return i(),e},this._build=function(){return e.buildTime().modified(),n=e.createChoropleth()},this._update=function(){s.call(e),(e.dataTime().timestamp()>=e.buildTime().timestamp()||e.updateTime().timestamp()<=e.timestamp())&&(e._wipePolygons(),e._build()),e.updateTime().modified()},this._wipePolygons=function(){n&&n.map(function(t){return t._exit()}),n=null},this._exit=function(){e._wipePolygons(),r()},this._init(t),this};r(a,o),i("webgl","choropleth",a),t.exports=a},6791:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(6761),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},o.call(this,t),n(2778).call(this,t);var e=this;return this._build=function(){e.actors()[0]&&e.renderer().contextRenderer().removeActor(e.actors()[0]),e.createGLMeshColored(e._createContours()),e.renderer().contextRenderer().addActor(e.actors()[0]),e.buildTime().modified()},this._init(t),this};r(a,o),i("webgl","contour",a),t.exports=a},8257:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(2499),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},o.call(this,t),n(2778).call(this,t);var e=this;return this._build=function(){e.actors()[0]&&e.renderer().contextRenderer().removeActor(e.actors()[0]),e.createGLMeshColored(e._createGrids()),e.renderer().contextRenderer().addActor(e.actors()[0]),e.buildTime().modified()},this._init(t),this};r(a,o),i("webgl","grid",a),t.exports=a},8635:function(t,e,n){t.exports={choroplethFeature:n(3559),contourFeature:n(6791),gridFeature:n(8257),isolineFeature:n(960),layer:n(6982),lineFeature:n(5795),lookupTable2D:n(411),markerFeature:n(3403),meshColored:n(2778),pixelmapFeature:n(7759),pointFeature:n(5407),polygonFeature:n(8511),quadFeature:n(9304),tileLayer:n(1474),trackFeature:n(536),webglRenderer:n(7945)}},960:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(2586),a=function(t){"use strict";return this instanceof a?(t=t||{},o.call(this,t),n(4084).call(this),this._init(t),this):new a(t)};r(a,o),i("webgl","isoline",a),t.exports=a},6982:function(t,e,n){var r=function(){"use strict";var t=n(1098).createRenderer,e=n(6409),r=n(7945),i=n(9264),o=this,a=this._init,s=this.opacity,u=this.visible,l=this.zIndex;this.opacity=function(t){var e=s.apply(o,arguments);return void 0!==t&&o.initialized()&&o.map()._updateAutoshareRenderers(),e},this.visible=function(t){if(void 0===t)return u();var e=u(),n=u.apply(o,arguments);return e!==t&&o.initialized()&&(o.map().scheduleAnimationFrame(o._update,!0),o.renderer()._render()),n},this.zIndex=function(t,e){var n=l.apply(o,arguments);return void 0!==t&&o.initialized()&&(o.map().scheduleAnimationFrame(o._update,!0),o.renderer()._render(),o.map()._updateAutoshareRenderers()),n},this.switchRenderer=function(t,e){if(t instanceof r&&t!==o.renderer()){var n=o.renderer(),i=[],a=[];o.map().listSceneObjects([o]).forEach(function(t){t._cleanup&&(t._cleanup(),t._update&&a.push(t)),t.actors&&(i=i.concat(t.actors()))}),i.forEach(function(e){n.contextRenderer().removeActor(e),t.contextRenderer().addActor(e)}),o._renderer(t),o._canvas(t.canvas()),e&&(i.length||a.length)&&(n._render(),a.forEach(function(t){t._update()}),t._render())}return o},this._init=function(){var n=o.map();return n._updateAutoshareRenderers||(n._updateAutoshareRenderers=function(){var e,o,a,s=n.sortedLayers(),u=[];s.forEach(function(n){var s=n.autoshareRenderer(),l=n instanceof i;s&&n.renderer()&&n.renderer().api()===r.apiname?!e||n.opacity()!==o||"more"!==s&&(n.opacity()>0&&n.opacity()<1||l&&!a)?(n.node()[0].contains(n.renderer().canvas()[0])||(n.switchRenderer(t(r.apiname,n),!1),u.push(n.renderer())),e=n.renderer(),o=n.opacity(),a=l):(n.renderer()!==e&&(u.push(n.renderer()),n.switchRenderer(e,!1),u.push(n.renderer())),a&=l):e=null}),s.forEach(function(t){u.indexOf(t.renderer())>=0&&t._update&&t._update()}),s.forEach(function(t){u.indexOf(t.renderer())>=0&&(t.renderer()._renderFrame(),u=u.filter(function(e){return e!==t.renderer()}))}),u.forEach(function(t){t._exit()})},n.geoOn(e.layerAdd,function(){return n._updateAutoshareRenderers()}),n.geoOn(e.layerRemove,function(){return n._updateAutoshareRenderers()})),a.apply(o,arguments)}};(0,n(1098).registerLayerAdjustment)("webgl","all",r),t.exports=r},5795:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(9281),a=0,s=1,u=3,l={butt:0,square:1,round:2},c={passthrough:3,miter:4,bevel:5,round:6,"miter-clip":7},f={normal:0,debug:1},h=function(t){"use strict";if(!(this instanceof h))return new h(t);t=t||{},o.call(this,t);var e=n(1611),r=n(5325),i=n(642),d=n(4084),p=n(5685),m=n(1388),g=n(9336);d.call(this);var y,v,x,_,b,w,M,A,E,T,S,C=this,k=this._exit,P=void 0!==t.dynamicDraw&&t.dynamicDraw,O=this._init,L=this._update;return this.featureVertices=function(){return[[0,"corner",-1,a],[0,"near",1,s],[1,"far",-1,u],[1,"corner",1,a],[1,"near",-1,s],[0,"far",1,u]]},this.verticesPerFeature=function(){return C.featureVertices().length},this._init=function(t){var n,r=e.shaderProgram(),i=((n=new e.shader(e.GL.VERTEX_SHADER)).setShaderSource(g),n),o=function(t){var n=new e.shader(e.GL.FRAGMENT_SHADER);return n.setShaderSource(t?m:p),n}(void 0!==((t||{}).style||{}).debug),a=e.vertexAttribute("pos"),s=e.vertexAttribute("prev"),u=e.vertexAttribute("next"),l=e.vertexAttribute("far"),c=e.vertexAttribute("flags"),f=e.vertexAttribute("strokeWidth"),h=e.vertexAttribute("strokeColor"),d=e.vertexAttribute("strokeOpacity"),E=new e.projectionUniform("projectionMatrix"),T=e.geometryData(),k=e.sourceDataP3fv({name:"pos"}),L=e.sourceDataAnyfv(3,e.vertexAttributeKeysIndexed.Four,{name:"prev"}),I=e.sourceDataAnyfv(3,e.vertexAttributeKeysIndexed.Five,{name:"next"}),R=e.sourceDataAnyfv(3,e.vertexAttributeKeysIndexed.Six,{name:"far"}),D=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Seven,{name:"flags"}),N=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.One,{name:"strokeWidth"}),F=e.sourceDataAnyfv(3,e.vertexAttributeKeysIndexed.Two,{name:"strokeColor"}),j=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Three,{name:"strokeOpacity"}),z=e.triangles();return S=new e.modelViewOriginUniform("modelViewMatrix"),_=new e.floatUniform("pixelWidth",1/C.renderer().width()),b=new e.floatUniform("aspect",C.renderer().width()/C.renderer().height()),w=new e.floatUniform("miterLimit",10),M=new e.floatUniform("antialiasing",0),A=new e.floatUniform("fixedFlags",0),O.call(C,t),x=e.material(),v=e.mapper({dynamicDraw:P}),r.addVertexAttribute(a,e.vertexAttributeKeys.Position),r.addVertexAttribute(f,e.vertexAttributeKeysIndexed.One),r.addVertexAttribute(h,e.vertexAttributeKeysIndexed.Two),r.addVertexAttribute(d,e.vertexAttributeKeysIndexed.Three),r.addVertexAttribute(s,e.vertexAttributeKeysIndexed.Four),r.addVertexAttribute(u,e.vertexAttributeKeysIndexed.Five),r.addVertexAttribute(l,e.vertexAttributeKeysIndexed.Six),r.addVertexAttribute(c,e.vertexAttributeKeysIndexed.Seven),r.addUniform(S),r.addUniform(E),r.addUniform(_),r.addUniform(b),r.addUniform(w),r.addUniform(M),r.addUniform(A),r.addShader(o),r.addShader(i),x.addAttribute(r),x.addAttribute(e.blend()),(y=e.actor()).setMaterial(x),y.setMapper(v),T.addSource(k),T.addSource(L),T.addSource(I),T.addSource(R),T.addSource(N),T.addSource(F),T.addSource(j),T.addSource(D),z.setIndices(new Uint16Array(1)),T.addPrimitive(z),T.computeBounds=function(){T.setBounds(0,0,0,0,0,0)},v.setGeometryData(T),C},this.actors=function(){return y?[y]:[]},this._build=function(){return function(t){var e,n,o,a,s,u,h,d,p,m,g,y,x,_,b,k,P,O,L,I,R,D,N,F,j,z,G,B,V,q,U,H,W,X,K,Q,Y,$,Z,J=C.data(),tt=0,et=[{strokeOffset:0,posStrokeOffset:0,negStrokeOffset:0},{strokeOffset:0,posStrokeOffset:0,negStrokeOffset:0}],nt=et[1],rt=C.gcs(),it=C.layer().map().gcs(),ot=C.line(),at=C.style.get("strokeWidth"),st=C.style.get("strokeColor"),ut=C.style.get("strokeOpacity"),lt=C.style.get("lineCap"),ct=C.style.get("lineJoin"),ft=C.style.get("strokeOffset"),ht=C.style.get("miterLimit")(J),dt=C.style.get("antialiasing")(J)||0,pt=C.style.get("uniformLine"),mt=C.featureVertices(),gt=mt.length,yt=f[C.style.get("debug")(J)?"debug":"normal"]||0,vt=v.geometryData(),xt=C.style.get("closed"),_t=!0;if($=i.isFunction(C.style("closed"))?void 0:xt()||!1,I=i.isFunction(C.style("lineCap"))?void 0:l[lt()||"butt"],R=i.isFunction(C.style("lineJoin"))?void 0:c[ct()||"miter"],O=i.isFunction(C.style("strokeColor"))?void 0:st(),D=i.isFunction(C.style("strokeOffset"))?void 0:ft()||0,L=i.isFunction(C.style("strokeOpacity"))?void 0:ut(),P=i.isFunction(C.style("strokeWidth"))?void 0:at(),N=i.isFunction(C.style("uniformLine"))?void 0:pt(),void 0!==ht&&w.set(Math.max(1,Math.min(100,ht))),A.set(yt),M.set(dt),t)tt=E.numSegments,Z=E.closed,m=E.lineItemList,p=tt*gt,_t=I!==E.lineCapVal||void 0===I||R!==E.lineJoinVal||void 0===R||D!==E.strokeOffsetVal||void 0===D;else{var bt=[],wt=C.position();for(wt=wt===i.identityFunction?null:wt,m=new Array(J.length),Z=new Array(J.length),n=0;n<J.length;n+=1)if(g=ot(e=J[n],n),m[n]=g,!(g.length<2)){for(tt+=g.length-1,o=0;o<g.length;o+=1)x=wt?wt(g[o],o,e,n):g[o],bt.push(x.x),bt.push(x.y),bt.push(x.z||0),o||(b=x);g.length>2&&(void 0===$?xt(e,n):$)?x.x!==b.x||x.y!==b.y||x.z!==b.z?(tt+=1,Z[n]=2):Z[n]=1:Z[n]=0}if(bt=r.transformCoordinates(rt,it,bt,3),(T=new Float32Array(C.style.get("origin")(bt)))[0]||T[1]||T[2]){var Mt=T[0],At=T[1],Et=T[2];for(n=0;n<bt.length;n+=3)bt[n]-=Mt,bt[n+1]-=At,bt[n+2]-=Et}S.setOrigin(T),p=tt*gt,B=i.getGeomBuffer(vt,"pos",3*p),V=i.getGeomBuffer(vt,"prev",3*p),q=i.getGeomBuffer(vt,"next",3*p),U=i.getGeomBuffer(vt,"far",3*p),vt.primitive(0).numberOfIndices()!==p&&(vt.primitive(0).numberOfIndices=function(){return p}),E={numSegments:tt,closed:Z,lineItemList:m,lineCapVal:I,lineJoinVal:R,strokeOffsetVal:D}}for(H=i.getGeomBuffer(vt,"flags",p),W=i.getGeomBuffer(vt,"strokeWidth",p),X=i.getGeomBuffer(vt,"strokeColor",3*p),K=i.getGeomBuffer(vt,"strokeOpacity",p),n=_=Q=Y=0;n<J.length;n+=1)if(!((g=m[n]).length<2)){for(j="drop"===(F=void 0===N?pt(g,n):N),e=J[n],$=Z[n],k=_,d=g.length+(2===$?1:0),z=0,o=0;o<d;o+=1,_+=3)if(h=o,o===g.length&&(h=0,_-=3),y=g[h],o&&(nt=et[0],et[0]=et[1],et[1]=nt),t||(nt.pos=o===h?_:k,nt.prev=h?_-3:$?k+3*(g.length-3+$):_,nt.next=o+1<g.length?_+3:$?o!==h?k+3:k+6-3*$:_),F&&o>0?1===o&&(nt.strokeWidth=et[0].strokeWidth,nt.strokeColor=et[0].strokeColor,nt.strokeOpacity=et[0].strokeOpacity):(nt.strokeWidth=void 0===P?at(y,h,e,n):P,nt.strokeColor=void 0===O?st(y,h,e,n):O,nt.strokeOpacity=void 0===L?ut(y,h,e,n):L),_t&&(0!==D&&(F&&o>0?1===o&&(nt.strokeOffset=et[0].strokeOffset):nt.strokeOffset=(void 0===D?ft(y,h,e,n):D)||0,nt.strokeOffset?(nt.posStrokeOffset=2047&Math.round(2048+1023*Math.min(1,Math.max(-1,nt.strokeOffset))),nt.negStrokeOffset=2047&Math.round(2048-1023*Math.min(1,Math.max(-1,nt.strokeOffset)))):nt.posStrokeOffset=nt.negStrokeOffset=0),$||o&&o!==g.length-1?nt.flags=void 0===R?c[ct(y,h,e,n)]||c.miter:R:nt.flags=void 0===I?l[lt(y,h,e,n)]||l.butt:I),o){if(j&&o>1&&bt[et[0].pos]===bt[et[1].pos]&&bt[et[0].pos+1]===bt[et[1].pos+1]){z+=1;continue}for(a=0;a<gt;a+=1,Q+=1,Y+=3)j&&et[0].strokeOpacity<=0&&et[1].strokeOpacity<=0?K[Q]=-1:(s=et[G=mt[a][0]],u=et[1-G],t||(B[Y]=bt[s.pos],B[Y+1]=bt[s.pos+1],B[Y+2]=0,V[Y]=bt[G?s.next:s.prev],V[Y+1]=bt[(G?s.next:s.prev)+1],V[Y+2]=0,q[Y]=bt[G?s.prev:s.next],q[Y+1]=bt[(G?s.prev:s.next)+1],q[Y+2]=0,U[Y]=bt[G?u.prev:u.next],U[Y+1]=bt[(G?u.prev:u.next)+1],U[Y+2]=0),_t&&(H[Q]=mt[a][3]+4*s.flags+32*u.flags+256*(G?s.posStrokeOffset:s.negStrokeOffset)),W[Q]=s.strokeWidth,X[Y]=s.strokeColor.r,X[Y+1]=s.strokeColor.g,X[Y+2]=s.strokeColor.b,s.strokeOpacity<=0&&u.strokeOpacity<=0||s.strokeWidth<=0&&u.strokeWidth<=0?K[Q]=-1:K[Q]=s.strokeOpacity)}if(z)for(a=0;a<z*gt;a+=1,Q+=1,Y+=3)K[Q]=-1}t?(_t&&v.updateSourceBuffer("flags"),v.updateSourceBuffer("strokeWidth"),v.updateSourceBuffer("strokeOpacity"),v.updateSourceBuffer("strokeColor")):(v.modified(),vt.boundsDirty(!0),v.boundsDirtyTimestamp().modified())}(!!(C.dataTime().timestamp()<C.buildTime().timestamp()&&E)),C.renderer().contextRenderer().hasActor(y)||C.renderer().contextRenderer().addActor(y),C.buildTime().modified(),C},this._update=function(){return L.call(C),(C.dataTime().timestamp()>=C.buildTime().timestamp()||C.updateTime().timestamp()<=C.timestamp())&&C._build(),_.set(1/C.renderer().width()),b.set(C.renderer().width()/C.renderer().height()),y.setVisible(C.visible()),y.material().setBinNumber(C.bin()),C.updateTime().modified(),C},this._exit=function(){C.renderer().contextRenderer().removeActor(y),y=null,k()},this._init(t),this};r(h,o);var d={};d[o.capabilities.basic]=!0,d[o.capabilities.multicolor]=!0,i("webgl","line",h,d),t.exports=h},411:function(t,e,n){var r=n(4626),i=n(77),o=n(1611);var a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},o.texture.call(this);var e,n=i(),r=t.maxWidth||4096,s=new Uint8Array([0,0,0,0]),u=this;return this.setup=function(t){!function(t,e){if(!(e>=0&&e<=31))throw Error("[error] Texture unit "+e+" is not supported");t.m_context.activeTexture(o.GL.TEXTURE0+e)}(t,u.textureUnit()),t.m_context.deleteTexture(u.m_textureHandle),u.m_textureHandle=t.m_context.createTexture(),t.m_context.bindTexture(o.GL.TEXTURE_2D,u.m_textureHandle),t.m_context.texParameteri(o.GL.TEXTURE_2D,o.GL.TEXTURE_MIN_FILTER,o.GL.NEAREST),t.m_context.texParameteri(o.GL.TEXTURE_2D,o.GL.TEXTURE_MAG_FILTER,o.GL.NEAREST),t.m_context.texParameteri(o.GL.TEXTURE_2D,o.GL.TEXTURE_WRAP_S,o.GL.CLAMP_TO_EDGE),t.m_context.texParameteri(o.GL.TEXTURE_2D,o.GL.TEXTURE_WRAP_T,o.GL.CLAMP_TO_EDGE),t.m_context.pixelStorei(o.GL.UNPACK_ALIGNMENT,1),t.m_context.pixelStorei(o.GL.UNPACK_FLIP_Y_WEBGL,!0),t.m_context.texImage2D(o.GL.TEXTURE_2D,0,o.GL.RGBA,u.width,u.height,0,o.GL.RGBA,o.GL.UNSIGNED_BYTE,s),t.m_context.bindTexture(o.GL.TEXTURE_2D,null),n.modified()},this.colorTable=function(t){return void 0===t?e:(e=t,t.length<4&&(t=[0,0,0,0]),u.width=Math.min(r,t.length/4),u.height=Math.ceil(t.length/4/r),t instanceof Uint8Array&&t.length===u.width*u.height*4?s=t:(t.length<u.width*u.height*4&&(t=t.concat(new Array(u.width*u.height*4-t.length).fill(0))),s=new Uint8Array(t)),u.modified(),u)},this.maxWidth=function(){return r},this.colorTable(t.colorTable||[]),this};r(a,o.texture),t.exports=a},3403:function(t,e,n){var r=n(5616),i=n(4626),o=n(1098).registerFeature,a=n(2225),s=n(7945),u=function(t){"use strict";if(!(this instanceof u))return new u(t);t=t||{},a.call(this,t);var e=n(1611),i=n(5325),o=n(642),l=n(4084),c=n(2709),f=n(6409),h=n(9923),d=n(3724),p=n(1202),m=n(7665);l.call(this);var g,y,v=this,x=this._exit,_=null,b=null,w={},M=this._init,A=this._update,E=this.updateStyleFromArray;function T(t){var e,n,r,u,l,c,f,h,d,p,m,x,w=v.data().length,M=v._pointPolygon(0,0,1,1),A=new Array(3*w),E={},S={},C={},k={},P={radius:1,fillColor:3,fillOpacity:1,strokeColor:3,strokeOpacity:1,strokeOffset:0,strokeWidth:1,symbol:1,symbolValue:1,rotation:1,scaleWithZoom:0,rotateWithMap:0,radiusIncludesStroke:0},O=v.verticesPerFeature(),L=v.data(),I=b.geometryData();for(var R in l=v.position(),P)C[R]=v.style.get(R),o.isFunction(v.style(R))||(k[R]=C[R]()),P[R]&&(E[R]=o.getGeomBuffer(I,R,O*w*P[R]));if(!t){for(e=x=0;e<w;e+=1,x+=3)u=l(L[e],e),A[x]=u.x,A[x+1]=u.y,A[x+2]=0;if(A=i.transformCoordinates(v.gcs(),v.layer().map().gcs(),A,3),(y=new Float32Array(v.style.get("origin")(A)))[0]||y[1]||y[2])for(e=x=0;e<w;e+=1,x+=3)A[x]-=y[0],A[x+1]-=y[1],A[x+2]-=y[2];g.setOrigin(y),r=o.getGeomBuffer(I,"pos",O*w*3),v._primitiveShape!==a.primitiveShapes.sprite&&(f=o.getGeomBuffer(I,"unit",O*w*2)),(c=I.primitive(0).indices())instanceof Uint16Array&&c.length===O*w||(c=new Uint16Array(O*w),I.primitive(0).setIndices(c))}for(e=d=p=m=x=0;e<w;e+=1,x+=3){if(h=L[e],!t&&v._primitiveShape!==a.primitiveShapes.sprite)for(n=0;n<M.length;n+=1,m+=1)f[m]=M[n];for(var D in P)S[D]=void 0===k[D]?C[D](h,e):k[D];for(S.scaleWithZoom=a.scaleMode[S.scaleWithZoom]||(S.scaleWithZoom>=1&&S.scaleWithZoom<=3?S.scaleWithZoom:0),S.symbolComputed=S.scaleWithZoom+(S.rotateWithMap?4:0)+16*(Math.sign(void 0!==S.radiusIncludesStroke&&S.radiusIncludesStroke?S.strokeOffset:1)+1)+64*S.symbol,S.symbolValue&&S.symbol>=a.symbols.arrow&&S.symbol<a.symbols.arrow+a.symbols.arrowMax&&(S.symbolValue=o.packFloats(S.symbolValue)),n=0;n<O;n+=1,d+=1,p+=3)t||(r[p]=A[x],r[p+1]=A[x+1],r[p+2]=A[x+2]),E.radius[d]=S.radius,E.fillColor[p]=S.fillColor.r,E.fillColor[p+1]=S.fillColor.g,E.fillColor[p+2]=S.fillColor.b,E.fillOpacity[d]=S.fillOpacity,E.strokeColor[p]=S.strokeColor.r,E.strokeColor[p+1]=S.strokeColor.g,E.strokeColor[p+2]=S.strokeColor.b,E.strokeOpacity[d]=S.strokeOpacity,E.strokeWidth[d]=S.strokeWidth,E.symbol[d]=S.symbolComputed,E.symbolValue[d]=S.symbolValue,E.rotation[d]=S.rotation}if(v._primitiveShapeAuto){var N=v._approximateMaxRadius(v.renderer().map().zoom());if(v._primitiveShape===a.primitiveShapes.sprite&&N>s._maxPointSize||v._primitiveShape!==a.primitiveShapes.sprite&&N<=s._maxPointSize)return v._primitiveShape=N>s._maxPointSize?a.primitiveShapes.triangle:a.primitiveShapes.sprite,v.renderer().contextRenderer().removeActor(_),_=null,v._init(!0),void T()}t?Object.keys(E).forEach(function(t){return b.updateSourceBuffer(t)}):(I.boundsDirty(!0),b.modified(),b.boundsDirtyTimestamp().modified())}return c(v,t),this.actors=function(){return _?[_]:[]},this.updateStyleFromArray=function(t,e,n){var i,o,a={radius:1,fillColor:3,fillOpacity:1,strokeColor:3,strokeOpacity:1,strokeWidth:1,symbolComputed:1,symbolValueComputed:1,rotation:1};if("string"==typeof t){var s={};s[t]=e,t=s}return r.each(t,function(t,e){var n,r,s,u,l,c,f,h,d,p="symbolComputed"===t?"symbol":"symbolValueComputed"===t?"symbolValue":t;if(v.visible()&&_&&a[t]&&!i&&!v.clustering())if(d=a[t],u=v.data().length,s=(r=_.mapper()).getSourceBuffer(p),n=v.verticesPerFeature(),s&&u&&u*n*d===s.length){switch(a[t]){case 1:for(c=0,h=0;c<u;c+=1)for(l=e[c],f=0;f<n;f+=1,h+=1)s[h]=l;break;case 3:for(c=0,h=0;c<u;c+=1)for(l=e[c],f=0;f<n;f+=1,h+=3)s[h]=l.r,s[h+1]=l.g,s[h+2]=l.b}r.updateSourceBuffer(p),o=!0}else i=!0;else i=!0;var m=v.modified;i||t!==p||(v.modified=function(){}),E(t,e,!1),v.modified=m}),n&&(v.visible()&&i?v.draw():o&&v.renderer()._render()),v},this._handleZoom=function(t){v._primitiveShapeAuto&&v._primitiveShape===a.primitiveShapes.sprite&&2*v._approximateMaxRadius(t)>s._maxPointSize&&(v._primitiveShape=a.primitiveShapes.triangle,v.renderer().contextRenderer().removeActor(v.actors()[0]),v._init(!0),v.dataTime().modified(),v.draw())},this._init=function(n){var r,i,o=e.shaderProgram(),s=((i=new e.shader(e.GL.VERTEX_SHADER)).setShaderSource(v._primitiveShape===a.primitiveShapes.sprite?m:p),i),u=function(){var t=new e.shader(e.GL.FRAGMENT_SHADER);return t.setShaderSource(v._primitiveShape===a.primitiveShapes.sprite?d:h),t}(),l=e.material(),c=e.blend(),x=e.geometryData(),A=e.sourceDataP3fv({name:"pos"}),E={fillColor:3,fillOpacity:1,radius:1,rotation:1,strokeColor:3,strokeOpacity:1,strokeWidth:1,symbol:1,symbolValue:1},T={pixelWidth:e.GL.FLOAT,aspect:e.GL.FLOAT,zoom:e.GL.FLOAT,rotationUniform:e.GL.FLOAT},S=new e.projectionUniform("projectionMatrix");g=new e.modelViewOriginUniform("modelViewMatrix",y),v._primitiveShape===a.primitiveShapes.sprite?r=new e.points:(r=new e.triangles,E.unit=2),r.setIndices(new Uint16Array),n||M.call(v,t),b=e.mapper(),o.addVertexAttribute(e.vertexAttribute("pos"),e.vertexAttributeKeys.Position),x.addSource(A),Object.keys(E).forEach(function(t,n){o.addVertexAttribute(e.vertexAttribute(t),n+1),x.addSource(e.sourceDataAnyfv(E[t],n+1,{name:t}))}),w={},Object.keys(T).forEach(function(t){w[t]=new e.uniform(T[t],t),o.addUniform(w[t])}),o.addUniform(g),o.addUniform(S),o.addShader(u),o.addShader(s),l.addAttribute(o),l.addAttribute(c),(_=e.actor()).setMaterial(l),_.setMapper(b),x.addPrimitive(r),x.computeBounds=function(){x.setBounds(0,0,0,0,0,0)},b.setGeometryData(x),n||v.geoOn(f.zoom,function(t){v._handleZoom(t.zoomLevel)})},this._build=function(){return T(v.dataTime().timestamp()<v.buildTime().timestamp()),v.renderer().contextRenderer().hasActor(_)||v.renderer().contextRenderer().addActor(_),v.buildTime().modified(),v},this._update=function(){return A.call(v),(v.dataTime().timestamp()>=v.buildTime().timestamp()||v.updateTime().timestamp()<v.timestamp())&&v._build(),w.pixelWidth.set(2/v.renderer().width()),w.aspect.set(v.renderer().width()/v.renderer().height()),w.zoom.set(v.renderer().map().zoom()),w.rotationUniform.set(v.renderer().map().rotation()),_.setVisible(v.visible()),_.material().setBinNumber(v.bin()),v.updateTime().modified(),v},this._exit=function(){v.renderer().contextRenderer().removeActor(_),_=null,w={},x()},v._init(),this};i(u,a);o("webgl","marker",u,{}),t.exports=u},2778:function(t,e,n){t.exports=function(t){"use strict";t=t||{};var e=n(1611),r=n(5325),i=n(642),o=n(428),a=n(4993);n(4084).call(this);var s,u,l=this,c=this._exit,f=null,h=null,d=null,p=null,m=null,g=null,y=null,v=null,x=void 0!==t.dynamicDraw&&t.dynamicDraw,_=this._init,b=this._update;function w(){var t=new e.shader(e.GL.VERTEX_SHADER);return t.setShaderSource(a),t}function M(){var t=new e.shader(e.GL.FRAGMENT_SHADER);return t.setShaderSource(o),t}return this.createGLMeshColored=function(t){var e,n,o,a,c,f,d,x,_,b=t.elements.length,w=[],M=h.geometryData();for(m.set([t.minColor.r,t.minColor.g,t.minColor.b,t.minColor.a]),g.set([t.maxColor.r,t.maxColor.g,t.maxColor.b,t.maxColor.a]),y.set(t.colorMap.length),v.set(t.stepped),e=-1;e<t.colorMap.length+1;e+=1)o=Math.max(0,Math.min(t.colorMap.length-1,e)),w.push(255*t.colorMap[o].r),w.push(255*t.colorMap[o].g),w.push(255*t.colorMap[o].b),w.push(255*t.colorMap[o].a);if(p.setColorTable(w),t.pos=r.transformCoordinates(l.gcs(),l.layer().map().gcs(),t.pos,3),(s=new Float32Array(l.style.get("origin")(t.pos)))[0]||s[1]||s[2])for(e=0;e<t.pos.length;e+=3)t.pos[e]-=s[0],t.pos[e+1]-=s[1],t.pos[e+2]-=s[2];for(u.setOrigin(s),f=i.getGeomBuffer(M,"pos",3*b),d=i.getGeomBuffer(M,"opacity",b),x=i.getGeomBuffer(M,"value",b),e=n=0;e<b;e+=1,n+=3)a=3*(o=t.elements[e]),f[n]=t.pos[a],f[n+1]=t.pos[a+1],f[n+2]=t.pos[a+2],c=t.elementValues?Math.floor(e/3):o,d[e]=t.opacity[c],x[e]=t.value[c];(_=M.primitive(0).indices())instanceof Uint16Array&&_.length===b||(_=new Uint16Array(b),M.primitive(0).setIndices(_)),M.boundsDirty(!0),h.modified(),h.boundsDirtyTimestamp().modified()},this._init=function(t){var n=e.blend(),r=e.shaderProgram(),i=e.material(),o=e.lookupTable(),a=e.geometryData(),s=new e.projectionUniform("projectionMatrix"),c=new e.uniform(e.GL.INT,"sampler2d"),b=w(),A=M(),E=e.vertexAttribute("pos"),T=e.vertexAttribute("value"),S=e.vertexAttribute("opacity"),C=e.sourceDataP3fv({name:"pos"}),k=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.One,{name:"value"}),P=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Two,{name:"opacity"}),O=new e.triangles;u=new e.modelViewOriginUniform("modelViewMatrix"),_.call(l,t),h=e.mapper({dynamicDraw:x}),r.addVertexAttribute(E,e.vertexAttributeKeys.Position),r.addVertexAttribute(T,e.vertexAttributeKeysIndexed.One),r.addVertexAttribute(S,e.vertexAttributeKeysIndexed.Two),r.addUniform(u),r.addUniform(s),m=new e.uniform(e.GL.FLOAT_VEC4,"minColor"),r.addUniform(m),g=new e.uniform(e.GL.FLOAT_VEC4,"maxColor"),r.addUniform(g),y=new e.uniform(e.GL.FLOAT,"steps"),r.addUniform(y),v=new e.uniform(e.GL.BOOL,"stepped"),r.addUniform(v),r.addShader(A),r.addShader(b),r.addUniform(c),o.setTextureUnit(7),c.set(7),(d=i).addAttribute(r),d.addAttribute(n),p=o,d.addAttribute(p),(f=e.actor()).setMaterial(d),f.setMapper(h),a.addSource(C),a.addSource(k),a.addSource(P),a.addPrimitive(O),a.computeBounds=function(){a.setBounds(0,0,0,0,0,0)},h.setGeometryData(a)},this.actors=function(){return f?[f]:[]},this._update=function(){b.call(l),(l.dataTime().timestamp()>=l.buildTime().timestamp()||l.updateTime().timestamp()<=l.timestamp())&&l._build(),f.setVisible(l.visible()),f.material().setBinNumber(l.bin()),l.updateTime().modified()},this._exit=function(){l.renderer().contextRenderer().removeActor(f),c()},this}},4084:function(t,e,n){var r=function(t){"use strict";if(!(this instanceof n(1338)))return new r(t);var e=this,i=this.draw;if(this.draw=function(){return e.ready&&(e._update({mayDelay:!0}),e.renderer()._render(),i()),e},this.bin){var o=this.bin;this.bin=function(t,n){if(void 0===t&&!n&&null===o(void 0,!0)){var r=e.layer&&e.layer(),i=r&&r.map&&r.map(),a=(i&&i.listSceneObjects()||[]).indexOf(e);if(a>=0)return a}return o.apply(e,arguments)}}return this};t.exports=r},7759:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(7761),a=n(411),s=n(642),u=function(t){"use strict";if(!(this instanceof u))return new u(t);o.call(this,t),n(4084).call(this);var e,r,i,l=n(1611),c=n(3925),f=this._exit,h=this;return this.pointSearch=function(t,n){if(e&&h.m_info){var r=e.pointSearch(t,n);return this._pointSearchProcess(r)}return{index:[],found:[]}},this._computePixelmap=function(){var t=h.data()||[],n=h.style.get("color"),o=h.indexModified(void 0,"clear"),u=h.dataTime().timestamp()>=h.buildTime().timestamp()||void 0===o;i||((i=a()).setTextureUnit(1),u=!0);var f,d=Math.max(1,t.length),p=i.maxWidth();d>p&&d%p&&(d+=p-d%p),u||(u=(f=i.colorTable()).length!==4*d,o[0]=Math.max(0,o[0]),o[1]=Math.min(t.length,o[1]+1)),u&&(f=new Uint8Array(4*d),o=[0,t.length]);for(var m=o[0];m<o[1];m+=1){var g=t[m],y=s.convertColor(n.call(h,g,m));f[4*m]=255*y.r,f[4*m+1]=255*y.g,f[4*m+2]=255*y.b,f[4*m+3]=void 0===y.a?255:255*y.a}h.m_info={colors:f};var v=i.colorTable();if(v&&v.length===f.length){for(var x=4*o[0];x<4*o[1]&&f[x]===v[x];x+=1);if(x===4*o[1])return}i.colorTable(f),e||(e=h.layer().createFeature("quad",{selectionAPI:!1,gcs:h.gcs(),visible:h.visible(void 0,!0),nearestPixel:!0}),r=!1),r||(h.dependentFeatures([e]),e.setShader("image_fragment",c),e._hookBuild=function(t){var e=new l.uniform(l.GL.INT,"lutSampler");e.set(i.textureUnit()),t.addUniform(e);var n=new l.uniform(l.GL.INT,"lutWidth");n.set(i.width),t.addUniform(n);var r=new l.uniform(l.GL.INT,"lutHeight");r.set(i.height),t.addUniform(r)},e._hookRenderImageQuads=function(t,e){i.bind(t,e)},!1===r&&e.style({image:h.m_srcImage,position:h.style.get("position")}).data([{}]).draw(),r=!0)},this._exit=function(){return e&&h.layer()&&(h.layer().deleteFeature(e),e=null,h.dependentFeatures([])),f(),h},t.quadFeature&&(e=t.quadFeature).nearestPixel&&e.nearestPixel(!0),this._init(t),this};r(u,o);var l={};l[o.capabilities.lookup]=!0,i("webgl","pixelmap",u,l),t.exports=u},5407:function(t,e,n){var r=n(5616),i=n(4626),o=n(1098).registerFeature,a=n(7541),s=n(7945),u=function(t){"use strict";if(!(this instanceof u))return new u(t);t=t||{},a.call(this,t);var e=n(1611),i=n(5325),o=n(642),l=n(4084),c=n(2709),f=n(4317),h=n(2682),d=n(8208),p=n(6979);l.call(this);var m,g,y=this,v=this._exit,x=null,_=null,b=null,w=null,M=void 0!==t.dynamicDraw&&t.dynamicDraw,A=this._init,E=this._update,T=this.updateStyleFromArray;function S(t){var e,n,r,u,l,c,f,h,d,p,v,b,w,M,A,E,T,C,k,P,O,L,I,R,D,N,F,j,z,G,B,V,q,U,H,W,X=y.data().length,K=y._pointPolygon(0,0,1,1),Q=new Array(3*X),Y=y.verticesPerFeature(),$=y.data(),Z=0,J=_.geometryData();if(l=y.position(),p=y.style.get("radius"),w=y.style.get("stroke"),E=y.style.get("strokeWidth"),k=y.style.get("strokeOpacity"),L=y.style.get("strokeColor"),D=y.style.get("fill"),j=y.style.get("fillOpacity"),B=y.style.get("fillColor"),!t){for(e=W=0;e<X;e+=1,W+=3)u=l($[e],e),Q[W]=u.x,Q[W+1]=u.y,Q[W+2]=0;if(Q=i.transformCoordinates(y.gcs(),y.layer().map().gcs(),Q,3),(g=new Float32Array(y.style.get("origin")(Q)))[0]||g[1]||g[2])for(e=W=0;e<X;e+=1,W+=3)Q[W]-=g[0],Q[W+1]-=g[1],Q[W+2]-=g[2];m.setOrigin(g),r=o.getGeomBuffer(J,"pos",Y*X*3),c=o.getGeomBuffer(J,"unit",Y*X*2),(f=J.primitive(0).indices())instanceof Uint16Array&&f.length===Y*X||(f=new Uint16Array(Y*X),J.primitive(0).setIndices(f))}for(h=o.getGeomBuffer(J,"radius",Y*X),v=o.getGeomBuffer(J,"stroke",Y*X),M=o.getGeomBuffer(J,"strokeWidth",Y*X),T=o.getGeomBuffer(J,"strokeOpacity",Y*X),P=o.getGeomBuffer(J,"strokeColor",Y*X*3),I=o.getGeomBuffer(J,"fill",Y*X),N=o.getGeomBuffer(J,"fillOpacity",Y*X),z=o.getGeomBuffer(J,"fillColor",Y*X*3),e=q=U=H=W=0;e<X;e+=1,W+=3){if(V=$[e],!t&&y._primitiveShape!==a.primitiveShapes.sprite)for(n=0;n<K.length;n+=1,H+=1)c[H]=K[n];for(d=p(V,e),b=w(V,e)?1:0,A=E(V,e),C=k(V,e),O=L(V,e),R=D(V,e)?1:0,F=j(V,e),G=B(V,e),y._primitiveShapeAuto&&(R&&F||b&&C)&&d+(b&&C?A:0)>Z&&(Z=d+(b&&C?A:0)),n=0;n<Y;n+=1,q+=1,U+=3)t||(r[U]=Q[W],r[U+1]=Q[W+1],r[U+2]=Q[W+2]),h[q]=d,v[q]=b,M[q]=A,T[q]=C,P[U]=O.r,P[U+1]=O.g,P[U+2]=O.b,I[q]=R,N[q]=F,z[U]=G.r,z[U+1]=G.g,z[U+2]=G.b}if(y._primitiveShapeAuto&&(y._primitiveShape===a.primitiveShapes.sprite&&Z>s._maxPointSize||y._primitiveShape!==a.primitiveShapes.sprite&&Z<=s._maxPointSize))return y._primitiveShape=Z>s._maxPointSize?a.primitiveShapes.triangle:a.primitiveShapes.sprite,y.renderer().contextRenderer().removeActor(x),x=null,y._init(!0),void S();t?(_.updateSourceBuffer("radius"),_.updateSourceBuffer("stroke"),_.updateSourceBuffer("strokeWidth"),_.updateSourceBuffer("strokeColor"),_.updateSourceBuffer("strokeOpacity"),_.updateSourceBuffer("fill"),_.updateSourceBuffer("fillColor"),_.updateSourceBuffer("fillOpacity")):(J.boundsDirty(!0),_.modified(),_.boundsDirtyTimestamp().modified())}return c(y,t),this.actors=function(){return x?[x]:[]},this.updateStyleFromArray=function(t,e,n){var i,o,a={fill:"bool",fillColor:3,fillOpacity:1,radius:1,stroke:"bool",strokeColor:3,strokeOpacity:1,strokeWidth:1};if("string"==typeof t){var s={};s[t]=e,t=s}return r.each(t,function(t,e){var n,r,s,u,l,c,f,h,d;if(y.visible()&&x&&a[t]&&!i&&!y.clustering())if(d="bool"===a[t]?1:a[t],u=y.data().length,s=(r=x.mapper()).getSourceBuffer(t),n=y.verticesPerFeature(),s&&u&&u*n*d===s.length){switch(a[t]){case 1:for(c=0,h=0;c<u;c+=1)for(l=e[c],f=0;f<n;f+=1,h+=1)s[h]=l;break;case 3:for(c=0,h=0;c<u;c+=1)for(l=e[c],f=0;f<n;f+=1,h+=3)s[h]=l.r,s[h+1]=l.g,s[h+2]=l.b;break;case"bool":for(c=0,h=0;c<u;c+=1)for(l=e[c]?1:0,f=0;f<n;f+=1,h+=1)s[h]=l}r.updateSourceBuffer(t),o=!0}else i=!0;else i=!0;var p=y.modified;i||(y.modified=function(){}),T(t,e,!1),y.modified=p}),n&&(y.visible()&&i?y.draw():o&&y.renderer()._render()),y},this._init=function(n){var r,i,o=e.shaderProgram(),s=((i=new e.shader(e.GL.VERTEX_SHADER)).setShaderSource(y._primitiveShape===a.primitiveShapes.sprite?p:d),i),u=function(){var t=new e.shader(e.GL.FRAGMENT_SHADER);return t.setShaderSource(y._primitiveShape===a.primitiveShapes.sprite?h:f),t}(),l=e.vertexAttribute("pos"),c=e.vertexAttribute("unit"),v=e.vertexAttribute("radius"),E=e.vertexAttribute("strokeWidth"),T=e.vertexAttribute("fillColor"),S=e.vertexAttribute("fill"),C=e.vertexAttribute("strokeColor"),k=e.vertexAttribute("stroke"),P=e.vertexAttribute("fillOpacity"),O=e.vertexAttribute("strokeOpacity"),L=new e.projectionUniform("projectionMatrix"),I=e.material(),R=e.blend(),D=e.geometryData(),N=e.sourceDataP3fv({name:"pos"}),F=e.sourceDataAnyfv(2,e.vertexAttributeKeysIndexed.One,{name:"unit"}),j=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Two,{name:"radius"}),z=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Three,{name:"strokeWidth"}),G=e.sourceDataAnyfv(3,e.vertexAttributeKeysIndexed.Four,{name:"fillColor"}),B=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Five,{name:"fill"}),V=e.sourceDataAnyfv(3,e.vertexAttributeKeysIndexed.Six,{name:"strokeColor"}),q=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Seven,{name:"stroke"}),U=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Eight,{name:"fillOpacity"}),H=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Nine,{name:"strokeOpacity"});m=new e.modelViewOriginUniform("modelViewMatrix",g),(r=y._primitiveShape===a.primitiveShapes.sprite?new e.points:new e.triangles).setIndices(new Uint16Array),b=new e.floatUniform("pixelWidth",2/y.renderer().width()),w=new e.floatUniform("aspect",y.renderer().width()/y.renderer().height()),n||A.call(y,t),_=e.mapper({dynamicDraw:M}),o.addVertexAttribute(l,e.vertexAttributeKeys.Position),y._primitiveShape!==a.primitiveShapes.sprite&&o.addVertexAttribute(c,e.vertexAttributeKeysIndexed.One),o.addVertexAttribute(v,e.vertexAttributeKeysIndexed.Two),o.addVertexAttribute(E,e.vertexAttributeKeysIndexed.Three),o.addVertexAttribute(T,e.vertexAttributeKeysIndexed.Four),o.addVertexAttribute(S,e.vertexAttributeKeysIndexed.Five),o.addVertexAttribute(C,e.vertexAttributeKeysIndexed.Six),o.addVertexAttribute(k,e.vertexAttributeKeysIndexed.Seven),o.addVertexAttribute(P,e.vertexAttributeKeysIndexed.Eight),o.addVertexAttribute(O,e.vertexAttributeKeysIndexed.Nine),o.addUniform(b),o.addUniform(w),o.addUniform(m),o.addUniform(L),o.addShader(u),o.addShader(s),I.addAttribute(o),I.addAttribute(R),(x=e.actor()).setMaterial(I),x.setMapper(_),D.addSource(N),D.addSource(F),D.addSource(j),D.addSource(z),D.addSource(G),D.addSource(B),D.addSource(V),D.addSource(q),D.addSource(U),D.addSource(H),D.addPrimitive(r),D.computeBounds=function(){D.setBounds(0,0,0,0,0,0)},_.setGeometryData(D)},this._build=function(){return S(y.dataTime().timestamp()<y.buildTime().timestamp()),y.renderer().contextRenderer().hasActor(x)||y.renderer().contextRenderer().addActor(x),y.buildTime().modified(),y},this._update=function(){return E.call(y),(y.dataTime().timestamp()>=y.buildTime().timestamp()||y.updateTime().timestamp()<y.timestamp())&&y._build(),b.set(2/y.renderer().width()),w.set(y.renderer().width()/y.renderer().height()),x.setVisible(y.visible()),x.material().setBinNumber(y.bin()),y.updateTime().modified(),y},this._exit=function(){y.renderer().contextRenderer().removeActor(x),x=null,v()},y._init(),this};i(u,a);var l={};l[a.capabilities.stroke]=!0,o("webgl","point",u,l),t.exports=u},2709:function(t,e,n){var r=n(7541);t.exports=function(t,e){e=e||{},t._primitiveShapeAuto=!0,t._primitiveShape=r.primitiveShapes.auto,void 0!==r.primitiveShapes[e.primitiveShape]&&(t._primitiveShape=e.primitiveShape),t._primitiveShapeAuto=t._primitiveShape===r.primitiveShapes.auto,t._primitiveShapeAuto&&(t._primitiveShape=r.primitiveShapes.sprite,t._primitiveShapeAuto=!0),t._pointPolygon=function(e,n,i,o){var a;switch(t._primitiveShape){case r.primitiveShapes.triangle:a=[e,n-2*o,e-i*Math.sqrt(3),n+o,e+i*Math.sqrt(3),n+o];break;case r.primitiveShapes.square:a=[e-i,n+o,e-i,n-o,e+i,n+o,e-i,n-o,e+i,n-o,e+i,n+o];break;default:a=[e,n]}return a},t.verticesPerFeature=function(){return t._pointPolygon(0,0,1,1).length/2},t.primitiveShape=function(e,n){if(void 0===e)return n||!t._primitiveShapeAuto?t._primitiveShape:r.primitiveShapes.auto;if(void 0!==r.primitiveShapes[e]){var i=!1;e===r.primitiveShapes.auto?(i=!t._primitiveShapeAuto,t._primitiveShapeAuto=!0):(i=t._primitiveShapeAuto||t._primitiveShape!==e,t._primitiveShapeAuto=!1,t._primitiveShape=e),i&&(t.renderer().contextRenderer().removeActor(t.actors()[0]),t._init(!0),t.dataTime().modified())}return t}}},8511:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(6645),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},o.call(this,t);var e=n(1611),r=n(9747);r=r.__esModule?r.default:r;var i=n(5325),s=n(642),u=n(4084),l=n(2225),c=n(4547),f=n(6207),h=n(9506),d=n(1030);u.call(this);var p,m,g,y,v,x,_=this,b=this._exit,w=null,M=null,A=this._init,E=this._update;function T(){var t=new e.shader(e.GL.VERTEX_SHADER);return _._hasPatterns?t.setShaderSource(d):t.setShaderSource(h),t}function S(){var t=new e.shader(e.GL.FRAGMENT_SHADER);return _._hasPatterns?t.setShaderSource(f):t.setShaderSource(c),t}function C(t,e,n,r,i){if(!t&&void 0===e)return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var o,a,u=Array(16);if(void 0===t&&(t=e(n,r)),!t)return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];void 0===t.fillColor?(o=s.convertColor(_.style.get("strokeColor")(i,0,n,r))).a=_.style.get("strokeOpacity")(i,0,n,r):o=s.convertColor(t.fillColor),u[0]=o.r,u[1]=o.g,u[2]=o.b,u[3]=o.a,void 0===t.strokeColor?(a=s.convertColor(_.style.get("fillColor")(i,0,n,r))).a=_.style.get("fillOpacity")(i,0,n,r):a=s.convertColor(t.strokeColor),u[4]=a.r,u[5]=a.g,u[6]=a.b,u[7]=a.a,u[8]=void 0===t.strokeWidth?1.25:t.strokeWidth,u[9]=void 0===t.radius?6.25:t.radius;var c=void 0===t.scaleWithZoom?l.scaleMode.none:t.scaleWithZoom;c=l.scaleMode[c]||c;var f=void 0===t.strokeOffset||t.strokeOffset<0?-1:t.strokeOffset>0?1:0;return u[10]=c+(t.rotateWithMap?0:4)+16*((t.radiusIncludeStroke?f:1)+1)+64*(t.symbol||0),t.symbol&&t.symbolValue&&t.symbol>=l.symbols.arrow&&t.symbol<l.symbols.arrow+l.symbols.arrowMax?u[11]=s.packFloats(t.symbolValue||0):u[11]=t.symbolValue||0,u[12]=t.rotation||0,u[13]=void 0===t.spacing?20:t.spacing,u[14]=void 0===t.origin?0:t.origin[0],u[15]=void 0===t.origin?0:t.origin[1],u}return this._init=function(t){_._hasPatterns=!0===t;var n=e.shaderProgram(),r=e.vertexAttribute("pos"),i=e.vertexAttribute("fillColor"),o=e.vertexAttribute("fillOpacity"),a=new e.projectionUniform("projectionMatrix"),s=T(),u=S(),l=e.blend(),c=e.geometryData(),f=e.sourceDataP3fv({name:"pos"}),h=e.sourceDataAnyfv(3,e.vertexAttributeKeysIndexed.Two,{name:"fillColor"}),d=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Three,{name:"fillOpacity"}),p=e.triangles(),m=e.material();if(y=new e.modelViewOriginUniform("modelViewMatrix"),n.addVertexAttribute(r,e.vertexAttributeKeys.Position),n.addVertexAttribute(i,e.vertexAttributeKeysIndexed.Two),n.addVertexAttribute(o,e.vertexAttributeKeysIndexed.Three),_._hasPatterns){var v=e.vertexAttribute("patternFillColor"),x=e.vertexAttribute("patternStrokeColor"),b=e.vertexAttribute("patternSymbolProps"),E=e.vertexAttribute("patternPositionProps");n.addVertexAttribute(v,e.vertexAttributeKeysIndexed.Four),n.addVertexAttribute(x,e.vertexAttributeKeysIndexed.Five),n.addVertexAttribute(b,e.vertexAttributeKeysIndexed.Six),n.addVertexAttribute(E,e.vertexAttributeKeysIndexed.Seven)}if(n.addUniform(y),n.addUniform(a),n.addShader(u),n.addShader(s),m.addAttribute(n),m.addAttribute(l),M=e.mapper(),(w=e.actor()).setMaterial(m),w.setMapper(M),c.addSource(f),c.addSource(h),c.addSource(d),_._hasPatterns){var C={pixelWidth:e.GL.FLOAT,aspect:e.GL.FLOAT,zoom:e.GL.FLOAT,rotationUniform:e.GL.FLOAT};g={},Object.keys(C).forEach(function(t){g[t]=new e.uniform(C[t],t),n.addUniform(g[t])});var k=e.sourceDataAnyfv(4,e.vertexAttributeKeysIndexed.Four,{name:"patternFillColor"}),P=e.sourceDataAnyfv(4,e.vertexAttributeKeysIndexed.Five,{name:"patternStrokeColor"}),O=e.sourceDataAnyfv(4,e.vertexAttributeKeysIndexed.Six,{name:"patternSymbolProps"}),L=e.sourceDataAnyfv(4,e.vertexAttributeKeysIndexed.Seven,{name:"patternPositionProps"});c.addSource(k),c.addSource(P),c.addSource(O),c.addSource(L)}c.addPrimitive(p),c.computeBounds=function(){c.setBounds(0,0,0,0,0,0)},M.setGeometryData(c),!0!==t&&A.call(_,t)},this.actors=function(){return[w]},this._build=function(){!function(t){var e,n,o,a,u,l,c,f,h,d,g,v,x,b,A,E,T,S,k,P,O,L,I,R,D,N,F,j,z,G,B,V,q,U,H,W,X,K,Q,Y=[],$=_.gcs(),Z=_.layer().map().gcs(),J=0;for(u=_.style.get("fillColor"),l=s.isFunction(_.style("fillColor"))?void 0:u(),f=_.style.get("fillOpacity"),h=s.isFunction(_.style("fillOpacity"))?void 0:f(),d=_.style.get("fill"),g=s.isFunction(_.style("fill"))?void 0:d(),k=_.style.get("uniformPolygon"),P=s.isFunction(_.style("uniformPolygon"))?void 0:k(),v=_.style.get("pattern"),null!==(x=s.isFunction(_.style("pattern"))?void 0:v()||null)&&!0!==_._hasPatterns&&(_.renderer().contextRenderer().removeActor(w),w=null,_._init(!0)),D=M.geometryData(),t?(Y=p.items,J=p.numPts):(n=(n=_.style.get("position"))===s.identityFunction?null:n,o=(o=_.style.get("polygon"))===s.identityFunction?null:o,_.data().forEach(function(t,e){var a,s,u,l;if((a=o?o(t,e):t)&&!((s=a.outer||(Array.isArray(a)?a:[])).length<3)){for(u=new Array(3*s.length),V=G=0;V<s.length;V+=1,G+=3)l=n?n(s[V],V,t,e):s[V],u[G]=l.x,u[G+1]=l.y,u[G+2]=0;u={vertices:u,dimensions:3,holes:[]},Q=s,a.inner&&a.inner.forEach(function(r){if(!(r.length<3))for(Q=Q.concat(r),u.holes.push(G/3),V=0;V<r.length;V+=1,G+=3)l=n?n(r[V],V,t,e):r[V],u.vertices[G]=l.x,u.vertices[G+1]=l.y,u.vertices[G+2]=0}),u.vertices=i.transformCoordinates($,Z,u.vertices,u.dimensions),(W={triangles:r(u.vertices,u.holes,u.dimensions),vertices:u.vertices,original:Q,item:t,itemIndex:e}).triangles.length&&(Y.push(W),J+=W.triangles.length)}}),e=s.getGeomBuffer(D,"pos",3*J),(L=D.primitive(0).indices())instanceof Uint16Array&&L.length===J||(L=new Uint16Array(J),D.primitive(0).setIndices(L)),p={items:Y,numPts:J},m=new Float32Array(_.style.get("origin")(Y)),y.setOrigin(m)),a=s.getGeomBuffer(D,"fillColor",3*J),c=s.getGeomBuffer(D,"fillOpacity",J),z=G=0,N=l,j=g,_._hasPatterns&&(A=s.getGeomBuffer(D,"patternFillColor",4*J),E=s.getGeomBuffer(D,"patternStrokeColor",4*J),T=s.getGeomBuffer(D,"patternSymbolProps",4*J),S=s.getGeomBuffer(D,"patternPositionProps",4*J)),U=0;U<Y.length;U+=1)if(H=(R=(I=Y[U]).triangles).length,B=I.vertices,X=I.item,K=I.itemIndex,Q=I.original,F=h,(O=void 0===P?k(X,K):P)&&(void 0===l&&(N=u(B[0],0,X,K)),void 0===h&&(F=f(B[0],0,X,K))),void 0===g&&(j=d(X,K)),j||(F=0),_._hasPatterns&&(void 0===b&&x||void 0===x)&&(b=C(x,v,X,K,B[0])),O&&t&&I.uniform&&I.color&&N.r===I.color.r&&N.g===I.color.g&&N.b===I.color.b&&F===I.opacity)z+=H,G+=3*H;else{for(V=0;V<H;V+=1,z+=1,G+=3)t&&O?(a[G]=N.r,a[G+1]=N.g,a[G+2]=N.b,c[z]=F):(q=3*R[V],t||(e[G]=B[q]-m[0],e[G+1]=B[q+1]-m[1],e[G+2]=B[q+2]-m[2],L[z]=V),O||void 0!==l||(N=u(Q[q],q,X,K)),a[G]=N.r,a[G+1]=N.g,a[G+2]=N.b,!O&&j&&void 0===h&&(F=f(Q[q],q,X,K)),c[z]=F),_._hasPatterns&&(A[4*z]=b[0],A[4*z+1]=b[1],A[4*z+2]=b[2],A[4*z+3]=b[3],E[4*z]=b[4],E[4*z+1]=b[5],E[4*z+2]=b[6],E[4*z+3]=b[7],T[4*z]=b[8],T[4*z+1]=b[9],T[4*z+2]=b[10],T[4*z+3]=b[11],S[4*z]=b[12],S[4*z+1]=b[13],S[4*z+2]=b[14],S[4*z+3]=b[15]);(O||I.uniform)&&(I.uniform=O,I.color=N,I.opacity=F)}t?(M.updateSourceBuffer("fillOpacity"),M.updateSourceBuffer("fillColor"),_._hasPatterns&&(M.updateSourceBuffer("patternFillColor"),M.updateSourceBuffer("patternStrokeColor"),M.updateSourceBuffer("patternSymbolProps"),M.updateSourceBuffer("patternPositionProps"))):(M.modified(),D.boundsDirty(!0),M.boundsDirtyTimestamp().modified())}(!!(_.dataTime().timestamp()<_.buildTime().timestamp()&&p)),_.renderer().contextRenderer().hasActor(w)||(_.renderer().contextRenderer().addActor(w),v=!0),_.buildTime().modified()},this._update=function(t){_.ready&&(t&&t.mayDelay&&v?x=_.layer().map().scheduleAnimationFrame(_._update):(x&&(_.layer().map().scheduleAnimationFrame(_._update,"remove"),x=null),E.call(_),(_.dataTime().timestamp()>=_.buildTime().timestamp()||_.updateTime().timestamp()<=_.timestamp())&&_._build(),_._hasPatterns&&(g.pixelWidth.set(2/_.renderer().width()),g.aspect.set(_.renderer().width()/_.renderer().height()),g.zoom.set(_.renderer().map().zoom()),g.rotationUniform.set(_.renderer().map().rotation())),w.setVisible(_.visible()),w.material().setBinNumber(_.bin()),_.updateTime().modified()))},this._exit=function(){x&&_.layer()&&(_.layer().map().scheduleAnimationFrame(_._update,"remove"),x=null),_.renderer().contextRenderer().removeActor(w),w=null,g={},b()},this._init(t),this};r(a,o),i("webgl","polygon",a),t.exports=a},9304:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(3842),a=n(77),s=n(642),u=16777216,l=function(t){"use strict";if(!(this instanceof l))return new l(t);o.call(this,t);var e=n(5616),r=n(1611),i=n(4084),c=n(8711),f=n(6238),h=n(8961),d=n(3260);i.call(this);var p,m,g,y,v,x,_,b=this,w=this._exit,M=this._update,A={},E=a(),T=a();function S(t){var e=new r.mapper({dynamicDraw:!0});return e.s_modified=e.modified,e.g_timestamp=a(),e.timestamp=e.g_timestamp.timestamp,e.modified=function(){return e.s_modified(),e.g_timestamp.modified(),e},e.s_render=e.render,e.render=t,e}return this.actors=function(){var t=[];return m&&t.push(m),g&&t.push(g),t},this._build=function(){var t,e,n,i,o,a,s,u,l;b.position()&&((_=b._generateQuads()).imgQuads.length&&!m&&(b.visible(!1),t=S(b._renderImageQuads),(m=new r.actor).setMapper(t),e=new r.material,(n=new r.shaderProgram).addVertexAttribute(new r.vertexAttribute("vertexPosition"),r.vertexAttributeKeys.Position),n.addVertexAttribute(new r.vertexAttribute("textureCoord"),r.vertexAttributeKeys.TextureCoordinate),p=new r.modelViewOriginUniform("modelViewMatrix",_.origin),n.addUniform(p),n.addUniform(new r.projectionUniform("projectionMatrix")),n.addUniform(new r.floatUniform("opacity",1)),n.addUniform(new r.floatUniform("zOffset",0)),(l=new r.uniform(r.GL.INT,"sampler2d")).set(0),n.addUniform(l),u=b.renderer()._glContext(),(o=new r.uniform(u.FLOAT_VEC2,"crop")).set([1,1]),n.addUniform(o),(a=new r.uniform(u.FLOAT_VEC4,"cropsource")).set([0,0,0,0]),n.addUniform(a),n.addShader(r.getCachedShader(u.VERTEX_SHADER,u,f)),n.addShader(r.getCachedShader(u.FRAGMENT_SHADER,u,c)),b._hookBuild&&b._hookBuild(n),e.addAttribute(n),e.addAttribute(new r.blend),s=new r.geometryData,y=void 0,(i=new r.sourceDataT2fv).pushBack([0,0,1,0,0,1,1,1]),s.addSource(i),t.setGeometryData(s),m.setMaterial(e),b.renderer().contextRenderer().addActor(m),b.visible(!0)),_.clrQuads.length&&!g&&(b.visible(!1),t=S(b._renderColorQuads),(g=new r.actor).setMapper(t),e=new r.material,(n=new r.shaderProgram).addVertexAttribute(new r.vertexAttribute("vertexPosition"),r.vertexAttributeKeys.Position),x=new r.modelViewOriginUniform("modelViewMatrix",_.origin),n.addUniform(x),n.addUniform(new r.projectionUniform("projectionMatrix")),n.addUniform(new r.floatUniform("opacity",1)),n.addUniform(new r.floatUniform("zOffset",0)),u=b.renderer()._glContext(),n.addUniform(new r.uniform(u.FLOAT_VEC3,"vertexColor")),n.addShader(r.getCachedShader(u.VERTEX_SHADER,u,d)),n.addShader(r.getCachedShader(u.FRAGMENT_SHADER,u,h)),e.addAttribute(n),e.addAttribute(new r.blend),s=new r.geometryData,v=void 0,t.setGeometryData(s),g.setMaterial(e),b.renderer().contextRenderer().addActor(g),b.visible(!0)),p&&p.setOrigin(_.origin),x&&x.setOrigin(_.origin),b._updateTextures(),b.buildTime().modified())},this._updateTextures=function(){e.each(_.imgQuads,function(t,e){var n=e.imageTexture||e.image;if(n)if(n._texture)e.texture=n._texture;else{var i=new r.texture;e.imageTexture?i.setTexture(n):i.setImage(n);var o=b.nearestPixel();if(void 0!==o)if(!0!==o&&s.isNonNullFinite(o))o=b.layer().map().zoom()>=o;o&&i.setNearestPixel(!0),e.texture=n._texture=i}})},this._renderColorQuads=function(t){if(_.clrQuads.length){var n=this;(n.timestamp()>T.timestamp()||b.dataTime().timestamp()>T.timestamp()||t.m_contextChanged||!v||12*_.clrQuads.length>v.length)&&function(t){var n=t.m_context,r=!1;_.clrQuads.length&&((!v||v.length<12*_.clrQuads.length||!A.clrQuadsPosition)&&(A.clrQuadsPosition&&n.deleteBuffer(A.clrQuadsPosition),A.clrQuadsPosition=n.createBuffer(),v=new Float32Array(12*Math.max(128,2*_.clrQuads.length)),r=!0),e.each(_.clrQuads,function(t,e){for(var n=0;n<12;n+=1)v[12*t+n]=e.pos[n]-_.origin[n%3]}),n.bindBuffer(n.ARRAY_BUFFER,A.clrQuadsPosition),r?n.bufferData(n.ARRAY_BUFFER,v,n.DYNAMIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,v)),T.modified()}(t),n.s_render(t,!0);var i,o,a,s=t.m_context;s.bindBuffer(s.ARRAY_BUFFER,A.clrQuadsPosition),e.each(_.clrQuads,function(e,n){n.opacity!==i&&(i=n.opacity,s.uniform1fv(t.m_material.shaderProgram().uniformLocation("opacity"),new Float32Array([i]))),(n.zOffset||0)!==o&&(o=n.zOffset||0,s.uniform1fv(t.m_material.shaderProgram().uniformLocation("zOffset"),new Float32Array([o]))),a&&a.r===n.color.r&&a.g===n.color.g&&a.b===n.color.b||(a=n.color,s.uniform3fv(t.m_material.shaderProgram().uniformLocation("vertexColor"),new Float32Array([a.r,a.g,a.b]))),s.bindBuffer(s.ARRAY_BUFFER,A.clrQuadsPosition),s.vertexAttribPointer(r.vertexAttributeKeys.Position,3,s.FLOAT,!1,12,12*e*4),s.enableVertexAttribArray(r.vertexAttributeKeys.Position),s.drawArrays(s.TRIANGLE_STRIP,0,4)}),s.bindBuffer(s.ARRAY_BUFFER,null),n.undoBindVertexData(t)}},this._renderImageQuads=function(t){if(_.imgQuads.length){var n=this;(n.timestamp()>E.timestamp()||b.dataTime().timestamp()>E.timestamp()||t.m_contextChanged||!y||12*_.imgQuads.length>y.length)&&function(t){var n=t.m_context,r=!1;_.imgQuads.length&&((!y||y.length<12*_.imgQuads.length||!A.imgQuadsPosition)&&(A.imgQuadsPosition&&n.deleteBuffer(A.imgQuadsPosition),A.imgQuadsPosition=n.createBuffer(),y=new Float32Array(12*Math.max(128,2*_.imgQuads.length)),r=!0),e.each(_.imgQuads,function(t,e){for(var n=0;n<12;n+=1)y[12*t+n]=e.pos[n]-_.origin[n%3]}),n.bindBuffer(n.ARRAY_BUFFER,A.imgQuadsPosition),r?n.bufferData(n.ARRAY_BUFFER,y,n.DYNAMIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,y)),E.modified()}(t),n.s_render(t,!0);var i,o,a,l,c,f,h,d,p=t.m_context,m={x:1,y:1},g={x0:0,y0:0,x1:1,y1:1},v=b.nearestPixel();if(void 0!==v){if(!0!==v&&s.isNonNullFinite(v)){var x=b.layer().map().zoom();v=x>=v}_.imgQuads.forEach(function(e){if((e.image||e.imageTexture)&&e.texture&&e.texture.nearestPixel()!==v&&e.texture.textureHandle()){t.m_context.bindTexture(r.GL.TEXTURE_2D,e.texture.textureHandle()),t.m_context.texParameteri(r.GL.TEXTURE_2D,r.GL.TEXTURE_MIN_FILTER,v?r.GL.NEAREST:r.GL.LINEAR),t.m_context.texParameteri(r.GL.TEXTURE_2D,r.GL.TEXTURE_MAG_FILTER,v?r.GL.NEAREST:r.GL.LINEAR),t.m_context.bindTexture(r.GL.TEXTURE_2D,null);var n=e.texture.modified;e.texture.modified=function(){},e.texture.setNearestPixel(v),e.texture.modified=n}})}b._hookRenderImageQuads&&b._hookRenderImageQuads(t,_.imgQuads),p.bindBuffer(p.ARRAY_BUFFER,A.imgQuadsPosition),e.each(_.imgQuads,function(e,n){(n.image||n.imageTexture)&&(n.texture.bind(t),n.image&&(c=n.image.width,f=n.image.height),n.imageTexture&&(c=n.imageTexture.width,f=n.imageTexture.height),(n.image||n.imageTexture)&&c*f>u&&(u=c*f,p.getError()===p.OUT_OF_MEMORY&&console.log("Insufficient GPU memory for texture")),n.opacity!==i&&(i=n.opacity,p.uniform1fv(t.m_material.shaderProgram().uniformLocation("opacity"),new Float32Array([i]))),(n.zOffset||0)!==o&&(o=n.zOffset||0,p.uniform1fv(t.m_material.shaderProgram().uniformLocation("zOffset"),new Float32Array([o]))),a=n.crop||{x:1,y:1},m&&a.x===m.x&&a.y===m.y||(m=a,p.uniform2fv(t.m_material.shaderProgram().uniformLocation("crop"),new Float32Array([void 0===m.x?1:m.x,void 0===m.y?1:m.y]))),l=n.crop||{left:0,top:0,right:c,bottom:f},g&&l.left===g.left&&l.top===g.top&&l.right===g.right&&l.bottom===g.bottom&&h===c&&d===f||(g=l,h=c,d=f,p.uniform4fv(t.m_material.shaderProgram().uniformLocation("cropsource"),new Float32Array([g.left/c,g.top/f,g.right/c,g.bottom/f]))),p.bindBuffer(p.ARRAY_BUFFER,A.imgQuadsPosition),p.vertexAttribPointer(r.vertexAttributeKeys.Position,3,p.FLOAT,!1,12,12*e*4),p.enableVertexAttribArray(r.vertexAttributeKeys.Position),p.drawArrays(p.TRIANGLE_STRIP,0,4),n.texture.undoBind(t))}),p.bindBuffer(p.ARRAY_BUFFER,null),n.undoBindVertexData(t)}},this._update=function(){M.call(b),(b.buildTime().timestamp()<=b.dataTime().timestamp()||b.updateTime().timestamp()<b.timestamp())&&b._build(),g&&(g.setVisible(b.visible()),g.material().setBinNumber(b.bin())),m&&(m.setVisible(b.visible()),m.material().setBinNumber(b.bin())),b.updateTime().modified()},this._cleanup=function(){m&&(b.renderer().contextRenderer().removeActor(m),m=null),g&&(b.renderer().contextRenderer().removeActor(g),g=null),y=void 0,v=void 0,A&&Object.keys(A).forEach(function(t){delete A[t]}),_&&_.imgQuads&&(_.imgQuads.forEach(function(t){t.texture&&(delete t.texture,t.image&&t.image._texture&&delete t.image._texture),t.imageTexture&&delete t.imageTexture._texture}),b._updateTextures()),b.modified()},this.setShader=function(t,e){switch(t){case"image_vertex":f=e;break;case"image_fragment":c=e;break;case"color_vertex":d=e;break;case"color_fragment":h=e;break;default:return}return b},this._exit=function(){b._cleanup(),w.call(b)},b._init(t),this};r(l,o);var c={};c[o.capabilities.color]=!0,c[o.capabilities.image]=!0,c[o.capabilities.imageCrop]=!0,c[o.capabilities.imageFixedScale]=!1,c[o.capabilities.imageFull]=!0,c[o.capabilities.canvas]=!1,c[o.capabilities.video]=!1,c[o.capabilities.texture]=!0,i("webgl","quad",l,c),t.exports=l},1474:function(t,e,n){var r=n(1098).registerLayerAdjustment,i=n(9264),o=function(){"use strict";var t,e=n(6409),r=this,o=this._init,a=this._exit,s=this._update,u=this.visible,l=this.zIndex,c=0,f=[];this._drawTile=function(e){if(t){var n,o,a=r._tileBounds(e),s=e.index.level||0,u=r._tileOffset(s),l=r.tileCropFromBounds(e),h={},d=r.renderer().contextRenderer().m_depthBits;l&&(h.crop={x:l.x/r._options.tileWidth,y:l.y/r._options.tileHeight}),h.ul=r.fromLocal(r.fromLevel({x:a.left-u.x,y:a.top-u.y},s),0),h.ll=r.fromLocal(r.fromLevel({x:a.left-u.x,y:a.bottom-u.y},s),0),h.ur=r.fromLocal(r.fromLevel({x:a.right-u.x,y:a.top-u.y},s),0),h.lr=r.fromLocal(r.fromLevel({x:a.right-u.x,y:a.bottom-u.y},s),0),h.ul.z=h.ll.z=h.ur.z=h.lr.z=0,n=r._options.keepLower?r._options.maxLevel-s+1:1,(o=(o=r.map().listSceneObjects().filter(function(t){return t instanceof i})).slice(o.indexOf(r)+1)).forEach(function(t){n+=t._options.keepLower?t._options.maxLevel-t._options.minLevel+1:1}),h.zOffset=n*Math.pow(2,-d)*i._zOffsetMultiple,c+=1,h.id=c,e.quadId=h.id,h.image=e.image,f.push(h),t.data(f),t._update(),r.draw()}},this._remove=function(e){if(void 0!==e.quadId&&t){for(var n=0;n<f.length;n+=1)if(f[n].id===e.quadId){f.splice(n,1);break}t.data(f),t._update(),r.draw()}},this.visible=function(e){return void 0===e?u():(r.visible()!==e&&(u(e),t&&t.visible(t.visible(void 0,!0),!0)),r)},this.zIndex=function(t,e){return void 0!==t&&r._clearQuads(),l.apply(r,arguments)},this._clearQuads=function(n){(!n||n.layer&&n.layer instanceof i&&n.layer.autoshareRenderer()&&(n.event!==e.layerAdd&&n.event!==e.layerRemove||!r.map().layers().every(function(t){return t===n.layer||n.layer.zIndex()>t.zIndex()})))&&(r.clear(),t&&t.modified(),n&&r.draw())},this._update=function(e){return s.call(r,e),t&&t.nearestPixel&&t.nearestPixel(r.nearestPixel()),r._addBaseQuadToTiles(t,f),r},this._cleanup=function(){var t;if(r.cache&&r.cache._cache){for(var e in r.cache._cache)(t=r.cache._cache[e])._image&&t._image._texture&&delete t._image._texture;r.cache.clear()}r.clear()},this._exit=function(){var n=r.map();n.geoOff(e.layerAdd,r._clearQuads),n.geoOff(e.layerRemove,r._clearQuads),r._cleanup(),r.deleteFeature(t),t=null,f=[],a.apply(r,arguments)},this._init=function(){o.apply(r,arguments),(t=r.createFeature("quad",{previewColor:r._options.previewColor,previewImage:r._options.previewImage})).geoTrigger=void 0,t.gcs(r._options.gcs||r.map().gcs()),t.data(f),t._update();var n=r.map();n.geoOn(e.layerAdd,r._clearQuads),n.geoOn(e.layerRemove,r._clearQuads),r.geoOn(e.unhidden,function(){r.map().scheduleAnimationFrame(function(){r._clearQuads(),r.map().draw()})})},this._getSubLayer=function(){},this._updateSubLayers=void 0};i._zOffsetMultiple=2,r("webgl","tile",o),t.exports=o},536:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(338),a=function(t){"use strict";return this instanceof a?(t=t||{},o.call(this,t),n(4084).call(this),this._init(t),this):new a(t)};r(a,o),i("webgl","track",a),t.exports=a},7945:function(t,e,n){var r,i=n(4626),o=n(1098).registerRenderer,a=n(2274),s=function(t){"use strict";if(!(this instanceof s))return new s(t);t=t||{},a.call(this,t);var e,r=n(5616),i=n(1611),o=n(3503),u=n(642),l=n(6409),c=this,f=null,h=null,d=!1,p=this._init,m=this._exit;return this.contextRenderer=function(){return f},this.api=function(){return s.apiname},this._init=function(){if(c.initialized())return c;p.call(c);var e=t.canvas||r(document.createElement("canvas"));if(e.addClass("webgl-canvas"),r(c.layer().node().get(0)).append(e),window.overrideContextAttributes){var n=e.get(0),o=n.getContext;n.getContext=function(t,e){if(e=e||{},window.overrideContextAttributes)for(var r in window.overrideContextAttributes)window.overrideContextAttributes.hasOwnProperty(r)&&(e[r]=window.overrideContextAttributes[r]);return o.call(n,t,e)}}(h=i.viewer(e.get(0),t.options)).init(),(f=h.renderWindow().activeRenderer()).setResetScene(!1),e.get(0).addEventListener("webglcontextlost",function(t){return t.preventDefault()},!1),e.get(0).addEventListener("webglcontextrestored",function(){return h.renderWindow()._init()},!1),h.renderWindow().renderers().length>0&&f.setLayer(h.renderWindow().renderers().length),c.canvas(e);var a=c.layer().map().size();return c._resize(0,0,a.width,a.height),c},this._resize=function(t,e,n,r){var i=h.renderWindow();return t===i.windowPosition[0]&&e===i.windowPosition[1]&&n===c.width()&&r===c.height()||(c._setWidthHeight(n,r),c.canvas().attr("width",n),c.canvas().attr("height",r),i.positionAndResize(t,e,n,r),d=!0,c._render()),c},this._render=function(){return c.layer().map().scheduleAnimationFrame(c._renderFrame,!0),c},this._renderFrame=function(){h&&(d&&(d=!1,c._updateRendererCamera()),h.render())},this._glContext=function(){return h&&h.renderWindow()?h.renderWindow().context():i.GL},this._exit=function(){if(c.layer().map().scheduleAnimationFrame(c._renderFrame,"remove"),c.canvas().remove(),h){var t=new i.renderState;t.m_renderer=h,t.m_context=c._glContext(),h.exit(t);var e=c._glContext();e!==i.GL&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext&&e.getExtension("WEBGL_lose_context").loseContext()}i.clearCachedShaders(i.GL),h=null,m()},this._updateRendererCamera=function(){var t=h.renderWindow(),n=c.layer().map(),r=n.camera(),i=n.rotation()||0,a=r.view,s=r.projectionMatrix;if(s[15])s=o.copy(u.mat4AsArray(),s),s=o.scale(s,s,[1,1,-.5]),s=o.translate(s,s,[0,0,r.clipbounds.far]);else{var l=r.clipbounds.near,f=r.clipbounds.far;s=o.copy(u.mat4AsArray(),s),s=o.scale(s,s,[1/l,1/l,-1/f])}var d=Math.PI/2,p=i%d,m=Math.min(Math.abs(p),Math.abs(p-d))<1e-5;t.renderers().forEach(function(t){var i=t.camera();if(!u.compareArrays(a,i.viewMatrix())||!u.compareArrays(s,i.projectionMatrix())||e!==n.zoom()){e=n.zoom(),i.setViewMatrix(a,!0),i.setProjectionMatrix(s);var o=r.viewport;s[1]||s[2]||s[3]||s[4]||s[6]||s[7]||s[8]||s[9]||s[11]||1!==s[15]||!m||o.left&&o.left%1||o.top&&o.top%1||parseFloat(e.toFixed(6))!==parseFloat(e.toFixed(0))?i.viewAlignment=function(){return null}:i.viewAlignment=function(){var t={roundx:2/o.width,roundy:2/o.height};return t.dx=o.width%2?.5*t.roundx:0,t.dy=o.height%2?.5*t.roundy:0,t}}})},c.layer().geoOn(l.pan,function(t){d=!0}),c.layer().geoOn(l.parallelprojection,function(t){var e=c.contextRenderer(),n=c.layer();if(t.geo&&t.geo._triggeredBy!==n){if(!e||!e.camera())return void console.log("Parallel projection event triggered on unconnected VGL renderer.");e.camera().setEnableParallelProjection(t.parallelProjection),d=!0}}),this};s.apiname="webgl",i(s,a),o("webgl",s),o("vgl",s),s.supported=function(){if(void 0===r){var t,e;try{(e=(t=document.createElement("canvas")).getContext("webgl")||t.getContext("experimental-webgl")).getSupportedExtensions().indexOf("WEBGL_debug_renderer_info")>=0&&(s._unmaskedRenderer=e.getParameter(e.getExtension("WEBGL_debug_renderer_info").UNMASKED_RENDERER_WEBGL)),s._maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),s._maxPointSize=e.getParameter(e.ALIASED_POINT_SIZE_RANGE)[1],r=!0}catch(t){console.warn("No webGL support"),r=!1}t=void 0,e=void 0}return r},s.fallback=function(){return null},t.exports=s},632:function(t,e,n){"use strict";var r=n(4942),i=n.n(r),o=n(278),a=n.n(o),s=n(3021),u=n.n(s),l=new URL(n(3158),n.b),c=new URL(n(5245),n.b),f=new URL(n(8546),n.b),h=new URL(n(9803),n.b),d=new URL(n(9463),n.b),p=a()(i()),m=u()(l),g=u()(c),y=u()(f),v=u()(h),x=u()(d);p.push([t.id,'.geojs-map{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;overflow:hidden}.geojs-map .geo-attribution{position:absolute;right:0;bottom:0;padding-right:5px;cursor:auto;font:11px/1.5 "Helvetica Neue",Arial,Helvetica,sans-serif;z-index:1001;background:rgba(255,255,255,0.7);clear:both;display:block;pointer-events:auto}.geojs-map .geo-attribution .geo-attribution-layer{padding-left:5px}.geojs-map .canvas-canvas{display:block;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}.geojs-map .webgl-canvas{display:block}.geojs-map .geojs-layer{position:absolute;width:100%;height:100%;left:0;top:0;pointer-events:none}.geojs-map .geojs-layer.active:not(.hidden) > *{pointer-events:auto}.geojs-map .geojs-layer.hidden{display:none}.geojs-map .geojs-layer.hidden[renderer="webgl"]{display:inherit}.geojs-map .geo-tile-layer{-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0;line-height:0;font-size:0}.geojs-map.annotation-input{cursor:crosshair}.geojs-map.annotation-input.annotation-intersect{cursor:url('+m+") 12 12,crosshair}.geojs-map.annotation-input.annotation-difference{cursor:url("+g+") 12 12,crosshair}.geojs-map.annotation-input.annotation-union{cursor:url("+y+") 12 12,crosshair}.geojs-map.annotation-input.annotation-xor{cursor:url("+v+") 12 12,crosshair}.geojs-map.annotation-input.annotation-cut{cursor:url("+x+") 12 12,crosshair}.geojs-map.annotation-cursor{cursor:crosshair}.geojs-map.annotation-cursor.annotation-intersect{cursor:url("+m+") 12 12,crosshair}.geojs-map.annotation-cursor.annotation-difference{cursor:url("+g+") 12 12,crosshair}.geojs-map.annotation-cursor.annotation-union{cursor:url("+y+") 12 12,crosshair}.geojs-map.annotation-cursor.annotation-xor{cursor:url("+v+') 12 12,crosshair}.geojs-map.highlight-focus:after{content:"";display:block;position:absolute;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;left:0;top:0;right:0;bottom:0;border:3px solid Highlight;opacity:1;-ms-filter:none;filter:none;-webkit-transition:opacity 0s;-moz-transition:opacity 0s;-o-transition:opacity 0s;-ms-transition:opacity 0s;transition:opacity 0s;visibility:hidden}.geojs-map.highlight-focus:focus:after{visibility:visible;-webkit-transition:opacity 2.5s ease-in;-moz-transition:opacity 2.5s ease-in;-o-transition:opacity 2.5s ease-in;-ms-transition:opacity 2.5s ease-in;transition:opacity 2.5s ease-in;opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}.geo-tile-container{position:absolute}.geo-tile-container.crop{overflow:hidden}',"",{version:3,sources:["webpack://./main.styl","webpack://./../node_modules/nib/lib/nib/vendor.styl","webpack://./../node_modules/nib/lib/nib/overflow.styl","webpack://./../node_modules/nib/lib/nib/flex.styl","webpack://./../node_modules/nib/lib/nib/border.styl"],names:[],mappings:"AAEA,WACE,iBAAS,CCwCO,wBAAG,CAAH,qBAAG,CAAH,oBAAG,CARN,gBAAG,CChBd,eAAU,CFZZ,4BACE,iBAAS,CACT,OAAM,CACN,QAAO,CACP,iBAAc,CC4ed,WAAO,CD1eP,yDAA8B,CAC9B,YAAQ,CC6dR,gCAAW,CD3dX,UAAM,CGMN,aAAS,CHJT,mBAAe,CAEf,mDACE,gBAAa,CAEjB,0BGDE,aAAS,CFqBK,4BAAG,CAAH,yBAAG,CAAH,uBAAG,CAAH,wBAAG,CARN,oBAAG,CDThB,yBGJE,aAAS,CHOX,wBACE,iBAAS,CACT,UAAM,CACN,WAAO,CACP,MAAK,CACL,KAAI,CACJ,mBAAe,CAEb,gDACE,mBAAe,CACnB,+BGjBA,YAAS,CHmBT,iDGnBA,eAAS,CHsBX,2BCDgB,4BAAG,CAAH,yBAAG,CAAH,uBAAG,CAAH,wBAAG,CARN,oBAAG,CDWd,aAAY,CACZ,WAAU,CAEZ,4BCscE,gBAAO,CDpcP,iDCocA,8DAAO,CDlcP,kDCkcA,8DAAO,CDhcP,6CCgcA,8DAAO,CD9bP,2CC8bA,8DAAO,CD5bP,2CC4bA,8DAAO,CDzbT,6BCybE,gBAAO,CDvbP,kDCubA,8DAAO,CDrbP,mDCqbA,8DAAO,CDnbP,8CCmbA,8DAAO,CDjbP,4CCibA,8DAAO,CD7aP,iCACE,UAAQ,CGrDV,aAAS,CHuDP,iBAAS,CClCG,6BAAG,CAAH,0BAAG,CARN,qBAAG,CD4CZ,MAAK,CACL,KAAI,CACJ,OAAM,CACN,QAAO,CIzET,0BAAQ,CH4PV,SAAS,CAQH,eAAY,CACZ,WAAQ,CArOE,6BAAG,CAAH,0BAAG,CAAH,wBAAG,CAAH,yBAAG,CARN,qBAAG,CDuDZ,iBAAW,CACb,uCACE,kBAAW,CCjDC,uCAAG,CAAH,oCAAG,CAAH,kCAAG,CAAH,mCAAG,CARN,+BAAG,CAoOhB,SAAS,CAWH,+DAAyE,CACzE,uBAAiC,CDnLzC,oBACE,iBAAS,CACT,yBE7EE,eAAU",sourcesContent:['@import \'~nib/index.styl\'\n\n.geojs-map\n  position relative\n  user-select none\n  overflow hidden\n\n  .geo-attribution\n    position absolute\n    right 0\n    bottom 0\n    padding-right 5px\n    cursor auto\n    font 11px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif\n    z-index 1001\n    background rgba(255,255,255,0.7)\n    clear both\n    display block\n    pointer-events auto\n\n    .geo-attribution-layer\n      padding-left 5px\n\n  .canvas-canvas\n    display block\n    transform-origin 0px 0px\n  .webgl-canvas\n    display block\n\n  .geojs-layer\n    position absolute\n    width 100%\n    height 100%\n    left 0\n    top 0\n    pointer-events none\n    &.active:not(.hidden)\n      > *\n        pointer-events auto\n    &.hidden\n      display none\n    &.hidden[renderer="webgl"]\n      display inherit\n\n  .geo-tile-layer\n    transform-origin 0px 0px\n    line-height 0\n    font-size 0\n\n  &.annotation-input\n    cursor crosshair\n    &.annotation-intersect\n      cursor embedurl("./css/cursor-crosshair-intersect.svg") 12 12,crosshair\n    &.annotation-difference\n      cursor embedurl("./css/cursor-crosshair-difference.svg") 12 12,crosshair\n    &.annotation-union\n      cursor embedurl("./css/cursor-crosshair-union.svg") 12 12,crosshair\n    &.annotation-xor\n      cursor embedurl("./css/cursor-crosshair-xor.svg") 12 12,crosshair\n    &.annotation-cut\n      cursor embedurl("./css/cursor-crosshair-cut.svg") 12 12,crosshair\n\n  &.annotation-cursor\n    cursor crosshair\n    &.annotation-intersect\n      cursor embedurl("./css/cursor-crosshair-intersect.svg") 12 12,crosshair\n    &.annotation-difference\n      cursor embedurl("./css/cursor-crosshair-difference.svg") 12 12,crosshair\n    &.annotation-union\n      cursor embedurl("./css/cursor-crosshair-union.svg") 12 12,crosshair\n    &.annotation-xor\n      cursor embedurl("./css/cursor-crosshair-xor.svg") 12 12,crosshair\n\n  &.highlight-focus\n    &:after\n      content ""\n      display block\n      position absolute\n      box-sizing border-box\n      left 0px\n      top 0px\n      right 0px\n      bottom 0px\n      // Highlight is technically a css2 color.  We may need to specify it\n      // explicitly.  #3B66A6 seems close\n      border 3px solid Highlight\n      opacity 1\n      transition opacity 0s\n      visibility hidden\n    &:focus:after\n      visibility visible\n      transition opacity 2.5s ease-in\n      opacity 0\n\n.geo-tile-container\n  position absolute\n  &.crop\n    overflow hidden\n',"use('../nodes/vendor-helpers.js')\n@import 'config'\n\n/*\n * Alias \"nowrap\" as \"no-wrap\".\n */\n\nno-wrap = unquote('nowrap')\n\n/*\n * Helper to find out if a given value is a width\n */\n\nis-width(val)\n  if auto == val\n    return true\n  else if val && 'unit' == type(val)\n    // Stylus does not short circuit so we need to perform this as a distinct\n    // operation to prevent errors\n    return '' != unit(val)\n  return false\n\n/*\n * Vendor support for the given prop / arguments, optionally specifying the\n * only prefixes to utilize, or those which should be ignored.\n */\n\nvendor(prop, args, only = null, ignore = null, vendor-property = true)\n  need_normalize = !vendor-property or prop in ('transition' 'transition-property' 'border-image' 'border-image-slice')\n  for prefix in vendor-prefixes\n    unless (only and !(prefix in only)) or (ignore and prefix in ignore)\n      if official == prefix\n        if need_normalize\n          {prop}: normalize(prop,('%s' % args))\n        else\n          {prop}: args\n      else\n        newprop = prop\n        newprop = '-' + prefix + '-' + prop if vendor-property\n\n        if need_normalize\n          {newprop}: normalize(prop,('%s' % args),prefix)\n        else\n          {newprop}: args\n/*\n * Vendorize the given value.\n */\n\nvendor-value(arg, only = null, ignore = null)\n  prop = current-property[0]\n  for prefix in vendor-prefixes\n    unless (only and !(prefix in only)) or (ignore and prefix in ignore) or official == prefix\n      add-property(prop, '-%s-%s' % (prefix arg))\n  arg\n\n/*\n * Vendor \"box-shadow\" support.\n */\n\nbox-shadow()\n  vendor('box-shadow', arguments, only: webkit official)\n\n/*\n * Vendor \"user-select\" support.\n */\n\nuser-select()\n  vendor('user-select', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"column-count\" support.\n */\n\ncolumn-count()\n  vendor('column-count', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-gap\" support.\n */\n\ncolumn-gap()\n  vendor('column-gap', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-rule\" support.\n */\n\ncolumn-rule()\n  vendor('column-rule', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-rule-color\" support.\n */\n\ncolumn-rule-color()\n  vendor('column-rule-color', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-rule-width\" support.\n */\n\ncolumn-rule-width()\n  vendor('column-rule-width', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-rule-style\" support.\n */\n\ncolumn-rule-style()\n  vendor('column-rule-style', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-width\" support.\n */\n\ncolumn-width()\n  vendor('column-width', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-span\" support.\n */\n\ncolumn-span()\n  vendor('column-span', arguments, only: webkit official)\n\n/*\n * Vendor \"column-fill\" support.\n */\n\ncolumn-fill()\n  vendor('column-fill', arguments, only: moz official)\n\n/*\n * Legacy syntax support for background-clip and background-origin\n */\n\nlegacy-bg-values(property, args)\n  legacy_args = ()\n  importance = unquote('')\n  for subargs in args\n    for arg in subargs\n      if arg in (border-box padding-box content-box)\n        arg = unquote('border')  if arg == border-box\n        arg = unquote('padding') if arg == padding-box\n        arg = unquote('content') if arg == content-box\n      if arg != '!important'\n        push(legacy_args,arg)\n      else\n        importance = !important\n  vendor(property, unquote(join(', ',legacy_args)) importance, only: moz webkit)\n\n/*\n * Vendor \"background-clip\" support.\n */\n\nbackground-clip()\n  if arguments[0] == text\n    vendor('background-clip', arguments, only: webkit)\n  else\n    legacy-bg-values('background-clip', arguments)\n    background-clip: arguments\n\n/*\n * Vendor \"background-origin\" support.\n */\n\nbackground-origin()\n  legacy-bg-values('background-origin', arguments)\n  background-origin: arguments\n\n/*\n * Vendor \"transform\" support.\n */\n\ntransform()\n  vendor('transform', arguments)\n\n/*\n * Vendor \"transform-origin\" support.\n */\ntransform-origin()\n    vendor('transform-origin', arguments)\n\n/*\n * Vendor \"transform-style\" support.\n */\n\ntransform-style()\n  vendor('transform-style', arguments)\n\n/*\n * Vendor \"border-image\" support.\n */\n\nborder-image()\n  vendor('border-image', arguments, only: webkit moz o official)\n\n/*\n * Vendor \"transition\" support.\n */\n\ntransition()\n  vendor('transition', arguments)\n\n/*\n * Vendor \"transition-property\" support.\n */\n\ntransition-property()\n  vendor('transition-property', arguments)\n\n/*\n * Vendor \"transition-duration\" support.\n */\n\ntransition-duration()\n  vendor('transition-duration', arguments)\n\n/*\n * Vendor \"transition-timing-function\" support.\n */\n\ntransition-timing-function()\n  vendor('transition-timing-function', arguments)\n\n/*\n * Vendor \"transition-delay\" support.\n */\n\ntransition-delay()\n  vendor('transition-delay', arguments)\n\n/*\n * Vendor \"backface-visibility\" support.\n */\n\nbackface-visibility()\n  vendor('backface-visibility', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"perspective\" support.\n */\n\nperspective()\n  if mixin\n    vendor('perspective', arguments, only: webkit moz ms official)\n  else\n    'perspective(%s)' % arguments\n\n/*\n * Vendor \"perspective-origin\" support.\n */\n\nperspective-origin()\n  vendor('perspective-origin', arguments, only: webkit moz ms official)\n\n/*\n * Opacity with conditional IE support.\n */\n\nopacity(n, args...)\n  opacity: n args\n  if support-for-ie\n    if n == inherit or n == initial\n      -ms-filter: n args\n      filter: n args\n    else\n      val = round(n * 100)\n      if val == 100\n        -ms-filter: none args\n        filter: none args\n      else\n        -ms-filter: '\"progid:DXImageTransform.Microsoft.Alpha(Opacity=%s)\"' % val args\n        filter: 'alpha(opacity=%s)' % val args\n\n/*\n * Vendor \"text-size-adjust\"\n */\n\ntext-size-adjust()\n  vendor('text-size-adjust', arguments)\n\n/*\n * Alias the \"white-space\" property.\n */\n\nwhitespace()\n  white-space: arguments\n\n/*\n * Vendor \"box-sizing\" support.\n */\n\nbox-sizing()\n  vendor('box-sizing', arguments, only: webkit moz official)\n\n/*\n * Vendor \"box-orient\" support.\n */\n\nbox-orient()\n  vendor('box-orient', arguments, only: webkit moz official)\n\n/*\n * Vendor \"box-flex-group\" support.\n */\n\nbox-flex-group()\n  vendor('box-flex-group', arguments, only: webkit moz official)\n\n/*\n * Vendor \"box-ordinal-group\" support.\n */\n\nbox-ordinal-group()\n  vendor('box-ordinal-group', arguments, only: webkit moz ms official)\n\n\n/*\n * Vendor \"box-align\" support.\n */\n\nbox-align()\n  vendor('box-align', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"box-pack\" support.\n */\n\nbox-pack()\n  vendor('box-pack', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"box-direction\" support.\n */\n\nbox-direction()\n  vendor('box-direction', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"animation\" support.\n */\n\nanimation()\n  vendor('animation', arguments)\n\n\n/*\n * Vendor \"animation-name\" support.\n */\n\nanimation-name()\n  vendor('animation-name', arguments)\n\n/*\n * Vendor \"animation-duration\" support.\n */\n\nanimation-duration()\n  vendor('animation-duration', arguments)\n\n/*\n * Vendor \"animation-delay\" support.\n */\n\nanimation-delay()\n  vendor('animation-delay', arguments)\n\n/*\n * Vendor \"animation-direction\" support.\n */\n\nanimation-direction()\n  vendor('animation-direction', arguments)\n\n/*\n * Vendor \"animation-iteration-count\" support.\n */\n\nanimation-iteration-count()\n  vendor('animation-iteration-count', arguments)\n\n/*\n * Vendor \"animation-timing-function\" support.\n */\n\nanimation-timing-function()\n  vendor('animation-timing-function', arguments)\n\n/*\n * Vendor \"animation-play-state\" support.\n */\n\nanimation-play-state()\n  vendor('animation-play-state', arguments)\n\n/*\n * Vendor \"animation-fill-mode\" support.\n */\n\nanimation-fill-mode()\n  vendor('animation-fill-mode', arguments)\n\n/*\n * Vendor \"hyphens\" support.\n */\n\nhyphens()\n  vendor('hyphens', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"appearance\" support.\n */\n\nappearance()\n  vendor('appearance', arguments, only: webkit moz official)\n\n/*\n * Vendor \"tab-size\" support.\n */\n\ntab-size()\n  vendor('tab-size', arguments, only: moz o official)\n\n/*\n * Vendor \"overflow-scrolling\" support.\n */\n\noverflow-scrolling()\n  vendor('overflow-scrolling', arguments, only: webkit official)\n\n/*\n * Vendor \"text-overflow\" support, , -o- for opera 9.* - 10.*\n */\n\ntext-overflow()\n  vendor('text-overflow', arguments, only: official o)\n\n/*\n * Vendor \"text-size-adjust\" support.\n */\ntext-size-adjust()\n  vendor('text-size-adjust', arguments, only: official webkit ms)\n\n/*\n * Vendor \"font-smoothing\" support, webkit only.\n */\nfont-smoothing()\n  vendor('font-smoothing', arguments, only: webkit)\n\n\n/**\n * Vendor input-placeholder/placeholder support.\n *\n * Examples:\n *    // Default syntax\n *    body\n *      placeholder(color #333, font-weight normal)\n *\n *    // The comma is important\n *    .placeholder-red\n *      placeholder(color red,)\n *\n *    // We can pass a function\n *    green-placeholder()\n *      color green\n *    .placeholder-green\n *      placeholder(green-placeholder)\n *\n *    // We can pass a hash\n *    textarea\n *      placeholder((font-style italic) (font-weight bold) (padding '4px 10px'))\n */\nplaceholder()\n  for v in ':-webkit-input' '-moz' ':-moz' '-ms-input'\n    &:{v}-placeholder\n      for pair in arguments\n        if typeof(pair) == 'function'\n          pair()\n        else if pair is not null && pair[0] is not null\n          {pair[0]}: type(pair[1]) == 'string' ? s(pair[1]) : pair[1]\ninput-placeholder = placeholder\n\n/*\n * Vendor background support (gradients).\n */\n\nbackground()\n  if match('-gradient\\(', ''+arguments)\n    vendor('background', arguments, vendor-property: false)\n  else\n    background arguments\n\nbackground-image()\n  if match('-gradient\\(', ''+arguments)\n    vendor('background-image', arguments, vendor-property: false)\n  else\n    background-image arguments\n\ncursor()\n  if match('-gradient\\(', ''+arguments)\n    vendor('cursor', arguments, vendor-property: false)\n  else\n    cursor arguments\n\nlist-style()\n  if match('-gradient\\(', ''+arguments)\n    vendor('list-style', arguments, vendor-property: false)\n  else\n    list-style arguments\n\nlist-style-image()\n  if match('-gradient\\(', ''+arguments)\n    vendor('list-style-image', arguments, vendor-property: false)\n  else\n    list-style-image arguments\n","/*\n * Overflow utility. Maps to regular overflow, and adds an ellipsis value.\n *\n * Synopsis:\n *\n *   overflow: <type>\n *\n * Examples:\n *\n *     overflow: auto\n *     overflow: hidden\n *     overflow: ellipsis\n *\n */\n\noverflow()\n  if arguments[0] == ellipsis\n    ellipsis()\n  else\n    overflow: arguments\n","/*\n * Vendor \"display: flex\" support with fallback to obsolete versions.\n */\n\nflex-version ?= box flex\n\n//\n// 1. Display values\n//    - http://www.w3.org/TR/css3-flexbox/#flex-containers\n//\ndisplay(type, args...)\n  if flex == type || inline-flex == type\n    if box in flex-version\n      if flex == type\n        display: -ms-flexbox args\n        display: vendor-value(box args, only: moz webkit)\n      else\n        display: -ms-inline-flexbox args\n        display: vendor-value(inline-box args, only: moz webkit)\n    if flex in flex-version\n      display: vendor-value(arguments, only: webkit official) // overwrites old webkit\n  else\n    display: arguments\n\n/*\n * New syntax for browsers like Google Chrome.\n * Plus a translation to the old syntax, if possible.\n */\n\n\n//\n// 5. Ordering and Orientation\n//    - http://www.w3.org/TR/css3-flexbox/#ordering-and-orientation\n//\n-flex-obsolete-direction(direction)\n  if box in flex-version\n    if row-reverse == direction || column-reverse == direction\n      vendor('box-direction', reverse, ignore: ms official)\n\n    if row == direction || row-reverse == direction\n      vendor('box-orient', horizontal, ignore: ms official)\n    else if column == direction || column-reverse == direction\n      vendor('box-orient', vertical, ignore: ms official)\n\n-flex-obsolete-wrap(value)\n  if box in flex-version\n    // WARN: wrap-reverse does not have a box equivalent. This will render in different manners\n    //    on box vs. flex values.\n    if 'wrap' == value || wrap-reverse == value\n      vendor('box-lines', multiple, ignore: ms official)\n    else if nowrap == value\n      vendor('box-lines', single, ignore: ms official)\n\nflex-direction(direction)\n  // obsolete\n  -flex-obsolete-direction(direction)\n\n  // new\n  if flex in flex-version\n    vendor('flex-direction', arguments, only: webkit ms official)\n\nflex-wrap(value)\n  // obsolete\n  -flex-obsolete-wrap(value)\n\n  if flex in flex-version\n    vendor('flex-wrap', arguments, only: webkit ms official)\n\nflex-flow()\n  // obsolete\n  -flex-obsolete-direction(arguments[0])\n  -flex-obsolete-direction(arguments[1])\n  -flex-obsolete-wrap(arguments[0])\n  -flex-obsolete-wrap(arguments[1])\n\n  // new\n  if flex in flex-version\n    vendor('flex-flow', arguments, only: webkit ms official)\n\n\norder()\n  // obsolete\n  if box in flex-version\n    vendor('box-ordinal-group', arguments, ignore: ms official)\n\n  // new\n  if flex in flex-version\n    vendor('flex-order', arguments, only: ms)\n    vendor('order', arguments, only: webkit official)\n\n\n//\n// 7. Flexibility\n//    - http://www.w3.org/TR/css3-flexbox/#flexibility\n//\nflex-grow(growth)\n  // obsolete\n  if box in flex-version\n    vendor('box-flex', growth)\n\n  // new\n  if flex in flex-version\n    vendor('flex-grow', arguments, only: webkit official)\n\nflex-basis()\n  if flex in flex-version\n    vendor('flex-basis', arguments, only: webkit official)\n\nflex-shrink()\n  if flex in flex-version\n    vendor('flex-shrink', arguments, only: webkit official)\n\nflex(growth)\n\n  // obsolete\n  if box in flex-version\n    shrink = 1\n\n    if none == growth || initial == growth\n      // Well known values\n      shrink = 0 if none == growth\n      growth = 0\n    else if is-width(growth) == true\n      // Basis is defined as the first parameter\n      growth = arguments[1] || 0\n      shrink = arguments[2] if 3 <= length(arguments)\n    else if arguments[1] && is-width(arguments[1]) == false\n      // Growth is first and shrink is second\n      shrink = arguments[1]\n\n    // Since we can't make the distinction between growing and shrinking in the box model, take\n    // the one that provides the most flexibility.\n    vendor('box-flex', max(growth, shrink), ignore: ms)\n\n  // new\n  if flex in flex-version\n    vendor('flex', arguments, only: webkit ms official)\n\n\n// converts the justification alignment\n-convert-justify(align)\n  if flex-start == align\n    return start\n  else if flex-end == align\n    return end\n  else if space-around == align\n    return distribute\n  else if space-between == align\n    return justify\n  else\n    return align\n\n//\n// 8. Alignment\n//    - http://www.w3.org/TR/css3-flexbox/#alignment\n//\njustify-content(align)\n  // obsolete\n  if box in flex-version\n    vendor('box-pack', -convert-justify(align), ignore: ms official)\n\n  // new\n  if flex in flex-version\n    vendor('flex-pack', -convert-justify(align), only: ms)\n    vendor('justify-content', align, only: webkit official)\n\nalign-content(align)\n  // WARN: Obsolete spec does not allow for adjustment here\n  if flex in flex-version\n    vendor('flex-line-pack', -convert-justify(align), only: ms)\n    vendor('align-content', align, only: webkit official)\n\n// converts alignment from 'flex' to normal value\n-convert-alignment(align)\n  if flex-start == align\n    return start\n  else if flex-end == align\n    return end\n  else\n    return align\n\nalign-items(align)\n  // obsolete\n  if box in flex-version\n    vendor('box-align', -convert-alignment(align), ignore: ms official)\n\n  // new\n  if flex in flex-version\n    vendor('flex-align', -convert-alignment(align), only: ms)\n    vendor('align-items', arguments, only: webkit official)\n\nalign-self(align)\n  // WARN: Obsolete spec does not allow for overriding alignment on individual items.\n  if flex in flex-version\n    vendor('align-self', align, only: webkit official)\n    vendor('flex-item-align', -convert-alignment(align), only: ms)\n","/*\n * border: <color>\n * border: ...\n */\n\nborder(color, args...)\n  if color is a 'color'\n    border: 1px solid color args\n  else\n    border: arguments\n"],sourceRoot:""}]),e.A=p},7046:function(t,e,n){"use strict";var r=n(4942),i=n.n(r),o=n(278),a=n.n(o)()(i());a.push([t.id,".color-legend-container{display:none;padding:10px;border:1.5px solid #000;border-radius:3px;transition:250ms background linear;background-color:rgba(255,255,255,0.75)}.color-legend-container:hover{background-color:#fff}.color-legend-container .geojs-color-legends .geojs-color-legend{margin-bottom:10px}.color-legend-container .geojs-color-legends .geojs-color-legend .geojs-title{text-align:center}.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg{display:block}.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg .axis.x path.domain,.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg .axis.x line{fill:none;stroke:#000;stroke-width:.7}.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg .axis.x text{font-size:12px}.color-legend-container .color-legend-popup{position:absolute;background:#fff;height:22px;font-size:14px;border:solid 1px #000;padding:0 5px;pointer-events:none;white-space:nowrap;z-index:100000;opacity:0}","",{version:3,sources:["webpack://./ui/colorLegendWidget.styl"],names:[],mappings:"AAAA,wBACE,YAAQ,CACR,YAAQ,CACR,uBAAO,CACP,iBAAc,CACd,kCAAW,CACX,uCAAiB,CAEjB,8BACE,qBAAiB,CAIjB,iEACE,kBAAc,CAEd,8EACE,iBAAW,CAEb,yEACE,aAAQ,CAGN,mLACE,SAAK,CACL,WAAO,CACP,eAAa,CACf,sFACE,cAAU,CAEpB,4CACE,iBAAS,CACT,eAAW,CACX,WAAO,CACP,cAAU,CACV,qBAAO,CACP,aAAQ,CACR,mBAAe,CACf,kBAAY,CACZ,cAAQ,CACR,SAAQ",sourcesContent:[".color-legend-container\n  display none\n  padding 10px\n  border 1.5px solid black\n  border-radius 3px\n  transition 250ms background linear\n  background-color rgba(255, 255, 255, 0.75)\n\n  &:hover\n    background-color rgba(255, 255, 255, 1)\n\n  .geojs-color-legends\n\n    .geojs-color-legend\n      margin-bottom 10px\n\n      .geojs-title\n        text-align center\n\n      svg.svg\n        display block\n\n        .axis.x\n          path.domain, line\n            fill none\n            stroke black\n            stroke-width 0.7\n          text\n            font-size 12px\n\n  .color-legend-popup\n    position absolute\n    background white\n    height 22px\n    font-size 14px\n    border solid 1px black\n    padding 0 5px\n    pointer-events none\n    white-space nowrap\n    z-index 100000\n    opacity 0\n"],sourceRoot:""}]),e.A=a},5290:function(t,e,n){"use strict";var r=n(4942),i=n.n(r),o=n(278),a=n.n(o)()(i());a.push([t.id,".geojs-scale-widget-bar{stroke:#000}.geojs-scale-widget-text{font-weight:bold;font-size:16px;font-family:serif}","",{version:3,sources:["webpack://./ui/scaleWidget.styl"],names:[],mappings:"AAAA,wBACE,WAAO,CACT,yBACE,gBAAY,CACZ,cAAU,CACV,iBAAY",sourcesContent:[".geojs-scale-widget-bar\n  stroke black\n.geojs-scale-widget-text\n  font-weight bold\n  font-size 16px\n  font-family serif\n"],sourceRoot:""}]),e.A=a},278:function(t){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n}).join("")},e.i=function(t,n,r,i,o){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var u=this[s][0];null!=u&&(a[u]=!0)}for(var l=0;l<t.length;l++){var c=[].concat(t[l]);r&&a[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),e.push(c))}},e}},3021:function(t){"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},4942:function(t){"use strict";t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),o="/*# ".concat(i," */");return[e].concat([o]).join("\n")}return[e].join("\n")}},3369:function(t){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8];return t[0]=a*c-s*l,t[1]=i*l-r*c,t[2]=r*s-i*a,t[3]=s*u-o*c,t[4]=n*c-i*u,t[5]=i*o-n*s,t[6]=o*l-a*u,t[7]=r*u-n*l,t[8]=n*a-r*o,t}},5723:function(t){t.exports=function(t){var e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}},817:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}},6396:function(t){t.exports=function(){var t=new Float32Array(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}},9133:function(t){t.exports=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8];return e*(l*o-a*u)+n*(a*s-l*i)+r*(u*i-o*s)}},7053:function(t){t.exports=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]+t[3]*t[3]+t[4]*t[4]+t[5]*t[5]+t[6]*t[6]+t[7]*t[7]+t[8]*t[8])}},7068:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}},5018:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}},3955:function(t){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,l=n*a,c=r*a,f=r*s,h=i*a,d=i*s,p=i*u,m=o*a,g=o*s,y=o*u;return t[0]=1-f-p,t[3]=c-y,t[6]=h+g,t[1]=c+y,t[4]=1-l-p,t[7]=d-m,t[2]=h-g,t[5]=d+m,t[8]=1-l-f,t}},6658:function(t){t.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}},3638:function(t,e,n){t.exports={adjoint:n(3369),clone:n(5723),copy:n(817),create:n(6396),determinant:n(9133),frob:n(7053),fromMat2:n(7068),fromMat4:n(5018),fromQuat:n(3955),identity:n(6658),invert:n(6028),multiply:n(4980),normalFromMat4:n(8093),rotate:n(8163),scale:n(2311),str:n(6321),translate:n(5068),transpose:n(6333)}},6028:function(t){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=c*a-s*l,h=-c*o+s*u,d=l*o-a*u,p=n*f+r*h+i*d;return p?(p=1/p,t[0]=f*p,t[1]=(-c*r+i*l)*p,t[2]=(s*r-i*a)*p,t[3]=h*p,t[4]=(c*n-i*u)*p,t[5]=(-s*n+i*o)*p,t[6]=d*p,t[7]=(-l*n+r*u)*p,t[8]=(a*n-r*o)*p,t):null}},4980:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=n[0],d=n[1],p=n[2],m=n[3],g=n[4],y=n[5],v=n[6],x=n[7],_=n[8];return t[0]=h*r+d*a+p*l,t[1]=h*i+d*s+p*c,t[2]=h*o+d*u+p*f,t[3]=m*r+g*a+y*l,t[4]=m*i+g*s+y*c,t[5]=m*o+g*u+y*f,t[6]=v*r+x*a+_*l,t[7]=v*i+x*s+_*c,t[8]=v*o+x*u+_*f,t}},8093:function(t){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],m=e[13],g=e[14],y=e[15],v=n*s-r*a,x=n*u-i*a,_=n*l-o*a,b=r*u-i*s,w=r*l-o*s,M=i*l-o*u,A=c*m-f*p,E=c*g-h*p,T=c*y-d*p,S=f*g-h*m,C=f*y-d*m,k=h*y-d*g,P=v*k-x*C+_*S+b*T-w*E+M*A;return P?(P=1/P,t[0]=(s*k-u*C+l*S)*P,t[1]=(u*T-a*k-l*E)*P,t[2]=(a*C-s*T+l*A)*P,t[3]=(i*C-r*k-o*S)*P,t[4]=(n*k-i*T+o*E)*P,t[5]=(r*T-n*C-o*A)*P,t[6]=(m*M-g*w+y*b)*P,t[7]=(g*_-p*M-y*x)*P,t[8]=(p*w-m*_+y*v)*P,t):null}},8163:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=Math.sin(n),d=Math.cos(n);return t[0]=d*r+h*a,t[1]=d*i+h*s,t[2]=d*o+h*u,t[3]=d*a-h*r,t[4]=d*s-h*i,t[5]=d*u-h*o,t[6]=l,t[7]=c,t[8]=f,t}},2311:function(t){t.exports=function(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}},6321:function(t){t.exports=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}},5068:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=n[0],d=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=h*r+d*a+l,t[7]=h*i+d*s+c,t[8]=h*o+d*u+f,t}},6333:function(t){t.exports=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}},5200:function(t){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],m=e[13],g=e[14],y=e[15];return t[0]=s*(h*y-d*g)-f*(u*y-l*g)+m*(u*d-l*h),t[1]=-(r*(h*y-d*g)-f*(i*y-o*g)+m*(i*d-o*h)),t[2]=r*(u*y-l*g)-s*(i*y-o*g)+m*(i*l-o*u),t[3]=-(r*(u*d-l*h)-s*(i*d-o*h)+f*(i*l-o*u)),t[4]=-(a*(h*y-d*g)-c*(u*y-l*g)+p*(u*d-l*h)),t[5]=n*(h*y-d*g)-c*(i*y-o*g)+p*(i*d-o*h),t[6]=-(n*(u*y-l*g)-a*(i*y-o*g)+p*(i*l-o*u)),t[7]=n*(u*d-l*h)-a*(i*d-o*h)+c*(i*l-o*u),t[8]=a*(f*y-d*m)-c*(s*y-l*m)+p*(s*d-l*f),t[9]=-(n*(f*y-d*m)-c*(r*y-o*m)+p*(r*d-o*f)),t[10]=n*(s*y-l*m)-a*(r*y-o*m)+p*(r*l-o*s),t[11]=-(n*(s*d-l*f)-a*(r*d-o*f)+c*(r*l-o*s)),t[12]=-(a*(f*g-h*m)-c*(s*g-u*m)+p*(s*h-u*f)),t[13]=n*(f*g-h*m)-c*(r*g-i*m)+p*(r*h-i*f),t[14]=-(n*(s*g-u*m)-a*(r*g-i*m)+p*(r*u-i*s)),t[15]=n*(s*h-u*f)-a*(r*h-i*f)+c*(r*u-i*s),t}},1130:function(t){t.exports=function(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},74:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},3783:function(t){t.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},8844:function(t){t.exports=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],f=t[10],h=t[11],d=t[12],p=t[13],m=t[14],g=t[15];return(e*a-n*o)*(f*g-h*m)-(e*s-r*o)*(c*g-h*p)+(e*u-i*o)*(c*m-f*p)+(n*s-r*a)*(l*g-h*d)-(n*u-i*a)*(l*m-f*d)+(r*u-i*s)*(l*p-c*d)}},5936:function(t){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,l=n*a,c=r*a,f=r*s,h=i*a,d=i*s,p=i*u,m=o*a,g=o*s,y=o*u;return t[0]=1-f-p,t[1]=c+y,t[2]=h-g,t[3]=0,t[4]=c-y,t[5]=1-l-p,t[6]=d+m,t[7]=0,t[8]=h+g,t[9]=d-m,t[10]=1-l-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},5405:function(t){t.exports=function(t,e,n){var r,i,o,a=n[0],s=n[1],u=n[2],l=Math.sqrt(a*a+s*s+u*u);if(Math.abs(l)<1e-6)return null;return a*=l=1/l,s*=l,u*=l,r=Math.sin(e),i=Math.cos(e),o=1-i,t[0]=a*a*o+i,t[1]=s*a*o+u*r,t[2]=u*a*o-s*r,t[3]=0,t[4]=a*s*o-u*r,t[5]=s*s*o+i,t[6]=u*s*o+a*r,t[7]=0,t[8]=a*u*o+s*r,t[9]=s*u*o-a*r,t[10]=u*u*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},3310:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,l=o+o,c=r*s,f=r*u,h=r*l,d=i*u,p=i*l,m=o*l,g=a*s,y=a*u,v=a*l;return t[0]=1-(d+m),t[1]=f+v,t[2]=h-y,t[3]=0,t[4]=f-v,t[5]=1-(c+m),t[6]=p+g,t[7]=0,t[8]=h+y,t[9]=p-g,t[10]=1-(c+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}},1826:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},4692:function(t){t.exports=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}},1349:function(t){t.exports=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},8034:function(t){t.exports=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},1655:function(t){t.exports=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},3277:function(t){t.exports=function(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),l=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*l,t[15]=0,t}},257:function(t){t.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},3503:function(t,e,n){t.exports={create:n(3783),clone:n(1130),copy:n(74),identity:n(257),transpose:n(2664),invert:n(6583),adjoint:n(5200),determinant:n(8844),multiply:n(9899),translate:n(573),scale:n(177),rotate:n(648),rotateX:n(5618),rotateY:n(5345),rotateZ:n(5208),fromRotation:n(5405),fromRotationTranslation:n(3310),fromScaling:n(1826),fromTranslation:n(4692),fromXRotation:n(1349),fromYRotation:n(8034),fromZRotation:n(1655),fromQuat:n(5936),frustum:n(3277),perspective:n(2649),perspectiveFromFieldOfView:n(7733),ortho:n(2337),lookAt:n(8541),str:n(6600)}},6583:function(t){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],m=e[13],g=e[14],y=e[15],v=n*s-r*a,x=n*u-i*a,_=n*l-o*a,b=r*u-i*s,w=r*l-o*s,M=i*l-o*u,A=c*m-f*p,E=c*g-h*p,T=c*y-d*p,S=f*g-h*m,C=f*y-d*m,k=h*y-d*g,P=v*k-x*C+_*S+b*T-w*E+M*A;if(!P)return null;return P=1/P,t[0]=(s*k-u*C+l*S)*P,t[1]=(i*C-r*k-o*S)*P,t[2]=(m*M-g*w+y*b)*P,t[3]=(h*w-f*M-d*b)*P,t[4]=(u*T-a*k-l*E)*P,t[5]=(n*k-i*T+o*E)*P,t[6]=(g*_-p*M-y*x)*P,t[7]=(c*M-h*_+d*x)*P,t[8]=(a*C-s*T+l*A)*P,t[9]=(r*T-n*C-o*A)*P,t[10]=(p*w-m*_+y*v)*P,t[11]=(f*_-c*w-d*v)*P,t[12]=(s*E-a*S-u*A)*P,t[13]=(n*S-r*E+i*A)*P,t[14]=(m*x-p*b-g*v)*P,t[15]=(c*b-f*x+h*v)*P,t}},8541:function(t,e,n){var r=n(257);t.exports=function(t,e,n,i){var o,a,s,u,l,c,f,h,d,p,m=e[0],g=e[1],y=e[2],v=i[0],x=i[1],_=i[2],b=n[0],w=n[1],M=n[2];if(Math.abs(m-b)<1e-6&&Math.abs(g-w)<1e-6&&Math.abs(y-M)<1e-6)return r(t);f=m-b,h=g-w,d=y-M,p=1/Math.sqrt(f*f+h*h+d*d),o=x*(d*=p)-_*(h*=p),a=_*(f*=p)-v*d,s=v*h-x*f,(p=Math.sqrt(o*o+a*a+s*s))?(o*=p=1/p,a*=p,s*=p):(o=0,a=0,s=0);u=h*s-d*a,l=d*o-f*s,c=f*a-h*o,(p=Math.sqrt(u*u+l*l+c*c))?(u*=p=1/p,l*=p,c*=p):(u=0,l=0,c=0);return t[0]=o,t[1]=u,t[2]=f,t[3]=0,t[4]=a,t[5]=l,t[6]=h,t[7]=0,t[8]=s,t[9]=c,t[10]=d,t[11]=0,t[12]=-(o*m+a*g+s*y),t[13]=-(u*m+l*g+c*y),t[14]=-(f*m+h*g+d*y),t[15]=1,t}},9899:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=e[9],d=e[10],p=e[11],m=e[12],g=e[13],y=e[14],v=e[15],x=n[0],_=n[1],b=n[2],w=n[3];return t[0]=x*r+_*s+b*f+w*m,t[1]=x*i+_*u+b*h+w*g,t[2]=x*o+_*l+b*d+w*y,t[3]=x*a+_*c+b*p+w*v,x=n[4],_=n[5],b=n[6],w=n[7],t[4]=x*r+_*s+b*f+w*m,t[5]=x*i+_*u+b*h+w*g,t[6]=x*o+_*l+b*d+w*y,t[7]=x*a+_*c+b*p+w*v,x=n[8],_=n[9],b=n[10],w=n[11],t[8]=x*r+_*s+b*f+w*m,t[9]=x*i+_*u+b*h+w*g,t[10]=x*o+_*l+b*d+w*y,t[11]=x*a+_*c+b*p+w*v,x=n[12],_=n[13],b=n[14],w=n[15],t[12]=x*r+_*s+b*f+w*m,t[13]=x*i+_*u+b*h+w*g,t[14]=x*o+_*l+b*d+w*y,t[15]=x*a+_*c+b*p+w*v,t}},2337:function(t){t.exports=function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*l,t[15]=1,t}},2649:function(t){t.exports=function(t,e,n,r,i){var o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t}},7733:function(t){t.exports=function(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),l=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*l*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}},648:function(t){t.exports=function(t,e,n,r){var i,o,a,s,u,l,c,f,h,d,p,m,g,y,v,x,_,b,w,M,A,E,T,S,C=r[0],k=r[1],P=r[2],O=Math.sqrt(C*C+k*k+P*P);if(Math.abs(O)<1e-6)return null;C*=O=1/O,k*=O,P*=O,i=Math.sin(n),o=Math.cos(n),a=1-o,s=e[0],u=e[1],l=e[2],c=e[3],f=e[4],h=e[5],d=e[6],p=e[7],m=e[8],g=e[9],y=e[10],v=e[11],x=C*C*a+o,_=k*C*a+P*i,b=P*C*a-k*i,w=C*k*a-P*i,M=k*k*a+o,A=P*k*a+C*i,E=C*P*a+k*i,T=k*P*a-C*i,S=P*P*a+o,t[0]=s*x+f*_+m*b,t[1]=u*x+h*_+g*b,t[2]=l*x+d*_+y*b,t[3]=c*x+p*_+v*b,t[4]=s*w+f*M+m*A,t[5]=u*w+h*M+g*A,t[6]=l*w+d*M+y*A,t[7]=c*w+p*M+v*A,t[8]=s*E+f*T+m*S,t[9]=u*E+h*T+g*S,t[10]=l*E+d*T+y*S,t[11]=c*E+p*T+v*S,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t}},5618:function(t){t.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],h=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=o*i+l*r,t[5]=a*i+c*r,t[6]=s*i+f*r,t[7]=u*i+h*r,t[8]=l*i-o*r,t[9]=c*i-a*r,t[10]=f*i-s*r,t[11]=h*i-u*r,t}},5345:function(t){t.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[8],c=e[9],f=e[10],h=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=o*i-l*r,t[1]=a*i-c*r,t[2]=s*i-f*r,t[3]=u*i-h*r,t[8]=o*r+l*i,t[9]=a*r+c*i,t[10]=s*r+f*i,t[11]=u*r+h*i,t}},5208:function(t){t.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],f=e[6],h=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=o*i+l*r,t[1]=a*i+c*r,t[2]=s*i+f*r,t[3]=u*i+h*r,t[4]=l*i-o*r,t[5]=c*i-a*r,t[6]=f*i-s*r,t[7]=h*i-u*r,t}},177:function(t){t.exports=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},6600:function(t){t.exports=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}},573:function(t){t.exports=function(t,e,n){var r,i,o,a,s,u,l,c,f,h,d,p,m=n[0],g=n[1],y=n[2];e===t?(t[12]=e[0]*m+e[4]*g+e[8]*y+e[12],t[13]=e[1]*m+e[5]*g+e[9]*y+e[13],t[14]=e[2]*m+e[6]*g+e[10]*y+e[14],t[15]=e[3]*m+e[7]*g+e[11]*y+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=e[9],d=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=f,t[9]=h,t[10]=d,t[11]=p,t[12]=r*m+s*g+f*y+e[12],t[13]=i*m+u*g+h*y+e[13],t[14]=o*m+l*g+d*y+e[14],t[15]=a*m+c*g+p*y+e[15]);return t}},2664:function(t){t.exports=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}},3197:function(t){t.exports=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}},577:function(t,e,n){t.exports=function(t,e){var n=r(t[0],t[1],t[2]),a=r(e[0],e[1],e[2]);i(n,n),i(a,a);var s=o(n,a);return s>1?0:Math.acos(s)};var r=n(9666),i=n(1205),o=n(6517)},9913:function(t){t.exports=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}},7091:function(t){t.exports=function(t){var e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},3497:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},1220:function(t){t.exports=function(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}},6902:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}},5140:function(t,e,n){t.exports=n(5055)},5055:function(t){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}},6669:function(t,e,n){t.exports=n(9737)},9737:function(t){t.exports=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}},6517:function(t){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}},6532:function(t){t.exports=1e-6},1077:function(t,e,n){t.exports=function(t,e){var n=t[0],i=t[1],o=t[2],a=e[0],s=e[1],u=e[2];return Math.abs(n-a)<=r*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=r*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-u)<=r*Math.max(1,Math.abs(o),Math.abs(u))};var r=n(6532)},5696:function(t){t.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}},1899:function(t){t.exports=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}},9436:function(t,e,n){t.exports=function(t,e,n,i,o,a){var s,u;e||(e=3);n||(n=0);u=i?Math.min(i*e+n,t.length):t.length;for(s=n;s<u;s+=e)r[0]=t[s],r[1]=t[s+1],r[2]=t[s+2],o(r,r,a),t[s]=r[0],t[s+1]=r[1],t[s+2]=r[2];return t};var r=n(1220)()},9666:function(t){t.exports=function(t,e,n){var r=new Float32Array(3);return r[0]=t,r[1]=e,r[2]=n,r}},1982:function(t,e,n){t.exports={EPSILON:n(6532),create:n(1220),clone:n(7091),angle:n(577),fromValues:n(9666),copy:n(3497),set:n(3926),equals:n(1077),exactEquals:n(5696),add:n(3197),subtract:n(1040),sub:n(8560),multiply:n(8044),mul:n(8516),divide:n(9737),div:n(6669),min:n(4370),max:n(7484),floor:n(1899),ceil:n(9913),round:n(4622),scale:n(9404),scaleAndAdd:n(8544),distance:n(5055),dist:n(5140),squaredDistance:n(2340),sqrDist:n(3108),length:n(9852),len:n(4001),squaredLength:n(2775),sqrLen:n(9249),negate:n(2926),inverse:n(3346),normalize:n(1205),dot:n(6517),cross:n(6902),lerp:n(1817),random:n(1844),transformMat4:n(9564),transformMat3:n(553),transformQuat:n(4997),rotateX:n(6899),rotateY:n(8028),rotateZ:n(5493),forEach:n(9436)}},3346:function(t){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}},4001:function(t,e,n){t.exports=n(9852)},9852:function(t){t.exports=function(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}},1817:function(t){t.exports=function(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}},7484:function(t){t.exports=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}},4370:function(t){t.exports=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}},8516:function(t,e,n){t.exports=n(8044)},8044:function(t){t.exports=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}},2926:function(t){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}},1205:function(t){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o);return t}},1844:function(t){t.exports=function(t,e){e=e||1;var n=2*Math.random()*Math.PI,r=2*Math.random()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}},6899:function(t){t.exports=function(t,e,n,r){var i=n[1],o=n[2],a=e[1]-i,s=e[2]-o,u=Math.sin(r),l=Math.cos(r);return t[0]=e[0],t[1]=i+a*l-s*u,t[2]=o+a*u+s*l,t}},8028:function(t){t.exports=function(t,e,n,r){var i=n[0],o=n[2],a=e[0]-i,s=e[2]-o,u=Math.sin(r),l=Math.cos(r);return t[0]=i+s*u+a*l,t[1]=e[1],t[2]=o+s*l-a*u,t}},5493:function(t){t.exports=function(t,e,n,r){var i=n[0],o=n[1],a=e[0]-i,s=e[1]-o,u=Math.sin(r),l=Math.cos(r);return t[0]=i+a*l-s*u,t[1]=o+a*u+s*l,t[2]=e[2],t}},4622:function(t){t.exports=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}},9404:function(t){t.exports=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}},8544:function(t){t.exports=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}},3926:function(t){t.exports=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}},3108:function(t,e,n){t.exports=n(2340)},9249:function(t,e,n){t.exports=n(2775)},2340:function(t){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}},2775:function(t){t.exports=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}},8560:function(t,e,n){t.exports=n(1040)},1040:function(t){t.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}},553:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}},9564:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}},4997:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],l=n[3],c=s*o-u*i,f=u*r-a*o,h=a*i-s*r;return c*=2,f*=2,h*=2,t[0]=r+l*c+s*h-u*f,t[1]=i+l*f+u*c-a*h,t[2]=o+l*h+a*f-s*c,t}},2108:function(t){t.exports=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}},7682:function(t){t.exports=function(t){var e=new Float32Array(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},9298:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}},3071:function(t){t.exports=function(){var t=new Float32Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}},5476:function(t){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+i*i+o*o)}},1350:function(t){t.exports=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}},216:function(t){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}},8741:function(t){t.exports=function(t,e,n,r){var i=new Float32Array(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}},4663:function(t,e,n){t.exports={create:n(3071),clone:n(7682),fromValues:n(8741),copy:n(9298),set:n(6675),add:n(2108),subtract:n(6919),multiply:n(9363),divide:n(1350),min:n(9271),max:n(2045),scale:n(7705),scaleAndAdd:n(2869),distance:n(5476),squaredDistance:n(6733),length:n(7159),squaredLength:n(2678),negate:n(6977),inverse:n(3095),normalize:n(8308),dot:n(216),lerp:n(2710),random:n(9960),transformMat4:n(8773),transformQuat:n(2508)}},3095:function(t){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}},7159:function(t){t.exports=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.sqrt(e*e+n*n+r*r+i*i)}},2710:function(t){t.exports=function(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t}},2045:function(t){t.exports=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}},9271:function(t){t.exports=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}},9363:function(t){t.exports=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}},6977:function(t){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}},8308:function(t){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a);return t}},9960:function(t,e,n){var r=n(8308),i=n(7705);t.exports=function(t,e){return e=e||1,t[0]=Math.random(),t[1]=Math.random(),t[2]=Math.random(),t[3]=Math.random(),r(t,t),i(t,t,e),t}},7705:function(t){t.exports=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}},2869:function(t){t.exports=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}},6675:function(t){t.exports=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}},6733:function(t){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}},2678:function(t){t.exports=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}},6919:function(t){t.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}},8773:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}},2508:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],l=n[3],c=l*r+s*o-u*i,f=l*i+u*r-a*o,h=l*o+a*i-s*r,d=-a*r-s*i-u*o;return t[0]=c*l+d*-a+f*-u-h*-s,t[1]=f*l+d*-s+h*-a-c*-u,t[2]=h*l+d*-u+c*-s-f*-a,t[3]=e[3],t}},5616:function(t,e){var n;
/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(r,i){"use strict";var o=[],a=Object.getPrototypeOf,s=o.slice,u=o.flat?function(t){return o.flat.call(t)}:function(t){return o.concat.apply([],t)},l=o.push,c=o.indexOf,f={},h=f.toString,d=f.hasOwnProperty,p=d.toString,m=p.call(Object),g={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},v=function(t){return null!=t&&t===t.window},x=r.document,_={type:!0,src:!0,nonce:!0,noModule:!0};function b(t,e,n){var r,i,o=(n=n||x).createElement("script");if(o.text=t,e)for(r in _)(i=e[r]||e.getAttribute&&e.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?f[h.call(t)]||"object":typeof t}var M="3.7.1",A=/HTML$/i,E=function(t,e){return new E.fn.init(t,e)};function T(t){var e=!!t&&"length"in t&&t.length,n=w(t);return!y(t)&&!v(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function S(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}E.fn=E.prototype={jquery:M,constructor:E,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=E.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return E.each(this,t)},map:function(t){return this.pushStack(E.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(E.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:o.sort,splice:o.splice},E.extend=E.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||y(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(t=arguments[s]))for(e in t)r=t[e],"__proto__"!==e&&a!==r&&(l&&r&&(E.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[e],o=i&&!Array.isArray(n)?[]:i||E.isPlainObject(n)?n:{},i=!1,a[e]=E.extend(l,o,r)):void 0!==r&&(a[e]=r));return a},E.extend({expando:"jQuery"+(M+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==h.call(t))&&(!(e=a(t))||"function"==typeof(n=d.call(e,"constructor")&&e.constructor)&&p.call(n)===m)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){b(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,r=0;if(T(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},text:function(t){var e,n="",r=0,i=t.nodeType;if(!i)for(;e=t[r++];)n+=E.text(e);return 1===i||11===i?t.textContent:9===i?t.documentElement.textContent:3===i||4===i?t.nodeValue:n},makeArray:function(t,e){var n=e||[];return null!=t&&(T(Object(t))?E.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:c.call(e,t,n)},isXMLDoc:function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!A.test(e||n&&n.nodeName||"HTML")},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,a=!n;i<o;i++)!e(t[i],i)!==a&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,a=[];if(T(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&a.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&a.push(i);return u(a)},guid:1,support:g}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=o[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){f["[object "+e+"]"]=e.toLowerCase()});var C=o.pop,k=o.sort,P=o.splice,O="[\\x20\\t\\r\\n\\f]",L=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g");E.contains=function(t,e){var n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(t.contains?t.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))};var I=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function R(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}E.escapeSelector=function(t){return(t+"").replace(I,R)};var D=x,N=l;!function(){var t,e,n,i,a,u,l,f,h,p,m=N,y=E.expando,v=0,x=0,_=tt(),b=tt(),w=tt(),M=tt(),A=function(t,e){return t===e&&(a=!0),0},T="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="(?:\\\\[\\da-fA-F]{1,6}"+O+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",R="\\["+O+"*("+I+")(?:"+O+"*([*^$|!~]?=)"+O+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+O+"*\\]",F=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+R+")*)|.*)\\)|)",j=new RegExp(O+"+","g"),z=new RegExp("^"+O+"*,"+O+"*"),G=new RegExp("^"+O+"*([>+~]|"+O+")"+O+"*"),B=new RegExp(O+"|>"),V=new RegExp(F),q=new RegExp("^"+I+"$"),U={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+R),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),bool:new RegExp("^(?:"+T+")$","i"),needsContext:new RegExp("^"+O+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)","i")},H=/^(?:input|select|textarea|button)$/i,W=/^h\d$/i,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,Q=new RegExp("\\\\[\\da-fA-F]{1,6}"+O+"?|\\\\([^\\r\\n\\f])","g"),Y=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},$=function(){ut()},Z=ht(function(t){return!0===t.disabled&&S(t,"fieldset")},{dir:"parentNode",next:"legend"});try{m.apply(o=s.call(D.childNodes),D.childNodes),o[D.childNodes.length].nodeType}catch(t){m={apply:function(t,e){N.apply(t,s.call(e))},call:function(t){N.apply(t,s.call(arguments,1))}}}function J(t,e,n,r){var i,o,a,s,l,c,d,p=e&&e.ownerDocument,v=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==v&&9!==v&&11!==v)return n;if(!r&&(ut(e),e=e||u,f)){if(11!==v&&(l=X.exec(t)))if(i=l[1]){if(9===v){if(!(a=e.getElementById(i)))return n;if(a.id===i)return m.call(n,a),n}else if(p&&(a=p.getElementById(i))&&J.contains(e,a)&&a.id===i)return m.call(n,a),n}else{if(l[2])return m.apply(n,e.getElementsByTagName(t)),n;if((i=l[3])&&e.getElementsByClassName)return m.apply(n,e.getElementsByClassName(i)),n}if(!(M[t+" "]||h&&h.test(t))){if(d=t,p=e,1===v&&(B.test(t)||G.test(t))){for((p=K.test(t)&&st(e.parentNode)||e)==e&&g.scope||((s=e.getAttribute("id"))?s=E.escapeSelector(s):e.setAttribute("id",s=y)),o=(c=ct(t)).length;o--;)c[o]=(s?"#"+s:":scope")+" "+ft(c[o]);d=c.join(",")}try{return m.apply(n,p.querySelectorAll(d)),n}catch(e){M(t,!0)}finally{s===y&&e.removeAttribute("id")}}}return vt(t.replace(L,"$1"),e,n,r)}function tt(){var t=[];return function n(r,i){return t.push(r+" ")>e.cacheLength&&delete n[t.shift()],n[r+" "]=i}}function et(t){return t[y]=!0,t}function nt(t){var e=u.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function rt(t){return function(e){return S(e,"input")&&e.type===t}}function it(t){return function(e){return(S(e,"input")||S(e,"button"))&&e.type===t}}function ot(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&Z(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function at(t){return et(function(e){return e=+e,et(function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function st(t){return t&&void 0!==t.getElementsByTagName&&t}function ut(t){var n,r=t?t.ownerDocument||t:D;return r!=u&&9===r.nodeType&&r.documentElement?(l=(u=r).documentElement,f=!E.isXMLDoc(u),p=l.matches||l.webkitMatchesSelector||l.msMatchesSelector,l.msMatchesSelector&&D!=u&&(n=u.defaultView)&&n.top!==n&&n.addEventListener("unload",$),g.getById=nt(function(t){return l.appendChild(t).id=E.expando,!u.getElementsByName||!u.getElementsByName(E.expando).length}),g.disconnectedMatch=nt(function(t){return p.call(t,"*")}),g.scope=nt(function(){return u.querySelectorAll(":scope")}),g.cssHas=nt(function(){try{return u.querySelector(":has(*,:jqfake)"),!1}catch(t){return!0}}),g.getById?(e.filter.ID=function(t){var e=t.replace(Q,Y);return function(t){return t.getAttribute("id")===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&f){var n=e.getElementById(t);return n?[n]:[]}}):(e.filter.ID=function(t){var e=t.replace(Q,Y);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&f){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),e.find.TAG=function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):e.querySelectorAll(t)},e.find.CLASS=function(t,e){if(void 0!==e.getElementsByClassName&&f)return e.getElementsByClassName(t)},h=[],nt(function(t){var e;l.appendChild(t).innerHTML="<a id='"+y+"' href='' disabled='disabled'></a><select id='"+y+"-\r\\' disabled='disabled'><option selected=''></option></select>",t.querySelectorAll("[selected]").length||h.push("\\["+O+"*(?:value|"+T+")"),t.querySelectorAll("[id~="+y+"-]").length||h.push("~="),t.querySelectorAll("a#"+y+"+*").length||h.push(".#.+[+~]"),t.querySelectorAll(":checked").length||h.push(":checked"),(e=u.createElement("input")).setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),l.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&h.push(":enabled",":disabled"),(e=u.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||h.push("\\["+O+"*name"+O+"*="+O+"*(?:''|\"\")")}),g.cssHas||h.push(":has"),h=h.length&&new RegExp(h.join("|")),A=function(t,e){if(t===e)return a=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!g.sortDetached&&e.compareDocumentPosition(t)===n?t===u||t.ownerDocument==D&&J.contains(D,t)?-1:e===u||e.ownerDocument==D&&J.contains(D,e)?1:i?c.call(i,t)-c.call(i,e):0:4&n?-1:1)},u):u}for(t in J.matches=function(t,e){return J(t,null,null,e)},J.matchesSelector=function(t,e){if(ut(t),f&&!M[e+" "]&&(!h||!h.test(e)))try{var n=p.call(t,e);if(n||g.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){M(e,!0)}return J(e,u,null,[t]).length>0},J.contains=function(t,e){return(t.ownerDocument||t)!=u&&ut(t),E.contains(t,e)},J.attr=function(t,n){(t.ownerDocument||t)!=u&&ut(t);var r=e.attrHandle[n.toLowerCase()],i=r&&d.call(e.attrHandle,n.toLowerCase())?r(t,n,!f):void 0;return void 0!==i?i:t.getAttribute(n)},J.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},E.uniqueSort=function(t){var e,n=[],r=0,o=0;if(a=!g.sortStable,i=!g.sortStable&&s.call(t,0),k.call(t,A),a){for(;e=t[o++];)e===t[o]&&(r=n.push(o));for(;r--;)P.call(t,n[r],1)}return i=null,t},E.fn.uniqueSort=function(){return this.pushStack(E.uniqueSort(s.apply(this)))},e=E.expr={cacheLength:50,createPseudo:et,match:U,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Q,Y),t[3]=(t[3]||t[4]||t[5]||"").replace(Q,Y),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||J.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&J.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return U.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&V.test(n)&&(e=ct(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Q,Y).toLowerCase();return"*"===t?function(){return!0}:function(t){return S(t,e)}},CLASS:function(t){var e=_[t+" "];return e||(e=new RegExp("(^|"+O+")"+t+"("+O+"|$)"))&&_(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(r){var i=J.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(j," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var l,c,f,h,d,p=o!==a?"nextSibling":"previousSibling",m=e.parentNode,g=s&&e.nodeName.toLowerCase(),x=!u&&!s,_=!1;if(m){if(o){for(;p;){for(f=e;f=f[p];)if(s?S(f,g):1===f.nodeType)return!1;d=p="only"===t&&!d&&"nextSibling"}return!0}if(d=[a?m.firstChild:m.lastChild],a&&x){for(_=(h=(l=(c=m[y]||(m[y]={}))[t]||[])[0]===v&&l[1])&&l[2],f=h&&m.childNodes[h];f=++h&&f&&f[p]||(_=h=0)||d.pop();)if(1===f.nodeType&&++_&&f===e){c[t]=[v,h,_];break}}else if(x&&(_=h=(l=(c=e[y]||(e[y]={}))[t]||[])[0]===v&&l[1]),!1===_)for(;(f=++h&&f&&f[p]||(_=h=0)||d.pop())&&(!(s?S(f,g):1===f.nodeType)||!++_||(x&&((c=f[y]||(f[y]={}))[t]=[v,_]),f!==e)););return(_-=i)===r||_%r===0&&_/r>=0}}},PSEUDO:function(t,n){var r,i=e.pseudos[t]||e.setFilters[t.toLowerCase()]||J.error("unsupported pseudo: "+t);return i[y]?i(n):i.length>1?(r=[t,t,"",n],e.setFilters.hasOwnProperty(t.toLowerCase())?et(function(t,e){for(var r,o=i(t,n),a=o.length;a--;)t[r=c.call(t,o[a])]=!(e[r]=o[a])}):function(t){return i(t,0,r)}):i}},pseudos:{not:et(function(t){var e=[],n=[],r=yt(t.replace(L,"$1"));return r[y]?et(function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}}),has:et(function(t){return function(e){return J(t,e).length>0}}),contains:et(function(t){return t=t.replace(Q,Y),function(e){return(e.textContent||E.text(e)).indexOf(t)>-1}}),lang:et(function(t){return q.test(t||"")||J.error("unsupported lang: "+t),t=t.replace(Q,Y).toLowerCase(),function(e){var n;do{if(n=f?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(t){var e=r.location&&r.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===l},focus:function(t){return t===function(){try{return u.activeElement}catch(t){}}()&&u.hasFocus()&&!!(t.type||t.href||~t.tabIndex)},enabled:ot(!1),disabled:ot(!0),checked:function(t){return S(t,"input")&&!!t.checked||S(t,"option")&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!e.pseudos.empty(t)},header:function(t){return W.test(t.nodeName)},input:function(t){return H.test(t.nodeName)},button:function(t){return S(t,"input")&&"button"===t.type||S(t,"button")},text:function(t){var e;return S(t,"input")&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:at(function(){return[0]}),last:at(function(t,e){return[e-1]}),eq:at(function(t,e,n){return[n<0?n+e:n]}),even:at(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:at(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:at(function(t,e,n){var r;for(r=n<0?n+e:n>e?e:n;--r>=0;)t.push(r);return t}),gt:at(function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t})}},e.pseudos.nth=e.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})e.pseudos[t]=rt(t);for(t in{submit:!0,reset:!0})e.pseudos[t]=it(t);function lt(){}function ct(t,n){var r,i,o,a,s,u,l,c=b[t+" "];if(c)return n?0:c.slice(0);for(s=t,u=[],l=e.preFilter;s;){for(a in r&&!(i=z.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),r=!1,(i=G.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(L," ")}),s=s.slice(r.length)),e.filter)!(i=U[a].exec(s))||l[a]&&!(i=l[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?J.error(t):b(t,u).slice(0)}function ft(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function ht(t,e,n){var r=e.dir,i=e.next,o=i||r,a=n&&"parentNode"===o,s=x++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||a)return t(e,n,i);return!1}:function(e,n,u){var l,c,f=[v,s];if(u){for(;e=e[r];)if((1===e.nodeType||a)&&t(e,n,u))return!0}else for(;e=e[r];)if(1===e.nodeType||a)if(c=e[y]||(e[y]={}),i&&S(e,i))e=e[r]||e;else{if((l=c[o])&&l[0]===v&&l[1]===s)return f[2]=l[2];if(c[o]=f,f[2]=t(e,n,u))return!0}return!1}}function dt(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function pt(t,e,n,r,i){for(var o,a=[],s=0,u=t.length,l=null!=e;s<u;s++)(o=t[s])&&(n&&!n(o,r,i)||(a.push(o),l&&e.push(s)));return a}function mt(t,e,n,r,i,o){return r&&!r[y]&&(r=mt(r)),i&&!i[y]&&(i=mt(i,o)),et(function(o,a,s,u){var l,f,h,d,p=[],g=[],y=a.length,v=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)J(t,e[r],n);return n}(e||"*",s.nodeType?[s]:s,[]),x=!t||!o&&e?v:pt(v,p,t,s,u);if(n?n(x,d=i||(o?t:y||r)?[]:a,s,u):d=x,r)for(l=pt(d,g),r(l,[],s,u),f=l.length;f--;)(h=l[f])&&(d[g[f]]=!(x[g[f]]=h));if(o){if(i||t){if(i){for(l=[],f=d.length;f--;)(h=d[f])&&l.push(x[f]=h);i(null,d=[],l,u)}for(f=d.length;f--;)(h=d[f])&&(l=i?c.call(o,h):p[f])>-1&&(o[l]=!(a[l]=h))}}else d=pt(d===a?d.splice(y,d.length):d),i?i(null,a,d,u):m.apply(a,d)})}function gt(t){for(var r,i,o,a=t.length,s=e.relative[t[0].type],u=s||e.relative[" "],l=s?1:0,f=ht(function(t){return t===r},u,!0),h=ht(function(t){return c.call(r,t)>-1},u,!0),d=[function(t,e,i){var o=!s&&(i||e!=n)||((r=e).nodeType?f(t,e,i):h(t,e,i));return r=null,o}];l<a;l++)if(i=e.relative[t[l].type])d=[ht(dt(d),i)];else{if((i=e.filter[t[l].type].apply(null,t[l].matches))[y]){for(o=++l;o<a&&!e.relative[t[o].type];o++);return mt(l>1&&dt(d),l>1&&ft(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(L,"$1"),i,l<o&&gt(t.slice(l,o)),o<a&&gt(t=t.slice(o)),o<a&&ft(t))}d.push(i)}return dt(d)}function yt(t,r){var i,o=[],a=[],s=w[t+" "];if(!s){for(r||(r=ct(t)),i=r.length;i--;)(s=gt(r[i]))[y]?o.push(s):a.push(s);s=w(t,function(t,r){var i=r.length>0,o=t.length>0,a=function(a,s,l,c,h){var d,p,g,y=0,x="0",_=a&&[],b=[],w=n,M=a||o&&e.find.TAG("*",h),A=v+=null==w?1:Math.random()||.1,T=M.length;for(h&&(n=s==u||s||h);x!==T&&null!=(d=M[x]);x++){if(o&&d){for(p=0,s||d.ownerDocument==u||(ut(d),l=!f);g=t[p++];)if(g(d,s||u,l)){m.call(c,d);break}h&&(v=A)}i&&((d=!g&&d)&&y--,a&&_.push(d))}if(y+=x,i&&x!==y){for(p=0;g=r[p++];)g(_,b,s,l);if(a){if(y>0)for(;x--;)_[x]||b[x]||(b[x]=C.call(c));b=pt(b)}m.apply(c,b),h&&!a&&b.length>0&&y+r.length>1&&E.uniqueSort(c)}return h&&(v=A,n=w),_};return i?et(a):a}(a,o)),s.selector=t}return s}function vt(t,n,r,i){var o,a,s,u,l,c="function"==typeof t&&t,h=!i&&ct(t=c.selector||t);if(r=r||[],1===h.length){if((a=h[0]=h[0].slice(0)).length>2&&"ID"===(s=a[0]).type&&9===n.nodeType&&f&&e.relative[a[1].type]){if(!(n=(e.find.ID(s.matches[0].replace(Q,Y),n)||[])[0]))return r;c&&(n=n.parentNode),t=t.slice(a.shift().value.length)}for(o=U.needsContext.test(t)?0:a.length;o--&&(s=a[o],!e.relative[u=s.type]);)if((l=e.find[u])&&(i=l(s.matches[0].replace(Q,Y),K.test(a[0].type)&&st(n.parentNode)||n))){if(a.splice(o,1),!(t=i.length&&ft(a)))return m.apply(r,i),r;break}}return(c||yt(t,h))(i,n,!f,r,!n||K.test(t)&&st(n.parentNode)||n),r}lt.prototype=e.filters=e.pseudos,e.setFilters=new lt,g.sortStable=y.split("").sort(A).join("")===y,ut(),g.sortDetached=nt(function(t){return 1&t.compareDocumentPosition(u.createElement("fieldset"))}),E.find=J,E.expr[":"]=E.expr.pseudos,E.unique=E.uniqueSort,J.compile=yt,J.select=vt,J.setDocument=ut,J.tokenize=ct,J.escape=E.escapeSelector,J.getText=E.text,J.isXML=E.isXMLDoc,J.selectors=E.expr,J.support=E.support,J.uniqueSort=E.uniqueSort}();var F=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&E(t).is(n))break;r.push(t)}return r},j=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},z=E.expr.match.needsContext,G=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function B(t,e,n){return y(e)?E.grep(t,function(t,r){return!!e.call(t,r,t)!==n}):e.nodeType?E.grep(t,function(t){return t===e!==n}):"string"!=typeof e?E.grep(t,function(t){return c.call(e,t)>-1!==n}):E.filter(e,t,n)}E.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?E.find.matchesSelector(r,t)?[r]:[]:E.find.matches(t,E.grep(e,function(t){return 1===t.nodeType}))},E.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(E(t).filter(function(){for(e=0;e<r;e++)if(E.contains(i[e],this))return!0}));for(n=this.pushStack([]),e=0;e<r;e++)E.find(t,i[e],n);return r>1?E.uniqueSort(n):n},filter:function(t){return this.pushStack(B(this,t||[],!1))},not:function(t){return this.pushStack(B(this,t||[],!0))},is:function(t){return!!B(this,"string"==typeof t&&z.test(t)?E(t):t||[],!1).length}});var V,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(E.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||V,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:q.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof E?e[0]:e,E.merge(this,E.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:x,!0)),G.test(r[1])&&E.isPlainObject(e))for(r in e)y(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=x.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==n.ready?n.ready(t):t(E):E.makeArray(t,this)}).prototype=E.fn,V=E(x);var U=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function W(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}E.fn.extend({has:function(t){var e=E(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(E.contains(this,e[t]))return!0})},closest:function(t,e){var n,r=0,i=this.length,o=[],a="string"!=typeof t&&E(t);if(!z.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&E.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?E.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?c.call(E(t),this[0]):c.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),E.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return F(t,"parentNode")},parentsUntil:function(t,e,n){return F(t,"parentNode",n)},next:function(t){return W(t,"nextSibling")},prev:function(t){return W(t,"previousSibling")},nextAll:function(t){return F(t,"nextSibling")},prevAll:function(t){return F(t,"previousSibling")},nextUntil:function(t,e,n){return F(t,"nextSibling",n)},prevUntil:function(t,e,n){return F(t,"previousSibling",n)},siblings:function(t){return j((t.parentNode||{}).firstChild,t)},children:function(t){return j(t.firstChild)},contents:function(t){return null!=t.contentDocument&&a(t.contentDocument)?t.contentDocument:(S(t,"template")&&(t=t.content||t),E.merge([],t.childNodes))}},function(t,e){E.fn[t]=function(n,r){var i=E.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=E.filter(r,i)),this.length>1&&(H[t]||E.uniqueSort(i),U.test(t)&&i.reverse()),this.pushStack(i)}});var X=/[^\x20\t\r\n\f]+/g;function K(t){return t}function Q(t){throw t}function Y(t,e,n,r){var i;try{t&&y(i=t.promise)?i.call(t).done(e).fail(n):t&&y(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}E.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return E.each(t.match(X)||[],function(t,n){e[n]=!0}),e}(t):E.extend({},t);var e,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||t.once,r=e=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&t.stopOnFalse&&(s=o.length,n=!1);t.memory||(n=!1),e=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!e&&(s=o.length-1,a.push(n)),function e(n){E.each(n,function(n,r){y(r)?t.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==w(r)&&e(r)})}(arguments),n&&!e&&u()),this},remove:function(){return E.each(arguments,function(t,e){for(var n;(n=E.inArray(e,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(t){return t?E.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||e||(o=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=[t,(n=n||[]).slice?n.slice():n],a.push(n),e||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},E.extend({Deferred:function(t){var e=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return E.Deferred(function(n){E.each(e,function(e,r){var i=y(t[r[4]])&&t[r[4]];o[r[1]](function(){var t=i&&i.apply(this,arguments);t&&y(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[t]:arguments)})}),t=null}).promise()},then:function(t,n,i){var o=0;function a(t,e,n,i){return function(){var s=this,u=arguments,l=function(){var r,l;if(!(t<o)){if((r=n.apply(s,u))===e.promise())throw new TypeError("Thenable self-resolution");l=r&&("object"==typeof r||"function"==typeof r)&&r.then,y(l)?i?l.call(r,a(o,e,K,i),a(o,e,Q,i)):(o++,l.call(r,a(o,e,K,i),a(o,e,Q,i),a(o,e,K,e.notifyWith))):(n!==K&&(s=void 0,u=[r]),(i||e.resolveWith)(s,u))}},c=i?l:function(){try{l()}catch(r){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(r,c.error),t+1>=o&&(n!==Q&&(s=void 0,u=[r]),e.rejectWith(s,u))}};t?c():(E.Deferred.getErrorHook?c.error=E.Deferred.getErrorHook():E.Deferred.getStackHook&&(c.error=E.Deferred.getStackHook()),r.setTimeout(c))}}return E.Deferred(function(r){e[0][3].add(a(0,r,y(i)?i:K,r.notifyWith)),e[1][3].add(a(0,r,y(t)?t:K)),e[2][3].add(a(0,r,y(n)?n:Q))}).promise()},promise:function(t){return null!=t?E.extend(t,i):i}},o={};return E.each(e,function(t,r){var a=r[2],s=r[5];i[r[1]]=a.add,s&&a.add(function(){n=s},e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),a.add(r[3].fire),o[r[0]]=function(){return o[r[0]+"With"](this===o?void 0:this,arguments),this},o[r[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,r=Array(n),i=s.call(arguments),o=E.Deferred(),a=function(t){return function(n){r[t]=this,i[t]=arguments.length>1?s.call(arguments):n,--e||o.resolveWith(r,i)}};if(e<=1&&(Y(t,o.done(a(n)).resolve,o.reject,!e),"pending"===o.state()||y(i[n]&&i[n].then)))return o.then();for(;n--;)Y(i[n],a(n),o.reject);return o.promise()}});var $=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(t,e){r.console&&r.console.warn&&t&&$.test(t.name)&&r.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},E.readyException=function(t){r.setTimeout(function(){throw t})};var Z=E.Deferred();function J(){x.removeEventListener("DOMContentLoaded",J),r.removeEventListener("load",J),E.ready()}E.fn.ready=function(t){return Z.then(t).catch(function(t){E.readyException(t)}),this},E.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==t&&--E.readyWait>0||Z.resolveWith(x,[E]))}}),E.ready.then=Z.then,"complete"===x.readyState||"loading"!==x.readyState&&!x.documentElement.doScroll?r.setTimeout(E.ready):(x.addEventListener("DOMContentLoaded",J),r.addEventListener("load",J));var tt=function(t,e,n,r,i,o,a){var s=0,u=t.length,l=null==n;if("object"===w(n))for(s in i=!0,n)tt(t,e,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,y(r)||(a=!0),l&&(a?(e.call(t,r),e=null):(l=e,e=function(t,e,n){return l.call(E(t),n)})),e))for(;s<u;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:l?e.call(t):u?e(t[0],n):o},et=/^-ms-/,nt=/-([a-z])/g;function rt(t,e){return e.toUpperCase()}function it(t){return t.replace(et,"ms-").replace(nt,rt)}var ot=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function at(){this.expando=E.expando+at.uid++}at.uid=1,at.prototype={cache:function(t){var e=t[this.expando];return e||(e={},ot(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[it(e)]=n;else for(r in e)i[it(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][it(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(it):(e=it(e))in r?[e]:e.match(X)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||E.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!E.isEmptyObject(e)}};var st=new at,ut=new at,lt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ct=/[A-Z]/g;function ft(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(ct,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:lt.test(t)?JSON.parse(t):t)}(n)}catch(t){}ut.set(t,e,n)}else n=void 0;return n}E.extend({hasData:function(t){return ut.hasData(t)||st.hasData(t)},data:function(t,e,n){return ut.access(t,e,n)},removeData:function(t,e){ut.remove(t,e)},_data:function(t,e,n){return st.access(t,e,n)},_removeData:function(t,e){st.remove(t,e)}}),E.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=ut.get(o),1===o.nodeType&&!st.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=it(r.slice(5)),ft(o,r,i[r]));st.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){ut.set(this,t)}):tt(this,function(e){var n;if(o&&void 0===e)return void 0!==(n=ut.get(o,t))||void 0!==(n=ft(o,t))?n:void 0;this.each(function(){ut.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){ut.remove(this,t)})}}),E.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=st.get(t,e),n&&(!r||Array.isArray(n)?r=st.access(t,e,E.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=E.queue(t,e),r=n.length,i=n.shift(),o=E._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,function(){E.dequeue(t,e)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return st.get(t,n)||st.access(t,n,{empty:E.Callbacks("once memory").add(function(){st.remove(t,[e+"queue",n])})})}}),E.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?E.queue(this[0],t):void 0===e?this:this.each(function(){var n=E.queue(this,t,e);E._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&E.dequeue(this,t)})},dequeue:function(t){return this.each(function(){E.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=E.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=st.get(o[a],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var ht=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,dt=new RegExp("^(?:([+-])=|)("+ht+")([a-z%]*)$","i"),pt=["Top","Right","Bottom","Left"],mt=x.documentElement,gt=function(t){return E.contains(t.ownerDocument,t)},yt={composed:!0};mt.getRootNode&&(gt=function(t){return E.contains(t.ownerDocument,t)||t.getRootNode(yt)===t.ownerDocument});var vt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&gt(t)&&"none"===E.css(t,"display")};function xt(t,e,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return E.css(t,e,"")},u=s(),l=n&&n[3]||(E.cssNumber[e]?"":"px"),c=t.nodeType&&(E.cssNumber[e]||"px"!==l&&+u)&&dt.exec(E.css(t,e));if(c&&c[3]!==l){for(u/=2,l=l||c[3],c=+u||1;a--;)E.style(t,e,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,E.style(t,e,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var _t={};function bt(t){var e,n=t.ownerDocument,r=t.nodeName,i=_t[r];return i||(e=n.body.appendChild(n.createElement(r)),i=E.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),_t[r]=i,i)}function wt(t,e){for(var n,r,i=[],o=0,a=t.length;o<a;o++)(r=t[o]).style&&(n=r.style.display,e?("none"===n&&(i[o]=st.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&vt(r)&&(i[o]=bt(r))):"none"!==n&&(i[o]="none",st.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(t[o].style.display=i[o]);return t}E.fn.extend({show:function(){return wt(this,!0)},hide:function(){return wt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){vt(this)?E(this).show():E(this).hide()})}});var Mt,At,Et=/^(?:checkbox|radio)$/i,Tt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,St=/^$|^module$|\/(?:java|ecma)script/i;Mt=x.createDocumentFragment().appendChild(x.createElement("div")),(At=x.createElement("input")).setAttribute("type","radio"),At.setAttribute("checked","checked"),At.setAttribute("name","t"),Mt.appendChild(At),g.checkClone=Mt.cloneNode(!0).cloneNode(!0).lastChild.checked,Mt.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!Mt.cloneNode(!0).lastChild.defaultValue,Mt.innerHTML="<option></option>",g.option=!!Mt.lastChild;var Ct={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function kt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&S(t,e)?E.merge([t],n):n}function Pt(t,e){for(var n=0,r=t.length;n<r;n++)st.set(t[n],"globalEval",!e||st.get(e[n],"globalEval"))}Ct.tbody=Ct.tfoot=Ct.colgroup=Ct.caption=Ct.thead,Ct.th=Ct.td,g.option||(Ct.optgroup=Ct.option=[1,"<select multiple='multiple'>","</select>"]);var Ot=/<|&#?\w+;/;function Lt(t,e,n,r,i){for(var o,a,s,u,l,c,f=e.createDocumentFragment(),h=[],d=0,p=t.length;d<p;d++)if((o=t[d])||0===o)if("object"===w(o))E.merge(h,o.nodeType?[o]:o);else if(Ot.test(o)){for(a=a||f.appendChild(e.createElement("div")),s=(Tt.exec(o)||["",""])[1].toLowerCase(),u=Ct[s]||Ct._default,a.innerHTML=u[1]+E.htmlPrefilter(o)+u[2],c=u[0];c--;)a=a.lastChild;E.merge(h,a.childNodes),(a=f.firstChild).textContent=""}else h.push(e.createTextNode(o));for(f.textContent="",d=0;o=h[d++];)if(r&&E.inArray(o,r)>-1)i&&i.push(o);else if(l=gt(o),a=kt(f.appendChild(o),"script"),l&&Pt(a),n)for(c=0;o=a[c++];)St.test(o.type||"")&&n.push(o);return f}var It=/^([^.]*)(?:\.(.+)|)/;function Rt(){return!0}function Dt(){return!1}function Nt(t,e,n,r,i,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(r=r||n,n=void 0),e)Nt(t,s,n,r,e[s],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Dt;else if(!i)return t;return 1===o&&(a=i,i=function(t){return E().off(t),a.apply(this,arguments)},i.guid=a.guid||(a.guid=E.guid++)),t.each(function(){E.event.add(this,e,i,r,n)})}function Ft(t,e,n){n?(st.set(t,e,!1),E.event.add(t,e,{namespace:!1,handler:function(t){var n,r=st.get(this,e);if(1&t.isTrigger&&this[e]){if(r)(E.event.special[e]||{}).delegateType&&t.stopPropagation();else if(r=s.call(arguments),st.set(this,e,r),this[e](),n=st.get(this,e),st.set(this,e,!1),r!==n)return t.stopImmediatePropagation(),t.preventDefault(),n}else r&&(st.set(this,e,E.event.trigger(r[0],r.slice(1),this)),t.stopPropagation(),t.isImmediatePropagationStopped=Rt)}})):void 0===st.get(t,e)&&E.event.add(t,e,Rt)}E.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,h,d,p,m,g=st.get(t);if(ot(t))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&E.find.matchesSelector(mt,i),n.guid||(n.guid=E.guid++),(u=g.events)||(u=g.events=Object.create(null)),(a=g.handle)||(a=g.handle=function(e){return void 0!==E&&E.event.triggered!==e.type?E.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(X)||[""]).length;l--;)d=m=(s=It.exec(e[l])||[])[1],p=(s[2]||"").split(".").sort(),d&&(f=E.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=E.event.special[d]||{},c=E.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&E.expr.match.needsContext.test(i),namespace:p.join(".")},o),(h=u[d])||((h=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,p,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,c):h.push(c),E.event.global[d]=!0)},remove:function(t,e,n,r,i){var o,a,s,u,l,c,f,h,d,p,m,g=st.hasData(t)&&st.get(t);if(g&&(u=g.events)){for(l=(e=(e||"").match(X)||[""]).length;l--;)if(d=m=(s=It.exec(e[l])||[])[1],p=(s[2]||"").split(".").sort(),d){for(f=E.event.special[d]||{},h=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=h.length;o--;)c=h[o],!i&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(h.splice(o,1),c.selector&&h.delegateCount--,f.remove&&f.remove.call(t,c));a&&!h.length&&(f.teardown&&!1!==f.teardown.call(t,p,g.handle)||E.removeEvent(t,d,g.handle),delete u[d])}else for(d in u)E.event.remove(t,d+e[l],n,r,!0);E.isEmptyObject(u)&&st.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,a,s=new Array(arguments.length),u=E.event.fix(t),l=(st.get(this,"events")||Object.create(null))[u.type]||[],c=E.event.special[u.type]||{};for(s[0]=u,e=1;e<arguments.length;e++)s[e]=arguments[e];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){for(a=E.event.handlers.call(this,u,l),e=0;(i=a[e++])&&!u.isPropagationStopped();)for(u.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((E.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(t,e){var n,r,i,o,a,s=[],u=e.delegateCount,l=t.target;if(u&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=e[n]).selector+" "]&&(a[i]=r.needsContext?E(i,this).index(l)>-1:E.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<e.length&&s.push({elem:l,handlers:e.slice(u)}),s},addProp:function(t,e){Object.defineProperty(E.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[E.expando]?t:new E.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return Et.test(e.type)&&e.click&&S(e,"input")&&Ft(e,"click",!0),!1},trigger:function(t){var e=this||t;return Et.test(e.type)&&e.click&&S(e,"input")&&Ft(e,"click"),!0},_default:function(t){var e=t.target;return Et.test(e.type)&&e.click&&S(e,"input")&&st.get(e,"click")||S(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},E.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},E.Event=function(t,e){if(!(this instanceof E.Event))return new E.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Rt:Dt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&E.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:Dt,isPropagationStopped:Dt,isImmediatePropagationStopped:Dt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Rt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Rt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Rt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},function(t,e){function n(t){if(x.documentMode){var n=st.get(this,"handle"),r=E.event.fix(t);r.type="focusin"===t.type?"focus":"blur",r.isSimulated=!0,n(t),r.target===r.currentTarget&&n(r)}else E.event.simulate(e,t.target,E.event.fix(t))}E.event.special[t]={setup:function(){var r;if(Ft(this,t,!0),!x.documentMode)return!1;(r=st.get(this,e))||this.addEventListener(e,n),st.set(this,e,(r||0)+1)},trigger:function(){return Ft(this,t),!0},teardown:function(){var t;if(!x.documentMode)return!1;(t=st.get(this,e)-1)?st.set(this,e,t):(this.removeEventListener(e,n),st.remove(this,e))},_default:function(e){return st.get(e.target,t)},delegateType:e},E.event.special[e]={setup:function(){var r=this.ownerDocument||this.document||this,i=x.documentMode?this:r,o=st.get(i,e);o||(x.documentMode?this.addEventListener(e,n):r.addEventListener(t,n,!0)),st.set(i,e,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=x.documentMode?this:r,o=st.get(i,e)-1;o?st.set(i,e,o):(x.documentMode?this.removeEventListener(e,n):r.removeEventListener(t,n,!0),st.remove(i,e))}}}),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){E.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=t.relatedTarget,i=t.handleObj;return r&&(r===this||E.contains(this,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}}),E.fn.extend({on:function(t,e,n,r){return Nt(this,t,e,n,r)},one:function(t,e,n,r){return Nt(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,E(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Dt),this.each(function(){E.event.remove(this,t,n,e)})}});var jt=/<script|<style|<link/i,zt=/checked\s*(?:[^=]|=\s*.checked.)/i,Gt=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Bt(t,e){return S(t,"table")&&S(11!==e.nodeType?e:e.firstChild,"tr")&&E(t).children("tbody")[0]||t}function Vt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function qt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Ut(t,e){var n,r,i,o,a,s;if(1===e.nodeType){if(st.hasData(t)&&(s=st.get(t).events))for(i in st.remove(e,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)E.event.add(e,i,s[i][n]);ut.hasData(t)&&(o=ut.access(t),a=E.extend({},o),ut.set(e,a))}}function Ht(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Et.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Wt(t,e,n,r){e=u(e);var i,o,a,s,l,c,f=0,h=t.length,d=h-1,p=e[0],m=y(p);if(m||h>1&&"string"==typeof p&&!g.checkClone&&zt.test(p))return t.each(function(i){var o=t.eq(i);m&&(e[0]=p.call(this,i,o.html())),Wt(o,e,n,r)});if(h&&(o=(i=Lt(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=(a=E.map(kt(i,"script"),Vt)).length;f<h;f++)l=i,f!==d&&(l=E.clone(l,!0,!0),s&&E.merge(a,kt(l,"script"))),n.call(t[f],l,f);if(s)for(c=a[a.length-1].ownerDocument,E.map(a,qt),f=0;f<s;f++)l=a[f],St.test(l.type||"")&&!st.access(l,"globalEval")&&E.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?E._evalUrl&&!l.noModule&&E._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):b(l.textContent.replace(Gt,""),l,c))}return t}function Xt(t,e,n){for(var r,i=e?E.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||E.cleanData(kt(r)),r.parentNode&&(n&&gt(r)&&Pt(kt(r,"script")),r.parentNode.removeChild(r));return t}E.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var r,i,o,a,s=t.cloneNode(!0),u=gt(t);if(!(g.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||E.isXMLDoc(t)))for(a=kt(s),r=0,i=(o=kt(t)).length;r<i;r++)Ht(o[r],a[r]);if(e)if(n)for(o=o||kt(t),a=a||kt(s),r=0,i=o.length;r<i;r++)Ut(o[r],a[r]);else Ut(t,s);return(a=kt(s,"script")).length>0&&Pt(a,!u&&kt(t,"script")),s},cleanData:function(t){for(var e,n,r,i=E.event.special,o=0;void 0!==(n=t[o]);o++)if(ot(n)){if(e=n[st.expando]){if(e.events)for(r in e.events)i[r]?E.event.remove(n,r):E.removeEvent(n,r,e.handle);n[st.expando]=void 0}n[ut.expando]&&(n[ut.expando]=void 0)}}}),E.fn.extend({detach:function(t){return Xt(this,t,!0)},remove:function(t){return Xt(this,t)},text:function(t){return tt(this,function(t){return void 0===t?E.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Wt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Bt(this,t).appendChild(t)})},prepend:function(){return Wt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Bt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Wt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Wt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(E.cleanData(kt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return E.clone(this,t,e)})},html:function(t){return tt(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!jt.test(t)&&!Ct[(Tt.exec(t)||["",""])[1].toLowerCase()]){t=E.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(E.cleanData(kt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Wt(this,arguments,function(e){var n=this.parentNode;E.inArray(this,t)<0&&(E.cleanData(kt(this)),n&&n.replaceChild(e,this))},t)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){E.fn[t]=function(t){for(var n,r=[],i=E(t),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),E(i[a])[e](n),l.apply(r,n.get());return this.pushStack(r)}});var Kt=new RegExp("^("+ht+")(?!px)[a-z%]+$","i"),Qt=/^--/,Yt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=r),e.getComputedStyle(t)},$t=function(t,e,n){var r,i,o={};for(i in e)o[i]=t.style[i],t.style[i]=e[i];for(i in r=n.call(t),e)t.style[i]=o[i];return r},Zt=new RegExp(pt.join("|"),"i");function Jt(t,e,n){var r,i,o,a,s=Qt.test(e),u=t.style;return(n=n||Yt(t))&&(a=n.getPropertyValue(e)||n[e],s&&a&&(a=a.replace(L,"$1")||void 0),""!==a||gt(t)||(a=E.style(t,e)),!g.pixelBoxStyles()&&Kt.test(a)&&Zt.test(e)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=n.width,u.width=r,u.minWidth=i,u.maxWidth=o)),void 0!==a?a+"":a}function te(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",mt.appendChild(l).appendChild(c);var t=r.getComputedStyle(c);n="1%"!==t.top,u=12===e(t.marginLeft),c.style.right="60%",a=36===e(t.right),i=36===e(t.width),c.style.position="absolute",o=12===e(c.offsetWidth/3),mt.removeChild(l),c=null}}function e(t){return Math.round(parseFloat(t))}var n,i,o,a,s,u,l=x.createElement("div"),c=x.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===c.style.backgroundClip,E.extend(g,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,e,n,i;return null==s&&(t=x.createElement("table"),e=x.createElement("tr"),n=x.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="box-sizing:content-box;border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",mt.appendChild(t).appendChild(e).appendChild(n),i=r.getComputedStyle(e),s=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===e.offsetHeight,mt.removeChild(t)),s}}))}();var ee=["Webkit","Moz","ms"],ne=x.createElement("div").style,re={};function ie(t){var e=E.cssProps[t]||re[t];return e||(t in ne?t:re[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=ee.length;n--;)if((t=ee[n]+e)in ne)return t}(t)||t)}var oe=/^(none|table(?!-c[ea]).+)/,ae={position:"absolute",visibility:"hidden",display:"block"},se={letterSpacing:"0",fontWeight:"400"};function ue(t,e,n){var r=dt.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function le(t,e,n,r,i,o){var a="width"===e?1:0,s=0,u=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=E.css(t,n+pt[a],!0,i)),r?("content"===n&&(u-=E.css(t,"padding"+pt[a],!0,i)),"margin"!==n&&(u-=E.css(t,"border"+pt[a]+"Width",!0,i))):(u+=E.css(t,"padding"+pt[a],!0,i),"padding"!==n?u+=E.css(t,"border"+pt[a]+"Width",!0,i):s+=E.css(t,"border"+pt[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-u-s-.5))||0),u+l}function ce(t,e,n){var r=Yt(t),i=(!g.boxSizingReliable()||n)&&"border-box"===E.css(t,"boxSizing",!1,r),o=i,a=Jt(t,e,r),s="offset"+e[0].toUpperCase()+e.slice(1);if(Kt.test(a)){if(!n)return a;a="auto"}return(!g.boxSizingReliable()&&i||!g.reliableTrDimensions()&&S(t,"tr")||"auto"===a||!parseFloat(a)&&"inline"===E.css(t,"display",!1,r))&&t.getClientRects().length&&(i="border-box"===E.css(t,"boxSizing",!1,r),(o=s in t)&&(a=t[s])),(a=parseFloat(a)||0)+le(t,e,n||(i?"border":"content"),o,r,a)+"px"}function fe(t,e,n,r,i){return new fe.prototype.init(t,e,n,r,i)}E.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Jt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=it(e),u=Qt.test(e),l=t.style;if(u||(e=ie(s)),a=E.cssHooks[e]||E.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:l[e];"string"===(o=typeof n)&&(i=dt.exec(n))&&i[1]&&(n=xt(t,e,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(E.cssNumber[s]?"":"px")),g.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(u?l.setProperty(e,n):l[e]=n))}},css:function(t,e,n,r){var i,o,a,s=it(e);return Qt.test(e)||(e=ie(s)),(a=E.cssHooks[e]||E.cssHooks[s])&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=Jt(t,e,r)),"normal"===i&&e in se&&(i=se[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),E.each(["height","width"],function(t,e){E.cssHooks[e]={get:function(t,n,r){if(n)return!oe.test(E.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ce(t,e,r):$t(t,ae,function(){return ce(t,e,r)})},set:function(t,n,r){var i,o=Yt(t),a=!g.scrollboxSize()&&"absolute"===o.position,s=(a||r)&&"border-box"===E.css(t,"boxSizing",!1,o),u=r?le(t,e,r,s,o):0;return s&&a&&(u-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-le(t,e,"border",!1,o)-.5)),u&&(i=dt.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=E.css(t,e)),ue(0,n,u)}}}),E.cssHooks.marginLeft=te(g.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Jt(t,"marginLeft"))||t.getBoundingClientRect().left-$t(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),E.each({margin:"",padding:"",border:"Width"},function(t,e){E.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+pt[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(E.cssHooks[t+e].set=ue)}),E.fn.extend({css:function(t,e){return tt(this,function(t,e,n){var r,i,o={},a=0;if(Array.isArray(e)){for(r=Yt(t),i=e.length;a<i;a++)o[e[a]]=E.css(t,e[a],!1,r);return o}return void 0!==n?E.style(t,e,n):E.css(t,e)},t,e,arguments.length>1)}}),E.Tween=fe,fe.prototype={constructor:fe,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||E.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(E.cssNumber[n]?"":"px")},cur:function(){var t=fe.propHooks[this.prop];return t&&t.get?t.get(this):fe.propHooks._default.get(this)},run:function(t){var e,n=fe.propHooks[this.prop];return this.options.duration?this.pos=e=E.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):fe.propHooks._default.set(this),this}},fe.prototype.init.prototype=fe.prototype,fe.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=E.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){E.fx.step[t.prop]?E.fx.step[t.prop](t):1!==t.elem.nodeType||!E.cssHooks[t.prop]&&null==t.elem.style[ie(t.prop)]?t.elem[t.prop]=t.now:E.style(t.elem,t.prop,t.now+t.unit)}}},fe.propHooks.scrollTop=fe.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},E.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},E.fx=fe.prototype.init,E.fx.step={};var he,de,pe=/^(?:toggle|show|hide)$/,me=/queueHooks$/;function ge(){de&&(!1===x.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(ge):r.setTimeout(ge,E.fx.interval),E.fx.tick())}function ye(){return r.setTimeout(function(){he=void 0}),he=Date.now()}function ve(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=pt[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function xe(t,e,n){for(var r,i=(_e.tweeners[e]||[]).concat(_e.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,e,t))return r}function _e(t,e,n){var r,i,o=0,a=_e.prefilters.length,s=E.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var e=he||ye(),n=Math.max(0,l.startTime+l.duration-e),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(r);return s.notifyWith(t,[l,r,n]),r<1&&a?n:(a||s.notifyWith(t,[l,1,0]),s.resolveWith(t,[l]),!1)},l=s.promise({elem:t,props:E.extend({},e),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},n),originalProperties:e,originalOptions:n,startTime:he||ye(),duration:n.duration,tweens:[],createTween:function(e,n){var r=E.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(r),r},stop:function(e){var n=0,r=e?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return e?(s.notifyWith(t,[l,1,0]),s.resolveWith(t,[l,e])):s.rejectWith(t,[l,e]),this}}),c=l.props;for(!function(t,e){var n,r,i,o,a;for(n in t)if(i=e[r=it(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(a=E.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(c,l.opts.specialEasing);o<a;o++)if(r=_e.prefilters[o].call(l,t,c,l.opts))return y(r.stop)&&(E._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return E.map(c,xe,l),y(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),E.fx.timer(E.extend(u,{elem:t,anim:l,queue:l.opts.queue})),l}E.Animation=E.extend(_e,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return xt(n.elem,t,dt.exec(e),n),n}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(X);for(var n,r=0,i=t.length;r<i;r++)n=t[r],_e.tweeners[n]=_e.tweeners[n]||[],_e.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var r,i,o,a,s,u,l,c,f="width"in e||"height"in e,h=this,d={},p=t.style,m=t.nodeType&&vt(t),g=st.get(t,"fxshow");for(r in n.queue||(null==(a=E._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,E.queue(t,"fx").length||a.empty.fire()})})),e)if(i=e[r],pe.test(i)){if(delete e[r],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;m=!0}d[r]=g&&g[r]||E.style(t,r)}if((u=!E.isEmptyObject(e))||!E.isEmptyObject(d))for(r in f&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=g&&g.display)&&(l=st.get(t,"display")),"none"===(c=E.css(t,"display"))&&(l?c=l:(wt([t],!0),l=t.style.display||l,c=E.css(t,"display"),wt([t]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===E.css(t,"float")&&(u||(h.done(function(){p.display=l}),null==l&&(c=p.display,l="none"===c?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),u=!1,d)u||(g?"hidden"in g&&(m=g.hidden):g=st.access(t,"fxshow",{display:l}),o&&(g.hidden=!m),m&&wt([t],!0),h.done(function(){for(r in m||wt([t]),st.remove(t,"fxshow"),d)E.style(t,r,d[r])})),u=xe(m?g[r]:0,r,h),r in g||(g[r]=u.start,m&&(u.end=u.start,u.start=0))}],prefilter:function(t,e){e?_e.prefilters.unshift(t):_e.prefilters.push(t)}}),E.speed=function(t,e,n){var r=t&&"object"==typeof t?E.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};return E.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in E.fx.speeds?r.duration=E.fx.speeds[r.duration]:r.duration=E.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&E.dequeue(this,r.queue)},r},E.fn.extend({fadeTo:function(t,e,n,r){return this.filter(vt).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=E.isEmptyObject(t),o=E.speed(e,n,r),a=function(){var e=_e(this,E.extend({},t),o);(i||st.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=E.timers,a=st.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&me.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||E.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=st.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=E.timers,a=r?r.length:0;for(n.finish=!0,E.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),E.each(["toggle","show","hide"],function(t,e){var n=E.fn[e];E.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ve(e,!0),t,r,i)}}),E.each({slideDown:ve("show"),slideUp:ve("hide"),slideToggle:ve("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){E.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),E.timers=[],E.fx.tick=function(){var t,e=0,n=E.timers;for(he=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||E.fx.stop(),he=void 0},E.fx.timer=function(t){E.timers.push(t),E.fx.start()},E.fx.interval=13,E.fx.start=function(){de||(de=!0,ge())},E.fx.stop=function(){de=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(t,e){return t=E.fx&&E.fx.speeds[t]||t,e=e||"fx",this.queue(e,function(e,n){var i=r.setTimeout(e,t);n.stop=function(){r.clearTimeout(i)}})},function(){var t=x.createElement("input"),e=x.createElement("select").appendChild(x.createElement("option"));t.type="checkbox",g.checkOn=""!==t.value,g.optSelected=e.selected,(t=x.createElement("input")).value="t",t.type="radio",g.radioValue="t"===t.value}();var be,we=E.expr.attrHandle;E.fn.extend({attr:function(t,e){return tt(this,E.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){E.removeAttr(this,t)})}}),E.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?E.prop(t,e,n):(1===o&&E.isXMLDoc(t)||(i=E.attrHooks[e.toLowerCase()]||(E.expr.match.bool.test(e)?be:void 0)),void 0!==n?null===n?void E.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=E.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!g.radioValue&&"radio"===e&&S(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(X);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),be={set:function(t,e,n){return!1===e?E.removeAttr(t,n):t.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),function(t,e){var n=we[e]||E.find.attr;we[e]=function(t,e,r){var i,o,a=e.toLowerCase();return r||(o=we[a],we[a]=i,i=null!=n(t,e,r)?a:null,we[a]=o),i}});var Me=/^(?:input|select|textarea|button)$/i,Ae=/^(?:a|area)$/i;function Ee(t){return(t.match(X)||[]).join(" ")}function Te(t){return t.getAttribute&&t.getAttribute("class")||""}function Se(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(X)||[]}E.fn.extend({prop:function(t,e){return tt(this,E.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[E.propFix[t]||t]})}}),E.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&E.isXMLDoc(t)||(e=E.propFix[e]||e,i=E.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=E.find.attr(t,"tabindex");return e?parseInt(e,10):Me.test(t.nodeName)||Ae.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(E.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){E.propFix[this.toLowerCase()]=this}),E.fn.extend({addClass:function(t){var e,n,r,i,o,a;return y(t)?this.each(function(e){E(this).addClass(t.call(this,e,Te(this)))}):(e=Se(t)).length?this.each(function(){if(r=Te(this),n=1===this.nodeType&&" "+Ee(r)+" "){for(o=0;o<e.length;o++)i=e[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");a=Ee(n),r!==a&&this.setAttribute("class",a)}}):this},removeClass:function(t){var e,n,r,i,o,a;return y(t)?this.each(function(e){E(this).removeClass(t.call(this,e,Te(this)))}):arguments.length?(e=Se(t)).length?this.each(function(){if(r=Te(this),n=1===this.nodeType&&" "+Ee(r)+" "){for(o=0;o<e.length;o++)for(i=e[o];n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");a=Ee(n),r!==a&&this.setAttribute("class",a)}}):this:this.attr("class","")},toggleClass:function(t,e){var n,r,i,o,a=typeof t,s="string"===a||Array.isArray(t);return y(t)?this.each(function(n){E(this).toggleClass(t.call(this,n,Te(this),e),e)}):"boolean"==typeof e&&s?e?this.addClass(t):this.removeClass(t):(n=Se(t),this.each(function(){if(s)for(o=E(this),i=0;i<n.length;i++)r=n[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==t&&"boolean"!==a||((r=Te(this))&&st.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===t?"":st.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+Ee(Te(n))+" ").indexOf(e)>-1)return!0;return!1}});var Ce=/\r/g;E.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=y(t),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,E(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=E.map(i,function(t){return null==t?"":t+""})),(e=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))})):i?(e=E.valHooks[i.type]||E.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(Ce,""):null==n?"":n:void 0}}),E.extend({valHooks:{option:{get:function(t){var e=E.find.attr(t,"value");return null!=e?e:Ee(E.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!S(n.parentNode,"optgroup"))){if(e=E(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,o=E.makeArray(e),a=i.length;a--;)((r=i[a]).selected=E.inArray(E.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),E.each(["radio","checkbox"],function(){E.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=E.inArray(E(t).val(),e)>-1}},g.checkOn||(E.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var ke=r.location,Pe={guid:Date.now()},Oe=/\?/;E.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new r.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||E.error("Invalid XML: "+(n?E.map(n.childNodes,function(t){return t.textContent}).join("\n"):t)),e};var Le=/^(?:focusinfocus|focusoutblur)$/,Ie=function(t){t.stopPropagation()};E.extend(E.event,{trigger:function(t,e,n,i){var o,a,s,u,l,c,f,h,p=[n||x],m=d.call(t,"type")?t.type:t,g=d.call(t,"namespace")?t.namespace.split("."):[];if(a=h=s=n=n||x,3!==n.nodeType&&8!==n.nodeType&&!Le.test(m+E.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),l=m.indexOf(":")<0&&"on"+m,(t=t[E.expando]?t:new E.Event(m,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:E.makeArray(e,[t]),f=E.event.special[m]||{},i||!f.trigger||!1!==f.trigger.apply(n,e))){if(!i&&!f.noBubble&&!v(n)){for(u=f.delegateType||m,Le.test(u+m)||(a=a.parentNode);a;a=a.parentNode)p.push(a),s=a;s===(n.ownerDocument||x)&&p.push(s.defaultView||s.parentWindow||r)}for(o=0;(a=p[o++])&&!t.isPropagationStopped();)h=a,t.type=o>1?u:f.bindType||m,(c=(st.get(a,"events")||Object.create(null))[t.type]&&st.get(a,"handle"))&&c.apply(a,e),(c=l&&a[l])&&c.apply&&ot(a)&&(t.result=c.apply(a,e),!1===t.result&&t.preventDefault());return t.type=m,i||t.isDefaultPrevented()||f._default&&!1!==f._default.apply(p.pop(),e)||!ot(n)||l&&y(n[m])&&!v(n)&&((s=n[l])&&(n[l]=null),E.event.triggered=m,t.isPropagationStopped()&&h.addEventListener(m,Ie),n[m](),t.isPropagationStopped()&&h.removeEventListener(m,Ie),E.event.triggered=void 0,s&&(n[l]=s)),t.result}},simulate:function(t,e,n){var r=E.extend(new E.Event,n,{type:t,isSimulated:!0});E.event.trigger(r,null,e)}}),E.fn.extend({trigger:function(t,e){return this.each(function(){E.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return E.event.trigger(t,e,n,!0)}});var Re=/\[\]$/,De=/\r?\n/g,Ne=/^(?:submit|button|image|reset|file)$/i,Fe=/^(?:input|select|textarea|keygen)/i;function je(t,e,n,r){var i;if(Array.isArray(e))E.each(e,function(e,i){n||Re.test(t)?r(t,i):je(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)});else if(n||"object"!==w(e))r(t,e);else for(i in e)je(t+"["+i+"]",e[i],n,r)}E.param=function(t,e){var n,r=[],i=function(t,e){var n=y(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!E.isPlainObject(t))E.each(t,function(){i(this.name,this.value)});else for(n in t)je(n,t[n],e,i);return r.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=E.prop(this,"elements");return t?E.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!E(this).is(":disabled")&&Fe.test(this.nodeName)&&!Ne.test(t)&&(this.checked||!Et.test(t))}).map(function(t,e){var n=E(this).val();return null==n?null:Array.isArray(n)?E.map(n,function(t){return{name:e.name,value:t.replace(De,"\r\n")}}):{name:e.name,value:n.replace(De,"\r\n")}}).get()}});var ze=/%20/g,Ge=/#.*$/,Be=/([?&])_=[^&]*/,Ve=/^(.*?):[ \t]*([^\r\n]*)$/gm,qe=/^(?:GET|HEAD)$/,Ue=/^\/\//,He={},We={},Xe="*/".concat("*"),Ke=x.createElement("a");function Qe(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(X)||[];if(y(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function Ye(t,e,n,r){var i={},o=t===We;function a(s){var u;return i[s]=!0,E.each(t[s]||[],function(t,s){var l=s(e,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):void 0:(e.dataTypes.unshift(l),a(l),!1)}),u}return a(e.dataTypes[0])||!i["*"]&&a("*")}function $e(t,e){var n,r,i=E.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&E.extend(!0,t,r),t}Ke.href=ke.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ke.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ke.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?$e($e(t,E.ajaxSettings),e):$e(E.ajaxSettings,t)},ajaxPrefilter:Qe(He),ajaxTransport:Qe(We),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,i,o,a,s,u,l,c,f,h,d=E.ajaxSetup({},e),p=d.context||d,m=d.context&&(p.nodeType||p.jquery)?E(p):E.event,g=E.Deferred(),y=E.Callbacks("once memory"),v=d.statusCode||{},_={},b={},w="canceled",M={readyState:0,getResponseHeader:function(t){var e;if(l){if(!a)for(a={};e=Ve.exec(o);)a[e[1].toLowerCase()+" "]=(a[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=a[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return l?o:null},setRequestHeader:function(t,e){return null==l&&(t=b[t.toLowerCase()]=b[t.toLowerCase()]||t,_[t]=e),this},overrideMimeType:function(t){return null==l&&(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)M.always(t[M.status]);else for(e in t)v[e]=[v[e],t[e]];return this},abort:function(t){var e=t||w;return n&&n.abort(e),A(0,e),this}};if(g.promise(M),d.url=((t||d.url||ke.href)+"").replace(Ue,ke.protocol+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(X)||[""],null==d.crossDomain){u=x.createElement("a");try{u.href=d.url,u.href=u.href,d.crossDomain=Ke.protocol+"//"+Ke.host!=u.protocol+"//"+u.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=E.param(d.data,d.traditional)),Ye(He,d,e,M),l)return M;for(f in(c=E.event&&d.global)&&0===E.active++&&E.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!qe.test(d.type),i=d.url.replace(Ge,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(ze,"+")):(h=d.url.slice(i.length),d.data&&(d.processData||"string"==typeof d.data)&&(i+=(Oe.test(i)?"&":"?")+d.data,delete d.data),!1===d.cache&&(i=i.replace(Be,"$1"),h=(Oe.test(i)?"&":"?")+"_="+Pe.guid+++h),d.url=i+h),d.ifModified&&(E.lastModified[i]&&M.setRequestHeader("If-Modified-Since",E.lastModified[i]),E.etag[i]&&M.setRequestHeader("If-None-Match",E.etag[i])),(d.data&&d.hasContent&&!1!==d.contentType||e.contentType)&&M.setRequestHeader("Content-Type",d.contentType),M.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Xe+"; q=0.01":""):d.accepts["*"]),d.headers)M.setRequestHeader(f,d.headers[f]);if(d.beforeSend&&(!1===d.beforeSend.call(p,M,d)||l))return M.abort();if(w="abort",y.add(d.complete),M.done(d.success),M.fail(d.error),n=Ye(We,d,e,M)){if(M.readyState=1,c&&m.trigger("ajaxSend",[M,d]),l)return M;d.async&&d.timeout>0&&(s=r.setTimeout(function(){M.abort("timeout")},d.timeout));try{l=!1,n.send(_,A)}catch(t){if(l)throw t;A(-1,t)}}else A(-1,"No Transport");function A(t,e,a,u){var f,h,x,_,b,w=e;l||(l=!0,s&&r.clearTimeout(s),n=void 0,o=u||"",M.readyState=t>0?4:0,f=t>=200&&t<300||304===t,a&&(_=function(t,e,n){for(var r,i,o,a,s=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(d,M,a)),!f&&E.inArray("script",d.dataTypes)>-1&&E.inArray("json",d.dataTypes)<0&&(d.converters["text script"]=function(){}),_=function(t,e,n,r){var i,o,a,s,u,l={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)l[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}(d,_,M,f),f?(d.ifModified&&((b=M.getResponseHeader("Last-Modified"))&&(E.lastModified[i]=b),(b=M.getResponseHeader("etag"))&&(E.etag[i]=b)),204===t||"HEAD"===d.type?w="nocontent":304===t?w="notmodified":(w=_.state,h=_.data,f=!(x=_.error))):(x=w,!t&&w||(w="error",t<0&&(t=0))),M.status=t,M.statusText=(e||w)+"",f?g.resolveWith(p,[h,w,M]):g.rejectWith(p,[M,w,x]),M.statusCode(v),v=void 0,c&&m.trigger(f?"ajaxSuccess":"ajaxError",[M,d,f?h:x]),y.fireWith(p,[M,w]),c&&(m.trigger("ajaxComplete",[M,d]),--E.active||E.event.trigger("ajaxStop")))}return M},getJSON:function(t,e,n){return E.get(t,e,n,"json")},getScript:function(t,e){return E.get(t,void 0,e,"script")}}),E.each(["get","post"],function(t,e){E[e]=function(t,n,r,i){return y(n)&&(i=i||r,r=n,n=void 0),E.ajax(E.extend({url:t,type:e,dataType:i,data:n,success:r},E.isPlainObject(t)&&t))}}),E.ajaxPrefilter(function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")}),E._evalUrl=function(t,e,n){return E.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){E.globalEval(t,e,n)}})},E.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=E(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return y(t)?this.each(function(e){E(this).wrapInner(t.call(this,e))}):this.each(function(){var e=E(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=y(t);return this.each(function(n){E(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){E(this).replaceWith(this.childNodes)}),this}}),E.expr.pseudos.hidden=function(t){return!E.expr.pseudos.visible(t)},E.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(t){}};var Ze={0:200,1223:204},Je=E.ajaxSettings.xhr();g.cors=!!Je&&"withCredentials"in Je,g.ajax=Je=!!Je,E.ajaxTransport(function(t){var e,n;if(g.cors||Je&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);e=function(t){return function(){e&&(e=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Ze[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=e(),n=s.onerror=s.ontimeout=e("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&r.setTimeout(function(){e&&n()})},e=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),E.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return E.globalEval(t),t}}}),E.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),E.ajaxTransport("script",function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(r,i){e=E("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),x.head.appendChild(e[0])},abort:function(){n&&n()}}});var tn,en=[],nn=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=en.pop()||E.expando+"_"+Pe.guid++;return this[t]=!0,t}}),E.ajaxPrefilter("json jsonp",function(t,e,n){var i,o,a,s=!1!==t.jsonp&&(nn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(nn,"$1"+i):!1!==t.jsonp&&(t.url+=(Oe.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||E.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=r[i],r[i]=function(){a=arguments},n.always(function(){void 0===o?E(r).removeProp(i):r[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,en.push(i)),a&&y(o)&&o(a[0]),a=o=void 0}),"script"}),g.createHTMLDocument=((tn=x.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===tn.childNodes.length),E.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(g.createHTMLDocument?((r=(e=x.implementation.createHTMLDocument("")).createElement("base")).href=x.location.href,e.head.appendChild(r)):e=x),o=!n&&[],(i=G.exec(t))?[e.createElement(i[1])]:(i=Lt([t],e,o),o&&o.length&&E(o).remove(),E.merge([],i.childNodes)));var r,i,o},E.fn.load=function(t,e,n){var r,i,o,a=this,s=t.indexOf(" ");return s>-1&&(r=Ee(t.slice(s)),t=t.slice(0,s)),y(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),a.length>0&&E.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(r?E("<div>").append(E.parseHTML(t)).find(r):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},E.expr.pseudos.animated=function(t){return E.grep(E.timers,function(e){return t===e.elem}).length},E.offset={setOffset:function(t,e,n){var r,i,o,a,s,u,l=E.css(t,"position"),c=E(t),f={};"static"===l&&(t.style.position="relative"),s=c.offset(),o=E.css(t,"top"),u=E.css(t,"left"),("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),y(e)&&(e=e.call(t,n,E.extend({},s))),null!=e.top&&(f.top=e.top-s.top+a),null!=e.left&&(f.left=e.left-s.left+i),"using"in e?e.using.call(t,f):c.css(f)}},E.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){E.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===E.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===E.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=E(t).offset()).top+=E.css(t,"borderTopWidth",!0),i.left+=E.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-E.css(r,"marginTop",!0),left:e.left-i.left-E.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===E.css(t,"position");)t=t.offsetParent;return t||mt})}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;E.fn[t]=function(r){return tt(this,function(t,r,i){var o;if(v(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i},t,r,arguments.length)}}),E.each(["top","left"],function(t,e){E.cssHooks[e]=te(g.pixelPosition,function(t,n){if(n)return n=Jt(t,e),Kt.test(n)?E(t).position()[e]+"px":n})}),E.each({Height:"height",Width:"width"},function(t,e){E.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){E.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return tt(this,function(e,n,i){var o;return v(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?E.css(e,n,s):E.style(e,n,i,s)},e,a?i:void 0,a)}})}),E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){E.fn[e]=function(t){return this.on(e,t)}}),E.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.on("mouseenter",t).on("mouseleave",e||t)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){E.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}});var rn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;E.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),y(t))return r=s.call(arguments,2),i=function(){return t.apply(e||this,r.concat(s.call(arguments)))},i.guid=t.guid=t.guid||E.guid++,i},E.holdReady=function(t){t?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=S,E.isFunction=y,E.isWindow=v,E.camelCase=it,E.type=w,E.now=Date.now,E.isNumeric=function(t){var e=E.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},E.trim=function(t){return null==t?"":(t+"").replace(rn,"$1")},void 0===(n=function(){return E}.apply(e,[]))||(t.exports=n);var on=r.jQuery,an=r.$;return E.noConflict=function(t){return r.$===E&&(r.$=an),t&&r.jQuery===E&&(r.jQuery=on),E},void 0===i&&(r.jQuery=r.$=E),E})},7549:function(t,e,n){var r;!function(i,o){if(i){for(var a,s={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},u={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},l={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},c={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},f=1;f<20;++f)s[111+f]="f"+f;for(f=0;f<=9;++f)s[f+96]=f.toString();x.prototype.bind=function(t,e,n){var r=this;return t=t instanceof Array?t:[t],r._bindMultiple.call(r,t,e,n),r},x.prototype.unbind=function(t,e){return this.bind.call(this,t,function(){},e)},x.prototype.trigger=function(t,e){var n=this;return n._directMap[t+":"+e]&&n._directMap[t+":"+e]({},t),n},x.prototype.reset=function(){var t=this;return t._callbacks={},t._directMap={},t},x.prototype.stopCallback=function(t,e){if((" "+e.className+" ").indexOf(" mousetrap ")>-1)return!1;if(v(e,this.target))return!1;if("composedPath"in t&&"function"==typeof t.composedPath){var n=t.composedPath()[0];n!==t.target&&(e=n)}return"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},x.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},x.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(s[e]=t[e]);a=null},x.init=function(){var t=x(o);for(var e in t)"_"!==e.charAt(0)&&(x[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},x.init(),i.Mousetrap=x,t.exports&&(t.exports=x),void 0===(r=function(){return x}.call(e,n,e,t))||(t.exports=r)}function h(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function d(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return s[t.which]?s[t.which]:u[t.which]?u[t.which]:String.fromCharCode(t.which).toLowerCase()}function p(t,e){return t.sort().join(",")===e.sort().join(",")}function m(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function g(t,e,n){return n||(n=function(){if(!a)for(var t in a={},s)t>95&&t<112||s.hasOwnProperty(t)&&(a[s[t]]=t);return a}()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function y(t,e){var n,r,i,o=[];for(n=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),i=0;i<n.length;++i)r=n[i],c[r]&&(r=c[r]),e&&"keypress"!=e&&l[r]&&(r=l[r],o.push("shift")),m(r)&&o.push(r);return{key:r,modifiers:o,action:e=g(r,o,e)}}function v(t,e){return null!==t&&t!==o&&(t===e||v(t.parentNode,e))}function x(t){var e=this;if(t=t||o,!(e instanceof x))return new x(t);e.target=t,e._callbacks={},e._directMap={};var n,r={},i=!1,a=!1,s=!1;function u(t){t=t||{};var e,n=!1;for(e in r)t[e]?n=!0:r[e]=0;n||(s=!1)}function l(t,n,i,o,a,s){var u,l,c=[],f=i.type;if(!e._callbacks[t])return[];for("keyup"==f&&m(t)&&(n=[t]),u=0;u<e._callbacks[t].length;++u)if(l=e._callbacks[t][u],(o||!l.seq||r[l.seq]==l.level)&&f==l.action&&("keypress"==f&&!i.metaKey&&!i.ctrlKey||p(n,l.modifiers))){var h=!o&&l.combo==a,d=o&&l.seq==o&&l.level==s;(h||d)&&e._callbacks[t].splice(u,1),c.push(l)}return c}function c(t,n,r,i){e.stopCallback(n,n.target||n.srcElement,r,i)||!1===t(n,r)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(n),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(n))}function f(t){"number"!=typeof t.which&&(t.which=t.keyCode);var n=d(t);n&&("keyup"!=t.type||i!==n?e.handleKey(n,function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}(t),t):i=!1)}function g(t,e,o,a){function l(e){return function(){s=e,++r[t],clearTimeout(n),n=setTimeout(u,1e3)}}function f(e){c(o,e,t),"keyup"!==a&&(i=d(e)),setTimeout(u,10)}r[t]=0;for(var h=0;h<e.length;++h){var p=h+1===e.length?f:l(a||y(e[h+1]).action);v(e[h],p,a,t,h)}}function v(t,n,r,i,o){e._directMap[t+":"+r]=n;var a,s=(t=t.replace(/\s+/g," ")).split(" ");s.length>1?g(t,s,n,r):(a=y(t,r),e._callbacks[a.key]=e._callbacks[a.key]||[],l(a.key,a.modifiers,{type:a.action},i,t,o),e._callbacks[a.key][i?"unshift":"push"]({callback:n,modifiers:a.modifiers,action:a.action,seq:i,level:o,combo:t}))}e._handleKey=function(t,e,n){var r,i=l(t,e,n),o={},f=0,h=!1;for(r=0;r<i.length;++r)i[r].seq&&(f=Math.max(f,i[r].level));for(r=0;r<i.length;++r)if(i[r].seq){if(i[r].level!=f)continue;h=!0,o[i[r].seq]=1,c(i[r].callback,n,i[r].combo,i[r].seq)}else h||c(i[r].callback,n,i[r].combo);var d="keypress"==n.type&&a;n.type!=s||m(t)||d||u(o),a=h&&"keydown"==n.type},e._bindMultiple=function(t,e,n){for(var r=0;r<t.length;++r)v(t[r],e,n)},h(t,"keypress",f),h(t,"keydown",f),h(t,"keyup",f)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},9689:function(t,e,n){var r={"./aea.js":4894,"./aeqd.js":6014,"./bonne.js":9265,"./cass.js":3245,"./cea.js":8104,"./eqc.js":780,"./eqdc.js":7724,"./eqearth.js":8197,"./equi.js":63,"./etmerc.js":3426,"./gauss.js":4025,"./geocent.js":5904,"./geos.js":1017,"./gnom.js":5106,"./gstmerc.js":6500,"./krovak.js":6167,"./laea.js":8506,"./lcc.js":993,"./longlat.js":2308,"./merc.js":9402,"./mill.js":969,"./moll.js":6155,"./nzmg.js":6731,"./ob_tran.js":4076,"./omerc.js":431,"./ortho.js":6145,"./poly.js":741,"./qsc.js":2513,"./robin.js":8067,"./sinu.js":1034,"./somerc.js":9872,"./stere.js":3084,"./sterea.js":6789,"./tmerc.js":5518,"./tpers.js":251,"./utm.js":2924,"./vandg.js":6671};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=9689},5685:function(t){t.exports="/* lineFeature fragment shader */\n\n#ifdef GL_ES\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n  #else\n    precision mediump float;\n  #endif\n#endif\nvarying vec4 strokeColorVar;\nvarying vec4 subpos;\nvarying vec4 info;\nvarying vec4 angles;\nuniform float antialiasing;\nuniform float miterLimit;\nuniform float fixedFlags;\n\nvoid main () {\n  vec4 color = strokeColorVar;\n  float opacity = 1.0;\n  int nearMode = int(floor(info.x + 0.5));\n  int farMode = int(floor(info.y + 0.5));\n  float cosABC = angles.x;\n  float sinABC = angles.y;\n  float cosBCD = angles.z;\n  float sinBCD = angles.w;\n  // never render on the opposite side of a miter.  This uses a bit of\n  // slop, via pow(smoothstep()) instead of step(), since there are\n  // precision issues in this calculation.  This doesn't wholly solve\n  // the precision issue; sometimes pixels are missed or double\n  // rendered along the inside seam of a miter.\n  if (nearMode >= 4) {\n    float dist = cosABC * subpos.x - sinABC * subpos.y;\n    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));\n    if (opacity == 0.0) {\n      discard;\n    }\n  }\n  if (farMode >= 4) {\n    float dist = cosBCD * subpos.z - sinBCD * subpos.y;\n    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));\n    if (opacity == 0.0) {\n      discard;\n    }\n  }\n  // butt or square cap\n  if ((nearMode == 0 || nearMode == 1) && subpos.x < antialiasing) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.x + subpos.w * float(nearMode)));\n  }\n  if ((farMode == 0 || farMode == 1) && subpos.z < antialiasing) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.z + subpos.w * float(farMode)));\n  }\n  // round cap\n  if (nearMode == 2 && subpos.x <= 0.0) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));\n  }\n  if (farMode == 2 && subpos.z <= 0.0) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));\n  }\n  // bevel and clip joins\n  if ((nearMode == 5 || nearMode == 7) && subpos.x < antialiasing) {\n    float dist = (sinABC * subpos.x + cosABC * subpos.y) * sign(sinABC);\n    float w = subpos.w * (1.0 - info.z * sign(sinABC));\n    float maxDist;\n    if (nearMode == 5)  maxDist = cosABC * w;\n    else                maxDist = miterLimit * w;\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));\n  }\n  if ((farMode == 5 || farMode == 7) && subpos.z < antialiasing) {\n    float dist = (sinBCD * subpos.z + cosBCD * subpos.y) * sign(sinBCD);\n    float w = subpos.w * (1.0 - info.z * sign(sinBCD));\n    float maxDist;\n    if (farMode == 5)  maxDist = cosBCD * w;\n    else               maxDist = miterLimit * w;\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));\n  }\n  // round join\n  if (nearMode == 6 && subpos.x <= 0.0) {\n    float w = subpos.w * (1.0 - info.z * sign(sinABC));\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y, 2.0))));\n  }\n  if (farMode == 6 && subpos.z <= 0.0) {\n    float w = subpos.w * (1.0 - info.z * sign(sinBCD));\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y, 2.0))));\n  }\n  // antialias along main edges\n  if (antialiasing > 0.0) {\n    if (subpos.y > subpos.w * (1.0 + info.z) - antialiasing) {\n      opacity = min(opacity, smoothstep(antialiasing, -antialiasing, subpos.y - subpos.w * (1.0 + info.z)));\n    }\n    if (subpos.y < subpos.w * (-1.0 + info.z) + antialiasing) {\n      opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.y - subpos.w * (-1.0 + info.z)));\n    }\n  }\n  if (opacity == 0.0) {\n    discard;\n  }\n  color.a *= opacity;\n  gl_FragColor = color;\n}\n"},9336:function(t){t.exports="/* lineFeature vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute vec3 prev;\nattribute vec3 next;\nattribute vec3 far;\nattribute float flags;\n\nattribute vec3 strokeColor;\nattribute float strokeOpacity;\nattribute float strokeWidth;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float pixelWidth;\nuniform float aspect;\nuniform float miterLimit;\nuniform float antialiasing;\n\nvarying vec4 strokeColorVar;\nvarying vec4 subpos;  /* px, py, length - px, width */\nvarying vec4 info;  /* near mode, far mode, offset */\nvarying vec4 angles; /* near angle cos, sin, far angle cos, sin */\n\nconst float PI = 3.14159265358979323846264;\n\nvec4 viewCoord(vec3 c) {\n  vec4 result = projectionMatrix * modelViewMatrix * vec4(c.xyz, 1.0);\n  if (result.w != 0.0)  result = result / result.w;\n  return result;\n}\n\nfloat atan2(float y, float x) {\n  if (x > 0.0)  return atan(y / x);\n  if (x < 0.0 && y >= 0.0)  return atan(y / x) + PI;\n  if (x < 0.0)  return atan(y / x) - PI;\n  return sign(y) * 0.5 * PI;\n}\n\nvoid main(void)\n{\n  /* If any vertex has been deliberately set to a negative opacity,\n   * skip doing computations on it. */\n  if (strokeOpacity < 0.0) {\n    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);\n    return;\n  }\n  /* convert coordinates.  We have four values, since we need to\n   * calculate the angles between the lines formed by prev-pos and\n   * pos-next, and between pos-next and next-far, plus know the angle\n   *   (prev)---(pos)---(next)---(far) => A---B---C---D */\n  vec4 A = viewCoord(prev);\n  vec4 B = viewCoord(pos);\n  vec4 C = viewCoord(next);\n  vec4 D = viewCoord(far);\n  // calculate line segment vector and angle\n  vec2 deltaCB = C.xy - B.xy;\n  if (deltaCB == vec2(0.0, 0.0)) {\n    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);\n    return;\n  }\n  float lineLength = length(vec2(deltaCB.x, deltaCB.y / aspect)) / pixelWidth;\n  // if lines reverse upon themselves and are not nearly the same length, skip\n  // joins.  This is a heuristic; the correct method would to be to pass some\n  // sort of length of the adjacent line to the fragment renderer and adjust\n  // which fragments are rendered, but this is much more complex.\n  float abLimit = length(vec2(A.x - B.x, (A.y - B.y) / aspect)) / pixelWidth;\n  float dcLimit = length(vec2(D.x - C.x, (D.y - C.y) / aspect)) / pixelWidth;\n  if (abLimit >= lineLength - antialiasing - strokeWidth * 0.5 && abLimit <= lineLength + antialiasing + strokeWidth * 0.5) {\n    abLimit = 0.0001;\n  } else {\n    if (abLimit < lineLength)  abLimit = lineLength;\n    abLimit = (strokeWidth - antialiasing) / (abLimit + antialiasing);\n    if (abLimit < 0.0001) abLimit = 0.0001;\n    if (abLimit > 0.1) abLimit = 0.1;\n  }\n  if (dcLimit >= lineLength - antialiasing - strokeWidth * 0.5 && dcLimit <= lineLength + antialiasing + strokeWidth * 0.5) {\n    dcLimit = 0.0001;\n  } else {\n    if (dcLimit < lineLength)  dcLimit = lineLength;\n    dcLimit = (strokeWidth - antialiasing) / (dcLimit + antialiasing);\n    if (dcLimit < 0.0001) dcLimit = 0.0001;\n    if (dcLimit > 0.1) dcLimit = 0.1;\n  }\n  float angleCB = atan2(deltaCB.y, deltaCB.x * aspect);\n  // values we need to pass along\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  // extract values from our flags field\n  int vertex = int(mod(flags, 4.0));\n  int nearMode = int(mod(floor(flags / 4.0), 8.0));\n  int farMode = int(mod(floor(flags / 32.0), 8.0));\n  // we use 11 bits of the flags for the offset, where -1023 to 1023\n  // maps to -1 to 1.  The 11 bits are a signed value, so simply\n  // selecting the bits will result in an unsigned values that may be\n  // greater than 1, in which case we have to subtract appropriately.\n  float offset = mod(floor(flags / 256.0), 2048.0) / 1023.0;\n  if (offset > 1.0)  offset -= 2048.0 / 1023.0;\n  // by default, offset by the width and don't extend lines.  Later,\n  // calculate line extensions based on end cap and end join modes\n  float yOffset = strokeWidth + antialiasing;\n  if (vertex == 0)  yOffset *= -1.0;\n  yOffset += strokeWidth * offset;\n  float xOffset = 0.0;\n  // end caps\n  if (nearMode == 0) {\n    xOffset = antialiasing;\n  } else if (nearMode == 1 || nearMode == 2) {\n    xOffset = strokeWidth + antialiasing;\n  }\n\n  // If joining lines, calculate the angles in screen space formed by\n  // the near end (A-B-C) and far end (B-C-D), and determine how much\n  // space is needed for the particular join.\n  //   This could be changed: if the lines are not a uniform width and\n  // offset, then the functional join angle is not simply half the\n  // angle between the two lines, but rather half the angle of the\n  // inside edge of the the two lines.\n  float cosABC = 1.0, sinABC = 0.0, cosBCD = 1.0, sinBCD = 0.0;  // of half angles\n  // handle near end\n  if (nearMode >= 4) {\n    float angleBA = atan2(B.y - A.y, (B.x - A.x) * aspect);\n    if (A.xy == B.xy)  angleBA = angleCB;\n    float angleABC = angleCB - angleBA;\n    // ensure angle is in the range [-PI, PI], then take the half angle\n    angleABC = (mod(angleABC + 3.0 * PI, 2.0 * PI) - PI) / 2.0;\n    cosABC = cos(angleABC);  sinABC = sin(angleABC);\n    // if this angle is close to flat, pass-through the join\n    if (nearMode >= 4 && (cosABC > 0.999999 || cosABC < abLimit)) {\n      nearMode = 3;\n    }\n    // miter, miter-clip\n    if (nearMode == 4 || nearMode == 7) {\n      if (cosABC < 0.000001 || 1.0 / cosABC > miterLimit) {\n        if (nearMode == 4) {\n          nearMode = 5;\n        } else {\n          xOffset = miterLimit * strokeWidth * (1.0 - offset * sign(sinABC)) + antialiasing;\n        }\n      } else {\n        // we add an extra 1.0 to the xOffset to make sure that fragment\n        // shader is doing the clipping\n        xOffset = abs(sinABC / cosABC) * strokeWidth * (1.0 - offset * sign(sinABC)) + antialiasing + 1.0;\n        nearMode = 4;\n      }\n    }\n    // bevel or round join\n    if (nearMode == 5 || nearMode == 6) {\n      xOffset = strokeWidth * (1.0 - offset * sign(sinABC)) + antialiasing;\n    }\n  }\n\n  // handle far end\n  if (farMode >= 4) {\n    float angleDC = atan2(D.y - C.y, (D.x - C.x) * aspect);\n    if (D.xy == C.xy)  angleDC = angleCB;\n    float angleBCD = angleDC - angleCB;\n    // ensure angle is in the range [-PI, PI], then take the half angle\n    angleBCD = (mod(angleBCD + 3.0 * PI, 2.0 * PI) - PI) / 2.0;\n    cosBCD = cos(angleBCD);  sinBCD = sin(angleBCD);\n    // if this angle is close to flat, pass-through the join\n    if (farMode >= 4 && (cosBCD > 0.999999 || cosBCD < dcLimit)) {\n      farMode = 3;\n    }\n    // miter, miter-clip\n    if (farMode == 4 || farMode == 7) {\n      if (cosBCD < 0.000001 || 1.0 / cosBCD > miterLimit) {\n        if (farMode == 4)  farMode = 5;\n      } else {\n        farMode = 4;\n      }\n    }\n  }\n\n  // compute the location of a vertex to include everything that might\n  // need to be rendered\n  xOffset *= -1.0;\n  gl_Position = vec4(\n    B.x + (xOffset * cos(angleCB) - yOffset * sin(angleCB)) * pixelWidth,\n    B.y + (xOffset * sin(angleCB) + yOffset * cos(angleCB)) * pixelWidth * aspect,\n    B.z, 1.0);\n  // store other values needed to determine which pixels to plot.\n  if (vertex == 0 || vertex == 1) {\n    subpos = vec4(xOffset, yOffset, lineLength - xOffset, strokeWidth);\n    info = vec4(float(nearMode), float(farMode), offset, 0.0);\n    angles = vec4(cosABC, sinABC, cosBCD, sinBCD);\n  } else {\n    subpos = vec4(lineLength - xOffset, -yOffset, xOffset, strokeWidth);\n    info = vec4(float(farMode), float(nearMode), -offset, 0.0);\n    angles = vec4(cosBCD, -sinBCD, cosABC, -sinABC);\n  }\n}\n"},1388:function(t){t.exports="/* lineFeature debug fragment shader */\n\n#ifdef GL_ES\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n  #else\n    precision mediump float;\n  #endif\n#endif\nvarying vec4 strokeColorVar;\nvarying vec4 subpos;\nvarying vec4 info;\nvarying vec4 angles;\nuniform float antialiasing;\nuniform float miterLimit;\nuniform float fixedFlags;\n\nvoid main () {\n  vec4 color = strokeColorVar;\n  bool debug = bool(mod(fixedFlags, 2.0));\n  float opacity = 1.0;\n  int nearMode = int(floor(info.x + 0.5));\n  int farMode = int(floor(info.y + 0.5));\n  float cosABC = angles.x;\n  float sinABC = angles.y;\n  float cosBCD = angles.z;\n  float sinBCD = angles.w;\n  // never render on the opposite side of a miter.  This uses a bit of\n  // slop, via pow(smoothstep()) instead of step(), since there are\n  // precision issues in this calculation.  This doesn't wholly solve\n  // the precision issue; sometimes pixels are missed or double\n  // rendered along the inside seam of a miter.\n  if (nearMode >= 4) {\n    float dist = cosABC * subpos.x - sinABC * subpos.y;\n    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));\n    if (opacity == 0.0) {\n      if (debug) {\n        color.r = 255.0 / 255.0;\n        gl_FragColor = color;\n        return;\n      }\n      discard;\n    }\n  }\n  if (farMode >= 4) {\n    float dist = cosBCD * subpos.z - sinBCD * subpos.y;\n    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));\n    if (opacity == 0.0) {\n      if (debug) {\n        color.r = 254.0 / 255.0;\n        gl_FragColor = color;\n        return;\n      }\n      discard;\n    }\n  }\n  // butt or square cap\n  if ((nearMode == 0 || nearMode == 1) && subpos.x < antialiasing) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.x + subpos.w * float(nearMode)));\n  }\n  if ((farMode == 0 || farMode == 1) && subpos.z < antialiasing) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.z + subpos.w * float(farMode)));\n  }\n  // round cap\n  if (nearMode == 2 && subpos.x <= 0.0) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));\n  }\n  if (farMode == 2 && subpos.z <= 0.0) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));\n  }\n  // bevel and clip joins\n  if ((nearMode == 5 || nearMode == 7) && subpos.x < antialiasing) {\n    float dist = (sinABC * subpos.x + cosABC * subpos.y) * sign(sinABC);\n    float w = subpos.w * (1.0 - info.z * sign(sinABC));\n    float maxDist;\n    if (nearMode == 5)  maxDist = cosABC * w;\n    else                maxDist = miterLimit * w;\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));\n  }\n  if ((farMode == 5 || farMode == 7) && subpos.z < antialiasing) {\n    float dist = (sinBCD * subpos.z + cosBCD * subpos.y) * sign(sinBCD);\n    float w = subpos.w * (1.0 - info.z * sign(sinBCD));\n    float maxDist;\n    if (farMode == 5)  maxDist = cosBCD * w;\n    else               maxDist = miterLimit * w;\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));\n  }\n  // round join\n  if (nearMode == 6 && subpos.x <= 0.0) {\n    float w = subpos.w * (1.0 - info.z * sign(sinABC));\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y, 2.0))));\n  }\n  if (farMode == 6 && subpos.z <= 0.0) {\n    float w = subpos.w * (1.0 - info.z * sign(sinBCD));\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y, 2.0))));\n  }\n  // antialias along main edges\n  if (antialiasing > 0.0) {\n    if (subpos.y > subpos.w * (1.0 + info.z) - antialiasing) {\n      opacity = min(opacity, smoothstep(antialiasing, -antialiasing, subpos.y - subpos.w * (1.0 + info.z)));\n    }\n    if (subpos.y < subpos.w * (-1.0 + info.z) + antialiasing) {\n      opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.y - subpos.w * (-1.0 + info.z)));\n    }\n  }\n  if (opacity == 0.0) {\n    if (debug) {\n      color.r = 253.0 / 255.0;\n      gl_FragColor = color;\n      return;\n    }\n    discard;\n  }\n  color.a *= opacity;\n  gl_FragColor = color;\n}\n"},9923:function(t){t.exports="/* markerFeature square/triangle fragment shader */\n\n/* markerFeature common fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\n// the square/triangle shader defines unitVar\nconst int symbolEllipse = 0;\nconst int symbolFlowerBase = 1;\nconst int symbolFlowerMax = 16;\nconst int symbolTriangle = 16;\nconst int symbolStarBase = 17;\nconst int symbolStarMax = 16;\nconst int symbolRectangle = 32;\nconst int symbolCrossBase = 33;\nconst int symbolCrossMax = 16;\nconst int symbolOval = 48;\nconst int symbolJackBase = 49;\nconst int symbolJackMax = 16;\nconst int symbolDrop = 64;\nconst int symbolDropBase = 65;\nconst int symbolDropMax = 16;\nconst int symbolArrow = 80;\nconst int symbolArrowBase = 81;\nconst int symbolArrowMax = 16;\n// Distance to antialias in pixels\nconst float antialiasDist = 1.5;\n\n/* Compute the distance from a point to an arrow defined by the radiusVar and a\n * packed value containing\n *   headWidth: ratio to radius (0, 1]\n *   headLength: ratio to diameter (0, 1]\n *   stemWidth: ratio to headWidth [0, 1]\n *   sweep: boolean\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float packed: the packed value.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToArrow(vec2 pos, float value) {\n  bool sweep = value < 0.0;\n  value = abs(value);\n  float pack0 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack1 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack2 = (mod(value, 252.0) - 1.0) / 250.0;\n\n  float headWidth = (pack0 > 0.0 ? pack0 : 2.0 / 3.0);\n  float headEnd = 1.0 - 2.0 * (pack1 > 0.0 ? pack1 : 1.0 / 2.0);\n  float stemWidth = headWidth * (pack2 >= 0.0 ? pack2 : 1.0 / 3.0);\n  if (length(vec2(headWidth, headEnd)) > 1.0) {\n    vec2 scaledHead = normalize(vec2(headWidth, headEnd));\n    headWidth = scaledHead.x;\n    headEnd = scaledHead.y;\n  }\n  float stemEnd = -cos(asin(stemWidth));\n\n  headWidth *= radiusVar;\n  headEnd *= radiusVar;\n  stemWidth *= radiusVar;\n  stemEnd *= radiusVar;\n  pos.y = abs(pos.y);\n  float stemDist = pos.y - stemWidth;\n  float stemEndDist = stemEnd - pos.x;\n  float B = (radiusVar - headEnd) / headWidth;\n  float headDist = (pos.x + B * pos.y - radiusVar) / sqrt(1.0 + B * B);\n  float headEndDist;\n  if (sweep) {\n    B = (radiusVar - headEnd) / 3.0 / headWidth;\n    headEndDist = -(pos.x + B * pos.y - (radiusVar + headEnd * 2.0) / 3.0) / sqrt(1.0 + B * B);\n  } else {\n    headEndDist = headEnd - pos.x;\n  }\n  headEndDist = min(headEndDist, stemDist);\n  return max(max(headDist, headEndDist), stemEndDist);\n}\n\n/* Compute the distance from a point to a drop defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major radii).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToDrop(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float r = radiusVar * ratio;\n  float cx = radiusVar - r;\n  float rad = distance(pos.xy, vec2(cx, 0.0)) - r;\n  if (ratio < 0.5) {\n    float x = radiusVar - r - r * r / cx;\n    float y = sqrt(r * r - (cx - x) * (cx - x));\n    float Bt = (cx - x) / y;\n    if ((pos.x + Bt * abs(pos.y) - cx) / sqrt(1.0 + Bt * Bt) < 0.0) {\n      float B = -x / y;\n      return -(pos.x + B * abs(pos.y)) / sqrt(1.0 + B * B);\n    }\n  }\n  return rad;\n}\n\n/* Compute the distance from a point to the ellipse defined by the radiusVar\n * (the semimajor axis) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the ellipse in pixels.  Negative is\n *   inside.\n */\nfloat distanceToEllipse(vec2 pos, float ratio) {\n  // a and b are the semi-major and semi-minor axes\n  // ratio is the between the minor and major axes.  If > 1, swap these and\n  // rotate 90 degrees.\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  float a = radiusVar, b = abs(radiusVar * ratio);\n  if (b > a) {\n    pos = vec2(pos.y, -pos.x);\n    b = abs(radiusVar / ratio);\n  }\n  float a2 = a * a, b2 = b * b;\n  // compute the distance to the ellipse.  See this discussion:\n  // https://stackoverflow.com/questions/22959698\n  float f = sqrt(a2 - b2),\n        // this value will be positive if outside and negative if inside.  If\n        // we used it directly, the stroke would be too thick along the long\n        // edges of the ellipse\n        d = (distance(pos, vec2(f, 0.0)) + distance(pos, vec2(-f, 0.0))) * 0.5 - a;\n  // if we are outside of the ellipse, accuracy is not important, so return\n  // early.\n  if (d >= 0.0) {\n    return d;\n  }\n  // work in one quadrant\n  pos = abs(pos);\n  // t (the angle from center) could start as `atan(pos.y, pos.x)`, but this\n  // results in a slower solution near narrow ends\n  float t = 0.7;\n  float cost = cos(t), sint = sin(t), x = a * cost, y = b * sint;\n  vec2 lastxy;\n  for (int iter = 0; iter < 10; iter += 1) {\n    lastxy = vec2(x, y);\n    float ex = (a2 - b2) * pow(cost, 3.0) / a,\n          ey = (b2 - a2) * pow(sint, 3.0) / b;\n    vec2 r = vec2(x - ex, y - ey),\n         q = vec2(pos.x - ex, pos.y - ey);\n    float lenr = length(r);\n    t += lenr * asin((r.x * q.y - r.y * q.x) / lenr / length(q)) / sqrt(a2 + b2 - x * x - y * y);\n    t = clamp(t, 0.0, acos(0.0));\n    cost = cos(t);\n    sint = sin(t);\n    x = a * cost;\n    y = b * sint;\n    if (distance(lastxy, vec2(x, y)) < 0.05) {\n      break;\n    }\n  }\n  return sign(d) * distance(pos, vec2(x, y));\n}\n\n/* Compute the distance from a point to an isosceles triangle.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: length of the base compared to the other sides.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToIsoscelesTriangle(vec2 pos, float ratio) {\n  ratio = clamp(abs(ratio), 0.0, 2.0);\n  if (ratio == 0.0 || ratio == 2.0) {\n    ratio = 1.0;\n  }\n  float s1, s2, x0, x1, y1;\n  if (ratio < sqrt(2.0)) {\n    s1 = radiusVar * sqrt(4.0 - ratio * ratio); // length of equal sides\n    s2 = s1 * ratio;\n    y1 = s2 / 2.0;\n    x0 = radiusVar;\n    x1 = x0 - sqrt(s1 * s1 - y1 * y1);\n  } else {\n    s2 = radiusVar * 2.0;\n    s1 = s2 / ratio;\n    y1 = s2 / 2.0;\n    x0 = sqrt(s1 * s1 - y1 * y1);\n    x1 = 0.0;\n  }\n  float B = (x0 - x1) / y1;\n  return max(x1 - pos.x, (pos.x + B * abs(pos.y) - x0) / sqrt(1.0 + B * B));\n}\n\n/* Compute the distance from a point to an oval defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major axes).  Here an oval\n * is defined as two semicircles connected by straight line segments.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the oval in pixels.  Negative is inside.\n */\nfloat distanceToOval(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float minor = radiusVar * ratio;\n  float center = radiusVar - minor;\n  pos = abs(pos);\n  if (pos.x <= center) {\n    return pos.y - minor;\n  }\n  return distance(pos, vec2(center, 0.0)) - minor;\n}\n\n/* Compute the distance from a point to a rectangle defined by the radiusVar\n * (the semidiagonal) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToRectangle(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  vec2 wh = normalize(vec2(1.0, abs(ratio))) * radiusVar;\n  vec2 dist = abs(pos) - wh;\n  return max(dist.x, dist.y);\n}\n\n/* Based on a repetition value, return a position for rotational symmetry.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        int repetitions: number of repetitions on the cross.\n * Exit:  float dist: a point in the primary position.\n */\nvec2 rotationalSymmetry(vec2 pos, int repetitions) {\n  float pi = acos(-1.0);\n  float limit = pi / float(repetitions);\n  float ang = atan(pos.y, pos.x);\n  ang = mod(ang + pi * 2.0, limit * 2.0);\n  if (ang > limit) {\n    ang -= limit * 2.0;\n  }\n  return vec2(cos(ang), sin(ang)) * length(pos);\n}\n\nfloat markerFeatureFragment(vec3 posAndSpacing) {\n  vec2 pos = posAndSpacing.xy;\n  float spacing = posAndSpacing.z;\n  // square lattice\n  if (spacing > 0.0) {\n    pos.x = mod(pos.x + spacing * 0.5, spacing) - spacing * 0.5;\n    pos.y = mod(pos.y + spacing * 0.5, spacing) - spacing * 0.5;\n  }\n  // triangular lattice\n  if (spacing < 0.0) {\n    spacing = spacing * -1.0;\n    float cz = (2.0 * pos.y) / (sqrt(3.0) * spacing);\n    float cx = pos.x / spacing - 0.5 * cz;\n    float cy = -cx - cz;\n    float rx = floor(cx + 0.5);\n    float ry = floor(cy + 0.5);\n    float rz = floor(cz + 0.5);\n    float dx = abs(rx - cx);\n    float dy = abs(ry - cy);\n    float dz = abs(rz - cz);\n    if (dx > dy && dx > dz) {\n      rx = -ry - rz;\n    } else if (dy > dz) {\n      ry = -rx - rz;\n    } else {\n      rz = -rx - ry;\n    }\n    vec2 center = vec2(spacing * (rx + 0.5 * rz), (sqrt(3.0) * spacing * 0.5) * rz);\n    pos = pos - center;\n  }\n  // rad is a value in pixels from the edge of the symbol where negative is\n  // inside the shape\n  float rad = length(pos.xy) - radiusVar;\n  // never allow points outside of the main radius\n  if (rad > 0.0) {\n    return 0.0;\n  }\n  // apply clockwise rotation\n  if (rotationVar != 0.0) {\n    float cosr = cos(rotationVar), sinr = sin(rotationVar);\n    pos = vec2(pos.x * cosr + pos.y * sinr, -pos.x * sinr + pos.y * cosr);\n  }\n\n  int symbol = int(floor(symbolVar / 64.0));\n  bool isimage = bool(mod(floor(symbolVar / 8.0), 2.0));\n  vec4 fillColor, strokeColor;\n  float endStep;\n\n  float ratio = symbolValueVar;\n  // When ratio is 0, it usually gets changed to 1; some shapes could have\n  // better defaults\n  /* Symbol shapes */\n  if (symbol == symbolTriangle) {\n    rad = distanceToIsoscelesTriangle(pos, ratio);\n  } else if (symbol == symbolRectangle) {\n    rad = distanceToRectangle(pos, ratio);\n  } else if (symbol == symbolOval) {\n    rad = distanceToOval(pos, ratio);\n  } else if (symbol == symbolDrop) {\n    rad = distanceToDrop(pos, ratio);\n  } else if (symbol == symbolArrow) {\n    rad = distanceToArrow(pos, ratio);\n  } else if (symbol >= symbolCrossBase && symbol <= symbolCrossBase + symbolCrossMax - 2) {\n    rad = distanceToRectangle(rotationalSymmetry(pos, symbol - symbolCrossBase + 2), ratio);\n  } else if (symbol >= symbolFlowerBase && symbol <= symbolFlowerBase + symbolFlowerMax - 2) {\n    rad = distanceToEllipse(rotationalSymmetry(pos, symbol - symbolFlowerBase + 2), ratio);\n  } else if (symbol >= symbolStarBase && symbol <= symbolStarBase + symbolStarMax - 2) {\n    rad = distanceToIsoscelesTriangle(rotationalSymmetry(pos, symbol - symbolStarBase + 2), ratio);\n  } else if (symbol >= symbolJackBase && symbol <= symbolJackBase + symbolJackMax - 2) {\n    rad = distanceToOval(rotationalSymmetry(pos, symbol - symbolJackBase + 2), ratio);\n  } else if (symbol >= symbolDropBase && symbol <= symbolDropBase + symbolDropMax - 2) {\n    rad = distanceToDrop(rotationalSymmetry(pos, symbol - symbolDropBase + 2), ratio);\n  } else if (symbol >= symbolArrowBase && symbol <= symbolArrowBase + symbolArrowMax - 2) {\n    rad = distanceToArrow(rotationalSymmetry(pos, symbol - symbolArrowBase + 2), ratio);\n  } else { // default - circle or ellipse; a value of 0 or 1 is a circle\n    if (ratio != 0.0 && ratio != 1.0) {\n      rad = distanceToEllipse(pos, ratio);\n    }\n  }\n\n  if (rad >= 0.0) {\n    return 0.0;\n  }\n  // If there is no stroke, the fill region should transition to nothing\n  if (strokeColorVar.a == 0.0 || strokeWidthVar <= 0.0) {\n    strokeColor = vec4(fillColorVar.rgb, 0.0);\n    endStep = 0.0;\n  } else {\n    strokeColor = strokeColorVar;\n    endStep = -strokeWidthVar;\n  }\n  // Likewise, if there is no fill, the stroke should transition to nothing\n  if (fillColorVar.a == 0.0) {\n    fillColor = vec4(strokeColorVar.rgb, 0.0);\n  } else {\n    fillColor = fillColorVar;\n  }\n  float alpha = 1.0;\n  if (rad <= endStep) {\n    float step = smoothstep(endStep - antialiasDist, endStep, rad);\n    vec4 color = mix(fillColor, strokeColor, step);\n    float step2 = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(color, vec4(color.rgb, 0.0), step2);\n    if (color.a > 0.0)\n      alpha = gl_FragColor.a / color.a;\n  } else {\n    float step = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(strokeColor, vec4(strokeColor.rgb, 0.0), step);\n    if (strokeColor.a > 0.0)\n      alpha = gl_FragColor.a / strokeColor.a;\n  }\n  return alpha;\n}\n\n\nvarying vec2 unitVar;  // distinct for square/triangle\n\nvoid main() {\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0)\n    discard;\n  if (markerFeatureFragment(vec3(unitVar, 0.0)) == 0.0)\n    discard;\n}\n"},1202:function(t){t.exports="/* markerFeature square/triangle vertex shader */\n\n/* markerFeature common vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float radius;\nattribute vec3 fillColor;\nattribute float fillOpacity;\nattribute vec3 strokeColor;\nattribute float strokeOpacity;\nattribute float strokeWidth;\nattribute float symbol;  /* contains some bit fields */\nattribute float symbolValue;\nattribute float rotation;\nuniform float zoom;\nuniform float rotationUniform;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n// non-sprite has other definitions.\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\n\nfloat markerFeaturePrep(void)\n{\n  // No stroke or fill implies nothing to draw\n  if (radius <= 0.0 || (strokeOpacity <= 0.0 && fillOpacity <= 0.0)) {\n    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);\n    return 0.0;\n  }\n  radiusVar = radius;\n  strokeWidthVar = strokeWidth;\n  int scaleMode = int(mod(symbol, 4.0));\n  float strokeOffset = mod(floor(symbol / 16.0), 4.0) - 1.0;\n  radiusVar += (strokeOffset + 1.0) / 2.0 * strokeWidthVar;\n  if (scaleMode == 1) { // fill\n    radiusVar = (radiusVar - strokeWidthVar) * exp2(zoom) + strokeWidthVar;\n  } else if (scaleMode == 2) { // stroke\n    radiusVar += strokeWidthVar * (exp2(zoom) - 1.0);\n    strokeWidthVar *= exp2(zoom);\n  } else if (scaleMode == 3) { // all\n    radiusVar *= exp2(zoom);\n    strokeWidthVar *= exp2(zoom);\n  }\n  fillColorVar = vec4(fillColor, fillOpacity);\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  symbolVar = symbol;\n  symbolValueVar = symbolValue;\n  rotationVar = rotation;\n  if (bool(mod(floor(symbolVar / 4.0), 2.0))) {\n    rotationVar += rotationUniform;\n  }\n  return radiusVar;\n}\n\n\nuniform float pixelWidth; // for non-sprite\nuniform float aspect; // for non-sprite\nattribute vec2 unit; // for non-sprite\nvarying vec2 unitVar; // for non-sprite\n\nvoid main(void)\n{\n  radiusVar = markerFeaturePrep();\n  if (radiusVar == 0.0) {\n    return;\n  }\n  // for non-sprite\n  unitVar = unit * radiusVar;\n  unitVar.y *= -1.0;\n  vec4 p = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;\n  if (p.w != 0.0) {\n    p = p / p.w;\n  }\n  p += radiusVar * vec4(unit.x * pixelWidth, unit.y * pixelWidth * aspect, 0.0, 1.0);\n  gl_Position = vec4(p.xyz, 1.0);\n}\n"},3724:function(t){t.exports="/* markerFeature sprite fragment shader */\n\n/* markerFeature common fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\n// the square/triangle shader defines unitVar\nconst int symbolEllipse = 0;\nconst int symbolFlowerBase = 1;\nconst int symbolFlowerMax = 16;\nconst int symbolTriangle = 16;\nconst int symbolStarBase = 17;\nconst int symbolStarMax = 16;\nconst int symbolRectangle = 32;\nconst int symbolCrossBase = 33;\nconst int symbolCrossMax = 16;\nconst int symbolOval = 48;\nconst int symbolJackBase = 49;\nconst int symbolJackMax = 16;\nconst int symbolDrop = 64;\nconst int symbolDropBase = 65;\nconst int symbolDropMax = 16;\nconst int symbolArrow = 80;\nconst int symbolArrowBase = 81;\nconst int symbolArrowMax = 16;\n// Distance to antialias in pixels\nconst float antialiasDist = 1.5;\n\n/* Compute the distance from a point to an arrow defined by the radiusVar and a\n * packed value containing\n *   headWidth: ratio to radius (0, 1]\n *   headLength: ratio to diameter (0, 1]\n *   stemWidth: ratio to headWidth [0, 1]\n *   sweep: boolean\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float packed: the packed value.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToArrow(vec2 pos, float value) {\n  bool sweep = value < 0.0;\n  value = abs(value);\n  float pack0 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack1 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack2 = (mod(value, 252.0) - 1.0) / 250.0;\n\n  float headWidth = (pack0 > 0.0 ? pack0 : 2.0 / 3.0);\n  float headEnd = 1.0 - 2.0 * (pack1 > 0.0 ? pack1 : 1.0 / 2.0);\n  float stemWidth = headWidth * (pack2 >= 0.0 ? pack2 : 1.0 / 3.0);\n  if (length(vec2(headWidth, headEnd)) > 1.0) {\n    vec2 scaledHead = normalize(vec2(headWidth, headEnd));\n    headWidth = scaledHead.x;\n    headEnd = scaledHead.y;\n  }\n  float stemEnd = -cos(asin(stemWidth));\n\n  headWidth *= radiusVar;\n  headEnd *= radiusVar;\n  stemWidth *= radiusVar;\n  stemEnd *= radiusVar;\n  pos.y = abs(pos.y);\n  float stemDist = pos.y - stemWidth;\n  float stemEndDist = stemEnd - pos.x;\n  float B = (radiusVar - headEnd) / headWidth;\n  float headDist = (pos.x + B * pos.y - radiusVar) / sqrt(1.0 + B * B);\n  float headEndDist;\n  if (sweep) {\n    B = (radiusVar - headEnd) / 3.0 / headWidth;\n    headEndDist = -(pos.x + B * pos.y - (radiusVar + headEnd * 2.0) / 3.0) / sqrt(1.0 + B * B);\n  } else {\n    headEndDist = headEnd - pos.x;\n  }\n  headEndDist = min(headEndDist, stemDist);\n  return max(max(headDist, headEndDist), stemEndDist);\n}\n\n/* Compute the distance from a point to a drop defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major radii).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToDrop(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float r = radiusVar * ratio;\n  float cx = radiusVar - r;\n  float rad = distance(pos.xy, vec2(cx, 0.0)) - r;\n  if (ratio < 0.5) {\n    float x = radiusVar - r - r * r / cx;\n    float y = sqrt(r * r - (cx - x) * (cx - x));\n    float Bt = (cx - x) / y;\n    if ((pos.x + Bt * abs(pos.y) - cx) / sqrt(1.0 + Bt * Bt) < 0.0) {\n      float B = -x / y;\n      return -(pos.x + B * abs(pos.y)) / sqrt(1.0 + B * B);\n    }\n  }\n  return rad;\n}\n\n/* Compute the distance from a point to the ellipse defined by the radiusVar\n * (the semimajor axis) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the ellipse in pixels.  Negative is\n *   inside.\n */\nfloat distanceToEllipse(vec2 pos, float ratio) {\n  // a and b are the semi-major and semi-minor axes\n  // ratio is the between the minor and major axes.  If > 1, swap these and\n  // rotate 90 degrees.\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  float a = radiusVar, b = abs(radiusVar * ratio);\n  if (b > a) {\n    pos = vec2(pos.y, -pos.x);\n    b = abs(radiusVar / ratio);\n  }\n  float a2 = a * a, b2 = b * b;\n  // compute the distance to the ellipse.  See this discussion:\n  // https://stackoverflow.com/questions/22959698\n  float f = sqrt(a2 - b2),\n        // this value will be positive if outside and negative if inside.  If\n        // we used it directly, the stroke would be too thick along the long\n        // edges of the ellipse\n        d = (distance(pos, vec2(f, 0.0)) + distance(pos, vec2(-f, 0.0))) * 0.5 - a;\n  // if we are outside of the ellipse, accuracy is not important, so return\n  // early.\n  if (d >= 0.0) {\n    return d;\n  }\n  // work in one quadrant\n  pos = abs(pos);\n  // t (the angle from center) could start as `atan(pos.y, pos.x)`, but this\n  // results in a slower solution near narrow ends\n  float t = 0.7;\n  float cost = cos(t), sint = sin(t), x = a * cost, y = b * sint;\n  vec2 lastxy;\n  for (int iter = 0; iter < 10; iter += 1) {\n    lastxy = vec2(x, y);\n    float ex = (a2 - b2) * pow(cost, 3.0) / a,\n          ey = (b2 - a2) * pow(sint, 3.0) / b;\n    vec2 r = vec2(x - ex, y - ey),\n         q = vec2(pos.x - ex, pos.y - ey);\n    float lenr = length(r);\n    t += lenr * asin((r.x * q.y - r.y * q.x) / lenr / length(q)) / sqrt(a2 + b2 - x * x - y * y);\n    t = clamp(t, 0.0, acos(0.0));\n    cost = cos(t);\n    sint = sin(t);\n    x = a * cost;\n    y = b * sint;\n    if (distance(lastxy, vec2(x, y)) < 0.05) {\n      break;\n    }\n  }\n  return sign(d) * distance(pos, vec2(x, y));\n}\n\n/* Compute the distance from a point to an isosceles triangle.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: length of the base compared to the other sides.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToIsoscelesTriangle(vec2 pos, float ratio) {\n  ratio = clamp(abs(ratio), 0.0, 2.0);\n  if (ratio == 0.0 || ratio == 2.0) {\n    ratio = 1.0;\n  }\n  float s1, s2, x0, x1, y1;\n  if (ratio < sqrt(2.0)) {\n    s1 = radiusVar * sqrt(4.0 - ratio * ratio); // length of equal sides\n    s2 = s1 * ratio;\n    y1 = s2 / 2.0;\n    x0 = radiusVar;\n    x1 = x0 - sqrt(s1 * s1 - y1 * y1);\n  } else {\n    s2 = radiusVar * 2.0;\n    s1 = s2 / ratio;\n    y1 = s2 / 2.0;\n    x0 = sqrt(s1 * s1 - y1 * y1);\n    x1 = 0.0;\n  }\n  float B = (x0 - x1) / y1;\n  return max(x1 - pos.x, (pos.x + B * abs(pos.y) - x0) / sqrt(1.0 + B * B));\n}\n\n/* Compute the distance from a point to an oval defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major axes).  Here an oval\n * is defined as two semicircles connected by straight line segments.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the oval in pixels.  Negative is inside.\n */\nfloat distanceToOval(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float minor = radiusVar * ratio;\n  float center = radiusVar - minor;\n  pos = abs(pos);\n  if (pos.x <= center) {\n    return pos.y - minor;\n  }\n  return distance(pos, vec2(center, 0.0)) - minor;\n}\n\n/* Compute the distance from a point to a rectangle defined by the radiusVar\n * (the semidiagonal) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToRectangle(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  vec2 wh = normalize(vec2(1.0, abs(ratio))) * radiusVar;\n  vec2 dist = abs(pos) - wh;\n  return max(dist.x, dist.y);\n}\n\n/* Based on a repetition value, return a position for rotational symmetry.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        int repetitions: number of repetitions on the cross.\n * Exit:  float dist: a point in the primary position.\n */\nvec2 rotationalSymmetry(vec2 pos, int repetitions) {\n  float pi = acos(-1.0);\n  float limit = pi / float(repetitions);\n  float ang = atan(pos.y, pos.x);\n  ang = mod(ang + pi * 2.0, limit * 2.0);\n  if (ang > limit) {\n    ang -= limit * 2.0;\n  }\n  return vec2(cos(ang), sin(ang)) * length(pos);\n}\n\nfloat markerFeatureFragment(vec3 posAndSpacing) {\n  vec2 pos = posAndSpacing.xy;\n  float spacing = posAndSpacing.z;\n  // square lattice\n  if (spacing > 0.0) {\n    pos.x = mod(pos.x + spacing * 0.5, spacing) - spacing * 0.5;\n    pos.y = mod(pos.y + spacing * 0.5, spacing) - spacing * 0.5;\n  }\n  // triangular lattice\n  if (spacing < 0.0) {\n    spacing = spacing * -1.0;\n    float cz = (2.0 * pos.y) / (sqrt(3.0) * spacing);\n    float cx = pos.x / spacing - 0.5 * cz;\n    float cy = -cx - cz;\n    float rx = floor(cx + 0.5);\n    float ry = floor(cy + 0.5);\n    float rz = floor(cz + 0.5);\n    float dx = abs(rx - cx);\n    float dy = abs(ry - cy);\n    float dz = abs(rz - cz);\n    if (dx > dy && dx > dz) {\n      rx = -ry - rz;\n    } else if (dy > dz) {\n      ry = -rx - rz;\n    } else {\n      rz = -rx - ry;\n    }\n    vec2 center = vec2(spacing * (rx + 0.5 * rz), (sqrt(3.0) * spacing * 0.5) * rz);\n    pos = pos - center;\n  }\n  // rad is a value in pixels from the edge of the symbol where negative is\n  // inside the shape\n  float rad = length(pos.xy) - radiusVar;\n  // never allow points outside of the main radius\n  if (rad > 0.0) {\n    return 0.0;\n  }\n  // apply clockwise rotation\n  if (rotationVar != 0.0) {\n    float cosr = cos(rotationVar), sinr = sin(rotationVar);\n    pos = vec2(pos.x * cosr + pos.y * sinr, -pos.x * sinr + pos.y * cosr);\n  }\n\n  int symbol = int(floor(symbolVar / 64.0));\n  bool isimage = bool(mod(floor(symbolVar / 8.0), 2.0));\n  vec4 fillColor, strokeColor;\n  float endStep;\n\n  float ratio = symbolValueVar;\n  // When ratio is 0, it usually gets changed to 1; some shapes could have\n  // better defaults\n  /* Symbol shapes */\n  if (symbol == symbolTriangle) {\n    rad = distanceToIsoscelesTriangle(pos, ratio);\n  } else if (symbol == symbolRectangle) {\n    rad = distanceToRectangle(pos, ratio);\n  } else if (symbol == symbolOval) {\n    rad = distanceToOval(pos, ratio);\n  } else if (symbol == symbolDrop) {\n    rad = distanceToDrop(pos, ratio);\n  } else if (symbol == symbolArrow) {\n    rad = distanceToArrow(pos, ratio);\n  } else if (symbol >= symbolCrossBase && symbol <= symbolCrossBase + symbolCrossMax - 2) {\n    rad = distanceToRectangle(rotationalSymmetry(pos, symbol - symbolCrossBase + 2), ratio);\n  } else if (symbol >= symbolFlowerBase && symbol <= symbolFlowerBase + symbolFlowerMax - 2) {\n    rad = distanceToEllipse(rotationalSymmetry(pos, symbol - symbolFlowerBase + 2), ratio);\n  } else if (symbol >= symbolStarBase && symbol <= symbolStarBase + symbolStarMax - 2) {\n    rad = distanceToIsoscelesTriangle(rotationalSymmetry(pos, symbol - symbolStarBase + 2), ratio);\n  } else if (symbol >= symbolJackBase && symbol <= symbolJackBase + symbolJackMax - 2) {\n    rad = distanceToOval(rotationalSymmetry(pos, symbol - symbolJackBase + 2), ratio);\n  } else if (symbol >= symbolDropBase && symbol <= symbolDropBase + symbolDropMax - 2) {\n    rad = distanceToDrop(rotationalSymmetry(pos, symbol - symbolDropBase + 2), ratio);\n  } else if (symbol >= symbolArrowBase && symbol <= symbolArrowBase + symbolArrowMax - 2) {\n    rad = distanceToArrow(rotationalSymmetry(pos, symbol - symbolArrowBase + 2), ratio);\n  } else { // default - circle or ellipse; a value of 0 or 1 is a circle\n    if (ratio != 0.0 && ratio != 1.0) {\n      rad = distanceToEllipse(pos, ratio);\n    }\n  }\n\n  if (rad >= 0.0) {\n    return 0.0;\n  }\n  // If there is no stroke, the fill region should transition to nothing\n  if (strokeColorVar.a == 0.0 || strokeWidthVar <= 0.0) {\n    strokeColor = vec4(fillColorVar.rgb, 0.0);\n    endStep = 0.0;\n  } else {\n    strokeColor = strokeColorVar;\n    endStep = -strokeWidthVar;\n  }\n  // Likewise, if there is no fill, the stroke should transition to nothing\n  if (fillColorVar.a == 0.0) {\n    fillColor = vec4(strokeColorVar.rgb, 0.0);\n  } else {\n    fillColor = fillColorVar;\n  }\n  float alpha = 1.0;\n  if (rad <= endStep) {\n    float step = smoothstep(endStep - antialiasDist, endStep, rad);\n    vec4 color = mix(fillColor, strokeColor, step);\n    float step2 = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(color, vec4(color.rgb, 0.0), step2);\n    if (color.a > 0.0)\n      alpha = gl_FragColor.a / color.a;\n  } else {\n    float step = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(strokeColor, vec4(strokeColor.rgb, 0.0), step);\n    if (strokeColor.a > 0.0)\n      alpha = gl_FragColor.a / strokeColor.a;\n  }\n  return alpha;\n}\n\n\n// the square/triangle shader defines unitVar\n\nvoid main(void) {\n  // No stroke or fill implies nothing to draw\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0)\n    discard;\n  // for sprites, convert the position to [-radius,radius],[-radius,radius]\n  vec2 pos = (gl_PointCoord.xy - 0.5) * 2.0 * radiusVar;\n  if (markerFeatureFragment(vec3(pos, 0.0)) == 0.0)\n    discard;\n}\n"},7665:function(t){t.exports="/* markerFeature sprite vertex shader */\n\n/* markerFeature common vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float radius;\nattribute vec3 fillColor;\nattribute float fillOpacity;\nattribute vec3 strokeColor;\nattribute float strokeOpacity;\nattribute float strokeWidth;\nattribute float symbol;  /* contains some bit fields */\nattribute float symbolValue;\nattribute float rotation;\nuniform float zoom;\nuniform float rotationUniform;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n// non-sprite has other definitions.\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\n\nfloat markerFeaturePrep(void)\n{\n  // No stroke or fill implies nothing to draw\n  if (radius <= 0.0 || (strokeOpacity <= 0.0 && fillOpacity <= 0.0)) {\n    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);\n    return 0.0;\n  }\n  radiusVar = radius;\n  strokeWidthVar = strokeWidth;\n  int scaleMode = int(mod(symbol, 4.0));\n  float strokeOffset = mod(floor(symbol / 16.0), 4.0) - 1.0;\n  radiusVar += (strokeOffset + 1.0) / 2.0 * strokeWidthVar;\n  if (scaleMode == 1) { // fill\n    radiusVar = (radiusVar - strokeWidthVar) * exp2(zoom) + strokeWidthVar;\n  } else if (scaleMode == 2) { // stroke\n    radiusVar += strokeWidthVar * (exp2(zoom) - 1.0);\n    strokeWidthVar *= exp2(zoom);\n  } else if (scaleMode == 3) { // all\n    radiusVar *= exp2(zoom);\n    strokeWidthVar *= exp2(zoom);\n  }\n  fillColorVar = vec4(fillColor, fillOpacity);\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  symbolVar = symbol;\n  symbolValueVar = symbolValue;\n  rotationVar = rotation;\n  if (bool(mod(floor(symbolVar / 4.0), 2.0))) {\n    rotationVar += rotationUniform;\n  }\n  return radiusVar;\n}\n\n\nvoid main(void)\n{\n  radiusVar = markerFeaturePrep();\n  if (radiusVar == 0.0) {\n    return;\n  }\n  // for sprite\n  gl_Position = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;\n  gl_PointSize = 2.0 * radiusVar;\n}\n"},428:function(t){t.exports="/* contourFeature fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nuniform vec4 minColor;\nuniform vec4 maxColor;\nuniform float steps;\nuniform bool stepped;\nuniform sampler2D sampler2d;\nvarying float valueVar;\nvarying float opacityVar;\n\nvoid main () {\n  vec4 clr;\n  if (valueVar < 0.0) {\n    clr = minColor;\n  } else if (valueVar > steps) {\n    clr = maxColor;\n  } else {\n    float step;\n    if (stepped) {\n      step = floor(valueVar) + 0.5;\n      if (step > steps) {\n        step = steps - 0.5;\n      }\n    } else {\n      step = valueVar + 0.5;\n    }\n    // our texture is padded on either end by a repeated value to ensure\n    // we interpolate smoothly at the ends.\n    clr = texture2D(sampler2d, vec2((step + 1.0) / (steps + 2.0), 0.0));\n  }\n  gl_FragColor = vec4(clr.rgb, clr.a * opacityVar);\n}\n"},4993:function(t){t.exports="/* contourFeature vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float value;\nattribute float opacity;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying float valueVar;\nvarying float opacityVar;\n\nvoid main(void)\n{\n  /* Don't use z values */\n  vec4 scrPos = projectionMatrix * modelViewMatrix * vec4(pos.xy, 0, 1);\n  if (scrPos.w != 0.0) {\n    scrPos = scrPos / scrPos.w;\n  }\n  valueVar = value;\n  opacityVar = opacity;\n  gl_Position = scrPos;\n}\n"},3925:function(t){t.exports="/* pixelmapFeature fragment shader */\n\nvarying highp vec2 iTextureCoord;\nuniform sampler2D sampler2d;\nuniform sampler2D lutSampler;\nuniform int lutWidth;\nuniform int lutHeight;\nuniform mediump float opacity;\nuniform highp vec2 crop;\n\nvoid main(void) {\n  if ((crop.s < 1.0 && iTextureCoord.s > crop.s) || (crop.t < 1.0 && 1.0 - iTextureCoord.t > crop.t)) {\n    discard;\n  }\n  // to add anti-aliasing, we would need to know the current pixel size\n  // (probably computed in the vertex shader) and then sample the base image at\n  // multiple points, then average the output color.\n  highp vec4 lutValue = texture2D(sampler2d, iTextureCoord);\n  highp vec2 lutCoord;\n  lutCoord.s = (\n    mod(\n      // add 0.5 to handle float imprecision\n      floor(lutValue.r * 255.0 + 0.5) +\n      floor(lutValue.g * 255.0 + 0.5) * 256.0,\n      float(lutWidth)\n    // center in pixel\n    ) + 0.5) / float(lutWidth);\n  // Our image is top-down, so invert the coordinate\n  lutCoord.t = 1.0 - (\n    floor(\n      (\n        // add 0.5 to handle float imprecision\n        floor(lutValue.r * 255.0 + 0.5) +\n        floor(lutValue.g * 255.0 + 0.5) * 256.0 +\n        floor(lutValue.b * 255.0 + 0.5) * 256.0 * 256.0\n        // We may want an option to use the alpha channel to allow more indices\n      ) / float(lutWidth)\n    // center in pixel\n    ) + 0.5) / float(lutHeight);\n  if (lutCoord.t < 0.0) {\n    discard;\n  }\n  mediump vec4 color = texture2D(lutSampler, lutCoord);\n\n  color.a *= opacity;\n  gl_FragColor = color;\n}\n"},4317:function(t){t.exports="/* pointFeature square/triangle fragment shader */\n\n/* pointFeature common fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float radiusVar;\nvarying float strokeWidthVar;\n\nvoid pointFeatureFragment(float rad) {\n  vec4 strokeColor, fillColor;\n  float endStep;\n  // No stroke or fill implies nothing to draw\n  if (rad > 1.0)\n    discard;\n  // If there is no stroke, the fill region should transition to nothing\n  if (strokeColorVar.a == 0.0) {\n    strokeColor = vec4(fillColorVar.rgb, 0.0);\n    endStep = 1.0;\n  } else {\n    strokeColor = strokeColorVar;\n    endStep = radiusVar / (radiusVar + strokeWidthVar);\n  }\n  // Likewise, if there is no fill, the stroke should transition to nothing\n  if (fillColorVar.a == 0.0)\n    fillColor = vec4(strokeColor.rgb, 0.0);\n  else\n    fillColor = fillColorVar;\n  // Distance to antialias over.  First number is in pixels\n  float antialiasDist = 1.5 / (radiusVar + strokeWidthVar);\n  if (rad < endStep) {\n    float step = smoothstep(max(0.0, endStep - antialiasDist), endStep, rad);\n    vec4 color = mix(fillColor, strokeColor, step);\n    float step2 = smoothstep(max(0.0, 1.0 - antialiasDist), 1.0, rad);\n    gl_FragColor = mix(color, vec4(color.rgb, 0.0), step2);\n  } else {\n    float step = smoothstep(max(0.0, 1.0 - antialiasDist), 1.0, rad);\n    gl_FragColor = mix(strokeColor, vec4(strokeColor.rgb, 0.0), step);\n  }\n}\n\n\nvarying vec3 unitVar;  // distinct for square/triangle\n\nvoid main () {\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0)\n    discard;\n  float rad = length(unitVar.xy); // distinct for square/triangle\n  pointFeatureFragment(rad);\n}\n"},8208:function(t){t.exports="/* pointFeature square/triangle vertex shader */\n\n/* pointFeature common vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float radius;\nattribute vec3 fillColor;\nattribute vec3 strokeColor;\nattribute float fillOpacity;\nattribute float strokeWidth;\nattribute float strokeOpacity;\nattribute float fill;\nattribute float stroke;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float radiusVar;\nvarying float strokeWidthVar;\n\nfloat pointFeaturePrep() {\n  strokeWidthVar = strokeWidth;\n  fillColorVar = vec4(fillColor, fillOpacity);\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  // No stroke or fill implies nothing to draw\n  if (stroke < 1.0 || strokeWidth <= 0.0 || strokeOpacity <= 0.0) {\n    strokeColorVar.a = 0.0;\n    strokeWidthVar = 0.0;\n  }\n  if (fill < 1.0 || radius <= 0.0 || fillOpacity <= 0.0)\n    fillColorVar.a = 0.0;\n  /* If the point has no visible pixels, skip doing computations on it. */\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0) {\n    gl_Position = vec4(2, 2, 0, 1);\n    return 0.0;\n  }\n  return radius;\n}\n\n\nuniform float pixelWidth; // for non-sprite\nuniform float aspect; // for non-sprite\nattribute vec2 unit; // for non-sprite\nvarying vec3 unitVar; // for non-sprite\n\nvoid main(void)\n{\n  radiusVar = pointFeaturePrep();\n  if (radiusVar == 0.0) {\n    return;\n  }\n  // for non-sprite\n  unitVar = vec3(unit, 1.0);\n  vec4 p = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;\n  if (p.w != 0.0) {\n    p = p / p.w;\n  }\n  p += (radius + strokeWidthVar) *\n       vec4(unit.x * pixelWidth, unit.y * pixelWidth * aspect, 0.0, 1.0);\n  gl_Position = vec4(p.xyz, 1.0);\n}\n"},2682:function(t){t.exports="/* pointFeature sprite fragment shader */\n\n/* pointFeature common fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float radiusVar;\nvarying float strokeWidthVar;\n\nvoid pointFeatureFragment(float rad) {\n  vec4 strokeColor, fillColor;\n  float endStep;\n  // No stroke or fill implies nothing to draw\n  if (rad > 1.0)\n    discard;\n  // If there is no stroke, the fill region should transition to nothing\n  if (strokeColorVar.a == 0.0) {\n    strokeColor = vec4(fillColorVar.rgb, 0.0);\n    endStep = 1.0;\n  } else {\n    strokeColor = strokeColorVar;\n    endStep = radiusVar / (radiusVar + strokeWidthVar);\n  }\n  // Likewise, if there is no fill, the stroke should transition to nothing\n  if (fillColorVar.a == 0.0)\n    fillColor = vec4(strokeColor.rgb, 0.0);\n  else\n    fillColor = fillColorVar;\n  // Distance to antialias over.  First number is in pixels\n  float antialiasDist = 1.5 / (radiusVar + strokeWidthVar);\n  if (rad < endStep) {\n    float step = smoothstep(max(0.0, endStep - antialiasDist), endStep, rad);\n    vec4 color = mix(fillColor, strokeColor, step);\n    float step2 = smoothstep(max(0.0, 1.0 - antialiasDist), 1.0, rad);\n    gl_FragColor = mix(color, vec4(color.rgb, 0.0), step2);\n  } else {\n    float step = smoothstep(max(0.0, 1.0 - antialiasDist), 1.0, rad);\n    gl_FragColor = mix(strokeColor, vec4(strokeColor.rgb, 0.0), step);\n  }\n}\n\n\n// the square/triangle shader defines unitVar\n\nvoid main () {\n  // No stroke or fill implies nothing to draw\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0)\n    discard;\n  float rad = 2.0 * length(gl_PointCoord - vec2(0.5));  // distinct for sprite\n  pointFeatureFragment(rad);\n}\n"},6979:function(t){t.exports="/* pointFeature sprite vertex shader */\n\n/* pointFeature common vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float radius;\nattribute vec3 fillColor;\nattribute vec3 strokeColor;\nattribute float fillOpacity;\nattribute float strokeWidth;\nattribute float strokeOpacity;\nattribute float fill;\nattribute float stroke;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float radiusVar;\nvarying float strokeWidthVar;\n\nfloat pointFeaturePrep() {\n  strokeWidthVar = strokeWidth;\n  fillColorVar = vec4(fillColor, fillOpacity);\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  // No stroke or fill implies nothing to draw\n  if (stroke < 1.0 || strokeWidth <= 0.0 || strokeOpacity <= 0.0) {\n    strokeColorVar.a = 0.0;\n    strokeWidthVar = 0.0;\n  }\n  if (fill < 1.0 || radius <= 0.0 || fillOpacity <= 0.0)\n    fillColorVar.a = 0.0;\n  /* If the point has no visible pixels, skip doing computations on it. */\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0) {\n    gl_Position = vec4(2, 2, 0, 1);\n    return 0.0;\n  }\n  return radius;\n}\n\n\nvoid main(void)\n{\n  radiusVar = pointFeaturePrep();\n  if (radiusVar == 0.0) {\n    return;\n  }\n  // for sprite\n  gl_Position = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;\n  gl_PointSize = 2.0 * (radius + strokeWidthVar);\n}\n"},4547:function(t){t.exports="/* polygonFeature fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying vec4 fillColorVar;\n\nvoid main () {\n  gl_FragColor = fillColorVar;\n}\n"},9506:function(t){t.exports="/* polygonFeature vertex shader */\n\nattribute vec3 pos;\nattribute vec3 fillColor;\nattribute float fillOpacity;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying vec4 fillColorVar;\n\nvoid main(void)\n{\n  vec4 clipPos = projectionMatrix * modelViewMatrix * vec4(pos.xyz, 1.0);\n  if (clipPos.w != 0.0) {\n    clipPos = clipPos/clipPos.w;\n  }\n  fillColorVar = vec4(fillColor, fillOpacity);\n  gl_Position = clipPos;\n}\n"},6207:function(t){t.exports="/* polygonFeature fragment shader */\n\n/* markerFeature common fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\n// the square/triangle shader defines unitVar\nconst int symbolEllipse = 0;\nconst int symbolFlowerBase = 1;\nconst int symbolFlowerMax = 16;\nconst int symbolTriangle = 16;\nconst int symbolStarBase = 17;\nconst int symbolStarMax = 16;\nconst int symbolRectangle = 32;\nconst int symbolCrossBase = 33;\nconst int symbolCrossMax = 16;\nconst int symbolOval = 48;\nconst int symbolJackBase = 49;\nconst int symbolJackMax = 16;\nconst int symbolDrop = 64;\nconst int symbolDropBase = 65;\nconst int symbolDropMax = 16;\nconst int symbolArrow = 80;\nconst int symbolArrowBase = 81;\nconst int symbolArrowMax = 16;\n// Distance to antialias in pixels\nconst float antialiasDist = 1.5;\n\n/* Compute the distance from a point to an arrow defined by the radiusVar and a\n * packed value containing\n *   headWidth: ratio to radius (0, 1]\n *   headLength: ratio to diameter (0, 1]\n *   stemWidth: ratio to headWidth [0, 1]\n *   sweep: boolean\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float packed: the packed value.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToArrow(vec2 pos, float value) {\n  bool sweep = value < 0.0;\n  value = abs(value);\n  float pack0 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack1 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack2 = (mod(value, 252.0) - 1.0) / 250.0;\n\n  float headWidth = (pack0 > 0.0 ? pack0 : 2.0 / 3.0);\n  float headEnd = 1.0 - 2.0 * (pack1 > 0.0 ? pack1 : 1.0 / 2.0);\n  float stemWidth = headWidth * (pack2 >= 0.0 ? pack2 : 1.0 / 3.0);\n  if (length(vec2(headWidth, headEnd)) > 1.0) {\n    vec2 scaledHead = normalize(vec2(headWidth, headEnd));\n    headWidth = scaledHead.x;\n    headEnd = scaledHead.y;\n  }\n  float stemEnd = -cos(asin(stemWidth));\n\n  headWidth *= radiusVar;\n  headEnd *= radiusVar;\n  stemWidth *= radiusVar;\n  stemEnd *= radiusVar;\n  pos.y = abs(pos.y);\n  float stemDist = pos.y - stemWidth;\n  float stemEndDist = stemEnd - pos.x;\n  float B = (radiusVar - headEnd) / headWidth;\n  float headDist = (pos.x + B * pos.y - radiusVar) / sqrt(1.0 + B * B);\n  float headEndDist;\n  if (sweep) {\n    B = (radiusVar - headEnd) / 3.0 / headWidth;\n    headEndDist = -(pos.x + B * pos.y - (radiusVar + headEnd * 2.0) / 3.0) / sqrt(1.0 + B * B);\n  } else {\n    headEndDist = headEnd - pos.x;\n  }\n  headEndDist = min(headEndDist, stemDist);\n  return max(max(headDist, headEndDist), stemEndDist);\n}\n\n/* Compute the distance from a point to a drop defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major radii).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToDrop(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float r = radiusVar * ratio;\n  float cx = radiusVar - r;\n  float rad = distance(pos.xy, vec2(cx, 0.0)) - r;\n  if (ratio < 0.5) {\n    float x = radiusVar - r - r * r / cx;\n    float y = sqrt(r * r - (cx - x) * (cx - x));\n    float Bt = (cx - x) / y;\n    if ((pos.x + Bt * abs(pos.y) - cx) / sqrt(1.0 + Bt * Bt) < 0.0) {\n      float B = -x / y;\n      return -(pos.x + B * abs(pos.y)) / sqrt(1.0 + B * B);\n    }\n  }\n  return rad;\n}\n\n/* Compute the distance from a point to the ellipse defined by the radiusVar\n * (the semimajor axis) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the ellipse in pixels.  Negative is\n *   inside.\n */\nfloat distanceToEllipse(vec2 pos, float ratio) {\n  // a and b are the semi-major and semi-minor axes\n  // ratio is the between the minor and major axes.  If > 1, swap these and\n  // rotate 90 degrees.\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  float a = radiusVar, b = abs(radiusVar * ratio);\n  if (b > a) {\n    pos = vec2(pos.y, -pos.x);\n    b = abs(radiusVar / ratio);\n  }\n  float a2 = a * a, b2 = b * b;\n  // compute the distance to the ellipse.  See this discussion:\n  // https://stackoverflow.com/questions/22959698\n  float f = sqrt(a2 - b2),\n        // this value will be positive if outside and negative if inside.  If\n        // we used it directly, the stroke would be too thick along the long\n        // edges of the ellipse\n        d = (distance(pos, vec2(f, 0.0)) + distance(pos, vec2(-f, 0.0))) * 0.5 - a;\n  // if we are outside of the ellipse, accuracy is not important, so return\n  // early.\n  if (d >= 0.0) {\n    return d;\n  }\n  // work in one quadrant\n  pos = abs(pos);\n  // t (the angle from center) could start as `atan(pos.y, pos.x)`, but this\n  // results in a slower solution near narrow ends\n  float t = 0.7;\n  float cost = cos(t), sint = sin(t), x = a * cost, y = b * sint;\n  vec2 lastxy;\n  for (int iter = 0; iter < 10; iter += 1) {\n    lastxy = vec2(x, y);\n    float ex = (a2 - b2) * pow(cost, 3.0) / a,\n          ey = (b2 - a2) * pow(sint, 3.0) / b;\n    vec2 r = vec2(x - ex, y - ey),\n         q = vec2(pos.x - ex, pos.y - ey);\n    float lenr = length(r);\n    t += lenr * asin((r.x * q.y - r.y * q.x) / lenr / length(q)) / sqrt(a2 + b2 - x * x - y * y);\n    t = clamp(t, 0.0, acos(0.0));\n    cost = cos(t);\n    sint = sin(t);\n    x = a * cost;\n    y = b * sint;\n    if (distance(lastxy, vec2(x, y)) < 0.05) {\n      break;\n    }\n  }\n  return sign(d) * distance(pos, vec2(x, y));\n}\n\n/* Compute the distance from a point to an isosceles triangle.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: length of the base compared to the other sides.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToIsoscelesTriangle(vec2 pos, float ratio) {\n  ratio = clamp(abs(ratio), 0.0, 2.0);\n  if (ratio == 0.0 || ratio == 2.0) {\n    ratio = 1.0;\n  }\n  float s1, s2, x0, x1, y1;\n  if (ratio < sqrt(2.0)) {\n    s1 = radiusVar * sqrt(4.0 - ratio * ratio); // length of equal sides\n    s2 = s1 * ratio;\n    y1 = s2 / 2.0;\n    x0 = radiusVar;\n    x1 = x0 - sqrt(s1 * s1 - y1 * y1);\n  } else {\n    s2 = radiusVar * 2.0;\n    s1 = s2 / ratio;\n    y1 = s2 / 2.0;\n    x0 = sqrt(s1 * s1 - y1 * y1);\n    x1 = 0.0;\n  }\n  float B = (x0 - x1) / y1;\n  return max(x1 - pos.x, (pos.x + B * abs(pos.y) - x0) / sqrt(1.0 + B * B));\n}\n\n/* Compute the distance from a point to an oval defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major axes).  Here an oval\n * is defined as two semicircles connected by straight line segments.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the oval in pixels.  Negative is inside.\n */\nfloat distanceToOval(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float minor = radiusVar * ratio;\n  float center = radiusVar - minor;\n  pos = abs(pos);\n  if (pos.x <= center) {\n    return pos.y - minor;\n  }\n  return distance(pos, vec2(center, 0.0)) - minor;\n}\n\n/* Compute the distance from a point to a rectangle defined by the radiusVar\n * (the semidiagonal) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToRectangle(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  vec2 wh = normalize(vec2(1.0, abs(ratio))) * radiusVar;\n  vec2 dist = abs(pos) - wh;\n  return max(dist.x, dist.y);\n}\n\n/* Based on a repetition value, return a position for rotational symmetry.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        int repetitions: number of repetitions on the cross.\n * Exit:  float dist: a point in the primary position.\n */\nvec2 rotationalSymmetry(vec2 pos, int repetitions) {\n  float pi = acos(-1.0);\n  float limit = pi / float(repetitions);\n  float ang = atan(pos.y, pos.x);\n  ang = mod(ang + pi * 2.0, limit * 2.0);\n  if (ang > limit) {\n    ang -= limit * 2.0;\n  }\n  return vec2(cos(ang), sin(ang)) * length(pos);\n}\n\nfloat markerFeatureFragment(vec3 posAndSpacing) {\n  vec2 pos = posAndSpacing.xy;\n  float spacing = posAndSpacing.z;\n  // square lattice\n  if (spacing > 0.0) {\n    pos.x = mod(pos.x + spacing * 0.5, spacing) - spacing * 0.5;\n    pos.y = mod(pos.y + spacing * 0.5, spacing) - spacing * 0.5;\n  }\n  // triangular lattice\n  if (spacing < 0.0) {\n    spacing = spacing * -1.0;\n    float cz = (2.0 * pos.y) / (sqrt(3.0) * spacing);\n    float cx = pos.x / spacing - 0.5 * cz;\n    float cy = -cx - cz;\n    float rx = floor(cx + 0.5);\n    float ry = floor(cy + 0.5);\n    float rz = floor(cz + 0.5);\n    float dx = abs(rx - cx);\n    float dy = abs(ry - cy);\n    float dz = abs(rz - cz);\n    if (dx > dy && dx > dz) {\n      rx = -ry - rz;\n    } else if (dy > dz) {\n      ry = -rx - rz;\n    } else {\n      rz = -rx - ry;\n    }\n    vec2 center = vec2(spacing * (rx + 0.5 * rz), (sqrt(3.0) * spacing * 0.5) * rz);\n    pos = pos - center;\n  }\n  // rad is a value in pixels from the edge of the symbol where negative is\n  // inside the shape\n  float rad = length(pos.xy) - radiusVar;\n  // never allow points outside of the main radius\n  if (rad > 0.0) {\n    return 0.0;\n  }\n  // apply clockwise rotation\n  if (rotationVar != 0.0) {\n    float cosr = cos(rotationVar), sinr = sin(rotationVar);\n    pos = vec2(pos.x * cosr + pos.y * sinr, -pos.x * sinr + pos.y * cosr);\n  }\n\n  int symbol = int(floor(symbolVar / 64.0));\n  bool isimage = bool(mod(floor(symbolVar / 8.0), 2.0));\n  vec4 fillColor, strokeColor;\n  float endStep;\n\n  float ratio = symbolValueVar;\n  // When ratio is 0, it usually gets changed to 1; some shapes could have\n  // better defaults\n  /* Symbol shapes */\n  if (symbol == symbolTriangle) {\n    rad = distanceToIsoscelesTriangle(pos, ratio);\n  } else if (symbol == symbolRectangle) {\n    rad = distanceToRectangle(pos, ratio);\n  } else if (symbol == symbolOval) {\n    rad = distanceToOval(pos, ratio);\n  } else if (symbol == symbolDrop) {\n    rad = distanceToDrop(pos, ratio);\n  } else if (symbol == symbolArrow) {\n    rad = distanceToArrow(pos, ratio);\n  } else if (symbol >= symbolCrossBase && symbol <= symbolCrossBase + symbolCrossMax - 2) {\n    rad = distanceToRectangle(rotationalSymmetry(pos, symbol - symbolCrossBase + 2), ratio);\n  } else if (symbol >= symbolFlowerBase && symbol <= symbolFlowerBase + symbolFlowerMax - 2) {\n    rad = distanceToEllipse(rotationalSymmetry(pos, symbol - symbolFlowerBase + 2), ratio);\n  } else if (symbol >= symbolStarBase && symbol <= symbolStarBase + symbolStarMax - 2) {\n    rad = distanceToIsoscelesTriangle(rotationalSymmetry(pos, symbol - symbolStarBase + 2), ratio);\n  } else if (symbol >= symbolJackBase && symbol <= symbolJackBase + symbolJackMax - 2) {\n    rad = distanceToOval(rotationalSymmetry(pos, symbol - symbolJackBase + 2), ratio);\n  } else if (symbol >= symbolDropBase && symbol <= symbolDropBase + symbolDropMax - 2) {\n    rad = distanceToDrop(rotationalSymmetry(pos, symbol - symbolDropBase + 2), ratio);\n  } else if (symbol >= symbolArrowBase && symbol <= symbolArrowBase + symbolArrowMax - 2) {\n    rad = distanceToArrow(rotationalSymmetry(pos, symbol - symbolArrowBase + 2), ratio);\n  } else { // default - circle or ellipse; a value of 0 or 1 is a circle\n    if (ratio != 0.0 && ratio != 1.0) {\n      rad = distanceToEllipse(pos, ratio);\n    }\n  }\n\n  if (rad >= 0.0) {\n    return 0.0;\n  }\n  // If there is no stroke, the fill region should transition to nothing\n  if (strokeColorVar.a == 0.0 || strokeWidthVar <= 0.0) {\n    strokeColor = vec4(fillColorVar.rgb, 0.0);\n    endStep = 0.0;\n  } else {\n    strokeColor = strokeColorVar;\n    endStep = -strokeWidthVar;\n  }\n  // Likewise, if there is no fill, the stroke should transition to nothing\n  if (fillColorVar.a == 0.0) {\n    fillColor = vec4(strokeColorVar.rgb, 0.0);\n  } else {\n    fillColor = fillColorVar;\n  }\n  float alpha = 1.0;\n  if (rad <= endStep) {\n    float step = smoothstep(endStep - antialiasDist, endStep, rad);\n    vec4 color = mix(fillColor, strokeColor, step);\n    float step2 = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(color, vec4(color.rgb, 0.0), step2);\n    if (color.a > 0.0)\n      alpha = gl_FragColor.a / color.a;\n  } else {\n    float step = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(strokeColor, vec4(strokeColor.rgb, 0.0), step);\n    if (strokeColor.a > 0.0)\n      alpha = gl_FragColor.a / strokeColor.a;\n  }\n  return alpha;\n}\n\n\nvarying vec4 polyFillColorVar;\nvarying vec3 patternPosVar;\n\nvoid main () {\n\n  float used = 0.0;\n  if (fillColorVar.a != 0.0 || strokeColorVar.a != 0.0)\n    used = markerFeatureFragment(patternPosVar);\n  if (used != 1.0)\n    gl_FragColor = polyFillColorVar * (1.0 - used) + gl_FragColor * used;\n}\n"},1030:function(t){t.exports="/* polygonPatternFeature vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nuniform float pixelWidth;\nuniform float aspect;\nuniform float zoom;\nuniform float rotationUniform;\nattribute vec3 pos;\nattribute vec3 fillColor;\nattribute float fillOpacity;\nattribute vec4 patternFillColor;\nattribute vec4 patternStrokeColor;\n/* Symbol props are strokeWidth, radius, symbol + flags, symbolValue */\nattribute vec4 patternSymbolProps;\n/* Position props are rotation, spacing, origin x, origin y */\nattribute vec4 patternPositionProps;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying vec4 polyFillColorVar;\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\nvarying vec3 patternPosVar;\nconst float PI = 3.14159265358979323846264;\n\nvoid main(void)\n{\n  polyFillColorVar = vec4(fillColor, fillOpacity);\n  /* This is _nearly_ the same as what is in markerFeatureVS.glsl, but the\n   * attributes are named differently. */\n  radiusVar = patternSymbolProps.y;\n  strokeWidthVar = patternSymbolProps.x;\n  int scaleMode = int(mod(patternSymbolProps.z, 4.0));\n  float strokeOffset = mod(floor(patternSymbolProps.z / 16.0), 4.0) - 1.0;\n  if (radiusVar < 0.0 || (patternFillColor.a < 0.0 && patternStrokeColor.a < 0.0)) {\n    radiusVar = 0.0;\n  } else {\n    radiusVar += (strokeOffset + 1.0) / 2.0 * strokeWidthVar;\n    if (scaleMode == 1) { // fill\n      radiusVar = (radiusVar - strokeWidthVar) * exp2(zoom) + strokeWidthVar;\n    } else if (scaleMode == 2) { // stroke\n      radiusVar += strokeWidthVar * (exp2(zoom) - 1.0);\n      strokeWidthVar *= exp2(zoom);\n    } else if (scaleMode == 3) { // all\n      radiusVar *= exp2(zoom);\n      strokeWidthVar *= exp2(zoom);\n    }\n  }\n  fillColorVar = patternFillColor;\n  strokeColorVar = patternStrokeColor;\n  symbolVar = patternSymbolProps.z;\n  symbolValueVar = patternSymbolProps.w;\n  rotationVar = patternPositionProps.x;\n  if (bool(mod(floor(symbolVar / 4.0), 2.0))) {\n    rotationVar += rotationUniform;\n  }\n  /* This is distinct for polygonPattern */\n  vec4 clipPos = projectionMatrix * modelViewMatrix * vec4(pos.xyz, 1.0);\n  if (clipPos.w != 0.0) {\n    clipPos = clipPos / clipPos.w;\n  }\n  if (radiusVar > 0.0) {\n    vec4 origPos = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);\n    if (origPos.w != 0.0)\n      origPos = origPos / origPos.w;\n    patternPosVar.x = (clipPos.x - origPos.x) / pixelWidth;\n    patternPosVar.y = -(clipPos.y - origPos.y) / pixelWidth / aspect;\n    float spacing = patternPositionProps.y;\n    if (scaleMode == 0) {\n      patternPosVar.x -= patternPositionProps.z;\n      patternPosVar.y -= patternPositionProps.w;\n    } else {\n      spacing = spacing * exp2(zoom);\n      patternPosVar.x -= patternPositionProps.z * exp2(zoom);\n      patternPosVar.y -= patternPositionProps.w * exp2(zoom);\n    }\n    if (rotationUniform != 0.0) {\n      float cosR = cos(rotationUniform);\n      float sinR = sin(rotationUniform);\n      patternPosVar.xy = vec2(cosR * patternPosVar.x + sinR * patternPosVar.y, sinR * patternPosVar.x - cosR * patternPosVar.y);\n    }\n    patternPosVar.z = spacing;\n  }\n  gl_Position = clipPos;\n}\n"},8961:function(t){t.exports="/* quadFeature Color fragment shader */\n\nvarying mediump vec3 iVertexColor;\nuniform mediump float opacity;\n\nvoid main(void) {\n  gl_FragColor = vec4(iVertexColor, opacity);\n}\n"},3260:function(t){t.exports="/* quadFeature Color vertex shader */\n\nattribute vec3 vertexPosition;\nuniform float zOffset;\nuniform vec3 vertexColor;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying mediump vec3 iVertexColor;\n\nvoid main(void) {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);\n  gl_Position.z += zOffset;\n  iVertexColor = vertexColor;\n}\n"},8711:function(t){t.exports="/* quadFeature Image fragment shader */\n\nvarying highp vec2 iTextureCoord;\nuniform sampler2D sampler2d;\nuniform mediump float opacity;\nuniform highp vec2 crop;\n\nvoid main(void) {\n  mediump vec4 color = texture2D(sampler2d, iTextureCoord);\n  if ((crop.s < 1.0 && iTextureCoord.s > crop.s) || (crop.t < 1.0 && 1.0 - iTextureCoord.t > crop.t)) {\n    discard;\n  }\n  color.w *= opacity;\n  gl_FragColor = color;\n}\n"},6238:function(t){t.exports="/* quadFeature Image vertex shader */\n\nattribute vec3 vertexPosition;\nattribute vec2 textureCoord;\nuniform float zOffset;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying highp vec2 iTextureCoord;\nuniform highp vec4 cropsource;\n\nvoid main(void) {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);\n  gl_Position.z += zOffset;\n  if (cropsource.p > cropsource.s && cropsource.q > cropsource.t && (cropsource.p < 1.0 || cropsource.s > 0.0 || cropsource.q < 1.0 || cropsource.t > 0.0)) {\n    iTextureCoord.s = textureCoord.s * (cropsource.p - cropsource.s) + cropsource.s;\n    iTextureCoord.t = textureCoord.t * (cropsource.q - cropsource.t) + cropsource.t;\n  } else {\n    iTextureCoord = textureCoord;\n  }\n}\n"},7605:function(t,e,n){"use strict";n.r(e);var r=n(5292),i=n.n(r),o=n(9893),a=n.n(o),s=n(9383),u=n.n(s),l=n(6884),c=n.n(l),f=n(9088),h=n.n(f),d=n(7997),p=n.n(d),m=n(632),g={};g.styleTagTransform=p(),g.setAttributes=c(),g.insert=u().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=h();i()(m.A,g);e.default=m.A&&m.A.locals?m.A.locals:void 0},1159:function(t,e,n){"use strict";n.r(e);var r=n(5292),i=n.n(r),o=n(9893),a=n.n(o),s=n(9383),u=n.n(s),l=n(6884),c=n.n(l),f=n(9088),h=n.n(f),d=n(7997),p=n.n(d),m=n(7046),g={};g.styleTagTransform=p(),g.setAttributes=c(),g.insert=u().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=h();i()(m.A,g);e.default=m.A&&m.A.locals?m.A.locals:void 0},615:function(t,e,n){"use strict";n.r(e);var r=n(5292),i=n.n(r),o=n(9893),a=n.n(o),s=n(9383),u=n.n(s),l=n(6884),c=n.n(l),f=n(9088),h=n.n(f),d=n(7997),p=n.n(d),m=n(5290),g={};g.styleTagTransform=p(),g.setAttributes=c(),g.insert=u().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=h();i()(m.A,g);e.default=m.A&&m.A.locals?m.A.locals:void 0},5292:function(t){"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var o={},a=[],s=0;s<t.length;s++){var u=t[s],l=r.base?u[0]+r.base:u[0],c=o[l]||0,f="".concat(l," ").concat(c);o[l]=c+1;var h=n(f),d={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==h)e[h].references++,e[h].updater(d);else{var p=i(d,r);r.byIndex=s,e.splice(s,0,{identifier:f,updater:p,references:1})}a.push(f)}return a}function i(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var o=r(t=t||[],i=i||{});return function(t){t=t||[];for(var a=0;a<o.length;a++){var s=n(o[a]);e[s].references--}for(var u=r(t,i),l=0;l<o.length;l++){var c=n(o[l]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}o=u}}},9383:function(t){"use strict";var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9088:function(t){"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},6884:function(t,e,n){"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},9893:function(t){"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},7997:function(t){"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},9463:function(t){"use strict";t.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj4KICAgIDxwYXRoIGQ9Ik0wLDExbDExLDBsMCwtMTFsMiwwbDAsMTFsMTEsMGwwLDJsLTExLDBsMCwxMWwtMiwwbDAsLTExbC0xMSwweiIgZmlsbD0iYmxhY2siIHN0cm9rZS13aWR0aD0iMCIvPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzIsIDE5Ljc3Nykgc2NhbGUoMC40KSByb3RhdGUoOTApIj4KICAgICAgICA8cGF0aCBkPSJNMjYuMzExLDIzLjIyNGMtMC44MTItMS40MTYtMi4wNzItMi4zNzUtMy40MDItMi43MzZjLTEuMDUxLTAuMjg3LTIuMTQxLTAuMTk5LTMuMDg0LDAuMzM0bC0yLjgwNS00LjkwNAogICAgICAgIGMxLjczNi0zLjQ2Myw1LjYzMy0xMS4yMjcsNi4zMzItMTIuNDUxQzI0LjI1OCwxLjg4NCwyMi42MzcsMCwyMi42MzcsMGwtNy4zNiwxMi44NzJMNy45MTksMGMwLDAtMS42MiwxLjg4NC0wLjcxNSwzLjQ2NgogICAgICAgIGMwLjcsMS4yMjUsNC41OTgsOC45ODgsNi4zMzIsMTIuNDUxbC0yLjgwNCw0LjkwNGMtMC45NDMtMC41MzMtMi4wMzUtMC42MjEtMy4wODQtMC4zMzRjLTEuMzMyLDAuMzYxLTIuNTkxLDEuMzItMy40MDMsMi43MzYKICAgICAgICBjLTEuNDU4LDIuNTQ3LTAuOTAxLDUuNjAyLDEuMjM5LDYuODI3YzAuOTQ5LDAuNTQ1LDIuMDQ4LDAuNjMyLDMuMTA3LDAuMzQ1YzEuMzI5LTAuMzYzLDIuNTkxLTEuMzIyLDMuNDAyLTIuNzM1CiAgICAgICAgYzAuMzU1LTAuNjI0LDAuNTktMS4yNzcsMC43MS0xLjkyNnYwLjAwMWMwLjAwMS0wLjAwNSwwLjAwMS0wLjAxLDAuMDA2LTAuMDE1YzAuMDA3LTAuMDU0LDAuMDE3LTAuMTA4LDAuMDIyLTAuMTY3CiAgICAgICAgYzAuNjAyLTQuMDM5LDEuNzQtNi4xMDIsMi41NDUtNy4xMDRjMC44MDcsMS4wMDIsMS45NDYsMy4wNjQsMi41NDcsNy4xMDRjMC4wMDYsMC4wNTksMC4wMTYsMC4xMTMsMC4wMjEsMC4xNjcKICAgICAgICBjMC4wMDQsMC4wMDUsMC4wMDQsMC4wMSwwLjAwNiwwLjAxNXYtMC4wMDFjMC4xMjEsMC42NDgsMC4zNTUsMS4zMDIsMC43MDksMS45MjZjMC44MTIsMS40MTMsMi4wNzQsMi4zNzIsMy40MDQsMi43MzUKICAgICAgICBjMS4wNTksMC4yODcsMi4xNTgsMC4yLDMuMTA5LTAuMzQ1QzI3LjIxMywyOC44MjUsMjcuNzY4LDI1Ljc3MSwyNi4zMTEsMjMuMjI0eiBNOS45MTEsMjYuNDY4CiAgICAgICAgYy0wLjQ2LDAuODAzLTEuMTg5LDEuNDA4LTEuOTQ4LDEuNjE1Yy0wLjMzOCwwLjA5Mi0wLjgzNCwwLjE0OC0xLjI4OS0wLjExM2MtMC45Ny0wLjU1NS0xLjEyOS0yLjE4Ni0wLjM0Ni0zLjU1NgogICAgICAgIGMwLjQ2OC0wLjgxMiwxLjE3Ny0xLjQwMywxLjk1LTEuNjE0YzAuMzM1LTAuMDkxLDAuODMxLTAuMTQ2LDEuMjg4LDAuMTEzQzEwLjUzNywyMy40NywxMC42OTUsMjUuMDk3LDkuOTExLDI2LjQ2OHogTTIzLjg4MSwyNy45NwogICAgICAgIGMtMC40NTUsMC4yNjItMC45NDksMC4yMDUtMS4yODcsMC4xMTNjLTAuNzYtMC4yMDctMS40ODgtMC44MTItMS45NDktMS42MTVjLTAuNzgzLTEuMzcxLTAuNjI1LTIuOTk4LDAuMzQ2LTMuNTU1CiAgICAgICAgYzAuNDU3LTAuMjYsMC45NTMtMC4yMDQsMS4yODktMC4xMTNjMC43NzEsMC4yMTEsMS40ODIsMC44MDIsMS45NDcsMS42MTRDMjUuMDEsMjUuNzg0LDI0Ljg1MiwyNy40MTUsMjMuODgxLDI3Ljk3eiIgZmlsbD0iYmxhY2siIHN0cm9rZS13aWR0aD0iMCIvPgogICAgPC9nPgo8L3N2Zz4K"},5245:function(t){"use strict";t.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj4KPHBhdGggZD0iTTAsMTFsMTEsMGwwLC0xMWwyLDBsMCwxMWwxMSwwbDAsMmwtMTEsMGwwLDExbC0yLDBsMCwtMTFsLTExLDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+CjxwYXRoIGQ9Ik0yNCwyN2w4LDBsMCwybC04LDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+Cjwvc3ZnPgo="},8546:function(t){"use strict";t.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj4KPHBhdGggZD0iTTAsMTFsMTEsMGwwLC0xMWwyLDBsMCwxMWwxMSwwbDAsMmwtMTEsMGwwLDExbC0yLDBsMCwtMTFsLTExLDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+CjxwYXRoIGQ9Ik0yNCwyN2wzLDBsMCwtM2wyLDBsMCwzbDMsMGwwLDJsLTMsMGwwLDNsLTIsMGwwLC0zbC0zLDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+Cjwvc3ZnPgo="},3158:function(t){"use strict";t.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj4KPHBhdGggZD0iTTAsMTFsMTEsMGwwLC0xMWwyLDBsMCwxMWwxMSwwbDAsMmwtMTEsMGwwLDExbC0yLDBsMCwtMTFsLTExLDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+CjxwYXRoIGQ9Ik0yNCwzMmwwLC00YTQsNCwwLDAsMSw4LDBsMCw0bC0yLDBsMCwtNGEyLDIsMCwwLDAsLTQsMGwwLDR6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+Cjwvc3ZnPgo="},9803:function(t){"use strict";t.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj4KPHBhdGggZD0iTTAsMTFsMTEsMGwwLC0xMWwyLDBsMCwxMWwxMSwwbDAsMmwtMTEsMGwwLDExbC0yLDBsMCwtMTFsLTExLDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+CjxwYXRoIGQ9Ik0zMiwzMC41OWwtMS40MSwxLjQxbC0yLjEyLC0yLjEybC0yLjEyLDIuMTJsLTEuNDEsLTEuNDFsMi4xMiwtMi4xMmwtMi4xMiwtMi4xMmwxLjQxLC0xLjQxbDIuMTIsMi4xMmwyLjEyLC0yLjEybDEuNDEsMS40MWwtMi4xMiwyLjEyeiIgZmlsbD0iYmxhY2siIHN0cm9rZS13aWR0aD0iMCIvPgo8L3N2Zz4K"},4436:function(e){"use strict";if(void 0===t){var n=new Error("Cannot find module 'vtk.js'");throw n.code="MODULE_NOT_FOUND",n}e.exports=t},9061:function(t,e){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=p(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function i(t,e,r){return e=a(e),function(t,e){if(e&&("object"==n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,o()?Reflect.construct(e,r||[],a(t).constructor):e.apply(t,r))}function o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(o=function(){return!!t})()}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function c(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||p(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){if(t){if("string"==typeof t)return m(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function g(t,e,n){return t+(e-t)*n}function y(t,e,n){return[g(t[0],e[0],n),g(t[1],e[1],n)]}function v(t,e){var n=d(t,2),r=n[0],i=n[1],o=d(e,2),a=o[0],s=o[1];return!(r[0]>s[0]||i[0]<a[0]||r[1]>s[1]||i[1]<a[1])}Object.defineProperty(e,"__esModule",{value:!0});var x=c(function t(){h(this,t)}),_=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e-10;return h(this,e),(t=i(this,e)).epsilon=n,t}return s(e,t),c(e,[{key:"snap0",value:function(t){return Math.abs(t)<this.epsilon?0:t}},{key:"snap01",value:function(t){return Math.abs(t)<this.epsilon?0:Math.abs(1-t)<this.epsilon?1:t}},{key:"isCollinear",value:function(t,e,n){var r=t[0]-e[0],i=t[1]-e[1],o=e[0]-n[0],a=e[1]-n[1];return Math.abs(r*a-o*i)<this.epsilon}},{key:"solveCubicNormalized",value:function(t,e,n){var r=t/3,i=e/3,o=r*r-i,a=r*(r*r-e/2)+n/2;if(Math.abs(a)<this.epsilon&&Math.abs(o)<this.epsilon)return[-r];var s=r*(r*(4*r*n-i*e)-2*e*n)+4*i*i*i+n*n;if(Math.abs(s)<this.epsilon){var u=Math.sqrt(o);return a>0?[-2*u-t/3,u-t/3]:[-u-t/3,2*u-t/3]}var l=o*o*o,c=a*a;if(c<l){var f=(a<0?-1:1)*Math.sqrt(c/l),h=Math.acos(f),d=-2*Math.sqrt(o);return[d*Math.cos(h/3)-r,d*Math.cos((h+2*Math.PI)/3)-r,d*Math.cos((h-2*Math.PI)/3)-r].sort(function(t,e){return t-e})}var p=(a<0?1:-1)*Math.pow(Math.abs(a)+Math.sqrt(c-l),1/3);return[p+(Math.abs(p)>=this.epsilon?o/p:0)-r]}},{key:"solveCubic",value:function(t,e,n,r){if(Math.abs(t)<this.epsilon){if(Math.abs(e)<this.epsilon)return Math.abs(n)<this.epsilon?Math.abs(r)<this.epsilon?[0]:[]:[-r/n];var i=2*e,o=n*n-4*e*r;return Math.abs(o)<this.epsilon?[-n/i]:o>0?[(-n+(o=Math.sqrt(o)))/i,(-n-o)/i].sort(function(t,e){return t-e}):[]}return this.solveCubicNormalized(e/t,n/t,r/t)}},{key:"isEqualVec2",value:function(t,e){return Math.abs(t[0]-e[0])<this.epsilon&&Math.abs(t[1]-e[1])<this.epsilon}},{key:"compareVec2",value:function(t,e){return Math.abs(e[0]-t[0])<this.epsilon?Math.abs(e[1]-t[1])<this.epsilon?0:t[1]<e[1]?-1:1:t[0]<e[0]?-1:1}}])}(x),b=function(){return c(function t(e){h(this,t),this.tValues=[],this.geo=e},[{key:"addArray",value:function(t){var e,n=r(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.tValues.push(i)}}catch(t){n.e(t)}finally{n.f()}return this}},{key:"add",value:function(t){if((t=this.geo.snap01(t))<0||t>1)return this;var e,n=r(this.tValues);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(0===this.geo.snap0(t-i))return this}}catch(t){n.e(t)}finally{n.f()}return this.tValues.push(t),this}},{key:"list",value:function(){return this.tValues.sort(function(t,e){return t-e}),this.tValues}}])}(),w=function(){return c(function t(e,n){h(this,t),this.tValuePairs=[],this.allowOutOfRange=e,this.geo=n},[{key:"add",value:function(t,e){if(t=this.geo.snap01(t),e=this.geo.snap01(e),!this.allowOutOfRange&&(t<0||t>1||e<0||e>1))return this;var n,i=r(this.tValuePairs);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(0===this.geo.snap0(t-o[0])||0===this.geo.snap0(e-o[1]))return this}}catch(t){i.e(t)}finally{i.f()}return this.tValuePairs.push([t,e]),this}},{key:"list",value:function(){return this.tValuePairs.sort(function(t,e){return t[0]-e[0]}),this.tValuePairs}},{key:"done",value:function(){return this.tValuePairs.length<=0?null:{kind:"tValuePairs",tValuePairs:this.list()}}}])}(),M=c(function t(){h(this,t)}),A=function(t){function e(t,n,r){var o;return h(this,e),(o=i(this,e)).p0=t,o.p1=n,o.geo=r,o}return s(e,t),c(e,[{key:"copy",value:function(){return new e(this.p0,this.p1,this.geo)}},{key:"isEqual",value:function(t){return this.geo.isEqualVec2(this.p0,t.p0)&&this.geo.isEqualVec2(this.p1,t.p1)}},{key:"start",value:function(){return this.p0}},{key:"start2",value:function(){return this.p1}},{key:"end2",value:function(){return this.p0}},{key:"end",value:function(){return this.p1}},{key:"setStart",value:function(t){this.p0=t}},{key:"setEnd",value:function(t){this.p1=t}},{key:"point",value:function(t){var e=this.p0,n=this.p1;return 0===t?e:1===t?n:[e[0]+(n[0]-e[0])*t,e[1]+(n[1]-e[1])*t]}},{key:"split",value:function(t){var n=this;if(t.length<=0)return[this];var i=t.map(function(t){return n.point(t)});i.push(this.p1);var o,a=[],s=this.p0,u=r(i);try{for(u.s();!(o=u.n()).done;){var l=o.value;a.push(new e(s,l,this.geo)),s=l}}catch(t){u.e(t)}finally{u.f()}return a}},{key:"reverse",value:function(){return new e(this.p1,this.p0,this.geo)}},{key:"boundingBox",value:function(){var t=this.p0,e=this.p1;return[[Math.min(t[0],e[0]),Math.min(t[1],e[1])],[Math.max(t[0],e[0]),Math.max(t[1],e[1])]]}},{key:"pointOn",value:function(t){return this.geo.isCollinear(t,this.p0,this.p1)}},{key:"draw",value:function(t){var e=this.p0,n=this.p1;return t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t}}])}(M),E=function(t){function e(t,n,r,o,a){var s;return h(this,e),(s=i(this,e)).p0=t,s.p1=n,s.p2=r,s.p3=o,s.geo=a,s}return s(e,t),c(e,[{key:"copy",value:function(){return new e(this.p0,this.p1,this.p2,this.p3,this.geo)}},{key:"isEqual",value:function(t){return this.geo.isEqualVec2(this.p0,t.p0)&&this.geo.isEqualVec2(this.p1,t.p1)&&this.geo.isEqualVec2(this.p2,t.p2)&&this.geo.isEqualVec2(this.p3,t.p3)}},{key:"start",value:function(){return this.p0}},{key:"start2",value:function(){return this.p1}},{key:"end2",value:function(){return this.p2}},{key:"end",value:function(){return this.p3}},{key:"setStart",value:function(t){this.p0=t}},{key:"setEnd",value:function(t){this.p3=t}},{key:"point",value:function(t){var e=this.p0,n=this.p1,r=this.p2,i=this.p3;if(0===t)return e;if(1===t)return i;var o=(1-t)*(1-t),a=t*t,s=o*(1-t),u=3*o*t,l=3*a*(1-t),c=a*t;return[e[0]*s+n[0]*u+r[0]*l+i[0]*c,e[1]*s+n[1]*u+r[1]*l+i[1]*c]}},{key:"split",value:function(t){var n=this;if(t.length<=0)return[this];var i,o=[],a=function(t,r){var i=d(t,4),a=i[0],s=i[1],u=i[2],l=i[3],c=y(a,s,r),f=y(s,u,r),h=y(u,l,r),p=y(c,f,r),m=y(f,h,r),g=y(p,m,r);return o.push(new e(a,c,p,g,n.geo)),[g,m,h,l]},s=[this.p0,this.p1,this.p2,this.p3],u=0,l=r(t);try{for(l.s();!(i=l.n()).done;){var c=i.value;s=a(s,(c-u)/(1-u)),u=c}}catch(t){l.e(t)}finally{l.f()}return o.push(new e(s[0],s[1],s[2],s[3],this.geo)),o}},{key:"reverse",value:function(){return new e(this.p3,this.p2,this.p1,this.p0,this.geo)}},{key:"getCubicCoefficients",value:function(t){var e=this.p0[t],n=this.p1[t],r=this.p2[t];return[this.p3[t]-3*r+3*n-e,3*r-6*n+3*e,3*n-3*e,e]}},{key:"boundingTValues",value:function(){var t=this,e=new b(this.geo),n=function(n,r,i,o){var a=3*o-9*i+9*r-3*n,s=6*n-12*r+6*i,u=3*r-3*n;if(0===t.geo.snap0(a))e.add(-u/s);else{var l=s*s-4*a*u;if(l>=0){var c=Math.sqrt(l);e.add((-s+c)/(2*a)),e.add((-s-c)/(2*a))}}return e},r=this.p0,i=this.p1,o=this.p2,a=this.p3;return n(r[0],i[0],o[0],a[0]),n(r[1],i[1],o[1],a[1]),e.list()}},{key:"inflectionTValues",value:function(){var t=new b(this.geo);t.addArray(this.boundingTValues());var e,n=this.p0,i=this.p1,o=this.p2,a=this.p3,s=3*(i[0]-n[0]),u=3*(i[1]-n[1]),l=6*(o[0]-i[0]),c=6*(o[1]-i[1]),f=3*(a[0]-o[0]),h=3*(a[1]-o[1]),d=6*(o[0]-2*i[0]+n[0]),p=6*(o[1]-2*i[1]+n[1]),m=s-l+f,g=u-c+h,y=l-2*s,v=c-2*u,x=6*(a[0]-2*o[0]+i[0])-d,_=6*(a[1]-2*o[1]+i[1])-p,w=m*_-g*x,M=m*p+y*_-g*d-v*x,A=y*p+s*_-v*d-u*x,E=s*p-u*d,T=r(this.geo.solveCubic(w,M,A,E));try{for(T.s();!(e=T.n()).done;){var S=e.value;t.add(S)}}catch(t){T.e(t)}finally{T.f()}return t.list()}},{key:"boundingBox",value:function(){var t,e=this.p0,n=this.p3,i=[Math.min(e[0],n[0]),Math.min(e[1],n[1])],o=[Math.max(e[0],n[0]),Math.max(e[1],n[1])],a=r(this.boundingTValues());try{for(a.s();!(t=a.n()).done;){var s=t.value,u=this.point(s);i[0]=Math.min(i[0],u[0]),i[1]=Math.min(i[1],u[1]),o[0]=Math.max(o[0],u[0]),o[1]=Math.max(o[1],u[1])}}catch(t){a.e(t)}finally{a.f()}return[i,o]}},{key:"mapXtoT",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===this.geo.snap0(this.p0[0]-t))return 0;if(0===this.geo.snap0(this.p3[0]-t))return 1;var n,i=this.p0[0]-t,o=this.p1[0]-t,a=this.p2[0]-t,s=[this.p3[0]-t-3*a+3*o-i,3*a-6*o+3*i,3*o-3*i,i],u=r(this.geo.solveCubic(s[0],s[1],s[2],s[3]));try{for(u.s();!(n=u.n()).done;){var l=n.value,c=this.geo.snap01(l);if(c>=0&&c<=1)return l}}catch(t){u.e(t)}finally{u.f()}if(e||t>=Math.min(this.p0[0],this.p3[0])&&t<=Math.max(this.p0[0],this.p3[0]))for(var f=0;f<4;f++){for(var h=-1,d=0;d<4;d++)0!==s[d]&&(h<0||Math.abs(s[d])<Math.abs(s[h]))&&(h=d);if(h<0)return 0;s[h]=0;var p,m=r(this.geo.solveCubic(s[0],s[1],s[2],s[3]));try{for(m.s();!(p=m.n()).done;){var g=p.value,y=this.geo.snap01(g);if(y>=0&&y<=1)return g}}catch(t){m.e(t)}finally{m.f()}}return!1}},{key:"mapXtoY",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.mapXtoT(t,e);return!1!==n&&this.point(n)[1]}},{key:"pointOn",value:function(t){if(this.geo.isEqualVec2(this.p0,t)||this.geo.isEqualVec2(this.p3,t))return!0;var e=this.mapXtoY(t[0]);return!1!==e&&0===this.geo.snap0(e-t[1])}},{key:"toLine",value:function(){var t=this.p0,e=this.p1,n=this.p2,r=this.p3;return 0===this.geo.snap0(t[0]-e[0])&&0===this.geo.snap0(t[0]-n[0])&&0===this.geo.snap0(t[0]-r[0])||0===this.geo.snap0(t[1]-e[1])&&0===this.geo.snap0(t[1]-n[1])&&0===this.geo.snap0(t[1]-r[1])?new A(t,r,this.geo):null}},{key:"draw",value:function(t){var e=this.p0,n=this.p1,r=this.p2,i=this.p3;return t.moveTo(e[0],e[1]),t.bezierCurveTo(n[0],n[1],r[0],r[1],i[0],i[1]),t}}])}(M);function T(t,e){var n=e.p1[0]-e.p0[0],r=e.p1[1]-e.p0[1];return((t[0]-e.p0[0])*n+(t[1]-e.p0[1])*r)/(n*n+r*r)}function S(t,e,n){var r=t.geo,i=t.p0,o=t.p1,a=e.p0,s=e.p1,u=o[0]-i[0],l=o[1]-i[1],c=s[0]-a[0],f=s[1]-a[1],h=u*f-l*c;if(0===r.snap0(h)){if(!r.isCollinear(i,o,a))return null;var d=T(e.p0,t),p=T(e.p1,t),m=r.snap01(Math.min(d,p)),g=r.snap01(Math.max(d,p));if(g<0||m>1)return null;var y=T(t.p0,e),v=T(t.p1,e),x=r.snap01(Math.min(y,v)),_=r.snap01(Math.max(y,v));return _<0||x>1?null:{kind:"tRangePairs",tStart:[Math.max(0,m),Math.max(0,x)],tEnd:[Math.min(1,g),Math.min(1,_)]}}var b=i[0]-a[0],M=i[1]-a[1];return new w(n,r).add((c*M-f*b)/h,(u*M-l*b)/h).done()}function C(t,e,n,i){var o=t.geo,a=t.p0,s=t.p1,u=s[1]-a[1],l=a[0]-s[0];if(0===o.snap0(l)){var c=e.mapXtoT(a[0],!1);if(!1===c)return null;var f=(e.point(c)[1]-a[1])/u,h=new w(n,o);return i?h.add(c,f):h.add(f,c),h.done()}var d=u*a[0]+l*a[1],p=e.getCubicCoefficients(0),m=e.getCubicCoefficients(1),g=u*p[0]+l*m[0],y=u*p[1]+l*m[1],v=u*p[2]+l*m[2],x=u*p[3]+l*m[3]-d,_=o.solveCubic(g,y,v,x),b=new w(n,o);if(0===o.snap0(u)){var M,A=r(_);try{for(A.s();!(M=A.n()).done;){var E=M.value,T=p[0]*E*E*E+p[1]*E*E+p[2]*E+p[3],S=(a[0]-T)/l;i?b.add(E,S):b.add(S,E)}}catch(t){A.e(t)}finally{A.f()}}else{var C,k=r(_);try{for(k.s();!(C=k.n()).done;){var P=C.value,O=(m[0]*P*P*P+m[1]*P*P+m[2]*P+m[3]-a[1])/u;i?b.add(P,O):b.add(O,P)}}catch(t){k.e(t)}finally{k.f()}}return b.done()}function k(t,e,n){var r=t.geo;if(r.isEqualVec2(t.p0,e.p0))return r.isEqualVec2(t.p3,e.p3)?r.isEqualVec2(t.p1,e.p1)&&r.isEqualVec2(t.p2,e.p2)?{kind:"tRangePairs",tStart:[0,0],tEnd:[1,1]}:{kind:"tValuePairs",tValuePairs:[[0,0],[1,1]]}:{kind:"tValuePairs",tValuePairs:[[0,0]]};if(r.isEqualVec2(t.p0,e.p3))return{kind:"tValuePairs",tValuePairs:[[0,1]]};if(r.isEqualVec2(t.p3,e.p0))return{kind:"tValuePairs",tValuePairs:[[1,0]]};if(r.isEqualVec2(t.p3,e.p3))return{kind:"tValuePairs",tValuePairs:[[1,1]]};var i=new w(n,r),o=function(t,e,n,a,s,u){if(v(t.boundingBox(),a.boundingBox())){var l=(e+n)/2,c=(s+u)/2;if(0!==r.snap0(n-e)||0!==r.snap0(u-s)){var f=d(t.split([.5]),2),h=f[0],p=f[1],m=d(a.split([.5]),2),g=m[0],y=m[1];o(h,e,l,g,s,c),o(p,l,n,g,s,c),o(h,e,l,y,c,u),o(p,l,n,y,c,u)}else i.add(l,c)}};return o(t,0,1,e,0,1),i.done()}function P(t,e,n){if(t instanceof A){if(e instanceof A)return S(t,e,n);if(e instanceof E)return C(t,e,n,!1)}else if(t instanceof E){if(e instanceof A)return C(e,t,n,!0);if(e instanceof E)return k(t,e,n)}throw new Error("PolyBool: Unknown segment instance in segmentsIntersect")}var O=c(function t(e){var n,r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;h(this,t),this.otherFill=null,this.id=null!==(n=null==s?void 0:s.segmentId())&&void 0!==n?n:-1,this.data=e,this.myFill={above:null!==(r=null==o?void 0:o.above)&&void 0!==r?r:null,below:null!==(i=null==o?void 0:o.below)&&void 0!==i?i:null},this.closed=a}),L=function(t){function e(){return h(this,e),i(this,e,arguments)}return s(e,t),c(e)}(O),I=function(t){function e(){return h(this,e),i(this,e,arguments)}return s(e,t),c(e)}(O);function R(t,e){if(t instanceof L)return new L(t.data,t.myFill,t.closed,e);if(t instanceof I)return new I(t.data,t.myFill,t.closed,e);throw new Error("PolyBool: Unknown SegmentBool in copySegmentBool")}var D=c(function t(e,n,r,i){h(this,t),this.status=null,this.isStart=e,this.p=n,this.seg=r,this.primary=i}),N=function(){return c(function t(){h(this,t),this.nodes=[]},[{key:"remove",value:function(t){var e=this.nodes.indexOf(t);e>=0&&this.nodes.splice(e,1)}},{key:"getIndex",value:function(t){return this.nodes.indexOf(t)}},{key:"isEmpty",value:function(){return this.nodes.length<=0}},{key:"getHead",value:function(){return this.nodes[0]}},{key:"removeHead",value:function(){this.nodes.shift()}},{key:"insertBefore",value:function(t,e){this.findTransition(t,e).insert(t)}},{key:"findTransition",value:function(t,e){for(var n,r,i=this,o=function(t,n){return e(n)-e(t)},a=0,s=this.nodes.length;a<s;){var u=a+s>>1;o(this.nodes[u],t)>0?s=u:a=u+1}return{before:a<=0?null:null!==(n=this.nodes[a-1])&&void 0!==n?n:null,after:null!==(r=this.nodes[a])&&void 0!==r?r:null,insert:function(t){return i.nodes.splice(a,0,t),t}}}}])}(),F=function(){return c(function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;h(this,t),this.events=new N,this.status=new N,this.currentPath=[],this.selfIntersection=e,this.geo=n,this.log=r},[{key:"compareEvents",value:function(t,e,n,r,i,o,a,s){var u=this.geo.compareVec2(e,o);return 0!==u?u:r instanceof A&&s instanceof A&&this.geo.isEqualVec2(n,a)?0:t!==i?t?1:-1:this.compareSegments(s,r)}},{key:"addEvent",value:function(t){var e=this;this.events.insertBefore(t,function(n){return n===t?0:e.compareEvents(t.isStart,t.p,t.other.p,t.seg.data,n.isStart,n.p,n.other.p,n.seg.data)})}},{key:"divideEvent",value:function(t,e,n){var r,i;null===(r=this.log)||void 0===r||r.segmentDivide(t.seg,n);var o=d(t.seg.data.split([e]),2),a=o[0],s=o[1];a.setEnd(n),s.setStart(n);var u=s instanceof A?new L(s,t.seg.myFill,t.seg.closed,this.log):s instanceof E?new I(s,t.seg.myFill,t.seg.closed,this.log):null;if(!u)throw new Error("PolyBool: Unknown segment data in divideEvent");return this.events.remove(t.other),t.seg.data=a,null===(i=this.log)||void 0===i||i.segmentChop(t.seg),t.other.p=n,this.addEvent(t.other),this.addSegment(u,t.primary)}},{key:"beginPath",value:function(){this.currentPath=[]}},{key:"closePath",value:function(){var t,e=r(this.currentPath);try{for(e.s();!(t=e.n()).done;){t.value.closed=!0}}catch(t){e.e(t)}finally{e.f()}}},{key:"addSegment",value:function(t,e){var n=new D(!0,t.data.start(),t,e),r=new D(!1,t.data.end(),t,e);return n.other=r,r.other=n,this.addEvent(n),this.addEvent(r),n}},{key:"addLine",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.geo.compareVec2(t,e);if(0!==r){var i=new L(new A(r<0?t:e,r<0?e:t,this.geo),null,!1,this.log);this.currentPath.push(i),this.addSegment(i,n)}}},{key:"addCurve",value:function(t,e,n,i){var o,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=new E(t,e,n,i,this.geo),u=r(s.split(s.inflectionTValues()));try{for(u.s();!(o=u.n()).done;){var l=o.value,c=this.geo.compareVec2(l.start(),l.end());if(0!==c){var f=l.toLine();if(f)this.addLine(f.p0,f.p1,a);else{var h=new I(c<0?l:l.reverse(),null,!1,this.log);this.currentPath.push(h),this.addSegment(h,a)}}}}catch(t){u.e(t)}finally{u.f()}}},{key:"compareSegments",value:function(t,e){var n=t.start(),i=e.start2(),o=e.start();if(e.pointOn(n)){if(n=t.start2(),e.pointOn(n)){if(t instanceof A){if(e instanceof A)return 0;e instanceof E&&(n=t.point(.5))}t instanceof E&&(n=t.end())}if(e instanceof E&&0===this.geo.snap0(n[0]-o[0])&&0===this.geo.snap0(i[0]-o[0]))return Math.sign(o[1]-n[1])}else{if(e instanceof E){var a=e.mapXtoY(n[0],!0);if(!1!==a)return Math.sign(a-n[1])}if(t instanceof E){var s=P(t,e,!0);if(s&&"tValuePairs"===s.kind){var u,l=r(s.tValuePairs);try{for(l.s();!(u=l.n()).done;){var c=u.value,f=this.geo.snap01(c[0]);if(f>0&&f<1){i=t.point(f);break}}}catch(t){l.e(t)}finally{l.f()}}}}var h=d(n,2),p=h[0],m=h[1],g=d(i,2),y=g[0],v=g[1],x=d(o,2),_=x[0],b=x[1];return Math.sign((y-p)*(b-m)-(v-m)*(_-p))}},{key:"statusFindSurrounding",value:function(t){var e=this;return this.status.findTransition(t,function(n){if(t===n)return 0;var r=e.compareSegments(t.seg.data,n.seg.data);return 0===r?-1:r})}},{key:"checkIntersection",value:function(t,e){var n,r=t.seg,i=e.seg;null===(n=this.log)||void 0===n||n.checkIntersection(r,i);var o=P(r.data,i.data,!1);if(null===o)return null;if("tRangePairs"===o.kind){var a=d(o.tStart,2),s=a[0],u=a[1],l=d(o.tEnd,2),c=l[0],f=l[1];if(1===s&&1===c&&0===u&&0===f||0===s&&0===c&&1===u&&1===f)return null;if(0===s&&1===c&&0===u&&1===f)return e;var h=r.data.start(),p=r.data.end(),m=i.data.end();return 0===s&&0===u?(1===c?this.divideEvent(e,f,p):this.divideEvent(t,c,m),e):(u>0&&u<1&&(1===c&&1===f||(1===c?this.divideEvent(e,f,p):this.divideEvent(t,c,m)),this.divideEvent(e,u,h)),null)}if("tValuePairs"===o.kind){if(o.tValuePairs.length<=0)return null;for(var g=o.tValuePairs[0],y=1;y<o.tValuePairs.length&&(0===g[0]&&0===g[1]||0===g[0]&&1===g[1]||1===g[0]&&0===g[1]||1===g[0]&&1===g[1]);y++)g=o.tValuePairs[y];var v=d(g,2),x=v[0],_=v[1],b=0===_?i.data.start():1===_?i.data.end():0===x?r.data.start():1===x?r.data.end():r.data.point(x);return x>0&&x<1&&this.divideEvent(t,x,b),_>0&&_<1&&this.divideEvent(e,_,b),null}throw new Error("PolyBool: Unknown intersection type")}},{key:"calculate",value:function(){for(var t,e,n,r,i,o,a,s,u=this,l=[],c=function(){var s=u.events.getHead();if(null===(t=u.log)||void 0===t||t.vert(s.p[0]),s.isStart){null===(e=u.log)||void 0===e||e.segmentNew(s.seg,s.primary);var c=u.statusFindSurrounding(s),f=c.before,h=c.after;null===(n=u.log)||void 0===n||n.tempStatus(s.seg,!!f&&f.seg,!!h&&h.seg);var d,p=function(){if(f){var t=u.checkIntersection(s,f);if(t)return t}return h?u.checkIntersection(s,h):null}();if(p){if(u.selfIntersection)(null===s.seg.myFill.below?s.seg.closed:s.seg.myFill.above!==s.seg.myFill.below)&&(p.seg.myFill.above=!p.seg.myFill.above);else p.seg.otherFill=s.seg.myFill;null===(r=u.log)||void 0===r||r.segmentUpdate(p.seg),u.events.remove(s.other),u.events.remove(s)}if(u.events.getHead()!==s)return null===(i=u.log)||void 0===i||i.rewind(s.seg),1;if(u.selfIntersection)d=null===s.seg.myFill.below?s.seg.closed:s.seg.myFill.above!==s.seg.myFill.below,s.seg.myFill.below=!!h&&h.seg.myFill.above,s.seg.myFill.above=d?!s.seg.myFill.below:s.seg.myFill.below;else if(null===s.seg.otherFill){var m;if(h)if(s.primary===h.primary){if(null===h.seg.otherFill)throw new Error("PolyBool: Unexpected state of otherFill (null)");m=h.seg.otherFill.above}else m=h.seg.myFill.above;else m=!1;s.seg.otherFill={above:m,below:m}}null===(o=u.log)||void 0===o||o.status(s.seg,!!f&&f.seg,!!h&&h.seg),s.other.status=c.insert(s)}else{var g=s.status;if(null===g)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");var y=u.status.getIndex(g);if(y>0&&y<u.status.nodes.length-1){var v=u.status.nodes[y-1],x=u.status.nodes[y+1];u.checkIntersection(v,x)}if(null===(a=u.log)||void 0===a||a.statusRemove(g.seg),u.status.remove(g),!s.primary){if(!s.seg.otherFill)throw new Error("PolyBool: Unexpected state of otherFill (null)");var _=s.seg.myFill;s.seg.myFill=s.seg.otherFill,s.seg.otherFill=_}l.push(s.seg)}u.events.removeHead()};!this.events.isEmpty();)c();return null===(s=this.log)||void 0===s||s.done(),l}}])}();function j(t,e,n){var i,o=[],a=r(t);try{for(a.s();!(i=a.n()).done;){var s=i.value,u=e[(s.myFill.above?8:0)+(s.myFill.below?4:0)+(s.otherFill&&s.otherFill.above?2:0)+(s.otherFill&&s.otherFill.below?1:0)],l=!!(1&u),c=!!(2&u);if(!s.closed&&0!==u||s.closed&&l!==c){var f={above:l,below:c};if(s instanceof L)o.push(new L(s.data,f,s.closed,n));else{if(!(s instanceof I))throw new Error("PolyBool: Unknown SegmentBool type in SegmentSelector");o.push(new I(s.data,f,s.closed,n))}}}}catch(t){a.e(t)}finally{a.f()}return null==n||n.selected(o),o}var z=function(){return c(function t(){h(this,t)},null,[{key:"union",value:function(t,e){return j(t,[4,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],e)}},{key:"intersect",value:function(t,e){return j(t,[0,0,0,4,0,2,0,2,0,0,1,1,4,2,1,0],e)}},{key:"difference",value:function(t,e){return j(t,[4,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],e)}},{key:"differenceRev",value:function(t,e){return j(t,[4,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],e)}},{key:"xor",value:function(t,e){return j(t,[4,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],e)}}])}();function G(t,e,n){return!!n.isCollinear(t.p0,t.p1,e.p1)&&new A(t.p0,e.p1,n)}function B(t,e,n){if(n.isCollinear(t.p2,t.p3,e.p1)){var r=e.p1[0]-t.p2[0],i=e.p1[1]-t.p2[1],o=Math.abs(r)>Math.abs(i)?(t.p3[0]-t.p2[0])/r:(t.p3[1]-t.p2[1])/i,a=n.snap01(o);if(0!==a&&1!==a){var s=new E(t.p0,[t.p0[0]+(t.p1[0]-t.p0[0])/o,t.p0[1]+(t.p1[1]-t.p0[1])/o],[e.p2[0]-o*(e.p3[0]-e.p2[0])/(1-o),e.p2[1]-o*(e.p3[1]-e.p2[1])/(1-o)],e.p3,n),u=d(s.split([o]),2),l=u[0],c=u[1];if(l.isEqual(t)&&c.isEqual(e))return s}}return!1}function V(t,e,n){return t!==e&&(t instanceof A&&e instanceof A?G(t,e,n):t instanceof E&&e instanceof E&&B(t,e,n))}function q(t,e,n){var i,o=[],a=[],s=[],u=r(t);try{var l=function(){var t=i.value,u=t.data,l=t.closed,c=l?o:a,f=u.start(),h=u.end(),d=function(t){null==n||n.chainReverse(t,l);var e,i=[],o=r(c[t].segs);try{for(o.s();!(e=o.n()).done;){var a=e.value;i.unshift(a.reverse())}}catch(t){o.e(t)}finally{o.f()}return c[t]={segs:i,fill:!c[t].fill},i};if(u instanceof A&&e.isEqualVec2(f,h))return console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large"),1;null==n||n.chainStart({seg:u,fill:!!t.myFill.above},l);var p={index:0,matchesHead:!1,matchesPt1:!1},m={index:0,matchesHead:!1,matchesPt1:!1},g=p;function y(t,e,n){return g&&(g.index=t,g.matchesHead=e,g.matchesPt1=n),g===p?(g=m,!1):(g=null,!0)}for(var v=0;v<c.length;v++){var x=c[v].segs,_=x[0].start(),b=x[x.length-1].end();if(e.isEqualVec2(_,f)){if(y(v,!0,!0))break}else if(e.isEqualVec2(_,h)){if(y(v,!0,!1))break}else if(e.isEqualVec2(b,f)){if(y(v,!1,!0))break}else if(e.isEqualVec2(b,h)&&y(v,!1,!1))break}if(g===p){var w=!!t.myFill.above;c.push({segs:[u],fill:w}),null==n||n.chainNew({seg:u,fill:w},l)}else if(g===m){var M=p.index;null==n||n.chainMatch(M,l);var E=c[M],T=E.segs,S=E.fill;if(p.matchesHead?p.matchesPt1?(u=u.reverse(),null==n||n.chainAddHead(M,{seg:u,fill:S},l),T.unshift(u)):(null==n||n.chainAddHead(M,{seg:u,fill:S},l),T.unshift(u)):p.matchesPt1?(null==n||n.chainAddTail(M,{seg:u,fill:S},l),T.push(u)):(u=u.reverse(),null==n||n.chainAddTail(M,{seg:u,fill:S},l),T.push(u)),p.matchesHead){var C=T[1],k=V(u,C,e);k&&(T.shift(),T[0]=k,null==n||n.chainSimplifyHead(M,{seg:k,fill:S},l))}else{var P=V(T[T.length-2],u,e);P&&(T.pop(),T[T.length-1]=P,null==n||n.chainSimplifyTail(M,{seg:P,fill:S},l))}if(l){var O=T,L=O[0],I=O[O.length-1];if(O.length>0&&e.isEqualVec2(L.start(),I.end())){var R,D=0,N=O[0].start(),F=r(O);try{for(F.s();!(R=F.n()).done;){var j=R.value.end();D+=j[1]*N[0]-j[0]*N[1],N=j}}catch(t){F.e(t)}finally{F.f()}D<0===S&&(L=(O=d(M))[0],I=O[O.length-1]);var z=V(I,L,e);z&&(O.pop(),O[0]=z,null==n||n.chainSimplifyClose(M,{seg:z,fill:S},l)),null==n||n.chainClose(M,l),c.splice(M,1),s.push(O)}}}else{var G=function(t,r){var i=c[t],o=i.segs,a=i.fill,s=c[r].segs;null==n||n.chainAddTail(t,{seg:u,fill:a},l),o.push(u);var f=V(o[o.length-2],u,e);f&&(o.pop(),o[o.length-1]=f,null==n||n.chainSimplifyTail(t,{seg:f,fill:a},l));var h=V(o[o.length-1],s[0],e);h&&(s.shift(),o[o.length-1]=h,null==n||n.chainSimplifyJoin(t,r,{seg:h,fill:a},l)),null==n||n.chainJoin(t,r,l),c[t].segs=o.concat(s),c.splice(r,1)},B=p.index,q=m.index;null==n||n.chainConnect(B,q,l);var U=c[B].segs.length<c[q].segs.length;p.matchesHead?m.matchesHead?U?(p.matchesPt1||(u=u.reverse()),d(B),G(B,q)):(p.matchesPt1&&(u=u.reverse()),d(q),G(q,B)):(p.matchesPt1&&(u=u.reverse()),G(q,B)):m.matchesHead?(p.matchesPt1||(u=u.reverse()),G(B,q)):U?(p.matchesPt1&&(u=u.reverse()),d(B),G(q,B)):(p.matchesPt1||(u=u.reverse()),d(q),G(B,q))}};for(u.s();!(i=u.n()).done;)l()}catch(t){u.e(t)}finally{u.f()}for(var c=0,f=a;c<f.length;c++){var h=f[c].segs;s.push(h)}return s}function U(t,e,n,i){var o=d(i,6),a=o[0],s=o[1],u=o[2],l=o[3],c=o[4],f=o[5];n.beginPath();var h,p=r(t);try{for(p.s();!(h=p.n()).done;){var m=h.value;if(!(m.length<=0)){for(var g=0;g<m.length;g++){var y=m[g];if(0===g){var v=d(y.start(),2),x=v[0],_=v[1];n.moveTo(a*x+u*_+c,s*x+l*_+f)}if(y instanceof A){var b=d(y.p1,2),w=b[0],M=b[1];n.lineTo(a*w+u*M+c,s*w+l*M+f)}else{if(!(y instanceof E))throw new Error("PolyBool: Unknown segment instance");var T=d(y.p1,2),S=T[0],C=T[1],k=d(y.p2,2),P=k[0],O=k[1],L=d(y.p3,2),I=L[0],R=L[1];n.bezierCurveTo(a*S+u*C+c,s*S+l*C+f,a*P+u*O+c,s*P+l*O+f,a*I+u*R+c,s*I+l*R+f)}}var D=m[0],N=m[m.length-1];e.isEqualVec2(D.start(),N.end())&&n.closePath()}}}catch(t){p.e(t)}finally{p.f()}return n}var H=function(){return c(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;h(this,t),this.pathState={kind:"beginPath"},this.saveStack=[],this.matrix=[1,0,0,1,0,0],this.geo=e,this.log=r,this.resultState=n?{state:"seg",segments:n}:{state:"new",selfIntersect:new F(!0,this.geo,this.log)}},[{key:"setTransform",value:function(t,e,n,r,i,o){if("new"!==this.resultState.state)throw new Error("PolyBool: Cannot change shape after using it in an operation");return this.matrix=[t,e,n,r,i,o],this}},{key:"resetTransform",value:function(){return this.matrix=[1,0,0,1,0,0],this}},{key:"getTransform",value:function(){if("new"!==this.resultState.state)throw new Error("PolyBool: Cannot change shape after using it in an operation");var t=d(this.matrix,6);return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}},{key:"transform",value:function(t,e,n,r,i,o){var a=d(this.matrix,6),s=a[0],u=a[1],l=a[2],c=a[3],f=a[4],h=a[5];return this.matrix=[s*t+l*e,u*t+c*e,s*n+l*r,u*n+c*r,s*i+l*o+f,u*i+c*o+h],this}},{key:"rotate",value:function(t){var e=Math.cos(t),n=Math.sin(t),r=d(this.matrix,6),i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],l=r[5];return this.matrix=[i*e+a*n,o*e+s*n,a*e-i*n,s*e-o*n,u,l],this}},{key:"rotateDeg",value:function(t){var e=(t%360+360)%360;if(0===e)return this;var n=0,r=0;if(90===e)r=1;else if(180===e)n=-1;else if(270===e)r=-1;else if(45===e)n=r=Math.SQRT1_2;else if(135===e)r=Math.SQRT1_2,n=-Math.SQRT1_2;else if(225===e)n=r=-Math.SQRT1_2;else if(315===e)n=Math.SQRT1_2,r=-Math.SQRT1_2;else if(30===e)n=Math.sqrt(3)/2,r=.5;else if(60===e)n=.5,r=Math.sqrt(3)/2;else if(120===e)n=-.5,r=Math.sqrt(3)/2;else if(150===e)n=-Math.sqrt(3)/2,r=.5;else if(210===e)n=-Math.sqrt(3)/2,r=-.5;else if(240===e)n=-.5,r=-Math.sqrt(3)/2;else if(300===e)n=.5,r=-Math.sqrt(3)/2;else if(330===e)n=Math.sqrt(3)/2,r=-.5;else{var i=Math.PI*e/180;n=Math.cos(i),r=Math.sin(i)}var o=d(this.matrix,6),a=o[0],s=o[1],u=o[2],l=o[3],c=o[4],f=o[5];return this.matrix=[a*n+u*r,s*n+l*r,u*n-a*r,l*n-s*r,c,f],this}},{key:"scale",value:function(t,e){var n=d(this.matrix,6),r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5];return this.matrix=[r*t,i*t,o*e,a*e,s,u],this}},{key:"translate",value:function(t,e){var n=d(this.matrix,6),r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5];return this.matrix=[r,i,o,a,r*t+o*e+s,i*t+a*e+u],this}},{key:"save",value:function(){if("new"!==this.resultState.state)throw new Error("PolyBool: Cannot change shape after using it in an operation");return this.saveStack.push({matrix:this.matrix}),this}},{key:"restore",value:function(){if("new"!==this.resultState.state)throw new Error("PolyBool: Cannot change shape after using it in an operation");var t=this.saveStack.pop();return t&&(this.matrix=t.matrix),this}},{key:"transformPoint",value:function(t,e){var n=d(this.matrix,6),r=n[0],i=n[1],o=n[2],a=n[3];return[r*t+o*e+n[4],i*t+a*e+n[5]]}},{key:"beginPath",value:function(){if("new"!==this.resultState.state)throw new Error("PolyBool: Cannot change shape after using it in an operation");return this.resultState.selfIntersect.beginPath(),this.endPath()}},{key:"moveTo",value:function(t,e){if("new"!==this.resultState.state)throw new Error("PolyBool: Cannot change shape after using it in an operation");"beginPath"!==this.pathState.kind&&this.beginPath();var n=this.transformPoint(t,e);return this.pathState={kind:"moveTo",start:n,current:n},this}},{key:"lineTo",value:function(t,e){if("new"!==this.resultState.state)throw new Error("PolyBool: Cannot change shape after using it in an operation");if("moveTo"!==this.pathState.kind)throw new Error("PolyBool: Must call moveTo prior to calling lineTo");var n=this.transformPoint(t,e);return this.resultState.selfIntersect.addLine(this.pathState.current,n),this.pathState.current=n,this}},{key:"rect",value:function(t,e,n,r){return this.moveTo(t,e).lineTo(t+n,e).lineTo(t+n,e+r).lineTo(t,e+r).closePath().moveTo(t,e)}},{key:"bezierCurveTo",value:function(t,e,n,r,i,o){if("new"!==this.resultState.state)throw new Error("PolyBool: Cannot change shape after using it in an operation");if("moveTo"!==this.pathState.kind)throw new Error("PolyBool: Must call moveTo prior to calling bezierCurveTo");var a=this.transformPoint(i,o);return this.resultState.selfIntersect.addCurve(this.pathState.current,this.transformPoint(t,e),this.transformPoint(n,r),a),this.pathState.current=a,this}},{key:"closePath",value:function(){if("new"!==this.resultState.state)throw new Error("PolyBool: Cannot change shape after using it in an operation");return"moveTo"!==this.pathState.kind||this.geo.isEqualVec2(this.pathState.start,this.pathState.current)||(this.resultState.selfIntersect.addLine(this.pathState.current,this.pathState.start),this.pathState.current=this.pathState.start),this.resultState.selfIntersect.closePath(),this.endPath()}},{key:"endPath",value:function(){if("new"!==this.resultState.state)throw new Error("PolyBool: Cannot change shape after using it in an operation");return this.pathState={kind:"beginPath"},this}},{key:"selfIntersect",value:function(){return"new"===this.resultState.state&&(this.resultState={state:"seg",segments:this.resultState.selfIntersect.calculate()}),this.resultState.segments}},{key:"segments",value:function(){if("reg"!==this.resultState.state){var t=this.selfIntersect();this.resultState={state:"reg",segments:t,regions:q(t,this.geo,this.log)}}return this.resultState.regions}},{key:"output",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,0,0,1,0,0];return U(this.segments(),this.geo,t,e)}},{key:"combine",value:function(t){var e,n=new F(!1,this.geo,this.log),i=r(this.selfIntersect());try{for(i.s();!(e=i.n()).done;){var o=e.value;n.addSegment(R(o,this.log),!0)}}catch(t){i.e(t)}finally{i.f()}var a,s=r(t.selfIntersect());try{for(s.s();!(a=s.n()).done;){var u=a.value;n.addSegment(R(u,this.log),!1)}}catch(t){s.e(t)}finally{s.f()}return new W(n.calculate(),this.geo,this.log)}}])}(),W=function(){return c(function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;h(this,t),this.geo=n,this.segments=e,this.log=r},[{key:"union",value:function(){return new H(this.geo,z.union(this.segments,this.log),this.log)}},{key:"intersect",value:function(){return new H(this.geo,z.intersect(this.segments,this.log),this.log)}},{key:"difference",value:function(){return new H(this.geo,z.difference(this.segments,this.log),this.log)}},{key:"differenceRev",value:function(){return new H(this.geo,z.differenceRev(this.segments,this.log),this.log)}},{key:"xor",value:function(){return new H(this.geo,z.xor(this.segments,this.log),this.log)}}])}(),X=function(){return c(function t(){h(this,t),this.list=[],this.nextSegmentId=0,this.curVert=NaN},[{key:"push",value:function(t,e){this.list.push({type:t,data:JSON.parse(JSON.stringify(e))})}},{key:"info",value:function(t,e){this.push("info",{msg:t,data:e})}},{key:"segmentId",value:function(){return this.nextSegmentId++}},{key:"checkIntersection",value:function(t,e){this.push("check",{seg1:t,seg2:e})}},{key:"segmentDivide",value:function(t,e){this.push("div_seg",{seg:t,p:e})}},{key:"segmentChop",value:function(t){this.push("chop",{seg:t})}},{key:"statusRemove",value:function(t){this.push("pop_seg",{seg:t})}},{key:"segmentUpdate",value:function(t){this.push("seg_update",{seg:t})}},{key:"segmentNew",value:function(t,e){this.push("new_seg",{seg:t,primary:e})}},{key:"tempStatus",value:function(t,e,n){this.push("temp_status",{seg:t,above:e,below:n})}},{key:"rewind",value:function(t){this.push("rewind",{seg:t})}},{key:"status",value:function(t,e,n){this.push("status",{seg:t,above:e,below:n})}},{key:"vert",value:function(t){t!==this.curVert&&(this.push("vert",{x:t}),this.curVert=t)}},{key:"selected",value:function(t){this.push("selected",{segs:t})}},{key:"chainStart",value:function(t,e){this.push("chain_start",{sf:t,closed:e})}},{key:"chainNew",value:function(t,e){this.push("chain_new",{sf:t,closed:e})}},{key:"chainMatch",value:function(t,e){this.push("chain_match",{index:t,closed:e})}},{key:"chainClose",value:function(t,e){this.push("chain_close",{index:t,closed:e})}},{key:"chainAddHead",value:function(t,e,n){this.push("chain_add_head",{index:t,sf:e,closed:n})}},{key:"chainAddTail",value:function(t,e,n){this.push("chain_add_tail",{index:t,sf:e,closed:n})}},{key:"chainSimplifyHead",value:function(t,e,n){this.push("chain_simp_head",{index:t,sf:e,closed:n})}},{key:"chainSimplifyTail",value:function(t,e,n){this.push("chain_simp_tail",{index:t,sf:e,closed:n})}},{key:"chainSimplifyClose",value:function(t,e,n){this.push("chain_simp_close",{index:t,sf:e,closed:n})}},{key:"chainSimplifyJoin",value:function(t,e,n,r){this.push("chain_simp_join",{index1:t,index2:e,sf:n,closed:r})}},{key:"chainConnect",value:function(t,e,n){this.push("chain_con",{index1:t,index2:e,closed:n})}},{key:"chainReverse",value:function(t,e){this.push("chain_rev",{index:t,closed:e})}},{key:"chainJoin",value:function(t,e,n){this.push("chain_join",{index1:t,index2:e,closed:n})}},{key:"done",value:function(){this.push("done",null)}}])}(),K=function(){return c(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;h(this,t),this.geo=e,this.log=n},[{key:"shape",value:function(){return new H(this.geo,null,this.log)}},{key:"buildLog",value:function(t){var e;return this.log=t?new X:null,null===(e=this.log)||void 0===e?void 0:e.list}},{key:"segments",value:function(t){var e=this.shape();e.beginPath();var n,i=r(t.regions);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=o[o.length-1];e.moveTo(a[a.length-2],a[a.length-1]);var s,u=r(o);try{for(u.s();!(s=u.n()).done;){var l=s.value;if(2===l.length)e.lineTo(l[0],l[1]);else{if(6!==l.length)throw new Error("PolyBool: Invalid point in region");e.bezierCurveTo(l[0],l[1],l[2],l[3],l[4],l[5])}}}catch(t){u.e(t)}finally{u.f()}e.closePath()}}catch(t){i.e(t)}finally{i.f()}return{shape:e,inverted:t.inverted}}},{key:"combine",value:function(t,e){return{shape:t.shape.combine(e.shape),inverted1:t.inverted,inverted2:e.inverted}}},{key:"selectUnion",value:function(t){return{shape:t.inverted1?t.inverted2?t.shape.intersect():t.shape.difference():t.inverted2?t.shape.differenceRev():t.shape.union(),inverted:t.inverted1||t.inverted2}}},{key:"selectIntersect",value:function(t){return{shape:t.inverted1?t.inverted2?t.shape.union():t.shape.differenceRev():t.inverted2?t.shape.difference():t.shape.intersect(),inverted:t.inverted1&&t.inverted2}}},{key:"selectDifference",value:function(t){return{shape:t.inverted1?t.inverted2?t.shape.differenceRev():t.shape.union():t.inverted2?t.shape.intersect():t.shape.difference(),inverted:t.inverted1&&!t.inverted2}}},{key:"selectDifferenceRev",value:function(t){return{shape:t.inverted1?t.inverted2?t.shape.difference():t.shape.intersect():t.inverted2?t.shape.union():t.shape.differenceRev(),inverted:!t.inverted1&&t.inverted2}}},{key:"selectXor",value:function(t){return{shape:t.shape.xor(),inverted:t.inverted1!==t.inverted2}}},{key:"polygon",value:function(t){var e=[],n={beginPath:function(){},moveTo:function(){e.push([])},lineTo:function(t,n){e[e.length-1].push([t,n])},bezierCurveTo:function(t,n,r,i,o,a){e[e.length-1].push([t,n,r,i,o,a])},closePath:function(){}};return t.shape.output(n),{regions:e,inverted:t.inverted}}},{key:"union",value:function(t,e){var n=this.segments(t),r=this.segments(e),i=this.combine(n,r),o=this.selectUnion(i);return this.polygon(o)}},{key:"intersect",value:function(t,e){var n=this.segments(t),r=this.segments(e),i=this.combine(n,r),o=this.selectIntersect(i);return this.polygon(o)}},{key:"difference",value:function(t,e){var n=this.segments(t),r=this.segments(e),i=this.combine(n,r),o=this.selectDifference(i);return this.polygon(o)}},{key:"differenceRev",value:function(t,e){var n=this.segments(t),r=this.segments(e),i=this.combine(n,r),o=this.selectDifferenceRev(i);return this.polygon(o)}},{key:"xor",value:function(t,e){var n=this.segments(t),r=this.segments(e),i=this.combine(n,r),o=this.selectXor(i);return this.polygon(o)}}])}(),Q=new K;e.EventBool=D,e.Geometry=x,e.GeometryEpsilon=_,e.Intersecter=F,e.ListBool=N,e.PolyBool=K,e.SegmentBase=M,e.SegmentBoolBase=O,e.SegmentBoolCurve=I,e.SegmentBoolLine=L,e.SegmentChainer=q,e.SegmentCurve=E,e.SegmentLine=A,e.SegmentSelector=z,e.SegmentTValuePairsBuilder=w,e.SegmentTValuesBuilder=b,e.Shape=H,e.ShapeCombined=W,e.boundingBoxesIntersect=v,e.copySegmentBool=R,e.default=Q,e.joinCurves=B,e.joinLines=G,e.joinSegments=V,e.lerp=g,e.lerpVec2=y,e.projectPointOntoSegmentLine=T,e.segmentCurveIntersectSegmentCurve=k,e.segmentLineIntersectSegmentCurve=C,e.segmentLineIntersectSegmentLine=S,e.segmentsIntersect=P,e.segmentsToReceiver=U},3087:function(t,e,n){"use strict";n.r(e);var r={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};for(var i in r)Object.freeze(r[i]);e.default=Object.freeze(r)},9747:function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){var n,r,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,s=e&&e.length,l=s?e[0]*o:t.length,c=a(t,0,l,o,!0),f=[];if(!c||c.next===c.prev)return f;if(s&&(c=function(t,e,n,r){for(var i=[],o=0,s=e.length;o<s;o++){var u=a(t,e[o]*r,o<s-1?e[o+1]*r:t.length,r,!1);u===u.next&&(u.steiner=!0),i.push(y(u))}i.sort(d);for(var l=0;l<i.length;l++)n=p(i[l],n);return n}(t,e,c,o)),t.length>80*o){for(var h=n=t[0],m=r=t[1],g=o;g<l;g+=o){var v=t[g],x=t[g+1];v<n&&(n=v),x<r&&(r=x),v>h&&(h=v),x>m&&(m=x)}i=0!==(i=Math.max(h-n,m-r))?32767/i:0}return u(c,f,o,n,r,i,0),f}function a(t,e,n,r,i){var o;if(i===L(t,e,n,r)>0)for(var a=e;a<n;a+=r)o=C(a/r|0,t[a],t[a+1],o);else for(var s=n-r;s>=e;s-=r)o=C(s/r|0,t[s],t[s+1],o);return o&&w(o,o.next)&&(k(o),o=o.next),o}function s(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!w(r,r.next)&&0!==b(r.prev,r,r.next))r=r.next;else{if(k(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function u(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{0===i.z&&(i.z=g(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n=1;do{var r=t,i=void 0;t=null;var o=null;for(e=0;r;){e++;for(var a=r,s=0,u=0;u<n&&(s++,a=a.nextZ);u++);for(var l=n;s>0||l>0&&a;)0!==s&&(0===l||!a||r.z<=a.z)?(i=r,r=r.nextZ,s--):(i=a,a=a.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=a}o.nextZ=null,n*=2}while(e>1)}(i)}(t,r,i,o);for(var d=t;t.prev!==t.next;){var p=t.prev,m=t.next;if(o?c(t,r,i,o):l(t))e.push(p.i,t.i,m.i),k(t),t=m.next,d=m.next;else if((t=m)===d){a?1===a?u(t=f(s(t),e),e,n,r,i,o,2):2===a&&h(t,e,n,r,i,o):u(s(t),e,n,r,i,o,1);break}}}}function l(t){var e=t.prev,n=t,r=t.next;if(b(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,a=r.x,s=e.y,u=n.y,l=r.y,c=Math.min(i,o,a),f=Math.min(s,u,l),h=Math.max(i,o,a),d=Math.max(s,u,l),p=r.next;p!==e;){if(p.x>=c&&p.x<=h&&p.y>=f&&p.y<=d&&x(i,s,o,u,a,l,p.x,p.y)&&b(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function c(t,e,n,r){var i=t.prev,o=t,a=t.next;if(b(i,o,a)>=0)return!1;for(var s=i.x,u=o.x,l=a.x,c=i.y,f=o.y,h=a.y,d=Math.min(s,u,l),p=Math.min(c,f,h),m=Math.max(s,u,l),y=Math.max(c,f,h),v=g(d,p,e,n,r),_=g(m,y,e,n,r),w=t.prevZ,M=t.nextZ;w&&w.z>=v&&M&&M.z<=_;){if(w.x>=d&&w.x<=m&&w.y>=p&&w.y<=y&&w!==i&&w!==a&&x(s,c,u,f,l,h,w.x,w.y)&&b(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,M.x>=d&&M.x<=m&&M.y>=p&&M.y<=y&&M!==i&&M!==a&&x(s,c,u,f,l,h,M.x,M.y)&&b(M.prev,M,M.next)>=0)return!1;M=M.nextZ}for(;w&&w.z>=v;){if(w.x>=d&&w.x<=m&&w.y>=p&&w.y<=y&&w!==i&&w!==a&&x(s,c,u,f,l,h,w.x,w.y)&&b(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;M&&M.z<=_;){if(M.x>=d&&M.x<=m&&M.y>=p&&M.y<=y&&M!==i&&M!==a&&x(s,c,u,f,l,h,M.x,M.y)&&b(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function f(t,e){var n=t;do{var r=n.prev,i=n.next.next;!w(r,i)&&M(r,n,n.next,i)&&T(r,i)&&T(i,r)&&(e.push(r.i,n.i,i.i),k(n),k(n.next),n=t=i),n=n.next}while(n!==t);return s(n)}function h(t,e,n,r,i,o){var a=t;do{for(var l=a.next.next;l!==a.prev;){if(a.i!==l.i&&_(a,l)){var c=S(a,l);return a=s(a,a.next),c=s(c,c.next),u(a,e,n,r,i,o,0),void u(c,e,n,r,i,o,0)}l=l.next}a=a.next}while(a!==t)}function d(t,e){var n=t.x-e.x;0===n&&(0===(n=t.y-e.y)&&(n=(t.next.y-t.y)/(t.next.x-t.x)-(e.next.y-e.y)/(e.next.x-e.x)));return n}function p(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;if(w(t,r))return r;do{if(w(t,r.next))return r.next;if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==e);if(!n)return null;var u=n,l=n.x,c=n.y,f=1/0;r=n;do{if(i>=r.x&&r.x>=l&&i!==r.x&&v(o<c?i:a,o,l,c,o<c?a:i,o,r.x,r.y)){var h=Math.abs(o-r.y)/(i-r.x);T(r,t)&&(h<f||h===f&&(r.x>n.x||r.x===n.x&&m(n,r)))&&(n=r,f=h)}r=r.next}while(r!==u);return n}(t,e);if(!n)return e;var r=S(n,t);return s(r,r.next),s(n,n.next)}function m(t,e){return b(t.prev,t,e.prev)<0&&b(e.next,t,t.next)<0}function g(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function y(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function v(t,e,n,r,i,o,a,s){return(i-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(r-s)>=(n-a)*(e-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function x(t,e,n,r,i,o,a,s){return!(t===a&&e===s)&&v(t,e,n,r,i,o,a,s)}function _(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&M(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(b(t.prev,t,e.prev)||b(t,e.prev,e))||w(t,e)&&b(t.prev,t,t.next)>0&&b(e.prev,e,e.next)>0)}function b(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function w(t,e){return t.x===e.x&&t.y===e.y}function M(t,e,n,r){var i=E(b(t,e,n)),o=E(b(t,e,r)),a=E(b(n,r,t)),s=E(b(n,r,e));return i!==o&&a!==s||(!(0!==i||!A(t,n,e))||(!(0!==o||!A(t,r,e))||(!(0!==a||!A(n,t,r))||!(0!==s||!A(n,e,r)))))}function A(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function E(t){return t>0?1:t<0?-1:0}function T(t,e){return b(t.prev,t,t.next)<0?b(t,e,t.next)>=0&&b(t,t.prev,e)>=0:b(t,e,t.prev)<0||b(t,t.next,e)<0}function S(t,e){var n=P(t.i,t.x,t.y),r=P(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function C(t,e,n,r){var i=P(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function k(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function O(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(L(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*n,c=s<u-1?e[s+1]*n:t.length;a-=Math.abs(L(t,l,c,n))}for(var f=0,h=0;h<r.length;h+=3){var d=r[h]*n,p=r[h+1]*n,m=r[h+2]*n;f+=Math.abs((t[d]-t[m])*(t[p+1]-t[d+1])-(t[d]-t[p])*(t[m+1]-t[d+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)}function L(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function I(t){var e,n=[],i=[],o=t[0][0].length,a=0,s=0,u=r(t);try{for(u.s();!(e=u.n()).done;){var l,c=e.value,f=r(c);try{for(f.s();!(l=f.n()).done;)for(var h=l.value,d=0;d<o;d++)n.push(h[d])}catch(t){f.e(t)}finally{f.f()}s&&(a+=s,i.push(a)),s=c.length}}catch(t){u.e(t)}finally{u.f()}return{vertices:n,holes:i,dimensions:o}}n.r(e),n.d(e,{default:function(){return o},deviation:function(){return O},flatten:function(){return I}})},4279:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}n.r(e),n.d(e,{default:function(){return l}});var u=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,i=arguments.length>3?arguments[3]:void 0;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var o=u.indexOf(this.ArrayType),a=2*e*this.ArrayType.BYTES_PER_ELEMENT,s=e*this.IndexArrayType.BYTES_PER_ELEMENT,l=(8-s%8)%8;if(o<0)throw new Error("Unexpected typed array class: ".concat(r,"."));i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+l,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+a+s+l),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+l,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+o]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=e)}return e=t,r=[{key:"from",value:function(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var n=i(new Uint8Array(e,0,2),2),r=n[0],o=n[1];if(219!==r)throw new Error("Data does not appear to be in a KDBush format.");var a=o>>4;if(1!==a)throw new Error("Got v".concat(a," data when expected v").concat(1,"."));var s=u[15&o];if(!s)throw new Error("Unrecognized array type.");var l=i(new Uint16Array(e,2,1),1)[0];return new t(i(new Uint32Array(e,4,1),1)[0],l,s,e)}}],(n=[{key:"add",value:function(t,e){var n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=t,this.coords[this._pos++]=e,n}},{key:"finish",value:function(){var t=this._pos>>1;if(t!==this.numItems)throw new Error("Added ".concat(t," items when expected ").concat(this.numItems,"."));return c(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}},{key:"range",value:function(t,e,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var i=this.ids,o=this.coords,a=this.nodeSize,s=[0,i.length-1,0],u=[];s.length;){var l=s.pop()||0,c=s.pop()||0,f=s.pop()||0;if(c-f<=a)for(var h=f;h<=c;h++){var d=o[2*h],p=o[2*h+1];d>=t&&d<=n&&p>=e&&p<=r&&u.push(i[h])}else{var m=f+c>>1,g=o[2*m],y=o[2*m+1];g>=t&&g<=n&&y>=e&&y<=r&&u.push(i[m]),(0===l?t<=g:e<=y)&&(s.push(f),s.push(m-1),s.push(1-l)),(0===l?n>=g:r>=y)&&(s.push(m+1),s.push(c),s.push(1-l))}}return u}},{key:"within",value:function(t,e,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var r=this.ids,i=this.coords,o=this.nodeSize,a=[0,r.length-1,0],s=[],u=n*n;a.length;){var l=a.pop()||0,c=a.pop()||0,f=a.pop()||0;if(c-f<=o)for(var h=f;h<=c;h++)p(i[2*h],i[2*h+1],t,e)<=u&&s.push(r[h]);else{var d=f+c>>1,m=i[2*d],g=i[2*d+1];p(m,g,t,e)<=u&&s.push(r[d]),(0===l?t-n<=m:e-n<=g)&&(a.push(f),a.push(d-1),a.push(1-l)),(0===l?t+n>=m:e+n>=g)&&(a.push(d+1),a.push(c),a.push(1-l))}}return s}}])&&a(e.prototype,n),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}();function c(t,e,n,r,i,o){if(!(i-r<=n)){var a=r+i>>1;f(t,e,a,r,i,o),c(t,e,n,r,a-1,1-o),c(t,e,n,a+1,i,1-o)}}function f(t,e,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1);f(t,e,n,Math.max(r,Math.floor(n-s*l/a+c)),Math.min(i,Math.floor(n+(a-s)*l/a+c)),o)}var d=e[2*n+o],p=r,m=i;for(h(t,e,r,n),e[2*i+o]>d&&h(t,e,r,i);p<m;){for(h(t,e,p,m),p++,m--;e[2*p+o]<d;)p++;for(;e[2*m+o]>d;)m--}e[2*r+o]===d?h(t,e,r,m):h(t,e,++m,i),m<=n&&(r=m+1),n<=m&&(i=m-1)}}function h(t,e,n,r){d(t,n,r),d(e,2*n,2*r),d(e,2*n+1,2*r+1)}function d(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function p(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}},6082:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}n.d(e,{A:function(){return $}});var a=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"getId",value:function(t){var e=t.find(function(t){return Array.isArray(t)&&"ID"===t[0]});return e&&e.length>=3?{authority:e[1],code:parseInt(e[2],10)}:null}},{key:"convertUnit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unit";if(!t||t.length<3)return{type:e,name:"unknown",conversion_factor:null};var n=t[1],r=parseFloat(t[2])||null,i=t.find(function(t){return Array.isArray(t)&&"ID"===t[0]});return{type:e,name:n,conversion_factor:r,id:i?{authority:i[1],code:parseInt(i[2],10)}:null}}},{key:"convertAxis",value:function(t){var e,n=t[1]||"Unknown",r=n.match(/^\((.)\)$/);if(r){var i=r[1].toUpperCase();if("E"===i)e="east";else if("N"===i)e="north";else{if("U"!==i)throw new Error("Unknown axis abbreviation: ".concat(i));e="up"}}else e=t[2]?t[2].toLowerCase():"unknown";var o=t.find(function(t){return Array.isArray(t)&&"ORDER"===t[0]}),a=o?parseInt(o[1],10):null,s=t.find(function(t){return Array.isArray(t)&&("LENGTHUNIT"===t[0]||"ANGLEUNIT"===t[0]||"SCALEUNIT"===t[0])});return{name:n,direction:e,unit:this.convertUnit(s),order:a}}},{key:"extractAxes",value:function(t){var e=this;return t.filter(function(t){return Array.isArray(t)&&"AXIS"===t[0]}).map(function(t){return e.convertAxis(t)}).sort(function(t,e){return(t.order||0)-(e.order||0)})}},{key:"convert",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t[0]){case"PROJCRS":n.type="ProjectedCRS",n.name=t[1],n.base_crs=t.find(function(t){return Array.isArray(t)&&"BASEGEOGCRS"===t[0]})?this.convert(t.find(function(t){return Array.isArray(t)&&"BASEGEOGCRS"===t[0]})):null,n.conversion=t.find(function(t){return Array.isArray(t)&&"CONVERSION"===t[0]})?this.convert(t.find(function(t){return Array.isArray(t)&&"CONVERSION"===t[0]})):null;var r=t.find(function(t){return Array.isArray(t)&&"CS"===t[0]});r&&(n.coordinate_system={type:r[1],axis:this.extractAxes(t)});var i=t.find(function(t){return Array.isArray(t)&&"LENGTHUNIT"===t[0]});if(i){var o=this.convertUnit(i);n.coordinate_system.unit=o}n.id=this.getId(t);break;case"BASEGEOGCRS":case"GEOGCRS":n.type="GeographicCRS",n.name=t[1];var a=t.find(function(t){return Array.isArray(t)&&("DATUM"===t[0]||"ENSEMBLE"===t[0])});if(a){var s=this.convert(a);"ENSEMBLE"===a[0]?n.datum_ensemble=s:n.datum=s;var u=t.find(function(t){return Array.isArray(t)&&"PRIMEM"===t[0]});u&&"Greenwich"!==u[1]&&(s.prime_meridian={name:u[1],longitude:parseFloat(u[2])})}n.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(t)},n.id=this.getId(t);break;case"DATUM":n.type="GeodeticReferenceFrame",n.name=t[1],n.ellipsoid=t.find(function(t){return Array.isArray(t)&&"ELLIPSOID"===t[0]})?this.convert(t.find(function(t){return Array.isArray(t)&&"ELLIPSOID"===t[0]})):null;break;case"ENSEMBLE":n.type="DatumEnsemble",n.name=t[1],n.members=t.filter(function(t){return Array.isArray(t)&&"MEMBER"===t[0]}).map(function(t){return{type:"DatumEnsembleMember",name:t[1],id:e.getId(t)}});var l=t.find(function(t){return Array.isArray(t)&&"ENSEMBLEACCURACY"===t[0]});l&&(n.accuracy=parseFloat(l[1]));var c=t.find(function(t){return Array.isArray(t)&&"ELLIPSOID"===t[0]});c&&(n.ellipsoid=this.convert(c)),n.id=this.getId(t);break;case"ELLIPSOID":n.type="Ellipsoid",n.name=t[1],n.semi_major_axis=parseFloat(t[2]),n.inverse_flattening=parseFloat(t[3]),t.find(function(t){return Array.isArray(t)&&"LENGTHUNIT"===t[0]})&&this.convert(t.find(function(t){return Array.isArray(t)&&"LENGTHUNIT"===t[0]}),n);break;case"CONVERSION":n.type="Conversion",n.name=t[1],n.method=t.find(function(t){return Array.isArray(t)&&"METHOD"===t[0]})?this.convert(t.find(function(t){return Array.isArray(t)&&"METHOD"===t[0]})):null,n.parameters=t.filter(function(t){return Array.isArray(t)&&"PARAMETER"===t[0]}).map(function(t){return e.convert(t)});break;case"METHOD":n.type="Method",n.name=t[1],n.id=this.getId(t);break;case"PARAMETER":n.type="Parameter",n.name=t[1],n.value=parseFloat(t[2]),n.unit=this.convertUnit(t.find(function(t){return Array.isArray(t)&&("LENGTHUNIT"===t[0]||"ANGLEUNIT"===t[0]||"SCALEUNIT"===t[0])})),n.id=this.getId(t);break;case"BOUNDCRS":n.type="BoundCRS";var f=t.find(function(t){return Array.isArray(t)&&"SOURCECRS"===t[0]});if(f){var h=f.find(function(t){return Array.isArray(t)});n.source_crs=h?this.convert(h):null}var d=t.find(function(t){return Array.isArray(t)&&"TARGETCRS"===t[0]});if(d){var p=d.find(function(t){return Array.isArray(t)});n.target_crs=p?this.convert(p):null}var m=t.find(function(t){return Array.isArray(t)&&"ABRIDGEDTRANSFORMATION"===t[0]});n.transformation=m?this.convert(m):null;break;case"ABRIDGEDTRANSFORMATION":if(n.type="Transformation",n.name=t[1],n.method=t.find(function(t){return Array.isArray(t)&&"METHOD"===t[0]})?this.convert(t.find(function(t){return Array.isArray(t)&&"METHOD"===t[0]})):null,n.parameters=t.filter(function(t){return Array.isArray(t)&&("PARAMETER"===t[0]||"PARAMETERFILE"===t[0])}).map(function(t){return"PARAMETER"===t[0]?e.convert(t):"PARAMETERFILE"===t[0]?{name:t[1],value:t[2],id:{authority:"EPSG",code:8656}}:void 0}),7===n.parameters.length){var g=n.parameters[6];"Scale difference"===g.name&&(g.value=Math.round(1e12*(g.value-1))/1e6)}n.id=this.getId(t);break;case"AXIS":n.coordinate_system||(n.coordinate_system={type:"unspecified",axis:[]}),n.coordinate_system.axis.push(this.convertAxis(t));break;case"LENGTHUNIT":var y=this.convertUnit(t,"LinearUnit");n.coordinate_system&&n.coordinate_system.axis&&n.coordinate_system.axis.forEach(function(t){t.unit||(t.unit=y)}),y.conversion_factor&&1!==y.conversion_factor&&n.semi_major_axis&&(n.semi_major_axis={value:n.semi_major_axis,unit:y});break;default:n.keyword=t[0]}return n}}],(e=null)&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),s=a;function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function c(t){var e=function(t,e){if("object"!=u(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==u(e)?e:e+""}function f(t,e,n){return e=p(e),function(t,e){if(e&&("object"==u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,h()?Reflect.construct(e,n||[],p(t).constructor):e.apply(t,n))}function h(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(h=function(){return!!t})()}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},d.apply(null,arguments)}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function m(t,e){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},m(t,e)}var g=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}(e,t),n=e,i=[{key:"convert",value:function(t){var n,r,i,o,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(n=e,r="convert",i=this,a=d(p(1&(o=2)?n.prototype:n),r,i),2&o&&"function"==typeof a?function(t){return a.apply(i,t)}:a)([t,s]),s.coordinate_system&&"Cartesian"===s.coordinate_system.subtype&&delete s.coordinate_system,s.usage&&delete s.usage,s}}],(r=null)&&l(n.prototype,r),i&&l(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(s),y=g;function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_(r.key),r)}}function _(t){var e=function(t,e){if("object"!=v(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==v(e)?e:e+""}function b(t,e,n){return e=A(e),function(t,e){if(e&&("object"==v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,w()?Reflect.construct(e,n||[],A(t).constructor):e.apply(t,n))}function w(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(w=function(){return!!t})()}function M(){return M="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=A(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},M.apply(null,arguments)}function A(t){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},A(t)}function E(t,e){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},E(t,e)}var T=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e)}(e,t),n=e,i=[{key:"convert",value:function(t){var n,r,i,o,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(n=e,r="convert",i=this,a=M(A(1&(o=2)?n.prototype:n),r,i),2&o&&"function"==typeof a?function(t){return a.apply(i,t)}:a)([t,s]);var u=t.find(function(t){return Array.isArray(t)&&"CS"===t[0]});u&&(s.coordinate_system={subtype:u[1],axis:this.extractAxes(t)});var l=t.find(function(t){return Array.isArray(t)&&"USAGE"===t[0]});if(l){var c=l.find(function(t){return Array.isArray(t)&&"SCOPE"===t[0]}),f=l.find(function(t){return Array.isArray(t)&&"AREA"===t[0]}),h=l.find(function(t){return Array.isArray(t)&&"BBOX"===t[0]});s.usage={},c&&(s.usage.scope=c[1]),f&&(s.usage.area=f[1]),h&&(s.usage.bbox=h.slice(1))}return s}}],(r=null)&&x(n.prototype,r),i&&x(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(s),S=T;function C(t){var e=function(t){return t.find(function(t){return Array.isArray(t)&&"USAGE"===t[0]})?"2019":(t.find(function(t){return Array.isArray(t)&&"CS"===t[0]})||"BOUNDCRS"===t[0]||"PROJCRS"===t[0]||t[0],"2015")}(t);return("2019"===e?S:y).convert(t)}var k=function(t){var e=new N(t);return e.output()},P=1,O=/\s/,L=/[A-Za-z]/,I=/[A-Za-z84_]/,R=/[,\]]/,D=/[\d\.E\-\+]/;function N(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=P}function F(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce(function(t,e){return j(e,t),t},r);e&&(t[e]=i)}function j(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void j(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var r;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&j(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&j(t[3],e[n]));case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":return t[0]=["name",t[0]],void F(e,n,t);case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":return t[0]=["name",t[0]],F(e,n,t),void(e[n].type=n);default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return j(t,e[n]);return F(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}N.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;O.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case P:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},N.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(R.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},N.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=P)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=P,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},N.prototype.number=function(t){if(!D.test(t)){if(R.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},N.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},N.prototype.keyword=function(t){if(I.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=P)}if(!R.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},N.prototype.neutral=function(t){if(L.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(D.test(t))return this.word=t,void(this.state=3);if(!R.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},N.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var z=.017453292519943295;function G(t){return t*z}function B(t){var e=(t.projName||"").toLowerCase().replace(/_/g," ");t.long0||!t.longc||"albers conic equal area"!==e&&"lambert azimuthal equal area"!==e||(t.long0=t.longc),t.lat_ts||!t.lat1||"stereographic south pole"!==e&&"polar stereographic (variant b)"!==e?t.lat_ts||!t.lat0||"polar stereographic"!==e&&"polar stereographic (variant a)"!==e||(t.lat_ts=t.lat0,t.lat0=G(t.lat0>0?90:-90),delete t.lat1):(t.lat0=G(t.lat1>0?90:-90),t.lat_ts=t.lat1,delete t.lat1)}function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function q(t){var e={units:null,to_meter:void 0};return"string"==typeof t?(e.units=t.toLowerCase(),"metre"===e.units&&(e.units="meter"),"meter"===e.units&&(e.to_meter=1)):t&&t.name&&(e.units=t.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.to_meter=t.conversion_factor),e}function U(t){return"object"===V(t)?t.value*t.unit.conversion_factor:t}function H(t,e){t.ellipsoid.radius?(e.a=t.ellipsoid.radius,e.rf=0):(e.a=U(t.ellipsoid.semi_major_axis),void 0!==t.ellipsoid.inverse_flattening?e.rf=t.ellipsoid.inverse_flattening:void 0!==t.ellipsoid.semi_major_axis&&void 0!==t.ellipsoid.semi_minor_axis&&(e.rf=e.a/(e.a-U(t.ellipsoid.semi_minor_axis))))}function W(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t&&"object"===V(t)?"BoundCRS"===t.type?(W(t.source_crs,e),t.transformation&&(t.transformation.method&&"NTv2"===t.transformation.method.name?e.nadgrids=t.transformation.parameters[0].value:e.datum_params=t.transformation.parameters.map(function(t){return t.value})),e):(Object.keys(t).forEach(function(n){var r=t[n];if(null!==r)switch(n){case"name":if(e.srsCode)break;e.name=r,e.srsCode=r;break;case"type":"GeographicCRS"===r?e.projName="longlat":"ProjectedCRS"===r&&t.conversion&&t.conversion.method&&(e.projName=t.conversion.method.name);break;case"datum":case"datum_ensemble":r.ellipsoid&&(e.ellps=r.ellipsoid.name,H(r,e)),r.prime_meridian&&(e.from_greenwich=r.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=r.name,H(r,e);break;case"prime_meridian":e.long0=(r.longitude||0)*Math.PI/180;break;case"coordinate_system":if(r.axis)if(e.axis=r.axis.map(function(t){var e=t.direction;if("east"===e)return"e";if("north"===e)return"n";if("west"===e)return"w";if("south"===e)return"s";throw new Error("Unknown axis direction: ".concat(e))}).join("")+"u",r.unit){var i=q(r.unit),o=i.units,a=i.to_meter;e.units=o,e.to_meter=a}else if(r.axis[0]&&r.axis[0].unit){var s=q(r.axis[0].unit),u=s.units,l=s.to_meter;e.units=u,e.to_meter=l}break;case"id":r.authority&&r.code&&(e.title=r.authority+":"+r.code);break;case"conversion":r.method&&r.method.name&&(e.projName=r.method.name),r.parameters&&r.parameters.forEach(function(t){var n=t.name.toLowerCase().replace(/\s+/g,"_"),r=t.value;t.unit&&t.unit.conversion_factor?e[n]=r*t.unit.conversion_factor:"degree"===t.unit?e[n]=r*Math.PI/180:e[n]=r});break;case"unit":r.name&&(e.units=r.name.toLowerCase(),"metre"===e.units&&(e.units="meter")),r.conversion_factor&&(e.to_meter=r.conversion_factor);break;case"base_crs":W(r,e),e.datumCode=r.id?r.id.authority+"_"+r.id.code:r.name}}),void 0!==e.latitude_of_false_origin&&(e.lat0=e.latitude_of_false_origin),void 0!==e.longitude_of_false_origin&&(e.long0=e.longitude_of_false_origin),void 0!==e.latitude_of_standard_parallel&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),void 0!==e.latitude_of_1st_standard_parallel&&(e.lat1=e.latitude_of_1st_standard_parallel),void 0!==e.latitude_of_2nd_standard_parallel&&(e.lat2=e.latitude_of_2nd_standard_parallel),void 0!==e.latitude_of_projection_centre&&(e.lat0=e.latitude_of_projection_centre),void 0!==e.longitude_of_projection_centre&&(e.longc=e.longitude_of_projection_centre),void 0!==e.easting_at_false_origin&&(e.x0=e.easting_at_false_origin),void 0!==e.northing_at_false_origin&&(e.y0=e.northing_at_false_origin),void 0!==e.latitude_of_natural_origin&&(e.lat0=e.latitude_of_natural_origin),void 0!==e.longitude_of_natural_origin&&(e.long0=e.longitude_of_natural_origin),void 0!==e.longitude_of_origin&&(e.long0=e.longitude_of_origin),void 0!==e.false_easting&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),void 0!==e.false_northing&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),void 0!==e.standard_parallel_1&&(e.lat1=e.standard_parallel_1),void 0!==e.standard_parallel_2&&(e.lat2=e.standard_parallel_2),void 0!==e.scale_factor_at_natural_origin&&(e.k0=e.scale_factor_at_natural_origin),void 0!==e.scale_factor_at_projection_centre&&(e.k0=e.scale_factor_at_projection_centre),void 0!==e.scale_factor_on_pseudo_standard_parallel&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),void 0!==e.azimuth&&(e.alpha=e.azimuth),void 0!==e.azimuth_at_projection_centre&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),B(e),e):t}function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}var K=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Q(t){for(var e=Object.keys(t),n=0,r=e.length;n<r;++n){var i=e[n];-1!==K.indexOf(i)&&Y(t[i]),"object"===X(t[i])&&Q(t[i])}}function Y(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"===X(t.PROJECTION)?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var n="",r=0,i=t.AXIS.length;r<i;++r){var o=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];-1!==o[0].indexOf("north")||("y"===o[0]||"lat"===o[0])&&"north"===o[1]?n+="n":-1!==o[0].indexOf("south")||("y"===o[0]||"lat"===o[0])&&"south"===o[1]?n+="s":-1!==o[0].indexOf("east")||("x"===o[0]||"lon"===o[0])&&"east"===o[1]?n+="e":-1===o[0].indexOf("west")&&("x"!==o[0]&&"lon"!==o[0]||"west"!==o[1])||(n+="w")}2===n.length&&(n+="u"),3===n.length&&(t.axis=n)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var a=t.GEOGCS;function s(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(a=t),a&&(a.DATUM?t.datumCode=a.DATUM.name.toLowerCase():t.datumCode=a.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_1949"===t.datumCode&&(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"belge_1972"===t.datumCode&&(t.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(t.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=a.DATUM.SPHEROID.a,t.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(t.datum_params=a.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),t.rectified_grid_angle&&(t.rectified_grid_angle=G(t.rectified_grid_angle));[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",G],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",G],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",G],["lat0","latitude_of_origin",G],["lat0","standard_parallel_1",G],["lat1","standard_parallel_1",G],["lat2","standard_parallel_2",G],["azimuth","Azimuth"],["alpha","azimuth",G],["srsCode","name"]].forEach(function(e){return n=t,i=(r=e)[0],o=r[1],void(!(i in n)&&o in n&&(n[i]=n[o],3===r.length&&(n[i]=r[2](n[i]))));var n,r,i,o}),B(t)}function $(t){if("object"===X(t))return W(t);var e=function(t){var e=t.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}(t),n=k(t);if("WKT2"===e)return W(C(n));var r=n[0],i={};return j(n,i),Q(i),i[r]}},5127:function(t,e,n){"use strict";function r(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function i(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function o(t){let e,n,o;function s(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<0?i=e+1:o=e}while(i<o)}return i}return 2!==t.length?(e=r,n=(e,n)=>r(t(e),n),o=(e,n)=>t(e)-n):(e=t===r||t===i?t:a,n=t,o=t),{left:s,center:function(t,e,n=0,r=t.length){const i=s(t,e,n,r-1);return i>n&&o(t[i-1],e)>-o(t[i],e)?i-1:i},right:function(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<=0?i=e+1:o=e}while(i<o)}return i}}}function a(){return 0}function s(t){return null===t?NaN:+t}n.r(e),n.d(e,{Adder:function(){return k},Delaunay:function(){return Xs},FormatSpecifier:function(){return hc},InternMap:function(){return L},InternSet:function(){return I},Node:function(){return Fm},Path:function(){return la},Voronoi:function(){return Bs},ZoomTransform:function(){return XE},active:function(){return po},arc:function(){return OM},area:function(){return zM},areaRadial:function(){return KM},ascending:function(){return r},autoType:function(){return Su},axisBottom:function(){return xe},axisLeft:function(){return _e},axisRight:function(){return ve},axisTop:function(){return ye},bin:function(){return dt},bisect:function(){return h},bisectCenter:function(){return f},bisectLeft:function(){return c},bisectRight:function(){return l},bisector:function(){return o},blob:function(){return gl},blur:function(){return d},blur2:function(){return p},blurImage:function(){return m},brush:function(){return qo},brushSelection:function(){return Go},brushX:function(){return Bo},brushY:function(){return Vo},buffer:function(){return vl},chord:function(){return ta},chordDirected:function(){return na},chordTranspose:function(){return ea},cluster:function(){return Pm},color:function(){return hr},contourDensity:function(){return vs},contours:function(){return cs},count:function(){return _},create:function(){return oM},creator:function(){return Sn},cross:function(){return A},csv:function(){return Ml},csvFormat:function(){return pu},csvFormatBody:function(){return mu},csvFormatRow:function(){return yu},csvFormatRows:function(){return gu},csvFormatValue:function(){return vu},csvParse:function(){return hu},csvParseRows:function(){return du},cubehelix:function(){return ts},cumsum:function(){return E},curveBasis:function(){return jA},curveBasisClosed:function(){return GA},curveBasisOpen:function(){return VA},curveBumpX:function(){return ZM},curveBumpY:function(){return JM},curveBundle:function(){return UA},curveCardinal:function(){return XA},curveCardinalClosed:function(){return QA},curveCardinalOpen:function(){return $A},curveCatmullRom:function(){return tE},curveCatmullRomClosed:function(){return nE},curveCatmullRomOpen:function(){return iE},curveLinear:function(){return DM},curveLinearClosed:function(){return aE},curveMonotoneX:function(){return pE},curveMonotoneY:function(){return mE},curveNatural:function(){return vE},curveStep:function(){return _E},curveStepAfter:function(){return wE},curveStepBefore:function(){return bE},descending:function(){return i},deviation:function(){return S},difference:function(){return $t},disjoint:function(){return Zt},dispatch:function(){return Te},drag:function(){return tu},dragDisable:function(){return Wn},dragEnable:function(){return Xn},dsv:function(){return wl},dsvFormat:function(){return cu},easeBack:function(){return cl},easeBackIn:function(){return ul},easeBackInOut:function(){return cl},easeBackOut:function(){return ll},easeBounce:function(){return ol},easeBounceIn:function(){return il},easeBounceInOut:function(){return al},easeBounceOut:function(){return ol},easeCircle:function(){return Xu},easeCircleIn:function(){return Hu},easeCircleInOut:function(){return Xu},easeCircleOut:function(){return Wu},easeCubic:function(){return lo},easeCubicIn:function(){return so},easeCubicInOut:function(){return lo},easeCubicOut:function(){return uo},easeElastic:function(){return dl},easeElasticIn:function(){return hl},easeElasticInOut:function(){return pl},easeElasticOut:function(){return dl},easeExp:function(){return Uu},easeExpIn:function(){return Vu},easeExpInOut:function(){return Uu},easeExpOut:function(){return qu},easeLinear:function(){return ku},easePoly:function(){return Du},easePolyIn:function(){return Iu},easePolyInOut:function(){return Du},easePolyOut:function(){return Ru},easeQuad:function(){return Lu},easeQuadIn:function(){return Pu},easeQuadInOut:function(){return Lu},easeQuadOut:function(){return Ou},easeSin:function(){return Gu},easeSinIn:function(){return ju},easeSinInOut:function(){return Gu},easeSinOut:function(){return zu},every:function(){return Ht},extent:function(){return C},fcumsum:function(){return O},filter:function(){return Xt},flatGroup:function(){return V},flatRollup:function(){return q},forceCenter:function(){return Ll},forceCollide:function(){return Hl},forceLink:function(){return Kl},forceManyBody:function(){return rc},forceRadial:function(){return ic},forceSimulation:function(){return nc},forceX:function(){return oc},forceY:function(){return ac},format:function(){return yc},formatDefaultLocale:function(){return wc},formatLocale:function(){return bc},formatPrefix:function(){return vc},formatSpecifier:function(){return fc},fsum:function(){return P},geoAlbers:function(){return Hp},geoAlbersUsa:function(){return Wp},geoArea:function(){return Sf},geoAzimuthalEqualArea:function(){return Yp},geoAzimuthalEqualAreaRaw:function(){return Qp},geoAzimuthalEquidistant:function(){return Zp},geoAzimuthalEquidistantRaw:function(){return $p},geoBounds:function(){return uh},geoCentroid:function(){return _h},geoCircle:function(){return Oh},geoClipAntimeridian:function(){return Vh},geoClipCircle:function(){return qh},geoClipExtent:function(){return $h},geoClipRectangle:function(){return Yh},geoConicConformal:function(){return im},geoConicConformalRaw:function(){return rm},geoConicEqualArea:function(){return Up},geoConicEqualAreaRaw:function(){return qp},geoConicEquidistant:function(){return um},geoConicEquidistantRaw:function(){return sm},geoContains:function(){return pd},geoDistance:function(){return od},geoEqualEarth:function(){return mm},geoEqualEarthRaw:function(){return pm},geoEquirectangular:function(){return am},geoEquirectangularRaw:function(){return om},geoGnomonic:function(){return ym},geoGnomonicRaw:function(){return gm},geoGraticule:function(){return yd},geoGraticule10:function(){return vd},geoIdentity:function(){return vm},geoInterpolate:function(){return xd},geoLength:function(){return nd},geoMercator:function(){return tm},geoMercatorRaw:function(){return Jp},geoNaturalEarth1:function(){return _m},geoNaturalEarth1Raw:function(){return xm},geoOrthographic:function(){return wm},geoOrthographicRaw:function(){return bm},geoPath:function(){return Tp},geoProjection:function(){return Gp},geoProjectionMutator:function(){return Bp},geoRotation:function(){return Ch},geoStereographic:function(){return Am},geoStereographicRaw:function(){return Mm},geoStream:function(){return nf},geoTransform:function(){return Sp},geoTransverseMercator:function(){return Tm},geoTransverseMercatorRaw:function(){return Em},gray:function(){return Ra},greatest:function(){return _t},greatestIndex:function(){return Ft},group:function(){return z},groupSort:function(){return tt},groups:function(){return G},hcl:function(){return qa},hierarchy:function(){return Lm},histogram:function(){return dt},hsl:function(){return Er},html:function(){return Pl},image:function(){return El},index:function(){return W},indexes:function(){return X},interpolate:function(){return Zr},interpolateArray:function(){return Ur},interpolateBasis:function(){return Or},interpolateBasisClosed:function(){return Lr},interpolateBlues:function(){return Lw},interpolateBrBG:function(){return Ub},interpolateBuGn:function(){return uw},interpolateBuPu:function(){return cw},interpolateCividis:function(){return qw},interpolateCool:function(){return Ww},interpolateCubehelix:function(){return $g},interpolateCubehelixDefault:function(){return Uw},interpolateCubehelixLong:function(){return Zg},interpolateDate:function(){return Wr},interpolateDiscrete:function(){return jg},interpolateGnBu:function(){return hw},interpolateGreens:function(){return Rw},interpolateGreys:function(){return Nw},interpolateHcl:function(){return Kg},interpolateHclLong:function(){return Qg},interpolateHsl:function(){return Ug},interpolateHslLong:function(){return Hg},interpolateHue:function(){return zg},interpolateInferno:function(){return rM},interpolateLab:function(){return Wg},interpolateMagma:function(){return nM},interpolateNumber:function(){return Xr},interpolateNumberArray:function(){return Vr},interpolateObject:function(){return Kr},interpolateOrRd:function(){return pw},interpolateOranges:function(){return Vw},interpolatePRGn:function(){return Wb},interpolatePiYG:function(){return Kb},interpolatePlasma:function(){return iM},interpolatePuBu:function(){return vw},interpolatePuBuGn:function(){return gw},interpolatePuOr:function(){return Yb},interpolatePuRd:function(){return _w},interpolatePurples:function(){return jw},interpolateRainbow:function(){return Kw},interpolateRdBu:function(){return Zb},interpolateRdGy:function(){return tw},interpolateRdPu:function(){return ww},interpolateRdYlBu:function(){return nw},interpolateRdYlGn:function(){return iw},interpolateReds:function(){return Gw},interpolateRgb:function(){return jr},interpolateRgbBasis:function(){return Gr},interpolateRgbBasisClosed:function(){return Br},interpolateRound:function(){return Gg},interpolateSinebow:function(){return Zw},interpolateSpectral:function(){return aw},interpolateString:function(){return $r},interpolateTransformCss:function(){return Ni},interpolateTransformSvg:function(){return Fi},interpolateTurbo:function(){return Jw},interpolateViridis:function(){return eM},interpolateWarm:function(){return Hw},interpolateYlGn:function(){return Tw},interpolateYlGnBu:function(){return Aw},interpolateYlOrBr:function(){return Cw},interpolateYlOrRd:function(){return Pw},interpolateZoom:function(){return Vg},interrupt:function(){return Pi},intersection:function(){return Jt},interval:function(){return UE},isoFormat:function(){return BE},isoParse:function(){return qE},json:function(){return Sl},lab:function(){return Da},lch:function(){return Va},least:function(){return Dt},leastIndex:function(){return Nt},line:function(){return jM},lineRadial:function(){return XM},link:function(){return rA},linkHorizontal:function(){return iA},linkRadial:function(){return aA},linkVertical:function(){return oA},local:function(){return sM},map:function(){return Kt},matcher:function(){return Le},max:function(){return pt},maxIndex:function(){return mt},mean:function(){return Tt},median:function(){return St},medianIndex:function(){return Ct},merge:function(){return kt},min:function(){return gt},minIndex:function(){return yt},mode:function(){return Pt},namespace:function(){return Xe},namespaces:function(){return We},nice:function(){return ft},now:function(){return fi},pack:function(){return ug},packEnclose:function(){return Wm},packSiblings:function(){return ag},pairs:function(){return Ot},partition:function(){return pg},path:function(){return ca},pathRound:function(){return fa},permute:function(){return Y},pie:function(){return VM},piecewise:function(){return Jg},pointRadial:function(){return QM},pointer:function(){return ti},pointers:function(){return lM},polygonArea:function(){return ey},polygonCentroid:function(){return ny},polygonContains:function(){return sy},polygonHull:function(){return ay},polygonLength:function(){return uy},precisionFixed:function(){return Mc},precisionPrefix:function(){return Ac},precisionRound:function(){return Ec},quadtree:function(){return Fl},quantile:function(){return bt},quantileIndex:function(){return Mt},quantileSorted:function(){return wt},quantize:function(){return ty},quickselect:function(){return vt},radialArea:function(){return KM},radialLine:function(){return XM},randomBates:function(){return my},randomBernoulli:function(){return vy},randomBeta:function(){return by},randomBinomial:function(){return wy},randomCauchy:function(){return Ay},randomExponential:function(){return gy},randomGamma:function(){return _y},randomGeometric:function(){return xy},randomInt:function(){return fy},randomIrwinHall:function(){return py},randomLcg:function(){return Py},randomLogNormal:function(){return dy},randomLogistic:function(){return Ey},randomNormal:function(){return hy},randomPareto:function(){return yy},randomPoisson:function(){return Ty},randomUniform:function(){return cy},randomWeibull:function(){return My},range:function(){return It},rank:function(){return Rt},reduce:function(){return Qt},reverse:function(){return Yt},rgb:function(){return gr},ribbon:function(){return wa},ribbonArrow:function(){return Ma},rollup:function(){return U},rollups:function(){return H},scaleBand:function(){return Dy},scaleDiverging:function(){return Eb},scaleDivergingLog:function(){return Tb},scaleDivergingPow:function(){return Cb},scaleDivergingSqrt:function(){return kb},scaleDivergingSymlog:function(){return Sb},scaleIdentity:function(){return Yy},scaleImplicit:function(){return Iy},scaleLinear:function(){return Qy},scaleLog:function(){return ov},scaleOrdinal:function(){return Ry},scalePoint:function(){return Fy},scalePow:function(){return pv},scaleQuantile:function(){return vv},scaleQuantize:function(){return xv},scaleRadial:function(){return yv},scaleSequential:function(){return vb},scaleSequentialLog:function(){return xb},scaleSequentialPow:function(){return bb},scaleSequentialQuantile:function(){return Mb},scaleSequentialSqrt:function(){return wb},scaleSequentialSymlog:function(){return _b},scaleSqrt:function(){return mv},scaleSymlog:function(){return lv},scaleThreshold:function(){return _v},scaleTime:function(){return pb},scaleUtc:function(){return mb},scan:function(){return jt},schemeAccent:function(){return Lb},schemeBlues:function(){return Ow},schemeBrBG:function(){return qb},schemeBuGn:function(){return sw},schemeBuPu:function(){return lw},schemeCategory10:function(){return Ob},schemeDark2:function(){return Ib},schemeGnBu:function(){return fw},schemeGreens:function(){return Iw},schemeGreys:function(){return Dw},schemeObservable10:function(){return Rb},schemeOrRd:function(){return dw},schemeOranges:function(){return Bw},schemePRGn:function(){return Hb},schemePaired:function(){return Db},schemePastel1:function(){return Nb},schemePastel2:function(){return Fb},schemePiYG:function(){return Xb},schemePuBu:function(){return yw},schemePuBuGn:function(){return mw},schemePuOr:function(){return Qb},schemePuRd:function(){return xw},schemePurples:function(){return Fw},schemeRdBu:function(){return $b},schemeRdGy:function(){return Jb},schemeRdPu:function(){return bw},schemeRdYlBu:function(){return ew},schemeRdYlGn:function(){return rw},schemeReds:function(){return zw},schemeSet1:function(){return jb},schemeSet2:function(){return zb},schemeSet3:function(){return Gb},schemeSpectral:function(){return ow},schemeTableau10:function(){return Bb},schemeYlGn:function(){return Ew},schemeYlGnBu:function(){return Mw},schemeYlOrBr:function(){return Sw},schemeYlOrRd:function(){return kw},select:function(){return Bn},selectAll:function(){return cM},selection:function(){return Gn},selector:function(){return Ce},selectorAll:function(){return Oe},shuffle:function(){return zt},shuffler:function(){return Gt},some:function(){return Wt},sort:function(){return $},stack:function(){return SE},stackOffsetDiverging:function(){return kE},stackOffsetExpand:function(){return CE},stackOffsetNone:function(){return ME},stackOffsetSilhouette:function(){return PE},stackOffsetWiggle:function(){return OE},stackOrderAppearance:function(){return LE},stackOrderAscending:function(){return RE},stackOrderDescending:function(){return NE},stackOrderInsideOut:function(){return FE},stackOrderNone:function(){return AE},stackOrderReverse:function(){return jE},stratify:function(){return _g},style:function(){return on},subset:function(){return re},sum:function(){return Bt},superset:function(){return ee},svg:function(){return Ol},symbol:function(){return RA},symbolAsterisk:function(){return uA},symbolCircle:function(){return lA},symbolCross:function(){return cA},symbolDiamond:function(){return dA},symbolDiamond2:function(){return pA},symbolPlus:function(){return mA},symbolSquare:function(){return gA},symbolSquare2:function(){return yA},symbolStar:function(){return bA},symbolTimes:function(){return OA},symbolTriangle:function(){return MA},symbolTriangle2:function(){return EA},symbolWye:function(){return PA},symbolX:function(){return OA},symbols:function(){return LA},symbolsFill:function(){return LA},symbolsStroke:function(){return IA},text:function(){return _l},thresholdFreedmanDiaconis:function(){return At},thresholdScott:function(){return Et},thresholdSturges:function(){return ht},tickFormat:function(){return Xy},tickIncrement:function(){return lt},tickStep:function(){return ct},ticks:function(){return ut},timeDay:function(){return qv},timeDays:function(){return Uv},timeFormat:function(){return qx},timeFormatDefaultLocale:function(){return cb},timeFormatLocale:function(){return Bx},timeFriday:function(){return ex},timeFridays:function(){return ux},timeHour:function(){return zv},timeHours:function(){return Gv},timeInterval:function(){return Pv},timeMillisecond:function(){return Ov},timeMilliseconds:function(){return Lv},timeMinute:function(){return Dv},timeMinutes:function(){return Nv},timeMonday:function(){return $v},timeMondays:function(){return ix},timeMonth:function(){return Ex},timeMonths:function(){return Tx},timeParse:function(){return Ux},timeSaturday:function(){return nx},timeSaturdays:function(){return lx},timeSecond:function(){return Iv},timeSeconds:function(){return Rv},timeSunday:function(){return Yv},timeSundays:function(){return rx},timeThursday:function(){return tx},timeThursdays:function(){return sx},timeTickInterval:function(){return Fx},timeTicks:function(){return Nx},timeTuesday:function(){return Zv},timeTuesdays:function(){return ox},timeWednesday:function(){return Jv},timeWednesdays:function(){return ax},timeWeek:function(){return Yv},timeWeeks:function(){return rx},timeYear:function(){return kx},timeYears:function(){return Px},timeout:function(){return xi},timer:function(){return pi},timerFlush:function(){return mi},transition:function(){return io},transpose:function(){return Vt},tree:function(){return kg},treemap:function(){return Rg},treemapBinary:function(){return Dg},treemapDice:function(){return dg},treemapResquarify:function(){return Fg},treemapSlice:function(){return Pg},treemapSliceDice:function(){return Ng},treemapSquarify:function(){return Ig},tsv:function(){return Al},tsvFormat:function(){return wu},tsvFormatBody:function(){return Mu},tsvFormatRow:function(){return Eu},tsvFormatRows:function(){return Au},tsvFormatValue:function(){return Tu},tsvParse:function(){return _u},tsvParseRows:function(){return bu},union:function(){return ie},unixDay:function(){return Xv},unixDays:function(){return Kv},utcDay:function(){return Hv},utcDays:function(){return Wv},utcFormat:function(){return Hx},utcFriday:function(){return gx},utcFridays:function(){return Mx},utcHour:function(){return Bv},utcHours:function(){return Vv},utcMillisecond:function(){return Ov},utcMilliseconds:function(){return Lv},utcMinute:function(){return Fv},utcMinutes:function(){return jv},utcMonday:function(){return hx},utcMondays:function(){return xx},utcMonth:function(){return Sx},utcMonths:function(){return Cx},utcParse:function(){return Wx},utcSaturday:function(){return yx},utcSaturdays:function(){return Ax},utcSecond:function(){return Iv},utcSeconds:function(){return Rv},utcSunday:function(){return fx},utcSundays:function(){return vx},utcThursday:function(){return mx},utcThursdays:function(){return wx},utcTickInterval:function(){return Dx},utcTicks:function(){return Rx},utcTuesday:function(){return dx},utcTuesdays:function(){return _x},utcWednesday:function(){return px},utcWednesdays:function(){return bx},utcWeek:function(){return fx},utcWeeks:function(){return vx},utcYear:function(){return Ox},utcYears:function(){return Lx},variance:function(){return T},window:function(){return tn},xml:function(){return kl},zip:function(){return Ut},zoom:function(){return iT},zoomIdentity:function(){return KE},zoomTransform:function(){return QE}});const u=o(r),l=u.right,c=u.left,f=o(s).center;var h=l;function d(t,e){if(!((e=+e)>=0))throw new RangeError("invalid r");let n=t.length;if(!((n=Math.floor(n))>=0))throw new RangeError("invalid length");if(!n||!e)return t;const r=x(e),i=t.slice();return r(t,i,0,n,1),r(i,t,0,n,1),r(t,i,0,n,1),t}const p=g(x),m=g(function(t){const e=x(t);return(t,n,r,i,o)=>{e(t,n,(r<<=2)+0,(i<<=2)+0,o<<=2),e(t,n,r+1,i+1,o),e(t,n,r+2,i+2,o),e(t,n,r+3,i+3,o)}});function g(t){return function(e,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:o,height:a}=e;if(!((o=Math.floor(o))>=0))throw new RangeError("invalid width");if(!((a=Math.floor(void 0!==a?a:i.length/o))>=0))throw new RangeError("invalid height");if(!o||!a||!n&&!r)return e;const s=n&&t(n),u=r&&t(r),l=i.slice();return s&&u?(y(s,l,i,o,a),y(s,i,l,o,a),y(s,l,i,o,a),v(u,i,l,o,a),v(u,l,i,o,a),v(u,i,l,o,a)):s?(y(s,i,l,o,a),y(s,l,i,o,a),y(s,i,l,o,a)):u&&(v(u,i,l,o,a),v(u,l,i,o,a),v(u,i,l,o,a)),e}}function y(t,e,n,r,i){for(let o=0,a=r*i;o<a;)t(e,n,o,o+=r,1)}function v(t,e,n,r,i){for(let o=0,a=r*i;o<r;++o)t(e,n,o,o+a,r)}function x(t){const e=Math.floor(t);if(e===t)return function(t){const e=2*t+1;return(n,r,i,o,a)=>{if(!((o-=a)>=i))return;let s=t*r[i];const u=a*t;for(let t=i,e=i+u;t<e;t+=a)s+=r[Math.min(o,t)];for(let t=i,l=o;t<=l;t+=a)s+=r[Math.min(o,t+u)],n[t]=s/e,s-=r[Math.max(i,t-u)]}}(t);const n=t-e,r=2*t+1;return(t,i,o,a,s)=>{if(!((a-=s)>=o))return;let u=e*i[o];const l=s*e,c=l+s;for(let t=o,e=o+l;t<e;t+=s)u+=i[Math.min(a,t)];for(let e=o,f=a;e<=f;e+=s)u+=i[Math.min(a,e+l)],t[e]=(u+n*(i[Math.max(o,e-c)]+i[Math.min(a,e+c)]))/r,u-=i[Math.max(o,e-l)]}}function _(t,e){let n=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&++n;else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(i=+i)>=i&&++n}return n}function b(t){return 0|t.length}function w(t){return!(t>0)}function M(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function A(...t){const e="function"==typeof t[t.length-1]&&function(t){return e=>t(...e)}(t.pop()),n=(t=t.map(M)).map(b),r=t.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(w))return o;for(;;){o.push(i.map((e,n)=>t[n][e]));let a=r;for(;++i[a]===n[a];){if(0===a)return e?o.map(e):o;i[a--]=0}}}function E(t,e){var n=0,r=0;return Float64Array.from(t,void 0===e?t=>n+=+t||0:i=>n+=+e(i,r++,t)||0)}function T(t,e){let n,r=0,i=0,o=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(n=e-i,i+=n/++r,o+=n*(e-i));else{let a=-1;for(let s of t)null!=(s=e(s,++a,t))&&(s=+s)>=s&&(n=s-i,i+=n/++r,o+=n*(s-i))}if(r>1)return o/(r-1)}function S(t,e){const n=T(t,e);return n?Math.sqrt(n):n}function C(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class k{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=e[r],o=t+i,a=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);a&&(e[n++]=a),t=o}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(e=o,n=t[--i],o=e+n,r=n-(o-e),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(n=2*r,e=o+n,n==e-o&&(o=e))}return o}}function P(t,e){const n=new k;if(void 0===e)for(let e of t)(e=+e)&&n.add(e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&n.add(i)}return+n}function O(t,e){const n=new k;let r=-1;return Float64Array.from(t,void 0===e?t=>n.add(+t||0):i=>n.add(+e(i,++r,t)||0))}class L extends Map{constructor(t,e=F){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(R(this,t))}has(t){return super.has(R(this,t))}set(t,e){return super.set(D(this,t),e)}delete(t){return super.delete(N(this,t))}}class I extends Set{constructor(t,e=F){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const e of t)this.add(e)}has(t){return super.has(R(this,t))}add(t){return super.add(D(this,t))}delete(t){return super.delete(N(this,t))}}function R({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function D({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function N({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function F(t){return null!==t&&"object"==typeof t?t.valueOf():t}function j(t){return t}function z(t,...e){return Q(t,j,j,e)}function G(t,...e){return Q(t,Array.from,j,e)}function B(t,e){for(let n=1,r=e.length;n<r;++n)t=t.flatMap(t=>t.pop().map(([e,n])=>[...t,e,n]));return t}function V(t,...e){return B(G(t,...e),e)}function q(t,e,...n){return B(H(t,e,...n),n)}function U(t,e,...n){return Q(t,j,e,n)}function H(t,e,...n){return Q(t,Array.from,e,n)}function W(t,...e){return Q(t,j,K,e)}function X(t,...e){return Q(t,Array.from,K,e)}function K(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function Q(t,e,n,r){return function t(i,o){if(o>=r.length)return n(i);const a=new L,s=r[o++];let u=-1;for(const t of i){const e=s(t,++u,i),n=a.get(e);n?n.push(t):a.set(e,[t])}for(const[e,n]of a)a.set(e,t(n,o));return e(a)}(t,0)}function Y(t,e){return Array.from(e,e=>t[e])}function $(t,...e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&2!==n.length||e.length>1){const r=Uint32Array.from(t,(t,e)=>e);return e.length>1?(e=e.map(e=>t.map(e)),r.sort((t,n)=>{for(const r of e){const e=J(r[t],r[n]);if(e)return e}})):(n=t.map(n),r.sort((t,e)=>J(n[t],n[e]))),Y(t,r)}return t.sort(Z(n))}function Z(t=r){if(t===r)return J;if("function"!=typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||0===r?r:(0===t(n,n))-(0===t(e,e))}}function J(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}function tt(t,e,n){return(2!==e.length?$(U(t,e,n),([t,e],[n,i])=>r(e,i)||r(t,n)):$(z(t,n),([t,n],[i,o])=>e(n,o)||r(t,i))).map(([t])=>t)}var et=Array.prototype,nt=et.slice;et.map;function rt(t){return()=>t}const it=Math.sqrt(50),ot=Math.sqrt(10),at=Math.sqrt(2);function st(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=it?10:o>=ot?5:o>=at?2:1;let s,u,l;return i<0?(l=Math.pow(10,-i)/a,s=Math.round(t*l),u=Math.round(e*l),s/l<t&&++s,u/l>e&&--u,l=-l):(l=Math.pow(10,i)*a,s=Math.round(t/l),u=Math.round(e/l),s*l<t&&++s,u*l>e&&--u),u<s&&.5<=n&&n<2?st(t,e,2*n):[s,u,l]}function ut(t,e,n){if(!((n=+n)>0))return[];if((t=+t)===(e=+e))return[t];const r=e<t,[i,o,a]=r?st(e,t,n):st(t,e,n);if(!(o>=i))return[];const s=o-i+1,u=new Array(s);if(r)if(a<0)for(let t=0;t<s;++t)u[t]=(o-t)/-a;else for(let t=0;t<s;++t)u[t]=(o-t)*a;else if(a<0)for(let t=0;t<s;++t)u[t]=(i+t)/-a;else for(let t=0;t<s;++t)u[t]=(i+t)*a;return u}function lt(t,e,n){return st(t=+t,e=+e,n=+n)[2]}function ct(t,e,n){n=+n;const r=(e=+e)<(t=+t),i=r?lt(e,t,n):lt(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function ft(t,e,n){let r;for(;;){const i=lt(t,e,n);if(i===r||0===i||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function ht(t){return Math.max(1,Math.ceil(Math.log(_(t))/Math.LN2)+1)}function dt(){var t=j,e=C,n=ht;function r(r){Array.isArray(r)||(r=Array.from(r));var i,o,a,s=r.length,u=new Array(s);for(i=0;i<s;++i)u[i]=t(r[i],i,r);var l=e(u),c=l[0],f=l[1],d=n(u,c,f);if(!Array.isArray(d)){const t=f,n=+d;if(e===C&&([c,f]=ft(c,f,n)),(d=ut(c,f,n))[0]<=c&&(a=lt(c,f,n)),d[d.length-1]>=f)if(t>=f&&e===C){const t=lt(c,f,n);isFinite(t)&&(t>0?f=(Math.floor(f/t)+1)*t:t<0&&(f=(Math.ceil(f*-t)+1)/-t))}else d.pop()}for(var p=d.length,m=0,g=p;d[m]<=c;)++m;for(;d[g-1]>f;)--g;(m||g<p)&&(d=d.slice(m,g),p=g-m);var y,v=new Array(p+1);for(i=0;i<=p;++i)(y=v[i]=[]).x0=i>0?d[i-1]:c,y.x1=i<p?d[i]:f;if(isFinite(a)){if(a>0)for(i=0;i<s;++i)null!=(o=u[i])&&c<=o&&o<=f&&v[Math.min(p,Math.floor((o-c)/a))].push(r[i]);else if(a<0)for(i=0;i<s;++i)if(null!=(o=u[i])&&c<=o&&o<=f){const t=Math.floor((c-o)*a);v[Math.min(p,t+(d[t]<=o))].push(r[i])}}else for(i=0;i<s;++i)null!=(o=u[i])&&c<=o&&o<=f&&v[h(d,o,0,p)].push(r[i]);return v}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:rt(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:rt([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:rt(Array.isArray(t)?nt.call(t):t),r):n},r}function pt(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function mt(t,e){let n,r=-1,i=-1;if(void 0===e)for(const e of t)++i,null!=e&&(n<e||void 0===n&&e>=e)&&(n=e,r=i);else for(let o of t)null!=(o=e(o,++i,t))&&(n<o||void 0===n&&o>=o)&&(n=o,r=i);return r}function gt(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function yt(t,e){let n,r=-1,i=-1;if(void 0===e)for(const e of t)++i,null!=e&&(n>e||void 0===n&&e>=e)&&(n=e,r=i);else for(let o of t)null!=(o=e(o,++i,t))&&(n>o||void 0===n&&o>=o)&&(n=o,r=i);return r}function vt(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=void 0===i?J:Z(i);r>n;){if(r-n>600){const o=r-n+1,a=e-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);vt(t,e,Math.max(n,Math.floor(e-a*u/o+l)),Math.min(r,Math.floor(e+(o-a)*u/o+l)),i)}const o=t[e];let a=n,s=r;for(xt(t,n,e),i(t[r],o)>0&&xt(t,n,r);a<s;){for(xt(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}0===i(t[n],o)?xt(t,n,s):(++s,xt(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function xt(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function _t(t,e=r){let n,i=!1;if(1===e.length){let o;for(const a of t){const t=e(a);(i?r(t,o)>0:0===r(t,t))&&(n=a,o=t,i=!0)}}else for(const r of t)(i?e(r,n)>0:0===e(r,r))&&(n=r,i=!0);return n}function bt(t,e,n){if(t=Float64Array.from(function*(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}(t,n)),(r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return gt(t);if(e>=1)return pt(t);var r,i=(r-1)*e,o=Math.floor(i),a=pt(vt(t,o).subarray(0,o+1));return a+(gt(t.subarray(o+1))-a)*(i-o)}}function wt(t,e,n=s){if((r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}}function Mt(t,e,n=s){if(!isNaN(e=+e)){if(r=Float64Array.from(t,(e,r)=>s(n(t[r],r,t))),e<=0)return yt(r);if(e>=1)return mt(r);var r,i=Uint32Array.from(t,(t,e)=>e),o=r.length-1,a=Math.floor(o*e);return vt(i,a,0,o,(t,e)=>J(r[t],r[e])),(a=_t(i.subarray(0,a+1),t=>r[t]))>=0?a:-1}}function At(t,e,n){const r=_(t),i=bt(t,.75)-bt(t,.25);return r&&i?Math.ceil((n-e)/(2*i*Math.pow(r,-1/3))):1}function Et(t,e,n){const r=_(t),i=S(t);return r&&i?Math.ceil((n-e)*Math.cbrt(r)/(3.49*i)):1}function Tt(t,e){let n=0,r=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,r+=e);else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function St(t,e){return bt(t,.5,e)}function Ct(t,e){return Mt(t,.5,e)}function kt(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function Pt(t,e){const n=new L;if(void 0===e)for(let e of t)null!=e&&e>=e&&n.set(e,(n.get(e)||0)+1);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&i>=i&&n.set(i,(n.get(i)||0)+1)}let r,i=0;for(const[t,e]of n)e>i&&(i=e,r=t);return r}function Ot(t,e=Lt){const n=[];let r,i=!1;for(const o of t)i&&n.push(e(r,o)),r=o,i=!0;return n}function Lt(t,e){return[t,e]}function It(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}function Rt(t,e=r){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");let n=Array.from(t);const i=new Float64Array(n.length);2!==e.length&&(n=n.map(e),e=r);const o=(t,r)=>e(n[t],n[r]);let a,s;return(t=Uint32Array.from(n,(t,e)=>e)).sort(e===r?(t,e)=>J(n[t],n[e]):Z(o)),t.forEach((t,e)=>{const n=o(t,void 0===a?t:a);n>=0?((void 0===a||n>0)&&(a=t,s=e),i[t]=s):i[t]=NaN}),i}function Dt(t,e=r){let n,i=!1;if(1===e.length){let o;for(const a of t){const t=e(a);(i?r(t,o)<0:0===r(t,t))&&(n=a,o=t,i=!0)}}else for(const r of t)(i?e(r,n)<0:0===e(r,r))&&(n=r,i=!0);return n}function Nt(t,e=r){if(1===e.length)return yt(t,e);let n,i=-1,o=-1;for(const r of t)++o,(i<0?0===e(r,r):e(r,n)<0)&&(n=r,i=o);return i}function Ft(t,e=r){if(1===e.length)return mt(t,e);let n,i=-1,o=-1;for(const r of t)++o,(i<0?0===e(r,r):e(r,n)>0)&&(n=r,i=o);return i}function jt(t,e){const n=Nt(t,e);return n<0?void 0:n}var zt=Gt(Math.random);function Gt(t){return function(e,n=0,r=e.length){let i=r-(n=+n);for(;i;){const r=t()*i--|0,o=e[i+n];e[i+n]=e[r+n],e[r+n]=o}return e}}function Bt(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function Vt(t){if(!(i=t.length))return[];for(var e=-1,n=gt(t,qt),r=new Array(n);++e<n;)for(var i,o=-1,a=r[e]=new Array(i);++o<i;)a[o]=t[o][e];return r}function qt(t){return t.length}function Ut(){return Vt(arguments)}function Ht(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const r of t)if(!e(r,++n,t))return!1;return!0}function Wt(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const r of t)if(e(r,++n,t))return!0;return!1}function Xt(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of t)e(i,++r,t)&&n.push(i);return n}function Kt(t,e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof e)throw new TypeError("mapper is not a function");return Array.from(t,(n,r)=>e(n,r,t))}function Qt(t,e,n){if("function"!=typeof e)throw new TypeError("reducer is not a function");const r=t[Symbol.iterator]();let i,o,a=-1;if(arguments.length<3){if(({done:i,value:n}=r.next()),i)return;++a}for(;({done:i,value:o}=r.next()),!i;)n=e(n,o,++a,t);return n}function Yt(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()}function $t(t,...e){t=new I(t);for(const n of e)for(const e of n)t.delete(e);return t}function Zt(t,e){const n=e[Symbol.iterator](),r=new I;for(const e of t){if(r.has(e))return!1;let t,i;for(;({value:t,done:i}=n.next())&&!i;){if(Object.is(e,t))return!1;r.add(t)}}return!0}function Jt(t,...e){t=new I(t),e=e.map(te);t:for(const n of t)for(const r of e)if(!r.has(n)){t.delete(n);continue t}return t}function te(t){return t instanceof I?t:new I(t)}function ee(t,e){const n=t[Symbol.iterator](),r=new Set;for(const t of e){const e=ne(t);if(r.has(e))continue;let i,o;for(;({value:i,done:o}=n.next());){if(o)return!1;const t=ne(i);if(r.add(t),Object.is(e,t))break}}return!0}function ne(t){return null!==t&&"object"==typeof t?t.valueOf():t}function re(t,e){return ee(e,t)}function ie(...t){const e=new I;for(const n of t)for(const t of n)e.add(t);return e}function oe(t){return t}var ae=1,se=2,ue=3,le=4,ce=1e-6;function fe(t){return"translate("+t+",0)"}function he(t){return"translate(0,"+t+")"}function de(t){return e=>+t(e)}function pe(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function me(){return!this.__axis}function ge(t,e){var n=[],r=null,i=null,o=6,a=6,s=3,u="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,l=t===ae||t===le?-1:1,c=t===le||t===se?"x":"y",f=t===ae||t===ue?fe:he;function h(h){var d=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,p=null==i?e.tickFormat?e.tickFormat.apply(e,n):oe:i,m=Math.max(o,0)+s,g=e.range(),y=+g[0]+u,v=+g[g.length-1]+u,x=(e.bandwidth?pe:de)(e.copy(),u),_=h.selection?h.selection():h,b=_.selectAll(".domain").data([null]),w=_.selectAll(".tick").data(d,e).order(),M=w.exit(),A=w.enter().append("g").attr("class","tick"),E=w.select("line"),T=w.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(A),E=E.merge(A.append("line").attr("stroke","currentColor").attr(c+"2",l*o)),T=T.merge(A.append("text").attr("fill","currentColor").attr(c,l*m).attr("dy",t===ae?"0em":t===ue?"0.71em":"0.32em")),h!==_&&(b=b.transition(h),w=w.transition(h),E=E.transition(h),T=T.transition(h),M=M.transition(h).attr("opacity",ce).attr("transform",function(t){return isFinite(t=x(t))?f(t+u):this.getAttribute("transform")}),A.attr("opacity",ce).attr("transform",function(t){var e=this.parentNode.__axis;return f((e&&isFinite(e=e(t))?e:x(t))+u)})),M.remove(),b.attr("d",t===le||t===se?a?"M"+l*a+","+y+"H"+u+"V"+v+"H"+l*a:"M"+u+","+y+"V"+v:a?"M"+y+","+l*a+"V"+u+"H"+v+"V"+l*a:"M"+y+","+u+"H"+v),w.attr("opacity",1).attr("transform",function(t){return f(x(t)+u)}),E.attr(c+"2",l*o),T.attr(c,l*m).text(p),_.filter(me).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===se?"start":t===le?"end":"middle"),_.each(function(){this.__axis=x})}return h.scale=function(t){return arguments.length?(e=t,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),h):n.slice()},h.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),h):r&&r.slice()},h.tickFormat=function(t){return arguments.length?(i=t,h):i},h.tickSize=function(t){return arguments.length?(o=a=+t,h):o},h.tickSizeInner=function(t){return arguments.length?(o=+t,h):o},h.tickSizeOuter=function(t){return arguments.length?(a=+t,h):a},h.tickPadding=function(t){return arguments.length?(s=+t,h):s},h.offset=function(t){return arguments.length?(u=+t,h):u},h}function ye(t){return ge(ae,t)}function ve(t){return ge(se,t)}function xe(t){return ge(ue,t)}function _e(t){return ge(le,t)}var be={value:()=>{}};function we(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Me(r)}function Me(t){this._=t}function Ae(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Ee(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=be,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Me.prototype=we.prototype={constructor:Me,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=o[a]).type)i[n]=Ee(i[n],t.name,e);else if(null==e)for(n in i)i[n]=Ee(i[n],t.name,null);return this}for(;++a<s;)if((n=(t=o[a]).type)&&(n=Ae(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Me(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var Te=we;function Se(){}function Ce(t){return null==t?Se:function(){return this.querySelector(t)}}function ke(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function Pe(){return[]}function Oe(t){return null==t?Pe:function(){return this.querySelectorAll(t)}}function Le(t){return function(){return this.matches(t)}}function Ie(t){return function(e){return e.matches(t)}}var Re=Array.prototype.find;function De(){return this.firstElementChild}var Ne=Array.prototype.filter;function Fe(){return Array.from(this.children)}function je(t){return new Array(t.length)}function ze(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Ge(t,e,n,r,i,o){for(var a,s=0,u=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new ze(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function Be(t,e,n,r,i,o,a){var s,u,l,c=new Map,f=e.length,h=o.length,d=new Array(f);for(s=0;s<f;++s)(u=e[s])&&(d[s]=l=a.call(u,u.__data__,s,e)+"",c.has(l)?i[s]=u:c.set(l,u));for(s=0;s<h;++s)l=a.call(t,o[s],s,o)+"",(u=c.get(l))?(r[s]=u,u.__data__=o[s],c.delete(l)):n[s]=new ze(t,o[s]);for(s=0;s<f;++s)(u=e[s])&&c.get(d[s])===u&&(i[s]=u)}function Ve(t){return t.__data__}function qe(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Ue(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}ze.prototype={constructor:ze,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var He="http://www.w3.org/1999/xhtml",We={svg:"http://www.w3.org/2000/svg",xhtml:He,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Xe(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),We.hasOwnProperty(e)?{space:We[e],local:t}:t}function Ke(t){return function(){this.removeAttribute(t)}}function Qe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ye(t,e){return function(){this.setAttribute(t,e)}}function $e(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ze(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Je(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function tn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function en(t){return function(){this.style.removeProperty(t)}}function nn(t,e,n){return function(){this.style.setProperty(t,e,n)}}function rn(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function on(t,e){return t.style.getPropertyValue(e)||tn(t).getComputedStyle(t,null).getPropertyValue(e)}function an(t){return function(){delete this[t]}}function sn(t,e){return function(){this[t]=e}}function un(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function ln(t){return t.trim().split(/^|\s+/)}function cn(t){return t.classList||new fn(t)}function fn(t){this._node=t,this._names=ln(t.getAttribute("class")||"")}function hn(t,e){for(var n=cn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function dn(t,e){for(var n=cn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function pn(t){return function(){hn(this,t)}}function mn(t){return function(){dn(this,t)}}function gn(t,e){return function(){(e.apply(this,arguments)?hn:dn)(this,t)}}function yn(){this.textContent=""}function vn(t){return function(){this.textContent=t}}function xn(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function _n(){this.innerHTML=""}function bn(t){return function(){this.innerHTML=t}}function wn(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Mn(){this.nextSibling&&this.parentNode.appendChild(this)}function An(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function En(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===He&&e.documentElement.namespaceURI===He?e.createElement(t):e.createElementNS(n,t)}}function Tn(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Sn(t){var e=Xe(t);return(e.local?Tn:En)(e)}function Cn(){return null}function kn(){var t=this.parentNode;t&&t.removeChild(this)}function Pn(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function On(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ln(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function In(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Rn(t,e,n){var r=tn(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Dn(t,e){return function(){return Rn(this,t,e)}}function Nn(t,e){return function(){return Rn(this,t,e.apply(this,arguments))}}fn.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Fn=[null];function jn(t,e){this._groups=t,this._parents=e}function zn(){return new jn([[document.documentElement]],Fn)}jn.prototype=zn.prototype={constructor:jn,select:function(t){"function"!=typeof t&&(t=Ce(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(o=s[c])&&(a=t.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),l[c]=a);return new jn(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return ke(t.apply(this,arguments))}}(t):Oe(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,l=0;l<u;++l)(a=s[l])&&(r.push(t.call(a,a.__data__,l,s)),i.push(a));return new jn(r,i)},selectChild:function(t){return this.select(null==t?De:function(t){return function(){return Re.call(this.children,t)}}("function"==typeof t?t:Ie(t)))},selectChildren:function(t){return this.selectAll(null==t?Fe:function(t){return function(){return Ne.call(this.children,t)}}("function"==typeof t?t:Ie(t)))},filter:function(t){"function"!=typeof t&&(t=Le(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&u.push(o);return new jn(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,Ve);var n=e?Be:Ge,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],f=i[l],h=f.length,d=qe(t.call(c,c&&c.__data__,l,r)),p=d.length,m=s[l]=new Array(p),g=a[l]=new Array(p);n(c,f,m,g,u[l]=new Array(h),d,e);for(var y,v,x=0,_=0;x<p;++x)if(y=m[x]){for(x>=_&&(_=x+1);!(v=g[_])&&++_<p;);y._next=v||null}}return(a=new jn(a,r))._enter=s,a._exit=u,a},enter:function(){return new jn(this._enter||this._groups.map(je),this._parents)},exit:function(){return new jn(this._exit||this._groups.map(je),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),u=0;u<a;++u)for(var l,c=n[u],f=r[u],h=c.length,d=s[u]=new Array(h),p=0;p<h;++p)(l=c[p]||f[p])&&(d[p]=l);for(;u<i;++u)s[u]=n[u];return new jn(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Ue);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,l=i[o]=new Array(u),c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(e)}return new jn(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=Xe(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?Qe:Ke:"function"==typeof e?n.local?Je:Ze:n.local?$e:Ye)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?en:"function"==typeof e?rn:nn)(t,e,null==n?"":n)):on(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?an:"function"==typeof e?un:sn)(t,e)):this.node()[t]},classed:function(t,e){var n=ln(t+"");if(arguments.length<2){for(var r=cn(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?gn:e?pn:mn)(n,e))},text:function(t){return arguments.length?this.each(null==t?yn:("function"==typeof t?xn:vn)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?_n:("function"==typeof t?wn:bn)(t)):this.node().innerHTML},raise:function(){return this.each(Mn)},lower:function(){return this.each(An)},append:function(t){var e="function"==typeof t?t:Sn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:Sn(t),r=null==e?Cn:"function"==typeof e?e:Ce(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(kn)},clone:function(t){return this.select(t?On:Pn)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?In:Ln,r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?Nn:Dn)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};var Gn=zn;function Bn(t){return"string"==typeof t?new jn([[document.querySelector(t)]],[document.documentElement]):new jn([[t]],Fn)}const Vn={passive:!1},qn={capture:!0,passive:!1};function Un(t){t.stopImmediatePropagation()}function Hn(t){t.preventDefault(),t.stopImmediatePropagation()}function Wn(t){var e=t.document.documentElement,n=Bn(t).on("dragstart.drag",Hn,qn);"onselectstart"in e?n.on("selectstart.drag",Hn,qn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Xn(t,e){var n=t.document.documentElement,r=Bn(t).on("dragstart.drag",null);e&&(r.on("click.drag",Hn,qn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Kn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Qn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Yn(){}var $n=.7,Zn=1/$n,Jn="\\s*([+-]?\\d+)\\s*",tr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",er="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nr=/^#([0-9a-f]{3,8})$/,rr=new RegExp(`^rgb\\(${Jn},${Jn},${Jn}\\)$`),ir=new RegExp(`^rgb\\(${er},${er},${er}\\)$`),or=new RegExp(`^rgba\\(${Jn},${Jn},${Jn},${tr}\\)$`),ar=new RegExp(`^rgba\\(${er},${er},${er},${tr}\\)$`),sr=new RegExp(`^hsl\\(${tr},${er},${er}\\)$`),ur=new RegExp(`^hsla\\(${tr},${er},${er},${tr}\\)$`),lr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function cr(){return this.rgb().formatHex()}function fr(){return this.rgb().formatRgb()}function hr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=nr.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?dr(e):3===n?new yr(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?pr(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?pr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=rr.exec(t))?new yr(e[1],e[2],e[3],1):(e=ir.exec(t))?new yr(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=or.exec(t))?pr(e[1],e[2],e[3],e[4]):(e=ar.exec(t))?pr(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=sr.exec(t))?Mr(e[1],e[2]/100,e[3]/100,1):(e=ur.exec(t))?Mr(e[1],e[2]/100,e[3]/100,e[4]):lr.hasOwnProperty(t)?dr(lr[t]):"transparent"===t?new yr(NaN,NaN,NaN,0):null}function dr(t){return new yr(t>>16&255,t>>8&255,255&t,1)}function pr(t,e,n,r){return r<=0&&(t=e=n=NaN),new yr(t,e,n,r)}function mr(t){return t instanceof Yn||(t=hr(t)),t?new yr((t=t.rgb()).r,t.g,t.b,t.opacity):new yr}function gr(t,e,n,r){return 1===arguments.length?mr(t):new yr(t,e,n,null==r?1:r)}function yr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function vr(){return`#${wr(this.r)}${wr(this.g)}${wr(this.b)}`}function xr(){const t=_r(this.opacity);return`${1===t?"rgb(":"rgba("}${br(this.r)}, ${br(this.g)}, ${br(this.b)}${1===t?")":`, ${t})`}`}function _r(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function br(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function wr(t){return((t=br(t))<16?"0":"")+t.toString(16)}function Mr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Tr(t,e,n,r)}function Ar(t){if(t instanceof Tr)return new Tr(t.h,t.s,t.l,t.opacity);if(t instanceof Yn||(t=hr(t)),!t)return new Tr;if(t instanceof Tr)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new Tr(a,s,u,t.opacity)}function Er(t,e,n,r){return 1===arguments.length?Ar(t):new Tr(t,e,n,null==r?1:r)}function Tr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Sr(t){return(t=(t||0)%360)<0?t+360:t}function Cr(t){return Math.max(0,Math.min(1,t||0))}function kr(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Pr(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function Or(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return Pr((n-r/e)*e,a,i,o,s)}}function Lr(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return Pr((n-r/e)*e,i,o,a,s)}}Kn(Yn,hr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:cr,formatHex:cr,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Ar(this).formatHsl()},formatRgb:fr,toString:fr}),Kn(yr,gr,Qn(Yn,{brighter(t){return t=null==t?Zn:Math.pow(Zn,t),new yr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?$n:Math.pow($n,t),new yr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new yr(br(this.r),br(this.g),br(this.b),_r(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vr,formatHex:vr,formatHex8:function(){return`#${wr(this.r)}${wr(this.g)}${wr(this.b)}${wr(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:xr,toString:xr})),Kn(Tr,Er,Qn(Yn,{brighter(t){return t=null==t?Zn:Math.pow(Zn,t),new Tr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?$n:Math.pow($n,t),new Tr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new yr(kr(t>=240?t-240:t+120,i,r),kr(t,i,r),kr(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Tr(Sr(this.h),Cr(this.s),Cr(this.l),_r(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=_r(this.opacity);return`${1===t?"hsl(":"hsla("}${Sr(this.h)}, ${100*Cr(this.s)}%, ${100*Cr(this.l)}%${1===t?")":`, ${t})`}`}}));var Ir=t=>()=>t;function Rr(t,e){return function(n){return t+n*e}}function Dr(t,e){var n=e-t;return n?Rr(t,n>180||n<-180?n-360*Math.round(n/360):n):Ir(isNaN(t)?e:t)}function Nr(t){return 1===(t=+t)?Fr:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Ir(isNaN(e)?n:e)}}function Fr(t,e){var n=e-t;return n?Rr(t,n):Ir(isNaN(t)?e:t)}var jr=function t(e){var n=Nr(e);function r(t,e){var r=n((t=gr(t)).r,(e=gr(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=Fr(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function zr(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=gr(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}var Gr=zr(Or),Br=zr(Lr);function Vr(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function qr(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ur(t,e){return(qr(e)?Vr:Hr)(t,e)}function Hr(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Zr(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function Wr(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Xr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Kr(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Zr(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var Qr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yr=new RegExp(Qr.source,"g");function $r(t,e){var n,r,i,o=Qr.lastIndex=Yr.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=Qr.exec(t))&&(r=Yr.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:Xr(n,r)})),o=Yr.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}function Zr(t,e){var n,r=typeof e;return null==e||"boolean"===r?Ir(e):("number"===r?Xr:"string"===r?(n=hr(e))?(e=n,jr):$r:e instanceof hr?jr:e instanceof Date?Wr:qr(e)?Vr:Array.isArray(e)?Hr:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Kr:Xr)(t,e)}function Jr(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ti(t,e){if(t=Jr(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}var ei,ni,ri=0,ii=0,oi=0,ai=0,si=0,ui=0,li="object"==typeof performance&&performance.now?performance:Date,ci="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function fi(){return si||(ci(hi),si=li.now()+ui)}function hi(){si=0}function di(){this._call=this._time=this._next=null}function pi(t,e,n){var r=new di;return r.restart(t,e,n),r}function mi(){fi(),++ri;for(var t,e=ei;e;)(t=si-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ri}function gi(){si=(ai=li.now())+ui,ri=ii=0;try{mi()}finally{ri=0,function(){var t,e,n=ei,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:ei=e);ni=t,vi(r)}(),si=0}}function yi(){var t=li.now(),e=t-ai;e>1e3&&(ui-=e,ai=t)}function vi(t){ri||(ii&&(ii=clearTimeout(ii)),t-si>24?(t<1/0&&(ii=setTimeout(gi,t-li.now()-ui)),oi&&(oi=clearInterval(oi))):(oi||(ai=li.now(),oi=setInterval(yi,1e3)),ri=1,ci(gi)))}function xi(t,e,n){var r=new di;return e=null==e?0:+e,r.restart(n=>{r.stop(),t(n+e)},e,n),r}di.prototype=pi.prototype={constructor:di,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?fi():+n)+(null==e?0:+e),this._next||ni===this||(ni?ni._next=this:ei=this,ni=this),this._call=t,this._time=n,vi()},stop:function(){this._call&&(this._call=null,this._time=1/0,vi())}};var _i=Te("start","end","cancel","interrupt"),bi=[],wi=1,Mi=2,Ai=5,Ei=6;function Ti(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(t){n.state=wi,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}function a(o){var l,c,f,h;if(n.state!==wi)return u();for(l in i)if((h=i[l]).name===n.name){if(3===h.state)return xi(a);4===h.state?(h.state=Ei,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[l]):+l<e&&(h.state=Ei,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[l])}if(xi(function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(o))}),n.state=Mi,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Mi){for(n.state=3,r=new Array(f=n.tween.length),l=0,c=-1;l<f;++l)(h=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=h);r.length=c+1}}function s(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(u),n.state=Ai,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);n.state===Ai&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){for(var r in n.state=Ei,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=pi(o,0,n.time)}(t,n,{name:e,index:r,group:i,on:_i,tween:bi,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Si(t,e){var n=ki(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Ci(t,e){var n=ki(t,e);if(n.state>3)throw new Error("too late; already running");return n}function ki(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Pi(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>Mi&&n.state<Ai,n.state=Ei,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}}var Oi,Li=180/Math.PI,Ii={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ri(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Li,skewX:Math.atan(u)*Li,scaleX:a,scaleY:s}}function Di(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],u=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:Xr(t,i)},{i:u-2,x:Xr(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Xr(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Xr(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,u),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:Xr(t,n)},{i:s-2,x:Xr(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var Ni=Di(function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ii:Ri(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),Fi=Di(function(t){return null==t?Ii:(Oi||(Oi=document.createElementNS("http://www.w3.org/2000/svg","g")),Oi.setAttribute("transform",t),(t=Oi.transform.baseVal.consolidate())?Ri((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Ii)},", ",")",")");function ji(t,e){var n,r;return function(){var i=Ci(this,t),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function zi(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=Ci(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=s;break}u===l&&i.push(s)}o.tween=i}}function Gi(t,e,n){var r=t._id;return t.each(function(){var t=Ci(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return ki(t,r).value[e]}}function Bi(t,e){var n;return("number"==typeof e?Xr:e instanceof hr?jr:(n=hr(e))?(e=n,jr):$r)(t,e)}function Vi(t){return function(){this.removeAttribute(t)}}function qi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ui(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}}function Hi(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}function Wi(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttribute(t))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttribute(t)}}function Xi(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttributeNS(t.space,t.local)}}function Ki(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function Qi(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function Yi(t,e){return function(){Si(this,t).delay=+e.apply(this,arguments)}}function $i(t,e){return e=+e,function(){Si(this,t).delay=e}}function Zi(t,e){return function(){Ci(this,t).duration=+e.apply(this,arguments)}}function Ji(t,e){return e=+e,function(){Ci(this,t).duration=e}}var to=Gn.prototype.constructor;function eo(t){return function(){this.style.removeProperty(t)}}var no=0;function ro(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function io(t){return Gn().transition(t)}function oo(){return++no}var ao=Gn.prototype;function so(t){return t*t*t}function uo(t){return--t*t*t+1}function lo(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}ro.prototype=io.prototype={constructor:ro,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Ce(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,l=r[a],c=l.length,f=o[a]=new Array(c),h=0;h<c;++h)(s=l[h])&&(u=t.call(s,s.__data__,h,l))&&("__data__"in s&&(u.__data__=s.__data__),f[h]=u,Ti(f[h],e,n,h,f,ki(s,n)));return new ro(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Oe(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,l=r[s],c=l.length,f=0;f<c;++f)if(u=l[f]){for(var h,d=t.call(u,u.__data__,f,l),p=ki(u,n),m=0,g=d.length;m<g;++m)(h=d[m])&&Ti(h,e,n,m,d,p);o.push(d),a.push(u)}return new ro(o,a,e,n)},selectChild:ao.selectChild,selectChildren:ao.selectChildren,filter:function(t){"function"!=typeof t&&(t=Le(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&u.push(o);return new ro(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=e[s],c=n[s],f=l.length,h=a[s]=new Array(f),d=0;d<f;++d)(u=l[d]||c[d])&&(h[d]=u);for(;s<r;++s)a[s]=e[s];return new ro(a,this._parents,this._name,this._id)},selection:function(){return new to(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=oo(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)if(a=s[l]){var c=ki(a,e);Ti(a,t,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ro(r,this._parents,t,n)},call:ao.call,nodes:ao.nodes,node:ao.node,size:ao.size,empty:ao.empty,each:ao.each,on:function(t,e){var n=this._id;return arguments.length<2?ki(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}(e)?Si:Ci;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}(n,t,e))},attr:function(t,e){var n=Xe(t),r="transform"===n?Fi:Bi;return this.attrTween(t,"function"==typeof e?(n.local?Xi:Wi)(n,r,Gi(this,"attr."+t,e)):null==e?(n.local?qi:Vi)(n):(n.local?Hi:Ui)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Xe(t);return this.tween(n,(r.local?Ki:Qi)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Ni:Bi;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=on(this,t),a=(this.style.removeProperty(t),on(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,eo(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var a=on(this,t),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(t),u=s=on(this,t)),a===u?null:a===r&&u===i?o:(i=u,o=e(r=a,s))}}(t,r,Gi(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,s="end."+a;return function(){var u=Ci(this,t),l=u.on,c=null==u.value[a]?o||(o=eo(e)):void 0;l===n&&i===c||(r=(n=l).copy()).on(s,i=c),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var a=on(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,o,n)),r}return o._value=e,o}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Gi(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=ki(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?ji:zi)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Yi:$i)(e,t)):ki(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Zi:Ji)(e,t)):ki(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Ci(this,t).ease=e}}(e,t)):ki(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Ci(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},u={value:function(){0===--i&&o()}};n.each(function(){var n=Ci(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),n.on=e}),0===i&&o()})},[Symbol.iterator]:ao[Symbol.iterator]};var co={time:null,delay:0,duration:250,ease:lo};function fo(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}Gn.prototype.interrupt=function(t){return this.each(function(){Pi(this,t)})},Gn.prototype.transition=function(t){var e,n;t instanceof ro?(e=t._id,t=t._name):(e=oo(),(n=co).time=fi(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)(a=s[l])&&Ti(a,t,e,l,s,n||fo(a,e));return new ro(r,this._parents,t,e)};var ho=[null];function po(t,e){var n,r,i=t.__transition;if(i)for(r in e=null==e?null:e+"",i)if((n=i[r]).state>wi&&n.name===e)return new ro([[t]],ho,e,+r);return null}var mo=t=>()=>t;function go(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function yo(t){t.preventDefault(),t.stopImmediatePropagation()}var vo={name:"drag"},xo={name:"space"},_o={name:"handle"},bo={name:"center"};const{abs:wo,max:Mo,min:Ao}=Math;function Eo(t){return[+t[0],+t[1]]}function To(t){return[Eo(t[0]),Eo(t[1])]}var So={name:"x",handles:["w","e"].map(Do),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Co={name:"y",handles:["n","s"].map(Do),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},ko={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Do),input:function(t){return null==t?null:To(t)},output:function(t){return t}},Po={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Oo={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Lo={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Io={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Ro={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Do(t){return{type:t}}function No(t){return!t.ctrlKey&&!t.button}function Fo(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function jo(){return navigator.maxTouchPoints||"ontouchstart"in this}function zo(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Go(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function Bo(){return Uo(So)}function Vo(){return Uo(Co)}function qo(){return Uo(ko)}function Uo(t){var e,n=Fo,r=No,i=jo,o=!0,a=Te("start","brush","end"),s=6;function u(e){var n=e.property("__brush",m).selectAll(".overlay").data([Do("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Po.overlay).merge(n).each(function(){var t=zo(this).extent;Bn(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),e.selectAll(".selection").data([Do("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Po.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,function(t){return t.type});r.exit().remove(),r.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return Po[t.type]}),e.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(i).on("touchstart.brush",h).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(){var t=Bn(this),e=zo(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-s/2:e[0][0]-s/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-s/2:e[0][1]-s/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+s:s}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+s:s})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(t,e,n){var r=t.__brush.emitter;return!r||n&&r.clean?new f(t,e,n):r}function f(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function h(n){if((!e||n.touches)&&r.apply(this,arguments)){var i,a,s,u,f,h,d,p,m,g,y,v=this,x=n.target.__data__.type,_="selection"===(o&&n.metaKey?x="overlay":x)?vo:o&&n.altKey?bo:_o,b=t===Co?null:Io[x],w=t===So?null:Ro[x],M=zo(v),A=M.extent,E=M.selection,T=A[0][0],S=A[0][1],C=A[1][0],k=A[1][1],P=0,O=0,L=b&&w&&o&&n.shiftKey,I=Array.from(n.touches||[n],t=>{const e=t.identifier;return(t=ti(t,v)).point0=t.slice(),t.identifier=e,t});Pi(v);var R=c(v,arguments,!0).beforestart();if("overlay"===x){E&&(m=!0);const e=[I[0],I[1]||I[0]];M.selection=E=[[i=t===Co?T:Ao(e[0][0],e[1][0]),s=t===So?S:Ao(e[0][1],e[1][1])],[f=t===Co?C:Mo(e[0][0],e[1][0]),d=t===So?k:Mo(e[0][1],e[1][1])]],I.length>1&&z(n)}else i=E[0][0],s=E[0][1],f=E[1][0],d=E[1][1];a=i,u=s,h=f,p=d;var D=Bn(v).attr("pointer-events","none"),N=D.selectAll(".overlay").attr("cursor",Po[x]);if(n.touches)R.moved=j,R.ended=G;else{var F=Bn(n.view).on("mousemove.brush",j,!0).on("mouseup.brush",G,!0);o&&F.on("keydown.brush",function(t){switch(t.keyCode){case 16:L=b&&w;break;case 18:_===_o&&(b&&(f=h-P*b,i=a+P*b),w&&(d=p-O*w,s=u+O*w),_=bo,z(t));break;case 32:_!==_o&&_!==bo||(b<0?f=h-P:b>0&&(i=a-P),w<0?d=p-O:w>0&&(s=u-O),_=xo,N.attr("cursor",Po.selection),z(t));break;default:return}yo(t)},!0).on("keyup.brush",function(t){switch(t.keyCode){case 16:L&&(g=y=L=!1,z(t));break;case 18:_===bo&&(b<0?f=h:b>0&&(i=a),w<0?d=p:w>0&&(s=u),_=_o,z(t));break;case 32:_===xo&&(t.altKey?(b&&(f=h-P*b,i=a+P*b),w&&(d=p-O*w,s=u+O*w),_=bo):(b<0?f=h:b>0&&(i=a),w<0?d=p:w>0&&(s=u),_=_o),N.attr("cursor",Po[x]),z(t));break;default:return}yo(t)},!0),Wn(n.view)}l.call(v),R.start(n,_.name)}function j(t){for(const e of t.changedTouches||[t])for(const t of I)t.identifier===e.identifier&&(t.cur=ti(e,v));if(L&&!g&&!y&&1===I.length){const t=I[0];wo(t.cur[0]-t[0])>wo(t.cur[1]-t[1])?y=!0:g=!0}for(const t of I)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);m=!0,yo(t),z(t)}function z(t){const e=I[0],n=e.point0;var r;switch(P=e[0]-n[0],O=e[1]-n[1],_){case xo:case vo:b&&(P=Mo(T-i,Ao(C-f,P)),a=i+P,h=f+P),w&&(O=Mo(S-s,Ao(k-d,O)),u=s+O,p=d+O);break;case _o:I[1]?(b&&(a=Mo(T,Ao(C,I[0][0])),h=Mo(T,Ao(C,I[1][0])),b=1),w&&(u=Mo(S,Ao(k,I[0][1])),p=Mo(S,Ao(k,I[1][1])),w=1)):(b<0?(P=Mo(T-i,Ao(C-i,P)),a=i+P,h=f):b>0&&(P=Mo(T-f,Ao(C-f,P)),a=i,h=f+P),w<0?(O=Mo(S-s,Ao(k-s,O)),u=s+O,p=d):w>0&&(O=Mo(S-d,Ao(k-d,O)),u=s,p=d+O));break;case bo:b&&(a=Mo(T,Ao(C,i-P*b)),h=Mo(T,Ao(C,f+P*b))),w&&(u=Mo(S,Ao(k,s-O*w)),p=Mo(S,Ao(k,d+O*w)))}h<a&&(b*=-1,r=i,i=f,f=r,r=a,a=h,h=r,x in Oo&&N.attr("cursor",Po[x=Oo[x]])),p<u&&(w*=-1,r=s,s=d,d=r,r=u,u=p,p=r,x in Lo&&N.attr("cursor",Po[x=Lo[x]])),M.selection&&(E=M.selection),g&&(a=E[0][0],h=E[1][0]),y&&(u=E[0][1],p=E[1][1]),E[0][0]===a&&E[0][1]===u&&E[1][0]===h&&E[1][1]===p||(M.selection=[[a,u],[h,p]],l.call(v),R.brush(t,_.name))}function G(t){if(function(t){t.stopImmediatePropagation()}(t),t.touches){if(t.touches.length)return;e&&clearTimeout(e),e=setTimeout(function(){e=null},500)}else Xn(t.view,m),F.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);D.attr("pointer-events","all"),N.attr("cursor",Po.overlay),M.selection&&(E=M.selection),function(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}(E)&&(M.selection=null,l.call(v)),R.end(t,_.name)}}function d(t){c(this,arguments).moved(t)}function p(t){c(this,arguments).ended(t)}function m(){var e=this.__brush||{selection:null};return e.extent=To(n.apply(this,arguments)),e.dim=t,e}return u.move=function(e,n,r){e.tween?e.on("start.brush",function(t){c(this,arguments).beforestart().start(t)}).on("interrupt.brush end.brush",function(t){c(this,arguments).end(t)}).tween("brush",function(){var e=this,r=e.__brush,i=c(e,arguments),o=r.selection,a=t.input("function"==typeof n?n.apply(this,arguments):n,r.extent),s=Zr(o,a);function u(t){r.selection=1===t&&null===a?null:s(t),l.call(e),i.brush()}return null!==o&&null!==a?u:u(1)}):e.each(function(){var e=this,i=arguments,o=e.__brush,a=t.input("function"==typeof n?n.apply(e,i):n,o.extent),s=c(e,i).beforestart();Pi(e),o.selection=null===a?null:a,l.call(e),s.start(r).brush(r).end(r)})},u.clear=function(t,e){u.move(t,null,e)},f.prototype={beforestart:function(){return 1===++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0===--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(e,n,r){var i=Bn(this.that).datum();a.call(e,this.that,new go(e,{sourceEvent:n,target:u,selection:t.output(this.state.selection),mode:r,dispatch:a}),i)}},u.extent=function(t){return arguments.length?(n="function"==typeof t?t:mo(To(t)),u):n},u.filter=function(t){return arguments.length?(r="function"==typeof t?t:mo(!!t),u):r},u.touchable=function(t){return arguments.length?(i="function"==typeof t?t:mo(!!t),u):i},u.handleSize=function(t){return arguments.length?(s=+t,u):s},u.keyModifiers=function(t){return arguments.length?(o=!!t,u):o},u.on=function(){var t=a.on.apply(a,arguments);return t===a?u:t},u}var Ho=Math.abs,Wo=Math.cos,Xo=Math.sin,Ko=Math.PI,Qo=Ko/2,Yo=2*Ko,$o=Math.max,Zo=1e-12;function Jo(t,e){return Array.from({length:e-t},(e,n)=>t+n)}function ta(){return ra(!1,!1)}function ea(){return ra(!1,!0)}function na(){return ra(!0,!1)}function ra(t,e){var n=0,r=null,i=null,o=null;function a(a){var s,u=a.length,l=new Array(u),c=Jo(0,u),f=new Array(u*u),h=new Array(u),d=0;a=Float64Array.from({length:u*u},e?(t,e)=>a[e%u][e/u|0]:(t,e)=>a[e/u|0][e%u]);for(let e=0;e<u;++e){let n=0;for(let r=0;r<u;++r)n+=a[e*u+r]+t*a[r*u+e];d+=l[e]=n}s=(d=$o(0,Yo-n*u)/d)?n:Yo/u;{let e=0;r&&c.sort((t,e)=>r(l[t],l[e]));for(const n of c){const r=e;if(t){const t=Jo(1+~u,u).filter(t=>t<0?a[~t*u+n]:a[n*u+t]);i&&t.sort((t,e)=>i(t<0?-a[~t*u+n]:a[n*u+t],e<0?-a[~e*u+n]:a[n*u+e]));for(const r of t)if(r<0){(f[~r*u+n]||(f[~r*u+n]={source:null,target:null})).target={index:n,startAngle:e,endAngle:e+=a[~r*u+n]*d,value:a[~r*u+n]}}else{(f[n*u+r]||(f[n*u+r]={source:null,target:null})).source={index:n,startAngle:e,endAngle:e+=a[n*u+r]*d,value:a[n*u+r]}}h[n]={index:n,startAngle:r,endAngle:e,value:l[n]}}else{const t=Jo(0,u).filter(t=>a[n*u+t]||a[t*u+n]);i&&t.sort((t,e)=>i(a[n*u+t],a[n*u+e]));for(const r of t){let t;if(n<r?(t=f[n*u+r]||(f[n*u+r]={source:null,target:null}),t.source={index:n,startAngle:e,endAngle:e+=a[n*u+r]*d,value:a[n*u+r]}):(t=f[r*u+n]||(f[r*u+n]={source:null,target:null}),t.target={index:n,startAngle:e,endAngle:e+=a[n*u+r]*d,value:a[n*u+r]},n===r&&(t.source=t.target)),t.source&&t.target&&t.source.value<t.target.value){const e=t.source;t.source=t.target,t.target=e}}h[n]={index:n,startAngle:r,endAngle:e,value:l[n]}}e+=s}}return(f=Object.values(f)).groups=h,o?f.sort(o):f}return a.padAngle=function(t){return arguments.length?(n=$o(0,t),a):n},a.sortGroups=function(t){return arguments.length?(r=t,a):r},a.sortSubgroups=function(t){return arguments.length?(i=t,a):i},a.sortChords=function(t){return arguments.length?(null==t?o=null:(e=t,o=function(t,n){return e(t.source.value+t.target.value,n.source.value+n.target.value)})._=t,a):o&&o._;var e},a}const ia=Math.PI,oa=2*ia,aa=1e-6,sa=oa-aa;function ua(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class la{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?ua:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return ua;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,r){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,e,n,r,i,o){this._append`C${+t},${+e},${+n},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,s=n-t,u=r-e,l=o-t,c=a-e,f=l*l+c*c;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(f>aa)if(Math.abs(c*s-u*l)>aa&&i){let h=n-o,d=r-a,p=s*s+u*u,m=h*h+d*d,g=Math.sqrt(p),y=Math.sqrt(f),v=i*Math.tan((ia-Math.acos((p+f-m)/(2*g*y)))/2),x=v/y,_=v/g;Math.abs(x-1)>aa&&this._append`L${t+x*l},${e+x*c}`,this._append`A${i},${i},0,0,${+(c*h>l*d)},${this._x1=t+_*s},${this._y1=e+_*u}`}else this._append`L${this._x1=t},${this._y1=e}`;else;}arc(t,e,n,r,i,o){if(t=+t,e=+e,o=!!o,(n=+n)<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(r),s=n*Math.sin(r),u=t+a,l=e+s,c=1^o,f=o?r-i:i-r;null===this._x1?this._append`M${u},${l}`:(Math.abs(this._x1-u)>aa||Math.abs(this._y1-l)>aa)&&this._append`L${u},${l}`,n&&(f<0&&(f=f%oa+oa),f>sa?this._append`A${n},${n},0,1,${c},${t-a},${e-s}A${n},${n},0,1,${c},${this._x1=u},${this._y1=l}`:f>aa&&this._append`A${n},${n},0,${+(f>=ia)},${c},${this._x1=t+n*Math.cos(i)},${this._y1=e+n*Math.sin(i)}`)}rect(t,e,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function ca(){return new la}function fa(t=3){return new la(+t)}ca.prototype=la.prototype;var ha=Array.prototype.slice;function da(t){return function(){return t}}function pa(t){return t.source}function ma(t){return t.target}function ga(t){return t.radius}function ya(t){return t.startAngle}function va(t){return t.endAngle}function xa(){return 0}function _a(){return 10}function ba(t){var e=pa,n=ma,r=ga,i=ga,o=ya,a=va,s=xa,u=null;function l(){var l,c=e.apply(this,arguments),f=n.apply(this,arguments),h=s.apply(this,arguments)/2,d=ha.call(arguments),p=+r.apply(this,(d[0]=c,d)),m=o.apply(this,d)-Qo,g=a.apply(this,d)-Qo,y=+i.apply(this,(d[0]=f,d)),v=o.apply(this,d)-Qo,x=a.apply(this,d)-Qo;if(u||(u=l=ca()),h>Zo&&(Ho(g-m)>2*h+Zo?g>m?(m+=h,g-=h):(m-=h,g+=h):m=g=(m+g)/2,Ho(x-v)>2*h+Zo?x>v?(v+=h,x-=h):(v-=h,x+=h):v=x=(v+x)/2),u.moveTo(p*Wo(m),p*Xo(m)),u.arc(0,0,p,m,g),m!==v||g!==x)if(t){var _=y-+t.apply(this,arguments),b=(v+x)/2;u.quadraticCurveTo(0,0,_*Wo(v),_*Xo(v)),u.lineTo(y*Wo(b),y*Xo(b)),u.lineTo(_*Wo(x),_*Xo(x))}else u.quadraticCurveTo(0,0,y*Wo(v),y*Xo(v)),u.arc(0,0,y,v,x);if(u.quadraticCurveTo(0,0,p*Wo(m),p*Xo(m)),u.closePath(),l)return u=null,l+""||null}return t&&(l.headRadius=function(e){return arguments.length?(t="function"==typeof e?e:da(+e),l):t}),l.radius=function(t){return arguments.length?(r=i="function"==typeof t?t:da(+t),l):r},l.sourceRadius=function(t){return arguments.length?(r="function"==typeof t?t:da(+t),l):r},l.targetRadius=function(t){return arguments.length?(i="function"==typeof t?t:da(+t),l):i},l.startAngle=function(t){return arguments.length?(o="function"==typeof t?t:da(+t),l):o},l.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:da(+t),l):a},l.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:da(+t),l):s},l.source=function(t){return arguments.length?(e=t,l):e},l.target=function(t){return arguments.length?(n=t,l):n},l.context=function(t){return arguments.length?(u=null==t?null:t,l):u},l}function wa(){return ba()}function Ma(){return ba(_a)}const Aa=Math.PI/180,Ea=180/Math.PI,Ta=.96422,Sa=1,Ca=.82521,ka=4/29,Pa=6/29,Oa=3*Pa*Pa,La=Pa*Pa*Pa;function Ia(t){if(t instanceof Na)return new Na(t.l,t.a,t.b,t.opacity);if(t instanceof Ua)return Ha(t);t instanceof yr||(t=mr(t));var e,n,r=Ga(t.r),i=Ga(t.g),o=Ga(t.b),a=Fa((.2225045*r+.7168786*i+.0606169*o)/Sa);return r===i&&i===o?e=n=a:(e=Fa((.4360747*r+.3850649*i+.1430804*o)/Ta),n=Fa((.0139322*r+.0971045*i+.7141733*o)/Ca)),new Na(116*a-16,500*(e-a),200*(a-n),t.opacity)}function Ra(t,e){return new Na(t,0,0,null==e?1:e)}function Da(t,e,n,r){return 1===arguments.length?Ia(t):new Na(t,e,n,null==r?1:r)}function Na(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Fa(t){return t>La?Math.pow(t,1/3):t/Oa+ka}function ja(t){return t>Pa?t*t*t:Oa*(t-ka)}function za(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ga(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ba(t){if(t instanceof Ua)return new Ua(t.h,t.c,t.l,t.opacity);if(t instanceof Na||(t=Ia(t)),0===t.a&&0===t.b)return new Ua(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Ea;return new Ua(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Va(t,e,n,r){return 1===arguments.length?Ba(t):new Ua(n,e,t,null==r?1:r)}function qa(t,e,n,r){return 1===arguments.length?Ba(t):new Ua(t,e,n,null==r?1:r)}function Ua(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Ha(t){if(isNaN(t.h))return new Na(t.l,0,0,t.opacity);var e=t.h*Aa;return new Na(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Kn(Na,Da,Qn(Yn,{brighter(t){return new Na(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new Na(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new yr(za(3.1338561*(e=Ta*ja(e))-1.6168667*(t=Sa*ja(t))-.4906146*(n=Ca*ja(n))),za(-.9787684*e+1.9161415*t+.033454*n),za(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Kn(Ua,qa,Qn(Yn,{brighter(t){return new Ua(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker(t){return new Ua(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb(){return Ha(this).rgb()}}));var Wa=-.14861,Xa=1.78277,Ka=-.29227,Qa=-.90649,Ya=1.97294,$a=Ya*Qa,Za=Ya*Xa,Ja=Xa*Ka-Qa*Wa;function ts(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof es)return new es(t.h,t.s,t.l,t.opacity);t instanceof yr||(t=mr(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Ja*r+$a*e-Za*n)/(Ja+$a-Za),o=r-i,a=(Ya*(n-i)-Ka*o)/Qa,s=Math.sqrt(a*a+o*o)/(Ya*i*(1-i)),u=s?Math.atan2(a,o)*Ea-120:NaN;return new es(u<0?u+360:u,s,i,t.opacity)}(t):new es(t,e,n,null==r?1:r)}function es(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Kn(es,ts,Qn(Yn,{brighter(t){return t=null==t?Zn:Math.pow(Zn,t),new es(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?$n:Math.pow($n,t),new es(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Aa,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new yr(255*(e+n*(Wa*r+Xa*i)),255*(e+n*(Ka*r+Qa*i)),255*(e+n*(Ya*r)),this.opacity)}}));var ns=Array.prototype.slice;function rs(t,e){return t-e}var is=t=>()=>t;function os(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=as(t,e[r]))return n;return 0}function as(t,e){for(var n=e[0],r=e[1],i=-1,o=0,a=t.length,s=a-1;o<a;s=o++){var u=t[o],l=u[0],c=u[1],f=t[s],h=f[0],d=f[1];if(ss(u,f,e))return 0;c>r!=d>r&&n<(h-l)*(r-c)/(d-c)+l&&(i=-i)}return i}function ss(t,e,n){var r,i,o,a;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(i=t[r=+(t[0]===e[0])],o=n[r],a=e[r],i<=o&&o<=a||a<=o&&o<=i)}function us(){}var ls=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function cs(){var t=1,e=1,n=ht,r=s;function i(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(rs);else{const n=C(t,fs);for(e=ut(...ft(n[0],n[1],e),e);e[e.length-1]>=n[1];)e.pop();for(;e[1]<n[0];)e.shift()}return e.map(e=>o(t,e))}function o(n,i){const o=null==i?NaN:+i;if(isNaN(o))throw new Error(`invalid value: ${i}`);var s=[],u=[];return function(n,r,i){var o,s,u,l,c,f,h=new Array,d=new Array;o=s=-1,l=hs(n[0],r),ls[l<<1].forEach(p);for(;++o<t-1;)u=l,l=hs(n[o+1],r),ls[u|l<<1].forEach(p);ls[l|0].forEach(p);for(;++s<e-1;){for(o=-1,l=hs(n[s*t+t],r),c=hs(n[s*t],r),ls[l<<1|c<<2].forEach(p);++o<t-1;)u=l,l=hs(n[s*t+t+o+1],r),f=c,c=hs(n[s*t+o+1],r),ls[u|l<<1|c<<2|f<<3].forEach(p);ls[l|c<<3].forEach(p)}o=-1,c=n[s*t]>=r,ls[c<<2].forEach(p);for(;++o<t-1;)f=c,c=hs(n[s*t+o+1],r),ls[c<<2|f<<3].forEach(p);function p(t){var e,n,r=[t[0][0]+o,t[0][1]+s],u=[t[1][0]+o,t[1][1]+s],l=a(r),c=a(u);(e=d[l])?(n=h[c])?(delete d[e.end],delete h[n.start],e===n?(e.ring.push(u),i(e.ring)):h[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete d[e.end],e.ring.push(u),d[e.end=c]=e):(e=h[c])?(n=d[l])?(delete h[e.start],delete d[n.end],e===n?(e.ring.push(u),i(e.ring)):h[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete h[e.start],e.ring.unshift(r),h[e.start=l]=e):h[l]=d[c]={start:l,end:c,ring:[r,u]}}ls[c<<3].forEach(p)}(n,o,function(t){r(t,n,o),function(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}(t)>0?s.push([t]):u.push(t)}),u.forEach(function(t){for(var e,n=0,r=s.length;n<r;++n)if(-1!==os((e=s[n])[0],t))return void e.push(t)}),{type:"MultiPolygon",value:i,coordinates:s}}function a(e){return 2*e[0]+e[1]*(t+1)*4}function s(n,r,i){n.forEach(function(n){var o=n[0],a=n[1],s=0|o,u=0|a,l=ds(r[u*t+s]);o>0&&o<t&&s===o&&(n[0]=ps(o,ds(r[u*t+s-1]),l,i)),a>0&&a<e&&u===a&&(n[1]=ps(a,ds(r[(u-1)*t+s]),l,i))})}return i.contour=o,i.size=function(n){if(!arguments.length)return[t,e];var r=Math.floor(n[0]),o=Math.floor(n[1]);if(!(r>=0&&o>=0))throw new Error("invalid size");return t=r,e=o,i},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?is(ns.call(t)):is(t),i):n},i.smooth=function(t){return arguments.length?(r=t?s:us,i):r===s},i}function fs(t){return isFinite(t)?t:NaN}function hs(t,e){return null!=t&&+t>=e}function ds(t){return null==t||isNaN(t=+t)?-1/0:t}function ps(t,e,n,r){const i=r-e,o=n-e,a=isFinite(i)||isFinite(o)?i/o:Math.sign(i)/Math.sign(o);return isNaN(a)?t:t+a-.5}function ms(t){return t[0]}function gs(t){return t[1]}function ys(){return 1}function vs(){var t=ms,e=gs,n=ys,r=960,i=500,o=20,a=2,s=3*o,u=r+2*s>>a,l=i+2*s>>a,c=is(20);function f(r){var i=new Float32Array(u*l),c=Math.pow(2,-a),f=-1;for(const o of r){var h=(t(o,++f,r)+s)*c,d=(e(o,f,r)+s)*c,m=+n(o,f,r);if(m&&h>=0&&h<u&&d>=0&&d<l){var g=Math.floor(h),y=Math.floor(d),v=h-g-.5,x=d-y-.5;i[g+y*u]+=(1-v)*(1-x)*m,i[g+1+y*u]+=v*(1-x)*m,i[g+1+(y+1)*u]+=v*x*m,i[g+(y+1)*u]+=(1-v)*x*m}}return p({data:i,width:u,height:l},o*c),i}function h(t){var e=f(t),n=c(e),r=Math.pow(2,2*a);return Array.isArray(n)||(n=ut(Number.MIN_VALUE,pt(e)/r,n)),cs().size([u,l]).thresholds(n.map(t=>t*r))(e).map((t,e)=>(t.value=+n[e],d(t)))}function d(t){return t.coordinates.forEach(m),t}function m(t){t.forEach(g)}function g(t){t.forEach(y)}function y(t){t[0]=t[0]*Math.pow(2,a)-s,t[1]=t[1]*Math.pow(2,a)-s}function v(){return u=r+2*(s=3*o)>>a,l=i+2*s>>a,h}return h.contours=function(t){var e=f(t),n=cs().size([u,l]),r=Math.pow(2,2*a),i=t=>{t=+t;var i=d(n.contour(e,t*r));return i.value=t,i};return Object.defineProperty(i,"max",{get:()=>pt(e)/r}),i},h.x=function(e){return arguments.length?(t="function"==typeof e?e:is(+e),h):t},h.y=function(t){return arguments.length?(e="function"==typeof t?t:is(+t),h):e},h.weight=function(t){return arguments.length?(n="function"==typeof t?t:is(+t),h):n},h.size=function(t){if(!arguments.length)return[r,i];var e=+t[0],n=+t[1];if(!(e>=0&&n>=0))throw new Error("invalid size");return r=e,i=n,v()},h.cellSize=function(t){if(!arguments.length)return 1<<a;if(!((t=+t)>=1))throw new Error("invalid cell size");return a=Math.floor(Math.log(t)/Math.LN2),v()},h.thresholds=function(t){return arguments.length?(c="function"==typeof t?t:Array.isArray(t)?is(ns.call(t)):is(t),h):c},h.bandwidth=function(t){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return o=(Math.sqrt(4*t*t+1)-1)/2,v()},h}const xs=134217729;function _s(t,e,n,r,i){let o,a,s,u,l=e[0],c=r[0],f=0,h=0;c>l==c>-l?(o=l,l=e[++f]):(o=c,c=r[++h]);let d=0;if(f<t&&h<n)for(c>l==c>-l?(a=l+o,s=o-(a-l),l=e[++f]):(a=c+o,s=o-(a-c),c=r[++h]),o=a,0!==s&&(i[d++]=s);f<t&&h<n;)c>l==c>-l?(a=o+l,u=a-o,s=o-(a-u)+(l-u),l=e[++f]):(a=o+c,u=a-o,s=o-(a-u)+(c-u),c=r[++h]),o=a,0!==s&&(i[d++]=s);for(;f<t;)a=o+l,u=a-o,s=o-(a-u)+(l-u),l=e[++f],o=a,0!==s&&(i[d++]=s);for(;h<n;)a=o+c,u=a-o,s=o-(a-u)+(c-u),c=r[++h],o=a,0!==s&&(i[d++]=s);return 0===o&&0!==d||(i[d++]=o),d}function bs(t){return new Float64Array(t)}const ws=bs(4),Ms=bs(8),As=bs(12),Es=bs(16),Ts=bs(4);function Ss(t,e,n,r,i,o){const a=(e-o)*(n-i),s=(t-i)*(r-o),u=a-s,l=Math.abs(a+s);return Math.abs(u)>=33306690738754716e-32*l?u:-function(t,e,n,r,i,o,a){let s,u,l,c,f,h,d,p,m,g,y,v,x,_,b,w,M,A;const E=t-i,T=n-i,S=e-o,C=r-o;_=E*C,h=xs*E,d=h-(h-E),p=E-d,h=xs*C,m=h-(h-C),g=C-m,b=p*g-(_-d*m-p*m-d*g),w=S*T,h=xs*S,d=h-(h-S),p=S-d,h=xs*T,m=h-(h-T),g=T-m,M=p*g-(w-d*m-p*m-d*g),y=b-M,f=b-y,ws[0]=b-(y+f)+(f-M),v=_+y,f=v-_,x=_-(v-f)+(y-f),y=x-w,f=x-y,ws[1]=x-(y+f)+(f-w),A=v+y,f=A-v,ws[2]=v-(A-f)+(y-f),ws[3]=A;let k=function(t,e){let n=e[0];for(let r=1;r<t;r++)n+=e[r];return n}(4,ws),P=22204460492503146e-32*a;if(k>=P||-k>=P)return k;if(f=t-E,s=t-(E+f)+(f-i),f=n-T,l=n-(T+f)+(f-i),f=e-S,u=e-(S+f)+(f-o),f=r-C,c=r-(C+f)+(f-o),0===s&&0===u&&0===l&&0===c)return k;if(P=11093356479670487e-47*a+33306690738754706e-32*Math.abs(k),k+=E*c+C*s-(S*l+T*u),k>=P||-k>=P)return k;_=s*C,h=xs*s,d=h-(h-s),p=s-d,h=xs*C,m=h-(h-C),g=C-m,b=p*g-(_-d*m-p*m-d*g),w=u*T,h=xs*u,d=h-(h-u),p=u-d,h=xs*T,m=h-(h-T),g=T-m,M=p*g-(w-d*m-p*m-d*g),y=b-M,f=b-y,Ts[0]=b-(y+f)+(f-M),v=_+y,f=v-_,x=_-(v-f)+(y-f),y=x-w,f=x-y,Ts[1]=x-(y+f)+(f-w),A=v+y,f=A-v,Ts[2]=v-(A-f)+(y-f),Ts[3]=A;const O=_s(4,ws,4,Ts,Ms);_=E*c,h=xs*E,d=h-(h-E),p=E-d,h=xs*c,m=h-(h-c),g=c-m,b=p*g-(_-d*m-p*m-d*g),w=S*l,h=xs*S,d=h-(h-S),p=S-d,h=xs*l,m=h-(h-l),g=l-m,M=p*g-(w-d*m-p*m-d*g),y=b-M,f=b-y,Ts[0]=b-(y+f)+(f-M),v=_+y,f=v-_,x=_-(v-f)+(y-f),y=x-w,f=x-y,Ts[1]=x-(y+f)+(f-w),A=v+y,f=A-v,Ts[2]=v-(A-f)+(y-f),Ts[3]=A;const L=_s(O,Ms,4,Ts,As);_=s*c,h=xs*s,d=h-(h-s),p=s-d,h=xs*c,m=h-(h-c),g=c-m,b=p*g-(_-d*m-p*m-d*g),w=u*l,h=xs*u,d=h-(h-u),p=u-d,h=xs*l,m=h-(h-l),g=l-m,M=p*g-(w-d*m-p*m-d*g),y=b-M,f=b-y,Ts[0]=b-(y+f)+(f-M),v=_+y,f=v-_,x=_-(v-f)+(y-f),y=x-w,f=x-y,Ts[1]=x-(y+f)+(f-w),A=v+y,f=A-v,Ts[2]=v-(A-f)+(y-f),Ts[3]=A;const I=_s(L,As,4,Ts,Es);return Es[I-1]}(t,e,n,r,i,o,l)}bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(8),bs(8),bs(8),bs(4),bs(8),bs(8),bs(8),bs(12);bs(192),bs(192);bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(8),bs(8),bs(8),bs(8),bs(8),bs(8),bs(8),bs(8),bs(8),bs(4),bs(4),bs(4),bs(8),bs(16),bs(16),bs(16),bs(32),bs(32),bs(48),bs(64);bs(1152),bs(1152);bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(24),bs(24),bs(24),bs(24),bs(24),bs(24),bs(24),bs(24),bs(24),bs(24),bs(1152),bs(1152),bs(1152),bs(1152),bs(1152),bs(2304),bs(2304),bs(3456),bs(5760),bs(8),bs(8),bs(8),bs(16),bs(24),bs(48),bs(48),bs(96),bs(192),bs(384),bs(384),bs(384),bs(768);bs(96),bs(96),bs(96),bs(1152);const Cs=Math.pow(2,-52),ks=new Uint32Array(512);class Ps{static from(t,e=Ns,n=Fs){const r=t.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=t[o];i[2*o]=e(r),i[2*o+1]=n(r)}return new Ps(i)}constructor(t){const e=t.length>>1;if(e>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const n=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:n,_hullTri:r,_hullHash:i}=this,o=t.length>>1;let a=1/0,s=1/0,u=-1/0,l=-1/0;for(let e=0;e<o;e++){const n=t[2*e],r=t[2*e+1];n<a&&(a=n),r<s&&(s=r),n>u&&(u=n),r>l&&(l=r),this._ids[e]=e}const c=(a+u)/2,f=(s+l)/2;let h,d,p;for(let e=0,n=1/0;e<o;e++){const r=Os(c,f,t[2*e],t[2*e+1]);r<n&&(h=e,n=r)}const m=t[2*h],g=t[2*h+1];for(let e=0,n=1/0;e<o;e++){if(e===h)continue;const r=Os(m,g,t[2*e],t[2*e+1]);r<n&&r>0&&(d=e,n=r)}let y=t[2*d],v=t[2*d+1],x=1/0;for(let e=0;e<o;e++){if(e===h||e===d)continue;const n=Is(m,g,y,v,t[2*e],t[2*e+1]);n<x&&(p=e,x=n)}let _=t[2*p],b=t[2*p+1];if(x===1/0){for(let e=0;e<o;e++)this._dists[e]=t[2*e]-t[0]||t[2*e+1]-t[1];Rs(this._ids,this._dists,0,o-1);const e=new Uint32Array(o);let n=0;for(let t=0,r=-1/0;t<o;t++){const i=this._ids[t],o=this._dists[i];o>r&&(e[n++]=i,r=o)}return this.hull=e.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(Ss(m,g,y,v,_,b)<0){const t=d,e=y,n=v;d=p,y=_,v=b,p=t,_=e,b=n}const w=function(t,e,n,r,i,o){const a=n-t,s=r-e,u=i-t,l=o-e,c=a*a+s*s,f=u*u+l*l,h=.5/(a*l-s*u),d=t+(l*c-s*f)*h,p=e+(a*f-u*c)*h;return{x:d,y:p}}(m,g,y,v,_,b);this._cx=w.x,this._cy=w.y;for(let e=0;e<o;e++)this._dists[e]=Os(t[2*e],t[2*e+1],w.x,w.y);Rs(this._ids,this._dists,0,o-1),this._hullStart=h;let M=3;n[h]=e[p]=d,n[d]=e[h]=p,n[p]=e[d]=h,r[h]=0,r[d]=1,r[p]=2,i.fill(-1),i[this._hashKey(m,g)]=h,i[this._hashKey(y,v)]=d,i[this._hashKey(_,b)]=p,this.trianglesLen=0,this._addTriangle(h,d,p,-1,-1,-1);for(let o,a,s=0;s<this._ids.length;s++){const u=this._ids[s],l=t[2*u],c=t[2*u+1];if(s>0&&Math.abs(l-o)<=Cs&&Math.abs(c-a)<=Cs)continue;if(o=l,a=c,u===h||u===d||u===p)continue;let f=0;for(let t=0,e=this._hashKey(l,c);t<this._hashSize&&(f=i[(e+t)%this._hashSize],-1===f||f===n[f]);t++);f=e[f];let m,g=f;for(;m=n[g],Ss(l,c,t[2*g],t[2*g+1],t[2*m],t[2*m+1])>=0;)if(g=m,g===f){g=-1;break}if(-1===g)continue;let y=this._addTriangle(g,u,n[g],-1,-1,r[g]);r[u]=this._legalize(y+2),r[g]=y,M++;let v=n[g];for(;m=n[v],Ss(l,c,t[2*v],t[2*v+1],t[2*m],t[2*m+1])<0;)y=this._addTriangle(v,u,m,r[u],-1,r[v]),r[u]=this._legalize(y+2),n[v]=v,M--,v=m;if(g===f)for(;m=e[g],Ss(l,c,t[2*m],t[2*m+1],t[2*g],t[2*g+1])<0;)y=this._addTriangle(m,u,g,-1,r[g],r[m]),this._legalize(y+2),r[m]=y,n[g]=g,M--,g=m;this._hullStart=e[u]=g,n[g]=e[v]=u,n[u]=v,i[this._hashKey(l,c)]=u,i[this._hashKey(t[2*g],t[2*g+1])]=g}this.hull=new Uint32Array(M);for(let t=0,e=this._hullStart;t<M;t++)this.hull[t]=e,e=n[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:n,coords:r}=this;let i=0,o=0;for(;;){const a=n[t],s=t-t%3;if(o=s+(t+2)%3,-1===a){if(0===i)break;t=ks[--i];continue}const u=a-a%3,l=s+(t+1)%3,c=u+(a+2)%3,f=e[o],h=e[t],d=e[l],p=e[c];if(Ls(r[2*f],r[2*f+1],r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1])){e[t]=p,e[a]=f;const r=n[c];if(-1===r){let e=this._hullStart;do{if(this._hullTri[e]===c){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,r),this._link(a,n[o]),this._link(o,c);const s=u+(a+1)%3;i<ks.length&&(ks[i++]=s)}else{if(0===i)break;t=ks[--i]}}return o}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,n,r,i,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=e,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function Os(t,e,n,r){const i=t-n,o=e-r;return i*i+o*o}function Ls(t,e,n,r,i,o,a,s){const u=t-a,l=e-s,c=n-a,f=r-s,h=i-a,d=o-s,p=c*c+f*f,m=h*h+d*d;return u*(f*m-p*d)-l*(c*m-p*h)+(u*u+l*l)*(c*d-f*h)<0}function Is(t,e,n,r,i,o){const a=n-t,s=r-e,u=i-t,l=o-e,c=a*a+s*s,f=u*u+l*l,h=.5/(a*l-s*u),d=(l*c-s*f)*h,p=(a*f-u*c)*h;return d*d+p*p}function Rs(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=t[i],o=e[r];let a=i-1;for(;a>=n&&e[t[a]]>o;)t[a+1]=t[a--];t[a+1]=r}else{let i=n+1,o=r;Ds(t,n+r>>1,i),e[t[n]]>e[t[r]]&&Ds(t,n,r),e[t[i]]>e[t[r]]&&Ds(t,i,r),e[t[n]]>e[t[i]]&&Ds(t,n,i);const a=t[i],s=e[a];for(;;){do{i++}while(e[t[i]]<s);do{o--}while(e[t[o]]>s);if(o<i)break;Ds(t,i,o)}t[n+1]=t[o],t[o]=a,r-i+1>=o-n?(Rs(t,e,i,r),Rs(t,e,n,o-1)):(Rs(t,e,n,o-1),Rs(t,e,i,r))}}function Ds(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Ns(t){return t[0]}function Fs(t){return t[1]}const js=1e-6;class zs{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){const r=(t=+t)+(n=+n),i=e=+e;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>js||Math.abs(this._y1-i)>js)&&(this._+="L"+r+","+i),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=r},${this._y1=i}`)}rect(t,e,n,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class Gs{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class Bs{constructor(t,[e,n,r,i]=[0,0,960,500]){if(!((r=+r)>=(e=+e)&&(i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=e,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:n},vectors:r}=this;let i,o;const a=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let r,s,u=0,l=0,c=n.length;u<c;u+=3,l+=2){const c=2*n[u],f=2*n[u+1],h=2*n[u+2],d=t[c],p=t[c+1],m=t[f],g=t[f+1],y=t[h],v=t[h+1],x=m-d,_=g-p,b=y-d,w=v-p,M=2*(x*w-_*b);if(Math.abs(M)<1e-9){if(void 0===i){i=o=0;for(const n of e)i+=t[2*n],o+=t[2*n+1];i/=e.length,o/=e.length}const n=1e9*Math.sign((i-d)*w-(o-p)*b);r=(d+y)/2-n*w,s=(p+v)/2+n*b}else{const t=1/M,e=x*x+_*_,n=b*b+w*w;r=d+(w*e-_*n)*t,s=p+(x*n-b*e)*t}a[l]=r,a[l+1]=s}let s,u,l,c=e[e.length-1],f=4*c,h=t[2*c],d=t[2*c+1];r.fill(0);for(let n=0;n<e.length;++n)c=e[n],s=f,u=h,l=d,f=4*c,h=t[2*c],d=t[2*c+1],r[s+2]=r[f]=l-d,r[s+3]=r[f+1]=h-u}render(t){const e=null==t?t=new zs:void 0,{delaunay:{halfedges:n,inedges:r,hull:i},circumcenters:o,vectors:a}=this;if(i.length<=1)return null;for(let e=0,r=n.length;e<r;++e){const r=n[e];if(r<e)continue;const i=2*Math.floor(e/3),a=2*Math.floor(r/3),s=o[i],u=o[i+1],l=o[a],c=o[a+1];this._renderSegment(s,u,l,c,t)}let s,u=i[i.length-1];for(let e=0;e<i.length;++e){s=u,u=i[e];const n=2*Math.floor(r[u]/3),l=o[n],c=o[n+1],f=4*s,h=this._project(l,c,a[f+2],a[f+3]);h&&this._renderSegment(l,c,h[0],h[1],t)}return e&&e.value()}renderBounds(t){const e=null==t?t=new zs:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){const n=null==e?e=new zs:void 0,r=this._clip(t);if(null===r||!r.length)return;e.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let t=2;t<i;t+=2)r[t]===r[t-2]&&r[t+1]===r[t-1]||e.lineTo(r[t],r[t+1]);return e.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,n=t.length/2;e<n;++e){const t=this.cellPolygon(e);t&&(t.index=e,yield t)}}cellPolygon(t){const e=new Gs;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,r,i){let o;const a=this._regioncode(t,e),s=this._regioncode(n,r);0===a&&0===s?(i.moveTo(t,e),i.lineTo(n,r)):(o=this._clipSegment(t,e,n,r,a,s))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(t,e,n){return(e=+e)==e&&(n=+n)==n&&this.delaunay._step(t,e,n)===t}*neighbors(t){const e=this._clip(t);if(e)for(const n of this.delaunay.neighbors(t)){const t=this._clip(n);if(t)t:for(let r=0,i=e.length;r<i;r+=2)for(let o=0,a=t.length;o<a;o+=2)if(e[r]===t[o]&&e[r+1]===t[o+1]&&e[(r+2)%i]===t[(o+a-2)%a]&&e[(r+3)%i]===t[(o+a-1)%a]){yield n;break t}}}_cell(t){const{circumcenters:e,delaunay:{inedges:n,halfedges:r,triangles:i}}=this,o=n[t];if(-1===o)return null;const a=[];let s=o;do{const n=Math.floor(s/3);if(a.push(e[2*n],e[2*n+1]),s=s%3==2?s-2:s+1,i[s]!==t)break;s=r[s]}while(s!==o&&-1!==s);return a}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(null===e)return null;const{vectors:n}=this,r=4*t;return this._simplify(n[r]||n[r+1]?this._clipInfinite(t,e,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(t,e))}_clipFinite(t,e){const n=e.length;let r,i,o,a,s=null,u=e[n-2],l=e[n-1],c=this._regioncode(u,l),f=0;for(let h=0;h<n;h+=2)if(r=u,i=l,u=e[h],l=e[h+1],o=c,c=this._regioncode(u,l),0===o&&0===c)a=f,f=0,s?s.push(u,l):s=[u,l];else{let e,n,h,d,p;if(0===o){if(null===(e=this._clipSegment(r,i,u,l,o,c)))continue;[n,h,d,p]=e}else{if(null===(e=this._clipSegment(u,l,r,i,c,o)))continue;[d,p,n,h]=e,a=f,f=this._edgecode(n,h),a&&f&&this._edge(t,a,f,s,s.length),s?s.push(n,h):s=[n,h]}a=f,f=this._edgecode(d,p),a&&f&&this._edge(t,a,f,s,s.length),s?s.push(d,p):s=[d,p]}if(s)a=f,f=this._edgecode(s[0],s[1]),a&&f&&this._edge(t,a,f,s,s.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return s}_clipSegment(t,e,n,r,i,o){const a=i<o;for(a&&([t,e,n,r,i,o]=[n,r,t,e,o,i]);;){if(0===i&&0===o)return a?[n,r,t,e]:[t,e,n,r];if(i&o)return null;let s,u,l=i||o;8&l?(s=t+(n-t)*(this.ymax-e)/(r-e),u=this.ymax):4&l?(s=t+(n-t)*(this.ymin-e)/(r-e),u=this.ymin):2&l?(u=e+(r-e)*(this.xmax-t)/(n-t),s=this.xmax):(u=e+(r-e)*(this.xmin-t)/(n-t),s=this.xmin),i?(t=s,e=u,i=this._regioncode(t,e)):(n=s,r=u,o=this._regioncode(n,r))}}_clipInfinite(t,e,n,r,i,o){let a,s=Array.from(e);if((a=this._project(s[0],s[1],n,r))&&s.unshift(a[0],a[1]),(a=this._project(s[s.length-2],s[s.length-1],i,o))&&s.push(a[0],a[1]),s=this._clipFinite(t,s))for(let e,n=0,r=s.length,i=this._edgecode(s[r-2],s[r-1]);n<r;n+=2)e=i,i=this._edgecode(s[n],s[n+1]),e&&i&&(n=this._edge(t,e,i,s,n),r=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,e,n,r,i){for(;e!==n;){let n,o;switch(e){case 5:e=4;continue;case 4:e=6,n=this.xmax,o=this.ymin;break;case 6:e=2;continue;case 2:e=10,n=this.xmax,o=this.ymax;break;case 10:e=8;continue;case 8:e=9,n=this.xmin,o=this.ymax;break;case 9:e=1;continue;case 1:e=5,n=this.xmin,o=this.ymin}r[i]===n&&r[i+1]===o||!this.contains(t,n,o)||(r.splice(i,0,n,o),i+=2)}return i}_project(t,e,n,r){let i,o,a,s=1/0;if(r<0){if(e<=this.ymin)return null;(i=(this.ymin-e)/r)<s&&(a=this.ymin,o=t+(s=i)*n)}else if(r>0){if(e>=this.ymax)return null;(i=(this.ymax-e)/r)<s&&(a=this.ymax,o=t+(s=i)*n)}if(n>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/n)<s&&(o=this.xmax,a=e+(s=i)*r)}else if(n<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/n)<s&&(o=this.xmin,a=e+(s=i)*r)}return[o,a]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let e=0;e<t.length;e+=2){const n=(e+2)%t.length,r=(e+4)%t.length;(t[e]===t[n]&&t[n]===t[r]||t[e+1]===t[n+1]&&t[n+1]===t[r+1])&&(t.splice(n,2),e-=2)}t.length||(t=null)}return t}}const Vs=2*Math.PI,qs=Math.pow;function Us(t){return t[0]}function Hs(t){return t[1]}function Ws(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class Xs{static from(t,e=Us,n=Hs,r){return new Xs("length"in t?function(t,e,n,r){const i=t.length,o=new Float64Array(2*i);for(let a=0;a<i;++a){const i=t[a];o[2*a]=e.call(r,i,a,t),o[2*a+1]=n.call(r,i,a,t)}return o}(t,e,n,r):Float64Array.from(function*(t,e,n,r){let i=0;for(const o of t)yield e.call(r,o,i,t),yield n.call(r,o,i,t),++i}(t,e,n,r)))}constructor(t){this._delaunator=new Ps(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:e,coords:n}=t;for(let t=0;t<e.length;t+=3){const r=2*e[t],i=2*e[t+1],o=2*e[t+2];if((n[o]-n[r])*(n[i+1]-n[r+1])-(n[i]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:e.length/2},(t,e)=>e).sort((t,n)=>e[2*t]-e[2*n]||e[2*t+1]-e[2*n+1]);const t=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[e[2*t],e[2*t+1],e[2*n],e[2*n+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let t=0,n=e.length/2;t<n;++t){const n=Ws(e[2*t],e[2*t+1],i);e[2*t]=n[0],e[2*t+1]=n[1]}this._delaunator=new Ps(e)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let t=0,e=n.length;t<e;++t){const e=i[t%3==2?t-2:t+1];-1!==n[t]&&-1!==o[e]||(o[e]=t)}for(let t=0,e=r.length;t<e;++t)a[r[t]]=t;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,2===r.length&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new Bs(this,t)}*neighbors(t){const{inedges:e,hull:n,_hullIndex:r,halfedges:i,triangles:o,collinear:a}=this;if(a){const e=a.indexOf(t);return e>0&&(yield a[e-1]),void(e<a.length-1&&(yield a[e+1]))}const s=e[t];if(-1===s)return;let u=s,l=-1;do{if(yield l=o[u],u=u%3==2?u-2:u+1,o[u]!==t)return;if(u=i[u],-1===u){const e=n[(r[t]+1)%n.length];return void(e!==l&&(yield e))}}while(u!==s)}find(t,e,n=0){if((t=+t)!=t||(e=+e)!=e)return-1;const r=n;let i;for(;(i=this._step(n,t,e))>=0&&i!==n&&i!==r;)n=i;return i}_step(t,e,n){const{inedges:r,hull:i,_hullIndex:o,halfedges:a,triangles:s,points:u}=this;if(-1===r[t]||!u.length)return(t+1)%(u.length>>1);let l=t,c=qs(e-u[2*t],2)+qs(n-u[2*t+1],2);const f=r[t];let h=f;do{let r=s[h];const f=qs(e-u[2*r],2)+qs(n-u[2*r+1],2);if(f<c&&(c=f,l=r),h=h%3==2?h-2:h+1,s[h]!==t)break;if(h=a[h],-1===h){if(h=i[(o[t]+1)%i.length],h!==r&&qs(e-u[2*h],2)+qs(n-u[2*h+1],2)<c)return h;break}}while(h!==f);return l}render(t){const e=null==t?t=new zs:void 0,{points:n,halfedges:r,triangles:i}=this;for(let e=0,o=r.length;e<o;++e){const o=r[e];if(o<e)continue;const a=2*i[e],s=2*i[o];t.moveTo(n[a],n[a+1]),t.lineTo(n[s],n[s+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e){void 0!==e||t&&"function"==typeof t.moveTo||(e=t,t=null),e=null==e?2:+e;const n=null==t?t=new zs:void 0,{points:r}=this;for(let n=0,i=r.length;n<i;n+=2){const i=r[n],o=r[n+1];t.moveTo(i+e,o),t.arc(i,o,e,0,Vs)}return n&&n.value()}renderHull(t){const e=null==t?t=new zs:void 0,{hull:n,points:r}=this,i=2*n[0],o=n.length;t.moveTo(r[i],r[i+1]);for(let e=1;e<o;++e){const i=2*n[e];t.lineTo(r[i],r[i+1])}return t.closePath(),e&&e.value()}hullPolygon(){const t=new Gs;return this.renderHull(t),t.value()}renderTriangle(t,e){const n=null==e?e=new zs:void 0,{points:r,triangles:i}=this,o=2*i[t*=3],a=2*i[t+1],s=2*i[t+2];return e.moveTo(r[o],r[o+1]),e.lineTo(r[a],r[a+1]),e.lineTo(r[s],r[s+1]),e.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:t}=this;for(let e=0,n=t.length/3;e<n;++e)yield this.trianglePolygon(e)}trianglePolygon(t){const e=new Gs;return this.renderTriangle(t,e),e.value()}}var Ks=t=>()=>t;function Qs(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:o,x:a,y:s,dx:u,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}function Ys(t){return!t.ctrlKey&&!t.button}function $s(){return this.parentNode}function Zs(t,e){return null==e?{x:t.x,y:t.y}:e}function Js(){return navigator.maxTouchPoints||"ontouchstart"in this}function tu(){var t,e,n,r,i=Ys,o=$s,a=Zs,s=Js,u={},l=Te("start","drag","end"),c=0,f=0;function h(t){t.on("mousedown.drag",d).filter(s).on("touchstart.drag",g).on("touchmove.drag",y,Vn).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(a,s){if(!r&&i.call(this,a,s)){var u=x(this,o.call(this,a,s),a,s,"mouse");u&&(Bn(a.view).on("mousemove.drag",p,qn).on("mouseup.drag",m,qn),Wn(a.view),Un(a),n=!1,t=a.clientX,e=a.clientY,u("start",a))}}function p(r){if(Hn(r),!n){var i=r.clientX-t,o=r.clientY-e;n=i*i+o*o>f}u.mouse("drag",r)}function m(t){Bn(t.view).on("mousemove.drag mouseup.drag",null),Xn(t.view,n),Hn(t),u.mouse("end",t)}function g(t,e){if(i.call(this,t,e)){var n,r,a=t.changedTouches,s=o.call(this,t,e),u=a.length;for(n=0;n<u;++n)(r=x(this,s,t,e,a[n].identifier,a[n]))&&(Un(t),r("start",t,a[n]))}}function y(t){var e,n,r=t.changedTouches,i=r.length;for(e=0;e<i;++e)(n=u[r[e].identifier])&&(Hn(t),n("drag",t,r[e]))}function v(t){var e,n,i=t.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),e=0;e<o;++e)(n=u[i[e].identifier])&&(Un(t),n("end",t,i[e]))}function x(t,e,n,r,i,o){var s,f,d,p=l.copy(),m=ti(o||n,e);if(null!=(d=a.call(t,new Qs("beforestart",{sourceEvent:n,target:h,identifier:i,active:c,x:m[0],y:m[1],dx:0,dy:0,dispatch:p}),r)))return s=d.x-m[0]||0,f=d.y-m[1]||0,function n(o,a,l){var g,y=m;switch(o){case"start":u[i]=n,g=c++;break;case"end":delete u[i],--c;case"drag":m=ti(l||a,e),g=c}p.call(o,t,new Qs(o,{sourceEvent:a,subject:d,target:h,identifier:i,active:g,x:m[0]+s,y:m[1]+f,dx:m[0]-y[0],dy:m[1]-y[1],dispatch:p}),r)}}return h.filter=function(t){return arguments.length?(i="function"==typeof t?t:Ks(!!t),h):i},h.container=function(t){return arguments.length?(o="function"==typeof t?t:Ks(t),h):o},h.subject=function(t){return arguments.length?(a="function"==typeof t?t:Ks(t),h):a},h.touchable=function(t){return arguments.length?(s="function"==typeof t?t:Ks(!!t),h):s},h.on=function(){var t=l.on.apply(l,arguments);return t===l?h:t},h.clickDistance=function(t){return arguments.length?(f=(t=+t)*t,h):Math.sqrt(f)},h}Qs.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var eu={},nu={},ru=34,iu=10,ou=13;function au(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function su(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}function uu(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function lu(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+uu(-e,6):e>9999?"+"+uu(e,6):uu(e,4))+"-"+uu(t.getUTCMonth()+1,2)+"-"+uu(t.getUTCDate(),2)+(o?"T"+uu(n,2)+":"+uu(r,2)+":"+uu(i,2)+"."+uu(o,3)+"Z":i?"T"+uu(n,2)+":"+uu(r,2)+":"+uu(i,2)+"Z":r||n?"T"+uu(n,2)+":"+uu(r,2)+"Z":"")}function cu(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,a=0,s=0,u=o<=0,l=!1;function c(){if(u)return nu;if(l)return l=!1,eu;var e,r,i=a;if(t.charCodeAt(i)===ru){for(;a++<o&&t.charCodeAt(a)!==ru||t.charCodeAt(++a)===ru;);return(e=a)>=o?u=!0:(r=t.charCodeAt(a++))===iu?l=!0:r===ou&&(l=!0,t.charCodeAt(a)===iu&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<o;){if((r=t.charCodeAt(e=a++))===iu)l=!0;else if(r===ou)l=!0,t.charCodeAt(a)===iu&&++a;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,o)}for(t.charCodeAt(o-1)===iu&&--o,t.charCodeAt(o-1)===ou&&--o;(r=c())!==nu;){for(var f=[];r!==eu&&r!==nu;)f.push(r),r=c();e&&null==(f=e(f,s++))||i.push(f)}return i}function i(e,n){return e.map(function(e){return n.map(function(t){return a(e[t])}).join(t)})}function o(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?lu(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=au(t);return function(r,i){return e(n(r),i,t)}}(t,e):au(t)});return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=su(e)),[n.map(a).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=su(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}}var fu=cu(","),hu=fu.parse,du=fu.parseRows,pu=fu.format,mu=fu.formatBody,gu=fu.formatRows,yu=fu.formatRow,vu=fu.formatValue,xu=cu("\t"),_u=xu.parse,bu=xu.parseRows,wu=xu.format,Mu=xu.formatBody,Au=xu.formatRows,Eu=xu.formatRow,Tu=xu.formatValue;function Su(t){for(var e in t){var n,r,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Cu&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;t[e]=i}return t}const Cu=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),ku=t=>+t;function Pu(t){return t*t}function Ou(t){return t*(2-t)}function Lu(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}var Iu=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),Ru=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),Du=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Nu=Math.PI,Fu=Nu/2;function ju(t){return 1===+t?1:1-Math.cos(t*Fu)}function zu(t){return Math.sin(t*Fu)}function Gu(t){return(1-Math.cos(Nu*t))/2}function Bu(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function Vu(t){return Bu(1-+t)}function qu(t){return 1-Bu(t)}function Uu(t){return((t*=2)<=1?Bu(1-t):2-Bu(t-1))/2}function Hu(t){return 1-Math.sqrt(1-t*t)}function Wu(t){return Math.sqrt(1- --t*t)}function Xu(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Ku=4/11,Qu=6/11,Yu=8/11,$u=3/4,Zu=9/11,Ju=10/11,tl=15/16,el=21/22,nl=63/64,rl=1/Ku/Ku;function il(t){return 1-ol(1-t)}function ol(t){return(t=+t)<Ku?rl*t*t:t<Yu?rl*(t-=Qu)*t+$u:t<Ju?rl*(t-=Zu)*t+tl:rl*(t-=el)*t+nl}function al(t){return((t*=2)<=1?1-ol(1-t):ol(t-1)+1)/2}var sl=1.70158,ul=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(sl),ll=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(sl),cl=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(sl),fl=2*Math.PI,hl=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=fl);function i(t){return e*Bu(- --t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*fl)},i.period=function(n){return t(e,n)},i}(1,.3),dl=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=fl);function i(t){return 1-e*Bu(t=+t)*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*fl)},i.period=function(n){return t(e,n)},i}(1,.3),pl=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=fl);function i(t){return((t=2*t-1)<0?e*Bu(-t)*Math.sin((r-t)/n):2-e*Bu(t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*fl)},i.period=function(n){return t(e,n)},i}(1,.3);function ml(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function gl(t,e){return fetch(t,e).then(ml)}function yl(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function vl(t,e){return fetch(t,e).then(yl)}function xl(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function _l(t,e){return fetch(t,e).then(xl)}function bl(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),_l(e,n).then(function(e){return t(e,r)})}}function wl(t,e,n,r){3===arguments.length&&"function"==typeof n&&(r=n,n=void 0);var i=cu(t);return _l(e,n).then(function(t){return i.parse(t,r)})}var Ml=bl(hu),Al=bl(_u);function El(t,e){return new Promise(function(n,r){var i=new Image;for(var o in e)i[o]=e[o];i.onerror=r,i.onload=function(){n(i)},i.src=t})}function Tl(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function Sl(t,e){return fetch(t,e).then(Tl)}function Cl(t){return(e,n)=>_l(e,n).then(e=>(new DOMParser).parseFromString(e,t))}var kl=Cl("application/xml"),Pl=Cl("text/html"),Ol=Cl("image/svg+xml");function Ll(t,e){var n,r=1;function i(){var i,o,a=n.length,s=0,u=0;for(i=0;i<a;++i)s+=(o=n[i]).x,u+=o.y;for(s=(s/a-t)*r,u=(u/a-e)*r,i=0;i<a;++i)(o=n[i]).x-=s,o.y-=u}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i}function Il(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,l,c,f,h,d=t._root,p={data:r},m=t._x0,g=t._y0,y=t._x1,v=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((l=e>=(o=(m+y)/2))?m=o:y=o,(c=n>=(a=(g+v)/2))?g=a:v=a,i=d,!(d=d[f=c<<1|l]))return i[f]=p,t;if(s=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===s&&n===u)return p.next=d,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(l=e>=(o=(m+y)/2))?m=o:y=o,(c=n>=(a=(g+v)/2))?g=a:v=a}while((f=c<<1|l)==(h=(u>=a)<<1|s>=o));return i[h]=d,i[f]=p,t}function Rl(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Dl(t){return t[0]}function Nl(t){return t[1]}function Fl(t,e,n){var r=new jl(null==e?Dl:e,null==n?Nl:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function jl(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function zl(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Gl=Fl.prototype=jl.prototype;function Bl(t){return function(){return t}}function Vl(t){return 1e-6*(t()-.5)}function ql(t){return t.x+t.vx}function Ul(t){return t.y+t.vy}function Hl(t){var e,n,r,i=1,o=1;function a(){for(var t,a,u,l,c,f,h,d=e.length,p=0;p<o;++p)for(a=Fl(e,ql,Ul).visitAfter(s),t=0;t<d;++t)u=e[t],f=n[u.index],h=f*f,l=u.x+u.vx,c=u.y+u.vy,a.visit(m);function m(t,e,n,o,a){var s=t.data,d=t.r,p=f+d;if(!s)return e>l+p||o<l-p||n>c+p||a<c-p;if(s.index>u.index){var m=l-s.x-s.vx,g=c-s.y-s.vy,y=m*m+g*g;y<p*p&&(0===m&&(y+=(m=Vl(r))*m),0===g&&(y+=(g=Vl(r))*g),y=(p-(y=Math.sqrt(y)))/y*i,u.vx+=(m*=y)*(p=(d*=d)/(h+d)),u.vy+=(g*=y)*p,s.vx-=m*(p=1-p),s.vy-=g*p)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function u(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=Bl(null==t?1:+t)),a.initialize=function(t,n){e=t,r=n,u()},a.iterations=function(t){return arguments.length?(o=+t,a):o},a.strength=function(t){return arguments.length?(i=+t,a):i},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:Bl(+e),u(),a):t},a}function Wl(t){return t.index}function Xl(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Kl(t){var e,n,r,i,o,a,s=Wl,u=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},l=Bl(30),c=1;function f(r){for(var i=0,s=t.length;i<c;++i)for(var u,l,f,h,d,p,m,g=0;g<s;++g)l=(u=t[g]).source,h=(f=u.target).x+f.vx-l.x-l.vx||Vl(a),d=f.y+f.vy-l.y-l.vy||Vl(a),h*=p=((p=Math.sqrt(h*h+d*d))-n[g])/p*r*e[g],d*=p,f.vx-=h*(m=o[g]),f.vy-=d*m,l.vx+=h*(m=1-m),l.vy+=d*m}function h(){if(r){var a,u,l=r.length,c=t.length,f=new Map(r.map((t,e)=>[s(t,e,r),t]));for(a=0,i=new Array(l);a<c;++a)(u=t[a]).index=a,"object"!=typeof u.source&&(u.source=Xl(f,u.source)),"object"!=typeof u.target&&(u.target=Xl(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(a=0,o=new Array(c);a<c;++a)u=t[a],o[a]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(c),d(),n=new Array(c),p()}}function d(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+u(t[n],n,t)}function p(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+l(t[e],e,t)}return null==t&&(t=[]),f.initialize=function(t,e){r=t,a=e,h()},f.links=function(e){return arguments.length?(t=e,h(),f):t},f.id=function(t){return arguments.length?(s=t,f):s},f.iterations=function(t){return arguments.length?(c=+t,f):c},f.strength=function(t){return arguments.length?(u="function"==typeof t?t:Bl(+t),d(),f):u},f.distance=function(t){return arguments.length?(l="function"==typeof t?t:Bl(+t),p(),f):l},f}Gl.copy=function(){var t,e,n=new jl(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=zl(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=zl(e));return n},Gl.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Il(this.cover(e,n),e,n,t)},Gl.addAll=function(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<u&&(u=r),r>c&&(c=r),i<l&&(l=i),i>f&&(f=i));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<o;++n)Il(this,a[n],s[n],t[n]);return this},Gl.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,s,u=i-n||1,l=this._root;n>t||t>=i||r>e||e>=o;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=l,l=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},Gl.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},Gl.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Gl.find=function(t,e,n){var r,i,o,a,s,u,l,c=this._x0,f=this._y0,h=this._x1,d=this._y1,p=[],m=this._root;for(m&&p.push(new Rl(m,c,f,h,d)),null==n?n=1/0:(c=t-n,f=e-n,h=t+n,d=e+n,n*=n);u=p.pop();)if(!(!(m=u.node)||(i=u.x0)>h||(o=u.y0)>d||(a=u.x1)<c||(s=u.y1)<f))if(m.length){var g=(i+a)/2,y=(o+s)/2;p.push(new Rl(m[3],g,y,a,s),new Rl(m[2],i,y,g,s),new Rl(m[1],g,o,a,y),new Rl(m[0],i,o,g,y)),(l=(e>=y)<<1|t>=g)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=u)}else{var v=t-+this._x.call(null,m.data),x=e-+this._y.call(null,m.data),_=v*v+x*x;if(_<n){var b=Math.sqrt(n=_);c=t-b,f=e-b,h=t+b,d=e+b,r=m.data}}return r},Gl.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,l,c,f,h,d=this._root,p=this._x0,m=this._y0,g=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((l=o>=(s=(p+g)/2))?p=s:g=s,(c=a>=(u=(m+y)/2))?m=u:y=u,e=d,!(d=d[f=c<<1|l]))return this;if(!d.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,h=f)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=i,this)},Gl.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Gl.root=function(){return this._root},Gl.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},Gl.visit=function(t){var e,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new Rl(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var l=(r+o)/2,c=(i+a)/2;(n=u[3])&&s.push(new Rl(n,l,c,o,a)),(n=u[2])&&s.push(new Rl(n,r,c,l,a)),(n=u[1])&&s.push(new Rl(n,l,i,o,c)),(n=u[0])&&s.push(new Rl(n,r,i,l,c))}return this},Gl.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Rl(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,l=e.y1,c=(a+u)/2,f=(s+l)/2;(o=i[0])&&n.push(new Rl(o,a,s,c,f)),(o=i[1])&&n.push(new Rl(o,c,s,u,f)),(o=i[2])&&n.push(new Rl(o,a,f,c,l)),(o=i[3])&&n.push(new Rl(o,c,f,u,l))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Gl.x=function(t){return arguments.length?(this._x=t,this):this._x},Gl.y=function(t){return arguments.length?(this._y=t,this):this._y};const Ql=1664525,Yl=1013904223,$l=4294967296;function Zl(t){return t.x}function Jl(t){return t.y}var tc=10,ec=Math.PI*(3-Math.sqrt(5));function nc(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,u=pi(f),l=Te("tick","end"),c=function(){let t=1;return()=>(t=(Ql*t+Yl)%$l)/$l}();function f(){h(),l.call("tick",e),n<r&&(u.stop(),l.call("end",e))}function h(r){var u,l,c=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(o-n)*i,s.forEach(function(t){t(n)}),u=0;u<c;++u)null==(l=t[u]).fx?l.x+=l.vx*=a:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=a:(l.y=l.fy,l.vy=0);return e}function d(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=tc*Math.sqrt(.5+n),o=n*ec;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,c),e}return null==t&&(t=[]),d(),e={tick:h,restart:function(){return u.restart(f),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,d(),s.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},randomSource:function(t){return arguments.length?(c=t,s.forEach(p),e):c},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,p(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,u,l=0,c=t.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(a=(i=e-(s=t[l]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(t,n){return arguments.length>1?(l.on(t,n),e):l.on(t)}}}function rc(){var t,e,n,r,i,o=Bl(-30),a=1,s=1/0,u=.81;function l(n){var i,o=t.length,a=Fl(t,Zl,Jl).visitAfter(f);for(r=n,i=0;i<o;++i)e=t[i],a.visit(h)}function c(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+o(n,e,t)}}function f(t){var e,n,r,o,a,s=0,u=0;if(t.length){for(r=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(s+=e.value,u+=n,r+=n*e.x,o+=n*e.y);t.x=r/u,t.y=o/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function h(t,o,l,c){if(!t.value)return!0;var f=t.x-e.x,h=t.y-e.y,d=c-o,p=f*f+h*h;if(d*d/u<p)return p<s&&(0===f&&(p+=(f=Vl(n))*f),0===h&&(p+=(h=Vl(n))*h),p<a&&(p=Math.sqrt(a*p)),e.vx+=f*t.value*r/p,e.vy+=h*t.value*r/p),!0;if(!(t.length||p>=s)){(t.data!==e||t.next)&&(0===f&&(p+=(f=Vl(n))*f),0===h&&(p+=(h=Vl(n))*h),p<a&&(p=Math.sqrt(a*p)));do{t.data!==e&&(d=i[t.data.index]*r/p,e.vx+=f*d,e.vy+=h*d)}while(t=t.next)}}return l.initialize=function(e,r){t=e,n=r,c()},l.strength=function(t){return arguments.length?(o="function"==typeof t?t:Bl(+t),c(),l):o},l.distanceMin=function(t){return arguments.length?(a=t*t,l):Math.sqrt(a)},l.distanceMax=function(t){return arguments.length?(s=t*t,l):Math.sqrt(s)},l.theta=function(t){return arguments.length?(u=t*t,l):Math.sqrt(u)},l}function ic(t,e,n){var r,i,o,a=Bl(.1);function s(t){for(var a=0,s=r.length;a<s;++a){var u=r[a],l=u.x-e||1e-6,c=u.y-n||1e-6,f=Math.sqrt(l*l+c*c),h=(o[a]-f)*i[a]*t/f;u.vx+=l*h,u.vy+=c*h}}function u(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)o[e]=+t(r[e],e,r),i[e]=isNaN(o[e])?0:+a(r[e],e,r)}}return"function"!=typeof t&&(t=Bl(+t)),null==e&&(e=0),null==n&&(n=0),s.initialize=function(t){r=t,u()},s.strength=function(t){return arguments.length?(a="function"==typeof t?t:Bl(+t),u(),s):a},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:Bl(+e),u(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(n=+t,s):n},s}function oc(t){var e,n,r,i=Bl(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=Bl(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:Bl(+t),a(),o):i},o.x=function(e){return arguments.length?(t="function"==typeof e?e:Bl(+e),a(),o):t},o}function ac(t){var e,n,r,i=Bl(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=Bl(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:Bl(+t),a(),o):i},o.y=function(e){return arguments.length?(t="function"==typeof e?e:Bl(+e),a(),o):t},o}function sc(t,e){if(!isFinite(t)||0===t)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function uc(t){return(t=sc(Math.abs(t)))?t[1]:NaN}var lc,cc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fc(t){if(!(e=cc.exec(t)))throw new Error("invalid format: "+t);var e;return new hc({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function hc(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function dc(t,e){var n=sc(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}fc.prototype=hc.prototype,hc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var pc={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>dc(100*t,e),r:dc,s:function(t,e){var n=sc(t,e);if(!n)return lc=void 0,t.toPrecision(e);var r=n[0],i=n[1],o=i-(lc=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+sc(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function mc(t){return t}var gc,yc,vc,xc=Array.prototype.map,_c=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function bc(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?mc:(e=xc.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?mc:function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(xc.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function f(t,e){var n=(t=fc(t)).fill,f=t.align,h=t.sign,d=t.symbol,p=t.zero,m=t.width,g=t.comma,y=t.precision,v=t.trim,x=t.type;"n"===x?(g=!0,x="g"):pc[x]||(void 0===y&&(y=12),v=!0,x="g"),(p||"0"===n&&"="===f)&&(p=!0,n="0",f="=");var _=(e&&void 0!==e.prefix?e.prefix:"")+("$"===d?i:"#"===d&&/[boxX]/.test(x)?"0"+x.toLowerCase():""),b=("$"===d?o:/[%p]/.test(x)?u:"")+(e&&void 0!==e.suffix?e.suffix:""),w=pc[x],M=/[defgprs%]/.test(x);function A(t){var e,i,o,u=_,d=b;if("c"===x)d=w(t)+d,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:w(Math.abs(t),y),v&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),A&&0===+t&&"+"!==h&&(A=!1),u=(A?"("===h?h:l:"-"===h||"("===h?"":h)+u,d=("s"!==x||isNaN(t)||void 0===lc?"":_c[8+lc/3])+d+(A&&"("===h?")":""),M)for(e=-1,i=t.length;++e<i;)if(48>(o=t.charCodeAt(e))||o>57){d=(46===o?a+t.slice(e+1):t.slice(e))+d,t=t.slice(0,e);break}}g&&!p&&(t=r(t,1/0));var E=u.length+t.length+d.length,T=E<m?new Array(m-E+1).join(n):"";switch(g&&p&&(t=r(T+t,T.length?m-d.length:1/0),T=""),f){case"<":t=u+t+d+T;break;case"=":t=u+T+t+d;break;case"^":t=T.slice(0,E=T.length>>1)+u+t+d+T.slice(E);break;default:t=T+u+t+d}return s(t)}return y=void 0===y?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),A.toString=function(){return t+""},A}return{format:f,formatPrefix:function(t,e){var n=3*Math.max(-8,Math.min(8,Math.floor(uc(e)/3))),r=Math.pow(10,-n),i=f(((t=fc(t)).type="f",t),{suffix:_c[8+n/3]});return function(t){return i(r*t)}}}}function wc(t){return gc=bc(t),yc=gc.format,vc=gc.formatPrefix,gc}function Mc(t){return Math.max(0,-uc(Math.abs(t)))}function Ac(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(uc(e)/3)))-uc(Math.abs(t)))}function Ec(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,uc(e)-uc(t))+1}wc({thousands:",",grouping:[3],currency:["$",""]});var Tc=1e-6,Sc=1e-12,Cc=Math.PI,kc=Cc/2,Pc=Cc/4,Oc=2*Cc,Lc=180/Cc,Ic=Cc/180,Rc=Math.abs,Dc=Math.atan,Nc=Math.atan2,Fc=Math.cos,jc=Math.ceil,zc=Math.exp,Gc=(Math.floor,Math.hypot),Bc=Math.log,Vc=Math.pow,qc=Math.sin,Uc=Math.sign||function(t){return t>0?1:t<0?-1:0},Hc=Math.sqrt,Wc=Math.tan;function Xc(t){return t>1?0:t<-1?Cc:Math.acos(t)}function Kc(t){return t>1?kc:t<-1?-kc:Math.asin(t)}function Qc(t){return(t=qc(t/2))*t}function Yc(){}function $c(t,e){t&&Jc.hasOwnProperty(t.type)&&Jc[t.type](t,e)}var Zc={Feature:function(t,e){$c(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)$c(n[r].geometry,e)}},Jc={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){tf(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)tf(n[r],e,0)},Polygon:function(t,e){ef(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ef(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)$c(n[r],e)}};function tf(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function ef(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)tf(t[n],e,1);e.polygonEnd()}function nf(t,e){t&&Zc.hasOwnProperty(t.type)?Zc[t.type](t,e):$c(t,e)}var rf,of,af,sf,uf,lf,cf,ff,hf,df,pf,mf,gf,yf,vf,xf,_f=new k,bf=new k,wf={point:Yc,lineStart:Yc,lineEnd:Yc,polygonStart:function(){_f=new k,wf.lineStart=Mf,wf.lineEnd=Af},polygonEnd:function(){var t=+_f;bf.add(t<0?Oc+t:t),this.lineStart=this.lineEnd=this.point=Yc},sphere:function(){bf.add(Oc)}};function Mf(){wf.point=Ef}function Af(){Tf(rf,of)}function Ef(t,e){wf.point=Tf,rf=t,of=e,af=t*=Ic,sf=Fc(e=(e*=Ic)/2+Pc),uf=qc(e)}function Tf(t,e){var n=(t*=Ic)-af,r=n>=0?1:-1,i=r*n,o=Fc(e=(e*=Ic)/2+Pc),a=qc(e),s=uf*a,u=sf*o+s*Fc(i),l=s*r*qc(i);_f.add(Nc(l,u)),af=t,sf=o,uf=a}function Sf(t){return bf=new k,nf(t,wf),2*bf}function Cf(t){return[Nc(t[1],t[0]),Kc(t[2])]}function kf(t){var e=t[0],n=t[1],r=Fc(n);return[r*Fc(e),r*qc(e),qc(n)]}function Pf(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Of(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Lf(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function If(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Rf(t){var e=Hc(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Df,Nf,Ff,jf,zf,Gf,Bf,Vf,qf,Uf,Hf,Wf,Xf,Kf,Qf,Yf,$f={point:Zf,lineStart:th,lineEnd:eh,polygonStart:function(){$f.point=nh,$f.lineStart=rh,$f.lineEnd=ih,yf=new k,wf.polygonStart()},polygonEnd:function(){wf.polygonEnd(),$f.point=Zf,$f.lineStart=th,$f.lineEnd=eh,_f<0?(lf=-(ff=180),cf=-(hf=90)):yf>Tc?hf=90:yf<-Tc&&(cf=-90),xf[0]=lf,xf[1]=ff},sphere:function(){lf=-(ff=180),cf=-(hf=90)}};function Zf(t,e){vf.push(xf=[lf=t,ff=t]),e<cf&&(cf=e),e>hf&&(hf=e)}function Jf(t,e){var n=kf([t*Ic,e*Ic]);if(gf){var r=Of(gf,n),i=Of([r[1],-r[0],0],r);Rf(i),i=Cf(i);var o,a=t-df,s=a>0?1:-1,u=i[0]*Lc*s,l=Rc(a)>180;l^(s*df<u&&u<s*t)?(o=i[1]*Lc)>hf&&(hf=o):l^(s*df<(u=(u+360)%360-180)&&u<s*t)?(o=-i[1]*Lc)<cf&&(cf=o):(e<cf&&(cf=e),e>hf&&(hf=e)),l?t<df?oh(lf,t)>oh(lf,ff)&&(ff=t):oh(t,ff)>oh(lf,ff)&&(lf=t):ff>=lf?(t<lf&&(lf=t),t>ff&&(ff=t)):t>df?oh(lf,t)>oh(lf,ff)&&(ff=t):oh(t,ff)>oh(lf,ff)&&(lf=t)}else vf.push(xf=[lf=t,ff=t]);e<cf&&(cf=e),e>hf&&(hf=e),gf=n,df=t}function th(){$f.point=Jf}function eh(){xf[0]=lf,xf[1]=ff,$f.point=Zf,gf=null}function nh(t,e){if(gf){var n=t-df;yf.add(Rc(n)>180?n+(n>0?360:-360):n)}else pf=t,mf=e;wf.point(t,e),Jf(t,e)}function rh(){wf.lineStart()}function ih(){nh(pf,mf),wf.lineEnd(),Rc(yf)>Tc&&(lf=-(ff=180)),xf[0]=lf,xf[1]=ff,gf=null}function oh(t,e){return(e-=t)<0?e+360:e}function ah(t,e){return t[0]-e[0]}function sh(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function uh(t){var e,n,r,i,o,a,s;if(hf=ff=-(lf=cf=1/0),vf=[],nf(t,$f),n=vf.length){for(vf.sort(ah),e=1,o=[r=vf[0]];e<n;++e)sh(r,(i=vf[e])[0])||sh(r,i[1])?(oh(r[0],i[1])>oh(r[0],r[1])&&(r[1]=i[1]),oh(i[0],r[1])>oh(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,e=0,r=o[n=o.length-1];e<=n;r=i,++e)i=o[e],(s=oh(r[1],i[0]))>a&&(a=s,lf=i[0],ff=r[1])}return vf=xf=null,lf===1/0||cf===1/0?[[NaN,NaN],[NaN,NaN]]:[[lf,cf],[ff,hf]]}var lh={sphere:Yc,point:ch,lineStart:hh,lineEnd:mh,polygonStart:function(){lh.lineStart=gh,lh.lineEnd=yh},polygonEnd:function(){lh.lineStart=hh,lh.lineEnd=mh}};function ch(t,e){t*=Ic;var n=Fc(e*=Ic);fh(n*Fc(t),n*qc(t),qc(e))}function fh(t,e,n){++Df,Ff+=(t-Ff)/Df,jf+=(e-jf)/Df,zf+=(n-zf)/Df}function hh(){lh.point=dh}function dh(t,e){t*=Ic;var n=Fc(e*=Ic);Kf=n*Fc(t),Qf=n*qc(t),Yf=qc(e),lh.point=ph,fh(Kf,Qf,Yf)}function ph(t,e){t*=Ic;var n=Fc(e*=Ic),r=n*Fc(t),i=n*qc(t),o=qc(e),a=Nc(Hc((a=Qf*o-Yf*i)*a+(a=Yf*r-Kf*o)*a+(a=Kf*i-Qf*r)*a),Kf*r+Qf*i+Yf*o);Nf+=a,Gf+=a*(Kf+(Kf=r)),Bf+=a*(Qf+(Qf=i)),Vf+=a*(Yf+(Yf=o)),fh(Kf,Qf,Yf)}function mh(){lh.point=ch}function gh(){lh.point=vh}function yh(){xh(Wf,Xf),lh.point=ch}function vh(t,e){Wf=t,Xf=e,t*=Ic,e*=Ic,lh.point=xh;var n=Fc(e);Kf=n*Fc(t),Qf=n*qc(t),Yf=qc(e),fh(Kf,Qf,Yf)}function xh(t,e){t*=Ic;var n=Fc(e*=Ic),r=n*Fc(t),i=n*qc(t),o=qc(e),a=Qf*o-Yf*i,s=Yf*r-Kf*o,u=Kf*i-Qf*r,l=Gc(a,s,u),c=Kc(l),f=l&&-c/l;qf.add(f*a),Uf.add(f*s),Hf.add(f*u),Nf+=c,Gf+=c*(Kf+(Kf=r)),Bf+=c*(Qf+(Qf=i)),Vf+=c*(Yf+(Yf=o)),fh(Kf,Qf,Yf)}function _h(t){Df=Nf=Ff=jf=zf=Gf=Bf=Vf=0,qf=new k,Uf=new k,Hf=new k,nf(t,lh);var e=+qf,n=+Uf,r=+Hf,i=Gc(e,n,r);return i<Sc&&(e=Gf,n=Bf,r=Vf,Nf<Tc&&(e=Ff,n=jf,r=zf),(i=Gc(e,n,r))<Sc)?[NaN,NaN]:[Nc(n,e)*Lc,Kc(r/i)*Lc]}function bh(t){return function(){return t}}function wh(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Mh(t,e){return Rc(t)>Cc&&(t-=Math.round(t/Oc)*Oc),[t,e]}function Ah(t,e,n){return(t%=Oc)?e||n?wh(Th(t),Sh(e,n)):Th(t):e||n?Sh(e,n):Mh}function Eh(t){return function(e,n){return Rc(e+=t)>Cc&&(e-=Math.round(e/Oc)*Oc),[e,n]}}function Th(t){var e=Eh(t);return e.invert=Eh(-t),e}function Sh(t,e){var n=Fc(t),r=qc(t),i=Fc(e),o=qc(e);function a(t,e){var a=Fc(e),s=Fc(t)*a,u=qc(t)*a,l=qc(e),c=l*n+s*r;return[Nc(u*i-c*o,s*n-l*r),Kc(c*i+u*o)]}return a.invert=function(t,e){var a=Fc(e),s=Fc(t)*a,u=qc(t)*a,l=qc(e),c=l*i-u*o;return[Nc(u*i+l*o,s*n+c*r),Kc(c*n-s*r)]},a}function Ch(t){function e(e){return(e=t(e[0]*Ic,e[1]*Ic))[0]*=Lc,e[1]*=Lc,e}return t=Ah(t[0]*Ic,t[1]*Ic,t.length>2?t[2]*Ic:0),e.invert=function(e){return(e=t.invert(e[0]*Ic,e[1]*Ic))[0]*=Lc,e[1]*=Lc,e},e}function kh(t,e,n,r,i,o){if(n){var a=Fc(e),s=qc(e),u=r*n;null==i?(i=e+r*Oc,o=e-u/2):(i=Ph(a,i),o=Ph(a,o),(r>0?i<o:i>o)&&(i+=r*Oc));for(var l,c=i;r>0?c>o:c<o;c-=u)l=Cf([a,-s*Fc(c),-s*qc(c)]),t.point(l[0],l[1])}}function Ph(t,e){(e=kf(e))[0]-=t,Rf(e);var n=Xc(-e[1]);return((-e[2]<0?-n:n)+Oc-Tc)%Oc}function Oh(){var t,e,n=bh([0,0]),r=bh(90),i=bh(2),o={point:function(n,r){t.push(n=e(n,r)),n[0]*=Lc,n[1]*=Lc}};function a(){var a=n.apply(this,arguments),s=r.apply(this,arguments)*Ic,u=i.apply(this,arguments)*Ic;return t=[],e=Ah(-a[0]*Ic,-a[1]*Ic,0).invert,kh(o,s,u,1),a={type:"Polygon",coordinates:[t]},t=e=null,a}return a.center=function(t){return arguments.length?(n="function"==typeof t?t:bh([+t[0],+t[1]]),a):n},a.radius=function(t){return arguments.length?(r="function"==typeof t?t:bh(+t),a):r},a.precision=function(t){return arguments.length?(i="function"==typeof t?t:bh(+t),a):i},a}function Lh(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:Yc,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Ih(t,e){return Rc(t[0]-e[0])<Tc&&Rc(t[1]-e[1])<Tc}function Rh(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Dh(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(Ih(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2*Tc}s.push(n=new Rh(r,t,null,!0)),u.push(n.o=new Rh(r,null,n,!1)),s.push(n=new Rh(a,t,null,!1)),u.push(n.o=new Rh(a,null,n,!0))}}),s.length){for(u.sort(e),Nh(s),Nh(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var l,c,f=s[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(l=h.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(h.x,h.p.x,-1,i);h=h.p}l=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}}function Nh(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Fh(t){return Rc(t[0])<=Cc?t[0]:Uc(t[0])*((Rc(t[0])+Cc)%Oc-Cc)}function jh(t,e){var n=Fh(e),r=e[1],i=qc(r),o=[qc(n),-Fc(n),0],a=0,s=0,u=new k;1===i?r=kc+Tc:-1===i&&(r=-kc-Tc);for(var l=0,c=t.length;l<c;++l)if(h=(f=t[l]).length)for(var f,h,d=f[h-1],p=Fh(d),m=d[1]/2+Pc,g=qc(m),y=Fc(m),v=0;v<h;++v,p=_,g=w,y=M,d=x){var x=f[v],_=Fh(x),b=x[1]/2+Pc,w=qc(b),M=Fc(b),A=_-p,E=A>=0?1:-1,T=E*A,S=T>Cc,C=g*w;if(u.add(Nc(C*E*qc(T),y*M+C*Fc(T))),a+=S?A+E*Oc:A,S^p>=n^_>=n){var P=Of(kf(d),kf(x));Rf(P);var O=Of(o,P);Rf(O);var L=(S^A>=0?-1:1)*Kc(O[2]);(r>L||r===L&&(P[0]||P[1]))&&(s+=S^A>=0?1:-1)}}return(a<-Tc||a<Tc&&u<-Sc)^1&s}function zh(t,e,n,r){return function(i){var o,a,s,u=e(i),l=Lh(),c=e(l),f=!1,h={point:d,lineStart:m,lineEnd:g,polygonStart:function(){h.point=y,h.lineStart=v,h.lineEnd=x,a=[],o=[]},polygonEnd:function(){h.point=d,h.lineStart=m,h.lineEnd=g,a=kt(a);var t=jh(o,r);a.length?(f||(i.polygonStart(),f=!0),Dh(a,Bh,t,n,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,n){t(e,n)&&i.point(e,n)}function p(t,e){u.point(t,e)}function m(){h.point=p,u.lineStart()}function g(){h.point=d,u.lineEnd()}function y(t,e){s.push([t,e]),c.point(t,e)}function v(){c.lineStart(),s=[]}function x(){y(s[0][0],s[0][1]),c.lineEnd();var t,e,n,r,u=c.clean(),h=l.result(),d=h.length;if(s.pop(),o.push(s),s=null,d)if(1&u){if((e=(n=h[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else d>1&&2&u&&h.push(h.pop().concat(h.shift())),a.push(h.filter(Gh))}return h}}function Gh(t){return t.length>1}function Bh(t,e){return((t=t.x)[0]<0?t[1]-kc-Tc:kc-t[1])-((e=e.x)[0]<0?e[1]-kc-Tc:kc-e[1])}Mh.invert=Mh;var Vh=zh(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Cc:-Cc,u=Rc(o-n);Rc(u-Cc)<Tc?(t.point(n,r=(r+a)/2>0?kc:-kc),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=Cc&&(Rc(n-i)<Tc&&(n-=i*Tc),Rc(o-s)<Tc&&(o-=s*Tc),r=function(t,e,n,r){var i,o,a=qc(t-n);return Rc(a)>Tc?Dc((qc(e)*(o=Fc(r))*qc(n)-qc(r)*(i=Fc(e))*qc(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*kc,r.point(-Cc,i),r.point(0,i),r.point(Cc,i),r.point(Cc,0),r.point(Cc,-i),r.point(0,-i),r.point(-Cc,-i),r.point(-Cc,0),r.point(-Cc,i);else if(Rc(t[0]-e[0])>Tc){var o=t[0]<e[0]?Cc:-Cc;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-Cc,-kc]);function qh(t){var e=Fc(t),n=2*Ic,r=e>0,i=Rc(e)>Tc;function o(t,n){return Fc(t)*Fc(n)>e}function a(t,n,r){var i=[1,0,0],o=Of(kf(t),kf(n)),a=Pf(o,o),s=o[0],u=a-s*s;if(!u)return!r&&t;var l=e*a/u,c=-e*s/u,f=Of(i,o),h=If(i,l);Lf(h,If(o,c));var d=f,p=Pf(h,d),m=Pf(d,d),g=p*p-m*(Pf(h,h)-1);if(!(g<0)){var y=Hc(g),v=If(d,(-p-y)/m);if(Lf(v,h),v=Cf(v),!r)return v;var x,_=t[0],b=n[0],w=t[1],M=n[1];b<_&&(x=_,_=b,b=x);var A=b-_,E=Rc(A-Cc)<Tc;if(!E&&M<w&&(x=w,w=M,M=x),E||A<Tc?E?w+M>0^v[1]<(Rc(v[0]-_)<Tc?w:M):w<=v[1]&&v[1]<=M:A>Cc^(_<=v[0]&&v[0]<=b)){var T=If(d,(-p+y)/m);return Lf(T,h),[v,Cf(T)]}}}function s(e,n){var i=r?t:Cc-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return zh(o,function(t){var e,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,h){var d,p=[f,h],m=o(f,h),g=r?m?0:s(f,h):m?s(f+(f<0?Cc:-Cc),h):0;if(!e&&(l=u=m)&&t.lineStart(),m!==u&&(!(d=a(e,p))||Ih(e,d)||Ih(p,d))&&(p[2]=1),m!==u)c=0,m?(t.lineStart(),d=a(p,e),t.point(d[0],d[1])):(d=a(e,p),t.point(d[0],d[1],2),t.lineEnd()),e=d;else if(i&&e&&r^m){var y;g&n||!(y=a(p,e,!0))||(c=0,r?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1],3)))}!m||e&&Ih(e,p)||t.point(p[0],p[1]),e=p,u=m,n=g},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}},function(e,r,i,o){kh(o,t,n,i,e,r)},r?[0,-t]:[-Cc,t-Cc])}var Uh,Hh,Wh,Xh,Kh=1e9,Qh=-Kh;function Yh(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,l){var c=0,f=0;if(null==i||(c=a(i,s))!==(f=a(o,s))||u(i,o)<0^s>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+s+4)%4)!==f);else l.point(o[0],o[1])}function a(r,i){return Rc(r[0]-t)<Tc?i>0?0:3:Rc(r[0]-n)<Tc?i>0?2:1:Rc(r[1]-e)<Tc?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,l,c,f,h,d,p,m,g,y,v,x=a,_=Lh(),b={point:w,lineStart:function(){b.point=M,l&&l.push(c=[]);y=!0,g=!1,p=m=NaN},lineEnd:function(){u&&(M(f,h),d&&g&&_.rejoin(),u.push(_.result()));b.point=w,g&&x.lineEnd()},polygonStart:function(){x=_,u=[],l=[],v=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var o,a,s=l[n],u=1,c=s.length,f=s[0],h=f[0],d=f[1];u<c;++u)o=h,a=d,h=(f=s[u])[0],d=f[1],a<=r?d>r&&(h-o)*(r-a)>(d-a)*(t-o)&&++e:d<=r&&(h-o)*(r-a)<(d-a)*(t-o)&&--e;return e}(),n=v&&e,i=(u=kt(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Dh(u,s,e,o,a),a.polygonEnd());x=a,u=l=c=null}};function w(t,e){i(t,e)&&x.point(t,e)}function M(o,a){var s=i(o,a);if(l&&c.push([o,a]),y)f=o,h=a,d=s,y=!1,s&&(x.lineStart(),x.point(o,a));else if(s&&g)x.point(o,a);else{var u=[p=Math.max(Qh,Math.min(Kh,p)),m=Math.max(Qh,Math.min(Kh,m))],_=[o=Math.max(Qh,Math.min(Kh,o)),a=Math.max(Qh,Math.min(Kh,a))];!function(t,e,n,r,i,o){var a,s=t[0],u=t[1],l=0,c=1,f=e[0]-s,h=e[1]-u;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<c&&(c=a)}return l>0&&(t[0]=s+l*f,t[1]=u+l*h),c<1&&(e[0]=s+c*f,e[1]=u+c*h),!0}}}}}(u,_,t,e,n,r)?s&&(x.lineStart(),x.point(o,a),v=!1):(g||(x.lineStart(),x.point(u[0],u[1])),x.point(_[0],_[1]),s||x.lineEnd(),v=!1)}p=o,m=a,g=s}return b}}function $h(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=Yh(r,i,o,a)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[r,i],[o,a]]}}}var Zh={sphere:Yc,point:Yc,lineStart:function(){Zh.point=td,Zh.lineEnd=Jh},lineEnd:Yc,polygonStart:Yc,polygonEnd:Yc};function Jh(){Zh.point=Zh.lineEnd=Yc}function td(t,e){Hh=t*=Ic,Wh=qc(e*=Ic),Xh=Fc(e),Zh.point=ed}function ed(t,e){t*=Ic;var n=qc(e*=Ic),r=Fc(e),i=Rc(t-Hh),o=Fc(i),a=r*qc(i),s=Xh*n-Wh*r*o,u=Wh*n+Xh*r*o;Uh.add(Nc(Hc(a*a+s*s),u)),Hh=t,Wh=n,Xh=r}function nd(t){return Uh=new k,nf(t,Zh),+Uh}var rd=[null,null],id={type:"LineString",coordinates:rd};function od(t,e){return rd[0]=t,rd[1]=e,nd(id)}var ad={Feature:function(t,e){return ud(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(ud(n[r].geometry,e))return!0;return!1}},sd={Sphere:function(){return!0},Point:function(t,e){return ld(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(ld(n[r],e))return!0;return!1},LineString:function(t,e){return cd(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(cd(n[r],e))return!0;return!1},Polygon:function(t,e){return fd(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(fd(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(ud(n[r],e))return!0;return!1}};function ud(t,e){return!(!t||!sd.hasOwnProperty(t.type))&&sd[t.type](t,e)}function ld(t,e){return 0===od(t,e)}function cd(t,e){for(var n,r,i,o=0,a=t.length;o<a;o++){if(0===(r=od(t[o],e)))return!0;if(o>0&&(i=od(t[o],t[o-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<Sc*i)return!0;n=r}return!1}function fd(t,e){return!!jh(t.map(hd),dd(e))}function hd(t){return(t=t.map(dd)).pop(),t}function dd(t){return[t[0]*Ic,t[1]*Ic]}function pd(t,e){return(t&&ad.hasOwnProperty(t.type)?ad[t.type]:ud)(t,e)}function md(t,e,n){var r=It(t,e-Tc,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function gd(t,e,n){var r=It(t,e-Tc,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function yd(){var t,e,n,r,i,o,a,s,u,l,c,f,h=10,d=h,p=90,m=360,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return It(jc(r/p)*p,n,p).map(c).concat(It(jc(s/m)*m,a,m).map(f)).concat(It(jc(e/h)*h,t,h).filter(function(t){return Rc(t%p)>Tc}).map(u)).concat(It(jc(o/d)*d,i,d).filter(function(t){return Rc(t%m)>Tc}).map(l))}return y.lines=function(){return v().map(function(t){return{type:"LineString",coordinates:t}})},y.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(f(a).slice(1),c(n).reverse().slice(1),f(s).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.extentMajor(t).extentMinor(t):y.extentMinor()},y.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),y.precision(g)):[[r,s],[n,a]]},y.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),y.precision(g)):[[e,o],[t,i]]},y.step=function(t){return arguments.length?y.stepMajor(t).stepMinor(t):y.stepMinor()},y.stepMajor=function(t){return arguments.length?(p=+t[0],m=+t[1],y):[p,m]},y.stepMinor=function(t){return arguments.length?(h=+t[0],d=+t[1],y):[h,d]},y.precision=function(h){return arguments.length?(g=+h,u=md(o,i,90),l=gd(e,t,g),c=md(s,a,90),f=gd(r,n,g),y):g},y.extentMajor([[-180,-90+Tc],[180,90-Tc]]).extentMinor([[-180,-80-Tc],[180,80+Tc]])}function vd(){return yd()()}function xd(t,e){var n=t[0]*Ic,r=t[1]*Ic,i=e[0]*Ic,o=e[1]*Ic,a=Fc(r),s=qc(r),u=Fc(o),l=qc(o),c=a*Fc(n),f=a*qc(n),h=u*Fc(i),d=u*qc(i),p=2*Kc(Hc(Qc(o-r)+a*u*Qc(i-n))),m=qc(p),g=p?function(t){var e=qc(t*=p)/m,n=qc(p-t)/m,r=n*c+e*h,i=n*f+e*d,o=n*s+e*l;return[Nc(i,r)*Lc,Nc(o,Hc(r*r+i*i))*Lc]}:function(){return[n*Lc,r*Lc]};return g.distance=p,g}var _d,bd,wd,Md,Ad=t=>t,Ed=new k,Td=new k,Sd={point:Yc,lineStart:Yc,lineEnd:Yc,polygonStart:function(){Sd.lineStart=Cd,Sd.lineEnd=Od},polygonEnd:function(){Sd.lineStart=Sd.lineEnd=Sd.point=Yc,Ed.add(Rc(Td)),Td=new k},result:function(){var t=Ed/2;return Ed=new k,t}};function Cd(){Sd.point=kd}function kd(t,e){Sd.point=Pd,_d=wd=t,bd=Md=e}function Pd(t,e){Td.add(Md*t-wd*e),wd=t,Md=e}function Od(){Pd(_d,bd)}var Ld=Sd,Id=1/0,Rd=Id,Dd=-Id,Nd=Dd,Fd={point:function(t,e){t<Id&&(Id=t);t>Dd&&(Dd=t);e<Rd&&(Rd=e);e>Nd&&(Nd=e)},lineStart:Yc,lineEnd:Yc,polygonStart:Yc,polygonEnd:Yc,result:function(){var t=[[Id,Rd],[Dd,Nd]];return Dd=Nd=-(Rd=Id=1/0),t}};var jd,zd,Gd,Bd,Vd=Fd,qd=0,Ud=0,Hd=0,Wd=0,Xd=0,Kd=0,Qd=0,Yd=0,$d=0,Zd={point:Jd,lineStart:tp,lineEnd:rp,polygonStart:function(){Zd.lineStart=ip,Zd.lineEnd=op},polygonEnd:function(){Zd.point=Jd,Zd.lineStart=tp,Zd.lineEnd=rp},result:function(){var t=$d?[Qd/$d,Yd/$d]:Kd?[Wd/Kd,Xd/Kd]:Hd?[qd/Hd,Ud/Hd]:[NaN,NaN];return qd=Ud=Hd=Wd=Xd=Kd=Qd=Yd=$d=0,t}};function Jd(t,e){qd+=t,Ud+=e,++Hd}function tp(){Zd.point=ep}function ep(t,e){Zd.point=np,Jd(Gd=t,Bd=e)}function np(t,e){var n=t-Gd,r=e-Bd,i=Hc(n*n+r*r);Wd+=i*(Gd+t)/2,Xd+=i*(Bd+e)/2,Kd+=i,Jd(Gd=t,Bd=e)}function rp(){Zd.point=Jd}function ip(){Zd.point=ap}function op(){sp(jd,zd)}function ap(t,e){Zd.point=sp,Jd(jd=Gd=t,zd=Bd=e)}function sp(t,e){var n=t-Gd,r=e-Bd,i=Hc(n*n+r*r);Wd+=i*(Gd+t)/2,Xd+=i*(Bd+e)/2,Kd+=i,Qd+=(i=Bd*t-Gd*e)*(Gd+t),Yd+=i*(Bd+e),$d+=3*i,Jd(Gd=t,Bd=e)}var up=Zd;function lp(t){this._context=t}lp.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Oc)}},result:Yc};var cp,fp,hp,dp,pp,mp=new k,gp={point:Yc,lineStart:function(){gp.point=yp},lineEnd:function(){cp&&vp(fp,hp),gp.point=Yc},polygonStart:function(){cp=!0},polygonEnd:function(){cp=null},result:function(){var t=+mp;return mp=new k,t}};function yp(t,e){gp.point=vp,fp=dp=t,hp=pp=e}function vp(t,e){dp-=t,pp-=e,mp.add(Hc(dp*dp+pp*pp)),dp=t,pp=e}var xp=gp;let _p,bp,wp,Mp;class Ap{constructor(t){this._append=null==t?Ep:function(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return Ep;if(e!==_p){const t=10**e;_p=e,bp=function(e){let n=1;this._+=e[0];for(const r=e.length;n<r;++n)this._+=Math.round(arguments[n]*t)/t+e[n]}}return bp}(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:this._append`M${t},${e}`,this._point=1;break;case 1:this._append`L${t},${e}`;break;default:if(this._append`M${t},${e}`,this._radius!==wp||this._append!==bp){const t=this._radius,e=this._;this._="",this._append`m0,${t}a${t},${t} 0 1,1 0,${-2*t}a${t},${t} 0 1,1 0,${2*t}z`,wp=t,bp=this._append,Mp=this._,this._=e}this._+=Mp}}result(){const t=this._;return this._="",t.length?t:null}}function Ep(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Tp(t,e){let n,r,i=3,o=4.5;function a(t){return t&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),nf(t,n(r))),r.result()}return a.area=function(t){return nf(t,n(Ld)),Ld.result()},a.measure=function(t){return nf(t,n(xp)),xp.result()},a.bounds=function(t){return nf(t,n(Vd)),Vd.result()},a.centroid=function(t){return nf(t,n(up)),up.result()},a.projection=function(e){return arguments.length?(n=null==e?(t=null,Ad):(t=e).stream,a):t},a.context=function(t){return arguments.length?(r=null==t?(e=null,new Ap(i)):new lp(e=t),"function"!=typeof o&&r.pointRadius(o),a):e},a.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),a):o},a.digits=function(t){if(!arguments.length)return i;if(null==t)i=null;else{const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);i=e}return null===e&&(r=new Ap(i)),a},a.projection(t).digits(i).context(e)}function Sp(t){return{stream:Cp(t)}}function Cp(t){return function(e){var n=new kp;for(var r in t)n[r]=t[r];return n.stream=e,n}}function kp(){}function Pp(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),nf(n,t.stream(Vd)),e(Vd.result()),null!=r&&t.clipExtent(r),t}function Op(t,e,n){return Pp(t,function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])},n)}function Lp(t,e,n){return Op(t,[[0,0],e],n)}function Ip(t,e,n){return Pp(t,function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])},n)}function Rp(t,e,n){return Pp(t,function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])},n)}kp.prototype={constructor:kp,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Dp=16,Np=Fc(30*Ic);function Fp(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,l,c,f,h,d,p,m,g){var y=l-r,v=c-i,x=y*y+v*v;if(x>4*e&&m--){var _=a+h,b=s+d,w=u+p,M=Hc(_*_+b*b+w*w),A=Kc(w/=M),E=Rc(Rc(w)-1)<Tc||Rc(o-f)<Tc?(o+f)/2:Nc(b,_),T=t(E,A),S=T[0],C=T[1],k=S-r,P=C-i,O=v*k-y*P;(O*O/x>e||Rc((y*k+v*P)/x-.5)>.3||a*h+s*d+u*p<Np)&&(n(r,i,o,a,s,u,S,C,E,_/=M,b/=M,w,m,g),g.point(S,C),n(S,C,E,_,b,w,l,c,f,h,d,p,m,g))}}return function(e){var r,i,o,a,s,u,l,c,f,h,d,p,m={point:g,lineStart:y,lineEnd:x,polygonStart:function(){e.polygonStart(),m.lineStart=_},polygonEnd:function(){e.polygonEnd(),m.lineStart=y}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){c=NaN,m.point=v,e.lineStart()}function v(r,i){var o=kf([r,i]),a=t(r,i);n(c,f,l,h,d,p,c=a[0],f=a[1],l=r,h=o[0],d=o[1],p=o[2],Dp,e),e.point(c,f)}function x(){m.point=g,e.lineEnd()}function _(){y(),m.point=b,m.lineEnd=w}function b(t,e){v(r=t,e),i=c,o=f,a=h,s=d,u=p,m.point=v}function w(){n(c,f,l,h,d,p,i,o,r,a,s,u,Dp,e),m.lineEnd=x,x()}return m}}(t,e):function(t){return Cp({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var jp=Cp({point:function(t,e){this.stream.point(t*Ic,e*Ic)}});function zp(t,e,n,r,i,o){if(!o)return function(t,e,n,r,i){function o(o,a){return[e+t*(o*=r),n-t*(a*=i)]}return o.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},o}(t,e,n,r,i);var a=Fc(o),s=qc(o),u=a*t,l=s*t,c=a/t,f=s/t,h=(s*n-a*e)/t,d=(s*e+a*n)/t;function p(t,o){return[u*(t*=r)-l*(o*=i)+e,n-l*t-u*o]}return p.invert=function(t,e){return[r*(c*t-f*e+h),i*(d-f*t-c*e)]},p}function Gp(t){return Bp(function(){return t})()}function Bp(t){var e,n,r,i,o,a,s,u,l,c,f=150,h=480,d=250,p=0,m=0,g=0,y=0,v=0,x=0,_=1,b=1,w=null,M=Vh,A=null,E=Ad,T=.5;function S(t){return u(t[0]*Ic,t[1]*Ic)}function C(t){return(t=u.invert(t[0],t[1]))&&[t[0]*Lc,t[1]*Lc]}function k(){var t=zp(f,0,0,_,b,x).apply(null,e(p,m)),r=zp(f,h-t[0],d-t[1],_,b,x);return n=Ah(g,y,v),s=wh(e,r),u=wh(n,s),a=Fp(s,T),P()}function P(){return l=c=null,S}return S.stream=function(t){return l&&c===t?l:l=jp(function(t){return Cp({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(M(a(E(c=t)))))},S.preclip=function(t){return arguments.length?(M=t,w=void 0,P()):M},S.postclip=function(t){return arguments.length?(E=t,A=r=i=o=null,P()):E},S.clipAngle=function(t){return arguments.length?(M=+t?qh(w=t*Ic):(w=null,Vh),P()):w*Lc},S.clipExtent=function(t){return arguments.length?(E=null==t?(A=r=i=o=null,Ad):Yh(A=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),P()):null==A?null:[[A,r],[i,o]]},S.scale=function(t){return arguments.length?(f=+t,k()):f},S.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],k()):[h,d]},S.center=function(t){return arguments.length?(p=t[0]%360*Ic,m=t[1]%360*Ic,k()):[p*Lc,m*Lc]},S.rotate=function(t){return arguments.length?(g=t[0]%360*Ic,y=t[1]%360*Ic,v=t.length>2?t[2]%360*Ic:0,k()):[g*Lc,y*Lc,v*Lc]},S.angle=function(t){return arguments.length?(x=t%360*Ic,k()):x*Lc},S.reflectX=function(t){return arguments.length?(_=t?-1:1,k()):_<0},S.reflectY=function(t){return arguments.length?(b=t?-1:1,k()):b<0},S.precision=function(t){return arguments.length?(a=Fp(s,T=t*t),P()):Hc(T)},S.fitExtent=function(t,e){return Op(S,t,e)},S.fitSize=function(t,e){return Lp(S,t,e)},S.fitWidth=function(t,e){return Ip(S,t,e)},S.fitHeight=function(t,e){return Rp(S,t,e)},function(){return e=t.apply(this,arguments),S.invert=e.invert&&C,k()}}function Vp(t){var e=0,n=Cc/3,r=Bp(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Ic,n=t[1]*Ic):[e*Lc,n*Lc]},i}function qp(t,e){var n=qc(t),r=(n+qc(e))/2;if(Rc(r)<Tc)return function(t){var e=Fc(t);function n(t,n){return[t*e,qc(n)/e]}return n.invert=function(t,n){return[t/e,Kc(n*e)]},n}(t);var i=1+n*(2*r-n),o=Hc(i)/r;function a(t,e){var n=Hc(i-2*r*qc(e))/r;return[n*qc(t*=r),o-n*Fc(t)]}return a.invert=function(t,e){var n=o-e,a=Nc(t,Rc(n))*Uc(n);return n*r<0&&(a-=Cc*Uc(t)*Uc(n)),[a/r,Kc((i-(t*t+n*n)*r*r)/(2*r))]},a}function Up(){return Vp(qp).scale(155.424).center([0,33.6442])}function Hp(){return Up().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Wp(){var t,e,n,r,i,o,a=Hp(),s=Up().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=Up().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){o=[t,e]}};function c(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function f(){return t=e=null,c}return c.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:a).invert(t)},c.stream=function(n){return t&&e===n?t:(r=[a.stream(e=n),s.stream(n),u.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},c.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),u.precision(t),f()):a.precision()},c.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),u.scale(t),c.translate(a.translate())):a.scale()},c.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],c=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,c-.238*e],[o+.455*e,c+.238*e]]).stream(l),r=s.translate([o-.307*e,c+.201*e]).clipExtent([[o-.425*e+Tc,c+.12*e+Tc],[o-.214*e-Tc,c+.234*e-Tc]]).stream(l),i=u.translate([o-.205*e,c+.212*e]).clipExtent([[o-.214*e+Tc,c+.166*e+Tc],[o-.115*e-Tc,c+.234*e-Tc]]).stream(l),f()},c.fitExtent=function(t,e){return Op(c,t,e)},c.fitSize=function(t,e){return Lp(c,t,e)},c.fitWidth=function(t,e){return Ip(c,t,e)},c.fitHeight=function(t,e){return Rp(c,t,e)},c.scale(1070)}function Xp(t){return function(e,n){var r=Fc(e),i=Fc(n),o=t(r*i);return o===1/0?[2,0]:[o*i*qc(e),o*qc(n)]}}function Kp(t){return function(e,n){var r=Hc(e*e+n*n),i=t(r),o=qc(i),a=Fc(i);return[Nc(e*o,r*a),Kc(r&&n*o/r)]}}var Qp=Xp(function(t){return Hc(2/(1+t))});function Yp(){return Gp(Qp).scale(124.75).clipAngle(179.999)}Qp.invert=Kp(function(t){return 2*Kc(t/2)});var $p=Xp(function(t){return(t=Xc(t))&&t/qc(t)});function Zp(){return Gp($p).scale(79.4188).clipAngle(179.999)}function Jp(t,e){return[t,Bc(Wc((kc+e)/2))]}function tm(){return em(Jp).scale(961/Oc)}function em(t){var e,n,r,i=Gp(t),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,l=null;function c(){var o=Cc*a(),s=i(Ch(i.rotate()).invert([0,0]));return u(null==l?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:t===Jp?[[Math.max(s[0]-o,l),e],[Math.min(s[0]+o,n),r]]:[[l,Math.max(s[1]-o,e)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),c()):a()},i.translate=function(t){return arguments.length?(s(t),c()):s()},i.center=function(t){return arguments.length?(o(t),c()):o()},i.clipExtent=function(t){return arguments.length?(null==t?l=e=n=r=null:(l=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),c()):null==l?null:[[l,e],[n,r]]},c()}function nm(t){return Wc((kc+t)/2)}function rm(t,e){var n=Fc(t),r=t===e?qc(t):Bc(n/Fc(e))/Bc(nm(e)/nm(t)),i=n*Vc(nm(t),r)/r;if(!r)return Jp;function o(t,e){i>0?e<-kc+Tc&&(e=-kc+Tc):e>kc-Tc&&(e=kc-Tc);var n=i/Vc(nm(e),r);return[n*qc(r*t),i-n*Fc(r*t)]}return o.invert=function(t,e){var n=i-e,o=Uc(r)*Hc(t*t+n*n),a=Nc(t,Rc(n))*Uc(n);return n*r<0&&(a-=Cc*Uc(t)*Uc(n)),[a/r,2*Dc(Vc(i/o,1/r))-kc]},o}function im(){return Vp(rm).scale(109.5).parallels([30,30])}function om(t,e){return[t,e]}function am(){return Gp(om).scale(152.63)}function sm(t,e){var n=Fc(t),r=t===e?qc(t):(n-Fc(e))/(e-t),i=n/r+t;if(Rc(r)<Tc)return om;function o(t,e){var n=i-e,o=r*t;return[n*qc(o),i-n*Fc(o)]}return o.invert=function(t,e){var n=i-e,o=Nc(t,Rc(n))*Uc(n);return n*r<0&&(o-=Cc*Uc(t)*Uc(n)),[o/r,i-Uc(r)*Hc(t*t+n*n)]},o}function um(){return Vp(sm).scale(131.154).center([0,13.9389])}$p.invert=Kp(function(t){return t}),Jp.invert=function(t,e){return[t,2*Dc(zc(e))-kc]},om.invert=om;var lm=1.340264,cm=-.081106,fm=893e-6,hm=.003796,dm=Hc(3)/2;function pm(t,e){var n=Kc(dm*qc(e)),r=n*n,i=r*r*r;return[t*Fc(n)/(dm*(lm+3*cm*r+i*(7*fm+9*hm*r))),n*(lm+cm*r+i*(fm+hm*r))]}function mm(){return Gp(pm).scale(177.158)}function gm(t,e){var n=Fc(e),r=Fc(t)*n;return[n*qc(t)/r,qc(e)/r]}function ym(){return Gp(gm).scale(144.049).clipAngle(60)}function vm(){var t,e,n,r,i,o,a,s=1,u=0,l=0,c=1,f=1,h=0,d=null,p=1,m=1,g=Cp({point:function(t,e){var n=x([t,e]);this.stream.point(n[0],n[1])}}),y=Ad;function v(){return p=s*c,m=s*f,o=a=null,x}function x(n){var r=n[0]*p,i=n[1]*m;if(h){var o=i*t-r*e;r=r*t+i*e,i=o}return[r+u,i+l]}return x.invert=function(n){var r=n[0]-u,i=n[1]-l;if(h){var o=i*t+r*e;r=r*t-i*e,i=o}return[r/p,i/m]},x.stream=function(t){return o&&a===t?o:o=g(y(a=t))},x.postclip=function(t){return arguments.length?(y=t,d=n=r=i=null,v()):y},x.clipExtent=function(t){return arguments.length?(y=null==t?(d=n=r=i=null,Ad):Yh(d=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),v()):null==d?null:[[d,n],[r,i]]},x.scale=function(t){return arguments.length?(s=+t,v()):s},x.translate=function(t){return arguments.length?(u=+t[0],l=+t[1],v()):[u,l]},x.angle=function(n){return arguments.length?(e=qc(h=n%360*Ic),t=Fc(h),v()):h*Lc},x.reflectX=function(t){return arguments.length?(c=t?-1:1,v()):c<0},x.reflectY=function(t){return arguments.length?(f=t?-1:1,v()):f<0},x.fitExtent=function(t,e){return Op(x,t,e)},x.fitSize=function(t,e){return Lp(x,t,e)},x.fitWidth=function(t,e){return Ip(x,t,e)},x.fitHeight=function(t,e){return Rp(x,t,e)},x}function xm(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function _m(){return Gp(xm).scale(175.295)}function bm(t,e){return[Fc(e)*qc(t),qc(e)]}function wm(){return Gp(bm).scale(249.5).clipAngle(90+Tc)}function Mm(t,e){var n=Fc(e),r=1+Fc(t)*n;return[n*qc(t)/r,qc(e)/r]}function Am(){return Gp(Mm).scale(250).clipAngle(142)}function Em(t,e){return[Bc(Wc((kc+e)/2)),-t]}function Tm(){var t=em(Em),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}function Sm(t,e){return t.parent===e.parent?1:2}function Cm(t,e){return t+e.x}function km(t,e){return Math.max(t,e.y)}function Pm(){var t=Sm,e=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter(function(e){var n=e.children;n?(e.x=function(t){return t.reduce(Cm,0)/t.length}(n),e.y=function(t){return 1+t.reduce(km,0)}(n)):(e.x=o?a+=t(e,o):0,e.y=0,o=e)});var s=function(t){for(var e;e=t.children;)t=e[0];return t}(i),u=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),l=s.x-t(s,u)/2,c=u.x+t(u,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-l)/(c-l)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function Om(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Lm(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=Rm)):void 0===e&&(e=Im);for(var n,r,i,o,a,s=new Fm(t),u=[s];n=u.pop();)if((i=e(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)u.push(r=i[o]=new Fm(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(Nm)}function Im(t){return t.children}function Rm(t){return Array.isArray(t)?t[1]:null}function Dm(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function Nm(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Fm(t){this.data=t,this.depth=this.height=0,this.parent=null}function jm(t){return null==t?null:zm(t)}function zm(t){if("function"!=typeof t)throw new Error;return t}function Gm(){return 0}function Bm(t){return function(){return t}}pm.invert=function(t,e){for(var n,r=e,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(lm+cm*i+o*(fm+hm*i))-e)/(lm+3*cm*i+o*(7*fm+9*hm*i)))*r)*i*i,!(Rc(n)<Sc));++a);return[dm*t*(lm+3*cm*i+o*(7*fm+9*hm*i))/Fc(r),Kc(qc(r)/dm)]},gm.invert=Kp(Dc),xm.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(Rc(n)>Tc&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},bm.invert=Kp(Kc),Mm.invert=Kp(function(t){return 2*Dc(t)}),Em.invert=function(t,e){return[-e,2*Dc(zc(t))-kc]},Fm.prototype=Lm.prototype={constructor:Fm,count:function(){return this.eachAfter(Om)},each:function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},eachAfter:function(t,e){for(var n,r,i,o=this,a=[o],s=[],u=-1;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)t.call(e,o,++u,this);return this},eachBefore:function(t,e){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(t.call(e,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return Lm(this).eachBefore(Dm)},[Symbol.iterator]:function*(){var t,e,n,r,i=this,o=[i];do{for(t=o.reverse(),o=[];i=t.pop();)if(yield i,e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n])}while(o.length)}};const Vm=1664525,qm=1013904223,Um=4294967296;function Hm(){let t=1;return()=>(t=(Vm*t+qm)%Um)/Um}function Wm(t){return Xm(t,Hm())}function Xm(t,e){for(var n,r,i=0,o=(t=function(t,e){let n,r,i=t.length;for(;i;)r=e()*i--|0,n=t[i],t[i]=t[r],t[r]=n;return t}(Array.from(t),e)).length,a=[];i<o;)n=t[i],r&&Ym(r,n)?++i:(r=Zm(a=Km(a,n)),i=0);return r}function Km(t,e){var n,r;if($m(e,t))return[e];for(n=0;n<t.length;++n)if(Qm(e,t[n])&&$m(Jm(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(Qm(Jm(t[n],t[r]),e)&&Qm(Jm(t[n],e),t[r])&&Qm(Jm(t[r],e),t[n])&&$m(tg(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function Qm(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function Ym(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function $m(t,e){for(var n=0;n<e.length;++n)if(!Ym(t,e[n]))return!1;return!0}function Zm(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return Jm(t[0],t[1]);case 3:return tg(t[0],t[1],t[2])}}function Jm(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,u=o-n,l=a-r,c=s-i,f=Math.sqrt(u*u+l*l);return{x:(n+o+u/f*c)/2,y:(r+a+l/f*c)/2,r:(f+i+s)/2}}function tg(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,u=e.r,l=n.x,c=n.y,f=n.r,h=r-a,d=r-l,p=i-s,m=i-c,g=u-o,y=f-o,v=r*r+i*i-o*o,x=v-a*a-s*s+u*u,_=v-l*l-c*c+f*f,b=d*p-h*m,w=(p*_-m*x)/(2*b)-r,M=(m*g-p*y)/b,A=(d*x-h*_)/(2*b)-i,E=(h*y-d*g)/b,T=M*M+E*E-1,S=2*(o+w*M+A*E),C=w*w+A*A-o*o,k=-(Math.abs(T)>1e-6?(S+Math.sqrt(S*S-4*T*C))/(2*T):C/S);return{x:r+w+M*k,y:i+A+E*k,r:k}}function eg(t,e,n){var r,i,o,a,s=t.x-e.x,u=t.y-e.y,l=s*s+u*u;l?(i=e.r+n.r,i*=i,a=t.r+n.r,i>(a*=a)?(r=(l+a-i)/(2*l),o=Math.sqrt(Math.max(0,a/l-r*r)),n.x=t.x-r*s-o*u,n.y=t.y-r*u+o*s):(r=(l+i-a)/(2*l),o=Math.sqrt(Math.max(0,i/l-r*r)),n.x=e.x+r*s-o*u,n.y=e.y+r*u+o*s)):(n.x=e.x+n.r,n.y=e.y)}function ng(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function rg(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function ig(t){this._=t,this.next=null,this.previous=null}function og(t,e){if(!(o=(t=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(t)).length))return 0;var n,r,i,o,a,s,u,l,c,f,h;if((n=t[0]).x=0,n.y=0,!(o>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;eg(r,n,i=t[2]),n=new ig(n),r=new ig(r),i=new ig(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;t:for(u=3;u<o;++u){eg(n._,r._,i=t[u]),i=new ig(i),l=r.next,c=n.previous,f=r._.r,h=n._.r;do{if(f<=h){if(ng(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue t}f+=l._.r,l=l.next}else{if(ng(c._,i._)){(n=c).next=r,r.previous=n,--u;continue t}h+=c._.r,c=c.previous}}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=rg(n);(i=i.next)!==r;)(s=rg(i))<a&&(n=i,a=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Xm(n,e),u=0;u<o;++u)(n=t[u]).x-=i.x,n.y-=i.y;return i.r}function ag(t){return og(t,Hm()),t}function sg(t){return Math.sqrt(t.value)}function ug(){var t=null,e=1,n=1,r=Gm;function i(i){const o=Hm();return i.x=e/2,i.y=n/2,t?i.eachBefore(lg(t)).eachAfter(cg(r,.5,o)).eachBefore(fg(1)):i.eachBefore(lg(sg)).eachAfter(cg(Gm,1,o)).eachAfter(cg(r,i.r/Math.min(e,n),o)).eachBefore(fg(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=jm(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:Bm(+t),i):r},i}function lg(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function cg(t,e,n){return function(r){if(i=r.children){var i,o,a,s=i.length,u=t(r)*e||0;if(u)for(o=0;o<s;++o)i[o].r+=u;if(a=og(i,n),u)for(o=0;o<s;++o)i[o].r-=u;r.r=a+u}}}function fg(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function hg(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function dg(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,l=t.value&&(r-e)/t.value;++s<u;)(o=a[s]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*l}function pg(){var t=1,e=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/o,i.eachBefore(function(t,e){return function(r){r.children&&dg(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,o=r.y0,a=r.x1-n,s=r.y1-n;a<i&&(i=a=(i+a)/2),s<o&&(o=s=(o+s)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=s}}(e,o)),r&&i.eachBefore(hg),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i}var mg={depth:-1},gg={},yg={};function vg(t){return t.id}function xg(t){return t.parentId}function _g(){var t,e=vg,n=xg;function r(r){var i,o,a,s,u,l,c,f,h=Array.from(r),d=e,p=n,m=new Map;if(null!=t){const e=h.map((e,n)=>function(t){t=`${t}`;let e=t.length;wg(t,e-1)&&!wg(t,e-2)&&(t=t.slice(0,-1));return"/"===t[0]?t:`/${t}`}(t(e,n,r))),n=e.map(bg),i=new Set(e).add("");for(const t of n)i.has(t)||(i.add(t),e.push(t),n.push(bg(t)),h.push(yg));d=(t,n)=>e[n],p=(t,e)=>n[e]}for(a=0,i=h.length;a<i;++a)o=h[a],l=h[a]=new Fm(o),null!=(c=d(o,a,r))&&(c+="")&&(f=l.id=c,m.set(f,m.has(f)?gg:l)),null!=(c=p(o,a,r))&&(c+="")&&(l.parent=c);for(a=0;a<i;++a)if(c=(l=h[a]).parent){if(!(u=m.get(c)))throw new Error("missing: "+c);if(u===gg)throw new Error("ambiguous: "+c);u.children?u.children.push(l):u.children=[l],l.parent=u}else{if(s)throw new Error("multiple roots");s=l}if(!s)throw new Error("no root");if(null!=t){for(;s.data===yg&&1===s.children.length;)s=s.children[0],--i;for(let t=h.length-1;t>=0&&(l=h[t]).data===yg;--t)l.data=null}if(s.parent=mg,s.eachBefore(function(t){t.depth=t.parent.depth+1,--i}).eachBefore(Nm),s.parent=null,i>0)throw new Error("cycle");return s}return r.id=function(t){return arguments.length?(e=jm(t),r):e},r.parentId=function(t){return arguments.length?(n=jm(t),r):n},r.path=function(e){return arguments.length?(t=jm(e),r):t},r}function bg(t){let e=t.length;if(e<2)return"";for(;--e>1&&!wg(t,e););return t.slice(0,e)}function wg(t,e){if("/"===t[e]){let n=0;for(;e>0&&"\\"===t[--e];)++n;if(!(1&n))return!0}return!1}function Mg(t,e){return t.parent===e.parent?1:2}function Ag(t){var e=t.children;return e?e[0]:t.t}function Eg(t){var e=t.children;return e?e[e.length-1]:t.t}function Tg(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Sg(t,e,n){return t.a.parent===e.parent?t.a:n}function Cg(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function kg(){var t=Mg,e=1,n=1,r=null;function i(i){var u=function(t){for(var e,n,r,i,o,a=new Cg(t,0),s=[a];e=s.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=e.children[i]=new Cg(r[i],i)),n.parent=e;return(a.parent=new Cg(null,0)).children=[a],a}(i);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)i.eachBefore(s);else{var l=i,c=i,f=i;i.eachBefore(function(t){t.x<l.x&&(l=t),t.x>c.x&&(c=t),t.depth>f.depth&&(f=t)});var h=l===c?1:t(l,c)/2,d=h-l.x,p=e/(c.x+h+d),m=n/(f.depth||1);i.eachBefore(function(t){t.x=(t.x+d)*p,t.y=t.depth*m})}return i}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,o=e,a=e,s=n,u=o.parent.children[0],l=o.m,c=a.m,f=s.m,h=u.m;s=Eg(s),o=Ag(o),s&&o;)u=Ag(u),(a=Eg(a)).a=e,(i=s.z+f-o.z-l+t(s._,o._))>0&&(Tg(Sg(s,e,r),e,i),l+=i,c+=i),f+=s.m,l+=o.m,h+=u.m,c+=a.m;s&&!Eg(a)&&(a.t=s,a.m+=f-c),o&&!Ag(u)&&(u.t=o,u.m+=l-h,r=e)}return r}(e,i,e.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function Pg(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,l=t.value&&(i-n)/t.value;++s<u;)(o=a[s]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*l}Cg.prototype=Object.create(Fm.prototype);var Og=(1+Math.sqrt(5))/2;function Lg(t,e,n,r,i,o){for(var a,s,u,l,c,f,h,d,p,m,g,y=[],v=e.children,x=0,_=0,b=v.length,w=e.value;x<b;){u=i-n,l=o-r;do{c=v[_++].value}while(!c&&_<b);for(f=h=c,g=c*c*(m=Math.max(l/u,u/l)/(w*t)),p=Math.max(h/g,g/f);_<b;++_){if(c+=s=v[_].value,s<f&&(f=s),s>h&&(h=s),g=c*c*m,(d=Math.max(h/g,g/f))>p){c-=s;break}p=d}y.push(a={value:c,dice:u<l,children:v.slice(x,_)}),a.dice?dg(a,n,r,i,w?r+=l*c/w:o):Pg(a,n,r,w?n+=u*c/w:i,o),w-=c,x=_}return y}var Ig=function t(e){function n(t,n,r,i,o){Lg(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Og);function Rg(){var t=Ig,e=!1,n=1,r=1,i=[0],o=Gm,a=Gm,s=Gm,u=Gm,l=Gm;function c(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(f),i=[0],e&&t.eachBefore(hg),t}function f(e){var n=i[e.depth],r=e.x0+n,c=e.y0+n,f=e.x1-n,h=e.y1-n;f<r&&(r=f=(r+f)/2),h<c&&(c=h=(c+h)/2),e.x0=r,e.y0=c,e.x1=f,e.y1=h,e.children&&(n=i[e.depth+1]=o(e)/2,r+=l(e)-n,c+=a(e)-n,(f-=s(e)-n)<r&&(r=f=(r+f)/2),(h-=u(e)-n)<c&&(c=h=(c+h)/2),t(e,r,c,f,h))}return c.round=function(t){return arguments.length?(e=!!t,c):e},c.size=function(t){return arguments.length?(n=+t[0],r=+t[1],c):[n,r]},c.tile=function(e){return arguments.length?(t=zm(e),c):t},c.padding=function(t){return arguments.length?c.paddingInner(t).paddingOuter(t):c.paddingInner()},c.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:Bm(+t),c):o},c.paddingOuter=function(t){return arguments.length?c.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):c.paddingTop()},c.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:Bm(+t),c):a},c.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:Bm(+t),c):s},c.paddingBottom=function(t){return arguments.length?(u="function"==typeof t?t:Bm(+t),c):u},c.paddingLeft=function(t){return arguments.length?(l="function"==typeof t?t:Bm(+t),c):l},c}function Dg(t,e,n,r,i){var o,a,s=t.children,u=s.length,l=new Array(u+1);for(l[0]=a=o=0;o<u;++o)l[o+1]=a+=s[o].value;!function t(e,n,r,i,o,a,u){if(e>=n-1){var c=s[e];return c.x0=i,c.y0=o,c.x1=a,void(c.y1=u)}var f=l[e],h=r/2+f,d=e+1,p=n-1;for(;d<p;){var m=d+p>>>1;l[m]<h?d=m+1:p=m}h-l[d-1]<l[d]-h&&e+1<d&&--d;var g=l[d]-f,y=r-g;if(a-i>u-o){var v=r?(i*y+a*g)/r:a;t(e,d,g,i,o,v,u),t(d,n,y,v,o,a,u)}else{var x=r?(o*y+u*g)/r:u;t(e,d,g,i,o,a,x),t(d,n,y,i,x,a,u)}}(0,u,t.value,e,n,r,i)}function Ng(t,e,n,r,i){(1&t.depth?Pg:dg)(t,e,n,r,i)}var Fg=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,u,l,c,f=-1,h=a.length,d=t.value;++f<h;){for(u=(s=a[f]).children,l=s.value=0,c=u.length;l<c;++l)s.value+=u[l].value;s.dice?dg(s,n,r,i,d?r+=(o-r)*s.value/d:o):Pg(s,n,r,d?n+=(i-n)*s.value/d:i,o),d-=s.value}else t._squarify=a=Lg(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Og);function jg(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function zg(t,e){var n=Dr(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}}function Gg(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Bg(t){return((t=Math.exp(t))+1/t)/2}var Vg=function t(e,n,r){function i(t,i){var o,a,s=t[0],u=t[1],l=t[2],c=i[0],f=i[1],h=i[2],d=c-s,p=f-u,m=d*d+p*p;if(m<1e-12)a=Math.log(h/l)/e,o=function(t){return[s+t*d,u+t*p,l*Math.exp(e*t*a)]};else{var g=Math.sqrt(m),y=(h*h-l*l+r*m)/(2*l*n*g),v=(h*h-l*l-r*m)/(2*h*n*g),x=Math.log(Math.sqrt(y*y+1)-y),_=Math.log(Math.sqrt(v*v+1)-v);a=(_-x)/e,o=function(t){var r=t*a,i=Bg(x),o=l/(n*g)*(i*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(e*r+x)-function(t){return((t=Math.exp(t))-1/t)/2}(x));return[s+o*d,u+o*p,l*i/Bg(e*r+x)]}}return o.duration=1e3*a*e/Math.SQRT2,o}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n;return t(n,r,r*r)},i}(Math.SQRT2,2,4);function qg(t){return function(e,n){var r=t((e=Er(e)).h,(n=Er(n)).h),i=Fr(e.s,n.s),o=Fr(e.l,n.l),a=Fr(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var Ug=qg(Dr),Hg=qg(Fr);function Wg(t,e){var n=Fr((t=Da(t)).l,(e=Da(e)).l),r=Fr(t.a,e.a),i=Fr(t.b,e.b),o=Fr(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}}function Xg(t){return function(e,n){var r=t((e=qa(e)).h,(n=qa(n)).h),i=Fr(e.c,n.c),o=Fr(e.l,n.l),a=Fr(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var Kg=Xg(Dr),Qg=Xg(Fr);function Yg(t){return function e(n){function r(e,r){var i=t((e=ts(e)).h,(r=ts(r)).h),o=Fr(e.s,r.s),a=Fr(e.l,r.l),s=Fr(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}var $g=Yg(Dr),Zg=Yg(Fr);function Jg(t,e){void 0===e&&(e=t,t=Zr);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}function ty(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}function ey(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[1]*i[0]-e[0]*i[1];return o/2}function ny(t){for(var e,n,r=-1,i=t.length,o=0,a=0,s=t[i-1],u=0;++r<i;)e=s,s=t[r],u+=n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o/(u*=3),a/u]}function ry(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function iy(t,e){return t[0]-e[0]||t[1]-e[1]}function oy(t){const e=t.length,n=[0,1];let r,i=2;for(r=2;r<e;++r){for(;i>1&&ry(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function ay(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(iy),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var o=oy(r),a=oy(i),s=a[0]===o[0],u=a[a.length-1]===o[o.length-1],l=[];for(e=o.length-1;e>=0;--e)l.push(t[r[o[e]][2]]);for(e=+s;e<a.length-u;++e)l.push(t[r[a[e]][2]]);return l}function sy(t,e){for(var n,r,i=t.length,o=t[i-1],a=e[0],s=e[1],u=o[0],l=o[1],c=!1,f=0;f<i;++f)n=(o=t[f])[0],(r=o[1])>s!=l>s&&a<(u-n)*(s-r)/(l-r)+n&&(c=!c),u=n,l=r;return c}function uy(t){for(var e,n,r=-1,i=t.length,o=t[i-1],a=o[0],s=o[1],u=0;++r<i;)e=a,n=s,e-=a=(o=t[r])[0],n-=s=o[1],u+=Math.hypot(e,n);return u}var ly=Math.random,cy=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(ly),fy=function t(e){function n(t,n){return arguments.length<2&&(n=t,t=0),t=Math.floor(t),n=Math.floor(n)-t,function(){return Math.floor(e()*n+t)}}return n.source=t,n}(ly),hy=function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var o;if(null!=r)o=r,r=null;else do{r=2*e()-1,o=2*e()-1,i=r*r+o*o}while(!i||i>1);return t+n*o*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(ly),dy=function t(e){var n=hy.source(e);function r(){var t=n.apply(this,arguments);return function(){return Math.exp(t())}}return r.source=t,r}(ly),py=function t(e){function n(t){return(t=+t)<=0?()=>0:function(){for(var n=0,r=t;r>1;--r)n+=e();return n+r*e()}}return n.source=t,n}(ly),my=function t(e){var n=py.source(e);function r(t){if(0===(t=+t))return e;var r=n(t);return function(){return r()/t}}return r.source=t,r}(ly),gy=function t(e){function n(t){return function(){return-Math.log1p(-e())/t}}return n.source=t,n}(ly),yy=function t(e){function n(t){if((t=+t)<0)throw new RangeError("invalid alpha");return t=1/-t,function(){return Math.pow(1-e(),t)}}return n.source=t,n}(ly),vy=function t(e){function n(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return function(){return Math.floor(e()+t)}}return n.source=t,n}(ly),xy=function t(e){function n(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return 0===t?()=>1/0:1===t?()=>1:(t=Math.log1p(-t),function(){return 1+Math.floor(Math.log1p(-e())/t)})}return n.source=t,n}(ly),_y=function t(e){var n=hy.source(e)();function r(t,r){if((t=+t)<0)throw new RangeError("invalid k");if(0===t)return()=>0;if(r=null==r?1:+r,1===t)return()=>-Math.log1p(-e())*r;var i=(t<1?t+1:t)-1/3,o=1/(3*Math.sqrt(i)),a=t<1?()=>Math.pow(e(),1/t):()=>1;return function(){do{do{var t=n(),s=1+o*t}while(s<=0);s*=s*s;var u=1-e()}while(u>=1-.0331*t*t*t*t&&Math.log(u)>=.5*t*t+i*(1-s+Math.log(s)));return i*s*a()*r}}return r.source=t,r}(ly),by=function t(e){var n=_y.source(e);function r(t,e){var r=n(t),i=n(e);return function(){var t=r();return 0===t?0:t/(t+i())}}return r.source=t,r}(ly),wy=function t(e){var n=xy.source(e),r=by.source(e);function i(t,e){return t=+t,(e=+e)>=1?()=>t:e<=0?()=>0:function(){for(var i=0,o=t,a=e;o*a>16&&o*(1-a)>16;){var s=Math.floor((o+1)*a),u=r(s,o-s+1)();u<=a?(i+=s,o-=s,a=(a-u)/(1-u)):(o=s-1,a/=u)}for(var l=a<.5,c=n(l?a:1-a),f=c(),h=0;f<=o;++h)f+=c();return i+(l?h:o-h)}}return i.source=t,i}(ly),My=function t(e){function n(t,n,r){var i;return 0===(t=+t)?i=t=>-Math.log(t):(t=1/t,i=e=>Math.pow(e,t)),n=null==n?0:+n,r=null==r?1:+r,function(){return n+r*i(-Math.log1p(-e()))}}return n.source=t,n}(ly),Ay=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,function(){return t+n*Math.tan(Math.PI*e())}}return n.source=t,n}(ly),Ey=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,function(){var r=e();return t+n*Math.log(r/(1-r))}}return n.source=t,n}(ly),Ty=function t(e){var n=_y.source(e),r=wy.source(e);function i(t){return function(){for(var i=0,o=t;o>16;){var a=Math.floor(.875*o),s=n(a)();if(s>o)return i+r(a-1,o/s)();i+=a,o-=s}for(var u=-Math.log1p(-e()),l=0;u<=o;++l)u-=Math.log1p(-e());return i+l}}return i.source=t,i}(ly);const Sy=1664525,Cy=1013904223,ky=1/4294967296;function Py(t=Math.random()){let e=0|(0<=t&&t<1?t/ky:Math.abs(t));return()=>(e=Sy*e+Cy|0,ky*(e>>>0))}function Oy(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Ly(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}const Iy=Symbol("implicit");function Ry(){var t=new L,e=[],n=[],r=Iy;function i(i){let o=t.get(i);if(void 0===o){if(r!==Iy)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new L;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Ry(e,n).unknown(r)},Oy.apply(i,arguments),i}function Dy(){var t,e,n=Ry().unknown(void 0),r=n.domain,i=n.range,o=0,a=1,s=!1,u=0,l=0,c=.5;function f(){var n=r().length,f=a<o,h=f?a:o,d=f?o:a;t=(d-h)/Math.max(1,n-u+2*l),s&&(t=Math.floor(t)),h+=(d-h-t*(n-u))*c,e=t*(1-u),s&&(h=Math.round(h),e=Math.round(e));var p=It(n).map(function(e){return h+t*e});return i(f?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),f()):r()},n.range=function(t){return arguments.length?([o,a]=t,o=+o,a=+a,f()):[o,a]},n.rangeRound=function(t){return[o,a]=t,o=+o,a=+a,s=!0,f()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(s=!!t,f()):s},n.padding=function(t){return arguments.length?(u=Math.min(1,l=+t),f()):u},n.paddingInner=function(t){return arguments.length?(u=Math.min(1,t),f()):u},n.paddingOuter=function(t){return arguments.length?(l=+t,f()):l},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),f()):c},n.copy=function(){return Dy(r(),[o,a]).round(s).paddingInner(u).paddingOuter(l).align(c)},Oy.apply(f(),arguments)}function Ny(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Ny(e())},t}function Fy(){return Ny(Dy.apply(null,arguments).paddingInner(1))}function jy(t){return+t}var zy=[0,1];function Gy(t){return t}function By(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function Vy(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=By(i,r),o=n(a,o)):(r=By(r,i),o=n(o,a)),function(t){return o(r(t))}}function qy(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=By(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=h(t,e,1,r)-1;return o[n](i[n](e))}}function Uy(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Hy(){var t,e,n,r,i,o,a=zy,s=zy,u=Zr,l=Gy;function c(){var t=Math.min(a.length,s.length);return l!==Gy&&(l=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(a[0],a[t-1])),r=t>2?qy:Vy,i=o=null,f}function f(e){return null==e||isNaN(e=+e)?n:(i||(i=r(a.map(t),s,u)))(t(l(e)))}return f.invert=function(n){return l(e((o||(o=r(s,a.map(t),Xr)))(n)))},f.domain=function(t){return arguments.length?(a=Array.from(t,jy),c()):a.slice()},f.range=function(t){return arguments.length?(s=Array.from(t),c()):s.slice()},f.rangeRound=function(t){return s=Array.from(t),u=Gg,c()},f.clamp=function(t){return arguments.length?(l=!!t||Gy,c()):l!==Gy},f.interpolate=function(t){return arguments.length?(u=t,c()):u},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,c()}}function Wy(){return Hy()(Gy,Gy)}function Xy(t,e,n,r){var i,o=ct(t,e,n);switch((r=fc(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=Ac(o,a))||(r.precision=i),vc(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=Ec(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Mc(o))||(r.precision=i-2*("%"===r.type))}return yc(r)}function Ky(t){var e=t.domain;return t.ticks=function(t){var n=e();return ut(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Xy(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),a=0,s=o.length-1,u=o[a],l=o[s],c=10;for(l<u&&(i=u,u=l,l=i,i=a,a=s,s=i);c-- >0;){if((i=lt(u,l,n))===r)return o[a]=u,o[s]=l,e(o);if(i>0)u=Math.floor(u/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,l=Math.floor(l*i)/i}r=i}return t},t}function Qy(){var t=Wy();return t.copy=function(){return Uy(t,Qy())},Oy.apply(t,arguments),Ky(t)}function Yy(t){var e;function n(t){return null==t||isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,jy),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Yy(t).unknown(e)},t=arguments.length?Array.from(t,jy):[0,1],Ky(n)}function $y(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function Zy(t){return Math.log(t)}function Jy(t){return Math.exp(t)}function tv(t){return-Math.log(-t)}function ev(t){return-Math.exp(-t)}function nv(t){return isFinite(t)?+("1e"+t):t<0?0:t}function rv(t){return(e,n)=>-t(-e,n)}function iv(t){const e=t(Zy,Jy),n=e.domain;let r,i,o=10;function a(){return r=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}(o),i=function(t){return 10===t?nv:t===Math.E?Math.exp:e=>Math.pow(t,e)}(o),n()[0]<0?(r=rv(r),i=rv(i),t(tv,ev)):t(Zy,Jy),e}return e.base=function(t){return arguments.length?(o=+t,a()):o},e.domain=function(t){return arguments.length?(n(t),a()):n()},e.ticks=t=>{const e=n();let a=e[0],s=e[e.length-1];const u=s<a;u&&([a,s]=[s,a]);let l,c,f=r(a),h=r(s);const d=null==t?10:+t;let p=[];if(!(o%1)&&h-f<d){if(f=Math.floor(f),h=Math.ceil(h),a>0){for(;f<=h;++f)for(l=1;l<o;++l)if(c=f<0?l/i(-f):l*i(f),!(c<a)){if(c>s)break;p.push(c)}}else for(;f<=h;++f)for(l=o-1;l>=1;--l)if(c=f>0?l/i(-f):l*i(f),!(c<a)){if(c>s)break;p.push(c)}2*p.length<d&&(p=ut(a,s,d))}else p=ut(f,h,Math.min(h-f,d)).map(i);return u?p.reverse():p},e.tickFormat=(t,n)=>{if(null==t&&(t=10),null==n&&(n=10===o?"s":","),"function"!=typeof n&&(o%1||null!=(n=fc(n)).precision||(n.trim=!0),n=yc(n)),t===1/0)return n;const a=Math.max(1,o*t/e.ticks().length);return t=>{let e=t/i(Math.round(r(t)));return e*o<o-.5&&(e*=o),e<=a?n(t):""}},e.nice=()=>n($y(n(),{floor:t=>i(Math.floor(r(t))),ceil:t=>i(Math.ceil(r(t)))})),e}function ov(){const t=iv(Hy()).domain([1,10]);return t.copy=()=>Uy(t,ov()).base(t.base()),Oy.apply(t,arguments),t}function av(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function sv(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function uv(t){var e=1,n=t(av(e),sv(e));return n.constant=function(n){return arguments.length?t(av(e=+n),sv(e)):e},Ky(n)}function lv(){var t=uv(Hy());return t.copy=function(){return Uy(t,lv()).constant(t.constant())},Oy.apply(t,arguments)}function cv(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function fv(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function hv(t){return t<0?-t*t:t*t}function dv(t){var e=t(Gy,Gy),n=1;return e.exponent=function(e){return arguments.length?1===(n=+e)?t(Gy,Gy):.5===n?t(fv,hv):t(cv(n),cv(1/n)):n},Ky(e)}function pv(){var t=dv(Hy());return t.copy=function(){return Uy(t,pv()).exponent(t.exponent())},Oy.apply(t,arguments),t}function mv(){return pv.apply(null,arguments).exponent(.5)}function gv(t){return Math.sign(t)*t*t}function yv(){var t,e=Wy(),n=[0,1],r=!1;function i(n){var i=function(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}(e(n));return isNaN(i)?t:r?Math.round(i):i}return i.invert=function(t){return e.invert(gv(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain()},i.range=function(t){return arguments.length?(e.range((n=Array.from(t,jy)).map(gv)),i):n.slice()},i.rangeRound=function(t){return i.range(t).round(!0)},i.round=function(t){return arguments.length?(r=!!t,i):r},i.clamp=function(t){return arguments.length?(e.clamp(t),i):e.clamp()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return yv(e.domain(),n).round(r).clamp(e.clamp()).unknown(t)},Oy.apply(i,arguments),Ky(i)}function vv(){var t,e=[],n=[],i=[];function o(){var t=0,r=Math.max(1,n.length);for(i=new Array(r-1);++t<r;)i[t-1]=wt(e,t/r);return a}function a(e){return null==e||isNaN(e=+e)?t:n[h(i,e)]}return a.invertExtent=function(t){var r=n.indexOf(t);return r<0?[NaN,NaN]:[r>0?i[r-1]:e[0],r<i.length?i[r]:e[e.length-1]]},a.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(r),o()},a.range=function(t){return arguments.length?(n=Array.from(t),o()):n.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return i.slice()},a.copy=function(){return vv().domain(e).range(n).unknown(t)},Oy.apply(a,arguments)}function xv(){var t,e=0,n=1,r=1,i=[.5],o=[0,1];function a(e){return null!=e&&e<=e?o[h(i,e,0,r)]:t}function s(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return a}return a.domain=function(t){return arguments.length?([e,n]=t,e=+e,n=+n,s()):[e,n]},a.range=function(t){return arguments.length?(r=(o=Array.from(t)).length-1,s()):o.slice()},a.invertExtent=function(t){var a=o.indexOf(t);return a<0?[NaN,NaN]:a<1?[e,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},a.unknown=function(e){return arguments.length?(t=e,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return xv().domain([e,n]).range(o).unknown(t)},Oy.apply(Ky(a),arguments)}function _v(){var t,e=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[h(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Array.from(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Array.from(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return _v().domain(e).range(n).unknown(t)},Oy.apply(i,arguments)}const bv=1e3,wv=6e4,Mv=36e5,Av=864e5,Ev=6048e5,Tv=2592e6,Sv=31536e6,Cv=new Date,kv=new Date;function Pv(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=e=>(t(e=new Date(+e)),e),i.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),i.round=t=>{const e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=(t,n)=>(e(t=new Date(+t),null==n?1:Math.floor(n)),t),i.range=(n,r,o)=>{const a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return a;let s;do{a.push(s=new Date(+n)),e(n,o),t(n)}while(s<n&&n<r);return a},i.filter=n=>Pv(e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},(t,r)=>{if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}),n&&(i.count=(e,r)=>(Cv.setTime(+e),kv.setTime(+r),t(Cv),t(kv),Math.floor(n(Cv,kv))),i.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?e=>r(e)%t===0:e=>i.count(0,e)%t===0):i:null)),i}const Ov=Pv(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Ov.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?Pv(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Ov:null);const Lv=Ov.range,Iv=Pv(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*bv)},(t,e)=>(e-t)/bv,t=>t.getUTCSeconds()),Rv=Iv.range,Dv=Pv(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*bv)},(t,e)=>{t.setTime(+t+e*wv)},(t,e)=>(e-t)/wv,t=>t.getMinutes()),Nv=Dv.range,Fv=Pv(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*wv)},(t,e)=>(e-t)/wv,t=>t.getUTCMinutes()),jv=Fv.range,zv=Pv(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*bv-t.getMinutes()*wv)},(t,e)=>{t.setTime(+t+e*Mv)},(t,e)=>(e-t)/Mv,t=>t.getHours()),Gv=zv.range,Bv=Pv(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Mv)},(t,e)=>(e-t)/Mv,t=>t.getUTCHours()),Vv=Bv.range,qv=Pv(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*wv)/Av,t=>t.getDate()-1),Uv=qv.range,Hv=Pv(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Av,t=>t.getUTCDate()-1),Wv=Hv.range,Xv=Pv(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Av,t=>Math.floor(t/Av)),Kv=Xv.range;function Qv(t){return Pv(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(t,e)=>{t.setDate(t.getDate()+7*e)},(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*wv)/Ev)}const Yv=Qv(0),$v=Qv(1),Zv=Qv(2),Jv=Qv(3),tx=Qv(4),ex=Qv(5),nx=Qv(6),rx=Yv.range,ix=$v.range,ox=Zv.range,ax=Jv.range,sx=tx.range,ux=ex.range,lx=nx.range;function cx(t){return Pv(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)},(t,e)=>(e-t)/Ev)}const fx=cx(0),hx=cx(1),dx=cx(2),px=cx(3),mx=cx(4),gx=cx(5),yx=cx(6),vx=fx.range,xx=hx.range,_x=dx.range,bx=px.range,wx=mx.range,Mx=gx.range,Ax=yx.range,Ex=Pv(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear()),t=>t.getMonth()),Tx=Ex.range,Sx=Pv(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear()),t=>t.getUTCMonth()),Cx=Sx.range,kx=Pv(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());kx.every=t=>isFinite(t=Math.floor(t))&&t>0?Pv(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)}):null;const Px=kx.range,Ox=Pv(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ox.every=t=>isFinite(t=Math.floor(t))&&t>0?Pv(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null;const Lx=Ox.range;function Ix(t,e,n,r,i,a){const s=[[Iv,1,bv],[Iv,5,5e3],[Iv,15,15e3],[Iv,30,3e4],[a,1,wv],[a,5,3e5],[a,15,9e5],[a,30,18e5],[i,1,Mv],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,Av],[r,2,1728e5],[n,1,Ev],[e,1,Tv],[e,3,7776e6],[t,1,Sv]];function u(e,n,r){const i=Math.abs(n-e)/r,a=o(([,,t])=>t).right(s,i);if(a===s.length)return t.every(ct(e/Sv,n/Sv,r));if(0===a)return Ov.every(Math.max(ct(e,n,r),1));const[u,l]=s[i/s[a-1][2]<s[a][2]/i?a-1:a];return u.every(l)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"==typeof n.range?n:u(t,e,n),o=i?i.range(t,+e+1):[];return r?o.reverse():o},u]}const[Rx,Dx]=Ix(Ox,Sx,fx,Xv,Bv,Fv),[Nx,Fx]=Ix(kx,Ex,Yv,qv,zv,Dv);function jx(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function zx(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Gx(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Bx(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,l=Jx(i),c=t_(i),f=Jx(o),h=t_(o),d=Jx(a),p=t_(a),m=Jx(s),g=t_(s),y=Jx(u),v=t_(u),x={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:b_,e:b_,f:T_,g:F_,G:z_,H:w_,I:M_,j:A_,L:E_,m:S_,M:C_,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:ub,s:lb,S:k_,u:P_,U:O_,V:I_,w:R_,W:D_,x:null,X:null,y:N_,Y:j_,Z:G_,"%":sb},_={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:B_,e:B_,f:W_,g:rb,G:ob,H:V_,I:q_,j:U_,L:H_,m:X_,M:K_,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:ub,s:lb,S:Q_,u:Y_,U:$_,V:J_,w:tb,W:eb,x:null,X:null,y:nb,Y:ib,Z:ab,"%":sb},b={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=y.exec(e.slice(n));return r?(t.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return A(t,e,n,r)},d:f_,e:f_,f:y_,g:s_,G:a_,H:d_,I:d_,j:h_,L:g_,m:c_,M:p_,p:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:l_,Q:x_,s:__,S:m_,u:n_,U:r_,V:i_,w:e_,W:o_,x:function(t,e,r){return A(t,n,e,r)},X:function(t,e,n){return A(t,r,e,n)},y:s_,Y:a_,Z:u_,"%":v_};function w(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=Xx[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function M(t,e){return function(n){var r,i,o=Gx(1900,void 0,1);if(A(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=zx(Gx(o.y,0,1))).getUTCDay(),r=i>4||0===i?hx.ceil(r):hx(r),r=Hv.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=jx(Gx(o.y,0,1))).getDay(),r=i>4||0===i?$v.ceil(r):$v(r),r=qv.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?zx(Gx(o.y,0,1)).getUTCDay():jx(Gx(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,zx(o)):jx(o)}}function A(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=b[i in Xx?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return x.x=w(n,x),x.X=w(r,x),x.c=w(e,x),_.x=w(n,_),_.X=w(r,_),_.c=w(e,_),{format:function(t){var e=w(t+="",x);return e.toString=function(){return t},e},parse:function(t){var e=M(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",_);return e.toString=function(){return t},e},utcParse:function(t){var e=M(t+="",!0);return e.toString=function(){return t},e}}}var Vx,qx,Ux,Hx,Wx,Xx={"-":"",_:" ",0:"0"},Kx=/^\s*\d+/,Qx=/^%/,Yx=/[\\^$*+?|[\]().{}]/g;function $x(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Zx(t){return t.replace(Yx,"\\$&")}function Jx(t){return new RegExp("^(?:"+t.map(Zx).join("|")+")","i")}function t_(t){return new Map(t.map((t,e)=>[t.toLowerCase(),e]))}function e_(t,e,n){var r=Kx.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function n_(t,e,n){var r=Kx.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function r_(t,e,n){var r=Kx.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function i_(t,e,n){var r=Kx.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function o_(t,e,n){var r=Kx.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function a_(t,e,n){var r=Kx.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function s_(t,e,n){var r=Kx.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function u_(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function l_(t,e,n){var r=Kx.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function c_(t,e,n){var r=Kx.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function f_(t,e,n){var r=Kx.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function h_(t,e,n){var r=Kx.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function d_(t,e,n){var r=Kx.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function p_(t,e,n){var r=Kx.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function m_(t,e,n){var r=Kx.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function g_(t,e,n){var r=Kx.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function y_(t,e,n){var r=Kx.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function v_(t,e,n){var r=Qx.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function x_(t,e,n){var r=Kx.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function __(t,e,n){var r=Kx.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function b_(t,e){return $x(t.getDate(),e,2)}function w_(t,e){return $x(t.getHours(),e,2)}function M_(t,e){return $x(t.getHours()%12||12,e,2)}function A_(t,e){return $x(1+qv.count(kx(t),t),e,3)}function E_(t,e){return $x(t.getMilliseconds(),e,3)}function T_(t,e){return E_(t,e)+"000"}function S_(t,e){return $x(t.getMonth()+1,e,2)}function C_(t,e){return $x(t.getMinutes(),e,2)}function k_(t,e){return $x(t.getSeconds(),e,2)}function P_(t){var e=t.getDay();return 0===e?7:e}function O_(t,e){return $x(Yv.count(kx(t)-1,t),e,2)}function L_(t){var e=t.getDay();return e>=4||0===e?tx(t):tx.ceil(t)}function I_(t,e){return t=L_(t),$x(tx.count(kx(t),t)+(4===kx(t).getDay()),e,2)}function R_(t){return t.getDay()}function D_(t,e){return $x($v.count(kx(t)-1,t),e,2)}function N_(t,e){return $x(t.getFullYear()%100,e,2)}function F_(t,e){return $x((t=L_(t)).getFullYear()%100,e,2)}function j_(t,e){return $x(t.getFullYear()%1e4,e,4)}function z_(t,e){var n=t.getDay();return $x((t=n>=4||0===n?tx(t):tx.ceil(t)).getFullYear()%1e4,e,4)}function G_(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+$x(e/60|0,"0",2)+$x(e%60,"0",2)}function B_(t,e){return $x(t.getUTCDate(),e,2)}function V_(t,e){return $x(t.getUTCHours(),e,2)}function q_(t,e){return $x(t.getUTCHours()%12||12,e,2)}function U_(t,e){return $x(1+Hv.count(Ox(t),t),e,3)}function H_(t,e){return $x(t.getUTCMilliseconds(),e,3)}function W_(t,e){return H_(t,e)+"000"}function X_(t,e){return $x(t.getUTCMonth()+1,e,2)}function K_(t,e){return $x(t.getUTCMinutes(),e,2)}function Q_(t,e){return $x(t.getUTCSeconds(),e,2)}function Y_(t){var e=t.getUTCDay();return 0===e?7:e}function $_(t,e){return $x(fx.count(Ox(t)-1,t),e,2)}function Z_(t){var e=t.getUTCDay();return e>=4||0===e?mx(t):mx.ceil(t)}function J_(t,e){return t=Z_(t),$x(mx.count(Ox(t),t)+(4===Ox(t).getUTCDay()),e,2)}function tb(t){return t.getUTCDay()}function eb(t,e){return $x(hx.count(Ox(t)-1,t),e,2)}function nb(t,e){return $x(t.getUTCFullYear()%100,e,2)}function rb(t,e){return $x((t=Z_(t)).getUTCFullYear()%100,e,2)}function ib(t,e){return $x(t.getUTCFullYear()%1e4,e,4)}function ob(t,e){var n=t.getUTCDay();return $x((t=n>=4||0===n?mx(t):mx.ceil(t)).getUTCFullYear()%1e4,e,4)}function ab(){return"+0000"}function sb(){return"%"}function ub(t){return+t}function lb(t){return Math.floor(+t/1e3)}function cb(t){return Vx=Bx(t),qx=Vx.format,Ux=Vx.parse,Hx=Vx.utcFormat,Wx=Vx.utcParse,Vx}function fb(t){return new Date(t)}function hb(t){return t instanceof Date?+t:+new Date(+t)}function db(t,e,n,r,i,o,a,s,u,l){var c=Wy(),f=c.invert,h=c.domain,d=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),x=l("%B"),_=l("%Y");function b(t){return(u(t)<t?d:s(t)<t?p:a(t)<t?m:o(t)<t?g:r(t)<t?i(t)<t?y:v:n(t)<t?x:_)(t)}return c.invert=function(t){return new Date(f(t))},c.domain=function(t){return arguments.length?h(Array.from(t,hb)):h().map(fb)},c.ticks=function(e){var n=h();return t(n[0],n[n.length-1],null==e?10:e)},c.tickFormat=function(t,e){return null==e?b:l(e)},c.nice=function(t){var n=h();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?h($y(n,t)):c},c.copy=function(){return Uy(c,db(t,e,n,r,i,o,a,s,u,l))},c}function pb(){return Oy.apply(db(Nx,Fx,kx,Ex,Yv,qv,zv,Dv,Iv,qx).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function mb(){return Oy.apply(db(Rx,Dx,Ox,Sx,fx,Hv,Bv,Fv,Iv,Hx).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function gb(){var t,e,n,r,i,o=0,a=1,s=Gy,u=!1;function l(e){return null==e||isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,u?Math.max(0,Math.min(1,e)):e))}function c(t){return function(e){var n,r;return arguments.length?([n,r]=e,s=t(n,r),l):[s(0),s(1)]}}return l.domain=function(i){return arguments.length?([o,a]=i,t=r(o=+o),e=r(a=+a),n=t===e?0:1/(e-t),l):[o,a]},l.clamp=function(t){return arguments.length?(u=!!t,l):u},l.interpolator=function(t){return arguments.length?(s=t,l):s},l.range=c(Zr),l.rangeRound=c(Gg),l.unknown=function(t){return arguments.length?(i=t,l):i},function(i){return r=i,t=i(o),e=i(a),n=t===e?0:1/(e-t),l}}function yb(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function vb(){var t=Ky(gb()(Gy));return t.copy=function(){return yb(t,vb())},Ly.apply(t,arguments)}function xb(){var t=iv(gb()).domain([1,10]);return t.copy=function(){return yb(t,xb()).base(t.base())},Ly.apply(t,arguments)}function _b(){var t=uv(gb());return t.copy=function(){return yb(t,_b()).constant(t.constant())},Ly.apply(t,arguments)}function bb(){var t=dv(gb());return t.copy=function(){return yb(t,bb()).exponent(t.exponent())},Ly.apply(t,arguments)}function wb(){return bb.apply(null,arguments).exponent(.5)}function Mb(){var t=[],e=Gy;function n(n){if(null!=n&&!isNaN(n=+n))return e((h(t,n,1)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(r),n},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.range=function(){return t.map((n,r)=>e(r/(t.length-1)))},n.quantiles=function(e){return Array.from({length:e+1},(n,r)=>bt(t,r/e))},n.copy=function(){return Mb(e).domain(t)},Ly.apply(n,arguments)}function Ab(){var t,e,n,r,i,o,a,s=0,u=.5,l=1,c=1,f=Gy,h=!1;function d(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(c*t<c*e?r:i),f(h?Math.max(0,Math.min(1,t)):t))}function p(t){return function(e){var n,r,i;return arguments.length?([n,r,i]=e,f=Jg(t,[n,r,i]),d):[f(0),f(.5),f(1)]}}return d.domain=function(a){return arguments.length?([s,u,l]=a,t=o(s=+s),e=o(u=+u),n=o(l=+l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),c=e<t?-1:1,d):[s,u,l]},d.clamp=function(t){return arguments.length?(h=!!t,d):h},d.interpolator=function(t){return arguments.length?(f=t,d):f},d.range=p(Zr),d.rangeRound=p(Gg),d.unknown=function(t){return arguments.length?(a=t,d):a},function(a){return o=a,t=a(s),e=a(u),n=a(l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),c=e<t?-1:1,d}}function Eb(){var t=Ky(Ab()(Gy));return t.copy=function(){return yb(t,Eb())},Ly.apply(t,arguments)}function Tb(){var t=iv(Ab()).domain([.1,1,10]);return t.copy=function(){return yb(t,Tb()).base(t.base())},Ly.apply(t,arguments)}function Sb(){var t=uv(Ab());return t.copy=function(){return yb(t,Sb()).constant(t.constant())},Ly.apply(t,arguments)}function Cb(){var t=dv(Ab());return t.copy=function(){return yb(t,Cb()).exponent(t.exponent())},Ly.apply(t,arguments)}function kb(){return Cb.apply(null,arguments).exponent(.5)}function Pb(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}cb({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Ob=Pb("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Lb=Pb("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Ib=Pb("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Rb=Pb("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Db=Pb("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Nb=Pb("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Fb=Pb("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),jb=Pb("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),zb=Pb("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Gb=Pb("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Bb=Pb("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Vb=t=>Gr(t[t.length-1]),qb=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Pb),Ub=Vb(qb),Hb=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Pb),Wb=Vb(Hb),Xb=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Pb),Kb=Vb(Xb),Qb=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Pb),Yb=Vb(Qb),$b=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Pb),Zb=Vb($b),Jb=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Pb),tw=Vb(Jb),ew=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Pb),nw=Vb(ew),rw=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Pb),iw=Vb(rw),ow=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Pb),aw=Vb(ow),sw=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Pb),uw=Vb(sw),lw=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Pb),cw=Vb(lw),fw=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Pb),hw=Vb(fw),dw=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Pb),pw=Vb(dw),mw=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Pb),gw=Vb(mw),yw=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Pb),vw=Vb(yw),xw=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Pb),_w=Vb(xw),bw=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Pb),ww=Vb(bw),Mw=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Pb),Aw=Vb(Mw),Ew=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Pb),Tw=Vb(Ew),Sw=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Pb),Cw=Vb(Sw),kw=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Pb),Pw=Vb(kw),Ow=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Pb),Lw=Vb(Ow),Iw=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Pb),Rw=Vb(Iw),Dw=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Pb),Nw=Vb(Dw),Fw=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Pb),jw=Vb(Fw),zw=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Pb),Gw=Vb(zw),Bw=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Pb),Vw=Vb(Bw);function qw(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"}var Uw=Zg(ts(300,.5,0),ts(-240,.5,1)),Hw=Zg(ts(-100,.75,.35),ts(80,1.5,.8)),Ww=Zg(ts(260,.75,.35),ts(80,1.5,.8)),Xw=ts();function Kw(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Xw.h=360*t-100,Xw.s=1.5-1.5*e,Xw.l=.8-.9*e,Xw+""}var Qw=gr(),Yw=Math.PI/3,$w=2*Math.PI/3;function Zw(t){var e;return t=(.5-t)*Math.PI,Qw.r=255*(e=Math.sin(t))*e,Qw.g=255*(e=Math.sin(t+Yw))*e,Qw.b=255*(e=Math.sin(t+$w))*e,Qw+""}function Jw(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"}function tM(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var eM=tM(Pb("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),nM=tM(Pb("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),rM=tM(Pb("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),iM=tM(Pb("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function oM(t){return Bn(Sn(t).call(document.documentElement))}var aM=0;function sM(){return new uM}function uM(){this._="@"+(++aM).toString(36)}function lM(t,e){return t.target&&(t=Jr(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,t=>ti(t,e))}function cM(t){return"string"==typeof t?new jn([document.querySelectorAll(t)],[document.documentElement]):new jn([ke(t)],Fn)}function fM(t){return function(){return t}}uM.prototype=sM.prototype={constructor:uM,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};const hM=Math.abs,dM=Math.atan2,pM=Math.cos,mM=Math.max,gM=Math.min,yM=Math.sin,vM=Math.sqrt,xM=1e-12,_M=Math.PI,bM=_M/2,wM=2*_M;function MM(t){return t>=1?bM:t<=-1?-bM:Math.asin(t)}function AM(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new la(e)}function EM(t){return t.innerRadius}function TM(t){return t.outerRadius}function SM(t){return t.startAngle}function CM(t){return t.endAngle}function kM(t){return t&&t.padAngle}function PM(t,e,n,r,i,o,a){var s=t-n,u=e-r,l=(a?o:-o)/vM(s*s+u*u),c=l*u,f=-l*s,h=t+c,d=e+f,p=n+c,m=r+f,g=(h+p)/2,y=(d+m)/2,v=p-h,x=m-d,_=v*v+x*x,b=i-o,w=h*m-p*d,M=(x<0?-1:1)*vM(mM(0,b*b*_-w*w)),A=(w*x-v*M)/_,E=(-w*v-x*M)/_,T=(w*x+v*M)/_,S=(-w*v+x*M)/_,C=A-g,k=E-y,P=T-g,O=S-y;return C*C+k*k>P*P+O*O&&(A=T,E=S),{cx:A,cy:E,x01:-c,y01:-f,x11:A*(i/b-1),y11:E*(i/b-1)}}function OM(){var t=EM,e=TM,n=fM(0),r=null,i=SM,o=CM,a=kM,s=null,u=AM(l);function l(){var l,c,f=+t.apply(this,arguments),h=+e.apply(this,arguments),d=i.apply(this,arguments)-bM,p=o.apply(this,arguments)-bM,m=hM(p-d),g=p>d;if(s||(s=l=u()),h<f&&(c=h,h=f,f=c),h>xM)if(m>wM-xM)s.moveTo(h*pM(d),h*yM(d)),s.arc(0,0,h,d,p,!g),f>xM&&(s.moveTo(f*pM(p),f*yM(p)),s.arc(0,0,f,p,d,g));else{var y,v,x=d,_=p,b=d,w=p,M=m,A=m,E=a.apply(this,arguments)/2,T=E>xM&&(r?+r.apply(this,arguments):vM(f*f+h*h)),S=gM(hM(h-f)/2,+n.apply(this,arguments)),C=S,k=S;if(T>xM){var P=MM(T/f*yM(E)),O=MM(T/h*yM(E));(M-=2*P)>xM?(b+=P*=g?1:-1,w-=P):(M=0,b=w=(d+p)/2),(A-=2*O)>xM?(x+=O*=g?1:-1,_-=O):(A=0,x=_=(d+p)/2)}var L=h*pM(x),I=h*yM(x),R=f*pM(w),D=f*yM(w);if(S>xM){var N,F=h*pM(_),j=h*yM(_),z=f*pM(b),G=f*yM(b);if(m<_M)if(N=function(t,e,n,r,i,o,a,s){var u=n-t,l=r-e,c=a-i,f=s-o,h=f*u-c*l;if(!(h*h<xM))return[t+(h=(c*(e-o)-f*(t-i))/h)*u,e+h*l]}(L,I,z,G,F,j,R,D)){var B=L-N[0],V=I-N[1],q=F-N[0],U=j-N[1],H=1/yM(function(t){return t>1?0:t<-1?_M:Math.acos(t)}((B*q+V*U)/(vM(B*B+V*V)*vM(q*q+U*U)))/2),W=vM(N[0]*N[0]+N[1]*N[1]);C=gM(S,(f-W)/(H-1)),k=gM(S,(h-W)/(H+1))}else C=k=0}A>xM?k>xM?(y=PM(z,G,L,I,h,k,g),v=PM(F,j,R,D,h,k,g),s.moveTo(y.cx+y.x01,y.cy+y.y01),k<S?s.arc(y.cx,y.cy,k,dM(y.y01,y.x01),dM(v.y01,v.x01),!g):(s.arc(y.cx,y.cy,k,dM(y.y01,y.x01),dM(y.y11,y.x11),!g),s.arc(0,0,h,dM(y.cy+y.y11,y.cx+y.x11),dM(v.cy+v.y11,v.cx+v.x11),!g),s.arc(v.cx,v.cy,k,dM(v.y11,v.x11),dM(v.y01,v.x01),!g))):(s.moveTo(L,I),s.arc(0,0,h,x,_,!g)):s.moveTo(L,I),f>xM&&M>xM?C>xM?(y=PM(R,D,F,j,f,-C,g),v=PM(L,I,z,G,f,-C,g),s.lineTo(y.cx+y.x01,y.cy+y.y01),C<S?s.arc(y.cx,y.cy,C,dM(y.y01,y.x01),dM(v.y01,v.x01),!g):(s.arc(y.cx,y.cy,C,dM(y.y01,y.x01),dM(y.y11,y.x11),!g),s.arc(0,0,f,dM(y.cy+y.y11,y.cx+y.x11),dM(v.cy+v.y11,v.cx+v.x11),g),s.arc(v.cx,v.cy,C,dM(v.y11,v.x11),dM(v.y01,v.x01),!g))):s.arc(0,0,f,w,b,g):s.lineTo(R,D)}else s.moveTo(0,0);if(s.closePath(),l)return s=null,l+""||null}return l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-_M/2;return[pM(r)*n,yM(r)*n]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:fM(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:fM(+t),l):e},l.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:fM(+t),l):n},l.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:fM(+t),l):r},l.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:fM(+t),l):i},l.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:fM(+t),l):o},l.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:fM(+t),l):a},l.context=function(t){return arguments.length?(s=null==t?null:t,l):s},l}var LM=Array.prototype.slice;function IM(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function RM(t){this._context=t}function DM(t){return new RM(t)}function NM(t){return t[0]}function FM(t){return t[1]}function jM(t,e){var n=fM(!0),r=null,i=DM,o=null,a=AM(s);function s(s){var u,l,c,f=(s=IM(s)).length,h=!1;for(null==r&&(o=i(c=a())),u=0;u<=f;++u)!(u<f&&n(l=s[u],u,s))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(l,u,s),+e(l,u,s));if(c)return o=null,c+""||null}return t="function"==typeof t?t:void 0===t?NM:fM(t),e="function"==typeof e?e:void 0===e?FM:fM(e),s.x=function(e){return arguments.length?(t="function"==typeof e?e:fM(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:fM(+t),s):e},s.defined=function(t){return arguments.length?(n="function"==typeof t?t:fM(!!t),s):n},s.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),s):i},s.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),s):r},s}function zM(t,e,n){var r=null,i=fM(!0),o=null,a=DM,s=null,u=AM(l);function l(l){var c,f,h,d,p,m=(l=IM(l)).length,g=!1,y=new Array(m),v=new Array(m);for(null==o&&(s=a(p=u())),c=0;c<=m;++c){if(!(c<m&&i(d=l[c],c,l))===g)if(g=!g)f=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=c-1;h>=f;--h)s.point(y[h],v[h]);s.lineEnd(),s.areaEnd()}g&&(y[c]=+t(d,c,l),v[c]=+e(d,c,l),s.point(r?+r(d,c,l):y[c],n?+n(d,c,l):v[c]))}if(p)return s=null,p+""||null}function c(){return jM().defined(i).curve(a).context(o)}return t="function"==typeof t?t:void 0===t?NM:fM(+t),e="function"==typeof e?e:fM(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?FM:fM(+n),l.x=function(e){return arguments.length?(t="function"==typeof e?e:fM(+e),r=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:fM(+e),l):t},l.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:fM(+t),l):r},l.y=function(t){return arguments.length?(e="function"==typeof t?t:fM(+t),n=null,l):e},l.y0=function(t){return arguments.length?(e="function"==typeof t?t:fM(+t),l):e},l.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:fM(+t),l):n},l.lineX0=l.lineY0=function(){return c().x(t).y(e)},l.lineY1=function(){return c().x(t).y(n)},l.lineX1=function(){return c().x(r).y(e)},l.defined=function(t){return arguments.length?(i="function"==typeof t?t:fM(!!t),l):i},l.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),l):a},l.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),l):o},l}function GM(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function BM(t){return t}function VM(){var t=BM,e=GM,n=null,r=fM(0),i=fM(wM),o=fM(0);function a(a){var s,u,l,c,f,h=(a=IM(a)).length,d=0,p=new Array(h),m=new Array(h),g=+r.apply(this,arguments),y=Math.min(wM,Math.max(-wM,i.apply(this,arguments)-g)),v=Math.min(Math.abs(y)/h,o.apply(this,arguments)),x=v*(y<0?-1:1);for(s=0;s<h;++s)(f=m[p[s]=s]=+t(a[s],s,a))>0&&(d+=f);for(null!=e?p.sort(function(t,n){return e(m[t],m[n])}):null!=n&&p.sort(function(t,e){return n(a[t],a[e])}),s=0,l=d?(y-h*x)/d:0;s<h;++s,g=c)u=p[s],c=g+((f=m[u])>0?f*l:0)+x,m[u]={data:a[u],index:s,value:f,startAngle:g,endAngle:c,padAngle:v};return m}return a.value=function(e){return arguments.length?(t="function"==typeof e?e:fM(+e),a):t},a.sortValues=function(t){return arguments.length?(e=t,n=null,a):e},a.sort=function(t){return arguments.length?(n=t,e=null,a):n},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:fM(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:fM(+t),a):i},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:fM(+t),a):o},a}RM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var qM=HM(DM);function UM(t){this._curve=t}function HM(t){function e(e){return new UM(t(e))}return e._curve=t,e}function WM(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(HM(t)):e()._curve},t}function XM(){return WM(jM().curve(qM))}function KM(){var t=zM().curve(qM),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return WM(n())},delete t.lineX0,t.lineEndAngle=function(){return WM(r())},delete t.lineX1,t.lineInnerRadius=function(){return WM(i())},delete t.lineY0,t.lineOuterRadius=function(){return WM(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(HM(t)):e()._curve},t}function QM(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}UM.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};class YM{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}class $M{constructor(t){this._context=t}lineStart(){this._point=0}lineEnd(){}point(t,e){if(t=+t,e=+e,0===this._point)this._point=1;else{const n=QM(this._x0,this._y0),r=QM(this._x0,this._y0=(this._y0+e)/2),i=QM(t,this._y0),o=QM(t,e);this._context.moveTo(...n),this._context.bezierCurveTo(...r,...i,...o)}this._x0=t,this._y0=e}}function ZM(t){return new YM(t,!0)}function JM(t){return new YM(t,!1)}function tA(t){return new $M(t)}function eA(t){return t.source}function nA(t){return t.target}function rA(t){let e=eA,n=nA,r=NM,i=FM,o=null,a=null,s=AM(u);function u(){let u;const l=LM.call(arguments),c=e.apply(this,l),f=n.apply(this,l);if(null==o&&(a=t(u=s())),a.lineStart(),l[0]=c,a.point(+r.apply(this,l),+i.apply(this,l)),l[0]=f,a.point(+r.apply(this,l),+i.apply(this,l)),a.lineEnd(),u)return a=null,u+""||null}return u.source=function(t){return arguments.length?(e=t,u):e},u.target=function(t){return arguments.length?(n=t,u):n},u.x=function(t){return arguments.length?(r="function"==typeof t?t:fM(+t),u):r},u.y=function(t){return arguments.length?(i="function"==typeof t?t:fM(+t),u):i},u.context=function(e){return arguments.length?(null==e?o=a=null:a=t(o=e),u):o},u}function iA(){return rA(ZM)}function oA(){return rA(JM)}function aA(){const t=rA(tA);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}const sA=vM(3);var uA={draw(t,e){const n=.59436*vM(e+gM(e/28,.75)),r=n/2,i=r*sA;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},lA={draw(t,e){const n=vM(e/_M);t.moveTo(n,0),t.arc(0,0,n,0,wM)}},cA={draw(t,e){const n=vM(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}};const fA=vM(1/3),hA=2*fA;var dA={draw(t,e){const n=vM(e/hA),r=n*fA;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},pA={draw(t,e){const n=.62625*vM(e);t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},mA={draw(t,e){const n=.87559*vM(e-gM(e/7,2));t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},gA={draw(t,e){const n=vM(e),r=-n/2;t.rect(r,r,n,n)}},yA={draw(t,e){const n=.4431*vM(e);t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}};const vA=yM(_M/10)/yM(7*_M/10),xA=yM(wM/10)*vA,_A=-pM(wM/10)*vA;var bA={draw(t,e){const n=vM(.8908130915292852*e),r=xA*n,i=_A*n;t.moveTo(0,-n),t.lineTo(r,i);for(let e=1;e<5;++e){const o=wM*e/5,a=pM(o),s=yM(o);t.lineTo(s*n,-a*n),t.lineTo(a*r-s*i,s*r+a*i)}t.closePath()}};const wA=vM(3);var MA={draw(t,e){const n=-vM(e/(3*wA));t.moveTo(0,2*n),t.lineTo(-wA*n,-n),t.lineTo(wA*n,-n),t.closePath()}};const AA=vM(3);var EA={draw(t,e){const n=.6824*vM(e),r=n/2,i=n*AA/2;t.moveTo(0,-n),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}};const TA=-.5,SA=vM(3)/2,CA=1/vM(12),kA=3*(CA/2+1);var PA={draw(t,e){const n=vM(e/kA),r=n/2,i=n*CA,o=r,a=n*CA+n,s=-o,u=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(TA*r-SA*i,SA*r+TA*i),t.lineTo(TA*o-SA*a,SA*o+TA*a),t.lineTo(TA*s-SA*u,SA*s+TA*u),t.lineTo(TA*r+SA*i,TA*i-SA*r),t.lineTo(TA*o+SA*a,TA*a-SA*o),t.lineTo(TA*s+SA*u,TA*u-SA*s),t.closePath()}},OA={draw(t,e){const n=.6189*vM(e-gM(e/6,1.7));t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}};const LA=[lA,cA,dA,gA,bA,MA,PA],IA=[lA,mA,OA,EA,uA,yA,pA];function RA(t,e){let n=null,r=AM(i);function i(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return t="function"==typeof t?t:fM(t||lA),e="function"==typeof e?e:fM(void 0===e?64:+e),i.type=function(e){return arguments.length?(t="function"==typeof e?e:fM(e),i):t},i.size=function(t){return arguments.length?(e="function"==typeof t?t:fM(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i}function DA(){}function NA(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function FA(t){this._context=t}function jA(t){return new FA(t)}function zA(t){this._context=t}function GA(t){return new zA(t)}function BA(t){this._context=t}function VA(t){return new BA(t)}function qA(t,e){this._basis=new FA(t),this._beta=e}FA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:NA(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:NA(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},zA.prototype={areaStart:DA,areaEnd:DA,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:NA(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},BA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:NA(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},qA.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var UA=function t(e){function n(t){return 1===e?new FA(t):new qA(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function HA(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function WA(t,e){this._context=t,this._k=(1-e)/6}WA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:HA(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:HA(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var XA=function t(e){function n(t){return new WA(t,e)}return n.tension=function(e){return t(+e)},n}(0);function KA(t,e){this._context=t,this._k=(1-e)/6}KA.prototype={areaStart:DA,areaEnd:DA,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:HA(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var QA=function t(e){function n(t){return new KA(t,e)}return n.tension=function(e){return t(+e)},n}(0);function YA(t,e){this._context=t,this._k=(1-e)/6}YA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:HA(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var $A=function t(e){function n(t){return new YA(t,e)}return n.tension=function(e){return t(+e)},n}(0);function ZA(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>xM){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>xM){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*l+t._x1*t._l23_2a-e*t._l12_2a)/c,a=(a*l+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function JA(t,e){this._context=t,this._alpha=e}JA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:ZA(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var tE=function t(e){function n(t){return e?new JA(t,e):new WA(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function eE(t,e){this._context=t,this._alpha=e}eE.prototype={areaStart:DA,areaEnd:DA,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ZA(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var nE=function t(e){function n(t){return e?new eE(t,e):new KA(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function rE(t,e){this._context=t,this._alpha=e}rE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ZA(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var iE=function t(e){function n(t){return e?new rE(t,e):new YA(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function oE(t){this._context=t}function aE(t){return new oE(t)}function sE(t){return t<0?-1:1}function uE(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(sE(o)+sE(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function lE(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function cE(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function fE(t){this._context=t}function hE(t){this._context=new dE(t)}function dE(t){this._context=t}function pE(t){return new fE(t)}function mE(t){return new hE(t)}function gE(t){this._context=t}function yE(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function vE(t){return new gE(t)}function xE(t,e){this._context=t,this._t=e}function _E(t){return new xE(t,.5)}function bE(t){return new xE(t,0)}function wE(t){return new xE(t,1)}function ME(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function AE(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function EE(t,e){return t[e]}function TE(t){const e=[];return e.key=t,e}function SE(){var t=fM([]),e=AE,n=ME,r=EE;function i(i){var o,a,s=Array.from(t.apply(this,arguments),TE),u=s.length,l=-1;for(const t of i)for(o=0,++l;o<u;++o)(s[o][l]=[0,+r(t,s[o].key,l,i)]).data=t;for(o=0,a=IM(e(s));o<u;++o)s[a[o]].index=o;return n(s,a),s}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:fM(Array.from(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:fM(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?AE:"function"==typeof t?t:fM(Array.from(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?ME:t,i):n},i}function CE(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}ME(t,e)}}function kE(t,e){if((s=t.length)>0)for(var n,r,i,o,a,s,u=0,l=t[e[0]].length;u<l;++u)for(o=a=0,n=0;n<s;++n)(i=(r=t[e[n]][u])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):(r[0]=0,r[1]=i)}function PE(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}ME(t,e)}}function OE(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,u=0,l=0;s<i;++s){for(var c=t[e[s]],f=c[a][1]||0,h=(f-(c[a-1][1]||0))/2,d=0;d<s;++d){var p=t[e[d]];h+=(p[a][1]||0)-(p[a-1][1]||0)}u+=f,l+=h*f}n[a-1][1]+=n[a-1][0]=o,u&&(o-=l/u)}n[a-1][1]+=n[a-1][0]=o,ME(t,e)}}function LE(t){var e=t.map(IE);return AE(t).sort(function(t,n){return e[t]-e[n]})}function IE(t){for(var e,n=-1,r=0,i=t.length,o=-1/0;++n<i;)(e=+t[n][1])>o&&(o=e,r=n);return r}function RE(t){var e=t.map(DE);return AE(t).sort(function(t,n){return e[t]-e[n]})}function DE(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}function NE(t){return RE(t).reverse()}function FE(t){var e,n,r=t.length,i=t.map(DE),o=LE(t),a=0,s=0,u=[],l=[];for(e=0;e<r;++e)n=o[e],a<s?(a+=i[n],u.push(n)):(s+=i[n],l.push(n));return l.reverse().concat(u)}function jE(t){return AE(t).reverse()}oE.prototype={areaStart:DA,areaEnd:DA,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},fE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:cE(this,this._t0,lE(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,cE(this,lE(this,n=uE(this,t,e)),n);break;default:cE(this,this._t0,n=uE(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(hE.prototype=Object.create(fE.prototype)).point=function(t,e){fE.prototype.point.call(this,e,t)},dE.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},gE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=yE(t),i=yE(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},xE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var zE="%Y-%m-%dT%H:%M:%S.%LZ";var GE=Date.prototype.toISOString?function(t){return t.toISOString()}:Hx(zE),BE=GE;var VE=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:Wx(zE),qE=VE;function UE(t,e,n){var r=new di,i=e;return null==e?(r.restart(t,e,n),r):(r._restart=r.restart,r.restart=function(t,e,n){e=+e,n=null==n?fi():+n,r._restart(function o(a){a+=i,r._restart(o,i+=e,n),t(a)},e,n)},r.restart(t,e,n),r)}var HE=t=>()=>t;function WE(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function XE(t,e,n){this.k=t,this.x=e,this.y=n}XE.prototype={constructor:XE,scale:function(t){return 1===t?this:new XE(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new XE(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var KE=new XE(1,0,0);function QE(t){for(;!t.__zoom;)if(!(t=t.parentNode))return KE;return t.__zoom}function YE(t){t.stopImmediatePropagation()}function $E(t){t.preventDefault(),t.stopImmediatePropagation()}function ZE(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function JE(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function tT(){return this.__zoom||KE}function eT(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function nT(){return navigator.maxTouchPoints||"ontouchstart"in this}function rT(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function iT(){var t,e,n,r=ZE,i=JE,o=rT,a=eT,s=nT,u=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,f=Vg,h=Te("start","zoom","end"),d=0,p=10;function m(t){t.property("__zoom",tT).on("wheel.zoom",w,{passive:!1}).on("mousedown.zoom",M).on("dblclick.zoom",A).filter(s).on("touchstart.zoom",E).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",S).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(t,e){return(e=Math.max(u[0],Math.min(u[1],e)))===t.k?t:new XE(e,t.x,t.y)}function y(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new XE(t.k,r,i)}function v(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function x(t,e,n,r){t.on("start.zoom",function(){_(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(r).end()}).tween("zoom",function(){var t=this,o=arguments,a=_(t,o).event(r),s=i.apply(t,o),u=null==n?v(s):"function"==typeof n?n.apply(t,o):n,l=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),c=t.__zoom,h="function"==typeof e?e.apply(t,o):e,d=f(c.invert(u).concat(l/c.k),h.invert(u).concat(l/h.k));return function(t){if(1===t)t=h;else{var e=d(t),n=l/e[2];t=new XE(n,u[0]-e[0]*n,u[1]-e[1]*n)}a.zoom(null,t)}})}function _(t,e,n){return!n&&t.__zooming||new b(t,e)}function b(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=i.apply(t,e),this.taps=0}function w(t,...e){if(r.apply(this,arguments)){var n=_(this,e).event(t),i=this.__zoom,s=Math.max(u[0],Math.min(u[1],i.k*Math.pow(2,a.apply(this,arguments)))),c=ti(t);if(n.wheel)n.mouse[0][0]===c[0]&&n.mouse[0][1]===c[1]||(n.mouse[1]=i.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(i.k===s)return;n.mouse=[c,i.invert(c)],Pi(this),n.start()}$E(t),n.wheel=setTimeout(function(){n.wheel=null,n.end()},150),n.zoom("mouse",o(y(g(i,s),n.mouse[0],n.mouse[1]),n.extent,l))}}function M(t,...e){if(!n&&r.apply(this,arguments)){var i=t.currentTarget,a=_(this,e,!0).event(t),s=Bn(t.view).on("mousemove.zoom",function(t){if($E(t),!a.moved){var e=t.clientX-c,n=t.clientY-f;a.moved=e*e+n*n>d}a.event(t).zoom("mouse",o(y(a.that.__zoom,a.mouse[0]=ti(t,i),a.mouse[1]),a.extent,l))},!0).on("mouseup.zoom",function(t){s.on("mousemove.zoom mouseup.zoom",null),Xn(t.view,a.moved),$E(t),a.event(t).end()},!0),u=ti(t,i),c=t.clientX,f=t.clientY;Wn(t.view),YE(t),a.mouse=[u,this.__zoom.invert(u)],Pi(this),a.start()}}function A(t,...e){if(r.apply(this,arguments)){var n=this.__zoom,a=ti(t.changedTouches?t.changedTouches[0]:t,this),s=n.invert(a),u=n.k*(t.shiftKey?.5:2),f=o(y(g(n,u),a,s),i.apply(this,e),l);$E(t),c>0?Bn(this).transition().duration(c).call(x,f,a,t):Bn(this).call(m.transform,f,a,t)}}function E(n,...i){if(r.apply(this,arguments)){var o,a,s,u,l=n.touches,c=l.length,f=_(this,i,n.changedTouches.length===c).event(n);for(YE(n),a=0;a<c;++a)u=[u=ti(s=l[a],this),this.__zoom.invert(u),s.identifier],f.touch0?f.touch1||f.touch0[2]===u[2]||(f.touch1=u,f.taps=0):(f.touch0=u,o=!0,f.taps=1+!!t);t&&(t=clearTimeout(t)),o&&(f.taps<2&&(e=u[0],t=setTimeout(function(){t=null},500)),Pi(this),f.start())}}function T(t,...e){if(this.__zooming){var n,r,i,a,s=_(this,e).event(t),u=t.changedTouches,c=u.length;for($E(t),n=0;n<c;++n)i=ti(r=u[n],this),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=i:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=i);if(r=s.that.__zoom,s.touch1){var f=s.touch0[0],h=s.touch0[1],d=s.touch1[0],p=s.touch1[1],m=(m=d[0]-f[0])*m+(m=d[1]-f[1])*m,v=(v=p[0]-h[0])*v+(v=p[1]-h[1])*v;r=g(r,Math.sqrt(m/v)),i=[(f[0]+d[0])/2,(f[1]+d[1])/2],a=[(h[0]+p[0])/2,(h[1]+p[1])/2]}else{if(!s.touch0)return;i=s.touch0[0],a=s.touch0[1]}s.zoom("touch",o(y(r,i,a),s.extent,l))}}function S(t,...r){if(this.__zooming){var i,o,a=_(this,r).event(t),s=t.changedTouches,u=s.length;for(YE(t),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),i=0;i<u;++i)o=s[i],a.touch0&&a.touch0[2]===o.identifier?delete a.touch0:a.touch1&&a.touch1[2]===o.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(o=ti(o,this),Math.hypot(e[0]-o[0],e[1]-o[1])<p)){var l=Bn(this).on("dblclick.zoom");l&&l.apply(this,arguments)}}}return m.transform=function(t,e,n,r){var i=t.selection?t.selection():t;i.property("__zoom",tT),t!==i?x(t,e,n,r):i.interrupt().each(function(){_(this,arguments).event(r).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},m.scaleBy=function(t,e,n,r){m.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)},n,r)},m.scaleTo=function(t,e,n,r){m.transform(t,function(){var t=i.apply(this,arguments),r=this.__zoom,a=null==n?v(t):"function"==typeof n?n.apply(this,arguments):n,s=r.invert(a),u="function"==typeof e?e.apply(this,arguments):e;return o(y(g(r,u),a,s),t,l)},n,r)},m.translateBy=function(t,e,n,r){m.transform(t,function(){return o(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),l)},null,r)},m.translateTo=function(t,e,n,r,a){m.transform(t,function(){var t=i.apply(this,arguments),a=this.__zoom,s=null==r?v(t):"function"==typeof r?r.apply(this,arguments):r;return o(KE.translate(s[0],s[1]).scale(a.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,l)},r,a)},b.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=Bn(this.that).datum();h.call(t,this.that,new WE(t,{sourceEvent:this.sourceEvent,target:m,type:t,transform:this.that.__zoom,dispatch:h}),e)}},m.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:HE(+t),m):a},m.filter=function(t){return arguments.length?(r="function"==typeof t?t:HE(!!t),m):r},m.touchable=function(t){return arguments.length?(s="function"==typeof t?t:HE(!!t),m):s},m.extent=function(t){return arguments.length?(i="function"==typeof t?t:HE([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),m):i},m.scaleExtent=function(t){return arguments.length?(u[0]=+t[0],u[1]=+t[1],m):[u[0],u[1]]},m.translateExtent=function(t){return arguments.length?(l[0][0]=+t[0][0],l[1][0]=+t[1][0],l[0][1]=+t[0][1],l[1][1]=+t[1][1],m):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},m.constrain=function(t){return arguments.length?(o=t,m):o},m.duration=function(t){return arguments.length?(c=+t,m):c},m.interpolate=function(t){return arguments.length?(f=t,m):f},m.on=function(){var t=h.on.apply(h,arguments);return t===h?m:t},m.clickDistance=function(t){return arguments.length?(d=(t=+t)*t,m):Math.sqrt(d)},m.tapDistance=function(t){return arguments.length?(p=+t,m):p},m}QE.prototype=XE.prototype}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var o=n[t]={id:t,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.exports}return r.m=e,r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.b="undefined"!=typeof document&&document.baseURI||self.location.href,r.nc=void 0,r(2257)}()});
//# sourceMappingURL=geo.min.js.map