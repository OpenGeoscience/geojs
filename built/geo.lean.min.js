!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(function(){try{return require("hammerjs")}catch(t){}}(),function(){try{return require("d3")}catch(t){}}(),function(){try{return require("vtk.js")}catch(t){}}()):"function"==typeof define&&define.amd?define(["hammerjs","d3","vtk.js"],e):"object"==typeof exports?exports.geo=e(function(){try{return require("hammerjs")}catch(t){}}(),function(){try{return require("d3")}catch(t){}}(),function(){try{return require("vtk.js")}catch(t){}}()):t.geo=e(t.Hammer,t.d3,t["vtk.js"])}(self,function(t,e,n){return function(){var i={1845:function(t,e,n){"use strict";n.d(e,{A:function(){return M}});var i=n(1362),r=n(6082),o=n(4326),a=n(7575);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}var l=["3857","900913","3785","102113"];var u=function(t){if(!function(t){return"string"==typeof t}(t))return"projName"in t?t:(0,r.A)(t);if(function(t){return t in i.A}(t))return i.A[t];if(function(t){return 0!==t.indexOf("+")&&-1!==t.indexOf("[")||"object"===s(t)&&!("srsCode"in t)}(t)){var e=(0,r.A)(t);if(function(t){var e=(0,a.A)(t,"authority");if(e){var n=(0,a.A)(e,"epsg");return n&&l.indexOf(n)>-1}}(e))return i.A["EPSG:3857"];var n=function(t){var e=(0,a.A)(t,"extension");if(e)return(0,a.A)(e,"proj4")}(e);return n?(0,o.A)(n):e}return function(t){return"+"===t[0]}(t)?(0,o.A)(t):void 0};function c(t,e){var n,i;if(t=t||{},!e)return t;for(i in e)void 0!==(n=e[i])&&(t[i]=n);return t}var h=n(7272),d=n(7e3),f={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},p=f.WGS84;var m={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var g in m){var y=m[g];y.datumName&&(m[y.datumName]=y)}var v=m;var x=function(t,e,n,i,r,o,a){var s={};return s.datum_type=void 0===t||"none"===t?d.A1:d.xK,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=d.a8),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=d.Y$,s.datum_params[3]*=d._3,s.datum_params[4]*=d._3,s.datum_params[5]*=d._3,s.datum_params[6]=s.datum_params[6]/1e6+1))),a&&(s.datum_type=d.G9,s.grids=a),s.a=n,s.b=i,s.es=r,s.ep2=o,s},_=n(8201);function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function w(t,e){if(!(this instanceof w))return new w(t);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(t){if(t)throw t};var n=u(t);if("object"===b(n)){var i=w.projections.get(n.projName);if(i){if(n.datumCode&&"none"!==n.datumCode){var r=(0,a.A)(v,n.datumCode);r&&(n.datum_params=n.datum_params||(r.towgs84?r.towgs84.split(","):null),n.ellps=r.ellipse,n.datumName=r.datumName?r.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var o,s,l,h,m,g,y,M=function(t,e,n,i,r){if(!t){var o=(0,a.A)(f,i);o||(o=p),t=o.a,e=o.b,n=o.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<d.H0)&&(r=!0,e=t),{a:t,b:e,rf:n,sphere:r}}(n.a,n.b,n.rf,n.ellps,n.sphere),A=(o=M.a,s=M.b,M.rf,l=n.R_A,g=((h=o*o)-(m=s*s))/h,y=0,l?(h=(o*=1-g*(d.bA+g*(d.Q1+g*d.ej)))*o,g=0):y=Math.sqrt(g),{es:g,e:y,ep2:(h-m)/m}),E=(0,_.f)(n.nadgrids),T=n.datum||x(n.datumCode,n.datum_params,M.a,M.b,A.es,A.ep2,E);c(this,n),c(this,i),this.a=M.a,this.b=M.b,this.rf=M.rf,this.sphere=M.sphere,this.es=A.es,this.e=A.e,this.ep2=A.ep2,this.datum=T,"init"in this&&"function"==typeof this.init&&this.init(),e(null,this)}else e("Could not get projection name from: "+t)}else e("Could not parse to valid json: "+t)}w.projections=h.Ay,w.projections.start();var M=w},6165:function(t,e,n){"use strict";n.d(e,{A:function(){return o}});var i=n(7e3),r=n(9393);function o(t){return Math.abs(t)<i.sK?t:t-(0,r.A)(t)*Math.PI}},6269:function(t,e,n){"use strict";n.d(e,{A:function(){return o}});var i=n(7e3),r=n(9393);function o(t,e){return e||Math.abs(t)<=i.DF?t:t-(0,r.A)(t)*i.JM}},8597:function(t,e,n){"use strict";function i(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}n.d(e,{A:function(){return i}})},6449:function(t,e,n){"use strict";function i(t){var e=Math.exp(t);return e=(e+1/e)/2}n.d(e,{A:function(){return i}})},1341:function(t,e,n){"use strict";function i(t){return 1-.25*t*(1+t/16*(3+1.25*t))}n.d(e,{A:function(){return i}})},7954:function(t,e,n){"use strict";function i(t){return.375*t*(1+.25*t*(1+.46875*t))}n.d(e,{A:function(){return i}})},3611:function(t,e,n){"use strict";function i(t){return.05859375*t*t*(1+.75*t)}n.d(e,{A:function(){return i}})},4280:function(t,e,n){"use strict";function i(t){return t*t*t*(35/3072)}n.d(e,{A:function(){return i}})},2889:function(t,e,n){"use strict";function i(t,e,n){var i=e*n;return t/Math.sqrt(1-i*i)}n.d(e,{A:function(){return i}})},4424:function(t,e,n){"use strict";function i(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),i=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(i,2))}n.d(e,{A:function(){return i}})},364:function(t,e,n){"use strict";function i(t,e,n,i,r){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-n*Math.sin(2*o)+i*Math.sin(4*o)-r*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*i*Math.cos(4*o)-6*r*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN}n.d(e,{A:function(){return i}})},1417:function(t,e,n){"use strict";function i(t,e,n,i,r){return t*r-e*Math.sin(2*r)+n*Math.sin(4*r)-i*Math.sin(6*r)}n.d(e,{A:function(){return i}})},7072:function(t,e,n){"use strict";function i(t,e,n){var i=t*e;return n/Math.sqrt(1-i*i)}n.d(e,{A:function(){return i}})},6157:function(t,e,n){"use strict";n.d(e,{A:function(){return r}});var i=n(7e3);function r(t,e){for(var n,r,o=.5*t,a=i.sK-2*Math.atan(e),s=0;s<=15;s++)if(n=t*Math.sin(a),a+=r=i.sK-2*Math.atan(e*Math.pow((1-n)/(1+n),o))-a,Math.abs(r)<=1e-10)return a;return-9999}},6194:function(t,e,n){"use strict";n.d(e,{A:function(){return m}});var i=1,r=.25,o=.046875,a=.01953125,s=.01068115234375,l=.75,u=.46875,c=.013020833333333334,h=.007120768229166667,d=.3645833333333333,f=.005696614583333333,p=.3076171875;function m(t){var e=[];e[0]=i-t*(r+t*(o+t*(a+t*s))),e[1]=t*(l-t*(o+t*(a+t*s)));var n=t*t;return e[2]=n*(u-t*(c+t*h)),n*=t,e[3]=n*(d-t*f),e[4]=n*t*p,e}},112:function(t,e,n){"use strict";n.d(e,{A:function(){return a}});var i=n(3712),r=n(7e3),o=20;function a(t,e,n){for(var a=1/(1-e),s=t,l=o;l;--l){var u=Math.sin(s),c=1-e*u*u;if(s-=c=((0,i.A)(s,u,Math.cos(s),n)-t)*(c*Math.sqrt(c))*a,Math.abs(c)<r.H0)return s}return s}},3712:function(t,e,n){"use strict";function i(t,e,n,i){return n*=e,e*=e,i[0]*t-n*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}n.d(e,{A:function(){return i}})},5964:function(t,e,n){"use strict";function i(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e}n.d(e,{A:function(){return i}})},9393:function(t,e,n){"use strict";function i(t){return t<0?-1:1}n.d(e,{A:function(){return i}})},7897:function(t,e,n){"use strict";function i(t){var e=Math.exp(t);return e=(e-1/e)/2}n.d(e,{A:function(){return i}})},851:function(t,e,n){"use strict";n.d(e,{A:function(){return r}});var i=n(7e3);function r(t,e,n){var r=t*n,o=.5*t;return r=Math.pow((1-r)/(1+r),o),Math.tan(.5*(i.sK-e))/r}},7e3:function(t,e,n){"use strict";n.d(e,{A1:function(){return s},DF:function(){return b},G9:function(){return o},H0:function(){return g},JM:function(){return _},Q1:function(){return p},Vj:function(){return x},Y$:function(){return r},_3:function(){return h},a8:function(){return i},bA:function(){return f},bv:function(){return l},dX:function(){return v},ej:function(){return m},gS:function(){return c},sK:function(){return d},xK:function(){return a},zp:function(){return u},zq:function(){return y}});var i=1,r=2,o=3,a=4,s=5,l=6378137,u=6356752.314,c=.0066943799901413165,h=484813681109536e-20,d=Math.PI/2,f=.16666666666666666,p=.04722222222222222,m=.022156084656084655,g=1e-10,y=.017453292519943295,v=57.29577951308232,x=Math.PI/4,_=2*Math.PI,b=3.14159265359},3356:function(t,e,n){"use strict";n.d(e,{Fs:function(){return l},OI:function(){return r},Rw:function(){return a},jX:function(){return o},mj:function(){return s}});var i=n(7e3);function r(t,e){return t.datum_type===e.datum_type&&(!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===i.a8?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==i.Y$||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]))}function o(t,e,n){var r,o,a,s,l=t.x,u=t.y,c=t.z?t.z:0;if(u<-i.sK&&u>-1.001*i.sK)u=-i.sK;else if(u>i.sK&&u<1.001*i.sK)u=i.sK;else{if(u<-i.sK)return{x:-1/0,y:-1/0,z:t.z};if(u>i.sK)return{x:1/0,y:1/0,z:t.z}}return l>Math.PI&&(l-=2*Math.PI),o=Math.sin(u),s=Math.cos(u),a=o*o,{x:((r=n/Math.sqrt(1-e*a))+c)*s*Math.cos(l),y:(r+c)*s*Math.sin(l),z:(r*(1-e)+c)*o}}function a(t,e,n,r){var o,a,s,l,u,c,h,d,f,p,m,g,y,v,x,_=1e-12,b=t.x,w=t.y,M=t.z?t.z:0;if(o=Math.sqrt(b*b+w*w),a=Math.sqrt(b*b+w*w+M*M),o/n<_){if(v=0,a/n<_)return i.sK,x=-r,{x:t.x,y:t.y,z:t.z}}else v=Math.atan2(w,b);s=M/a,d=(l=o/a)*(1-e)*(u=1/Math.sqrt(1-e*(2-e)*l*l)),f=s*u,y=0;do{y++,c=e*(h=n/Math.sqrt(1-e*f*f))/(h+(x=o*d+M*f-h*(1-e*f*f))),g=(m=s*(u=1/Math.sqrt(1-c*(2-c)*l*l)))*d-(p=l*(1-c)*u)*f,d=p,f=m}while(g*g>1e-24&&y<30);return{x:v,y:Math.atan(m/Math.abs(p)),z:x}}function s(t,e,n){if(e===i.a8)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===i.Y$){var r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],u=n[5],c=n[6];return{x:c*(t.x-u*t.y+l*t.z)+r,y:c*(u*t.x+t.y-s*t.z)+o,z:c*(-l*t.x+s*t.y+t.z)+a}}}function l(t,e,n){if(e===i.a8)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===i.Y$){var r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],u=n[5],c=n[6],h=(t.x-r)/c,d=(t.y-o)/c,f=(t.z-a)/c;return{x:h+u*d-l*f,y:-u*h+d+s*f,z:l*h-s*d+f}}}},1362:function(t,e,n){"use strict";n.d(e,{A:function(){return s}});var i=n(4326),r=n(6082);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?a[t]=(0,i.A)(arguments[1]):a[t]=(0,r.A)(arguments[1]):n&&"object"===o(n)&&!("projName"in n)?a[t]=(0,r.A)(arguments[1]):(a[t]=n,n||delete a[t])}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){return Array.isArray(t)?a.apply(e,t):a(t)});if("string"==typeof t){if(t in a)return a[t]}else"EPSG"in t?a["EPSG:"+t.EPSG]=t:"ESRI"in t?a["ESRI:"+t.ESRI]=t:"IAU2000"in t?a["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(a);var s=a},9677:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return bt}});var i=n(1845),r=n(7e3),o=n(3356),a=n(6269);function s(t){return t===r.a8||t===r.Y$}function l(t,e,n){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;var i={x:-n.x,y:n.y},o={x:Number.NaN,y:Number.NaN},a=[];t:for(var s=0;s<t.grids.length;s++){var l=t.grids[s];if(a.push(l.name),l.isNull){o=i;break}if(null!==l.grid)for(var c=l.grid.subgrids,h=0,d=c.length;h<d;h++){var f=c[h],p=(Math.abs(f.del[1])+Math.abs(f.del[0]))/1e4,m=f.ll[0]-p,g=f.ll[1]-p,y=f.ll[0]+(f.lim[0]-1)*f.del[0]+p,v=f.ll[1]+(f.lim[1]-1)*f.del[1]+p;if(!(g>i.y||m>i.x||v<i.y||y<i.x)&&(o=u(i,e,f),!isNaN(o.x)))break t}else if(l.mandatory)return console.log("Unable to find mandatory grid '"+l.name+"'"),-1}return isNaN(o.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*r.dX+" "+i.y*r.dX+" tried: '"+a+"'"),-1):(n.x=-o.x,n.y=o.y,0)}function u(t,e,n){var i={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return i;var r={x:t.x,y:t.y};r.x-=n.ll[0],r.y-=n.ll[1],r.x=(0,a.A)(r.x-Math.PI)+Math.PI;var o=c(r,n);if(e){if(isNaN(o.x))return i;o.x=r.x-o.x,o.y=r.y-o.y;var s,l,u=9;do{if(l=c(o,n),isNaN(l.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}s={x:r.x-(l.x+o.x),y:r.y-(l.y+o.y)},o.x+=s.x,o.y+=s.y}while(u--&&Math.abs(s.x)>1e-12&&Math.abs(s.y)>1e-12);if(u<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=(0,a.A)(o.x+n.ll[0]),i.y=o.y+n.ll[1]}else isNaN(o.x)||(i.x=t.x+o.x,i.y=t.y+o.y);return i}function c(t,e){var n,i={x:t.x/e.del[0],y:t.y/e.del[1]},r=Math.floor(i.x),o=Math.floor(i.y),a=i.x-1*r,s=i.y-1*o,l={x:Number.NaN,y:Number.NaN};if(r<0||r>=e.lim[0])return l;if(o<0||o>=e.lim[1])return l;n=o*e.lim[0]+r;var u=e.cvs[n][0],c=e.cvs[n][1];n++;var h=e.cvs[n][0],d=e.cvs[n][1];n+=e.lim[0];var f=e.cvs[n][0],p=e.cvs[n][1];n--;var m=e.cvs[n][0],g=e.cvs[n][1],y=a*s,v=a*(1-s),x=(1-a)*(1-s),_=(1-a)*s;return l.x=x*u+v*h+_*m+y*f,l.y=x*c+v*d+_*g+y*p,l}function h(t,e,n){var i,r,o,a=n.x,s=n.y,l=n.z||0,u={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(i=a,r=-1!=="ew".indexOf(t.axis[o])?"x":"y"):1===o?(i=s,r=-1!=="ns".indexOf(t.axis[o])?"y":"x"):(i=l,r="z"),t.axis[o]){case"e":case"n":u[r]=i;break;case"w":case"s":u[r]=-i;break;case"u":void 0!==n[r]&&(u.z=i);break;case"d":void 0!==n[r]&&(u.z=-i);break;default:return null}return u}function d(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function f(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function p(t,e,n,a){var u,c=void 0!==(n=Array.isArray(n)?d(n):{x:n.x,y:n.y,z:n.z,m:n.m}).z;if(function(t){f(t.x),f(t.y)}(n),t.datum&&e.datum&&function(t,e){return(t.datum.datum_type===r.a8||t.datum.datum_type===r.Y$||t.datum.datum_type===r.G9)&&"WGS84"!==e.datumCode||(e.datum.datum_type===r.a8||e.datum.datum_type===r.Y$||e.datum.datum_type===r.G9)&&"WGS84"!==t.datumCode}(t,e)&&(n=p(t,u=new i.A("WGS84"),n,a),t=u),a&&"enu"!==t.axis&&(n=h(t,!1,n)),"longlat"===t.projName)n={x:n.x*r.zq,y:n.y*r.zq,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),!(n=t.inverse(n)))return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=function(t,e,n){if((0,o.OI)(t,e))return n;if(t.datum_type===r.A1||e.datum_type===r.A1)return n;var i=t.a,a=t.es;if(t.datum_type===r.G9){if(0!==l(t,!1,n))return;i=r.bv,a=r.gS}var u=e.a,c=e.b,h=e.es;if(e.datum_type===r.G9&&(u=r.bv,c=r.zp,h=r.gS),a===h&&i===u&&!s(t.datum_type)&&!s(e.datum_type))return n;if(n=(0,o.jX)(n,a,i),s(t.datum_type)&&(n=(0,o.mj)(n,t.datum_type,t.datum_params)),s(e.datum_type)&&(n=(0,o.Fs)(n,e.datum_type,e.datum_params)),n=(0,o.Rw)(n,h,u,c),e.datum_type===r.G9&&0!==l(e,!0,n))return;return n}(t.datum,e.datum,n),n)return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*r.dX,y:n.y*r.dX,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),a&&"enu"!==e.axis?h(e,!0,n):(n&&!c&&delete n.z,n)}function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}var g=(0,i.A)("WGS84");function y(t,e,n,i){var r,o,a;return Array.isArray(n)?(r=p(t,e,n,i)||{x:NaN,y:NaN},n.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof r.z?[r.x,r.y,r.z].concat(n.slice(3)):[r.x,r.y,n[2]].concat(n.slice(3)):[r.x,r.y].concat(n.slice(2)):[r.x,r.y]):(o=p(t,e,n,i),2===(a=Object.keys(n)).length||a.forEach(function(i){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===i||"y"===i||"z"===i)return}else if("x"===i||"y"===i)return;o[i]=n[i]}),o)}function v(t){return t instanceof i.A?t:"object"===m(t)&&"oProj"in t?t.oProj:(0,i.A)(t)}var x=function(t,e,n){var i,r,o,a=!1;return void 0===e?(r=v(t),i=g,a=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,r=v(t),i=g,a=!0),i||(i=v(t)),r||(r=v(e)),n?y(i,r,n):(o={forward:function(t,e){return y(i,r,t,e)},inverse:function(t,e){return y(r,i,t,e)}},a&&(o.oProj=r),o)},_="AJSAJS",b="AFAFAF",w=65,M=73,A=79,E=86,T=90,S={forward:C,inverse:function(t){var e=L(D(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:k};function C(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,i="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(f=t.easting,p=t.northing,m=t.zoneNumber,g=R(m),y=Math.floor(f/1e5),v=Math.floor(p/1e5)%20,r=y,o=v,a=g,s=a-1,l=_.charCodeAt(s),u=b.charCodeAt(s),c=l+r-1,h=u+o,d=!1,c>T&&(c=c-T+w-1,d=!0),(c===M||l<M&&c>M||(c>M||l<M)&&d)&&c++,(c===A||l<A&&c>A||(c>A||l<A)&&d)&&++c===M&&c++,c>T&&(c=c-T+w-1),h>E?(h=h-E+w-1,d=!0):d=!1,(h===M||u<M&&h>M||(h>M||u<M)&&d)&&h++,(h===A||u<A&&h>A||(h>A||u<A)&&d)&&++h===M&&h++,h>E&&(h=h-E+w-1),String.fromCharCode(c)+String.fromCharCode(h))+n.substr(n.length-5,e)+i.substr(i.length-5,e);var r,o,a,s,l,u,c,h,d;var f,p,m,g,y,v}(function(t){var e,n,i,r,o,a,s,l,u=t.lat,c=t.lon,h=6378137,d=.00669438,f=.9996,p=P(u),m=P(c);l=Math.floor((c+180)/6)+1,180===c&&(l=60);u>=56&&u<64&&c>=3&&c<12&&(l=32);u>=72&&u<84&&(c>=0&&c<9?l=31:c>=9&&c<21?l=33:c>=21&&c<33?l=35:c>=33&&c<42&&(l=37));s=P(6*(l-1)-180+3),e=d/(1-d),n=h/Math.sqrt(1-d*Math.sin(p)*Math.sin(p)),i=Math.tan(p)*Math.tan(p),r=e*Math.cos(p)*Math.cos(p),o=Math.cos(p)*(m-s),a=h*((1-d/4-3*d*d/64-5*d*d*d/256)*p-(3*d/8+3*d*d/32+45*d*d*d/1024)*Math.sin(2*p)+(15*d*d/256+45*d*d*d/1024)*Math.sin(4*p)-35*d*d*d/3072*Math.sin(6*p));var g=f*n*(o+(1-i+r)*o*o*o/6+(5-18*i+i*i+72*r-58*e)*o*o*o*o*o/120)+5e5,y=f*(a+n*Math.tan(p)*(o*o/2+(5-i+9*r+4*r*r)*o*o*o*o/24+(61-58*i+i*i+600*r-330*e)*o*o*o*o*o*o/720));u<0&&(y+=1e7);return{northing:Math.round(y),easting:Math.round(g),zoneNumber:l,zoneLetter:I(u)}}({lat:t[1],lon:t[0]}),e)}function k(t){var e=L(D(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function P(t){return t*(Math.PI/180)}function O(t){return t/Math.PI*180}function L(t){var e=t.northing,n=t.easting,i=t.zoneLetter,r=t.zoneNumber;if(r<0||r>60)return null;var o,a,s,l,u,c,h,d,f,p=.9996,m=6378137,g=.00669438,y=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),v=n-5e5,x=e;i<"N"&&(x-=1e7),h=6*(r-1)-180+3,o=.006739496752268451,f=(d=x/p/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*d)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*d)+151*y*y*y/96*Math.sin(6*d),a=m/Math.sqrt(1-g*Math.sin(f)*Math.sin(f)),s=Math.tan(f)*Math.tan(f),l=o*Math.cos(f)*Math.cos(f),u=.99330562*m/Math.pow(1-g*Math.sin(f)*Math.sin(f),1.5),c=v/(a*p);var _=f-a*Math.tan(f)/u*(c*c/2-(5+3*s+10*l-4*l*l-9*o)*c*c*c*c/24+(61+90*s+298*l+45*s*s-1.6983531815716497-3*l*l)*c*c*c*c*c*c/720);_=O(_);var b,w=(c-(1+2*s+l)*c*c*c/6+(5-2*l+28*s-3*l*l+8*o+24*s*s)*c*c*c*c*c/120)/Math.cos(f);if(w=h+O(w),t.accuracy){var M=L({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});b={top:M.lat,right:M.lon,bottom:_,left:w}}else b={lat:_,lon:w};return b}function I(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function R(t){var e=t%6;return 0===e&&(e=6),e}function D(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,i=null,r="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;r+=e,o++}var a=parseInt(r,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;i=t.substring(o,o+=2);for(var l=R(a),u=function(t,e){var n=_.charCodeAt(e-1),i=1e5,r=!1;for(;n!==t.charCodeAt(0);){if(++n===M&&n++,n===A&&n++,n>T){if(r)throw"Bad character: "+t;n=w,r=!0}i+=1e5}return i}(i.charAt(0),l),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n=b.charCodeAt(e-1),i=0,r=!1;for(;n!==t.charCodeAt(0);){if(++n===M&&n++,n===A&&n++,n>E){if(r)throw"Bad character: "+t;n=w,r=!0}i+=1e5}return i}(i.charAt(1),l);c<j(s);)c+=2e6;var h=n-o;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var d,f,p,m=h/2,g=0,y=0;return m>0&&(d=1e5/Math.pow(10,m),f=t.substring(o,o+m),g=parseFloat(f)*d,p=t.substring(o+m),y=parseFloat(p)*d),{easting:g+u,northing:y+c,zoneLetter:s,zoneNumber:a,accuracy:d}}function j(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function G(t,e,n){if(!(this instanceof G))return new G(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"===F(t))this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var i=t.split(",");this.x=parseFloat(i[0]),this.y=parseFloat(i[1]),this.z=parseFloat(i[2])||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}G.fromMGRS=function(t){return new G(k(t))},G.prototype.toMGRS=function(t){return C([this.x,this.y],t)};var N=G,z=n(1362),B=n(8201),V=n(5518),q=n(3426),U=n(2924),H=n(6789),W=n(3084),X=n(9872),K=n(431),Q=n(993),Z=n(6167),Y=n(3245),J=n(8506),$=n(4894),tt=n(5106),et=n(8104),nt=n(780),it=n(741),rt=n(6731),ot=n(969),at=n(1034),st=n(6155),lt=n(7724),ut=n(6671),ct=n(6014),ht=n(6145),dt=n(2513),ft=n(8067),pt=n(5904),mt=n(251),gt=n(1017),yt=n(8197),vt=n(9265),xt=n(4076);var _t=Object.assign(x,{defaultDatum:"WGS84",Proj:i.A,WGS84:new i.A("WGS84"),Point:N,toPoint:d,defs:z.A,nadgrid:B.A,transform:p,mgrs:S,version:"__VERSION__"});!function(t){t.Proj.projections.add(V.default),t.Proj.projections.add(q.default),t.Proj.projections.add(U.default),t.Proj.projections.add(H.default),t.Proj.projections.add(W.default),t.Proj.projections.add(X.default),t.Proj.projections.add(K.default),t.Proj.projections.add(Q.default),t.Proj.projections.add(Z.default),t.Proj.projections.add(Y.default),t.Proj.projections.add(J.default),t.Proj.projections.add($.default),t.Proj.projections.add(tt.default),t.Proj.projections.add(et.default),t.Proj.projections.add(nt.default),t.Proj.projections.add(it.default),t.Proj.projections.add(rt.default),t.Proj.projections.add(ot.default),t.Proj.projections.add(at.default),t.Proj.projections.add(st.default),t.Proj.projections.add(lt.default),t.Proj.projections.add(ut.default),t.Proj.projections.add(ct.default),t.Proj.projections.add(ht.default),t.Proj.projections.add(dt.default),t.Proj.projections.add(ft.default),t.Proj.projections.add(pt.default),t.Proj.projections.add(mt.default),t.Proj.projections.add(gt.default),t.Proj.projections.add(yt.default),t.Proj.projections.add(vt.default),t.Proj.projections.add(xt.default)}(_t);var bt=_t},7575:function(t,e,n){"use strict";n.d(e,{A:function(){return r}});var i=/[\s_\-\/\(\)]/g;function r(t,e){if(t[e])return t[e];for(var n,r=Object.keys(t),o=e.toLowerCase().replace(i,""),a=-1;++a<r.length;)if((n=r[a]).toLowerCase().replace(i,"")===o)return t[n]}},8201:function(t,e,n){"use strict";function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function s(n,i,o,a){var s=i&&i.prototype instanceof u?i:u,c=Object.create(s.prototype);return r(c,"_invoke",function(n,i,r){var o,a,s,u=0,c=r||[],h=!1,d={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return o=e,a=0,s=t,d.n=n,l}};function f(n,i){for(a=n,s=i,e=0;!h&&u&&!r&&e<c.length;e++){var r,o=c[e],f=d.p,p=o[2];n>3?(r=p===i)&&(s=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=t):o[0]<=f&&((r=n<2&&f<o[1])?(a=0,d.v=i,d.n=o[1]):f<p&&(r=n<3||o[0]>i||i>p)&&(o[4]=n,o[5]=i,d.n=p,a=0))}if(r||n>1)return l;throw h=!0,i}return function(r,c,p){if(u>1)throw TypeError("Generator is already running");for(h&&1===c&&f(c,p),a=c,s=p;(e=a<2?t:s)||!h;){o||(a?a<3?(a>1&&(d.n=-1),f(a,s)):d.n=s:d.v=s);try{if(u=2,o){if(a||(r="next"),e=o[r]){if(!(e=e.call(o,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,a<2&&(a=0)}else 1===a&&(e=o.return)&&e.call(o),a<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),a=1);o=t}else if((e=(h=d.n<0)?s:n.call(i,d))!==l)break}catch(e){o=t,a=1,s=e}finally{u=1}}return{value:e,done:h}}}(n,o,a),!0),c}var l={};function u(){}function c(){}function h(){}e=Object.getPrototypeOf;var d=[][o]?e(e([][o]())):(r(e={},o,function(){return this}),e),f=h.prototype=u.prototype=Object.create(d);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,r(t,a,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=h,r(f,"constructor",h),r(h,"constructor",c),c.displayName="GeneratorFunction",r(h,a,"GeneratorFunction"),r(f),r(f,a,"Generator"),r(f,o,function(){return this}),r(f,"toString",function(){return"[object Generator]"}),(i=function(){return{w:s,m:p}})()}function r(t,e,n,i){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}r=function(t,e,n,i){function a(e,n){r(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},r(t,e,n,i)}function o(t,e,n,i,r,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,r)}n.d(e,{A:function(){return s},f:function(){return c}});var a={};function s(t,e,n){return e instanceof ArrayBuffer?function(t,e,n){var i=!0;void 0!==n&&!1===n.includeErrorFields&&(i=!1);var r=new DataView(e),o=function(t){var e=t.getInt32(8,!1);if(11===e)return!1;e=t.getInt32(8,!0),11!==e&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian");return!0}(r),s=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:p(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(r,o),l=function(t,e,n,i){for(var r=176,o=[],a=0;a<e.nSubgrids;a++){var s=g(t,r,n),l=y(t,r,s,n,i),u=Math.round(1+(s.upperLongitude-s.lowerLongitude)/s.longitudeInterval),c=Math.round(1+(s.upperLatitude-s.lowerLatitude)/s.latitudeInterval);o.push({ll:[f(s.lowerLongitude),f(s.lowerLatitude)],del:[f(s.longitudeInterval),f(s.latitudeInterval)],lim:[u,c],count:s.gridNodeCount,cvs:m(l)});var h=16;!1===i&&(h=8),r+=176+s.gridNodeCount*h}return o}(r,s,o,i),u={header:s,subgrids:l};return a[t]=u,u}(t,e,n):{ready:l(t,e)}}function l(t,e){return u.apply(this,arguments)}function u(){var t;return t=i().m(function t(e,n){var r,o,s,l,u,c,h,p,m,g,y,v,x,_,b,w,M,A;return i().w(function(t){for(;;)switch(t.n){case 0:return r=[],t.n=1,n.getImageCount();case 1:o=t.v,s=o-1;case 2:if(!(s>=0)){t.n=6;break}return t.n=3,n.getImage(s);case 3:return l=t.v,t.n=4,l.readRasters();case 4:for(u=t.v,c=u,h=[l.getWidth(),l.getHeight()],p=l.getBoundingBox().map(d),m=[l.fileDirectory.ModelPixelScale[0],l.fileDirectory.ModelPixelScale[1]].map(d),g=p[0]+(h[0]-1)*m[0],y=p[3]-(h[1]-1)*m[1],v=c[0],x=c[1],_=[],b=h[1]-1;b>=0;b--)for(w=h[0]-1;w>=0;w--)M=b*h[0]+w,_.push([-f(x[M]),f(v[M])]);r.push({del:m,lim:h,ll:[-g,y],cvs:_});case 5:s--,t.n=2;break;case 6:return A={header:{nSubgrids:o},subgrids:r},a[e]=A,t.a(2,A)}},t)}),u=function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function s(t){o(a,i,r,s,l,"next",t)}function l(t){o(a,i,r,s,l,"throw",t)}s(void 0)})},u.apply(this,arguments)}function c(t){return void 0===t?null:t.split(",").map(h)}function h(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:a[t]||null,isNull:!1}}function d(t){return t*Math.PI/180}function f(t){return t/3600*Math.PI/180}function p(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function m(t){return t.map(function(t){return[f(t.longitudeShift),f(t.latitudeShift)]})}function g(t,e,n){return{name:p(t,e+8,e+16).trim(),parent:p(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function y(t,e,n,i,r){var o=e+176,a=16;!1===r&&(a=8);for(var s=[],l=0;l<n.gridNodeCount;l++){var u={latitudeShift:t.getFloat32(o+l*a,i),longitudeShift:t.getFloat32(o+l*a+4,i)};!1!==r&&(u.latitudeAccuracy=t.getFloat32(o+l*a+8,i),u.longitudeAccuracy=t.getFloat32(o+l*a+12,i)),s.push(u)}return s}},4326:function(t,e,n){"use strict";n.d(e,{A:function(){return l}});var i=n(7e3),r={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},o=r,a={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}},s=n(7575);function l(t){var e,n,r,l={},u=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t},{}),c={proj:"projName",datum:"datumCode",rf:function(t){l.rf=parseFloat(t)},lat_0:function(t){l.lat0=t*i.zq},lat_1:function(t){l.lat1=t*i.zq},lat_2:function(t){l.lat2=t*i.zq},lat_ts:function(t){l.lat_ts=t*i.zq},lon_0:function(t){l.long0=t*i.zq},lon_1:function(t){l.long1=t*i.zq},lon_2:function(t){l.long2=t*i.zq},alpha:function(t){l.alpha=parseFloat(t)*i.zq},gamma:function(t){l.rectified_grid_angle=parseFloat(t)*i.zq},lonc:function(t){l.longc=t*i.zq},x_0:function(t){l.x0=parseFloat(t)},y_0:function(t){l.y0=parseFloat(t)},k_0:function(t){l.k0=parseFloat(t)},k:function(t){l.k0=parseFloat(t)},a:function(t){l.a=parseFloat(t)},b:function(t){l.b=parseFloat(t)},r:function(t){l.a=l.b=parseFloat(t)},r_a:function(){l.R_A=!0},zone:function(t){l.zone=parseInt(t,10)},south:function(){l.utmSouth=!0},towgs84:function(t){l.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){l.to_meter=parseFloat(t)},units:function(t){l.units=t;var e=(0,s.A)(a,t);e&&(l.to_meter=e.to_meter)},from_greenwich:function(t){l.from_greenwich=t*i.zq},pm:function(t){var e=(0,s.A)(o,t);l.from_greenwich=(e||parseFloat(t))*i.zq},nadgrids:function(t){"@null"===t?l.datumCode="none":l.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(l.axis=t)},approx:function(){l.approx=!0},over:function(){l.over=!0}};for(e in u)n=u[e],e in c?"function"==typeof(r=c[e])?r(n):l[r]=n:l[e]=n;return"string"==typeof l.datumCode&&"WGS84"!==l.datumCode&&(l.datumCode=l.datumCode.toLowerCase()),l.projStr=t,l}},7272:function(t,e,n){"use strict";n.d(e,{Cx:function(){return u}});var i=n(9402),r=n(2308),o=[i.default,r.default],a={},s=[];function l(t,e){var n=s.length;return t.names?(s[n]=t,t.names.forEach(function(t){a[t.toLowerCase()]=n}),this):(console.log(e),!0)}function u(t){return t.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}e.Ay={start:function(){o.forEach(l)},add:l,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==a[e]&&s[a[e]]||(e=u(e))in a&&s[a[e]]?s[a[e]]:void 0}}},4894:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return u},init:function(){return l},inverse:function(){return c},names:function(){return d},phi1z:function(){return h}});var i=n(7072),r=n(5964),o=n(6269),a=n(8597),s=n(7e3);function l(){Math.abs(this.lat1+this.lat2)<s.H0||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=(0,i.A)(this.e3,this.sin_po,this.cos_po),this.qs1=(0,r.A)(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=(0,i.A)(this.e3,this.sin_po,this.cos_po),this.qs2=(0,r.A)(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=(0,r.A)(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>s.H0?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function u(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=(0,r.A)(this.e3,this.sin_phi),a=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,s=this.ns0*(0,o.A)(e-this.long0,this.over),l=a*Math.sin(s)+this.x0,u=this.rh-a*Math.cos(s)+this.y0;return t.x=l,t.y=u,t}function c(t){var e,n,i,r,a,s;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),r=0,0!==e&&(r=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,this.sphere?s=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,s=this.phi1z(this.e3,n)),a=(0,o.A)(r/this.ns0+this.long0,this.over),t.x=a,t.y=s,t}function h(t,e){var n,i,r,o,l=(0,a.A)(.5*e);if(t<s.H0)return l;for(var u=t*t,c=1;c<=25;c++)if(l+=o=.5*(r=1-(i=t*(n=Math.sin(l)))*i)*r/Math.cos(l)*(e/(1-u)-n/r+.5/t*Math.log((1-i)/(1+i))),Math.abs(o)<=1e-7)return l;return null}var d=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];e.default={init:l,forward:u,inverse:c,names:d,phi1z:h}},6014:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return g},forward:function(){return f},init:function(){return d},inverse:function(){return p},names:function(){return m}});var i=n(6269),r=n(7e3),o=n(1417),a=n(1341),s=n(7954),l=n(3611),u=n(4280),c=n(8597),h=n(364);function d(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function f(t){var e,n,c,h,d,f,p,m,g,y,v,x=t.x,_=t.y,b=Math.sin(t.y),w=Math.cos(t.y),M=(0,i.A)(x-this.long0,this.over);return this.sphere?Math.abs(this.sin_p12-1)<=r.H0?(t.x=this.x0+this.a*(r.sK-_)*Math.sin(M),t.y=this.y0-this.a*(r.sK-_)*Math.cos(M),t):Math.abs(this.sin_p12+1)<=r.H0?(t.x=this.x0+this.a*(r.sK+_)*Math.sin(M),t.y=this.y0+this.a*(r.sK+_)*Math.cos(M),t):(g=this.sin_p12*b+this.cos_p12*w*Math.cos(M),m=(p=Math.acos(g))?p/Math.sin(p):1,t.x=this.x0+this.a*m*w*Math.sin(M),t.y=this.y0+this.a*m*(this.cos_p12*b-this.sin_p12*w*Math.cos(M)),t):(e=(0,a.A)(this.es),n=(0,s.A)(this.es),c=(0,l.A)(this.es),h=(0,u.A)(this.es),Math.abs(this.sin_p12-1)<=r.H0?(d=this.a*(0,o.A)(e,n,c,h,r.sK),f=this.a*(0,o.A)(e,n,c,h,_),t.x=this.x0+(d-f)*Math.sin(M),t.y=this.y0-(d-f)*Math.cos(M),t):Math.abs(this.sin_p12+1)<=r.H0?(d=this.a*(0,o.A)(e,n,c,h,r.sK),f=this.a*(0,o.A)(e,n,c,h,_),t.x=this.x0+(d+f)*Math.sin(M),t.y=this.y0+(d+f)*Math.cos(M),t):Math.abs(x)<r.H0&&Math.abs(_-this.lat0)<r.H0?(t.x=t.y=0,t):(v=(y=function(t,e,n,i,r,o){var a,s,l,u,c,h,d,f,p,m,g,y,v,x=i-e,_=Math.atan((1-o)*Math.tan(t)),b=Math.atan((1-o)*Math.tan(n)),w=Math.sin(_),M=Math.cos(_),A=Math.sin(b),E=Math.cos(b),T=x,S=100;do{if(s=Math.sin(T),l=Math.cos(T),0===(u=Math.sqrt(E*s*(E*s)+(M*A-w*E*l)*(M*A-w*E*l))))return{azi1:0,s12:0};c=w*A+M*E*l,a=T,T=x+(1-(m=o/16*(f=1-(d=M*E*s/u)*d)*(4+o*(4-3*f))))*o*d*((h=Math.atan2(u,c))+m*u*((p=0!==f?c-2*w*A/f:0)+m*c*(2*p*p-1)))}while(Math.abs(T-a)>1e-12&&--S>0);return 0===S?{azi1:NaN,s12:NaN}:(v=r*(1-o)*(1+(g=f*(r*r-r*(1-o)*(r*(1-o)))/(r*(1-o)*(r*(1-o))))/16384*(4096+g*(g*(320-175*g)-768)))*(h-(y=g/1024*(256+g*(g*(74-47*g)-128)))*u*(p+y/4*(c*(2*p*p-1)-y/6*p*(4*u*u-3)*(4*p*p-3)))),{azi1:Math.atan2(E*s,M*A-w*E*l),s12:v})}(this.lat0,this.long0,_,x,this.a,this.f)).azi1,t.x=y.s12*Math.sin(v),t.y=y.s12*Math.cos(v),t))}function p(t){var e,n,d,f,p,m,g,y,v,x,_,b,w,M,A,E;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*r.sK*this.a)return;return n=e/this.a,d=Math.sin(n),f=Math.cos(n),p=this.long0,Math.abs(e)<=r.H0?m=this.lat0:(m=(0,c.A)(f*this.sin_p12+t.y*d*this.cos_p12/e),g=Math.abs(this.lat0)-r.sK,p=Math.abs(g)<=r.H0?this.lat0>=0?(0,i.A)(this.long0+Math.atan2(t.x,-t.y),this.over):(0,i.A)(this.long0-Math.atan2(-t.x,t.y),this.over):(0,i.A)(this.long0+Math.atan2(t.x*d,e*this.cos_p12*f-t.y*this.sin_p12*d),this.over)),t.x=p,t.y=m,t}return y=(0,a.A)(this.es),v=(0,s.A)(this.es),x=(0,l.A)(this.es),_=(0,u.A)(this.es),Math.abs(this.sin_p12-1)<=r.H0?(w=(b=this.a*(0,o.A)(y,v,x,_,r.sK))-(e=Math.sqrt(t.x*t.x+t.y*t.y)),m=(0,h.A)(w/this.a,y,v,x,_),p=(0,i.A)(this.long0+Math.atan2(t.x,-1*t.y),this.over),t.x=p,t.y=m,t):Math.abs(this.sin_p12+1)<=r.H0?(b=this.a*(0,o.A)(y,v,x,_,r.sK),w=(e=Math.sqrt(t.x*t.x+t.y*t.y))-b,m=(0,h.A)(w/this.a,y,v,x,_),p=(0,i.A)(this.long0+Math.atan2(t.x,t.y),this.over),t.x=p,t.y=m,t):(M=Math.atan2(t.x,t.y),A=Math.sqrt(t.x*t.x+t.y*t.y),E=function(t,e,n,i,r,o){var a,s,l,u,c=Math.atan((1-o)*Math.tan(t)),h=Math.sin(c),d=Math.cos(c),f=Math.sin(n),p=Math.cos(n),m=Math.atan2(h,d*p),g=d*f,y=1-g*g,v=y*(r*r-r*(1-o)*(r*(1-o)))/(r*(1-o)*(r*(1-o))),x=1+v/16384*(4096+v*(v*(320-175*v)-768)),_=v/1024*(256+v*(v*(74-47*v)-128)),b=i/(r*(1-o)*x),w=100;do{s=Math.cos(2*m+b),a=b,b=i/(r*(1-o)*x)+_*(l=Math.sin(b))*(s+_/4*((u=Math.cos(b))*(2*s*s-1)-_/6*s*(4*l*l-3)*(4*s*s-3)))}while(Math.abs(b-a)>1e-12&&--w>0);if(0===w)return{lat2:NaN,lon2:NaN};var M=h*l-d*u*p,A=o/16*y*(4+o*(4-3*y));return{lat2:Math.atan2(h*u+d*l*p,(1-o)*Math.sqrt(g*g+M*M)),lon2:e+(Math.atan2(l*f,d*u-h*l*p)-(1-A)*o*g*(b+A*l*(s+A*u*(2*s*s-1))))}}(this.lat0,this.long0,M,A,this.a,this.f),t.x=E.lon2,t.y=E.lat2,t)}var m=["Azimuthal_Equidistant","aeqd"],g={init:d,forward:f,inverse:p,names:m}},9265:function(t,e,n){"use strict";n.r(e),n.d(e,{init:function(){return h},names:function(){return g}});var i=n(6165),r=n(6269),o=n(4424),a=n(6194),s=n(112),l=n(3712),u=n(7e3),c=1e-10;function h(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<c)throw new Error;this.es?(this.en=(0,a.A)(this.es),this.m1=(0,l.A)(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=f,this.forward=d):(Math.abs(this.phi1)+c>=u.sK?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=m,this.forward=p)}function d(t){var e,n,i,o=(0,r.A)(t.x-(this.long0||0),this.over),a=t.y;return e=this.am1+this.m1-(0,l.A)(a,n=Math.sin(a),i=Math.cos(a),this.en),n=i*o/(e*Math.sqrt(1-this.es*n*n)),t.x=e*Math.sin(n),t.y=this.am1-e*Math.cos(n),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function f(t){var e,n,a,l;if(t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a,n=(0,o.A)(t.x,t.y=this.am1-t.y),l=(0,s.A)(this.am1+this.m1-n,this.es,this.en),(e=Math.abs(l))<u.sK)e=Math.sin(l),a=n*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(l);else{if(!(Math.abs(e-u.sK)<=c))throw new Error;a=0}return t.x=(0,r.A)(a+(this.long0||0),this.over),t.y=(0,i.A)(l),t}function p(t){var e,n,i=(0,r.A)(t.x-(this.long0||0),this.over),o=t.y;return n=this.cphi1+this.phi1-o,Math.abs(n)>c?(t.x=n*Math.sin(e=i*Math.cos(o)/n),t.y=this.cphi1-n*Math.cos(e)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function m(t){var e,n;t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var a=(0,o.A)(t.x,t.y=this.cphi1-t.y);if(n=this.cphi1+this.phi1-a,Math.abs(n)>u.sK)throw new Error;return e=Math.abs(Math.abs(n)-u.sK)<=c?0:a*Math.atan2(t.x,t.y)/Math.cos(n),t.x=(0,r.A)(e+(this.long0||0),this.over),t.y=(0,i.A)(n),t}var g=["bonne","Bonne (Werner lat_1=90)"];e.default={init:h,names:g}},3245:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return p},init:function(){return f},inverse:function(){return m},names:function(){return g}});var i=n(1417),r=n(1341),o=n(7954),a=n(3611),s=n(4280),l=n(2889),u=n(6269),c=n(6165),h=n(364),d=n(7e3);function f(){this.sphere||(this.e0=(0,r.A)(this.es),this.e1=(0,o.A)(this.es),this.e2=(0,a.A)(this.es),this.e3=(0,s.A)(this.es),this.ml0=this.a*(0,i.A)(this.e0,this.e1,this.e2,this.e3,this.lat0))}function p(t){var e,n,r=t.x,o=t.y;if(r=(0,u.A)(r-this.long0,this.over),this.sphere)e=this.a*Math.asin(Math.cos(o)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(o),Math.cos(r))-this.lat0);else{var a=Math.sin(o),s=Math.cos(o),c=(0,l.A)(this.a,this.e,a),h=Math.tan(o)*Math.tan(o),d=r*Math.cos(o),f=d*d,p=this.es*s*s/(1-this.es);e=c*d*(1-f*h*(1/6-(8-h+8*p)*f/120)),n=this.a*(0,i.A)(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+c*a/s*f*(.5+(5-h+6*p)*f/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function m(t){t.x-=this.x0,t.y-=this.y0;var e,n,i=t.x/this.a,r=t.y/this.a;if(this.sphere){var o=r+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(i)),n=Math.atan2(Math.tan(i),Math.cos(o))}else{var a=this.ml0/this.a+r,s=(0,h.A)(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-d.sK)<=d.H0)return t.x=this.long0,t.y=d.sK,r<0&&(t.y*=-1),t;var f=(0,l.A)(this.a,this.e,Math.sin(s)),p=f*f*f/this.a/this.a*(1-this.es),m=Math.pow(Math.tan(s),2),g=i*this.a/f,y=g*g;e=s-f*Math.tan(s)/p*g*g*(.5-(1+3*m)*g*g/24),n=g*(1-y*(m/3+(1+3*m)*m*y/15))/Math.cos(s)}return t.x=(0,u.A)(n+this.long0,this.over),t.y=(0,c.A)(e),t}var g=["Cassini","Cassini_Soldner","cass"];e.default={init:f,forward:p,inverse:m,names:g}},8104:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return h},forward:function(){return l},init:function(){return s},inverse:function(){return u},names:function(){return c}});var i=n(6269),r=n(5964),o=n(7072),a=n(7e3);function s(){this.sphere||(this.k0=(0,o.A)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function l(t){var e,n,o=t.x,a=t.y,s=(0,i.A)(o-this.long0,this.over);if(this.sphere)e=this.x0+this.a*s*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(a)/Math.cos(this.lat_ts);else{var l=(0,r.A)(this.e,Math.sin(a));e=this.x0+this.a*this.k0*s,n=this.y0+this.a*l*.5/this.k0}return t.x=e,t.y=n,t}function u(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=(0,i.A)(this.long0+t.x/this.a/Math.cos(this.lat_ts),this.over),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*a.sK:a.sK;for(var i,r,o,s,l=Math.asin(.5*e),u=0;u<30;u++)if(r=Math.sin(l),o=Math.cos(l),s=t*r,l+=i=Math.pow(1-s*s,2)/(2*o)*(e/(1-t*t)-r/(1-s*s)+.5/t*Math.log((1-s)/(1+s))),Math.abs(i)<=1e-10)return l;return NaN}(this.e,2*t.y*this.k0/this.a),e=(0,i.A)(this.long0+t.x/(this.a*this.k0),this.over)),t.x=e,t.y=n,t}var c=["cea"],h={init:s,forward:l,inverse:u,names:c}},780:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return a},init:function(){return o},inverse:function(){return s},names:function(){return l}});var i=n(6269),r=n(6165);function o(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function a(t){var e=t.x,n=t.y,o=(0,i.A)(e-this.long0,this.over),a=(0,r.A)(n-this.lat0);return t.x=this.x0+this.a*o*this.rc,t.y=this.y0+this.a*a,t}function s(t){var e=t.x,n=t.y;return t.x=(0,i.A)(this.long0+(e-this.x0)/(this.a*this.rc),this.over),t.y=(0,r.A)(this.lat0+(n-this.y0)/this.a),t}var l=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];e.default={init:o,forward:a,inverse:s,names:l}},7724:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return p},init:function(){return f},inverse:function(){return m},names:function(){return g}});var i=n(1341),r=n(7954),o=n(3611),a=n(4280),s=n(7072),l=n(1417),u=n(6269),c=n(6165),h=n(364),d=n(7e3);function f(){Math.abs(this.lat1+this.lat2)<d.H0||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=(0,i.A)(this.es),this.e1=(0,r.A)(this.es),this.e2=(0,o.A)(this.es),this.e3=(0,a.A)(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=(0,s.A)(this.e,this.sin_phi,this.cos_phi),this.ml1=(0,l.A)(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<d.H0?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=(0,s.A)(this.e,this.sin_phi,this.cos_phi),this.ml2=(0,l.A)(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=(0,l.A)(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function p(t){var e,n=t.x,i=t.y;if(this.sphere)e=this.a*(this.g-i);else{var r=(0,l.A)(this.e0,this.e1,this.e2,this.e3,i);e=this.a*(this.g-r)}var o=this.ns*(0,u.A)(n-this.long0,this.over),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t}function m(t){var e,n,i,r;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return r=(0,u.A)(this.long0+o/this.ns,this.over),i=(0,c.A)(this.g-n/this.a),t.x=r,t.y=i,t;var a=this.g-n/this.a;return i=(0,h.A)(a,this.e0,this.e1,this.e2,this.e3),r=(0,u.A)(this.long0+o/this.ns,this.over),t.x=r,t.y=i,t}var g=["Equidistant_Conic","eqdc"];e.default={init:f,forward:p,inverse:m,names:g}},8197:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return c},init:function(){return u},inverse:function(){return h},names:function(){return d}});var i=n(6269),r=1.340264,o=-.081106,a=893e-6,s=.003796,l=Math.sqrt(3)/2;function u(){this.es=0,this.long0=void 0!==this.long0?this.long0:0,this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0}function c(t){var e=(0,i.A)(t.x-this.long0,this.over),n=t.y,u=Math.asin(l*Math.sin(n)),c=u*u,h=c*c*c;return t.x=e*Math.cos(u)/(l*(r+3*o*c+h*(7*a+9*s*c))),t.y=u*(r+o*c+h*(a+s*c)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function h(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e,n,u,c,h=t.y;for(c=0;c<12&&(h-=u=(h*(r+o*(e=h*h)+(n=e*e*e)*(a+s*e))-t.y)/(r+3*o*e+n*(7*a+9*s*e)),!(Math.abs(u)<1e-9));++c);return n=(e=h*h)*e*e,t.x=l*t.x*(r+3*o*e+n*(7*a+9*s*e))/Math.cos(h),t.y=Math.asin(Math.sin(h)/l),t.x=(0,i.A)(t.x+this.long0,this.over),t}var d=["eqearth","Equal Earth","Equal_Earth"];e.default={init:u,forward:c,inverse:h,names:d}},63:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return o},init:function(){return r},inverse:function(){return a},names:function(){return s}});var i=n(6269);function r(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0}function o(t){var e=t.x,n=t.y,r=(0,i.A)(e-this.long0,this.over),o=this.x0+this.a*r*Math.cos(this.lat0),a=this.y0+this.a*n;return this.t1=o,this.t2=Math.cos(this.lat0),t.x=o,t.y=a,t}function a(t){t.x-=this.x0,t.y-=this.y0;var e=t.y/this.a,n=(0,i.A)(this.long0+t.x/(this.a*Math.cos(this.lat0)),this.over);t.x=n,t.y=e}var s=["equi"];e.default={init:r,forward:o,inverse:a,names:s}},3426:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return m},forward:function(){return d},init:function(){return h},inverse:function(){return f},names:function(){return p}});var i=n(5518),r=n(7897),o=n(4424);function a(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/((0,o.A)(1,e)+1))),t<0?-e:e}function s(t,e){for(var n,i=2*Math.cos(2*e),r=t.length-1,o=t[r],a=0;--r>=0;)n=i*o-a+t[r],a=o,o=n;return e+n*Math.sin(2*e)}var l=n(6449);function u(t,e,n){for(var i,o,a=Math.sin(e),s=Math.cos(e),u=(0,r.A)(n),c=(0,l.A)(n),h=2*s*c,d=-2*a*u,f=t.length-1,p=t[f],m=0,g=0,y=0;--f>=0;)i=g,o=m,p=h*(g=p)-i-d*(m=y)+t[f],y=d*g-o+h*m;return[(h=a*c)*p-(d=s*u)*y,h*y+d*p]}var c=n(6269);function h(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(i.default.init.apply(this),this.forward=i.default.forward,this.inverse=i.default.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var r=s(this.cbg,this.lat0);this.Zb=-this.Qn*(r+function(t,e){for(var n,i=2*Math.cos(e),r=t.length-1,o=t[r],a=0;--r>=0;)n=i*o-a+t[r],a=o,o=n;return Math.sin(e)*n}(this.gtu,2*r))}function d(t){var e=(0,c.A)(t.x-this.long0,this.over),n=t.y;n=s(this.cbg,n);var i=Math.sin(n),r=Math.cos(n),l=Math.sin(e),h=Math.cos(e);n=Math.atan2(i,h*r),e=Math.atan2(l*r,(0,o.A)(i,r*h)),e=a(Math.tan(e));var d,f,p=u(this.gtu,2*n,2*e);return n+=p[0],e+=p[1],Math.abs(e)<=2.623395162778?(d=this.a*(this.Qn*e)+this.x0,f=this.a*(this.Qn*n+this.Zb)+this.y0):(d=1/0,f=1/0),t.x=d,t.y=f,t}function f(t){var e,n,i=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(a=(a-this.Zb)/this.Qn,i/=this.Qn,Math.abs(i)<=2.623395162778){var l=u(this.utg,2*a,2*i);a+=l[0],i+=l[1],i=Math.atan((0,r.A)(i));var h=Math.sin(a),d=Math.cos(a),f=Math.sin(i),p=Math.cos(i);a=Math.atan2(h*p,(0,o.A)(f,p*d)),i=Math.atan2(f,p*d),e=(0,c.A)(i+this.long0,this.over),n=s(this.cgb,a)}else e=1/0,n=1/0;return t.x=e,t.y=n,t}var p=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"],m={init:h,forward:d,inverse:f,names:p}},4025:function(t,e,n){"use strict";function i(t,e){return Math.pow((1-t)/(1+t),e)}n.r(e),n.d(e,{default:function(){return c},forward:function(){return s},init:function(){return a},inverse:function(){return l},names:function(){return u}});var r=n(7e3),o=20;function a(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+r.Vj)/(Math.pow(Math.tan(.5*this.lat0+r.Vj),this.C)*i(this.e*t,this.ratexp))}function s(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+r.Vj),this.C)*i(this.e*Math.sin(n),this.ratexp))-r.sK,t.x=this.C*e,t}function l(t){for(var e=t.x/this.C,n=t.y,a=Math.pow(Math.tan(.5*n+r.Vj)/this.K,1/this.C),s=o;s>0&&(n=2*Math.atan(a*i(this.e*Math.sin(t.y),-.5*this.e))-r.sK,!(Math.abs(n-t.y)<1e-14));--s)t.y=n;return s?(t.x=e,t.y=n,t):null}var u=["gauss"],c={init:a,forward:s,inverse:l,names:u}},5904:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return o},init:function(){return r},inverse:function(){return a},names:function(){return s}});var i=n(3356);function r(){this.name="geocent"}function o(t){return(0,i.jX)(t,this.es,this.a)}function a(t){return(0,i.Rw)(t,this.es,this.a,this.b)}var s=["Geocentric","geocentric","geocent","Geocent"];e.default={init:r,forward:o,inverse:a,names:s}},1017:function(t,e,n){"use strict";n.r(e),n.d(e,{init:function(){return r},names:function(){return o}});var i=n(4424);function r(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}var o=["Geostationary Satellite View","Geostationary_Satellite","geos"];e.default={init:r,forward:function(t){var e,n,r,o,a=t.x,s=t.y;if(a-=this.long0,"ellipse"===this.shape){s=Math.atan(this.radius_p2*Math.tan(s));var l=this.radius_p/(0,i.A)(this.radius_p*Math.cos(s),Math.sin(s));if(n=l*Math.cos(a)*Math.cos(s),r=l*Math.sin(a)*Math.cos(s),o=l*Math.sin(s),(this.radius_g-n)*n-r*r-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/(0,i.A)(o,e)),t.y=this.radius_g_1*Math.atan(o/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(o/(0,i.A)(r,e)))}else"sphere"===this.shape&&(e=Math.cos(s),n=Math.cos(a)*e,r=Math.sin(a)*e,o=Math.sin(s),e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/(0,i.A)(o,e)),t.y=this.radius_g_1*Math.atan(o/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(o/(0,i.A)(r,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,n,r,o,a=-1,s=0,l=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(l=Math.tan(t.y/this.radius_g_1),s=Math.tan(t.x/this.radius_g_1)*(0,i.A)(1,l)):(s=Math.tan(t.x/this.radius_g_1),l=Math.tan(t.y/this.radius_g_1)*(0,i.A)(1,s));var u=l/this.radius_p;if(e=s*s+u*u+a*a,(r=(n=2*this.radius_g*a)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-n-Math.sqrt(r))/(2*e),a=this.radius_g+o*a,s*=o,l*=o,t.x=Math.atan2(s,a),t.y=Math.atan(l*Math.cos(t.x)/a),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(l=Math.tan(t.y/this.radius_g_1),s=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+l*l)):(s=Math.tan(t.x/this.radius_g_1),l=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+s*s)),e=s*s+l*l+a*a,(r=(n=2*this.radius_g*a)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-n-Math.sqrt(r))/(2*e),a=this.radius_g+o*a,s*=o,l*=o,t.x=Math.atan2(s,a),t.y=Math.atan(l*Math.cos(t.x)/a)}return t.x=t.x+this.long0,t},names:o}},5106:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return s},init:function(){return a},inverse:function(){return l},names:function(){return u}});var i=n(6269),r=n(8597),o=n(7e3);function a(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function s(t){var e,n,r,a,s,l,u,c=t.x,h=t.y;return r=(0,i.A)(c-this.long0,this.over),e=Math.sin(h),n=Math.cos(h),a=Math.cos(r),(s=this.sin_p14*e+this.cos_p14*n*a)>0||Math.abs(s)<=o.H0?(l=this.x0+1*this.a*n*Math.sin(r)/s,u=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*a)/s):(l=this.x0+this.infinity_dist*n*Math.sin(r),u=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*a)),t.x=l,t.y=u,t}function l(t){var e,n,o,a,s,l;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(a=Math.atan2(e,this.rc),n=Math.sin(a),o=Math.cos(a),l=(0,r.A)(o*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.atan2(t.x*n,e*this.cos_p14*o-t.y*this.sin_p14*n),s=(0,i.A)(this.long0+s,this.over)):(l=this.phic0,s=0),t.x=s,t.y=l,t}var u=["gnom"];e.default={init:a,forward:s,inverse:l,names:u}},6500:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return d},forward:function(){return u},init:function(){return l},inverse:function(){return c},names:function(){return h}});var i=n(7e3);function r(t,e,n){if(Math.abs(e)>i.sK)return Number.NaN;if(e===i.sK)return Number.POSITIVE_INFINITY;if(e===-1*i.sK)return Number.NEGATIVE_INFINITY;var r=t*n;return Math.log(Math.tan((i.sK+e)/2))+t*Math.log((1-r)/(1+r))/2}var o=n(7897),a=n(6449);function s(t,e){return 2*Math.atan(t*Math.exp(e))-i.sK}function l(){var t=this.b/this.a;this.e=Math.sqrt(1-t*t),this.lc=this.long0,this.rs=Math.sqrt(1+this.e*this.e*Math.pow(Math.cos(this.lat0),4)/(1-this.e*this.e));var e=Math.sin(this.lat0),n=Math.asin(e/this.rs),i=Math.sin(n);this.cp=r(0,n,i)-this.rs*r(this.e,this.lat0,e),this.n2=this.k0*this.a*Math.sqrt(1-this.e*this.e)/(1-this.e*this.e*e*e),this.xs=this.x0,this.ys=this.y0-this.n2*n,this.title||(this.title="Gauss Schreiber transverse mercator")}function u(t){var e=t.x,n=t.y,i=this.rs*(e-this.lc),s=this.cp+this.rs*r(this.e,n,Math.sin(n)),l=Math.asin(Math.sin(i)/(0,a.A)(s)),u=r(0,l,Math.sin(l));return t.x=this.xs+this.n2*u,t.y=this.ys+this.n2*Math.atan((0,o.A)(s)/Math.cos(i)),t}function c(t){var e=t.x,n=t.y,i=Math.atan((0,o.A)((e-this.xs)/this.n2)/Math.cos((n-this.ys)/this.n2)),l=Math.asin(Math.sin((n-this.ys)/this.n2)/(0,a.A)((e-this.xs)/this.n2)),u=r(0,l,Math.sin(l));return t.x=this.lc+i/this.rs,t.y=function(t,e){var n=s(1,e),i=0,r=0;do{i=n,r=t*Math.sin(i),n=s(Math.exp(t*Math.log((1+r)/(1-r))/2),e)}while(Math.abs(n-i)>1e-12);return n}(this.e,(u-this.cp)/this.rs),t}var h=["gstmerg","gstmerc"],d={init:l,forward:u,inverse:c,names:h}},6167:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return o},init:function(){return r},inverse:function(){return a},names:function(){return s}});var i=n(6269);function r(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function o(t){var e,n,r,o,a,s,l,u=t.x,c=t.y,h=(0,i.A)(u-this.long0,this.over);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),r=-h*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),a=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(o)),s=this.n*a,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),t.y=l*Math.cos(s)/1,t.x=l*Math.sin(s)/1,this.czech||(t.y*=-1,t.x*=-1),t}function a(t){var e,n,i,r,o,a,s,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x)/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),n=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e,s=0;var u=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,u+=1}while(0===s&&u<15);return u>=15?null:t}var s=["Krovak","krovak"];e.default={init:r,forward:o,inverse:a,names:s}},8506:function(t,e,n){"use strict";n.r(e),n.d(e,{EQUIT:function(){return l},N_POLE:function(){return s},OBLIQ:function(){return u},S_POLE:function(){return a},forward:function(){return h},init:function(){return c},inverse:function(){return d},names:function(){return x}});var i=n(7e3),r=n(5964),o=n(6269),a=1,s=2,l=3,u=4;function c(){var t,e=Math.abs(this.lat0);if(Math.abs(e-i.sK)<i.H0?this.mode=this.lat0<0?a:s:Math.abs(e)<i.H0?this.mode=l:this.mode=u,this.es>0)switch(this.qp=(0,r.A)(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=t*f,e=t*t,n[0]+=e*p,n[1]=e*g,e*=t,n[0]+=e*m,n[1]+=e*y,n[2]=e*v,n}(this.es),this.mode){case s:case a:this.dd=1;break;case l:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case u:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=(0,r.A)(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===u&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function h(t){var e,n,a,s,l,u,c,h,d,f,p=t.x,m=t.y;if(p=(0,o.A)(p-this.long0,this.over),this.sphere){if(l=Math.sin(m),f=Math.cos(m),a=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+f*a:1+this.sinph0*l+this.cosph0*f*a)<=i.H0)return null;e=(n=Math.sqrt(2/n))*f*Math.sin(p),n*=this.mode===this.EQUIT?l:this.cosph0*l-this.sinph0*f*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(m+this.lat0)<i.H0)return null;n=i.Vj-.5*m,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(p),n*=a}}else{switch(c=0,h=0,d=0,a=Math.cos(p),s=Math.sin(p),l=Math.sin(m),u=(0,r.A)(this.e,l),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(c=u/this.qp,h=Math.sqrt(1-c*c)),this.mode){case this.OBLIQ:d=1+this.sinb1*c+this.cosb1*h*a;break;case this.EQUIT:d=1+h*a;break;case this.N_POLE:d=i.sK+m,u=this.qp-u;break;case this.S_POLE:d=m-i.sK,u=this.qp+u}if(Math.abs(d)<i.H0)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:d=Math.sqrt(2/d),n=this.mode===this.OBLIQ?this.ymf*d*(this.cosb1*c-this.sinb1*h*a):(d=Math.sqrt(2/(1+h*a)))*c*this.ymf,e=this.xmf*d*h*s;break;case this.N_POLE:case this.S_POLE:u>=0?(e=(d=Math.sqrt(u))*s,n=a*(this.mode===this.S_POLE?d:-d)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function d(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,a,s,l,u,c,h,d,f=t.x/this.a,p=t.y/this.a;if(this.sphere){var m,g=0,y=0;if((n=.5*(m=Math.sqrt(f*f+p*p)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(y=Math.sin(n),g=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(m)<=i.H0?0:Math.asin(p*y/m),f*=y,p=g*m;break;case this.OBLIQ:n=Math.abs(m)<=i.H0?this.lat0:Math.asin(g*this.sinph0+p*y*this.cosph0/m),f*=y*this.cosph0,p=(g-Math.sin(n)*this.sinph0)*m;break;case this.N_POLE:p=-p,n=i.sK-n;break;case this.S_POLE:n-=i.sK}e=0!==p||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(f,p):0}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(f/=this.dd,p*=this.dd,(l=Math.sqrt(f*f+p*p))<i.H0)return t.x=this.long0,t.y=this.lat0,t;a=2*Math.asin(.5*l/this.rq),r=Math.cos(a),f*=a=Math.sin(a),this.mode===this.OBLIQ?(u=r*this.sinb1+p*a*this.cosb1/l,s=this.qp*u,p=l*this.cosb1*r-p*this.sinb1*a):(u=p*a/l,s=this.qp*u,p=l*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(p=-p),!(s=f*f+p*p))return t.x=this.long0,t.y=this.lat0,t;u=1-s/this.qp,this.mode===this.S_POLE&&(u=-u)}e=Math.atan2(f,p),c=Math.asin(u),h=this.apa,d=c+c,n=c+h[0]*Math.sin(d)+h[1]*Math.sin(d+d)+h[2]*Math.sin(d+d+d)}return t.x=(0,o.A)(this.long0+e,this.over),t.y=n,t}var f=.3333333333333333,p=.17222222222222222,m=.10257936507936508,g=.06388888888888888,y=.0664021164021164,v=.016415012942191543;var x=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];e.default={init:c,forward:h,inverse:d,names:x,S_POLE:a,N_POLE:s,EQUIT:l,OBLIQ:u}},993:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return c},init:function(){return u},inverse:function(){return h},names:function(){return d}});var i=n(7072),r=n(851),o=n(9393),a=n(6269),s=n(6157),l=n(7e3);function u(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<l.H0)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),o=(0,i.A)(this.e,e,n),a=(0,r.A)(this.e,this.lat1,e),s=Math.sin(this.lat2),u=Math.cos(this.lat2),c=(0,i.A)(this.e,s,u),h=(0,r.A)(this.e,this.lat2,s),d=Math.abs(Math.abs(this.lat0)-l.sK)<l.H0?0:(0,r.A)(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>l.H0?this.ns=Math.log(o/c)/Math.log(a/h):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=o/(this.ns*Math.pow(a,this.ns)),this.rh=this.a*this.f0*Math.pow(d,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function c(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=l.H0&&(n=(0,o.A)(n)*(l.sK-2*l.H0));var i,s,u=Math.abs(Math.abs(n)-l.sK);if(u>l.H0)i=(0,r.A)(this.e,n,Math.sin(n)),s=this.a*this.f0*Math.pow(i,this.ns);else{if((u=n*this.ns)<=0)return null;s=0}var c=this.ns*(0,a.A)(e-this.long0,this.over);return t.x=this.k0*(s*Math.sin(c))+this.x0,t.y=this.k0*(this.rh-s*Math.cos(c))+this.y0,t}function h(t){var e,n,i,r,o,u=(t.x-this.x0)/this.k0,c=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(u*u+c*c),n=1):(e=-Math.sqrt(u*u+c*c),n=-1);var h=0;if(0!==e&&(h=Math.atan2(n*u,n*c)),0!==e||this.ns>0){if(n=1/this.ns,i=Math.pow(e/(this.a*this.f0),n),-9999===(r=(0,s.A)(this.e,i)))return null}else r=-l.sK;return o=(0,a.A)(h/this.ns+this.long0,this.over),t.x=o,t.y=r,t}var d=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];e.default={init:u,forward:c,inverse:h,names:d}},2308:function(t,e,n){"use strict";function i(){}function r(t){return t}n.r(e),n.d(e,{forward:function(){return r},init:function(){return i},inverse:function(){return r},names:function(){return o}});var o=["longlat","identity"];e.default={init:i,forward:r,inverse:r,names:o}},9402:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return u},init:function(){return l},inverse:function(){return c},names:function(){return h}});var i=n(7072),r=n(6269),o=n(851),a=n(6157),s=n(7e3);function l(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=(0,i.A)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function u(t){var e,n,i=t.x,a=t.y;if(a*s.dX>90&&a*s.dX<-90&&i*s.dX>180&&i*s.dX<-180)return null;if(Math.abs(Math.abs(a)-s.sK)<=s.H0)return null;if(this.sphere)e=this.x0+this.a*this.k0*(0,r.A)(i-this.long0,this.over),n=this.y0+this.a*this.k0*Math.log(Math.tan(s.Vj+.5*a));else{var l=Math.sin(a),u=(0,o.A)(this.e,a,l);e=this.x0+this.a*this.k0*(0,r.A)(i-this.long0,this.over),n=this.y0-this.a*this.k0*Math.log(u)}return t.x=e,t.y=n,t}function c(t){var e,n,i=t.x-this.x0,o=t.y-this.y0;if(this.sphere)n=s.sK-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var l=Math.exp(-o/(this.a*this.k0));if(-9999===(n=(0,a.A)(this.e,l)))return null}return e=(0,r.A)(this.long0+i/(this.a*this.k0),this.over),t.x=e,t.y=n,t}var h=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];e.default={init:l,forward:u,inverse:c,names:h}},969:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return o},init:function(){return r},inverse:function(){return a},names:function(){return s}});var i=n(6269);function r(){}function o(t){var e=t.x,n=t.y,r=(0,i.A)(e-this.long0,this.over),o=this.x0+this.a*r,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=o,t.y=a,t}function a(t){t.x-=this.x0,t.y-=this.y0;var e=(0,i.A)(this.long0+t.x/this.a,this.over),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var s=["Miller_Cylindrical","mill"];e.default={init:r,forward:o,inverse:a,names:s}},6155:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return a},init:function(){return o},inverse:function(){return s},names:function(){return l}});var i=n(6269),r=n(7e3);function o(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0}function a(t){for(var e=t.x,n=t.y,o=(0,i.A)(e-this.long0,this.over),a=n,s=Math.PI*Math.sin(n);;){var l=-(a+Math.sin(a)-s)/(1+Math.cos(a));if(a+=l,Math.abs(l)<r.H0)break}a/=2,Math.PI/2-Math.abs(n)<r.H0&&(o=0);var u=.900316316158*this.a*o*Math.cos(a)+this.x0,c=1.4142135623731*this.a*Math.sin(a)+this.y0;return t.x=u,t.y=c,t}function s(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=(0,i.A)(this.long0+t.x/(.900316316158*this.a*Math.cos(e)),this.over);r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var o=Math.asin(n);return t.x=r,t.y=o,t}var l=["Mollweide","moll"];e.default={init:o,forward:a,inverse:s,names:l}},6731:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return a},init:function(){return o},inverse:function(){return s},iterations:function(){return r},names:function(){return l}});var i=n(7e3),r=1;function o(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function a(t){var e,n=t.x,r=t.y-this.lat0,o=n-this.long0,a=r/i._3*1e-5,s=o,l=1,u=0;for(e=1;e<=10;e++)l*=a,u+=this.A[e]*l;var c,h=u,d=s,f=1,p=0,m=0,g=0;for(e=1;e<=6;e++)c=p*h+f*d,f=f*h-p*d,p=c,m=m+this.B_re[e]*f-this.B_im[e]*p,g=g+this.B_im[e]*f+this.B_re[e]*p;return t.x=g*this.a+this.x0,t.y=m*this.a+this.y0,t}function s(t){var e,n,r=t.x,o=t.y,a=r-this.x0,s=(o-this.y0)/this.a,l=a/this.a,u=1,c=0,h=0,d=0;for(e=1;e<=6;e++)n=c*s+u*l,u=u*s-c*l,c=n,h=h+this.C_re[e]*u-this.C_im[e]*c,d=d+this.C_im[e]*u+this.C_re[e]*c;for(var f=0;f<this.iterations;f++){var p,m=h,g=d,y=s,v=l;for(e=2;e<=6;e++)p=g*h+m*d,m=m*h-g*d,g=p,y+=(e-1)*(this.B_re[e]*m-this.B_im[e]*g),v+=(e-1)*(this.B_im[e]*m+this.B_re[e]*g);m=1,g=0;var x=this.B_re[1],_=this.B_im[1];for(e=2;e<=6;e++)p=g*h+m*d,m=m*h-g*d,g=p,x+=e*(this.B_re[e]*m-this.B_im[e]*g),_+=e*(this.B_im[e]*m+this.B_re[e]*g);var b=x*x+_*_;h=(y*x+v*_)/b,d=(v*x-y*_)/b}var w=h,M=d,A=1,E=0;for(e=1;e<=9;e++)A*=w,E+=this.D[e]*A;var T=this.lat0+E*i._3*1e5,S=this.long0+M;return t.x=S,t.y=T,t}var l=["New_Zealand_Map_Grid","nzmg"];e.default={init:o,forward:a,inverse:s,names:l}},4076:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return f},init:function(){return d},inverse:function(){return p},names:function(){return m}});var i=n(6269),r=n(7e3),o=n(1845),a=n(2308);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(s.push(i.value),s.length!==e);l=!0);}catch(t){u=!0,r=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw r}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}var c={OBLIQUE:{forward:function(t,e){var n=e.x,o=e.y;n+=t.long0;var a=Math.cos(n),s=Math.sin(o),l=Math.cos(o);e.x=(0,i.A)(Math.atan2(l*Math.sin(n),t.sphip*l*a+t.cphip*s)+t.lamp),e.y=Math.asin(t.sphip*s-t.cphip*l*a);var u=t.obliqueProjection.forward(e);t.isIdentity&&(u.x*=r.dX,u.y*=r.dX);return u},inverse:function(t,e){t.isIdentity&&(e.x*=r.zq,e.y*=r.zq);var n=t.obliqueProjection.inverse(e),o=n.x,a=n.y;if(o<Number.MAX_VALUE){o-=t.lamp;var s=Math.cos(o),l=Math.sin(a),u=Math.cos(a);e.x=Math.atan2(u*Math.sin(o),t.sphip*u*s-t.cphip*l),e.y=Math.asin(t.sphip*l+t.cphip*u*s)}return e.x=(0,i.A)(e.x+t.long0),e}},TRANSVERSE:{forward:function(t,e){var n=e.x,o=e.y;n+=t.long0;var a=Math.cos(o),s=Math.cos(n);e.x=(0,i.A)(Math.atan2(a*Math.sin(n),Math.sin(o))+t.lamp),e.y=Math.asin(-1*a*s);var l=t.obliqueProjection.forward(e);t.isIdentity&&(l.x*=r.dX,l.y*=r.dX);return l},inverse:function(t,e){t.isIdentity&&(e.x*=r.zq,e.y*=r.zq);var n=t.obliqueProjection.inverse(e),o=n.x,a=n.y;if(o<Number.MAX_VALUE){var s=Math.cos(a);o-=t.lamp,e.x=Math.atan2(s*Math.sin(o),-1*Math.sin(a)),e.y=Math.asin(s*Math.cos(o))}return e.x=(0,i.A)(e.x+t.long0),e}}},h={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function d(){var t=this;if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=a.names.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if("ob_tran"===this.o_proj)throw new Error("Invalid value for o_proj: "+this.o_proj);var e,n=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),i=(0,o.A)(n);if(!i)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);i.long0=0,this.obliqueProjection=i;for(var l=Object.keys(h),d=function(e){if("undefined"!==u(t[e])){var n=parseFloat(t[e])*r.zq;if(isNaN(n))throw new Error("Invalid value for "+e+": "+t[e]);return n}},f=0;f<l.length;f++){var p=l[f],m=h[p],g=Object.entries(m);if(g.some(function(e){var n=s(e,1)[0];return void 0!==t[n]})){e=m;for(var y=0;y<g.length;y++){var v=s(g[y],2),x=v[0],_=v[1],b=d(x);if(void 0===b)throw new Error("Missing parameter: "+x+".");this[_]=b}break}}if(!e)throw new Error("No valid parameters provided for ob_tran projection.");var w=function(t,e){var n,i;if(e===h.ROTATE){var o=t.oLongC,a=t.oLatC,s=t.oAlpha;if(Math.abs(Math.abs(a)-r.sK)<=r.H0)throw new Error("Invalid value for o_lat_c: "+t.o_lat_c+" should be < 90");i=o+Math.atan2(-1*Math.cos(s),-1*Math.sin(s)*Math.sin(a)),n=Math.asin(Math.cos(a)*Math.sin(s))}else if(e===h.NEW_POLE)i=t.oLongP,n=t.oLatP;else{var l=t.oLong1,u=t.oLat1,c=t.oLong2,d=t.oLat2,f=Math.abs(u);if(Math.abs(u)>r.sK-r.H0)throw new Error("Invalid value for o_lat_1: "+t.o_lat_1+" should be < 90");if(Math.abs(d)>r.sK-r.H0)throw new Error("Invalid value for o_lat_2: "+t.o_lat_2+" should be < 90");if(Math.abs(u-d)<r.H0)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(f<r.H0)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");i=Math.atan2(Math.cos(u)*Math.sin(d)*Math.cos(l)-Math.sin(u)*Math.cos(d)*Math.cos(c),Math.sin(u)*Math.cos(d)*Math.sin(c)-Math.cos(u)*Math.sin(d)*Math.sin(l)),n=Math.atan(-1*Math.cos(i-l)/Math.tan(u))}return{lamp:i,phip:n}}(this,e),M=w.lamp,A=w.phip;this.lamp=M,Math.abs(A)>r.H0?(this.cphip=Math.cos(A),this.sphip=Math.sin(A),this.projectionType=c.OBLIQUE):this.projectionType=c.TRANSVERSE}function f(t){return this.projectionType.forward(this,t)}function p(t){return this.projectionType.inverse(this,t)}var m=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];e.default={init:d,forward:f,inverse:p,names:m}},431:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return h},init:function(){return c},inverse:function(){return d},names:function(){return f}});var i=n(851),r=n(6269),o=n(6157),a=n(7e3),s=n(7272);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}var u=1e-7;function c(){var t,e,n,o,c,h,d,f,p,m,g,y,v,x,_=0,b=0,w=0,M=0,A=0,E=0,T=0;this.no_off=(v=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],x="object"===l((y=this).projName)?Object.keys(y.projName)[0]:y.projName,"no_uoff"in y||"no_off"in y||-1!==v.indexOf(x)||-1!==v.indexOf((0,s.Cx)(x))),this.no_rot="no_rot"in this;var S=!1;"alpha"in this&&(S=!0);var C=!1;if("rectified_grid_angle"in this&&(C=!0),S&&(T=this.alpha),C&&(_=this.rectified_grid_angle),S||C)b=this.longc;else if(w=this.long1,A=this.lat1,M=this.long2,E=this.lat2,Math.abs(A-E)<=u||(t=Math.abs(A))<=u||Math.abs(t-a.sK)<=u||Math.abs(Math.abs(this.lat0)-a.sK)<=u||Math.abs(Math.abs(E)-a.sK)<=u)throw new Error;var k=1-this.es;e=Math.sqrt(k),Math.abs(this.lat0)>a.H0?(f=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*f*f,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/k),this.A=this.B*this.k0*e/t,(c=(o=this.B*e/(n*Math.sqrt(t)))*o-1)<=0?c=0:(c=Math.sqrt(c),this.lat0<0&&(c=-c)),this.E=c+=o,this.E*=Math.pow((0,i.A)(this.e,this.lat0,f),this.B)):(this.B=1/e,this.A=this.k0,this.E=o=c=1),S||C?(S?(g=Math.asin(Math.sin(T)/o),C||(_=T)):(g=_,T=Math.asin(o*Math.sin(g))),this.lam0=b-Math.asin(.5*(c-1/c)*Math.tan(g))/this.B):(h=Math.pow((0,i.A)(this.e,A,Math.sin(A)),this.B),d=Math.pow((0,i.A)(this.e,E,Math.sin(E)),this.B),c=this.E/h,p=(d-h)/(d+h),m=((m=this.E*this.E)-d*h)/(m+d*h),(t=w-M)<-Math.PI?M-=a.JM:t>Math.PI&&(M+=a.JM),this.lam0=(0,r.A)(.5*(w+M)-Math.atan(m*Math.tan(.5*this.B*(w-M))/p)/this.B,this.over),g=Math.atan(2*Math.sin(this.B*(0,r.A)(w-this.lam0,this.over))/(c-1/c)),_=T=Math.asin(o*Math.sin(g))),this.singam=Math.sin(g),this.cosgam=Math.cos(g),this.sinrot=Math.sin(_),this.cosrot=Math.cos(_),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(o*o-1)/Math.cos(T))),this.lat0<0&&(this.u_0=-this.u_0)),c=.5*g,this.v_pole_n=this.ArB*Math.log(Math.tan(a.Vj-c)),this.v_pole_s=this.ArB*Math.log(Math.tan(a.Vj+c))}function h(t){var e,n,r,o,s,l,c,h,d={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-a.sK)>a.H0){if(e=.5*((s=this.E/Math.pow((0,i.A)(this.e,t.y,Math.sin(t.y)),this.B))-(l=1/s)),n=.5*(s+l),o=Math.sin(this.B*t.x),r=(e*this.singam-o*this.cosgam)/n,Math.abs(Math.abs(r)-1)<a.H0)throw new Error;h=.5*this.ArB*Math.log((1-r)/(1+r)),l=Math.cos(this.B*t.x),c=Math.abs(l)<u?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+o*this.singam,l)}else h=t.y>0?this.v_pole_n:this.v_pole_s,c=this.ArB*t.y;return this.no_rot?(d.x=c,d.y=h):(c-=this.u_0,d.x=h*this.cosrot+c*this.sinrot,d.y=c*this.cosrot-h*this.sinrot),d.x=this.a*d.x+this.x0,d.y=this.a*d.y+this.y0,d}function d(t){var e,n,i,r,s,l,u,c={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=.5*((i=Math.exp(-this.BrA*n))-1/i),s=.5*(i+1/i),u=((l=Math.sin(this.BrA*e))*this.cosgam+r*this.singam)/s,Math.abs(Math.abs(u)-1)<a.H0)c.x=0,c.y=u<0?-a.sK:a.sK;else{if(c.y=this.E/Math.sqrt((1+u)/(1-u)),c.y=(0,o.A)(this.e,Math.pow(c.y,1/this.B)),c.y===1/0)throw new Error;c.x=-this.rB*Math.atan2(r*this.cosgam-l*this.singam,Math.cos(this.BrA*e))}return c.x+=this.lam0,c}var f=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];e.default={init:c,forward:h,inverse:d,names:f}},6145:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return s},init:function(){return a},inverse:function(){return l},names:function(){return u}});var i=n(6269),r=n(8597),o=n(7e3);function a(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function s(t){var e,n,r,a,s,l,u,c=t.x,h=t.y;return r=(0,i.A)(c-this.long0,this.over),e=Math.sin(h),n=Math.cos(h),a=Math.cos(r),((s=this.sin_p14*e+this.cos_p14*n*a)>0||Math.abs(s)<=o.H0)&&(l=1*this.a*n*Math.sin(r),u=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*a)),t.x=l,t.y=u,t}function l(t){var e,n,a,s,l,u,c;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=(0,r.A)(e/this.a),a=Math.sin(n),s=Math.cos(n),u=this.long0,Math.abs(e)<=o.H0?(c=this.lat0,t.x=u,t.y=c,t):(c=(0,r.A)(s*this.sin_p14+t.y*a*this.cos_p14/e),l=Math.abs(this.lat0)-o.sK,Math.abs(l)<=o.H0?(u=this.lat0>=0?(0,i.A)(this.long0+Math.atan2(t.x,-t.y),this.over):(0,i.A)(this.long0-Math.atan2(-t.x,t.y),this.over),t.x=u,t.y=c,t):(u=(0,i.A)(this.long0+Math.atan2(t.x*a,e*this.cos_p14*s-t.y*this.sin_p14*a),this.over),t.x=u,t.y=c,t))}var u=["ortho"];e.default={init:a,forward:s,inverse:l,names:u}},741:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return p},init:function(){return f},inverse:function(){return m},names:function(){return g}});var i=n(1341),r=n(7954),o=n(3611),a=n(4280),s=n(6269),l=n(6165),u=n(1417),c=n(7e3),h=n(2889),d=20;function f(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=(0,i.A)(this.es),this.e1=(0,r.A)(this.es),this.e2=(0,o.A)(this.es),this.e3=(0,a.A)(this.es),this.ml0=this.a*(0,u.A)(this.e0,this.e1,this.e2,this.e3,this.lat0)}function p(t){var e,n,i,r=t.x,o=t.y,a=(0,s.A)(r-this.long0,this.over);if(i=a*Math.sin(o),this.sphere)Math.abs(o)<=c.H0?(e=this.a*a,n=-1*this.a*this.lat0):(e=this.a*Math.sin(i)/Math.tan(o),n=this.a*((0,l.A)(o-this.lat0)+(1-Math.cos(i))/Math.tan(o)));else if(Math.abs(o)<=c.H0)e=this.a*a,n=-1*this.ml0;else{var d=(0,h.A)(this.a,this.e,Math.sin(o))/Math.tan(o);e=d*Math.sin(i),n=this.a*(0,u.A)(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+d*(1-Math.cos(i))}return t.x=e+this.x0,t.y=n+this.y0,t}function m(t){var e,n,i,r,o,a,l,h,f;if(i=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=c.H0)e=(0,s.A)(i/this.a+this.long0,this.over),n=0;else{var p;for(a=this.lat0+r/this.a,l=i*i/this.a/this.a+a*a,h=a,o=d;o;--o)if(h+=f=-1*(a*(h*(p=Math.tan(h))+1)-h-.5*(h*h+l)*p)/((h-a)/p-1),Math.abs(f)<=c.H0){n=h;break}e=(0,s.A)(this.long0+Math.asin(i*Math.tan(h)/this.a)/Math.sin(n),this.over)}else if(Math.abs(r+this.ml0)<=c.H0)n=0,e=(0,s.A)(this.long0+i/this.a,this.over);else{var m,g,y,v,x;for(a=(this.ml0+r)/this.a,l=i*i/this.a/this.a+a*a,h=a,o=d;o;--o)if(x=this.e*Math.sin(h),m=Math.sqrt(1-x*x)*Math.tan(h),g=this.a*(0,u.A)(this.e0,this.e1,this.e2,this.e3,h),y=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),h-=f=(a*(m*(v=g/this.a)+1)-v-.5*m*(v*v+l))/(this.es*Math.sin(2*h)*(v*v+l-2*a*v)/(4*m)+(a-v)*(m*y-2/Math.sin(2*h))-y),Math.abs(f)<=c.H0){n=h;break}m=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=(0,s.A)(this.long0+Math.asin(i*m/this.a)/Math.sin(n),this.over)}return t.x=e,t.y=n,t}var g=["Polyconic","American_Polyconic","poly"];e.default={init:f,forward:p,inverse:m,names:g}},2513:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return s},init:function(){return a},inverse:function(){return l},names:function(){return h}});var i=n(7e3),r={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},o={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function a(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=i.sK-i.Vj/2?this.face=r.TOP:this.lat0<=-(i.sK-i.Vj/2)?this.face=r.BOTTOM:Math.abs(this.long0)<=i.Vj?this.face=r.FRONT:Math.abs(this.long0)<=i.sK+i.Vj?this.face=this.long0>0?r.RIGHT:r.LEFT:this.face=r.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function s(t){var e,n,a,s,l,h,d={x:0,y:0},f={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===r.TOP)s=i.sK-e,n>=i.Vj&&n<=i.sK+i.Vj?(f.value=o.AREA_0,a=n-i.sK):n>i.sK+i.Vj||n<=-(i.sK+i.Vj)?(f.value=o.AREA_1,a=n>0?n-i.DF:n+i.DF):n>-(i.sK+i.Vj)&&n<=-i.Vj?(f.value=o.AREA_2,a=n+i.sK):(f.value=o.AREA_3,a=n);else if(this.face===r.BOTTOM)s=i.sK+e,n>=i.Vj&&n<=i.sK+i.Vj?(f.value=o.AREA_0,a=-n+i.sK):n<i.Vj&&n>=-i.Vj?(f.value=o.AREA_1,a=-n):n<-i.Vj&&n>=-(i.sK+i.Vj)?(f.value=o.AREA_2,a=-n-i.sK):(f.value=o.AREA_3,a=n>0?-n+i.DF:-n-i.DF);else{var p,m,g,y,v,x;this.face===r.RIGHT?n=c(n,+i.sK):this.face===r.BACK?n=c(n,+i.DF):this.face===r.LEFT&&(n=c(n,-i.sK)),y=Math.sin(e),v=Math.cos(e),x=Math.sin(n),p=v*Math.cos(n),m=v*x,g=y,this.face===r.FRONT?a=u(s=Math.acos(p),g,m,f):this.face===r.RIGHT?a=u(s=Math.acos(m),g,-p,f):this.face===r.BACK?a=u(s=Math.acos(-p),g,-m,f):this.face===r.LEFT?a=u(s=Math.acos(-m),g,p,f):(s=a=0,f.value=o.AREA_0)}return h=Math.atan(12/i.DF*(a+Math.acos(Math.sin(a)*Math.cos(i.Vj))-i.sK)),l=Math.sqrt((1-Math.cos(s))/(Math.cos(h)*Math.cos(h))/(1-Math.cos(Math.atan(1/Math.cos(a))))),f.value===o.AREA_1?h+=i.sK:f.value===o.AREA_2?h+=i.DF:f.value===o.AREA_3&&(h+=1.5*i.DF),d.x=l*Math.cos(h),d.y=l*Math.sin(h),d.x=d.x*this.a+this.x0,d.y=d.y*this.a+this.y0,t.x=d.x,t.y=d.y,t}function l(t){var e,n,a,s,l,u,h,d,f,p,m,g,y={lam:0,phi:0},v={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?v.value=o.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(v.value=o.AREA_1,e-=i.sK):t.x<0&&-t.x>=Math.abs(t.y)?(v.value=o.AREA_2,e=e<0?e+i.DF:e-i.DF):(v.value=o.AREA_3,e+=i.sK),f=i.DF/12*Math.tan(e),l=Math.sin(f)/(Math.cos(f)-1/Math.sqrt(2)),u=Math.atan(l),(h=1-(a=Math.cos(e))*a*(s=Math.tan(n))*s*(1-Math.cos(Math.atan(1/Math.cos(u)))))<-1?h=-1:h>1&&(h=1),this.face===r.TOP)d=Math.acos(h),y.phi=i.sK-d,v.value===o.AREA_0?y.lam=u+i.sK:v.value===o.AREA_1?y.lam=u<0?u+i.DF:u-i.DF:v.value===o.AREA_2?y.lam=u-i.sK:y.lam=u;else if(this.face===r.BOTTOM)d=Math.acos(h),y.phi=d-i.sK,v.value===o.AREA_0?y.lam=-u+i.sK:v.value===o.AREA_1?y.lam=-u:v.value===o.AREA_2?y.lam=-u-i.sK:y.lam=u<0?-u-i.DF:-u+i.DF;else{var x,_,b;f=(x=h)*x,_=(f+=(b=f>=1?0:Math.sqrt(1-f)*Math.sin(u))*b)>=1?0:Math.sqrt(1-f),v.value===o.AREA_1?(f=_,_=-b,b=f):v.value===o.AREA_2?(_=-_,b=-b):v.value===o.AREA_3&&(f=_,_=b,b=-f),this.face===r.RIGHT?(f=x,x=-_,_=f):this.face===r.BACK?(x=-x,_=-_):this.face===r.LEFT&&(f=x,x=_,_=-f),y.phi=Math.acos(-b)-i.sK,y.lam=Math.atan2(_,x),this.face===r.RIGHT?y.lam=c(y.lam,-i.sK):this.face===r.BACK?y.lam=c(y.lam,-i.DF):this.face===r.LEFT&&(y.lam=c(y.lam,+i.sK))}0!==this.es&&(p=y.phi<0?1:0,m=Math.tan(y.phi),g=this.b/Math.sqrt(m*m+this.one_minus_f_squared),y.phi=Math.atan(Math.sqrt(this.a*this.a-g*g)/(this.one_minus_f*g)),p&&(y.phi=-y.phi));return y.lam+=this.long0,t.x=y.lam,t.y=y.phi,t}function u(t,e,n,r){var a;return t<i.H0?(r.value=o.AREA_0,a=0):(a=Math.atan2(e,n),Math.abs(a)<=i.Vj?r.value=o.AREA_0:a>i.Vj&&a<=i.sK+i.Vj?(r.value=o.AREA_1,a-=i.sK):a>i.sK+i.Vj||a<=-(i.sK+i.Vj)?(r.value=o.AREA_2,a=a>=0?a-i.DF:a+i.DF):(r.value=o.AREA_3,a+=i.sK)),a}function c(t,e){var n=t+e;return n<-i.DF?n+=i.JM:n>+i.DF&&(n-=i.JM),n}var h=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];e.default={init:a,forward:s,inverse:l,names:h}},8067:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return m},init:function(){return p},inverse:function(){return g},names:function(){return y}});var i=n(7e3),r=n(6269),o=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],a=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],s=.8487,l=1.3523,u=i.dX/5,c=1/u,h=18,d=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},f=function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])};function p(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function m(t){var e=(0,r.A)(t.x-this.long0,this.over),n=Math.abs(t.y),f=Math.floor(n*u);f<0?f=0:f>=h&&(f=h-1),n=i.dX*(n-c*f);var p={x:d(o[f],n)*e,y:d(a[f],n)};return t.y<0&&(p.y=-p.y),p.x=p.x*this.a*s+this.x0,p.y=p.y*this.a*l+this.y0,p}function g(t){var e={x:(t.x-this.x0)/(this.a*s),y:Math.abs(t.y-this.y0)/(this.a*l)};if(e.y>=1)e.x/=o[h][0],e.y=t.y<0?-i.sK:i.sK;else{var n=Math.floor(e.y*h);for(n<0?n=0:n>=h&&(n=h-1);;)if(a[n][0]>e.y)--n;else{if(!(a[n+1][0]<=e.y))break;++n}var u=a[n],c=5*(e.y-u[0])/(a[n+1][0]-u[0]);c=function(t,e,n,i){for(var r=e;i;--i){var o=t(r);if(r-=o,Math.abs(o)<n)break}return r}(function(t){return(d(u,t)-e.y)/f(u,t)},c,i.H0,100),e.x/=d(o[n],c),e.y=(5*n+c)*i.zq,t.y<0&&(e.y=-e.y)}return e.x=(0,r.A)(e.x+this.long0,this.over),e}var y=["Robinson","robin"];e.default={init:p,forward:m,inverse:g,names:y}},1034:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return d},init:function(){return h},inverse:function(){return f},names:function(){return p}});var i=n(6269),r=n(6165),o=n(6194),a=n(3712),s=n(112),l=n(7e3),u=n(8597),c=20;function h(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=(0,o.A)(this.es)}function d(t){var e,n,r=t.x,o=t.y;if(r=(0,i.A)(r-this.long0,this.over),this.sphere){if(this.m)for(var s=this.n*Math.sin(o),u=c;u;--u){var h=(this.m*o+Math.sin(o)-s)/(this.m+Math.cos(o));if(o-=h,Math.abs(h)<l.H0)break}else o=1!==this.n?Math.asin(this.n*Math.sin(o)):o;e=this.a*this.C_x*r*(this.m+Math.cos(o)),n=this.a*this.C_y*o}else{var d=Math.sin(o),f=Math.cos(o);n=this.a*(0,a.A)(o,d,f,this.en),e=this.a*r*f/Math.sqrt(1-this.es*d*d)}return t.x=e,t.y=n,t}function f(t){var e,n,o,a;return t.x-=this.x0,o=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,o/=this.C_x*(this.m+Math.cos(e)),this.m?e=(0,u.A)((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=(0,u.A)(Math.sin(e)/this.n)),o=(0,i.A)(o+this.long0,this.over),e=(0,r.A)(e)):(e=(0,s.A)(t.y/this.a,this.es,this.en),(a=Math.abs(e))<l.sK?(a=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*a*a)/(this.a*Math.cos(e)),o=(0,i.A)(n,this.over)):a-l.H0<l.sK&&(o=this.long0)),t.x=o,t.y=e,t}var p=["Sinusoidal","sinu"];e.default={init:h,forward:d,inverse:f,names:p}},9872:function(t,e,n){"use strict";function i(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,i=1/this.rf,r=2*i-Math.pow(i,2),o=this.e=Math.sqrt(r);this.R=this.k0*n*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*l}function r(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+n)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t}function o(t){for(var e=t.x-this.x0,n=t.y-this.y0,i=e/this.R,r=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),a=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),s=this.lambda0+a/this.alpha,l=0,u=o,c=-1e3,h=0;Math.abs(u-c)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=s,t.y=u,t}n.r(e),n.d(e,{forward:function(){return r},init:function(){return i},inverse:function(){return o},names:function(){return a}});var a=["somerc"];e.default={init:i,forward:r,inverse:o,names:a}},3084:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return h},init:function(){return c},inverse:function(){return d},names:function(){return f},ssfn_:function(){return u}});var i=n(7e3),r=n(9393),o=n(7072),a=n(851),s=n(6157),l=n(6269);function u(t,e,n){return e*=n,Math.tan(.5*(i.sK+t))*Math.pow((1-e)/(1+e),.5*n)}function c(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=i.H0&&(this.k0=.5*(1+(0,r.A)(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=i.H0&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=i.H0&&Math.abs(Math.cos(this.lat_ts))>i.H0&&(this.k0=.5*this.cons*(0,o.A)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/(0,a.A)(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=(0,o.A)(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(u(this.lat0,this.sinlat0,this.e))-i.sK,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function h(t){var e,n,r,o,s,c,h=t.x,d=t.y,f=Math.sin(d),p=Math.cos(d),m=(0,l.A)(h-this.long0,this.over);return Math.abs(Math.abs(h-this.long0)-Math.PI)<=i.H0&&Math.abs(d+this.lat0)<=i.H0?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*f+this.coslat0*p*Math.cos(m)),t.x=this.a*e*p*Math.sin(m)+this.x0,t.y=this.a*e*(this.coslat0*f-this.sinlat0*p*Math.cos(m))+this.y0,t):(n=2*Math.atan(u(d,f,this.e))-i.sK,o=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=i.H0?(s=(0,a.A)(this.e,d*this.con,this.con*f),c=2*this.a*this.k0*s/this.cons,t.x=this.x0+c*Math.sin(h-this.long0),t.y=this.y0-this.con*c*Math.cos(h-this.long0),t):(Math.abs(this.sinlat0)<i.H0?(e=2*this.a*this.k0/(1+o*Math.cos(m)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*o*Math.cos(m))),t.y=e*(this.cosX0*r-this.sinX0*o*Math.cos(m))+this.y0),t.x=e*o*Math.sin(m)+this.x0,t))}function d(t){var e,n,r,o,a;t.x-=this.x0,t.y-=this.y0;var u=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var c=2*Math.atan(u/(2*this.a*this.k0));return e=this.long0,n=this.lat0,u<=i.H0?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(c)*this.sinlat0+t.y*Math.sin(c)*this.coslat0/u),e=Math.abs(this.coslat0)<i.H0?this.lat0>0?(0,l.A)(this.long0+Math.atan2(t.x,-1*t.y),this.over):(0,l.A)(this.long0+Math.atan2(t.x,t.y),this.over):(0,l.A)(this.long0+Math.atan2(t.x*Math.sin(c),u*this.coslat0*Math.cos(c)-t.y*this.sinlat0*Math.sin(c)),this.over),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=i.H0){if(u<=i.H0)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=u*this.cons/(2*this.a*this.k0),n=this.con*(0,s.A)(this.e,r),e=this.con*(0,l.A)(this.con*this.long0+Math.atan2(t.x,-1*t.y),this.over)}else o=2*Math.atan(u*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,u<=i.H0?a=this.X0:(a=Math.asin(Math.cos(o)*this.sinX0+t.y*Math.sin(o)*this.cosX0/u),e=(0,l.A)(this.long0+Math.atan2(t.x*Math.sin(o),u*this.cosX0*Math.cos(o)-t.y*this.sinX0*Math.sin(o)),this.over)),n=-1*(0,s.A)(this.e,Math.tan(.5*(i.sK+a)));return t.x=e,t.y=n,t}var f=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];e.default={init:c,forward:h,inverse:d,names:f,ssfn_:u}},6789:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return s},init:function(){return a},inverse:function(){return l},names:function(){return u}});var i=n(4025),r=n(6269),o=n(4424);function a(){i.default.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function s(t){var e,n,o,a;return t.x=(0,r.A)(t.x-this.long0,this.over),i.default.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),o=Math.cos(t.x),a=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*o),t.x=a*n*Math.sin(t.x),t.y=a*(this.cosc0*e-this.sinc0*n*o),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function l(t){var e,n,a,s,l;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,l=(0,o.A)(t.x,t.y)){var u=2*Math.atan2(l,this.R2);e=Math.sin(u),n=Math.cos(u),s=Math.asin(n*this.sinc0+t.y*e*this.cosc0/l),a=Math.atan2(t.x*e,l*this.cosc0*n-t.y*this.sinc0*e)}else s=this.phic0,a=0;return t.x=a,t.y=s,i.default.inverse.apply(this,[t]),t.x=(0,r.A)(t.x+this.long0,this.over),t}var u=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];e.default={init:a,forward:s,inverse:l,names:u}},5518:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return c},init:function(){return u},inverse:function(){return h},names:function(){return d}});var i=n(6194),r=n(3712),o=n(112),a=n(6269),s=n(7e3),l=n(9393);function u(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=(0,i.A)(this.es),this.ml0=(0,r.A)(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function c(t){var e,n,i,o=t.x,l=t.y,u=(0,a.A)(o-this.long0,this.over),c=Math.sin(l),h=Math.cos(l);if(this.es){var d=h*u,f=Math.pow(d,2),p=this.ep2*Math.pow(h,2),m=Math.pow(p,2),g=Math.abs(h)>s.H0?Math.tan(l):0,y=Math.pow(g,2),v=Math.pow(y,2);e=1-this.es*Math.pow(c,2),d/=Math.sqrt(e);var x=(0,r.A)(l,c,h,this.en);n=this.a*(this.k0*d*(1+f/6*(1-y+p+f/20*(5-18*y+v+14*p-58*y*p+f/42*(61+179*v-v*y-479*y)))))+this.x0,i=this.a*(this.k0*(x-this.ml0+c*u*d/2*(1+f/12*(5-y+9*p+4*m+f/30*(61+v-58*y+270*p-330*y*p+f/56*(1385+543*v-v*y-3111*y))))))+this.y0}else{var _=h*Math.sin(u);if(Math.abs(Math.abs(_)-1)<s.H0)return 93;if(n=.5*this.a*this.k0*Math.log((1+_)/(1-_))+this.x0,i=h*Math.cos(u)/Math.sqrt(1-Math.pow(_,2)),(_=Math.abs(i))>=1){if(_-1>s.H0)return 93;i=0}else i=Math.acos(i);l<0&&(i=-i),i=this.a*this.k0*(i-this.lat0)+this.y0}return t.x=n,t.y=i,t}function h(t){var e,n,i,r,u=(t.x-this.x0)*(1/this.a),c=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+c/this.k0,n=(0,o.A)(e,this.es,this.en),Math.abs(n)<s.sK){var h=Math.sin(n),d=Math.cos(n),f=Math.abs(d)>s.H0?Math.tan(n):0,p=this.ep2*Math.pow(d,2),m=Math.pow(p,2),g=Math.pow(f,2),y=Math.pow(g,2);e=1-this.es*Math.pow(h,2);var v=u*Math.sqrt(e)/this.k0,x=Math.pow(v,2);i=n-(e*=f)*x/(1-this.es)*.5*(1-x/12*(5+3*g-9*p*g+p-4*m-x/30*(61+90*g-252*p*g+45*y+46*p-x/56*(1385+3633*g+4095*y+1574*y*g)))),r=(0,a.A)(this.long0+v*(1-x/6*(1+2*g+p-x/20*(5+28*g+24*y+8*p*g+6*p-x/42*(61+662*g+1320*y+720*y*g))))/d,this.over)}else i=s.sK*(0,l.A)(c),r=0;else{var _=Math.exp(u/this.k0),b=.5*(_-1/_),w=this.lat0+c/this.k0,M=Math.cos(w);e=Math.sqrt((1-Math.pow(M,2))/(1+Math.pow(b,2))),i=Math.asin(e),c<0&&(i=-i),r=0===b&&0===M?0:(0,a.A)(Math.atan2(b,M)+this.long0,this.over)}return t.x=r,t.y=i,t}var d=["Fast_Transverse_Mercator","Fast Transverse Mercator"];e.default={init:u,forward:c,inverse:h,names:d}},251:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return l},init:function(){return s},inverse:function(){return u},names:function(){return c}});var i=n(7e3),r=n(4424),o={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},a={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function s(){if(Object.keys(a).forEach(function(t){if(void 0===this[t])this[t]=a[t].def;else{if(a[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);a[t].num&&(this[t]=parseFloat(this[t]))}a[t].degrees&&(this[t]=this[t]*i.zq)}.bind(this)),Math.abs(Math.abs(this.lat0)-i.sK)<i.H0?this.mode=this.lat0<0?o.S_POLE:o.N_POLE:Math.abs(this.lat0)<i.H0?this.mode=o.EQUIT:(this.mode=o.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function l(t){t.x-=this.long0;var e,n,i,r,a=Math.sin(t.y),s=Math.cos(t.y),l=Math.cos(t.x);switch(this.mode){case o.OBLIQ:n=this.sinph0*a+this.cosph0*s*l;break;case o.EQUIT:n=s*l;break;case o.S_POLE:n=-a;break;case o.N_POLE:n=a}switch(e=(n=this.pn1/(this.p-n))*s*Math.sin(t.x),this.mode){case o.OBLIQ:n*=this.cosph0*a-this.sinph0*s*l;break;case o.EQUIT:n*=a;break;case o.N_POLE:n*=-s*l;break;case o.S_POLE:n*=s*l}return r=1/((i=n*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-n*this.sg)*this.cw*r,n=i*r,t.x=e*this.a,t.y=n*this.a,t}function u(t){t.x/=this.a,t.y/=this.a;var e,n,a,s={x:t.x,y:t.y};a=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*a,n=this.pn1*t.y*this.cw*a,t.x=e*this.cg+n*this.sg,t.y=n*this.cg-e*this.sg;var l=(0,r.A)(t.x,t.y);if(Math.abs(l)<i.H0)s.x=0,s.y=t.y;else{var u,c;switch(c=1-l*l*this.pfact,c=(this.p-Math.sqrt(c))/(this.pn1/l+l/this.pn1),u=Math.sqrt(1-c*c),this.mode){case o.OBLIQ:s.y=Math.asin(u*this.sinph0+t.y*c*this.cosph0/l),t.y=(u-this.sinph0*Math.sin(s.y))*l,t.x*=c*this.cosph0;break;case o.EQUIT:s.y=Math.asin(t.y*c/l),t.y=u*l,t.x*=c;break;case o.N_POLE:s.y=Math.asin(u),t.y=-t.y;break;case o.S_POLE:s.y=-Math.asin(u)}s.x=Math.atan2(t.x,t.y)}return t.x=s.x+this.long0,t.y=s.y,t}var c=["Tilted_Perspective","tpers"];e.default={init:s,forward:l,inverse:u,names:c}},2924:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return u},dependsOn:function(){return a},init:function(){return s},names:function(){return l}});var i=n(6269);var r=n(3426),o=n(7e3),a="etmerc";function s(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*((0,i.A)(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*o.zq,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,r.default.init.apply(this),this.forward=r.default.forward,this.inverse=r.default.inverse}var l=["Universal Transverse Mercator System","utm"],u={init:s,names:l,dependsOn:a}},6671:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return s},init:function(){return a},inverse:function(){return l},names:function(){return u}});var i=n(6269),r=n(7e3),o=n(8597);function a(){this.R=this.a}function s(t){var e,n,a=t.x,s=t.y,l=(0,i.A)(a-this.long0,this.over);Math.abs(s)<=r.H0&&(e=this.x0+this.R*l,n=this.y0);var u=(0,o.A)(2*Math.abs(s/Math.PI));(Math.abs(l)<=r.H0||Math.abs(Math.abs(s)-r.sK)<=r.H0)&&(e=this.x0,n=s>=0?this.y0+Math.PI*this.R*Math.tan(.5*u):this.y0+Math.PI*this.R*-Math.tan(.5*u));var c=.5*Math.abs(Math.PI/l-l/Math.PI),h=c*c,d=Math.sin(u),f=Math.cos(u),p=f/(d+f-1),m=p*p,g=p*(2/d-1),y=g*g,v=Math.PI*this.R*(c*(p-y)+Math.sqrt(h*(p-y)*(p-y)-(y+h)*(m-y)))/(y+h);l<0&&(v=-v),e=this.x0+v;var x=h+p;return v=Math.PI*this.R*(g*x-c*Math.sqrt((y+h)*(h+1)-x*x))/(y+h),n=s>=0?this.y0+v:this.y0-v,t.x=e,t.y=n,t}function l(t){var e,n,o,a,s,l,u,c,h,d,f,p;return t.x-=this.x0,t.y-=this.y0,f=Math.PI*this.R,s=(o=t.x/f)*o+(a=t.y/f)*a,f=3*(a*a/(c=-2*(l=-Math.abs(a)*(1+s))+1+2*a*a+s*s)+(2*(u=l-2*a*a+o*o)*u*u/c/c/c-9*l*u/c/c)/27)/(h=(l-u*u/3/c)/c)/(d=2*Math.sqrt(-h/3)),Math.abs(f)>1&&(f=f>=0?1:-1),p=Math.acos(f)/3,n=t.y>=0?(-d*Math.cos(p+Math.PI/3)-u/3/c)*Math.PI:-(-d*Math.cos(p+Math.PI/3)-u/3/c)*Math.PI,e=Math.abs(o)<r.H0?this.long0:(0,i.A)(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(o*o-a*a)+s*s))/2/o,this.over),t.x=e,t.y=n,t}var u=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];e.default={init:a,forward:s,inverse:l,names:u}},8695:function(t){t.exports={momentum:"geo_action_momentum",pan:"geo_action_pan",rotate:"geo_action_rotate",select:"geo_action_select",unzoomselect:"geo_action_unzoomselect",zoom:"geo_action_zoom",zoomrotate:"geo_action_zoom_rotate",zoomselect:"geo_action_zoomselect",annotation_edit_handle:"geo_annotation_edit_handle",annotation_cursor:"geo_annotation_cursor"}},6978:function(t,e,n){var i=n(6409),r=n(8695),o=n(5325),a=n(642),s=n(6546),l=0,u={create:"create",done:"done",highlight:"highlight",edit:"edit",cursor:"cursor"},c="annotationAction",h={fill:!0,fillColor:function(t){return t.selected?{r:0,g:1,b:1}:{r:.3,g:.3,b:.3}},fillOpacity:function(t){return t.selected?.5:.25},radius:function(t){return"edge"===t.type||"rotate"===t.type?8:10},scaled:!1,stroke:!0,strokeColor:{r:0,g:0,b:1},strokeOpacity:1,strokeWidth:function(t){return"edge"===t.type||"rotate"===t.type?2:3},rotateHandleOffset:24,rotateHandleRotation:-Math.PI/4,resizeHandleOffset:48,resizeHandleRotation:-Math.PI/4,handles:{vertex:!0,edge:!0,center:!0,rotate:!0,resize:!0}},d=function(t,e){"use strict";if(!(this instanceof d))return new d(t,e);var n=this,p=a.deepMerge({},this.constructor.defaults,e||{}),m=p.annotationId;delete p.annotationId,void 0===m||p.layer&&p.layer.annotationById(m)?(l+=1,void 0!==m&&console.warn("Annotation id "+m+" is in use; using "+l+" instead."),m=l):m>l&&(l=m);var g=p.name||t.charAt(0).toUpperCase()+t.substr(1)+" "+m,y=p.label||null,v=p.description||void 0,x=t,_=p.layer,b=p.state||u.done;delete p.state,delete p.layer,delete p.name,delete p.label,delete p.description,p.constraint&&(a.isFunction(p.constraint)?this._selectionConstraint=p.constraint:this._selectionConstraint=f(p.constraint)),this._exit=function(){n.layer()&&n.layer().geoOff(i.mousemove,n._cursorHandleMousemove)},this.id=function(){return m},this.newId=function(){return m=l+=1,n},this.name=function(t){return void 0===t?g:(null!==t&&(""+t).trim()&&(t=(""+t).trim())!==g&&(g=t,n.modified()),n)},this.label=function(t,e){return void 0===t?null!==y||e?y:g:(t!==y&&(y=t,n.modified()),n)},this._labelPosition=function(){return a.centerFromPerimeter(n._coordinates())},this._rotateHandlePosition=function(t,e){var i,r,o,s=n.layer().map(),l=n._coordinates(),u=a.centerFromPerimeter(n._coordinates()),c=u?s.gcsToDisplay(u,null):void 0,h=0;if(u){for(t=t||0,e=e||0,l=l.outer?l.outer:l,i=0;i<l.length;i+=1)r=s.gcsToDisplay(l[i],null),h=Math.max(h,Math.pow(r.x-c.x,2)+Math.pow(r.y-c.y,2));return o=Math.sqrt(h)+t,r=s.displayToGcs({x:c.x+o*Math.cos(e),y:c.y-o*Math.sin(e)},null)}},this.labelRecord=function(){var t=n.options("showLabel");if(t){var e=n.state();if(!(!0===t&&e===u.create||!0!==t&&t.indexOf(e)<0)){var i=n.labelStyle(),r={text:n.label(),position:n._labelPosition()};if(r.position)return i&&(r.style=i),r}}},this.description=function(t){return void 0===t?v:(t!==v&&(v=t,n.modified()),n)},this.layer=function(t){return void 0===t?_:(_=t,n)},this._cursorHandleMousemove=function(t){n.layer()._handleMouseMoveModifiers(t);var e=n._cursorCenter,i=t.mapgcs.x-e.x,r=t.mapgcs.y-e.y;if(i||r){var o=n._coordinates(),a=n._coordinatesMapFunc(o,function(t){return{x:t.x+i,y:t.y+r}});return n._coordinates(a),n._cursorCenter=t.mapgcs,n.modified(),n.draw(),!0}return!1},this.state=function(t){if(void 0===t)return b;if(b!==t&&(b=t,n.layer()&&n.layer().geoTrigger(i.annotation.state,{annotation:n}),n.layer()&&n.layer().geoOff(i.mousemove,n._cursorHandleMousemove),b===u.cursor))n._cursorCenter=a.centerFromPerimeter(n._coordinates()),n.layer()&&n.layer().geoOn(i.mousemove,n._cursorHandleMousemove);return n},this.actions=function(t){switch(t||(t=n.state()),t){case u.edit:return[{action:r.annotation_edit_handle,name:"annotation edit",owner:c,input:"left"},{action:r.annotation_edit_handle,name:"annotation edit",owner:c,input:"pan"}];case u.cursor:return[{action:r.annotation_cursor,name:"annotation cursor",owner:c,input:"pan"},{action:r.annotation_cursor,name:"annotation cursor",owner:c,input:"left"}];default:return[]}},this.processAction=function(t){},this.processEditAction=function(t){if(t&&n._editHandle&&n._editHandle.handle)switch(n._editHandle.handle.type){case"vertex":return n._processEditActionVertex(t);case"edge":return n._processEditActionEdge(t);case"center":return n._processEditActionCenter(t);case"rotate":return n._processEditActionRotate(t);case"resize":return n._processEditActionResize(t)}},this._copyOfCoordinates=function(t){return(t=t||n._coordinates()).outer?{outer:t.outer.slice(),inner:(t.inner||[]).map(function(t){return t.slice()})}:t.slice()},this.selectEditHandle=function(t,e){e&&n._editHandle&&n._editHandle.handle&&n._editHandle.handle.selected&&(n._editHandle.handle.selected=!1),t.selected=e;var r=(n._editHandle||{}).amountRotated||0;return n._editHandle={handle:t,startCoordinates:n._copyOfCoordinates(),center:a.centerFromPerimeter(n._coordinates()),rotatePosition:n._rotateHandlePosition(t.style.rotateHandleOffset,t.style.rotateHandleRotation+r),startAmountRotated:r,amountRotated:r,resizePosition:n._rotateHandlePosition(t.style.resizeHandleOffset,t.style.resizeHandleRotation)},n.layer()&&n.layer().geoTrigger(i.annotation.select_edit_handle,{annotation:n,handle:n._editHandle,enable:e}),n},this.options=function(t,e){if(void 0===t)return p;if("string"==typeof t&&void 0===e)return p[t];var r;if(void 0===e?(r=void 0!==t[n._coordinateOption],p=a.deepMerge(p,t),["style","createStyle","editStyle","editHandleStyle","labelStyle","highlightStyle","cursorStyle"].forEach(function(e){void 0!==t[e]&&Object.assign(p[e],t[e])})):(r=t===n._coordinateOption,p[t]=e),p.coordinates){var o=p.coordinates;delete p.coordinates,n._coordinates(o)}if(void 0!==p.name){var s=p.name;delete p.name,n.name(s)}if(void 0!==p.label){var l=p.label;delete p.label,n.label(l)}if(void 0!==p.description){var u=p.description;delete p.description,n.description(u)}return n.modified(),r&&n.layer()&&n.layer().geoTrigger(i.annotation.coordinates,{annotation:n}),n},this.style=function(t,e,i){return i=i||"style",void 0===t?p[i]:"string"==typeof t&&void 0===e?(p[i]||{})[t]:(void 0===p[i]&&(p[i]={}),void 0===e?p[i]=a.deepMerge(p[i],t):p[i][t]=e,n.modified(),n)},["createStyle","editStyle","editHandleStyle","labelStyle","highlightStyle","cursorStyle"].forEach(function(t){n[t]=function(e,i){return n.style(e,i,t)}}),this.styleForState=function(t){return(t=t||n.state())===u.edit||t===u.highlight?Object.assign({},p.style,p[t+"Style"]):t===u.create?Object.assign({},p.style,p.editStyle,p[t+"Style"]):t===u.cursor?Object.assign({},p.style,p.editStyle,p.createStyle,p[t+"Style"]):p[t+"Style"]||p.style||{}},this.type=function(){return x},this.features=function(){return[]},this.mouseClick=function(t){},this.mouseClickEdit=function(t){},this.mouseMove=function(t){},this._coordinates=function(t){return[]},this._coordinateOption="vertices",this.coordinates=function(t){var e=n._coordinates()||[];if(e.length||e.outer&&e.outer.length||(e=[]),n.layer()){var i=n.layer().map();(t=null===t?i.gcs():void 0===t?i.ingcs():t)!==i.gcs()&&(e=n._convertCoordinates(i.gcs(),t,e))}return e},this.modified=function(){return n.layer()&&n.layer().modified(),n},this.draw=function(){return n.layer()&&(n.layer()._update(),n.layer().draw()),n},this._geojsonStyles=function(){return["closed","fill","fillColor","fillOpacity","lineCap","lineJoin","radius","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]},this._geojsonCoordinates=function(t){return[]},this._geojsonGeometryType=function(){return""},this.geojson=function(t,e){var i,r,o,l=n._geojsonCoordinates(t),u=n._geojsonGeometryType(),c=n._geojsonStyles(),h=n.options("style")||{},d=n.labelStyle()||{};if(l&&l.length&&u){var f={type:"Feature",geometry:{type:u,coordinates:l},properties:{annotationType:x,name:n.name(),annotationId:n.id()}};for(y&&(f.properties.label=y),v&&(f.properties.description=v),!1===n.options("showLabel")&&(f.properties.showLabel=n.options("showLabel")),i=0;i<c.length;i+=1)if(r=c[i],void 0!==(o=a.ensureFunction(h[r])())){var p=((n.constructor.defaults||{}).style||{})[r];r.toLowerCase().match(/color$/)&&(o=a.convertColorToHex(o,"needed"),p=void 0!==p?a.convertColorToHex(p,"needed"):p),o!==p&&(f.properties[r]=o)}for(i=0;i<s.usedStyles.length;i+=1)r=s.usedStyles[i],void 0!==(o=a.ensureFunction(d[r])())&&(r.toLowerCase().match(/color$/)&&(o=a.convertColorToHex(o,"needed")),f.properties["label"+r.charAt(0).toUpperCase()+r.slice(1)]=o);if(e){var m=n.layer().map();t=null===t?m.gcs():void 0===t?m.ingcs():t,f.crs={type:"name",properties:{type:"proj4",name:t}}}return f}},this._addEditHandles=function(t,e,i,r){var o,s=Object.assign({},h,n.editHandleStyle()),l=a.ensureFunction(s.handles)()||{},u=n._editHandle&&n._editHandle.handle&&n._editHandle.handle.selected?n._editHandle.handle:void 0;i=Object.assign({},i),Object.keys(l).forEach(function(t){!1===l[t]&&(i[t]=!1)}),t[3]||(t[3]={point:[]}),o=t[3].point,(e.outer?[e.outer].concat(e.inner||[]):[e]).forEach(function(t,e){t.forEach(function(n,a){!1!==i.vertex&&o.push(Object.assign({},n,{type:"vertex",index:a,vindex:e,style:s,editHandle:!0})),!1===i.edge||a===t.length-1||n.x===t[a+1].x&&n.y===t[a+1].y||o.push(Object.assign({x:(n.x+t[a+1].x)/2,y:(n.y+t[a+1].y)/2},{type:"edge",index:a,vindex:e,style:s,editHandle:!0})),!1===i.edge||r||a!==t.length-1||n.x===t[0].x&&n.y===t[0].y||o.push(Object.assign({x:(n.x+t[0].x)/2,y:(n.y+t[0].y)/2},{type:"edge",index:a,vindex:e,style:s,editHandle:!0}))})}),!1!==i.center&&o.push(Object.assign({},a.centerFromPerimeter(n._coordinates()),{type:"center",style:s,editHandle:!0})),!1!==i.rotate&&(o.push(Object.assign(n._rotateHandlePosition(s.rotateHandleOffset,s.rotateHandleRotation+(u&&"rotate"===u.type?n._editHandle.amountRotated:0)),{type:"rotate",style:s,editHandle:!0})),!n._editHandle||u&&"rotate"===u.type||(n._editHandle.amountRotated=0)),!1!==i.resize&&o.push(Object.assign(n._rotateHandlePosition(s.resizeHandleOffset,s.resizeHandleRotation),{type:"resize",style:s,editHandle:!0})),u&&o.forEach(function(t){t.type===u.type&&t.index===u.index&&t.vindex===u.vindex&&(t.selected=!0)})},this._coordinatesMapFunc=function(t,e){return t.outer?{outer:t.outer.map(e),inner:(t.inner||[]).map(function(t){return t.map(e)})}:t.map(e)},this._firstPointDifferent=function(t,e){return t=t.outer?t.outer:t,e=e.outer?e.outer:e,t[0].x!==e[0].x||t[0].y!==e[0].y},this._processEditActionCenter=function(t){var e=n._editHandle.startCoordinates,i=t.mouse.mapgcs.x-t.state.origin.mapgcs.x,r=t.mouse.mapgcs.y-t.state.origin.mapgcs.y,o=n._coordinates(),a=n._coordinatesMapFunc(e,function(t){return{x:t.x+i,y:t.y+r}});return!!n._firstPointDifferent(a,o)&&(n._coordinates(a),!0)},this._processEditActionRotate=function(t){var e=n._editHandle,i=e.startCoordinates,r=t.mouse.mapgcs.x-t.state.origin.mapgcs.x,o=t.mouse.mapgcs.y-t.state.origin.mapgcs.y,a=Math.atan2(e.rotatePosition.y-e.center.y,e.rotatePosition.x-e.center.x),s=Math.atan2(e.rotatePosition.y+o-e.center.y,e.rotatePosition.x+r-e.center.x)-a,l=n._coordinates(),u=n._coordinatesMapFunc(i,function(t){var n=t.x-e.center.x,i=t.y-e.center.y;return{x:n*Math.cos(s)-i*Math.sin(s)+e.center.x,y:n*Math.sin(s)+i*Math.cos(s)+e.center.y}});return!!n._firstPointDifferent(u,l)&&(n._coordinates(u),e.amountRotated=e.startAmountRotated+s,!0)},this._processEditActionResize=function(t){var e=n._editHandle,i=e.startCoordinates,r=t.mouse.mapgcs.x-t.state.origin.mapgcs.x,o=t.mouse.mapgcs.y-t.state.origin.mapgcs.y,a=n.layer().map(),s=a.gcsToDisplay(e.center,null),l=a.gcsToDisplay(e.resizePosition,null),u=a.gcsToDisplay({x:e.resizePosition.x+r,y:e.resizePosition.y+o},null),c=Math.pow(Math.pow(l.y-s.y,2)+Math.pow(l.x-s.x,2),.5)-e.handle.style.resizeHandleOffset,h=Math.pow(Math.pow(u.y-s.y,2)+Math.pow(u.x-s.x,2),.5)-e.handle.style.resizeHandleOffset,d=n._coordinates();if(h&&c){var f=h/c,p=n._coordinatesMapFunc(i,function(t){return{x:(t.x-e.center.x)*f+e.center.x,y:(t.y-e.center.y)*f+e.center.y}});if(n._firstPointDifferent(p,d))return n._coordinates(p),!0}return!1},this._processEditActionEdge=function(t){var e=n._editHandle,i=e.handle.index,r=e.handle.vindex,o=n._coordinates();o.outer?(r?o.inner[r-1]:o.outer).splice(i+1,0,{x:e.handle.x,y:e.handle.y}):o.splice(i+1,0,{x:e.handle.x,y:e.handle.y});return e.handle.type="vertex",e.handle.index+=1,e.startCoordinates=n._copyOfCoordinates(o),n.modified(),!0},this._processEditActionVertex=function(t,e){var r,o,a=n._editHandle,s=a.handle.index,l=a.handle.vindex,u=a.startCoordinates,c=n._coordinates(),h=c.outer?l?c.inner[l-1]:c.outer:c,d=h.length,f=h[s],p=t.mouse.mapgcs.x-t.state.origin.mapgcs.x,m=t.mouse.mapgcs.y-t.state.origin.mapgcs.y,g=n.layer(),y=g.options("adjacentPointProximity");return u.outer&&(u=l?u.inner[l-1]:u.outer),h[s]={x:u[s].x+p,y:u[s].y+m},g.displayDistance(h[s],null,u[s],null)<=y||(g.displayDistance(h[s],null,h[(s+1)%h.length],null)<=y?r=(s+1)%h.length:g.displayDistance(h[s],null,h[(s+h.length-1)%h.length],null)<=y&&(r=(s+h.length-1)%h.length)),o=0===r&&s===h.length-1||r===h.length-1&&0===s,!1===e&&o&&(r=void 0),void 0!==r&&h.length>(e||n.options("style").closed?3:2)&&(h[s]={x:h[r].x,y:h[r].y},t.event===i.actionup&&(e&&o&&(n.options("style").closed=!0),h.splice(s,1))),(h.length!==d||h[s].x!==f.x||h[s].y!==f.y)&&(n._coordinates(c),!0)},this._convertCoordinates=function(t,e,i){var r=!i;return i=(i=i||n._coordinates()).outer?{outer:o.transformCoordinates(t,e,i.outer),inner:(i.inner||[]).map(function(n){return o.transformCoordinates(t,e,n)})}:o.transformCoordinates(t,e,i),r&&n._coordinates(i),i}};function f(t){var e=Array.isArray(t)?t:[t];return function(t,n,i,r,o,a){var s,l=t;if(i||(i=[{x:n.x,y:n.y},{x:t.x,y:n.y},{x:t.x,y:t.y},{x:n.x,y:t.y}]),r){var u,c,h=(a+1)%4,d=(a+2)%4,f=(a+3)%4,p=Math.pow(Math.pow(i[a].x-i[h].x,2)+Math.pow(i[a].y-i[h].y,2),.5),m=Math.pow(Math.pow(i[a].x-i[f].x,2)+Math.pow(i[a].y-i[f].y,2),.5),g=Math.abs(p*m);e.forEach(function(t){var e,n;if(t.width?(e=t.width,n=t.height):n=(e=Math.pow(g*t,.5))/t,e!==n&&!(a%2)){var i=[n,e];e=i[0],n=i[1]}var r=Math.pow(e-m,2)+Math.pow(n-p,2);(void 0===s||r<s)&&(s=r,u={w:e,h:n})});var y=o[h],v={x:-u.w*Math.cos(y),y:-u.w*Math.sin(y)},x=o[a],_={x:-u.h*Math.cos(x),y:-u.h*Math.sin(x)};switch(r){case"vertex":i[a].x=i[d].x+v.x+_.x,i[a].y=i[d].y+v.y+_.y,i[h].x=i[d].x+v.x,i[h].y=i[d].y+v.y,i[f].x=i[d].x+_.x,i[f].y=i[d].y+_.y;break;case"edge":c={x:.5*(i[d].x+i[f].x),y:.5*(i[d].y+i[f].y)},i[d].x=c.x+_.x/2,i[d].y=c.y+_.y/2,i[a].x=c.x+v.x-_.x/2,i[a].y=c.y+v.y-_.y/2,i[h].x=c.x+v.x+_.x/2,i[h].y=c.y+v.y+_.y/2,i[f].x=c.x-_.x/2,i[f].y=c.y-_.y/2}}else{var b=Math.abs((t.x-n.x)*(t.y-n.y));e.forEach(function(e){var i,r;e.width?(i=e.width,r=e.height):r=(i=Math.pow(b*e,.5))/e;var o={x:n.x+Math.sign(t.x-n.x)*i,y:n.y+Math.sign(t.y-n.y)*r},a=Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2);(void 0===s||a<s)&&(s=a,l=o)}),i[0].y=i[1].y=n.y,i[0].x=i[3].x=n.x,i[1].x=i[2].x=l.x,i[2].y=i[3].y=l.y}return{corners:i,origin:n,pos:l}}}d.defaults={showLabel:!0},t.exports={state:u,actionOwner:c,annotation:d,_editHandleFeatureLevel:3,defaultEditHandleStyle:h,constrainAspectRatio:f,annotationActionOwner:c,continuousVerticesActions:function(t,e,n,i,o){return n||(n=t.state()),n===u.create?[{action:r["annotation_"+i],name:i+" create",owner:c,input:"left"},{action:r["annotation_"+i],name:i+" create",owner:c,input:"pan"}]:e.apply(t,o)},continuousVerticesProcessAction:function(t,e,n){var o=t.layer();if(t.state()===u.create&&o&&e.state.action===r["annotation_"+n]){var a=o.options("continuousPointProximity"),s=o.options("continuousPointCollinearity"),l=o.options("continuousCloseProximity");if(a||0===a){var c=t.options("vertices"),h=!1;if(!c.length)return c.push(e.mouse.mapgcs),c.push(e.mouse.mapgcs),!0;var d=o.displayDistance(c[c.length-2],null,e.mouse.map,"display");if(d&&d>a){if(c.length>=(t._lastClickVertexCount||1)+3){var f=o.displayDistance(c[c.length-3],null,c[c.length-2],null),p=d,m=o.displayDistance(c[c.length-3],null,e.mouse.map,"display");if(f&&m)(m*m-f*f-p*p)/(2*f*p)>Math.cos(s)&&c.pop()}c[c.length-1]=e.mouse.mapgcs,c.push(e.mouse.mapgcs),h=!0}return(l||0===l)&&e.event===i.actionup&&(!0===l||o.displayDistance(c[0],null,e.mouse.map,"display")<=a)?c.length<3+("polygon"===n?1:0)?"remove":(c.pop(),t.state(u.done),"done"):h}}}}},9894:function(t,e,n){var i=n(4626),r=n(1098).registerAnnotation,o=n(2225),a=n(642),s=n(3656),l=function(t,e){"use strict";if(!(this instanceof l))return new l(t,e);t=a.deepMerge({},this.constructor.defaults,t,{constraint:1}),s.call(this,t,e||"circle")};i(l,s),l.defaults=Object.assign({},s.defaults,{});var u={};u[o.capabilities.feature]=!0,r("circle",l,u),t.exports=l},3656:function(t,e,n){var i=n(4626),r=n(1098).registerAnnotation,o=n(2225),a=n(642),s=n(6978).state,l=n(4019),u=function(t,e){"use strict";if(!(this instanceof u))return new u(t,e);t=a.deepMerge({},this.constructor.defaults,t),l.call(this,t,e||"ellipse");var n=this;this.features=function(){var t,e=n.options(),i=n.state();if(t=[],e.corners&&e.corners.length>=4){var r=n.styleForState(i),a=Math.pow(Math.pow(e.corners[0].x-e.corners[1].x,2)+Math.pow(e.corners[0].y-e.corners[1].y,2),.5),l=Math.pow(Math.pow(e.corners[0].x-e.corners[3].x,2)+Math.pow(e.corners[0].y-e.corners[3].y,2),.5),u=Math.max(a,l)/2/n.layer().map().unitsPerPixel(0),c=a?l/a:1e20,h=-Math.atan2(e.corners[1].y-e.corners[0].y,e.corners[1].x-e.corners[0].x);t=[{marker:{x:(e.corners[0].x+e.corners[1].x+e.corners[2].x+e.corners[3].x)/4,y:(e.corners[0].y+e.corners[1].y+e.corners[2].y+e.corners[3].y)/4,style:Object.assign({},r,{radius:u,symbolValue:c,rotation:h,strokeOffset:0,radiusIncludesStroke:!1,scaleWithZoom:o.scaleMode.fill,rotateWithMap:!0,strokeOpacity:!1===r.stroke?0:r.strokeOpacity,fillOpacity:!1===r.fill?0:r.fillOpacity})}}]}return i===s.edit&&n._addEditHandles(t,e.corners),t},this.toPolygonList=function(t){var e=n._coordinates();if(e.length<3)return[];var i=t&&t.tolerance||0;if(!i){var r=n.layer().map();i=t&&t.pixelTolerance?r.unitsPerPixel(r.zoom())*t.pixelTolerance:.1*r.unitsPerPixel(r.zoomRange().max)}for(var o=Math.pow(Math.pow(e[0].x-e[1].x,2)+Math.pow(e[0].y-e[1].y,2),.5),a=Math.pow(Math.pow(e[0].x-e[3].x,2)+Math.pow(e[0].y-e[3].y,2),.5),s=(e[0].x+e[2].x)/2,l=(e[0].y+e[2].y)/2,u=Math.max(o,a)/2,c=-Math.atan2(e[1].y-e[0].y,e[1].x-e[0].x),h=Math.max(12,Math.ceil(Math.PI/Math.acos((u-i)/(u+i)))),d=o/2*(1+(1-Math.cos(Math.PI/h))/2),f=a/2*(1+(1-Math.cos(Math.PI/h))/2),p=[],m=Math.cos(c),g=Math.sin(c),y=0;y<h;y+=1){var v=2*Math.PI*y/h,x=Math.cos(v),_=Math.sin(v),b=s+d*m*x-f*g*_,w=l+d*g*x+f*m*_;p.push([b,w])}return[[p]]}};i(u,l),u.defaults=Object.assign({},l.defaults,{});var c={};c[o.capabilities.feature]=!0,r("ellipse",u,c),t.exports=u},4655:function(t,e,n){var i=n(6978);t.exports={state:i.state,actionOwner:i.actionOwner,annotation:i.annotation,_editHandleFeatureLevel:i._editHandleFeatureLevel,defaultEditHandleStyle:i.defaultEditHandleStyle,constrainAspectRatio:i.constrainAspectRatio,baseAnnotation:i,circleAnnotation:n(9894),ellipseAnnotation:n(3656),lineAnnotation:n(2612),pointAnnotation:n(400),polygonAnnotation:n(1920),rectangleAnnotation:n(4019),squareAnnotation:n(5229)}},2612:function(t,e,n){var i=n(4626),r=n(1098).registerAnnotation,o=n(9281),a=n(642),s=n(6978).annotation,l=n(6978).state,u=n(6978).continuousVerticesActions,c=n(6978).continuousVerticesProcessAction,h=function(t){"use strict";if(!(this instanceof h))return new h(t);(t=a.deepMerge({},this.constructor.defaults,{style:{line:function(t){return Array(e.options("vertices").length).fill(t)},position:function(t,n){return e.options("vertices")[n]}},createStyle:{line:function(t){return Array(e.options("vertices").length).fill(t)},position:function(t,n){return e.options("vertices")[n]}}},t)).vertices=t.vertices||t.coordinates||[],delete t.coordinates,s.call(this,"line",t);var e=this,n=this.actions,i=this.processEditAction;this.features=function(){var t,n=e.options(),i=e.state();if(i===l.create)t=[{line:{line:n.vertices,style:e.styleForState(i)}}];else t=[{line:{line:n.vertices,style:e.styleForState(i)}}],i===l.edit&&e._addEditHandles(t,n.vertices,void 0,!e.style("closed"));return t},this._coordinates=function(t){return t&&e.options("vertices",t),e.options("vertices")},this.mouseMove=function(t){if(e.state()===l.create){var n=e.options("vertices");return n.length?(n[n.length-1]=t.mapgcs,!0):void 0}},this.mouseClick=function(t){var n=e.layer();if(e.state()===l.create&&n){var i,r=!!t.buttonsDown.right;if(t.buttonsDown.left||t.buttonsDown.right){var o=e.options("vertices");if(!t.buttonsDown.right||o.length)return t.handled=!0,t.buttonsDown.left&&(o.length?o.length>=2&&n.displayDistance(o[o.length-2],null,t.map,"display")<=n.options("adjacentPointProximity")?(i=!0,e._lastClick&&t.time-e._lastClick<n.options("dblClickTime")&&(r=!0)):o.length>=2&&n.displayDistance(o[0],null,t.map,"display")<=n.options("finalPointProximity")?r="close":o[o.length-1]=t.mapgcs:o.push(t.mapgcs),r||i||o.push(t.mapgcs),e._lastClick=t.time,e._lastClickVertexCount=o.length),r?o.length<3?"remove":(o.pop(),e.options("style").closed="close"===r,e.state(l.done),"done"):!i}}},this.actions=function(t){return u(e,n,t,"line",arguments)},this.processAction=function(t){return c(e,t,"line")},this._geojsonCoordinates=function(t){var n=e.coordinates(t);if(n&&!(n.length<2)&&e.state()!==l.create){for(var i=[],r=0;r<n.length;r+=1)i.push([n[r].x,n[r].y]);return i}},this._geojsonGeometryType=function(){return"LineString"},this._geojsonStyles=function(){return["closed","lineCap","lineJoin","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]},this.processEditAction=function(t){return"vertex"===e._editHandle.handle.type?e._processEditActionVertex(t,!0):i.apply(e,arguments)},this.mouseClickEdit=function(t){var n,i=e.layer(),r=e._editHandle;if(e.state()===l.edit&&i&&t.buttonsDown.left&&r&&r.handle.selected&&"edge"===r.handle.type&&e.options("style").closed&&(t.handled=!0,e._lastClick&&t.time-e._lastClick<i.options("dblClickTime")&&(n=!0),e._lastClick=t.time,n)){var o=r.handle.index,a=e._coordinates(),s=a.slice(o+1).concat(a.slice(0,o+1));return e._coordinates(s),e.options("style").closed=!1,r.handle.index=void 0,!0}}};i(h,s),h.defaults=Object.assign({},s.defaults,{style:{strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3,closed:!1,lineCap:"butt",lineJoin:"miter"},highlightStyle:{strokeWidth:5},createStyle:{strokeColor:{r:0,g:0,b:1},strokeOpacity:1,strokeWidth:3,closed:!1,lineCap:"butt",lineJoin:"miter"},allowBooleanOperations:["annotation-cut"]});var d={};d[o.capabilities.basic]=[l.create],r("line",h,d),t.exports=h},400:function(t,e,n){var i=n(4626),r=n(642),o=n(1098).registerAnnotation,a=n(7541),s=n(6978).annotation,l=n(6978).state,u=function(t){"use strict";if(!(this instanceof u))return new u(t);(t=r.deepMerge({},this.constructor.defaults,t)).position=t.position||(t.coordinates?t.coordinates[0]:void 0),delete t.coordinates,s.call(this,"point",t);var e=this;this.features=function(){var t,n,i,o=e.options(),a=e.state();if(a===l.create)t=[];else n=e.styleForState(a),(o.style.scaled||0===o.style.scaled)&&(!0===o.style.scaled&&(o.style.scaled=e.layer().map().zoom()),n=Object.assign({},n,{radius:function(){var t=o.style.radius,n=e.layer().map().zoom();return r.isFunction(t)&&(t=t.apply(e,arguments)),t*=Math.pow(2,n-o.style.scaled),t}}),i=!0),t=[{point:{x:o.position.x,y:o.position.y,style:n,scaleOnZoom:i}}],a===l.edit&&e._addEditHandles(t,[o.position],{edge:!1,center:!1,resize:!1,rotate:!1});return t},this._coordinates=function(t){return t&&t.length>=1&&e.options("position",t[0]),e.state()===l.create?[]:[e.options("position")]},this._coordinateOption="position",this.mouseClick=function(t){if(e.state()===l.create&&t.buttonsDown.left)return t.handled=!0,e.options("position",t.mapgcs),e.state(l.done),"done"},this._geojsonStyles=function(){return["fill","fillColor","fillOpacity","radius","scaled","stroke","strokeColor","strokeOpacity","strokeWidth"]},this._geojsonCoordinates=function(t){var n=e.coordinates(t);if(n&&e.state()!==l.create&&!(n.length<1)&&void 0!==n[0])return[n[0].x,n[0].y]},this._geojsonGeometryType=function(){return"Point"}};i(u,s),u.defaults=Object.assign({},s.defaults,{style:{fill:!0,fillColor:{r:0,g:1,b:0},fillOpacity:.25,radius:10,scaled:!1,stroke:!0,strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3},createStyle:{fillColor:{r:.3,g:.3,b:.3},fillOpacity:.25,strokeColor:{r:0,g:0,b:1}},highlightStyle:{fillColor:{r:0,g:1,b:1},fillOpacity:.5,strokeWidth:5}});var c={};c[a.capabilities.feature]=!0,o("point",u,c),t.exports=u},1920:function(t,e,n){var i=n(4626),r=n(1098).registerAnnotation,o=n(9281),a=n(6645),s=n(642),l=n(6978).annotation,u=n(6978).state,c=n(6978).continuousVerticesActions,h=n(6978).continuousVerticesProcessAction,d=function(t){"use strict";if(!(this instanceof d))return new d(t);var e=this;(t=s.deepMerge({style:{polygon:function(t){return t.polygon}},createStyle:{line:function(t){var n=e._coordinates();return Array((n.outer||n).length).fill(t)},position:function(t,n){return void 0!==t.x?t:e.options("vertices")[n]}},cursorStyle:{position:s.identityFunction}},this.constructor.defaults,t)).vertices=t.vertices||t.coordinates||[],delete t.coordinates,l.call(this,"polygon",t);var n=this.actions,i=this.state;this.features=function(){var t,n=e.options(),i=e.state(),r=e.styleForState(i);if(i===u.create)t=[],n.vertices&&(n.vertices.outer||n.vertices.length>=3)&&(t[1]={polygon:{polygon:n.vertices,style:r}}),n.vertices&&n.vertices.length>=2&&(t[2]={line:{line:n.vertices,style:r}});else t=[{polygon:{polygon:n.vertices,style:r}}],i===u.edit&&e._addEditHandles(t,n.vertices);return t},this.toPolygonList=function(t){var n=e._coordinates();if(n.outer){var i=[[n.outer.map(function(t){return[t.x,t.y]})]];return(n.inner||[]).forEach(function(t){return i[0].push(t.map(function(t){return[t.x,t.y]}))}),i}return n.length<3||!n.map?[]:[[n.map(function(t){return[t.x,t.y]})]]},this._coordinates=function(t){return t&&e.options("vertices",t),e.options("vertices")},this.mouseMove=function(t){if(e.state()===u.create){var n=e.options("vertices");return n.length?(n[n.length-1]=t.mapgcs,!0):void 0}},this.mouseClick=function(t){var n=e.layer();if(e.state()===u.create&&n){var i,r=!!t.buttonsDown.right;if(t.buttonsDown.left||t.buttonsDown.right){var o=e.options("vertices");if(!t.buttonsDown.right||o.length)return t.handled=!0,t.buttonsDown.left&&(o.length?o.length>=2&&n.displayDistance(o[o.length-2],null,t.map,"display")<=n.options("adjacentPointProximity")?(i=!0,e._lastClick&&t.time-e._lastClick<n.options("dblClickTime")&&(r=!0)):o.length>=2&&n.displayDistance(o[0],null,t.map,"display")<=n.options("finalPointProximity")?r=!0:o[o.length-1]=t.mapgcs:o.push(t.mapgcs),r||i||o.push(t.mapgcs),e._lastClick=t.time,e._lastClickVertexCount=o.length),r?o.length<4?"remove":(o.pop(),e.state(u.done),"done"):!i}}},this.actions=function(t){return c(e,n,t,"polygon",arguments)},this.state=function(t){var n=i();if(t&&t!==n&&(n===u.create||n===u.edit)&&t===u.done){for(var r=s.polyops.union(e.options("vertices"),[],{style:"object-listlist-outer-list"}),o=!0;r.length>1&&o;){o=!1;for(var a=0;!o&&a<r[0].outer.length;a+=1)for(var l=r[0].outer[a],c=1;!o&&c<r.length;c+=1)for(var h=0;!o&&h<r[c].outer.length;h+=1){var d=r[c].outer[h];l.x===d.x&&l.y===d.y&&(r[0].inner=r[0].inner.concat(r[c].inner),r[0].outer=r[0].outer.slice(0,a).concat(r[c].outer.slice(h)).concat(r[c].outer.slice(0,h)).concat(r[0].outer.slice(a)),r.splice(c,1),o=!0)}}1===r.length&&e.options("vertices",r[0].inner.length?r[0]:r[0].outer)}return i(t)},this.processAction=function(t){return h(e,t,"polygon")},this._geojsonCoordinates=function(t){var n=e.coordinates(t);if(!(!n||!n.outer&&n.length<3||e.state()===u.create)){var i=[];return n.outer?((i=[n.outer.map(function(t){return[t.x,t.y]})])[0].push(i[0][0].slice()),(n.inner||[]).forEach(function(t){var e=t.map(function(t){return[t.x,t.y]});e.push(e[0].slice()),i.push(e)})):(i=[n.map(function(t){return[t.x,t.y]})])[0].push(i[0][0].slice()),i}},this._geojsonGeometryType=function(){return"Polygon"},this._geojsonStyles=function(){return["fill","fillColor","fillOpacity","lineCap","lineJoin","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]}};i(d,l),d.defaults=Object.assign({},l.defaults,{style:{fill:!0,fillColor:{r:0,g:1,b:0},fillOpacity:.25,stroke:!0,strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3,uniformPolygon:!0},highlightStyle:{fillColor:{r:0,g:1,b:1},fillOpacity:.5,strokeWidth:5},createStyle:{closed:!1,fillColor:{r:.3,g:.3,b:.3},fillOpacity:.25,stroke:!1,strokeColor:{r:0,g:0,b:1}},cursorStyle:{closed:!0,fillColor:{r:.3,g:.3,b:.3},fillOpacity:.25,stroke:!0,strokeColor:{r:0,g:0,b:1}},allowBooleanOperations:!0});var f={};f[a.capabilities.feature]=!0,f[o.capabilities.basic]=[u.create],r("polygon",d,f),t.exports=d},4019:function(t,e,n){var i=n(4626),r=n(6409),o=n(8695),a=n(1098).registerAnnotation,s=n(6645),l=n(642),u=n(6978).annotation,c=n(6978).state,h=n(6978).annotationActionOwner,d=function(t,e){"use strict";if(!(this instanceof d))return new d(t,e);(t=l.deepMerge({},this.constructor.defaults,t)).corners=t.corners||t.coordinates||[],delete t.coordinates,u.call(this,e||"rectangle",t);var n=this,i=this.actions,a=this.processEditAction;this.actions=function(t){return t||(t=n.state()),t===c.create?[{action:o.annotation_rectangle,name:"rectangle create",owner:h,input:"left",selectionRectangle:!0,selectionConstraint:this._selectionConstraint}]:i.apply(n,arguments)},this.processAction=function(t){var e=n.layer();if(n.state()===c.create&&e&&t.event===r.actionselection&&t.state.action===o.annotation_rectangle){var i=e.map(),a=[i.displayToGcs({x:t.lowerLeft.x,y:t.lowerLeft.y},null),i.displayToGcs({x:t.lowerLeft.x,y:t.upperRight.y},null),i.displayToGcs({x:t.upperRight.x,y:t.upperRight.y},null),i.displayToGcs({x:t.upperRight.x,y:t.lowerLeft.y},null)];return this._selectionConstraint&&t.mouse&&t.state.origin&&this._selectionConstraint(t.mouse.mapgcs,t.state.origin.mapgcs,a),e.displayDistance(a[0],null,a[1],null)*e.displayDistance(a[0],null,a[3],null)<.01?"remove":(n.options("corners",a),n.state(c.done),"done")}},this.features=function(){var t,e=n.options(),i=n.state();return t=[],e.corners&&e.corners.length>=4&&(t=[{polygon:{polygon:e.corners,style:n.styleForState(i)}}]),i===c.edit&&n._addEditHandles(t,e.corners),t},this.toPolygonList=function(t){return n._coordinates().length<3?[]:[[n._coordinates().map(function(t){return[t.x,t.y]})]]},this._coordinates=function(t){return t&&t.length>=4&&n.options("corners",t.slice(0,4)),n.options("corners")},this._coordinateOption="corners",this._geojsonCoordinates=function(t){var e=n.coordinates(t);if(e&&n.state()!==c.create&&!(e.length<4)){for(var i=[],r=0;r<4;r+=1)i.push([e[r].x,e[r].y]);return i.push([e[0].x,e[0].y]),[i]}},this._geojsonGeometryType=function(){return"Polygon"},this._geojsonStyles=function(){return["fill","fillColor","fillOpacity","lineCap","lineJoin","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]},this._setCornersFromMouse=function(t,e){var i=n.layer().map(),r=i.gcsToDisplay({x:t[0].x,y:t[0].y},null),o=i.gcsToDisplay(e.mapgcs,null),a={x:o.x,y:r.y},s={x:r.x,y:o.y};t[2]=Object.assign({},e.mapgcs),t[1]=i.displayToGcs(a,null),t[3]=i.displayToGcs(s,null),this._selectionConstraint&&this._selectionConstraint(e.mapgcs,t[0],t)},this.mouseMove=function(t){if(n.state()===c.create){var e=n.options("corners");return e.length?(n._setCornersFromMouse(e,t),!0):void 0}},this.mouseClick=function(t){var e=n.layer();if(n.state()===c.create&&e&&(t.buttonsDown.left||t.buttonsDown.right)){var i=n.options("corners");if(!t.buttonsDown.right||i.length)return t.handled=!0,i.length?(n._setCornersFromMouse(i,t),e.displayDistance(i[0],null,i[1],null)*e.displayDistance(i[0],null,i[3],null)<.01?"remove":(n.state(c.done),"done")):t.buttonsDown.left?(i.push(Object.assign({},t.mapgcs)),i.push(Object.assign({},t.mapgcs)),i.push(Object.assign({},t.mapgcs)),i.push(Object.assign({},t.mapgcs)),!0):void 0}},this.processEditAction=function(t){var e,i,r,o,s,l=n._editHandle.startCoordinates,u={x:t.mouse.mapgcs.x-t.state.origin.mapgcs.x,y:t.mouse.mapgcs.y-t.state.origin.mapgcs.y},c=n._editHandle.handle.type,h=n._editHandle.handle.index,d=[Math.atan2(l[1].y-l[0].y,l[1].x-l[0].x),Math.atan2(l[2].y-l[1].y,l[2].x-l[1].x),Math.atan2(l[3].y-l[2].y,l[3].x-l[2].x),Math.atan2(l[0].y-l[3].y,l[0].x-l[3].x)];switch(d[0]||d[1]||d[2]||d[3]||(d[1]=Math.PI/2,d[2]=Math.PI,d[3]=-Math.PI/2),d[0]||d[2]||(d[0]=d[1]-Math.PI/2,d[2]=d[1]+Math.PI/2),d[1]||d[3]||(d[1]=d[2]-Math.PI/2,d[3]=d[2]+Math.PI/2),c){case"vertex":return e=l.map(function(t){return{x:t.x,y:t.y}}),o=d[(h+1)%4],i={x:(u.x*Math.cos(o)+u.y*Math.sin(o))*Math.cos(o),y:(u.y*Math.sin(o)+u.x*Math.cos(o))*Math.sin(o)},s=d[h],r={x:(u.x*Math.cos(s)+u.y*Math.sin(s))*Math.cos(s),y:(u.y*Math.sin(s)+u.x*Math.cos(s))*Math.sin(s)},e[h].x+=u.x,e[h].y+=u.y,e[(h+1)%4].x+=i.x,e[(h+1)%4].y+=i.y,e[(h+3)%4].x+=r.x,e[(h+3)%4].y+=r.y,this._selectionConstraint&&(e=this._selectionConstraint(t.mouse.mapgcs,t.state.origin.mapgcs,e,"vertex",d,h).corners),n.options("corners",e),!0;case"edge":return e=l.map(function(t){return{x:t.x,y:t.y}}),o=d[(h+1)%4],u={x:(u.x*Math.cos(o)+u.y*Math.sin(o))*Math.cos(o),y:(u.y*Math.sin(o)+u.x*Math.cos(o))*Math.sin(o)},e[h].x+=u.x,e[h].y+=u.y,e[(h+1)%4].x+=u.x,e[(h+1)%4].y+=u.y,this._selectionConstraint&&(e=this._selectionConstraint(t.mouse.mapgcs,t.state.origin.mapgcs,e,"edge",d,h).corners),n.options("corners",e),!0}return a.apply(n,arguments)}};i(d,u),d.defaults=Object.assign({},u.defaults,{style:{fill:!0,fillColor:{r:0,g:1,b:0},fillOpacity:.25,polygon:function(t){return t.polygon},stroke:!0,strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3,uniformPolygon:!0},highlightStyle:{fillColor:{r:0,g:1,b:1},fillOpacity:.5,strokeWidth:5},createStyle:{fillColor:{r:.3,g:.3,b:.3},fillOpacity:.25,strokeColor:{r:0,g:0,b:1}},allowBooleanOperations:!0});var f={};f[s.capabilities.feature]=!0,a("rectangle",d,f),t.exports=d},5229:function(t,e,n){var i=n(4626),r=n(1098).registerAnnotation,o=n(6645),a=n(642),s=n(4019),l=function(t,e){"use strict";if(!(this instanceof l))return new l(t,e);t=a.deepMerge({},this.constructor.defaults,t,{constraint:1}),s.call(this,t,e||"square")};i(l,s),l.defaults=Object.assign({},s.defaults,{});var u={};u[o.capabilities.feature]=!0,r("square",l,u),t.exports=l},2075:function(t,e,n){function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(s.push(i.value),s.length!==e);l=!0);}catch(t){u=!0,r=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw r}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}var o=n(4626),a=n(6498),s=n(4655),l=n(6409),u=n(1098),c=n(5325),h=n(5616),d=n(7549),f=n(6546),p=n(2612),m=function(t){"use strict";if(!(this instanceof m))return new m(t);a.call(this,t);var e,r,o,g,y=n(7908),v=n(77),x=n(642),_=this,b=this._init,w=this._exit,M=this.draw,A=this._update,E=v(),T=null,S=[],C={},k=[],P={closed:{dataType:"boolean",keys:["closed","close"]},fill:{dataType:"boolean",keys:["fill"]},fillColor:{dataType:"color",keys:["fillColor","fill-color","marker-color","fill"]},fillOpacity:{dataType:"opacity",keys:["fillOpacity","fill-opacity"]},lineCap:{dataType:"text",keys:["lineCap","line-cap"]},lineJoin:{dataType:"text",keys:["lineJoin","line-join"]},radius:{dataType:"positive",keys:["radius"]},scaled:{dataType:"booleanOrNumber",keys:["scaled"]},stroke:{dataType:"boolean",keys:["stroke"]},strokeColor:{dataType:"color",keys:["strokeColor","stroke-color","stroke"]},strokeOffset:{dataType:"number",keys:["strokeOffset","stroke-offset"]},strokeOpacity:{dataType:"opacity",keys:["strokeOpacity","stroke-opacity"]},strokeWidth:{dataType:"positive",keys:["strokeWidth","stroke-width"]}},O={offset:"coordinate2",rotateWithMap:"boolean",rotation:"angle",scaleWithMap:"boolean",scale:"booleanOrNumber",shadowBlur:"numberOrBlank",shadowOffset:"coordinate2",strokeWidth:"numberOrBlank",visible:"boolean"};return f.usedStyles.forEach(function(t){P[t]={option:"labelStyle",dataType:O[t]||"text",keys:[t,"label"+t.charAt(0).toUpperCase()+t.slice(1),t.replace(/([A-Z])/g,"-$1").toLowerCase(),"label-"+t.replace(/([A-Z])/g,"-$1").toLowerCase()]}}),e=x.deepMerge({},{dblClickTime:300,adjacentPointProximity:5,continuousPointProximity:5,continuousPointCollinearity:1*Math.PI/180,continuousCloseProximity:10,finalPointProximity:10,showLabels:!0,clickToEdit:!1},t),this._processAction=function(t){var e;if(t.state&&t.state.actionRecord&&t.state.actionRecord.owner===s.actionOwner&&_.currentAnnotation)switch(_.mode()){case _.modes.edit:e=_.currentAnnotation.processEditAction(t),_.currentAnnotation&&_.currentAnnotation._editHandle&&_.currentAnnotation._editHandle.handle&&(_.geoTrigger(l.annotation.edit_action,{annotation:_.currentAnnotation,handle:_.currentAnnotation._editHandle?_.currentAnnotation._editHandle.handle:void 0,action:t.event}),t.event===l.actionup&&_._selectEditHandle({data:_.currentAnnotation._editHandle.handle},_.currentAnnotation._editHandle.handle.selected));break;case _.modes.cursor:_.currentAnnotation._cursorHandleMousemove(t.mouse),e=_.currentAnnotation.processAction(t),_.geoTrigger(l.annotation.cursor_action,{annotation:_.currentAnnotation,operation:_.currentBooleanOperation(),evt:t});break;default:e=_.currentAnnotation.processAction(t)}_._updateFromEvent(e)},this.currentBooleanOperation=function(){var t;return _._currentBooleanClass&&(t=_._currentBooleanClass.split("-")[1]),t},this._handleBooleanOperation=function(){var t=_.currentBooleanOperation();if(t&&_.currentAnnotation&&(_.currentAnnotation.toPolygonList||"cut"===t&&_.currentAnnotation instanceof p)){var e=_.currentAnnotation;if(_.removeAnnotation(_.currentAnnotation,!1),_.annotations().length||"difference"!==t&&"intersect"!==t){var n={annotation:e,operation:t};_.geoTrigger(l.annotation.boolean,n),!1!==n.cancel&&("cut"!==t?x.polyops[t](_,e.toPolygonList(),{correspond:{},keepAnnotations:"exact",style:_}):_.cutOperation(e))}}},this._extendLine=function(t,e,n){var i,r=e[0]-t[0],o=e[1]-t[1];if(!r&&!o)return t;var a=((r>0?n.min.x:n.max.x)-t[0])/(r||1);if(a<0){var s=t[1]+a*o;s>=n.min.y&&s<=n.max.y&&(i=[r>0?n.min.x:n.max.x,s])}if((a=((o>0?n.min.y:n.max.y)-t[1])/(o||1))<0){var l=t[0]+a*r;l>=n.min.x&&l<=n.max.x&&(!i||a<(n.min.x-t[0])/r)&&(i=[l,o>0?n.min.y:n.max.y])}return i},this._cutLineToPoly=function(t){for(var e,n=t.coordinates(null).map(function(t){return[t.x,t.y]}),i=0;i<n.length;i+=1){var r=n[i][0],o=n[i][1];i||(e={min:{x:r,y:o},max:{x:r,y:o}}),r<e.min.x&&(e.min.x=r),o<e.min.y&&(e.min.y=o),r>e.max.x&&(e.max.x=r),o>e.max.y&&(e.max.y=o)}for(var a=_.toPolygonList(),s=0;s<a.length;s+=1)for(var l=0;l<a[s].length;l+=1)for(var u=0;u<a[s][l].length;u+=1){var c=a[s][l][u][0],h=a[s][l][u][1];c<e.min.x&&(e.min.x=c),h<e.min.y&&(e.min.y=h),c>e.max.x&&(e.max.x=c),h>e.max.y&&(e.max.y=h)}if(_.annotations().forEach(function(t){if(t instanceof p)for(var n=t.coordinates(null),i=0;i<n.length;i+=1){var r=n[i].x,o=n[i].y;r<e.min.x&&(e.min.x=r),o<e.min.y&&(e.min.y=o),r>e.max.x&&(e.max.x=r),o>e.max.y&&(e.max.y=o)}}),void 0===e||e.min.x===e.max.x||e.min.y===e.max.y)return[];e={min:{x:e.min.x-.01*(e.max.x-e.min.x),y:e.min.y-.01*(e.max.y-e.min.y)},max:{x:e.max.x+.01*(e.max.x-e.min.x),y:e.max.y+.01*(e.max.y-e.min.y)}},n[0]=_._extendLine(n[0],n[1],e),n[n.length-1]=_._extendLine(n[n.length-1],n[n.length-2],e);for(var d=n.slice(),f=[[e.min.x,e.min.y],[e.max.x,e.min.y],[e.max.x,e.max.y],[e.min.x,e.max.y]],m=d.length-1,g=d[m][0]===e.min.x?0:d[m][1]===e.min.y?1:d[m][0]===e.max.x?2:3,y=d[0][0]===e.min.x?0:d[0][1]===e.min.y?1:d[0][0]===e.max.x?2:3,v=g;v%4!==y;v+=1)d.push(f[v%4]);return[[d]]},this.cutOperation=function(t){var e,n;e=t instanceof p?this._cutLineToPoly(t):t.toPolygonList();var r=_.annotations(),o={poly2:e,correspond:{},keepAnnotations:"exact",style:{fromPolygonList:function(t,e){n=t}}};o.poly1=_.toPolygonList(o),x.polyops.difference(o),x.polyops.intersect(_,e,{correspond:{},keepAnnotations:"exact",style:_});var a=(o.annotationIndices||{})[_.id()],s=o.correspond.poly1,l=o.correspond.exact1;n.forEach(function(t,e){for(var n,o={vertices:1===(t=t.map(function(t){return t.map(function(t){return{x:t[0],y:t[1]}})})).length?t[0]:{outer:t[0],inner:t.slice(1)}},c=function(){if(s[h]&&s[h].indexOf(e)>=0){var t=r[a[h]];return l[h]&&l[h].indexOf(e)>=0?(_.addAnnotation(t,_.map().gcs(),!1),{v:void 0}):(["name","description","label"].forEach(function(e){t[e](void 0,!0)&&(o[e]=t[e](void 0,!0))}),Object.entries(t.options()).forEach(function(t){var e=i(t,2),n=e[0],r=e[1];(["showLabel","style"].indexOf(n)>=0||n.endsWith("Style"))&&(o[n]=r)}),_.addAnnotation(u.createAnnotation("polygon",o),_.map().gcs(),!1),{v:void 0})}},h=0;h<s.length;h+=1)if(n=c())return n.v;_.addAnnotation(u.createAnnotation("polygon",o),_.map().gcs(),!1)})},this._updateFromEvent=function(t){switch(t){case"remove":_.removeAnnotation(_.currentAnnotation,!1),_.mode(null);break;case"done":_._handleBooleanOperation(),_.mode(null)}t&&(_.modified(),_.draw())},this._handleMouseMoveModifiers=function(t){var e=_.currentAnnotation.options("allowBooleanOperations");if(_.mode()!==_.modes.edit&&e&&(_.currentAnnotation._coordinates().length<2||_.mode()===_.modes.cursor)&&t.modifiers){var n=(t.modifiers.shift?"s":"")+(t.modifiers.ctrl?"c":"")+(t.modifiers.meta||t.modifiers.alt?"a":"");if(""===n&&!_._currentBooleanClass)return;var i=Object.keys(_._booleanClasses).find(function(t){return _._booleanClasses[t].includes(n)&&(!0===e||e.includes(t))});if(_._currentBooleanClass===i)return;_._currentBooleanClass=i;var r=_.map().node();Object.keys(_._booleanClasses).forEach(function(t){r.toggleClass(t,i===t)})}},this._handleMouseMove=function(t){_.mode()&&_.currentAnnotation&&(_._handleMouseMoveModifiers(t),_.currentAnnotation.mouseMove(t)&&(_.modified(),_.draw()))},this._selectEditHandle=function(t,e){if(t.data&&t.data.editHandle){if(h.each(k[s._editHandleFeatureLevel],function(t,e){e.feature.modified()}),_.currentAnnotation.selectEditHandle(t.data,e),_.draw(),_.map().node().toggleClass("annotation-input",!!e),_.map().interactor().removeAction(void 0,void 0,s.actionOwner),e){var n=_.currentAnnotation.actions(s.state.edit);h.each(n,function(t,e){_.map().interactor().addAction(e)})}return _}},this._handleMouseOn=function(t){t.data&&t.data.annotation&&(_.mode()===_.modes.edit&&_.currentAnnotation?_._selectEditHandle(t,!0):_.mode()||_.currentAnnotation||!_.options("clickToEdit")||(t.data.annotation.state(s.state.highlight),_.modified(),_.draw()))},this._handleMouseOff=function(t){t.data&&t.data.annotation&&(_.mode()===_.modes.edit&&t.data.editHandle&&t.data.selected?_._selectEditHandle(t,!1):t.data.annotation.state()===s.state.highlight&&(t.data.annotation.state(s.state.done),_.modified(),_.draw()))},this._handleMouseClick=function(t){var e,n=!1;if(_.mode()===_.modes.edit){if(_.map().interactor().hasAction(void 0,void 0,s.actionOwner))return e=_.currentAnnotation.mouseClickEdit(t),void _._updateFromEvent(e);_.mode(null),_.draw(),h.each(k,function(t,e){h.each(e,function(t,e){e.feature._clearSelectedFeatures()})}),n=!0}else if(_.mode()&&_.currentAnnotation)_._handleMouseMoveModifiers(t),e=_.currentAnnotation.mouseClick(t),_._updateFromEvent(e),n=!_.mode(),_.mode()===_.modes.cursor&&_.geoTrigger(l.annotation.cursor_click,{annotation:_.currentAnnotation,operation:_.currentBooleanOperation(),evt:t});else if(!_.mode()&&!_.currentAnnotation&&_.options("clickToEdit")){var i=_.annotations().filter(function(t){return t.state()===s.state.highlight});if(1!==i.length)return;_.mode(_.modes.edit,i[0]),_.draw(),n=!0}n&&_.map().interactor().retriggerMouseMove()},this.options=function(t,n){return void 0===t?e:"string"==typeof t&&void 0===n?e[t]:(void 0===n?e=x.deepMerge(e,t):e[t]=n,_.modified(),_)},this.displayDistance=function(t,e,n,i){var r=_.map();return"display"!==e&&(e=null===e?r.gcs():void 0===e?r.ingcs():e,t=r.gcsToDisplay(t,e)),"display"!==i&&(i=null===i?r.gcs():void 0===i?r.ingcs():i,n=r.gcsToDisplay(n,i)),Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))},this.addAnnotation=function(t,e,n,i){if(void 0===C[t.id()]){for(;_.annotationById(t.id());)t.newId();!1!==i&&_.geoTrigger(l.annotation.add_before,{annotation:t}),S.push(t),C[t.id()]=t,t.layer(_);var r=_.map();(e=null===e?r.gcs():void 0===e?r.ingcs():e)!==r.gcs()&&t._convertCoordinates(e,r.gcs()),!1!==n&&(_.modified(),_.draw()),!1!==i&&_.geoTrigger(l.annotation.add,{annotation:t})}return _},this.addMultipleAnnotations=function(t,e,n){var i=[];_.geoTrigger(l.annotation.add_before,{annotations:t});for(var r=0;r<t.length;r+=1){var o=t[r];void 0===C[o.id()]&&(this.addAnnotation(o,e,n,!1),i.push(o))}return i.length&&_.geoTrigger(l.annotation.add,{annotations:i}),_},this.removeAnnotation=function(t,e,n,i){return!(!t.id||void 0===C[t.id()])&&(n=S.indexOf(t),t===_.currentAnnotation&&(_.currentAnnotation=null),void 0!==C[t.id()]&&delete C[t.id()],t._exit(),S.splice(n,1),!1!==e&&(_.modified(),_.draw()),!1!==i&&_.geoTrigger(l.annotation.remove,{annotation:t}),!0)},this.removeAllAnnotations=function(t,e,n){for(var i,r=0,o=S.length-1;o>=0;o-=1)i=S[o],t&&i.state()===s.state.create||(_.removeAnnotation(i,!1,o,n),r+=1);return r&&!1!==e&&(_.modified(),_.draw()),r},this.annotations=function(){return S.slice()},this.annotationById=function(t){return null!=t&&(t=+t),C[t]},this.modes={edit:"edit",cursor:"cursor"},this._booleanClasses={"annotation-union":["s"],"annotation-intersect":["sc"],"annotation-difference":["c"],"annotation-xor":["sa"],"annotation-cut":["c","ca"]},this.mode=function(t,e,n,i){if(void 0===t)return T;if(t!==T||(t===_.modes.edit||t===_.modes.cursor)&&e!==_.editAnnotation||t!==_.modes.edit&&t!==_.modes.cursor&&t&&!_.currentAnnotation){var r,o,a,c,f=_.map().node(),p=T;if(T=t,f.toggleClass("annotation-input",!(!T||T===_.modes.edit||T===_.modes.cursor)),T&&T!==_.modes.edit||(Object.keys(_._booleanClasses).forEach(function(t){return f.toggleClass(t,!1)}),_._currentBooleanClass=void 0),g||(g=d(f[0])),T?g.bind("esc",function(){_.mode(null,void 0,void 0,"escape")}):g.unbind("esc"),_.currentAnnotation){switch(a=_.currentAnnotation.state(),c=_.currentAnnotation._copyOfCoordinates(),_.currentAnnotation.state()){case s.state.create:_.removeAnnotation(_.currentAnnotation);break;case s.state.edit:_.currentAnnotation.state(s.state.done),_.modified(),_.draw();break;case s.state.cursor:_.currentAnnotation.state(s.state.done),_.modified(),_.draw(),_.map().node().toggleClass("annotation-cursor",!1)}_.currentAnnotation=null}T===_.modes.edit?(_.currentAnnotation=e,_.currentAnnotation.state(s.state.edit),_.modified()):T===_.modes.cursor?(_.currentAnnotation=e,_.currentAnnotation.state(s.state.cursor),_.modified(),_.map().node().toggleClass("annotation-cursor",!0),o=_.currentAnnotation.actions(s.state.cursor)):u.registries.annotations[T]&&(r=u.registries.annotations[T].func),_.map().interactor().removeAction(void 0,void 0,s.actionOwner),r&&(n=Object.assign({},n||{},{state:s.state.create,layer:_}),_.currentAnnotation=r(n),_.addAnnotation(_.currentAnnotation,null),o=_.currentAnnotation.actions(s.state.create)),o&&h.each(o,function(t,e){_.map().interactor().addAction(e)}),_.geoTrigger(l.annotation.mode,{mode:T,oldMode:p,oldState:a,oldCoordinates:c,reason:i}),p!==_.modes.edit&&p!==_.modes.cursor||_.modified()}return _},this.geojson=function(t,e,i,r){if(void 0!==t){var o=u.createFileReader("geojsonReader",{layer:_,lineStyle:n(2612).defaults.style,pointStyle:n(400).defaults.style,polygonStyle:n(1920).defaults.style});if(!o.canRead(t))return;return!0===e&&_.removeAllAnnotations(!0,!1),"update"===e&&h.each(_.annotations(),function(t,e){e.options("updated",!1)}),o.read(t,function(t){h.each(t.slice(),function(t,e){_._geojsonFeatureToAnnotation(e,i),_.deleteFeature(e)})}),"update"===e&&h.each(_.annotations(),function(t,e){!1===e.options("updated")&&e.state()===s.state.done&&_.removeAnnotation(e,!1)}),_.modified(),_.draw(),S.length}t=null;var a=[];return h.each(S,function(t,e){var n=e.geojson(i,r);n&&a.push(n)}),a.length&&(t={type:"FeatureCollection",features:a}),t},this._geojsonFeatureToAnnotation=function(t,e){var n=t.data(),i=u.listAnnotations(),r=_.map();e=null===e?r.gcs():void 0===e?r.ingcs():e,h.each(n,function(n,o){var a,d,f,p,m=(o.properties||{}).annotationType||t.featureType,g=Object.assign({},o.properties||{});if(i.includes(m)){switch(g.style=g.style||{},g.labelStyle=g.labelStyle||{},delete g.annotationType,t.featureType){case"line":if(!(a=t.line()(o,n))||a.length<2)return;a=a.slice();break;case"polygon":if(!(a=t.polygon()(o,n))||!a.outer||a.outer.length<3)return;if((a={outer:a.outer.slice(),inner:(a.inner||[]).map(function(t){return t.slice()})}).outer[a.outer.length-1][0]===a.outer[0][0]&&a.outer[a.outer.length-1][1]===a.outer[0][1]&&(a.outer.splice(a.outer.length-1,1),a.outer.length<3))return;a.inner.forEach(function(t){t.length>3&&t[t.length-1][0]===t[0][0]&&t[t.length-1][1]===t[0][1]&&t.splice(t.length-1,1)}),a.inner&&a.inner.length||(a=a.outer);break;case"marker":a=o.geometry.coordinates[0].slice(0,4);break;case"point":a=[t.position()(o,n)]}d=o.crs&&"name"===o.crs.type&&o.crs.properties&&"proj4"===o.crs.properties.type&&o.crs.properties.name?o.crs.properties.name:e,[a.outer||a].concat(a.inner||[]).forEach(function(t){for(f=0;f<t.length;f+=1)t[f]=x.normalizeCoordinates(t[f]);if(d!==r.gcs()){var e=c.transformCoordinates(d,r.gcs(),t);for(f=0;f<t.length;f+=1)t[f]=e[f]}}),g.coordinates=a,h.each(P,function(e,i){var r;h.each(i.keys,function(t,e){void 0===r&&(r=_.validateAttribute(g[e],i.dataType))}),void 0===r&&(r=_.validateAttribute(t.style.get(e)(o,n),i.dataType)),void 0!==r&&(g[i.option||"style"][e]=r)}),h.each(P,function(t,e){h.each(e.keys,function(t,e){delete g[e]})}),void 0!==g.annotationId&&(p=_.annotationById(g.annotationId))&&delete g.annotationId,p&&p.type()===m&&p.state()===s.state.done&&!1===p.options("updated")?(delete g.state,delete g.layer,g.updated=!0,p.options(g),_.geoTrigger(l.annotation.update,{annotation:p})):(g.state=s.state.done,g.layer=_,g.updated="new",_.addAnnotation(u.createAnnotation(m,g),null))}})},this.validateAttribute=function(t,e){var n;if(null!=t){switch(e){case"angle":if(""===t)break;if(!(n=/^\s*([-.0-9eE]+)\s*(deg|rad|grad|turn)?\s*$/.exec((""+t).toLowerCase()))||!isFinite(n[1]))return;var i="grad"===n[2]?Math.PI/200:"deg"===n[2]?Math.PI/180:"turn"===n[2]?2*Math.PI:1;t=+n[1]*i;break;case"boolean":t=!!t&&["false","no","off"].indexOf((""+t).toLowerCase())<0;break;case"booleanOrNumber":if(!t&&0!==t&&""!==t||["true","false","off","on","no","yes"].indexOf((""+t).toLowerCase())>=0)t=!!t&&["false","no","off"].indexOf((""+t).toLowerCase())<0;else{if(!x.isNonNullFinite(t))return;t=+t}break;case"coordinate2":if(""===t)break;if(t&&x.isNonNullFinite(t.x)&&x.isNonNullFinite(t.y)){t.x=+t.x,t.y=+t.y;break}try{t=JSON.parse(t)}catch(t){}if(t&&x.isNonNullFinite(t.x)&&x.isNonNullFinite(t.y)){t.x=+t.x,t.y=+t.y;break}if(Array.isArray(t)&&x.isNonNullFinite(t[0])&&x.isNonNullFinite(t[1])){t={x:+t[0],y:+t[1]};break}if(!(n=/^\s*([-.0-9eE]+)(?:\s+|\s*,)\s*([-.0-9eE]+)\s*$/.exec(""+t))||!isFinite(n[1])||!isFinite(n[2]))return;t={x:+n[1],y:+n[2]};break;case"color":if(void 0===(t=x.convertColor(t))||void 0===t.r)return;break;case"number":if(!x.isNonNullFinite(t))return;t=+t;break;case"numberOrBlank":if(""===t)break;if(!x.isNonNullFinite(t))return;t=+t;break;case"opacity":if(""===t)return;if(t=+t,isNaN(t)||t<0||t>1)return;break;case"positive":if(t=+t,!isFinite(t)||t<=0)return;break;case"text":t=""+t}return t}},this._update=function(){if(_.timestamp()>E.timestamp()){var t=_.options("showLabels")?[]:null,e=_.options("clickToEdit")||_.mode()===_.modes.edit;h.each(k,function(t,e){h.each(e,function(t,e){e.data=[],delete e.feature.scaleOnZoom})}),h.each(S,function(n,i){var r=i.features();if(t){var o=i.labelRecord();o&&t.push(o)}h.each(r,function(t,n){void 0===k[t]&&(k[t]={}),h.each(n,function(n,r){if(k[t][n])(o=k[t][n].feature).selectionAPI()!==!!e&&(o.selectionAPI(e),e?(o.geoOn(l.feature.mouseon,_._handleMouseOn),o.geoOn(l.feature.mouseoff,_._handleMouseOff)):(o.geoOff(l.feature.mouseon,_._handleMouseOn),o.geoOff(l.feature.mouseoff,_._handleMouseOff)));else{var o=_.createFeature(n,{gcs:_.map().gcs(),selectionAPI:e});if(!o){var a="error_feature_"+n;return void(_[a]||(console.warn("Cannot create a "+n+" feature for annotations."),_[a]=!0))}e&&(o.geoOn(l.feature.mouseon,_._handleMouseOn),o.geoOn(l.feature.mouseoff,_._handleMouseOff));var s={};h.each(["closed","fill","fillColor","fillOpacity","line","lineCap","lineJoin","polygon","position","radius","radiusIncludesStroke","rotateWithMap","rotation","scaleWithZoom","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth","symbolValue","uniformPolygon"],function(t,e){var n;void 0!==o.style()[e]&&(n=o.style.get(e)),s[e]=function(t,i,r,o){var a=t&&t.style?t.style:t&&t[2]&&t[2].style?t[2].style:r.style,s=a?a[e]:t;return x.isFunction(s)&&(s=s(t,i,r,o)),void 0===s&&n&&(s=n(t,i,r,o)),s}}),o.style(s),k[t][n]={feature:o,style:s,data:[]}}var u=r.data||r;Array.isArray(u)||(u=[u]),u.forEach(function(e){e.annotation=i,k[t][n].data.push(e),r.scaleOnZoom&&(k[t][n].feature.scaleOnZoom=!0)})})})}),h.each(k,function(t,e){h.each(e,function(t,e){e.feature.data(e.data)})}),_._updateLabels(t),E.modified()}return A.call(_,arguments),_},this._updateLabels=function(t){if(!t||!t.length)return _._removeLabelFeature(),_;if(!r){if(!(u.registries.features[_.rendererName()]||{}).text){var e=u.rendererForFeatures(["text"]);o=u.createLayer("feature",_.map(),{renderer:e}),_.addChild(o),o._update(),_.geoTrigger(l.layerAdd,{target:_,layer:o})}var n={};f.usedStyles.forEach(function(t){n[t]=function(e,n){return e.style&&void 0!==e.style[t]?e.style[t]:(_.options("defaultLabelStyle")||{})[t]}}),r=(o||_).createFeature("text",{style:n,gcs:_.map().gcs(),position:function(t){return t.position}})}return r.data(t),_},this._handleZoom=function(){var t,e=_.features();for(t=0;t<e.length;t+=1)e[t].scaleOnZoom&&e[t].modified()},this._removeLabelFeature=function(){return o&&(o._exit(),_.removeChild(o),_.geoTrigger(l.layerRemove,{target:_,layer:o}),o=r=null),r&&(_.removeFeature(r),r=null),_},this.draw=function(){return _._update(),M.call(_),_},this.toPolygonList=function(t){var e=[],n=[];return(t=t||{}).annotationIndices||(t.annotationIndices={}),t.annotationIndices[_.id()]=n,S.forEach(function(i,r){i.toPolygonList&&(i.toPolygonList(t).forEach(function(t){return e.push(t)}),n.push(r))}),e},this.fromPolygonList=function(t,e){if(!t||!t.length)return _;var n,r,o,a=e.keepAnnotations,s={},l={},c=(e.annotationIndices||{})[_.id()];c&&e.correspond&&e.correspond.poly1&&c.length===e.correspond.poly1.length&&(n=e.correspond.poly1,r=e.correspond.exact1,o=_.annotations()),"all"!==a&&"none"!==a&&o&&o.forEach(function(t,e){c.indexOf(e)<0&&(s[t.id()]=!0)});var h=[];t.forEach(function(t,e){var u={vertices:1===(t=t.map(function(t){return t.map(function(t){return{x:t[0],y:t[1]}})})).length?t[0]:{outer:t[0],inner:t.slice(1)}};if(n)for(var d,f=function(){if(n[p]&&n[p].indexOf(e)>=0){var t=o[c[p]];return"all"!==a&&"none"!==a&&r&&r[p]&&r[p].indexOf(e)>=0?(s[t.id()]=!0,{v:void 0}):("all"!==a&&void 0===l[t.id()]&&(u.annotationId=t.id(),l[t.id()]=!0),["name","description","label"].forEach(function(e){t[e](void 0,!0)&&(u[e]=t[e](void 0,!0))}),Object.entries(t.options()).forEach(function(t){var e=i(t,2),n=e[0],r=e[1];(["showLabel","style"].indexOf(n)>=0||n.endsWith("Style"))&&(u[n]=r)}),0)}},p=0;p<n.length&&0!==(d=f());p+=1)if(d)return d.v;h.push(u)});var d=!1;return"all"!==a&&o&&o.filter(function(t){return void 0===s[t.id()]}).forEach(function(t){_.removeAnnotation(t,!1),d=!0}),h.forEach(function(t){_.addAnnotation(u.createAnnotation("polygon",t),_.map().gcs(),!1),d=!0}),d&&(_.modified(),_.draw()),_},this._init=function(){return b.call(_),_.map().interactor()||_.map().interactor(y({actions:[]})),_.geoOn(l.actionselection,_._processAction),_.geoOn(l.actionmove,_._processAction),_.geoOn(l.actionup,_._processAction),_.geoOn(l.mouseclick,_._handleMouseClick),_.geoOn(l.mousemove,_._handleMouseMove),_.geoOn(l.zoom,_._handleZoom),_},this._exit=function(){return g&&g.reset(),_._removeLabelFeature(),w.call(_),S=[],C={},k=[],_},_};o(m,a),u.registerLayer("annotation",m),t.exports=m},3578:function(t,e,n){var i=n(4626),r=n(1338),o=n(642),a=n(3638),s=n(1982),l=n(3503),u=n(4663),c=function(t){if(!(this instanceof c))return new c(t);var e=n(6409);return t=t||{},r.call(this,t),this._view=o.mat4AsArray(),this._proj=o.mat4AsArray(),this._projection=null,this._transform=o.mat4AsArray(),this._inverse=o.mat4AsArray(),this._bounds=null,this._display=null,this._world=null,this._viewport={width:1,height:1},this._createProj=function(){var t="perspective"===this._projection?l.frustum:l.ortho,e=this._clipbounds[this._projection];t(this._proj,e.left,e.right,e.bottom,e.top,e.near,e.far)},this._update=function(){this._bounds=null,this._display=null,this._world=null,this._transform=l.multiply(o.mat4AsArray(),this._proj,this._view),l.invert(this._inverse,this._transform),this.geoTrigger(e.camera.view,{camera:this})},Object.defineProperty(this,"view",{get:function(){return this._view},set:function(t){l.copy(this._view,t),this._update()},configurable:!0}),Object.defineProperty(this,"bounds",{get:function(){return null===this._bounds&&(this._bounds=this._getBounds()),this._bounds},set:function(t){this._setBounds(t),this._update()}}),Object.defineProperty(this,"clipbounds",{get:function(){return this._clipbounds[this._projection]},set:function(t){var e=this._clipbounds[this._projection];if((t={left:void 0===t.left?e.left:t.left,right:void 0===t.right?e.right:t.right,top:void 0===t.top?e.top:t.top,bottom:void 0===t.bottom?e.bottom:t.bottom,near:void 0===t.near?e.near:t.near,far:void 0===t.far?e.far:t.far}).left===t.right)throw new Error("Left and right values must be different");if(t.top===t.bottom)throw new Error("Top and bottom values must be different");if(t.near===t.far)throw new Error("Near and far values must be different");this._clipbounds[this._projection]=t,this._createProj(),this._update()}}),Object.defineProperty(this,"display",{get:function(){if(null===this._display){var t=this._clipbounds[this._projection],e=o.mat4AsArray();l.translate(e,e,[this.viewport.width/2,this.viewport.height/2,0]),l.scale(e,e,[this.viewport.width/(t.right-t.left),this.viewport.height/(t.bottom-t.top),1]),l.translate(e,e,[-(t.left+t.right)/2,-(t.top+t.bottom)/2,0]),l.multiply(e,e,this._transform),this._display=e}return this._display}}),Object.defineProperty(this,"world",{get:function(){return null===this._world&&(this._world=l.invert(o.mat4AsArray(),this.display)),this._world}}),Object.defineProperty(this,"projection",{get:function(){return this._projection},set:function(t){if(!this.constructor.projection[t])throw new Error("Unsupported projection type: "+t);t!==this._projection&&(this._projection=t,this._createProj(),this._update(),this.geoTrigger(e.camera.projection,{camera:this,projection:t}))}}),Object.defineProperty(this,"projectionMatrix",{get:function(){return this._proj}}),Object.defineProperty(this,"transform",{get:function(){return this._transform}}),Object.defineProperty(this,"inverse",{get:function(){return this._inverse}}),Object.defineProperty(this,"viewport",{get:function(){return{width:this._viewport.width,height:this._viewport.height,left:this._viewport.left,top:this._viewport.top}},set:function(t){if(!(t.width>0&&t.height>0))throw new Error("Invalid viewport dimensions");t.width===this._viewport.width&&t.height===this._viewport.height||(this._viewport.width&&this._viewport.height&&(this._scale([this._viewport.width/t.width,this._viewport.height/t.height,1]),this._translate([(t.width-this._viewport.width)/2,(t.height-this._viewport.height)/2,0])),this._viewport={width:t.width,height:t.height,left:t.left,top:t.top},this._update(),this.geoTrigger(e.camera.viewport,{camera:this,viewport:this.viewport}))}}),this._resetView=function(){return l.identity(this._view),this},this._translate=function(t){return l.translate(this._view,this._view,t),this},this._scale=function(t){return l.scale(this._view,this._view,t),this},this._worldToClip4=function(t){return u.transformMat4(t,t,this._transform)},this._clipToWorld4=function(t){return u.transformMat4(t,t,this._inverse)},this.applyProjection=function(t){var e;return"perspective"===this._projection?(e=1/(t[3]||1),t[0]=e*t[0],t[1]=e*t[1],t[2]=e*t[2],t[3]=e):t[3]=1,t},this.unapplyProjection=function(t){var e;return"perspective"===this._projection?(e=t[3]||1,t[0]=e*t[0],t[1]=e*t[1],t[2]=e*t[2],t[3]=e):t[3]=1,t},this.worldToDisplay4=function(t){return t=[t[0],t[1],t[2]||0,t[3]||1],(t=u.transformMat4(t,t,this.display))[3]&&1!==t[3]&&(t=[t[0]/t[3],t[1]/t[3],t[2]/t[3],1]),t},this.displayToWorld4=function(t){return t=[t[0],t[1],t[2]||0,t[3]||1],(t=u.transformMat4(t,t,this.world))[3]&&1!==t[3]&&(t=[t[0]/t[3],t[1]/t[3],t[2]/t[3],1]),t},this.worldToDisplay=function(t){var e=this._clipbounds[this._projection];return{x:(t=this.worldToDisplay4([t.x,t.y,-e.near]))[0],y:t[1]}},this.displayToWorld=function(t){return{x:(t=this.displayToWorld4([t.x,t.y,-1]))[0],y:t[1]}},this._getBounds=function(){var t,e,n,i,r={};return t=this.displayToWorld({x:0,y:0}),e=this.displayToWorld({x:this._viewport.width,y:0}),n=this.displayToWorld({x:0,y:this._viewport.height}),i=this.displayToWorld({x:this._viewport.width,y:this._viewport.height}),r.left=Math.min(t.x,e.x,n.x,i.x),r.bottom=Math.min(t.y,e.y,n.y,i.y),r.right=Math.max(t.x,e.x,n.x,i.x),r.top=Math.max(t.y,e.y,n.y,i.y),r},this._setBounds=function(t){var e={width:t.right-t.left,height:t.top-t.bottom},n={x:(t.left+t.right)/2,y:(t.bottom+t.top)/2};return this._viewFromCenterSizeRotation(n,e,0),this},this._viewFromCenterSizeRotation=function(t,e,n){var i,r,a,s=o.vec3AsArray(),l=o.vec3AsArray();return this._resetView(),(r=Math.abs(e.width))/(a=Math.abs(e.height))>=(i=this._viewport.width/this._viewport.height)?(a=r/i,l[0]=2/r,l[1]=2/a):(r=a*i,l[0]=2/r,l[1]=2/a),l[2]=1,this._scale(l),n&&this._rotate(n),s[0]=-t.x,s[1]=-t.y,s[2]=0,this._translate(s),this},this.viewFromCenterSizeRotation=function(t,e,n){return this._viewFromCenterSizeRotation(t,e,n),this._update(),this},this.pan=function(t){return t.x||t.y||t.z?(this._translate([t.x,t.y,t.z||0]),this._update(),this):this},this.zoom=function(t){return 1===t||(l.scale(this._view,this._view,[t,t,t]),this._update()),this},this._rotate=function(t,e,n){if(!t)return this;n=n||[0,0,-1],e?void 0!==e.x&&(e=[e.x||0,e.y||0,e.z||0]):e=[0,0,0];var i=[-e[0],-e[1],-e[2]];return l.translate(this._view,this._view,e),l.rotate(this._view,this._view,t,n),l.translate(this._view,this._view,i),this},this.css=function(t){var e;switch((t||"").toLowerCase()){case"display":case"":e=this.display;break;case"world":e=this.world;break;default:throw new Error("Unknown transform "+t)}return c.css(e)},this.ppMatrix=function(t,e){var n=t;function i(t){var i=n[t],r=i.toExponential(e);return i>=0&&(r=" "+r),r}return e=e||2,[[i(0),i(4),i(8),i(12)].join(" "),[i(1),i(5),i(9),i(13)].join(" "),[i(2),i(6),i(10),i(14)].join(" "),[i(3),i(7),i(11),i(15)].join(" ")].join("\n")},this.toString=function(){return this.ppMatrix(this._transform)},this.debug=function(){return["bounds",JSON.stringify(this.bounds),"view:",this.ppMatrix(this._view),"projection:",this.ppMatrix(this._proj),"transform:",this.ppMatrix(this._transform)].join("\n")},this.valueOf=function(){return this._transform},this._clipbounds=this.constructor.clipbounds,this._resetView(),this.projection=t.projection||"parallel",t.viewport&&(this.viewport=t.viewport),this._update(),this};c.projection={perspective:!0,parallel:!0},c.clipbounds={perspective:{left:-1,right:1,top:1,bottom:-1,far:2e3,near:.01},parallel:{left:-1,right:1,top:1,bottom:-1,far:-1,near:1}},c.css=function(t){return"matrix3d("+t.map(function(t){return(t=(+t).toPrecision(15)).indexOf("e")>=0?t=(+t).toString():t.indexOf(".")>=0&&(t=t.replace(/(\.|)0+$/,"")),t}).join(",")+")"},c.vec3=s,c.mat3=a,c.vec4=u,c.mat4=l,i(c,r),t.exports=c},1103:function(t,e,n){var i,r=n(4626),o=n(1098).registerRenderer,a=n(2274),s=function(t){"use strict";var e=n(5616);if(!(this instanceof s))return new s(t);t=t||{},a.call(this,t);var i=this,r=!0,o=this._init,l=this._exit;return this.clearCanvas=function(t){r=t},this.api=function(){return s.apiname},this._init=function(){if(i.initialized())return i;o.call(i);var n=t.canvas||e(document.createElement("canvas"));i.context2d=n[0].getContext("2d"),n.addClass("canvas-canvas"),e(i.layer().node().get(0)).append(n),i.canvas(n);var r=i.layer().map().size();return i._resize(0,0,r.width,r.height),i},this._resize=function(t,e,n,r){var o=i.canvas();return parseInt(o.attr("width"),10)===n&&parseInt(o.attr("height"),10)===r||(i._setWidthHeight(n,r),o.attr("width",n),o.attr("height",r),i._render()),i},this._render=function(){return i.layer().map().scheduleAnimationFrame(i._renderFrame),i},this._renderFrame=function(){var t,e=i.layer(),n=e.map(),o=n.size(),a=e.features?e.features():[];for(t=0;t<a.length;t+=1)if(a[t]._delayRender())return void i._render();for(r&&(i.context2d.setTransform(1,0,0,1,0,0),i.context2d.clearRect(0,0,o.width,o.height)),t=0;t<a.length;t+=1)a[t].visible()&&a[t]._renderOnCanvas(i.context2d,n)},this._exit=function(){i.canvas().remove(),l()},this};s.apiname="canvas",r(s,a),o("canvas",s),s.supported=function(){if(void 0===i){var t;try{t=document.createElement("canvas"),i=!(!t.getContext||!t.getContext("2d"))}catch(t){i=!1}t=void 0}return i},s.fallback=function(){return null},t.exports=s},9142:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(9163),a=n(77),s=n(642),l=function(t){"use strict";if(!(this instanceof l))return new l(t);o.call(this,t),n(5895).call(this);var e,i,r,u,c,h,d=n(6409),f=this,p=this._init,m=this._update,g=a();return this._computeGradient=function(){var t,e,n,i,r;if(r=f.style("color"),!f._grad||f._gradColors!==r){for(e in i=(n=(t=document.createElement("canvas")).getContext("2d")).createLinearGradient(0,0,0,256),t.width=1,t.height=256,r)i.addColorStop(e,s.convertColorToRGBA(r[e]));n.fillStyle=i,n.fillRect(0,0,1,256),f._grad=n.getImageData(0,0,1,256).data,f._gradColors=r}return f},this._createCircle=function(){var t,e,n,i,r,o,a;if(n=f.style("radius"),r=f.style("blurRadius"),o=f.style("gaussian"),a=f.style("scaleWithZoom")){var s=this.layer().map().zoom();n*=a=Math.pow(2,s),r*=a}if(!f._circle||f._circle.gaussian!==o||f._circle.radius!==n||f._circle.blurRadius!==r){if(e=(t=f._circle=document.createElement("canvas")).getContext("2d"),i=r+n,t.width=t.height=2*i,o){var l=e.createRadialGradient(i,i,0,i,i,i);l.addColorStop(0,"rgba(255,255,255,1)"),l.addColorStop(.1,"rgba(255,255,255,0.946)"),l.addColorStop(.2,"rgba(255,255,255,0.801)"),l.addColorStop(.3,"rgba(255,255,255,0.607)"),l.addColorStop(.4,"rgba(255,255,255,0.411)"),l.addColorStop(.5,"rgba(255,255,255,0.249)"),l.addColorStop(.6,"rgba(255,255,255,0.135)"),l.addColorStop(.7,"rgba(255,255,255,0.066)"),l.addColorStop(.8,"rgba(255,255,255,0.029)"),l.addColorStop(.9,"rgba(255,255,255,0.011)"),l.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=l,e.fillRect(0,0,2*i,2*i)}else e.shadowOffsetX=e.shadowOffsetY=2*i,e.shadowBlur=r,e.shadowColor="black",e.beginPath(),e.arc(-i,-i,n,0,2*Math.PI,!0),e.closePath(),e.fill();t.radius=n,t.blurRadius=r,t.gaussian=o,f._circle=t}return f},this._colorize=function(t,n){var o,a,s,l=new Uint32Array(n.buffer),u=t.length;for(e&&e.length===u||(e=new ArrayBuffer(u),i=new Uint8ClampedArray(e),r=new Uint32Array(e)),o=3,s=0;o<u;o+=4,s+=1)(a=t[o])&&(r[s]=l[a]);t.set(i)},this._renderPoints=function(t,e,n,i){var r,o,a,s=f.gcsPosition(),l=f.intensity(),u=f.minIntensity(),c=f.maxIntensity()-u||1;for(r=n.length-1;r>=0;r-=1)o=e.worldToDisplay(s[r]),(a=(l(n[r],r)-u)/c)<=0||(t.globalAlpha=a<.01?.01:a>1?1:a,t.drawImage(f._circle,o.x-i,o.y-i))},this._renderBinnedData=function(t,e,n,i,r){var o,a,s,l,u,c,h,d,p=f.gcsPosition(),m=f.intensity(),g=f.minIntensity(),y=f.maxIntensity()-g||1,v=e.size(),x=[],_=Math.ceil(i/r),b=Math.ceil(v.width/r)+2*_+2,w=Math.ceil(v.height/r)+2*_+2,M=n.length;for(o=0;o<M;o+=1)a=e.worldToDisplay(p[o]),isNaN(a.x)||isNaN(a.y)||(void 0===h&&(h=(a.x%r+r)%r,d=(a.y%r+r)%r),(l=Math.floor((a.x-h)/r)+_+1)<0||l>=b||(u=Math.floor((a.y-d)/r)+_+1)<0||u>=w||(s=(m(n[o],o)-g)/y)<=0||(s>1&&(s=1),x[u]=x[u]||[],l*=4,(c=x[u])[l]?(c[l]+=s,c[l+1]+=(1-c[l+1])*s,c[l+2]+=a.x*s,c[l+3]+=a.y*s):(c[l]=c[l+1]=s,c[l+2]=a.x*s,c[l+3]=a.y*s)));for(u=x.length-1;u>=0;u-=1)if(c=x[u])for(l=c.length-4;l>=0;l-=4)c[l]&&(s=c[l+1],t.globalAlpha=s<.01?.01:s>1?1:s,t.drawImage(f._circle,c[l+2]/c[l]-i,c[l+3]/c[l]-i))},this._renderOnCanvas=function(t,e){if(g.timestamp()<f.buildTime().timestamp()){var n,i,r=Date.now(),o=f.data()||[],a=f.style("radius")+f.style("blurRadius"),s=f.binned(),l=f.layer(),d=e.size();if(f.style("scaleWithZoom")&&(a*=Math.pow(2,e.zoom())),!0===s||"auto"===s)if(s=Math.max(Math.floor(a/8),Math.max(1.5,Math.min(3,a/2.5))),"auto"===f.binned())Math.ceil((d.width+2*a)/s)*Math.ceil((d.height+2*a)/s)>=o.length&&(s=0);(s<1||isNaN(s))&&(s=!1),f._binned=s,t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,d.width,d.height),c="",a>.5&&a<8192&&(e.scheduleAnimationFrame(f._setTransform,!1),l.canvas().css({transform:""}),f._createCircle(),f._computeGradient(),s?f._renderBinnedData(t,e,o,a,s):f._renderPoints(t,e,o,a),n=l.canvas()[0],i=t.getImageData(0,0,n.width,n.height),f._colorize(i.data,f._grad),t.putImageData(i,0,0)),u={zoom:e.zoom(),gcsOrigin:e.displayToGcs({x:0,y:0},null),rotation:e.rotation(),lastScale:void 0,lastOrigin:{x:0,y:0},lastRotation:void 0},g.modified(),l.renderer().clearCanvas(!1),h=Date.now()-r}return f},this._init=function(){return p.call(f,t),f.geoOn(d.pan,f._animatePan),f},this._update=function(){return m.call(f),(f.buildTime().timestamp()<=f.dataTime().timestamp()||f.updateTime().timestamp()<f.timestamp())&&f._build(),f.updateTime().modified(),f},this._setTransform=function(){f.layer()&&f.layer().canvas()&&f.layer().canvas()[0]&&(f.layer().canvas()[0].style.transform=c)},this._animatePan=function(){if(u){var t=f.layer().map(),e=t.zoom(),n=Math.pow(2,e-u.zoom),i=t.gcsToDisplay(u.gcsOrigin,null),r=t.rotation();if(u.lastScale!==n||u.lastOrigin.x!==i.x||u.lastOrigin.y!==i.y||u.lastRotation!==r){var o=" translate("+i.x+"px,"+i.y+"px) scale("+n+") rotate("+180*(r-u.rotation)/Math.PI+"deg)";if(t.scheduleAnimationFrame(f._setTransform),c=o,u.lastScale=n,u.lastOrigin.x=i.x,u.lastOrigin.y=i.y,u.lastRotation=r,u.timeout&&(window.clearTimeout(u.timeout),u.timeout=void 0),1!==parseFloat(n.toFixed(4))||0!==parseFloat((r-u.rotation).toFixed(4))||0!==parseFloat(i.x.toFixed(1))||0!==parseFloat(i.y.toFixed(1))){var a=f.updateDelay();a=a<0&&h?h-Math.floor(1e3/60*a):h?2*h:100,u.timeout=window.setTimeout(function(){u.timeout=void 0,f.buildTime().modified(),f.layer().draw()},f.updateDelay())}}}},f._init(t),this};i(l,o),r("canvas","heatmap",l),t.exports=l},8074:function(t,e,n){t.exports={canvasRenderer:n(1103),heatmapFeature:n(9142),isolineFeature:n(1195),lineFeature:n(2954),pixelmapFeature:n(5398),quadFeature:n(5578),textFeature:n(2213),tileLayer:n(511),trackFeature:n(1795)}},1195:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(2586),a=function(t){"use strict";return this instanceof a?(t=t||{},o.call(this,t),n(5895).call(this),this._init(t),this):new a(t)};i(a,o),r("canvas","isoline",a),t.exports=a},2954:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(9281),a=function(t){"use strict";if(!(this instanceof a))return new a(t);var e=n(5895);t=t||{},o.call(this,t),e.call(this);var i=this;return this._renderOnCanvas=function(t,e){var n,r,o,a,s,l=i.data(),u=i.position(),c=i.line(),h=i.style.get("strokeWidth"),d=i.style.get("strokeColor"),f=i.style.get("strokeOpacity"),p=i.style.get("lineCap"),m=i.style.get("lineJoin"),g=i.style.get("miterLimit")(l),y=i.style.get("closed"),v={},x={};l.forEach(function(e,l){if(!((r=c(e,l)).length<2)){for(x.closed=y(e,l),x.width=h(r[0],0,e,l),x.color=d(r[0],0,e,l),x.opacity=f(r[0],0,e,l),x.linecap=p(r[0],0,e,l),x.linejoin=m(r[0],0,e,l),x.strokeStyle="rgba("+255*x.color.g+", "+255*x.color.g+", "+255*x.color.b+", "+(void 0!==x.opacity?x.opacity:1)+")",v.strokeStyle===x.strokeStyle&&v.width===x.width&&v.linecap===x.linecap&&v.linejoin===x.linejoin&&v.miterlimit===x.miterlimit||(void 0!==v.strokeStyle&&t.stroke(),t.beginPath(),t.strokeStyle=x.strokeStyle,t.lineWidth=x.width,t.lineCap=x.linecap,t.lineJoin=x.linejoin,t.miterLimit=g),s=0;s<r.length;s+=1)o=i.featureGcsToDisplay(u(r[s],s,e,l)),s?t.lineTo(o.x,o.y):(a=o,t.moveTo(o.x,o.y));x.closed&&t.lineTo(a.x,a.y),n=v,v=x,x=n}}),void 0!==v.strokeStyle&&t.stroke()},this._init(t),this};i(a,o);var s={};s[o.capabilities.basic]=!0,s[o.capabilities.multicolor]=!1,r("canvas","line",a,s),t.exports=a},5895:function(t,e,n){var i=function(t){"use strict";if(!(this instanceof n(1338)))return new i(t);var e=this,r=this.draw,o={};return this._renderOnCanvas=function(){},this._delayRender=function(){return!1},this._canvasProperty=function(t,n,i){return t&&n?(o[n]!==i&&(o[n]=i,t[n]=i),e):(o={},e)},this.draw=function(){return e.ready&&(e._update(),e.renderer()._render(),r()),e},this};t.exports=i},5398:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(7761),a=n(6409),s=n(642),l=function(t){"use strict";if(!(this instanceof l))return new l(t);o.call(this,t),n(5895).call(this);var e,i,r=this._exit,u=this;return this.pointSearch=function(t,n){if(e){var i=e.pointSearch(t,n);if(!u.m_info)return this._pointSearchProcess(i);if(1===i.index.length&&i.extra&&i.extra[i.index[0]].basis){var r,o,a,s=i.extra[i.index[0]].basis;if(r=Math.floor(s.x*u.m_info.width),o=Math.floor(s.y*u.m_info.height),r>=0&&r<u.m_info.width&&o>=0&&o<u.m_info.height)return i={index:[a=u.m_info.indices[o*u.m_info.width+r]],found:[u.data()[a]]}}}return{index:[],found:[]}},this._preparePixelmap=function(t){var e,n,i,r=t||u;if(t&&t.m_info)return t.m_info;if(s.isReadyImage(r.m_srcImage)){for(r.m_info={width:r.m_srcImage.naturalWidth,height:r.m_srcImage.naturalHeight,canvas:document.createElement("canvas")},r.m_info.canvas.width=r.m_info.width,r.m_info.canvas.height=r.m_info.height,r.m_info.context=r.m_info.canvas.getContext("2d"),r.m_info.context.drawImage(r.m_srcImage,0,0),r.m_info.imageData=r.m_info.context.getImageData(0,0,r.m_info.canvas.width,r.m_info.canvas.height),i=r.m_info.imageData.data,r.m_info.indices=new Array(i.length/4),r.m_info.area=i.length/4,r.m_info.mappedColors={},e=0;e<i.length;e+=4)n=i[e]+(i[e+1]<<8)+(i[e+2]<<16),r.m_info.indices[e/4]=n,r.m_info.mappedColors[n]||(r.m_info.mappedColors[n]={first:e/4}),r.m_info.mappedColors[n].last=e/4;return r.m_info}},this._computePixelmap=function(t){var n,r,o,s,l,c,h,d,f,p,m=t||u,g=u.data()||[],y=u.style.get("color"),v=-1;if(i||!e||t||(e._hookRenderImageQuads=function(t){t.forEach(function(t){t.m_srcImage?u.buildTime().timestamp()>t._build&&(u._computePixelmap(t),t.image=t.m_info.context.canvas,t._build=u.buildTime().timestamp()):(t.m_srcImage=t.image,u._computePixelmap(t),t.image=t.m_info.context.canvas,t._build=u.buildTime().timestamp())})},i=!0),!m.m_info){if(u.indexModified(void 0,"clear"),!u._preparePixelmap(t))return;p=!0}for(r in u.indexModified(void 0,"clear"),h=m.m_info.mappedColors,d=m.m_info.area,h)h.hasOwnProperty(r)&&(s=[255*((s=y(g[r],+r)||{}).r||0),255*(s.g||0),255*(s.b||0),void 0===s.a?255:255*s.a],h[r].update=!h[r].color||h[r].color[0]!==s[0]||h[r].color[1]!==s[1]||h[r].color[2]!==s[2]||h[r].color[3]!==s[3],h[r].update&&(h[r].color=s,d=Math.min(h[r].first,d),v=Math.max(h[r].last,v)));if(!(d>=v)){for(l=m.m_info.imageData.data,c=m.m_info.indices,n=d;n<=v;n+=1)(r=c[n])!==o&&(o=r,s=h[r].color,f=h[r].update),f&&(l[4*n]=s[0],l[4*n+1]=s[1],l[4*n+2]=s[2],l[4*n+3]=s[3]);m.m_info.context.putImageData(m.m_info.imageData,0,0,0,Math.floor(d/m.m_info.width),m.m_info.width,Math.ceil((v+1)/m.m_info.width)),t||(e||(e=u.layer().createFeature("quad",{selectionAPI:!1,gcs:u.gcs(),visible:u.visible(void 0,!0)}),u.dependentFeatures([e]),e.style({image:u.m_info.canvas,position:u.style.get("position")}).data([{}]).draw(),i=!0),p&&u.geoTrigger(a.pixelmap.prepared,{pixelmap:u}))}},this._exit=function(){return e&&u.layer()&&(u.layer().deleteFeature(e),e=null,u.dependentFeatures([])),r(),u},t.quadFeature&&(e=t.quadFeature),this._init(t),this};i(l,o);var u={};u[o.capabilities.lookup]=!0,r("canvas","pixelmap",l,u),t.exports=l},5578:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(3842),a=n(642),s=function(t){"use strict";if(!(this instanceof s))return new s(t);o.call(this,t),n(5895).call(this);var e,i=n(5616),r=this,l=this._exit,u=this._init,c=this._update;return this._build=function(){r.position()&&((e=r._generateQuads()).imgQuads&&e.imgQuads.sort(function(t,e){return t.pos[2]-e.pos[2]}),r.buildTime().modified())},this._checkQuadUpdate=function(t,e){r.layer().map().scheduleAnimationFrame(r._checkIfChanged)},this._checkIfChanged=function(){if(e&&e.vidQuads&&e.vidQuads.length){var t=!1,n=!1;i.each(e.vidQuads,function(e,i){i.video&&void 0!==i.video.HAVE_CURRENT_DATA&&(!i.video.seeking&&i.video.readyState>=i.video.HAVE_CURRENT_DATA&&(t=!0),i.video.paused&&!i.video.seeking||(n=!0))}),t&&r.renderer()&&r.renderer()._render(),n&&r.layer().map().scheduleAnimationFrame(r._checkIfChanged)}},this._renderColorQuads=function(t,n){if(e.clrQuads&&e.clrQuads.length){var r=t.globalAlpha,o=r;i.each(e.clrQuads,function(e,i){var r=n.gcsToDisplay({x:i.pos[0],y:i.pos[1]},null),s=n.gcsToDisplay({x:i.pos[3],y:i.pos[4]},null),l=n.gcsToDisplay({x:i.pos[6],y:i.pos[7]},null),u=n.gcsToDisplay({x:i.pos[9],y:i.pos[10]},null);i.opacity!==o&&(o=i.opacity,t.globalAlpha=o),t.fillStyle=a.convertColorToHex(i.color,!0),t.beginPath(),t.moveTo(r.x,r.y),t.lineTo(s.x,s.y),t.lineTo(u.x,u.y),t.lineTo(l.x,l.y),t.closePath(),t.fill()}),o!==r&&(t.globalAlpha=r)}},this._renderImageAndVideoQuads=function(t,n){if(e.imgQuads&&e.imgQuads.length||e.vidQuads&&e.vidQuads.length){var o=t.globalAlpha,s=o,l=r.nearestPixel();if(void 0!==l){if(!0!==l&&a.isNonNullFinite(l))l=r.layer().map().zoom()>=l;t.imageSmoothingEnabled=!l}r._hookRenderImageQuads&&r._hookRenderImageQuads(e.imgQuads),i.each([e.imgQuads,e.vidQuads],function(e,r){r&&i.each(r,function(e,i){var r,o,a;if(i.image)o=(r=i.image).width,a=r.height;else if(i.video&&(o=(r=i.video).videoWidth,a=r.videoHeight,r.seeking))return;if(r&&o&&a&&!(i.opacity<=0)){var l=n.gcsToDisplay({x:i.pos[0],y:i.pos[1]},null),u=n.gcsToDisplay({x:i.pos[6],y:i.pos[7]},null),c=n.gcsToDisplay({x:i.pos[9],y:i.pos[10]},null),h=Math.min(o,i.crop&&i.crop.x||o),d=Math.min(a,i.crop&&i.crop.y||a);if(t.setTransform((c.x-u.x)/h,(c.y-u.y)/h,(l.x-u.x)/d,(l.y-u.y)/d,u.x,u.y),i.opacity!==s&&(s=i.opacity,t.globalAlpha=s),i.crop){var f=Math.max(0,i.crop.left||0),p=Math.max(0,i.crop.top||0),m=Math.min(o,i.crop.right||o),g=Math.min(a,i.crop.bottom||a);o&&a&&h>0&&d>0&&m>f&&g>p&&t.drawImage(r,f,p,m-f,g-p,0,0,h,d)}else t.drawImage(r,0,0)}})}),s!==o&&(t.globalAlpha=o),t.setTransform(1,0,0,1,0,0),t.imageSmoothingEnabled=!0}},this._delayRender=function(){var t=!1;return e&&e.vidQuads&&e.vidQuads.length&&i.each(e.vidQuads,function(e,n){n.video&&void 0!==n.video.HAVE_CURRENT_DATA&&(t|=n.video.seeking&&n.delayRenderWhenSeeking)}),t},this._renderOnCanvas=function(t,n){e&&(r._renderImageAndVideoQuads(t,n),r._renderColorQuads(t,n))},this._update=function(){c.call(r),(r.buildTime().timestamp()<=r.dataTime().timestamp()||r.updateTime().timestamp()<r.timestamp())&&r._build(),r.updateTime().modified(),r.layer().map().scheduleAnimationFrame(r._checkIfChanged)},this._init=function(){u.call(r,t)},this._exit=function(){l.call(r)},r._init(t),this};i(s,o);var l={};l[o.capabilities.color]=!0,l[o.capabilities.image]=!0,l[o.capabilities.imageCrop]=!0,l[o.capabilities.imageFixedScale]=!0,l[o.capabilities.imageFull]=!1,l[o.capabilities.canvas]=!0,l[o.capabilities.video]=!0,l[o.capabilities.texture]=!1,r("canvas","quad",s,l),t.exports=s},2213:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(6546),a=n(642),s=n(3638),l=n(1982),u=function(t){"use strict";if(!(this instanceof u))return new u(t);var e=n(5895);t=t||{},o.call(this,t),e.call(this);var i=this,r="bold 16px sans-serif",c=new RegExp('^\\s*(?=(?:(?:[-a-z0-9]+\\s+){0,3}(italic|oblique))?)(?=(?:(?:[-a-z0-9]+\\s+){0,3}(small-caps))?)(?=(?:(?:[-a-z0-9]+\\s+){0,3}(bold(?:er)?|lighter|[1-9]00))?)(?=(?:(?:[-a-z0-9]+\\s+){0,3}((?:ultra-|extra-|semi-)?(?:condensed|expanded)))?)(?:(?:normal|\\1|\\2|\\3|\\4)\\s+){0,4}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))(?:/(normal|[.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])))?\\s+([-,\\"\\sa-z]+?)\\s*$',"i");return this.getFontFromStyles=function(t,e,n){var o=i.style.get("font")(e,n)||r;if(t){var a=c.exec(o);null===a&&(a=c.exec(r)),a[1]=i.style.get("fontStyle")(e,n)||a[1],a[2]=i.style.get("fontVariant")(e,n)||a[2],a[3]=i.style.get("fontWeight")(e,n)||a[3],a[4]=i.style.get("fontStretch")(e,n)||a[4],a[5]=i.style.get("fontSize")(e,n)||a[5]||"16px",a[6]=i.style.get("lineHeight")(e,n)||a[6],a[7]=i.style.get("fontFamily")(e,n)||a[7]||"sans-serif",o=(o=(a[1]||"")+" "+(a[2]||"")+" "+(a[3]||"")+" "+(a[4]||"")+" "+(a[5]||"")+(a[6]?"/"+a[6]:"")+" "+a[7]).trim().replace(/\s\s+/g," ")}return o},this._renderOnCanvas=function(t,e){var n,r,o,u,c,h,d,f,p,m,g,y,v,x,_=i.data(),b=i.style.get("position"),w=i.style.get("renderThreshold")(_),M=i.style.get("text"),A=e.rotation(),E=e.zoom(),T=e.size(),S=a.mat3AsArray();n=["fontStyle","fontVariant","fontWeight","fontStretch","fontSize","lineHeight","fontFamily"].some(function(t){return null!==i.style(t)&&void 0!==i.style(t)}),i._canvasProperty(),o=i.featureGcsToDisplay(_.map(b)),_.forEach(function(e,_){u=o[_],w>0&&(u.x<-w||u.x>T.width+w||u.y<-w||u.y>T.height+w)||((c=i.style.get("visible")(e,_))||void 0===c)&&(h=a.convertColorAndOpacity(i.style.get("color")(e,_),i.style.get("textOpacity")(e,_)),f=a.convertColorAndOpacity(i.style.get("textStrokeColor")(e,_),i.style.get("textOpacity")(e,_),{r:0,g:0,b:0,a:0}),0===h.a&&0===f.a||(i._canvasProperty(t,"fillStyle",a.convertColorToRGBA(h)),null!=(r=M(e,_))&&""!==r&&(i._canvasProperty(t,"font",i.getFontFromStyles(n,e,_)),i._canvasProperty(t,"textAlign",i.style.get("textAlign")(e,_)||"center"),i._canvasProperty(t,"textBaseline",i.style.get("textBaseline")(e,_)||"middle"),m=i.style.get("rotation")(e,_)||0,g=i.style.get("rotateWithMap")(e,_)&&A,y=i.style.get("textScaled")(e,_),y=a.isNonNullFinite(y)?Math.pow(2,E-y):null,v=i.style.get("offset")(e,_),x=a.mat3AsArray(),(m||g||y&&1!==y||v&&(v.x||v.y))&&(s.translate(x,x,[u.x,u.y]),g&&A&&s.rotate(x,x,A),s.translate(x,x,[v&&v.x?+v.x:0,v&&v.y?+v.y:0]),m&&s.rotate(x,x,m),y&&1!==y&&s.scale(x,x,[y,y]),s.translate(x,x,[-u.x,-u.y])),S[0]===x[0]&&S[1]===x[1]&&S[3]===x[3]&&S[4]===x[4]&&S[6]===x[6]&&S[7]===x[7]||(t.setTransform(x[0],x[1],x[3],x[4],x[6],x[7]),s.copy(S,x)),(h=a.convertColorAndOpacity(i.style.get("shadowColor")(e,_),void 0,{r:0,g:0,b:0,a:0})).a&&(v=i.style.get("shadowOffset")(e,_),d=i.style.get("shadowBlur")(e,_)),h.a&&(v&&(v.x||v.y)||d)?(i._canvasProperty(t,"shadowColor",a.convertColorToRGBA(h)),v&&(m||g)&&i.style.get("shadowRotate")(e,_)&&(x=[+v.x,+v.y,0],l.rotateZ(x,x,[0,0,0],m+(g?A:0)),v={x:x[0],y:x[1]}),i._canvasProperty(t,"shadowOffsetX",v&&v.x?+v.x:0),i._canvasProperty(t,"shadowOffsetY",v&&v.y?+v.y:0),i._canvasProperty(t,"shadowBlur",d||0)):i._canvasProperty(t,"shadowColor","rgba(0,0,0,0)"),f.a&&(p=i.style.get("textStrokeWidth")(e,_),isFinite(p)&&p>0&&(i._canvasProperty(t,"strokeStyle",a.convertColorToRGBA(f)),i._canvasProperty(t,"lineWidth",p),t.strokeText(r,u.x,u.y),i._canvasProperty(t,"shadowColor","rgba(0,0,0,0)"))),t.fillText(r,u.x,u.y))))}),i._canvasProperty(t,"globalAlpha",1),t.setTransform(1,0,0,1,0,0)},this};i(u,o);r("canvas","text",u,{}),t.exports=u},511:function(t,e,n){var i=function(){"use strict";var t,e=this,n=this._init,i=this._exit,r=this._update,o=0,a=[];this._drawTile=function(n){if(t){var i=e._tileBounds(n),r=n.index.level||0,s=e._tileOffset(r),l=e.tileCropFromBounds(n),u={};l&&(u.crop=l),u.ul=e.fromLocal(e.fromLevel({x:i.left-s.x,y:i.top-s.y},r),0),u.ll=e.fromLocal(e.fromLevel({x:i.left-s.x,y:i.bottom-s.y},r),0),u.ur=e.fromLocal(e.fromLevel({x:i.right-s.x,y:i.top-s.y},r),0),u.lr=e.fromLocal(e.fromLevel({x:i.right-s.x,y:i.bottom-s.y},r),0),u.ul.z=u.ll.z=u.ur.z=u.lr.z=r,o+=1,u.id=o,n.quadId=u.id,u.image=n.image,a.push(u),t.data(a),t._update(),e.draw()}},this._remove=function(n){if(void 0!==n.quadId&&t){for(var i=0;i<a.length;i+=1)if(a[i].id===n.quadId){a.splice(i,1);break}t.data(a),t._update(),e.draw()}},this._update=function(n){return r.call(e,n),t&&t.nearestPixel&&t.nearestPixel(e.nearestPixel()),e._addBaseQuadToTiles(t,a),e},this._exit=function(){e.deleteFeature(t),t=null,a=[],i.apply(e,arguments)},this._init=function(){n.apply(e,arguments),(t=e.createFeature("quad",{previewColor:e._options.previewColor,previewImage:e._options.previewImage})).geoTrigger=void 0,t.gcs(e._options.gcs||e.map().gcs()),t.data(a),t._update()},this._getSubLayer=function(){},this._updateSubLayers=void 0};(0,n(1098).registerLayerAdjustment)("canvas","tile",i),t.exports=i},1795:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(338),a=function(t){"use strict";return this instanceof a?(t=t||{},o.call(this,t),n(5895).call(this),this._init(t),this):new a(t)};i(a,o),r("canvas","track",a),t.exports=a},3561:function(t,e,n){var i=n(4626),r=n(1275),o=function(t){"use strict";if(!(this instanceof o))return new o(t);t=t||{},r.call(this,t);var e=n(642).ensureFunction;delete t.layer,delete t.renderer;var i=n(2493).d3,a=this,s=this._init,l=Object.assign({},{colorRange:[{r:.07514311,g:.468049805,b:1},{r:.468487184,g:.588057293,b:1},{r:.656658579,g:.707001303,b:1},{r:.821573924,g:.837809045,b:1},{r:.943467973,g:.943498599,b:.943398095},{r:1,g:.788626485,b:.750707739},{r:1,g:.6289553,b:.568237474},{r:1,g:.472800903,b:.404551679},{r:.916482116,g:.236630659,b:.209939162}],scale:i.scaleQuantize(),geoId:function(t){return t.properties.GEO_ID},scalarId:function(t){return t.id},scalarValue:function(t){return t.value}},t);return this.featureType="choropleth",this.scalar=function(t,e){var n,r;return void 0===t?a.choropleth.get("scalar")()||[]:(n=a.choropleth.get("scalarId"),r=a.choropleth.get("scalarValue"),l.scalar=t,l.scalarAggregator=e||i.mean,l.scalar._dictionary=t.reduce(function(t,e){var i,o;return i=n(e),o=r(e),t[i]=t[i]?t[i].push(o):[o],t},{}),a.dataTime().modified(),a)},this.choropleth=function(t,e){var n;return void 0===t?l:"string"==typeof t&&void 0===e?l[t]:(void 0===e?(n=Object.assign({},l,t),l=n):l[t]=e,a.modified(),a)},this.choropleth.get=function(t){var n,i={};if(void 0===t){for(n in l)l.hasOwnProperty(n)&&(i[n]=a.choropleth.get(n));return i}return e(l[t])},this._featureToPolygons=function(t,e){var n=a.layer().createFeature("polygon",{});return"Polygon"===t.geometry.type?n.data([{type:"Polygon",coordinates:t.geometry.coordinates}]):"MultiPolygon"===t.geometry.type&&n.data(t.geometry.coordinates.map(function(t){return{type:"Polygon",coordinates:t}})),n.polygon(function(t){return{outer:t.coordinates[0],inner:t.coordinates[1]}}).position(function(t){return{x:t[0],y:t[1]}}).style({fillColor:e}),n},this._generateScale=function(t){var e=i.extent(a.scalar(),t||void 0);return a.choropleth().scale.domain(e).range(a.choropleth().colorRange),a},this.createChoropleth=function(){var t=a.choropleth,e=a.data(),n=a.scalar(),i=t.get("scalarValue"),r=t.get("geoId");return a._generateScale(i),e.map(function(e){var i=r(e),o=n._dictionary[i],s=t().scalarAggregator(o),l=a.choropleth().scale(s);return a._featureToPolygons(e,l)})},this._init=function(t){return s.call(a,t),l&&a.dataTime().modified(),a},this._init(t),this};i(o,r),t.exports=o},6761:function(t,e,n){var i=n(4626),r=n(6124),o=function(t){"use strict";if(!(this instanceof o))return new o(t);var e=n(642),i=n(5905);t=t||{},r.call(this,t);var a=this,s=this._init;return this._createContours=function(){return i.createColoredMesh(a,!1)},this.contour=a.mesh,this._init=function(t){s.call(a,t);var n=Object.assign({},{opacity:1,value:function(t,n){return e.isNonNullFinite(t)?t:a.position()(t,n).z},position:function(t){return t||{x:0,y:0}},origin:function(t){return t.length>=3?[t[0],t[1],0]:[0,0,0]}},void 0===t.style?{}:t.style);a.style(n),a.contour(Object.assign({},{minColor:"black",minOpacity:0,maxColor:"black",maxOpacity:0,colorRange:[{r:.07514311,g:.468049805,b:1},{r:.468487184,g:.588057293,b:1},{r:.656658579,g:.707001303,b:1},{r:.821573924,g:.837809045,b:1},{r:.943467973,g:.943498599,b:.943398095},{r:1,g:.788626485,b:.750707739},{r:1,g:.6289553,b:.568237474},{r:1,g:.472800903,b:.404551679},{r:.916482116,g:.236630659,b:.209939162}]},t.mesh||{},t.contour||{})),(t.mesh||t.contour)&&a.dataTime().modified()},this._init(t),this};i(o,r),t.exports=o},9726:function(t,e,n){var i=n(4626),r=n(2274),o=n(1098).registerRenderer,a=function(t){"use strict";if(!(this instanceof a))return new a(t);r.call(this,t),t=t||{};var e=this;return this.api=function(){return"dom"},this._init=function(t){var n=e.layer().node();return!e.canvas()&&n&&n.length&&e.canvas(n[0]),e},this._init(t),this};i(a,r),o("dom",a),t.exports=a},6409:function(t){var e={layerAdd:"geo_layerAdd",layerRemove:"geo_layerRemove",layerMove:"geo_layerMove",zoom:"geo_zoom",rotate:"geo_rotate",pan:"geo_pan",resize:"geo_resize",draw:"geo_draw",drawEnd:"geo_drawEnd",unhidden:"geo_unhidden",hidden:"geo_hidden",mousemove:"geo_mousemove",mouseclick:"geo_mouseclick",mouseup:"geo_mouseup",mousedown:"geo_mousedown",brush:"geo_brush",brushend:"geo_brushend",brushstart:"geo_brushstart",select:"geo_select",zoomselect:"geo_zoomselect",unzoomselect:"geo_unzoomselect",actiondown:"geo_actiondown",actionmove:"geo_actionmove",actionup:"geo_actionup",actionselection:"geo_actionselection",actionwheel:"geo_actionwheel",keyaction:"geo_keyaction",transitionstart:"geo_transitionstart",transitionend:"geo_transitionend",transitioncancel:"geo_transitioncancel",parallelprojection:"geo_parallelprojection",feature:{mousemove:"geo_feature_mousemove",mouseover:"geo_feature_mouseover",mouseover_order:"geo_feature_mouseover_order",mouseout:"geo_feature_mouseout",mouseon:"geo_feature_mouseon",mouseoff:"geo_feature_mouseoff",mouseclick:"geo_feature_mouseclick",mouseclick_order:"geo_feature_mouseclick_order",mousedown:"geo_feature_mousedown",mouseup:"geo_feature_mouseup",brushend:"geo_feature_brushend",brush:"geo_feature_brush"},pixelmap:{prepared:"geo_pixelmap_prepared"},screenshot:{ready:"geo_screenshot_ready"},camera:{}};e.camera.view="geo_camera_view",e.camera.projection="geo_camera_projection",e.camera.viewport="geo_camera_viewport",e.annotation={},e.annotation.add="geo_annotation_add",e.annotation.add_before="geo_annotation_add_before",e.annotation.update="geo_annotation_update",e.annotation.coordinates="geo_annotation_coordinates",e.annotation.select_edit_handle="geo_annotation_select_edit_handle",e.annotation.edit_action="geo_annotation_edit_action",e.annotation.remove="geo_annotation_remove",e.annotation.state="geo_annotation_state",e.annotation.mode="geo_annotation_mode",e.annotation.boolean="geo_annotation_boolean",e.annotation.cursor_click="geo_annotation_cursor_click",e.annotation.cursor_action="geo_annotation_cursor_action",t.exports=e},1275:function(t,e,n){function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}var r=n(5616),o=n(4626),a=n(5402),s=n(77),l=n(5325),u=n(6409),c=function(t){"use strict";if(!(this instanceof c))return new c(t);a.call(this);var e=n(642);t=t||{};var i,o=this,h=this._exit,d=this.geoOn,f=this.geoOff,p=void 0===t.selectionAPI?"auto":t.selectionAPI,m={},g=void 0===t.layer?null:t.layer,y=t.gcs,v=void 0===t.visible||t.visible,x=void 0===t.bin?null:t.bin,_=void 0===t.renderer||g&&t.renderer===g.renderer()?null:t.renderer,b=s(),w=s(),M=s(),A=[],E=[];return this._subfeatureStyles={},Object.defineProperty(this,"ready",{get:function(){return i}}),this._bindMouseHandlers=function(){o.selectionAPI()&&(o._unbindMouseHandlers(),o.geoOn(u.mousemove,o._handleMousemove),o.geoOn(u.mousedown,o._handleMousedown),o.geoOn(u.mouseup,o._handleMouseup),o.geoOn(u.mouseclick,o._handleMouseclick),o.geoOn(u.brushend,o._handleBrushend),o.geoOn(u.brush,o._handleBrush))},this._unbindMouseHandlers=function(){o.geoOff(u.mousemove,o._handleMousemove),o.geoOff(u.mousedown,o._handleMousedown),o.geoOff(u.mouseup,o._handleMouseup),o.geoOff(u.mouseclick,o._handleMouseclick),o.geoOff(u.brushend,o._handleBrushend),o.geoOff(u.brush,o._handleBrush)},this.pointSearch=function(t,e){return{index:[],found:[]}},this.boxSearch=function(t,e,n,i){return o.polygonSearch([t,{x:t.x,y:e.y},e,{x:e.x,y:t.y}],n,i)},this.polygonSearch=function(t,e,n){return{index:[],found:[]}},this._handleMousedown=function(t){this._handleMousemove(t,u.feature.mousedown)},this._handleMouseup=function(t){this._handleMousemove(t,u.feature.mouseup)},this._handleMousemove=function(t,e){var n,i=t&&t.mouse?t.mouse:o.layer().map().interactor().mouse(),r=o.data(),a=o.pointSearch(i.geo),s=[],l=[],h=-1,d=-1;(E.length||a.index.length)&&(n=a.extra||{},a.index.length>1&&o.geoTrigger(u.feature.mouseover_order,{feature:o,mouse:i,previous:E,over:a,sourceEvent:t}),c.eventID+=1,e?a.index.forEach(function(s,l){o.geoTrigger(e,{data:r[s],index:s,extra:n[s],mouse:i,eventID:c.eventID,top:l===a.length-1,sourceEvent:t},!0)}):(E.length&&(h=E[E.length-1]),s=a.index.filter(function(t){return E.indexOf(t)<0}),l=E.filter(function(t){return a.index.indexOf(t)<0}),s.forEach(function(e,a){o.geoTrigger(u.feature.mouseover,{data:r[e],index:e,extra:n[e],mouse:i,eventID:c.eventID,top:a===s.length-1,sourceEvent:t},!0)}),c.eventID+=1,l.forEach(function(e,n){o.geoTrigger(u.feature.mouseout,{data:r[e],index:e,mouse:i,eventID:c.eventID,top:n===l.length-1,sourceEvent:t},!0)}),c.eventID+=1,a.index.forEach(function(e,s){o.geoTrigger(u.feature.mousemove,{data:r[e],index:e,extra:n[e],mouse:i,eventID:c.eventID,top:s===a.index.length-1,sourceEvent:t},!0)}),(E=a.index).length&&(d=E[E.length-1]),h!==d&&(-1!==h&&o.geoTrigger(u.feature.mouseoff,{data:r[h],index:h,mouse:i,sourceEvent:t},!0),-1!==d&&o.geoTrigger(u.feature.mouseon,{data:r[d],index:d,extra:n[d],mouse:i,sourceEvent:t},!0))))},this._clearSelectedFeatures=function(){return E=[],o},this._handleMouseclick=function(t){var e=o.layer().map().interactor().mouse(),n=o.data(),i=o.pointSearch(e.geo),r=i.extra||{};i.index.length>1&&o.geoTrigger(u.feature.mouseclick_order,{feature:o,mouse:e,over:i,sourceEvent:t}),e.buttonsDown=t.buttonsDown,c.eventID+=1,i.index.forEach(function(a,s){o.geoTrigger(u.feature.mouseclick,{data:n[a],index:a,extra:r[a],mouse:e,eventID:c.eventID,top:s===i.index.length-1,sourceEvent:t},!0)})},this._handleBrush=function(t){var e=[t.gcs.lowerLeft,t.gcs.lowerRight,t.gcs.upperRight,t.gcs.upperLeft];if(o.layer()){var n=o.layer().map();e=l.transformCoordinates(n.gcs(),n.ingcs(),e)}var i=o.polygonSearch(e);c.eventID+=1,i.index.forEach(function(e,n){o.geoTrigger(u.feature.brush,{data:i.found[n],index:e,mouse:t.mouse,brush:t,eventID:c.eventID,top:n===i.index.length-1},!0)})},this._handleBrushend=function(t){var e=[t.gcs.lowerLeft,t.gcs.lowerRight,t.gcs.upperRight,t.gcs.upperLeft];if(o.layer()){var n=o.layer().map();e=l.transformCoordinates(n.gcs(),n.ingcs(),e)}var i=o.polygonSearch(e);c.eventID+=1,i.index.forEach(function(e,n){o.geoTrigger(u.feature.brushend,{data:i.found[n],index:e,mouse:t.mouse,brush:t,eventID:c.eventID,top:n===i.index.length-1},!0)})},this.style=function(t,e){return void 0===t?m:"string"==typeof t&&void 0===e?m[t]:void 0===e?(m=Object.assign({},m,t),o.modified(),o):(m[t]=e,o.modified(),o)},this.style.get=function(t){var n;if(void 0===t){var i,r={};for(i in m)m.hasOwnProperty(i)&&(r[i]=o.style.get(i));return r}return n=t.toLowerCase().match(/color$/)?e.isFunction(m[t])?function(){return e.convertColor(m[t].apply(o,arguments))}:e.ensureFunction(e.convertColor(m[t])):e.ensureFunction(m[t]),n},this.updateStyleFromArray=function(t,e,n){if("string"!=typeof t)r.each(t,function(t,e){o.updateStyleFromArray(t,e)});else{var i;if(t.toLowerCase().match(/color$/)&&(i={r:0,g:0,b:0}),!Array.isArray(e))return o;o._subfeatureStyles[t]?e.length&&Array.isArray(e[0])?o.style(t,function(t,n,r,o){var a=(e[o]||[])[n];return void 0!==a?a:i}):o.style(t,function(t,n,r,o){var a=e[o];return void 0!==a?a:i}):o.style(t,function(t,n){var r=e[n];return void 0!==r?r:i})}return n&&o.visible()&&o.draw(),o},this.layer=function(){return g},this.renderer=function(){return _||g&&g.renderer()},this.gcs=function(t){return void 0===t?null==y&&g?g.map().ingcs():y:(y=t,o.modified(),o)},this.featureGcsToDisplay=function(t){var e=g.map();return t=e.gcsToWorld(t,o.gcs()),t=e.worldToDisplay(t),o.renderer().baseToLocal&&(t=o.renderer().baseToLocal(t)),t},this.visible=function(t,e){if(void 0===t)return!(!e&&g&&g.visible&&!g.visible())&&v;if(v!==t||e){v=t,g&&g.visible&&!g.visible()&&(t=!1),t?o._bindMouseHandlers():o._unbindMouseHandlers();for(var n=0;n<A.length;n+=1)A[n].visible(v,e)}return o},this.dependentFeatures=function(t){return void 0===t?A.slice():(A=t.slice(),o)},this.bin=function(t,n){if(void 0===t){if(null===x&&!n){var i=o.parent(),r=i?i.children().indexOf(o):-1;return r>=0?r:0}return x}return x=e.isNonNullFinite(t)?parseInt(t,10):null,o.modified(),o},this.dataTime=function(t){return void 0===t?b:(b=t,o.modified(),o)},this.buildTime=function(t){return void 0===t?w:(w=t,o.modified(),o)},this.updateTime=function(t){return void 0===t?M:(M=t,o.modified(),o)},this.data=function(t){return void 0===t?o.style("data")||[]:(o.style("data",t),o.dataTime().modified(),o.modified(),o)},this.selectionAPI=function(t,e){return void 0===t?!(!e&&g&&g.selectionAPI&&!g.selectionAPI())&&(e||"auto"!==p?p:!!o.geoIsOn(Object.values(u.feature))):("auto"!==t&&(t=!!t),(t!==p||e)&&(p=t,o._unbindMouseHandlers(),o._bindMouseHandlers()),o)},this.mouseOverOrderHighestIndex=function(t){t.over.index.sort();var e=t.feature.data();t.over.index.forEach(function(n,i){t.over.found[i]=e[n]})},this._init=function(t){if(!g)throw new Error("Feature requires a valid layer");m=Object.assign({},{opacity:1},void 0===t.style?{}:t.style),o._bindMouseHandlers(),i=!0},this._build=function(){},this._update=function(){},this.geoOn=function(t,e){var n="auto"===o.selectionAPI(void 0,!0),i=n&&o.selectionAPI(),r=d.apply(o,arguments);return n&&!i&&o.selectionAPI()&&o._bindMouseHandlers(),r},this.geoOff=function(t,e){var n="auto"===o.selectionAPI(void 0,!0),i=n&&o.selectionAPI(),r=f.apply(o,arguments);return n&&i&&!o.selectionAPI()&&o._unbindMouseHandlers(),r},this._exit=function(){o._unbindMouseHandlers(),E=[],m={},h(),i=!1},this._init(t),this};c.eventID=0,c.create=function(t,e){"use strict";if(!(t instanceof n(5156)))return console.warn("Invalid layer"),null;if("object"!==i(e))return console.warn("Invalid spec"),null;var r=e.type,o=t.createFeature(r,e);return o?(e.data=e.data||[],o.style(e)):(console.warn('Could not create feature type "'+r+'"'),null)},o(c,a),t.exports=c},6498:function(t,e,n){var i=n(4626),r=n(5156),o=n(6409),a=n(1098),s=function(t){"use strict";if(!(this instanceof s))return new s(t);r.call(this,t);var e=this,n=[],i=this._init,l=this._exit,u=this._update,c=this.visible,h=this.selectionAPI,d=this.draw;return this.createFeature=function(t,n){var i=a.createFeature(t,e,e.renderer(),n);return i?e.addFeature(i):console.warn("Layer renderer ("+e.rendererName()+') does not support feature type "'+t+'"'),i},this.addFeature=function(t){return e.removeFeature(t),e.addChild(t),n.push(t),e.dataTime().modified(),e.modified(),e},this.removeFeature=function(t){var i;return(i=n.indexOf(t))>=0&&(n.splice(i,1),e.removeChild(t),e.dataTime().modified(),e.modified()),e},this.deleteFeature=function(t){return t&&(n.indexOf(t)>=0&&t._exit(),e.removeFeature(t)),e},this.features=function(t){if(void 0===t)return n.slice();var i,r=n.slice();for(i=0;i<r.length;i+=1)t.indexOf(r[i])<0&&n.indexOf(r[i])>=0&&e.deleteFeature(r[i]);for(i=0;i<t.length;i+=1)e.addFeature(t[i]);return e},this.gcsFeatures=function(t){var n,i;return void 0===t?(this.features().forEach(function(t){void 0===n?n=t.gcs():t.gcs()!==n&&(i=!0)}),i?void 0:n):(e.features().forEach(function(e){e.gcs()!==t&&e.gcs(t)}),e)},this._init=function(){return e.initialized()||(i.call(e,!0),e.geoOn(o.resize,function(t){e.renderer()?(e.renderer()._resize(t.x,t.y,t.width,t.height),e._update({event:t}),e.renderer()._render()):e._update({event:t})}),e.geoOn(o.pan,function(t){e._update({event:t}),e.renderer()&&e.renderer()._render()}),e.geoOn(o.rotate,function(t){e._update({event:t}),e.renderer()&&e.renderer()._render()}),e.geoOn(o.zoom,function(t){e._update({event:t}),e.renderer()&&e.renderer()._render()})),e},this._update=function(t){var i;if(!n.length)return e;if(u.call(e,t),e.dataTime().timestamp()>e.updateTime().timestamp())for(i=0;i<n.length;i+=1)n[i].renderer(e.renderer());for(i=0;i<n.length;i+=1)n[i]._update();return e.updateTime().modified(),e},this._exit=function(){e.clear(),l()},this.draw=function(){return e.visible()&&(d(),e.renderer()&&e.renderer()._render()),e},this.visible=function(t){if(void 0===t)return c();if(e.visible()!==t){c(t);var i,r=n.slice();for(i=0;i<r.length;i+=1)r[i].visible(r[i].visible(void 0,!0),!0);t&&e.draw()}return e},this.selectionAPI=function(t){if(void 0===t)return h();if(e.selectionAPI()!==t){h(t);var i,r=n.slice();for(i=0;i<r.length;i+=1)r[i].selectionAPI(r[i].selectionAPI(void 0,!0),!0)}return e},this.clear=function(){for(;n.length;)e.deleteFeature(n[0]);return e},e};i(s,r),a.registerLayer("feature",s),t.exports=s},5938:function(t,e,n){var i=n(5616),r=function(t){if(!(this instanceof r))return new r(t);t=t||{},this._size=t.size||6,this._initialSize=t.initialSize||0,this._track=t.track||600,this._initialTrack=this._track,this._needed=t.needed||null,this._batch=!1;var e=this,n=1;return Object.defineProperty(this,"size",{get:function(){return e._size},set:function(t){e._size=t,e._initialSize>1&&t<e._initialSize&&(e._initialSize=t),e.next_item()}}),Object.defineProperty(this,"initialSize",{get:function(){return e._initialSize},set:function(t){e._initialSize=t,e.next_item()}}),Object.defineProperty(this,"track",{get:function(){return e._track},set:function(t){e._track=t}}),Object.defineProperty(this,"initialTrack",{get:function(){return e._initialTrack},set:function(t){e._initialTrack=t}}),Object.defineProperty(this,"length",{get:function(){return e._queue.length}}),Object.defineProperty(this,"processing",{get:function(){return e._processing}}),this.clear=function(){return e._queue=[],e._processing=0,e},this.add=function(t,n,r){if(t.__fetchQueue){var o=e._queue.indexOf(t);if(o>=0)return e._addToQueue(t,r,o),t}var a=i.Deferred(),s=i.Deferred();return a.done(function(){i.when(n.call(t)).always(s.resolve)}).fail(s.resolve),t.__fetchQueue=a,e._addToQueue(t,r),i.when(a,s).always(function(){e._processing>0&&(e._processing-=1),e._initialSize=0,e.next_item()}).promise(t),e.next_item(),t},this._addToQueue=function(t,n,i){var r=n?e._queue.length-1:0;if(t.__fetchQueue._batch=e._batch,!n&&e._batch)for(r=0;r<e._queue.length-(void 0===i?0:1)&&e._queue[r].__fetchQueue._batch===e._batch;r+=1);if(void 0===i)n?e._queue.push(t):r?e._queue.splice(r,0,t):e._queue.unshift(t);else if(i!==r){for(var o=i<r?1:-1,a=i;a!==r;a+=o)e._queue[a]=e._queue[a+o];e._queue[r]=t}},this.get=function(t){return e._queue.indexOf(t)},this.remove=function(t){var n=e._queue.indexOf(t);return n>=0&&(e._queue.splice(n,1),!0)},this.batch=function(t){return void 0===t?e._batch:(t?(e._batch=n,n+=1):e._batch=!1,e)},this.next_item=function(){if(!e._innextitem){if(e._innextitem=!0,e._queue.length>e._track&&e._needed)for(var t=e._queue.length-1;t>=0;t-=1)if(!e._needed(e._queue[t])){var n=e._queue.splice(t,1)[0];e._processing+=1,n.__fetchQueue.reject(),delete n.__fetchQueue}for(;e._processing<(e._initialSize||e._size)&&e._queue.length;){var i=e._queue.shift();if(i.__fetchQueue)e._processing+=1,!e._needed||e._needed(i)?i.__fetchQueue.resolve():i.__fetchQueue.reject(),delete i.__fetchQueue}e._innextitem=!1}},this.clear(),this};t.exports=r},703:function(t,e,n){var i=n(4626),r=n(6498),o=n(1338),a=function(t){"use strict";if(!(this instanceof a))return new a(t);if(o.call(this),!((t=t||{}).layer instanceof r))throw new Error("fileReader must be given a feature layer");var e=t.layer;return this.layer=function(){return e},this.canRead=function(t){return!1},this.read=function(t,e,n){var i=new Promise(function(t,n){throw e&&e(!1),new Error("The default file reader always fails")});return this.addPromise(i),i},this._getString=function(t,e,n){var i=function(t,e){var n=new FileReader;return e&&(n.onprogress=e),n.onloadend=function(){t(n.error||n.result)},n}(e,n);i.readAsText(t)},this};i(a,o),t.exports=a},5173:function(t,e,n){function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){a(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function a(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=n(4626),l=n(1098).registerFileReader,u=n(703),c=function(t){"use strict";if(!(this instanceof c))return new c(t);var e=n(5616),i=n(642).convertColor,r=n(2225),s=n(5325),l=this,h=o(o({},t),{},{pointStyle:o({fill:!0,fillColor:"#ff7800",fillOpacity:.8,stroke:!0,strokeColor:"#000",strokeWidth:1,strokeOpacity:1,radius:8},t.pointStyle),lineStyle:o({strokeColor:"#ff7800",strokeWidth:4,strokeOpacity:.5,strokeOffset:0,lineCap:"butt",lineJoin:"miter",uniformLine:!0,closed:!1},t.lineStyle),polygonStyle:o({fill:!0,fillColor:"#b0de5c",fillOpacity:.8,stroke:!0,strokeColor:"#999999",strokeWidth:2,strokeOpacity:1,uniformPolygon:!0,pattern:void 0},t.polygonStyle)});u.call(this,h),this.canRead=function(t){if(t instanceof File||t instanceof Blob)return!!("application/json"===t.type||t.name&&t.name.match(/\.json$/));if("string"==typeof t){try{JSON.parse(t)}catch(t){return!1}return!0}try{if(Array.isArray(l._featureArray(t)))return!0}catch(t){}return!1},this._readObject=function(t,n,i){var r;function o(t){try{r=JSON.parse(t),n(r)}catch(i){r||e.ajax({type:"GET",url:t,dataType:"text"}).done(function(t){try{r=JSON.parse(t),n(r)}catch(t){r||n(!1)}}).fail(function(){n(!1)})}}t instanceof File||t instanceof Blob?l._getString(t,o,i):"string"==typeof t?o(t):n(t)},this._featureArray=function(t){var e,n=[];switch(t.type){case"FeatureCollection":e=t.features;break;case"Feature":e=[t];break;case"GeometryCollection":e=t.geometries.map(function(t){return{type:"Feature",geometry:t,properties:{}}});break;case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":e=[{type:"Feature",geometry:t,properties:{}}];break;default:throw new Error("Invalid json type")}return e.forEach(function(t){Array.prototype.push.apply(n,l._feature(t))}),n=n.filter(function(t){return t.geometry&&t.geometry.coordinates&&t.geometry.coordinates.length})},this._feature=function(t){if("Feature"!==t.type)throw new Error("Invalid feature object");switch(t.geometry.type){case"Point":case"LineString":case"Polygon":return[t];case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.geometry.coordinates.map(function(e){return{type:"Feature",geometry:{type:t.geometry.type.replace("Multi",""),coordinates:e},properties:t.properties}});default:throw new Error("Invalid geometry type")}},this._position=function(t){return{x:t[0],y:t[1],z:t[2]||0}},this._style=function(t,e){var n=t.toLowerCase().match(/color$/);return n&&(e=i(e)),function(r,o,a,s){var l;return void 0!==(l=void 0!==a&&a.properties?a.properties:r.properties)&&l.hasOwnProperty(t)?n?i(l[t]):l[t]:e}},this.read=function(t,e,n){var i=new Promise(function(i,u){function c(t){return"Polygon"===t.geometry.type&&1===t.geometry.coordinates.length&&5===t.geometry.coordinates[0].length&&("ellipse"===(t.properties||{}).annotationType||"circle"===(t.properties||{}).annotationType)}l._readObject(t,function(t){if(!1===t)return e&&e(t),void u(new Error("Failed to parse GeoJSON"));var n,d,f=[];try{n=l._featureArray(t)}catch(t){return void u(t)}var p=n.filter(function(t){return"Point"===t.geometry.type});p.length&&(d=l.layer().createFeature("point"))&&(d.data(p).position(function(t){return l._position(t.geometry.coordinates)}).style([{}].concat(Object.keys(h.pointStyle)).reduce(function(t,e){return o(a({},e,p.some(function(t){return t.properties&&void 0!==t.properties[e]})?l._style(e,h.pointStyle[e]):h.pointStyle[e]),t)})),f.push(d));var m=n.filter(function(t){return"LineString"===t.geometry.type});m.length&&(d=l.layer().createFeature("line"))&&(d.data(m).line(function(t){return t.geometry.coordinates}).position(l._position).style([{}].concat(Object.keys(h.lineStyle)).reduce(function(t,e){return o(a({},e,m.some(function(t){return t.properties&&void 0!==t.properties[e]})?l._style(e,h.lineStyle[e]):h.lineStyle[e]),t)})),f.push(d));var g=n.filter(function(t){return"Polygon"===t.geometry.type&&!c(t)});g.length&&(d=l.layer().createFeature("polygon"))&&(d.data(g).polygon(function(t,e){return{outer:t.geometry.coordinates[0],inner:t.geometry.coordinates.slice(1)}}).position(l._position).style([{}].concat(Object.keys(h.polygonStyle)).reduce(function(t,e){return o(a({},e,g.some(function(t){return t.properties&&void 0!==t.properties[e]})?l._style(e,h.polygonStyle[e]):h.polygonStyle[e]),t)})),f.push(d));var y=n.filter(c);y.length&&(d=l.layer().createFeature("marker"))&&(y.forEach(function(t){var e=l.layer().map(),n=s.transformCoordinates(e.ingcs(),e.gcs(),t.geometry.coordinates[0]),i=Math.pow(Math.pow(n[0][0]-n[1][0],2)+Math.pow(n[0][1]-n[1][1],2),.5),r=Math.pow(Math.pow(n[0][0]-n[3][0],2)+Math.pow(n[0][1]-n[3][1],2),.5),o=Math.max(i,r)/2/e.unitsPerPixel(0),a=i?r/i:1e20,u=-Math.atan2(n[1][1]-n[0][1],n[1][0]-n[0][0]),c=s.transformCoordinates(e.gcs(),e.ingcs(),{x:(n[0][0]+n[1][0]+n[2][0]+n[3][0])/4,y:(n[0][1]+n[1][1]+n[2][1]+n[3][1])/4});t._props={pos:c,radius:o,aspect:a,rotation:u}}),d.data(y).position(function(t){return t._props.pos}).style([{}].concat(Object.keys(h.polygonStyle)).reduce(function(t,e){return o(a(a(a(a(a(a(a(a({},e,y.some(function(t){return t.properties&&void 0!==t.properties[e]})?l._style(e,h.polygonStyle[e]):h.polygonStyle[e]),"radius",function(t){return t._props.radius}),"radiusIncludesStroke",!1),"symbolValue",function(t){return t._props.aspect}),"rotation",function(t){return t._props.rotation}),"strokeOffset",0),"rotateWithMap",!0),"scaleWithZoom",r.scaleMode.fill),t)})),f.push(d)),e&&e(f),i(f)},n)});return l.addPromise(i),i}};s(c,u),l("geojsonReader",c),l("jsonReader",c),t.exports=c},3187:function(t,e,n){var i=n(4626),r=n(1275),o=function(t){"use strict";if(!(this instanceof o))return new o(t);t=t||{},r.call(this,t);var e=n(642),i=n(1098),a=this,s=this.draw,l=this.style,u=null,c=null,h=function(t){return t.children},d=[],f=this._init,p=this._exit;return this.featureType="graph",this._init=function(t){f.call(a,t);var n=e.deepMerge({},{nodes:{radius:5,fill:!0,fillColor:{r:1,g:0,b:0},strokeColor:{r:0,g:0,b:0}},links:{strokeColor:{r:0,g:0,b:0}},linkType:"path"},void 0===t.style?{}:t.style);return a.style(n),a.nodes(e.identityFunction),a},this._build=function(){a.children().forEach(function(t){t._build()})},this._update=function(){a.children().forEach(function(t){t._update()})},this._exit=function(){return a.data([]),d.forEach(function(t){t._exit(),a.removeChild(t)}),d=[],c._exit(),a.removeChild(c),p(),a},this.style=function(t,e){var n=l.call(a,t,e);return n!==a?n:(c.style(t.nodes),d.forEach(function(e){e.style(t.links)}),a)},this.style.get=l.get,this.links=function(t){return void 0===t?h:(h=e.ensureFunction(t),a)},this.nodes=function(t){return void 0===t?u:(u=t,a.modified(),a)},this.nodeFeature=function(){return c},this.linkFeatures=function(){return d},this.draw=function(){var t,e=a.layer(),n=a.data(),r=0;return t=a.style(),c.data(n),c.style(t.nodes),n.forEach(function(n){(n.children||[]).forEach(function(o){var s;r+=1,d.length<r&&(s=i.createFeature(t.linkType,e,e.renderer()).style(t.links),a.addChild(s),d.push(s)),d[r-1].data([n,o])})}),d.splice(r,d.length-r).forEach(function(t){t._exit(),a.removeChild(t)}),s(),a},c=i.createFeature("point",this.layer(),this.layer().renderer()),a.addChild(c),t.nodes&&this.nodes(t.nodes),this._init(t),this};i(o,r),t.exports=o},2499:function(t,e,n){var i=n(4626),r=n(6124),o=function(t){"use strict";if(!(this instanceof o))return new o(t);var e=n(642),i=n(5905);t=t||{},r.call(this,t);var a=this,s=this._init;return this._createGrids=function(){return i.createColoredMesh(a,!0)},this.grid=a.mesh,this._init=function(t){s.call(a,t);var n=Object.assign({},{opacity:1,value:function(t,n){return e.isNonNullFinite(t)?t:a.position()(t,n).z},position:function(t){return t||{x:0,y:0}},origin:function(t){return t.length>=3?[t[0],t[1],0]:[0,0,0]}},void 0===t.style?{}:t.style);a.style(n),a.grid(Object.assign({},{minColor:"black",minOpacity:0,maxColor:"black",maxOpacity:0,colorRange:[{r:.07514311,g:.468049805,b:1},{r:.468487184,g:.588057293,b:1},{r:.656658579,g:.707001303,b:1},{r:.821573924,g:.837809045,b:1},{r:.943467973,g:.943498599,b:.943398095},{r:1,g:.788626485,b:.750707739},{r:1,g:.6289553,b:.568237474},{r:1,g:.472800903,b:.404551679},{r:.916482116,g:.236630659,b:.209939162}]},t.mesh||{},t.grid||{})),(t.mesh||t.grid)&&a.dataTime().modified()},this._init(t),this};i(o,r),t.exports=o},9163:function(t,e,n){var i=n(4626),r=n(1275),o=n(5325),a=n(642),s=function(t){"use strict";if(!(this instanceof s))return new s(t);t=t||{},r.call(this,t);var e,n,i,l,u,c,h,d=this,f=this._init;return this.featureType="heatmap",e=t.position||a.identityFunction,n=t.intensity||function(t){return 1},i=void 0!==t.maxIntensity?t.maxIntensity:null,l=void 0!==t.minIntensity?t.minIntensity:null,c=void 0!==t.binned?t.binned:"auto",u=t.updateDelay||0===t.updateDelay?parseInt(t.updateDelay,10):-1,this.maxIntensity=function(t){return void 0===t?i:(i=t,d.dataTime().modified(),d.modified(),d)},this.minIntensity=function(t){return void 0===t?l:(l=t,d.dataTime().modified(),d.modified(),d)},this.updateDelay=function(t){return void 0===t?u:(u=parseInt(t,10),d)},this.binned=function(t){return void 0===t?c:("true"===t?t=!0:("false"===t||"auto"!==t&&!0!==t&&!1!==t&&((t=parseInt(t,10))<=0||isNaN(t)))&&(t=!1),c=t,d.dataTime().modified(),d.modified(),d)},this.position=function(t){return void 0===t?e:(e=t,d.dataTime().modified(),d.modified(),d)},this.gcsPosition=function(){return d._update(),h},this.intensity=function(t){return void 0===t?n:(n=t,d.dataTime().modified(),d.modified(),d)},this._init=function(t){f.call(d,t);var n=Object.assign({},{radius:10,blurRadius:10,gaussian:!0,color:{0:{r:0,g:0,b:0,a:0},.25:{r:0,g:0,b:1,a:.5},.5:{r:0,g:1,b:1,a:.6},.75:{r:1,g:1,b:0,a:.7},1:{r:1,g:0,b:0,a:.8}},scaleWithZoom:!1},void 0===t.style?{}:t.style);d.style(n),e&&d.dataTime().modified()},this._build=function(){var t=d.data(),e=null,n=[],r=null==i,a=null==l;return t.forEach(function(t,o){n.push(d.position()(t,o)),(r||a)&&(e=d.intensity()(t,o),null==i&&(i=e),null==l&&(l=e),r&&e>i&&(i=e),a&&e<l&&(l=e))}),a&&r&&l===i&&(l-=1),h=o.transformCoordinates(d.gcs(),d.layer().map().gcs(),n),d.buildTime().modified(),d},this._init(t),this};i(s,r),t.exports=s},4912:function(t,e,n){var i=n(4626),r=n(5289),o=function(t){if(!(this instanceof o))return new o(t);var e=n(5616);return t.size=t.size||{x:256,y:256},this._image=null,this._cors=t.crossDomain||null===t.crossDomain?t.crossDomain:"anonymous",r.call(this,t),Object.defineProperty(this,"image",{get:function(){return this._image}}),this.fetch=function(){var t;return this._image||(this._image=new Image(this.right-this.left,this.bottom-this.top),this._cors&&this._url.indexOf(":")>=0&&this._url.indexOf("/")===this._url.indexOf(":")+1&&(this._image.crossOrigin=this._cors),t=e.Deferred(),this._image.onload=t.resolve,this._image.onerror=t.reject,this._image.src=this._url,t.done(function(){this._fetched=!0}.bind(this)).promise(this)),this},this.fadeIn=function(t){var n=this.fetch(),i=e.Deferred();return e(this._image).css("display","none"),n.done(function(){e(this._image).fadeIn(t,function(){i.resolve()})}.bind(this)),i.promise(this)},this};i(o,r),t.exports=o},2257:function(t,e,n){
/**
 * GeoJS
 * @copyright 2013-2022, Kitware, Inc.
 * @license Apache-2.0
 * @namespace geo
 */
/*
 * Bundled with the following libraries:
 *
 * Proj4js
 * @copyright 2014, Mike Adair, Richard Greenwood, Didier Richard, Stephen Irons, Olivier Terral and Calvin Metcalf
 * @license MIT
 *
 * gl-matrix
 * @copyright 2015, Brandon Jones, Colin MacKenzie IV
 * @license MIT
 *
 * JQuery
 * @copyright jQuery Foundation and other contributors
 * @license MIT
 *
 * earcut
 * @copyright 2016, Mapbox
 * @license ISC
 *
 * kdbush
 * @copyright 2017, Vladimir Agafonkin
 * @license ISC
 */
var i=n(5616),r=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi;i.htmlPrefilter=function(t){return t.replace(r,"<$1></$2>")},n(7605),t.exports=Object.assign({annotationLayer:n(2075),camera:n(3578),choroplethFeature:n(3561),contourFeature:n(6761),domRenderer:n(9726),event:n(6409),feature:n(1275),featureLayer:n(6498),fetchQueue:n(5938),fileReader:n(703),geo_action:n(8695),graphFeature:n(3187),heatmapFeature:n(9163),imageTile:n(4912),isolineFeature:n(2586),geojsonReader:n(5173),gridFeature:n(2499),layer:n(5156),lineFeature:n(9281),map:n(6211),mapInteractor:n(7908),markerFeature:n(2225),meshFeature:n(6124),object:n(1338),osmLayer:n(4880),pathFeature:n(2266),pointFeature:n(7541),polygonFeature:n(6645),quadFeature:n(3842),pixelmapFeature:n(7761),pixelmapLayer:n(534),renderer:n(2274),sceneObject:n(5402),textFeature:n(6546),tile:n(5289),tileCache:n(9123),tileLayer:n(9264),timestamp:n(77),trackFeature:n(338),transform:n(5325),typedef:n(3170),vectorFeature:n(6858),inherit:n(4626),version:n(4081),sha:n(9079),annotation:n(4655),util:n(642),jQuery:i,canvas:n(8074),svg:n(6488),vtkjs:n(394),webgl:n(8635),gui:n(4812),vgl:n(1611)},n(1098)),window&&!window.$&&(window.$=i),window&&!window.jQuery&&(window.jQuery=i),window&&!window.geojsMap&&(window.geojsMap=function(){var t=i(".geojs-map").map(function(t,e){return i(e).data("data-geojs-map")});return 0===t.length?void 0:1===t.length?t[0]:t})},4626:function(t){t.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},2586:function(t,e,n){var i=n(4626),r=n(6124),o=n(1098),a=n(642),s={17:[{l0:1,h0:2,l1:0,h1:2}],18:[{l0:0,h0:1,l1:2,h1:1}],20:[{l0:2,h0:0,l1:1,h1:0}],22:[{l0:2,h0:0,l1:2,h1:1}],21:[{l0:1,h0:2,l1:1,h1:0}],19:[{l0:0,h0:1,l1:0,h1:2}],1:[{l0:2,h0:3,l1:1,h1:3}],2:[{l0:0,h0:2,l1:3,h1:2}],4:[{l0:3,h0:1,l1:0,h1:1}],8:[{l0:1,h0:0,l1:2,h1:0}],14:[{l0:3,h0:1,l1:3,h1:2}],13:[{l0:2,h0:3,l1:2,h1:0}],11:[{l0:1,h0:0,l1:1,h1:3}],7:[{l0:0,h0:2,l1:0,h1:1}],3:[{l0:0,h0:2,l1:1,h1:3}],10:[{l0:1,h0:0,l1:3,h1:2}],12:[{l0:3,h0:1,l1:2,h1:0}],5:[{l0:2,h0:3,l1:0,h1:1}],6:[{l0:0,h0:2,l1:0,h1:1},{l0:3,h0:1,l1:3,h1:2}],9:[{l0:1,h0:0,l1:1,h1:3},{l0:2,h0:3,l1:2,h1:0}]},l=function(t){"use strict";if(!(this instanceof l))return new l(t);var e=n(5325),i=n(6409),u=n(6546);t=t||{},r.call(this,t);var c,h,d,f,p,m=this,g=this.draw,y=this._exit,v=this._init,x=this.modified,_=this._update;return this.featureType="isoline",this.contour=m.mesh,this.isoline=m.mesh,this._createIsolines=function(){var t,e=m.style.get("value"),n=void 0!==m.style("used")?m.style.get("used"):function(t,n){return a.isNonNullFinite(e(t,n))},i=!1,r=[],o=m._createMesh({used:n,value:e});return(t=m._getValueList(o)).length?(t.forEach(function(t){var e=m._isolinesForValue(o,t);e.length&&(r=r.concat(e),i=i||!!t.label)}),{lines:r,mesh:o,values:t,hasLabels:i}):{}},this._getValueList=function(t){var e,n,i,r,o,s,l,u=m.isoline,c=u.get("values")(t),h=u.get("spacing")(t),d=u.get("count")(t),f=u.get("autofit")(t),p=u.get("levels")(t);if(!t.numVertices||!t.numElements)return[];if(e=a.getMinMaxValues(t.value,u.get("min")(t),u.get("max")(t),!0),t.minValue=e.min,t.maxValue=e.max,(n=t.maxValue-t.minValue)<=0)return[];if(Array.isArray(c))c=(c=c.map(function(t,e){return{value:void 0!==t.value?t.value:t,position:e,level:t.level}})).filter(function(e){return e.value>=t.minValue&&e.value<=t.maxValue});else if(h||f)for(h||(i=n/(2*d/3),o=Math.floor(Math.log10(i)),s=Math.max(0,-o),h=(i=(i/=r=Math.pow(10,o))>=5?5:i>=2?2:1)*r),c=[],l=Math.ceil(t.minValue/h);l<=Math.floor(t.maxValue/h);l+=1)c.push({value:l*h,position:l,fixedDigits:s});else for(c=Array(d),l=0;l<d;l+=1)c[l]={value:t.minValue+n*(l+1)/(d+1),position:l+1};return p.length&&c.forEach(function(t,e){if(void 0===t.level){t.level=0;for(var n=0,i=p[0];n<p.length&&!(t.position%i);i*=p[n+=1])t.level=n+1}if(u.get("label")(t,t.position)){var r=u.get("labelText")(t,t.position);void 0===r&&(r=void 0!==t.fixedDigits?""+parseFloat(t.value.toFixed(t.fixedDigits)):""+t.value),r&&(t.label=r)}}),c},this._addSegment=function(t,e,n){var i,r,o,a,s,l,u=[e,n],c=t.length;for(t.push(u),r=0;r<2;r+=1){for(i=c-1;i>=0;i-=1){if(a=(o=t[i])[0],s=o[o.length-1],n[0]===a[0]&&n[1]===a[1])l=u.concat(o.slice(1));else{if(e[0]!==s[0]||e[1]!==s[1])continue;l=o.concat(u.slice(1))}t.splice(c,1),t[i]=u=l,c=i,e=u[0],n=u[u.length-1];break}if(i<0)break}return t},this._chainVertex=function(t,e,n){var i=n[0],r=n[1],o=3*i,a=3*r,s=(e.value-t.value[i])/(t.value[r]-t.value[i]),l=1-s;return{x:t.pos[o]*l+t.pos[a]*s,y:t.pos[o+1]*l+t.pos[a+1]*s,z:t.pos[o+2]*l+t.pos[a+2]*s}},this._isolinesForValue=function(t,e){var n,i,r,o,a=e.value,l=Array(t.value.length),u=[];for(n=l.length-1;n>=0;n-=1)l[n]=t.value[n]<=a?0:1;var c=t.verticesPerElement,h="square"===t.shape,d=t.elements,f=d.length;for(i=0;i<f;i+=c){if(h){if(0===(r=8*l[d[i]]+4*l[d[i+1]]+2*l[d[i+2]]+l[d[i+3]])||15===r)continue}else if(16===(r=16+4*l[d[i]]+2*l[d[i+1]]+l[d[i+2]])||23===r)continue;s[r].forEach(function(t){u=m._addSegment(u,[d[i+t.l0],d[i+t.h0]],[d[i+t.l1],d[i+t.h1]])})}return o=u.map(function(n){var i=[];return n.forEach(function(n){var r=m._chainVertex(t,e,n);i.length&&r.x===i[i.length-1].x&&r.y===i[i.length-1].y||i.push(r)}),i.closed=i[0].x===i[i.length-1].x&&i[0].y===i[i.length-1].y,i.value=e.value,i.level=e.level,i.position=e.position,i.label=e.label,i}).filter(function(t){return t.length>1}),o},this.modified=function(){var t=x();return d&&d.modified(),p&&p.modified(),t},this.labelPositions=function(){if(m.dataTime().timestamp()>=m.buildTime().timestamp()&&m._build(),h=null,!p)return m;if(!(c&&c.hasLabels&&c.lines&&c.lines.length))return p.data([]),m;var t=m.isoline,n=t.get("labelSpacing"),i=t.get("labelOffset"),r=t.get("labelViewport")(c.mesh),o=m.gcs(),s=m.layer().map(),l=s.gcs(),u=s.rotation(),d=s.size(),f=[],g=0;return c.lines.forEach(function(t,c){if(t.label){var h,p,m,y,v,x,_,b,w,M,A,E=n(t.value,t.value.position),T=i(t.value,t.value.position)||0,S=s.gcsToDisplay(t,o),C=0;if(!(E<=0||isNaN(E))&&(g=Math.max(E,g),T=T+.5-Math.floor(T+.5),h=S.map(function(e,n){if(!t.closed&&n+1===S.length)return 0;var i=Math.sqrt(a.distance2dSquared(e,S[n+1<S.length?n+1:0]));return C+=i,i}),p=Math.floor(C/E)))for(A=e.transformCoordinates(o,l,t),y=(m=C/p)*T,v=0,x=0;x<S.length;x+=1){for(;v+h[x]>=y;)_=x+1===S.length?0:x+1,w=1-(b=(y-v)/h[x]),y+=m,r>0&&((M={x:S[x].x*w+S[_].x*b,y:S[x].y*w+S[_].y*b}).x<-r||M.x>d.width+r||M.y<-r||M.y>d.height+r)||f.push({x:A[x].x*w+A[_].x*b,y:A[x].y*w+A[_].y*b,z:A[x].z*w+A[_].z*b,line:t,rotation:Math.atan2(S[x].y-S[_].y,S[x].x-S[_].x)-u});v+=h[x]}}}),p.gcs(l),p.data(f),p.style("renderThreshold",2*g),h={zoom:s.zoom(),center:s.center(),rotation:u,size:d,labelViewport:r,maxSpacing:g,labelAutoUpdate:t.get("labelAutoUpdate")(c.mesh)},m},this.lastLabelPositions=function(){return Object.assign({},h)},this._updateLabelPositions=function(){var t=h;if(!t||!t.labelAutoUpdate)return m;var e=m.layer().map(),n=e.zoom(),i=e.size(),r=!!(Math.abs(n-t.zoom)>=2);if(!r&&t.labelViewport>0){var o=Math.sqrt(a.distance2dSquared(e.gcsToDisplay(e.center()),e.gcsToDisplay(t.center)))*Math.pow(2,t.zoom-n),s=t.labelViewport/2-2*t.maxSpacing-Math.max(i.width-t.size.width,i.height-t.size.height,0);r=r||o>=s}return r&&m.labelPositions().draw(),m},this._build=function(){if((c=m._createIsolines())&&c.lines&&c.lines.length){d||(d=m.layer().createFeature("line",{selectionAPI:!1,gcs:m.gcs(),visible:m.visible(void 0,!0),style:{closed:function(t){return t.closed}}}),m.dependentFeatures([d]));var t=m.style();if(d.data(c.lines).style(["antialiasing","lineCap","lineJoin","miterLimit","strokeWidth","strokeStyle","strokeColor","strokeOffset","strokeOpacity"].reduce(function(e,n){return n in t&&(e[n]=t[n]),e},{})),c.hasLabels){if(!p){if(!(o.registries.features[m.layer().rendererName()]||{}).text){var e=o.rendererForFeatures(["text"]);f=o.createLayer("feature",m.layer().map(),{renderer:e}),m.layer().addChild(f),m.layer().node().append(f.node())}p=(f||m.layer()).createFeature("text",{selectionAPI:!1,gcs:m.gcs(),visible:m.visible(void 0,!0),style:{text:function(t){return t.line.label}}}).geoOn(i.pan,m._updateLabelPositions)}u.usedStyles.forEach(function(e){"visible"!==e&&p.style(e,t[e])}),m.dependentFeatures([d,p])}}else d&&d.data([]);return m.buildTime().modified(),m.labelPositions(),m},this._update=function(){return _.call(m),(m.dataTime().timestamp()>=m.buildTime().timestamp()||m.updateTime().timestamp()<=m.timestamp())&&m._build(),m.updateTime().modified(),m},this.draw=function(){var t=g();return d&&d.draw(),p&&p.draw(),t},this._exit=function(){p&&((f||m.layer())&&(f||m.layer()).deleteFeature(p),f&&m.layer()&&m.layer().removeChild(f)),d&&m.layer()&&m.layer().deleteFeature(d),p=null,f=null,d=null,m.dependentFeatures([]),y()},this._init=function(t){t=t||{},v.call(m,t);var e=Object.assign({},{opacity:1,value:function(t,e){return m.position()(t,e).z},rotateWithMap:!0,rotation:l.rotationFunction(),strokeWidth:function(t,e,n,i){return n.level+.5},strokeColor:{r:0,g:0,b:0},textStrokeColor:{r:1,g:1,b:1,a:.75},textStrokeWidth:2,fontSize:"12px"},void 0===t.style?{}:t.style);m.style(e),m.isoline(Object.assign({},{count:15,autofit:!0,levels:[5,5],label:function(t){return t.level>=1},labelSpacing:200,labelViewport:1e4,labelAutoUpdate:!0},t.mesh||{},t.contour||{},t.isoline||{})),(t.mesh||t.contour||t.isoline)&&m.dataTime().modified()},this};l.rotationFunction=function(t,e){var n={higher:function(t){return t.rotation},lower:function(t){return t.rotation+Math.PI},map:function(t){var e=t.rotation,n=a.wrapAngle(e,!0);return(n>Math.PI/2||n<-Math.PI/2)&&(e+=Math.PI),e},screen:function(t){var n=t.rotation,i=a.wrapAngle(n+e.rotation(),!0);return(i>Math.PI/2||i<-Math.PI/2)&&(n+=Math.PI),n}};return n[t]||n.higher},i(l,r),t.exports=l},5156:function(t,e,n){var i=n(4626),r=n(5402),o=n(1275),a=n(1098).checkRenderer,s=n(1098).rendererForFeatures,l=n(1098).rendererForAnnotations,u=function(t){"use strict";if(!(this instanceof u))return new u(t);t=t||{},r.call(this,t);var e,i=n(5616),o=n(77),c=n(2274),h=n(1098).createRenderer,d=n(1098).adjustLayerForRenderer,f=n(6409),p=this,m=this._exit,g=void 0===t.id?u.newLayerId():t.id,y=void 0===t.name?"":t.name,v=void 0===t.map?null:t.map,x=null,_=void 0===t.canvas?null:t.canvas,b=t.renderer instanceof c?t.renderer:null,w=!1,M=void 0!==t.renderer?t.renderer instanceof c?t.renderer.api():t.renderer:t.annotations?l(t.annotations):s(t.features),A=void 0===t.autoshareRenderer||t.autoshareRenderer,E=o(),T=o(),S=void 0===t.sticky||t.sticky,C=void 0===t.active||t.active,k=void 0===t.opacity?1:t.opacity,P=t.attribution||null,O=void 0===t.visible||t.visible,L=void 0===t.selectionAPI||t.selectionAPI;if(M=a(M),!v)throw new Error("Layers must be initialized on a map.");function I(){return(p.parent()||p.map()).children().filter(function(t){return t instanceof u})}if(this.rendererName=function(){return M},this.autoshareRenderer=function(){return A},this.zIndex=function(t,n){return void 0===t?e:(n||I().reverse().forEach(function(e){e!==p&&e.zIndex()===t&&e.zIndex(t+1)}),t!==e&&(e=t,x.css("z-index",e),p.geoTrigger(f.layerMove,{layer:p})),p)},this.moveUp=function(t){var e,n,i,r,o=null;for(void 0===t&&(t=1),r=1,t<0&&(r=-1,t=-t),e=I().sort(function(t,e){return r*(t.zIndex()-e.zIndex())}),n=0;n<e.length;n+=1)if(null===o)e[n]===p&&(o=n);else{if(!(n-o<=t))break;i=p.zIndex(),p.zIndex(e[n].zIndex(),!0),e[n].zIndex(i,!0)}return p},this.moveDown=function(t){return void 0===t&&(t=1),p.moveUp(-t)},this.moveToTop=function(){return p.moveUp(I().length-1)},this.moveToBottom=function(){return p.moveDown(I().length-1)},this.sticky=function(){return S},this.active=function(t){return void 0===t?C:(C!==t&&(C=t,x.toggleClass("active",C)),p)},this.node=function(){return x},this.id=function(t){return void 0===t?g:(g=null===t?u.newLayerId():t,p.modified(),p)},this.name=function(t){return void 0===t?y:(y=t,x.attr("id",y),p.modified(),p)},this.map=function(){return v},this.renderer=function(){return b},this._renderer=function(t){return void 0===t?b:(b=t,p)},this.canvas=function(){return _},this._canvas=function(t){return void 0===t?_:(_=t,p)},this.dataTime=function(){return E},this.updateTime=function(){return T},this.initialized=function(t){return void 0!==t?(w=t,p):w},this.toLocal=function(t){return t},this.fromLocal=function(t){return t},this.attribution=function(t){return void 0!==t?(P=t,p.map().updateAttribution(),p):P},this.visible=function(t){return void 0===t?O:(O!==t&&(O=t,x.toggleClass("hidden",!O),p.modified()),p)},this.selectionAPI=function(t){return void 0===t?L:(L!==t&&(L=t),p)},this._init=function(e){if(w)return p;v.node().append(x);var n=Object.assign({},t);return delete n.map,b?p._canvas(b.canvas()):null===M?(p._renderer(null),p._canvas(x)):_?p._renderer(h(M,p,_,n)):(p._renderer(h(M,p,void 0,n)),p._canvas(b.canvas())),x.toggleClass("active",p.active()),w=!0,e||(p.geoOn(f.resize,function(t){p._update({event:t})}),p.geoOn(f.pan,function(t){p._update({event:t})}),p.geoOn(f.rotate,function(t){p._update({event:t})}),p.geoOn(f.zoom,function(t){p._update({event:t})})),p},this._exit=function(){p.geoOff(),b&&b._exit(),x.off(),x.remove(),t={},p._canvas(null),p._renderer(null),m()},this._update=function(t){return p},this.width=function(){return p.map().size().width},this.height=function(){return p.map().size().height},this.opacity=function(t){return void 0!==t?(k=t,x.css("opacity",k),p):k},(x=i(document.createElement("div"))).addClass("geojs-layer"),x.attr("renderer",M),y&&x.attr("id",y),p.opacity(k),p.visible(O),void 0===t.zIndex){var R=-1;I().forEach(function(t){void 0!==t.zIndex()&&(R=Math.max(R,t.zIndex()))}),t.zIndex=R+1}return p.zIndex(t.zIndex),d("all",p),p};u.newLayerId=function(){"use strict";var t=1;return function(){var e=t;return t+=1,e}}(),u.create=function(t,e){"use strict";if((e=e||{}).type=e.type||"feature",e.renderer=void 0===e.renderer?"webgl":e.renderer,e.renderer=a(e.renderer),!e.renderer)return console.warn("Invalid renderer"),null;var n=t.createLayer(e.type,e);return n?(e.features&&e.features.forEach(function(t){t.data=t.data||e.data,t.feature=o.create(n,t)}),n):(console.warn("Unable to create a layer"),null)},i(u,r),t.exports=u},9281:function(t,e,n){var i=n(4626),r=n(1275),o=n(77),a=n(5325),s=n(642),l=function(t){"use strict";if(!(this instanceof l))return new l(t);t=t||{},r.call(this,t);var e,n=this,i=this._init,u=o();return this.featureType="line",this._subfeatureStyles={lineCap:!0,lineJoin:!0,strokeColor:!0,strokeOffset:!0,strokeOpacity:!0,strokeWidth:!0},this.line=function(t){return void 0===t?n.style("line"):(n.style("line",t),n.dataTime().modified(),n.modified(),n)},this.position=function(t){return void 0===t?n.style("position"):(n.style("position",t),n.dataTime().modified(),n.modified(),n)},this._updatePointSearchInfo=function(){if(u.timestamp()>=n.dataTime().timestamp()&&u.timestamp()>=n.timestamp())return e;u.modified(),e=[];for(var t=n.data(),i=n.line(),r=n.style.get("strokeWidth"),o=s.isFunction(n.style("strokeWidth"))?void 0:r(),l=n.position(),c=n.style.get("closed"),h=s.isFunction(n.style("closed"))?void 0:c(),d=n.style.get("uniformLine"),f=s.isFunction(n.style("uniformLine"))?void 0:d(),p=n.gcs(),m=n.layer().map().gcs(),g=a.onlyInvertedY(p,m),y=0;y<t.length;y+=1){for(var v=t[y],x=void 0===h?c(v,y):h,_=void 0,b=void 0,w=void 0,M=void 0,A=void 0,E=void 0,T=void 0,S=void 0,C=[],k=void 0===f?d(v,y):f,P=i(v,y),O=0;O<P.length;O+=1){var L=P[O],I=l(L,O,v,y);g?I={x:I.x,y:-I.y}:p!==m&&(I=a.transformCoordinates(p,m,I)),void 0===E&&(E={x:I.x,y:I.y}),void 0===T&&(T={x:I.x,y:I.y}),I.x<E.x&&(E.x=I.x),I.x>T.x&&(T.x=I.x),I.y<E.y&&(E.y=I.y),I.y>T.y&&(T.y=I.y),k&&O||(S=void 0===o?r(L,O,v,y):o);var R=Math.ceil(S/2)+2;(void 0===T.r||R>T.r)&&(T.r=R);var D=R*R;_&&C.push({u:I,v:_,r:w>R?w:R,r2:M>D?M:D,i:O,j:b}),_=I,b=O,w=R,M=D,!A&&x&&(A={p:I,r:R,r2:D,i:O})}x&&A&&(_.x!==A.p.x||_.y!==A.p.y)&&C.push({u:_,v:A.p,r:w>A.r?w:A.r,r2:M>A.r2?M:A.r2,i:b,j:A.i}),C.min=E,C.max=T,e.push(C)}return e},this.pointSearch=function(t,i){var r=n.data(),o=[],l=[],u={};if(!r||!r.length||!n.layer())return{found:l,index:o,extra:u};n._updatePointSearchInfo();var c=n.layer().map();i=null===i?c.gcs():void 0===i?c.ingcs():i;var h,d,f,p,m=c.unitsPerPixel(c.zoom()),g=m*m,y=a.transformCoordinates(i,c.gcs(),t),v=n.style.get("strokeWidth"),x=n.style.get("strokeOpacity"),_=n.line();for(d=0;d<e.length;d+=1)for(p=e[d],h=null,f=0;f<p.length;f+=1)if(s.distance2dToLineSquared(y,p[f].u,p[f].v)<=p[f].r2*g&&(h||(h=_(r[d],d)),(x(h[p[f].i],p[f].i,r[d],d)>0||x(h[p[f].j],p[f].j,r[d],d)>0)&&(v(h[p[f].i],p[f].i,r[d],d)>0||v(h[p[f].j],p[f].j,r[d],d)>0))){l.push(r[d]),o.push(d),u[d]=f;break}return{found:l,index:o,extra:u}},this.polygonSearch=function(t,i,r){var o,l,u=n.data(),c=[],h=[],d={},f=n.layer().map(),p=n.style.get("strokeWidth"),m=n.style.get("strokeOpacity"),g=n.line();if(r=null===r?f.gcs():void 0===r?f.ingcs():r,t.outer||(t={outer:t,inner:[]}),!u||!u.length||t.outer.length<3)return{found:h,index:c,extra:d};(i=i||{}).partial=i.partial||!1,(t={outer:a.transformCoordinates(r,f.gcs(),t.outer),inner:(t.inner||[]).map(function(t){return a.transformCoordinates(r,f.gcs(),t)})}).outer.forEach(function(t){o||(o={x:t.x,y:t.y},l={x:t.x,y:t.y}),t.x<o.x&&(o.x=t.x),t.x>l.x&&(l.x=t.x),t.y<o.y&&(o.y=t.y),t.y>l.y&&(l.y=t.y)}),n._updatePointSearchInfo();var y,v,x,_,b,w,M=f.unitsPerPixel(f.zoom());for(y=0;y<e.length;y+=1)if(!(!(x=e[y]).max||x.max.x<o.x-x.max.r*M||x.min.x>l.x+x.max.r*M||x.max.y<o.y-x.max.r*M||x.min.y>l.y+x.max.r*M)){var A=void 0,E=void 0,T=void 0;for(v=0;v<x.length;v+=1)if(_=x[v].u,b=x[v].v,w=x[v].r,!(_.x<o.x-w*M&&b.x<o.x-w*M||_.x>l.x+w*M&&b.x>l.x+w*M||_.y<o.y-w*M&&b.y<o.y-w*M||_.y>l.y+w*M&&b.y>l.y+w*M||(T||(T=g(u[y],y)),m(T[x[v].i],x[v].i,u[y],y)<=0&&m(T[x[v].j],x[v].j,u[y],y)<=0||p(T[x[v].i],x[v].i,u[y],y)<=0&&p(T[x[v].j],x[v].j,u[y],y)<=0))){var S=s.distanceToPolygon2d(_,t),C=s.distanceToPolygon2d(b,t);if(S>-w*M&&S<w*M||C>-w*M&&C<w&M||S*C<0){E=!0;break}if(s.crossedLineSegmentPolygon2d(_,b,t)){E=!0;break}for(var k=w*w*M*M,P=0;P<t.outer.length&&!E;P+=1)E=s.distance2dToLineSquared(t.outer[P],_,b)<k;for(var O=0;O<t.inner.length&&!E;O+=1)for(var L=0;L<t.inner[O].length&&!E;L+=1)E=s.distance2dToLineSquared(t.inner[O][L],_,b)<k;if(E)break;S>0&&(A=!0)}(!i.partial&&A&&!E||i.partial&&(A||E))&&(c.push(y),h.push(u[y]),d[y]={partial:E,segment:v<e[y].length?v:0})}return{found:h,index:c,extra:d}},this.rdpSimplifyData=function(t,e,i,r){t=t||n.data(),i=i||n.style.get("position"),r=r||n.style.get("line");var o=n.layer().map(),l=o.gcs(),u=n.gcs(),c=n.style.get("closed");return void 0===e&&(e=.5*o.unitsPerPixel(o.zoom())),t=t.map(function(t,n){var o=r(t,n),h=a.transformCoordinates(u,l,o.map(function(e,r){return i(e,r,t,n)})),d=s.rdpLineSimplify(h,e,c(t,n),[]);for(var f in(d.length<2||2===d.length&&s.distance2dSquared(d[0],d[1])<e*e)&&(d=[]),d=a.transformCoordinates(l,u,d),t)!t.hasOwnProperty(f)||Array.isArray(t)&&f>=0&&f<t.length||(d[f]=t[f]);return d}),n.style("position",s.identityFunction),n.style("line",s.identityFunction),n.data(t),n},this._init=function(t){t=t||{},i.call(n,t);var e=Object.assign({},{strokeWidth:1,strokeColor:{r:1,g:.8431372549,b:0},strokeStyle:"solid",strokeOpacity:1,antialiasing:2,closed:!1,line:s.identityFunction,position:function(t){return Array.isArray(t)?{x:t[0],y:t[1],z:t[2]||0}:t},origin:function(t){return t.length>=3?t.slice(0,3):[0,0,0]}},void 0===t.style?{}:t.style);return void 0!==t.line&&(e.line=t.line),void 0!==t.position&&(e.position=t.position),n.style(e),n.dataTime().modified(),n},this._init(t),this};l.create=function(t,e){"use strict";return(e=e||{}).type="line",r.create(t,e)},l.capabilities={feature:"line",basic:"line.basic",multicolor:"line.multicolor"},i(l,r),t.exports=l},6211:function(t,e,n){var i=n(5616),r=n(4626),o=n(5402),a=function(t){"use strict";if(!(this instanceof a))return new a(t);if(void 0===(t=t||{}).node||null===t.node)return console.warn("map creation requires a node"),this;o.call(this,t);var e,r,s,l,u,c=n(3578),h=n(5325),d=n(642),f=n(1098),p=n(6409),m=n(7908),g=n(4231),y=this,v=this._exit,x=i(t.node),_=t.width||x.width()||512,b=t.height||x.height()||512,w=void 0===t.gcs?"EPSG:3857":t.gcs,M=void 0===t.ingcs?"EPSG:4326":t.ingcs,A={x:0,y:0},E=void 0===t.zoom?4:t.zoom,T=t.rotation?t.rotation:0,S=null,C=null,k={min:0,max:16,origMin:0},P=null,O=null,L=!!t.discreteZoom,I="function"==typeof t.allowRotation?t.allowRotation:void 0===t.allowRotation||!!t.allowRotation,R=t.maxBounds||{},D=t.camera||c(),j=t.animationQueue||[],F=void 0===t.autoResize||t.autoResize,G=t.autoshareRenderer,N=((R.left||0)+(R.right||0))/2,z=((R.bottom||0)+(R.top||0))/2;function B(){var t;void 0!==document.hidden?t="hidden":void 0!==document.msHidden?t="msHidden":void 0!==document.webkitHidden&&(t="webkitHidden"),y.geoTrigger(document[t]?p.hidden:p.unhidden)}function V(t){var e;void 0!==document.hidden?e="visibilitychange":void 0!==document.msHidden?e="msvisibilitychange":void 0!==document.webkitHidden&&(e="webkitvisibilitychange"),document.removeEventListener(e,B),!1!==t&&document.addEventListener(e,B)}function q(t,e){var n=t.zIndex(),i=e.zIndex();if(n!==i)return n-i;var r=t.node()[0],o=e.node()[0],a=r&&r.parentNode,s=o&&o.parentNode;if(a&&s&&a===s){var l=Array.from(a.children),u=l.indexOf(r),c=l.indexOf(o);if(u>=0&&c>=0)return u-c}return a?-1:s?1:0}function U(t,e,n,i,r){t.globalAlpha=e,r&&(t.globalCompositeOperation=r);var o=n.css("transform");o&&"matrix("===o.substr(0,7)?t.setTransform.apply(t,o.substr(7,o.length-8).split(",").map(parseFloat)):t.setTransform(1,0,0,1,0,0),t.drawImage(i,0,0),t.globalCompositeOperation="source-over"}function H(){for(var t=j.splice(0,j.length),e=1;e<t.length;e+=1)try{t[e].apply(y,arguments)}catch(t){console.error(t)}}function W(t,e,n){var i=e.width/2,r=e.height/2,o=Math.sin(n),a=Math.cos(n),s={},l={},u={},c={};return s.x=t.x+-i*a- -r*o,s.y=t.y+-i*o+-r*a,l.x=t.x+i*a- -r*o,l.y=t.y+i*o+-r*a,u.x=t.x+-i*a-r*o,u.y=t.y+-i*o+r*a,c.x=t.x+i*a-r*o,c.y=t.y+i*o+r*a,{left:Math.min(s.x,l.x,u.x,c.x),right:Math.max(s.x,l.x,u.x,c.x),bottom:Math.min(s.y,l.y,u.y,c.y),top:Math.max(s.y,l.y,u.y,c.y)}}function X(t,n){void 0===n&&(n=T),t=function(t,e){return e&&(t=W({x:(t.left+t.right)/2,y:(t.top+t.bottom)/2},{width:Math.abs(t.left-t.right),height:Math.abs(t.top-t.bottom)},e)),t}(t,n);var i=function(t){var e,n,i=t.right-t.left,r=t.top-t.bottom,o=Math.abs(i/r),a=_/b;return o>a?(e=1,n=o/a):(n=1,e=a/o),{x:e,y:n}}(t);return i.y>i.x?-Math.log2(Math.abs(t.right-t.left)*i.x/(_*e)):-Math.log2(Math.abs(t.top-t.bottom)*i.y/(b*e))}function K(){k.min=l?Math.max(k.origMin,X(R)):k.origMin}function Q(t,e,n){if(!I)return 0;if(e||"function"!=typeof I||(t=I(t)),!n){var i=2*Math.PI;t=t%i+(t>=0?0:i),Math.min(Math.abs(t),Math.abs(t-i))<1e-5&&(t=0)}return t}function Z(t,e,n,i){if(!r&&!s)return t;var o,a,l=R;if(e){l=Object.assign({},R);var u,c,h=Math.abs(t.right-t.left),d=Math.abs(t.top-t.bottom),f=Math.abs(Math.sin(e)),p=Math.abs(Math.cos(e));if(t.width&&t.height)u=t.width,c=t.height;else if(Math.abs(f-p)<5e-4)if(_&&b){var m=Math.abs(_/b),g=Math.pow(1+Math.pow(m,2),.5);c=(u=Math.max(h,d)/g)*m}else u=h*p,c=d*f;else u=(p*h-f*d)/(p*p-f*f),c=(p*d-f*h)/(p*p-f*f);var y=h-Math.max(p*u,f*c),v=d-Math.max(p*c,f*u);l.left-=y,l.right+=y,l.top+=v,l.bottom-=v}return i&&(l={left:l.left-(t.right-t.left)/2,right:l.right+(t.right-t.left)/2,top:l.top-(t.bottom-t.top)/2,bottom:l.bottom+(t.bottom-t.top)/2}),r&&(t.right-t.left>l.right-l.left?o=l.left-(t.right-t.left-(l.right-l.left))/2-t.left:t.left<l.left?o=l.left-t.left:t.right>l.right&&(o=l.right-t.right),o&&(!n||n.x*o>0)&&(n&&Math.abs(o)>Math.abs(n.x*n.unit)&&(o=Math.abs(n.x*n.unit)*o/Math.abs(o)),t={left:t.left+=o,right:t.right+=o,top:t.top,bottom:t.bottom})),s&&(t.top-t.bottom>l.top-l.bottom?a=l.bottom-(t.top-t.bottom-(l.top-l.bottom))/2-t.bottom:t.top>l.top?a=l.top-t.top:t.bottom<l.bottom&&(a=l.bottom-t.bottom),a&&(!n||-n.y*a>0)&&(n&&Math.abs(a)>Math.abs(n.y*n.unit)&&(a=Math.abs(n.y*n.unit)*a/Math.abs(a)),t={top:t.top+=a,bottom:t.bottom+=a,left:t.left,right:t.right})),t}function Y(t,e){if(D.rotation=e||0,t.width&&t.height&&e){var n=(t.left+t.right)/2,i=(t.top+t.bottom)/2;D.viewFromCenterSizeRotation({x:n,y:i},t,e)}else D.bounds=t;A={x:(D.bounds.left+D.bounds.right)/2,y:(D.bounds.top+D.bounds.bottom)/2}}function J(){y.size({width:x.width(),height:x.height()})}return R.left=h.transformCoordinates(R.gcs||M,w,{x:void 0!==R.left?R.left:-180,y:z}).x,R.right=h.transformCoordinates(R.gcs||M,w,{x:void 0!==R.right?R.right:180,y:z}).x,R.top=void 0!==R.top?h.transformCoordinates(R.gcs||M,w,{x:N,y:R.top}).y:R.right,R.bottom=void 0!==R.bottom?h.transformCoordinates(R.gcs||M,w,{x:N,y:R.bottom}).y:R.left,e=t.unitsPerPixel||(R.right-R.left)/256,D.viewport={width:_,height:b,left:x.offset().left,top:x.offset().top},t.center=d.normalizeCoordinates(t.center),r=void 0!==t.clampBoundsX&&t.clampBoundsX,s=void 0===t.clampBoundsY||t.clampBoundsY,l=void 0===t.clampZoom||t.clampZoom,this.unitsPerPixel=function(t,n){return t=t||0,n?(e=Math.pow(2,t)*n,y.draw(),y):Math.pow(2,-t)*e},this.animationQueue=function(t){if(void 0===t)return j;if(t!==j){if(j.length){t.length&&t[0]!==j[0]&&window.cancelAnimationFrame(j[0]);for(var e=t.length?1:0;e<j.length;e+=1)t.push(j[e])}j=t}return y},this.autoResize=function(t){return void 0===t?F:(t!==F&&(i(window).off("resize",J),(F=t)&&i(window).on("resize",J)),y)},this.clampBoundsX=function(t){return void 0===t?r:(t!==r&&(r=!!t,y.pan({x:0,y:0})),y)},this.clampBoundsY=function(t){return void 0===t?s:(t!==s&&(s=!!t,y.pan({x:0,y:0})),y)},this.clampZoom=function(t){return void 0===t?l:(t!==l&&(l=!!t,K(),y.zoom(E)),y)},this.allowRotation=function(t){return void 0===t?I:("function"!=typeof t&&(t=!!t),t!==I&&(I=t,y.rotation(T)),y)},this.origin=function(){return Object.assign({},u)},this.camera=function(){return D},this.gcs=function(t){if(void 0===t)return w;if(t!==w){var e=y.center(void 0,void 0);w=t,K();var n=y._fix_zoom(E);n!==E&&y.zoom(n),y.center(e,void 0)}return y},this.ingcs=function(t){return void 0===t?M:(M=t,y)},this.node=function(){return x},this.zoom=function(t,e,n,i,r){if(void 0===t)return E;var o,a,s=e&&(e.mapgcs||e.geo)&&e.map;if(s&&(i=!0),(t=y._fix_zoom(t,n))===E)return y;if(E=t,a=y.boundsFromZoomAndCenter(t,A,T,null,n,i),y.modified(),Y(a,T),o={zoomLevel:E,screenPosition:e?e.map:void 0},r&&"pan"!==r||y.geoTrigger(p.zoom,o),s){var l=y.gcsToDisplay(e.mapgcs||e.geo,e.mapgcs?null:void 0);y.pan({x:e.map.x-l.x,y:e.map.y-l.y},n,!0,r)}else y.pan({x:0,y:0},n,i,r);return y},this.zoomAndCenter=function(t,e,n,i,r,o){return this.zoom(t,void 0,i,r,o||"pan"),this.center(e,n,i,r,o),this},this.pan=function(t,e,n,i){var r={screenDelta:t};if(t.x||t.y){var o=y.unitsPerPixel(E),a=Math.sin(T),s=Math.cos(T);D.pan({x:(t.x*s- -t.y*a)*o,y:(t.x*a+-t.y*s)*o})}var l=D.bounds;if((l=Z(l,T,"limited"===n?{x:t.x,y:t.y,unit:o}:void 0,!0===n))!==D.bounds){var u=y.gcsToDisplay({x:D.bounds.left,y:D.bounds.top},null);Y(l=y.boundsFromZoomAndCenter(E,{x:(l.left+l.right)/2,y:(l.top+l.bottom)/2},T,null,e,!0),T);var c=y.gcsToDisplay({x:D.bounds.left,y:D.bounds.top},null);r.screenDelta.x+=c.x-u.x,r.screenDelta.y+=c.y-u.y}return A=D.displayToWorld({x:_/2,y:b/2}),i||y.geoTrigger(p.pan,r),y.modified(),y},this.rotation=function(t,e,n){if(void 0===t)return T;var i=e&&e.geo&&e.map;if((t=Q(t,n))===T)return y;T=t;var r=y.boundsFromZoomAndCenter(E,A,T,null,n,!0);y.modified(),Y(r,T);var o={rotation:T,screenPosition:e?e.map:void 0};if(y.geoTrigger(p.rotate,o),i){var a=y.gcsToDisplay(e.geo);y.pan({x:e.map.x-a.x,y:e.map.y-a.y},void 0,!0)}else y.pan({x:0,y:0},void 0,!0);return K(),y.zoom(E,void 0,n),y},this.center=function(t,e,n,i,r){var o;return void 0===t?o=Object.assign({},y.worldToGcs(A,e)):(o=y.gcsToWorld(t,e),Y(y.boundsFromZoomAndCenter(E,o,T,null,n,i),T),y.modified(),r||y.geoTrigger(p.pan,{screenDelta:{x:0,y:0}}),y)},this.createLayer=function(t,e){e=e||{},void 0!==y.autoshareRenderer()&&(e=Object.assign({autoshareRenderer:y.autoshareRenderer()},e));var n=f.createLayer(t,y,e);return n&&(y.addChild(n),y.children().forEach(function(t){t instanceof g&&t.moveToTop()}),n._update(),y.modified(),y.geoTrigger(p.layerAdd,{target:y,layer:n})),n},this.deleteLayer=function(t){return null!=t&&(t._exit(),y.removeChild(t),y.modified(),y.geoTrigger(p.layerRemove,{target:y,layer:t})),t},this.size=function(t){if(void 0===t)return{width:_,height:b};var e=y.center();_=t.width||_,b=t.height||b,K();var n=y._fix_zoom(E);return n!==E&&y.zoom(n),y.camera().viewport={width:_,height:b,left:x.offset().left,top:x.offset().top},y.center(e),y.geoTrigger(p.resize,{target:y,width:_,height:b}),y.modified(),y},this.rotatedSize=function(){if(!this.rotation())return{width:_,height:b};var t=W({x:0,y:0},{width:_,height:b},y.rotation());return{width:Math.abs(t.right-t.left),height:Math.abs(t.top-t.bottom)}},this.gcsToWorld=function(t,e){return Array.isArray(t)?t.map(function(t){return y.gcsToWorld(t,e)}):((e=null===e?w:void 0===e?M:e)!==w&&(t=h.transformCoordinates(e,w,t)),u.x||u.y||u.z?t=h.affineForward({origin:u},[t])[0]:"z"in t||(t={x:t.x,y:t.y,z:0}),t)},this.worldToGcs=function(t,e){return Array.isArray(t)?t.map(function(t){return y.worldToGcs(t,e)}):(u.x||u.y||u.z?t=h.affineInverse({origin:u},[t])[0]:"z"in t||(t={x:t.x,y:t.y,z:0}),(e=null===e?w:void 0===e?M:e)!==w&&(t=h.transformCoordinates(w,e,t)),t)},this.gcsToDisplay=function(t,e){return t=y.gcsToWorld(t,e),y.worldToDisplay(t)},this.worldToDisplay=function(t){return Array.isArray(t)?t.map(function(t){return D.worldToDisplay(t)}):D.worldToDisplay(t)},this.displayToGcs=function(t,e){return t=y.displayToWorld(t),y.worldToGcs(t,e)},this.displayToWorld=function(t){return Array.isArray(t)?t.map(function(t){return D.displayToWorld(t)}):D.displayToWorld(t)},this.draw=function(){var t,e=y.children();for(y.geoTrigger(p.draw,{target:y}),y._update(),t=0;t<e.length;t+=1)e[t].draw();return y.geoTrigger(p.drawEnd,{target:y}),y},this.fileReader=function(t,e){return void 0===t?S:("string"==typeof t?((e=e||{}).layer||(e.layer=y.createLayer("feature",Object.assign({},e))),e.renderer=e.layer.renderer().api(),S=f.createFileReader(t,e)):S=t,y)},this._init=function(t){if(null==x)throw new Error("Map require DIV node");return x.data("data-geojs-map")&&i.isFunction(x.data("data-geojs-map").exit)&&x.data("data-geojs-map").exit(),x.addClass("geojs-map"),x.data("data-geojs-map",y),V(),y},this._update=function(t){var e,n=y.children();for(e=0;e<n.length;e+=1)n[e]._update(t);return y},this.exit=function(){V(!1);var t,e=y.children();for(t=e.length-1;t>=0;t-=1)e[t]._exit(),y.removeChild(e[t]);y.interactor()&&(y.interactor().destroy(),y.interactor(null)),j=[],y.node().data("data-geojs-map",null),y.node().off(".geo"),y.node().empty(),i(window).off("resize",J),v()},this.interactor=function(t){return void 0===t?C:(C&&C!==t&&C.destroy(),(C=t)&&(x.attr("tabindex")||x.attr("tabindex",0),C.map(y)),y)},this.zoomRange=function(t,e){return void 0===t?Object.assign({},k):(void 0!==t.max&&(k.max=t.max),void 0!==t.min&&(k.min=k.origMin=t.min),K(),e||y.zoom(E),y)},this.transition=function(t,e,n){if(void 0===t)return P;if(P){var r=d.deepMerge({},P.end);return r.center&&w!==M&&(r.center=h.transformCoordinates(w,M,r.center)),O=Object.assign({},r||{},O||{},t),y}var o=y.unitsPerPixel(0);function a(t){return Math.pow(2,-(t+1))*o*b}var s={center:void 0,zoom:y.zoom(),rotation:y.rotation(),duration:1e3,ease:function(t){return t},interp:function(t,e){return function(n){var r=[];return i.each(t,function(i){r.push(function(t,e,n){return t+(e-t)*n}(t[i],e[i],n))}),r}},done:null,zCoord:!0};function l(e){var n=P.done,i=O;if(!0===P.cancel)return y.geoTrigger(p.transitioncancel,t),n&&n({cancel:!0,source:P.cancelSource,transition:P}),P=null,void(O&&(i=O,O=null,y.transition(i,void 0,e)));if(P.start.time||(P.start.time=e,P.end.time=e+t.duration),P.time=e-P.start.time,e>=P.end.time||i){if(!i){if(P.end.center){var r=E!==y._fix_zoom(P.end.zoom)||!1===t.endClamp;y.center(P.end.center,null,r,r)}y.zoom(P.end.zoom,P.zoomOrigin,!1===t.endClamp,!1===t.endClamp),y.rotation(Q(P.end.rotation))}return y.geoTrigger(p.transitionend,t),n&&n({next:!!i}),P=null,void(O&&(i=O,O=null,y.transition(i,void 0,e)))}var a=P.ease((e-P.start.time)/t.duration),s=P.interp(a);P.zCoord&&(s[2]=function(t){return-Math.log2(t/o/b)-1}(s[2])),y._fix_zoom(s[2],!0)===E?y.center({x:s[0],y:s[1]},null,!0,!0):(A=y.gcsToWorld({x:s[0],y:s[1]},null),y.zoom(s[2],P.zoomOrigin,!0,!0)),y.rotation(s[3],void 0,!0),y.scheduleAnimationFrame(l)}return t.center&&(e=null===e?w:void 0===e?M:e,(t=d.deepMerge({},t)).center=d.normalizeCoordinates(t.center),e!==w&&(t.center=h.transformCoordinates(e,w,t.center))),t=d.deepMerge({},s,t),(P={start:{center:y.center(void 0,null),zoom:y.zoom(),rotation:y.rotation()},end:{center:t.center,zoom:y._fix_zoom(t.zoom),rotation:Q(t.rotation,void 0,!0)},ease:t.ease,zCoord:t.zCoord,done:t.done,duration:t.duration,zoomOrigin:t.zoomOrigin,endClamp:t.endClamp}).interp=t.interp([P.start.center.x,P.start.center.y,t.zCoord?a(P.start.zoom):P.start.zoom,P.start.rotation],[P.end.center?P.end.center.x:P.start.center.x,P.end.center?P.end.center.y:P.start.center.y,t.zCoord?a(P.end.zoom):P.end.zoom,P.end.rotation]),y.geoTrigger(p.transitionstart,t),p.cancelNavigation?(P=null,y.geoTrigger(p.transitionend,t),y):(p.cancelAnimation?(t.duration=0,l(0)):n?l(n):y.scheduleAnimationFrame(l),y)},this.transitionCancel=function(t){return!(!P||!0===P.cancel&&!O)&&(P.cancel=!0,P.cancelSource=t||P.cancelSource||"",O=null,!0)},this.bounds=function(t,e){var n;if(e=null===e?w:void 0===e?M:e,void 0!==t){if(e!==w){var i=h.transformCoordinates(e,w,[{x:t.left,y:t.top},{x:t.right,y:t.bottom}]);t={left:i[0].x,top:i[0].y,right:i[1].x,bottom:i[1].y}}t=Z(t,T),n=y.zoomAndCenterFromBounds(t,T,null),y.zoom(n.zoom,void 0,void 0,void 0,"pan"),y.center(n.center,null)}return y.boundsFromZoomAndCenter(E,A,T,e,!0,!0)},this.maxBounds=function(t,e){if(e=null===e?w:void 0===e?M:e,void 0===t)return{left:h.transformCoordinates(w,e,{x:R.left,y:0}).x,right:h.transformCoordinates(w,e,{x:R.right,y:0}).x,bottom:h.transformCoordinates(w,e,{x:0,y:R.bottom}).y,top:h.transformCoordinates(w,e,{x:0,y:R.top}).y};var n=((t.left||0)+(t.right||0))/2,i=((t.bottom||0)+(t.top||0))/2;return void 0!==t.left&&(R.left=h.transformCoordinates(e,w,{x:t.left,y:i}).x),void 0!==t.right&&(R.right=h.transformCoordinates(e,w,{x:t.right,y:i}).x),void 0!==t.bottom&&(R.bottom=h.transformCoordinates(e,w,{x:n,y:t.bottom}).y),void 0!==t.top&&(R.top=h.transformCoordinates(e,w,{x:n,y:t.top}).y),K(),y.zoom(E),y.pan({x:0,y:0}),y},this.corners=function(t){return[y.displayToGcs({x:0,y:0},t),y.displayToGcs({x:_,y:0},t),y.displayToGcs({x:_,y:b},t),y.displayToGcs({x:0,y:b},t)]},this.zoomAndCenterFromBounds=function(t,e,n){var i,r;if((n=null===n?w:void 0===n?M:n)!==w){var o=h.transformCoordinates(n,w,[{x:t.left,y:t.top},{x:t.right,y:t.bottom}]);t={left:o[0].x,top:o[0].y,right:o[1].x,bottom:o[1].y}}if(t.left>=t.right||t.bottom>=t.top)throw new Error("Invalid bounds provided");return r=y._fix_zoom(X(t,e)),i={x:((t=Z(t,e)).left+t.right)/2-u.x,y:(t.top+t.bottom)/2-u.y},n!==w&&(i=h.transformCoordinates(w,n,i)),{zoom:r,center:i}},this.boundsFromZoomAndCenter=function(t,e,n,i,r,o){var a,s,l,c,d,f;if(i=null===i?w:void 0===i?M:i,t=y._fix_zoom(t,r),f=y.unitsPerPixel(t),e=y.gcsToWorld(e,null),l=(a=_*f)/2,c=(s=b*f)/2,n?(e.x+=u.x,e.y+=u.y,(d=W(e,{width:a,height:s},n)).width=a,d.height=s,d=Z(d,n,void 0,o)):d=Z(d={left:e.x-l+u.x,right:e.x+l+u.x,bottom:e.y-c+u.y,top:e.y+c+u.y},0,void 0,o),i!==w){var p=h.transformCoordinates(w,i,[[d.left,d.top],[d.right,d.bottom]]);d={left:p[0][0],top:p[0][1],right:p[1][0],bottom:p[1][1]}}return d.width=a,d.height=s,d},this.discreteZoom=function(t){return void 0===t?L:(L!==(t=!!t)&&((L=t)&&y.zoom(Math.round(y.zoom())),y.interactor()&&y.interactor().options({discreteZoom:L})),y)},this.layers=this.children,this.sortedLayers=function(){return y.children().sort(q)},this.listSceneObjects=function(t){var e=[];return(t=t||y.sortedLayers()).forEach(function(t){if(e.indexOf(t)<0&&(e.push(t),t.children)){var n=t.children();n.length&&(e=e.concat(y.listSceneObjects(n)))}}),e},this.updateAttribution=function(){y.node().find(".geo-attribution").remove();var t=i("<div/>").addClass("geo-attribution").on("mousedown",function(t){t.stopPropagation()});return y.children().forEach(function(e){var n=e.attribution();n&&i("<span/>").addClass("geo-attribution-layer").html(n).appendTo(t)}),i("span",t).length&&t.appendTo(y.node()),y},this.screenshot=function(t,e,n,r){var o;if(!t||Array.isArray(t)||t.renderer||(e=e||t.type,n=n||t.encoderOptions,r=r||t,t=t.layers),(r=r||{}).wait){var a=Object.assign({},r,{wait:!1});o=i.Deferred();var s=function(){window.requestAnimationFrame(function(){o.resolve()})};return"idle"===r.wait?y.onIdle(s):s(),o.then(function(){return y.screenshot(t,e,n,a)})}o=i.when(),t?Array.isArray(t)||(t=[t]):(t=y.layers(),null!==r.attribution&&void 0!==r.attribution||(r.attribution=!0)),t=(t=t.filter(function(t){return y.layers().indexOf(t)>=0&&t.opacity()>0&&(!t.visible||t.visible())})).sort(q);var l=document.createElement("canvas");l.width=_,l.height=b;var u=l.getContext("2d");if(!1!==r.background&&null!==r.background){var c=r.background;void 0===r.background&&(u.fillStyle="white",u.fillRect(0,0,l.width,l.height),y.node().parents().get().reverse().forEach(function(t){(c=window.getComputedStyle(t).backgroundColor)&&"transparent"!==c&&(u.fillStyle=c,u.fillRect(0,0,l.width,l.height))}),c=window.getComputedStyle(y.node()[0]).backgroundColor),c&&"transparent"!==c&&(u.fillStyle=c,u.fillRect(0,0,l.width,l.height))}return t.forEach(function(t){var e=t.opacity();t.node().children("canvas").each(function(){var n=i(this);o=o.then(function(){t.renderer()&&"webgl"===t.renderer().api()&&t.renderer()._renderFrame(),U(u,e,n,n[0],t.node().css("mix-blend-mode"))})}),!t.node().children().not("canvas").length&&t.node().children().length||t.renderer()&&"webgl"===t.renderer().api()||(o=o.then(function(){return d.htmlToImage(t.node(),1).done(function(e){U(u,1,i([]),e,t.node().css("mix-blend-mode"))})}))}),r.attribution&&y.node().find(".geo-attribution").each(function(){var t=i(this);o=o.then(function(){return d.htmlToImage(t,1).done(function(t){U(u,1,i([]),t)})})}),r.html&&i(r.html).each(function(){var t=i(this);o=o.then(function(){return d.htmlToImage(t,1).done(function(e){U(u,1,i([]),e,t.css("mix-blend-mode"))})})}),o=o.then(function(){var t=l;if("canvas"!==e)try{l=l.toDataURL(e,n)}catch(t){console.warn("Failed to convert screenshot to output",t);var r=i.Deferred();return r.reject(),r}return y.geoTrigger(p.screenshot.ready,{canvas:t,screenshot:l}),l})},this.scheduleAnimationFrame=function(t,e){j.length||j.push(window.requestAnimationFrame(H));var n=j.indexOf(t,1);if(n>=0){if(!e)return;if(j.splice(n,1),"remove"===e)return}return j.push(t),j[0]},this._fix_zoom=function(t,e){return t=Math.round(1e6*t)/1e6,t=Math.max(Math.min(k.max,t),k.min),L&&!e&&(t=Math.round(t))<k.min&&(t=Math.ceil(k.min)),t},this.autoshareRenderer=function(t){return void 0===t?G:(G=null===t?void 0:t,y)},this._version=n(4081),this._geo=n(2257),this._init(t),this.node().on("dragover.geo",function(t){var e=t.originalEvent;y.fileReader()&&(e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy")}).on("drop.geo",function(t){var e,n,i=t.originalEvent,r=y.fileReader();function o(){y.draw()}if(r)for(i.stopPropagation(),i.preventDefault(),e=0;e<i.dataTransfer.files.length;e+=1)n=i.dataTransfer.files[e],r.canRead(n)&&r.read(n,o)}),u={x:0,y:0},this.zoomRange(t,!0),E=this._fix_zoom(E),T=Q(T),this.center(Object.assign({},t.center||A),void 0),null!==t.interactor&&this.interactor(t.interactor||m({discreteZoom:L})),F&&i(window).on("resize",J),y.geoOn([p.layerAdd,p.layerRemove],y.updateAttribution),this};a.create=function(t){"use strict";var e=a(t),i=n(5156);return e&&e.zoom?(t.data=t.data||[],t.layers=t.layers||[],t.layers.forEach(function(n){n.data=n.data||t.data,n.layer=i.create(e,n)}),e):(console.warn("Could not create map."),null)},r(a,o),t.exports=a},7908:function(t,e,n){var i=n(4626),r=n(1338),o=n(642),a=n(7549),s=function(t){"use strict";if(!(this instanceof s))return new s(t);r.call(this);var e,i,l,u,c,h,d,f,p,m,g=n(5616),y=n(6409),v=n(8695),x=n(642).throttle,_=n(642).debounce,b=n(642).actionMatch,w=n(3842),M=this,A=0,E=null,T=!1,S=!1,C=function(){};function k(t){var e=t.x,n=t.y;return Math.sqrt(e*e+n*n)}function P(){h={boundDocumentHandlers:h.boundDocumentHandlers}}function O(t,n){n=n<=0?30:n;var i=function(){var t,n,i,r;if(!e.spring.enabled)return{x:0,y:0};var o=M.map().maxBounds(void 0,null),a=M.map().gcsToDisplay({x:o.left,y:o.top},null),s=M.map().gcsToDisplay({x:o.right,y:o.bottom},null),l=e.spring.springConstant,u=M.map().node().width(),c=M.map().node().height();return t=l*Math.max(0,a.x),n=l*Math.max(0,u-s.x),i=l*Math.max(0,a.y)/2,r=l*Math.max(0,c-s.y)/2,{x:t-n,y:i-r}}(),r=k(t),o=t.x/r,a=t.y/r;return r*=Math.exp(-e.momentum.drag*n),k(i)*n+r<e.momentum.minSpeed?null:(r>0?(o*=r,a*=r):(o=0,a=0),{x:o-i.x*n,y:a-i.y*n})}return e=o.deepMerge({},{throttle:30,discreteZoom:!1,actions:[{action:v.pan,input:"left",modifiers:{shift:!1,ctrl:!1},owner:"geo.mapInteractor",name:"button pan"},{action:v.zoom,input:"right",modifiers:{shift:!1,ctrl:!1},owner:"geo.mapInteractor",name:"button zoom"},{action:v.zoom,input:"wheel",modifiers:{shift:!1},owner:"geo.mapInteractor",name:"wheel zoom"},{action:v.rotate,input:"left",modifiers:{shift:!1,ctrl:!0},owner:"geo.mapInteractor",name:"button rotate"},{action:v.rotate,input:"wheel",modifiers:{shift:!0,ctrl:!1},owner:"geo.mapInteractor",name:"wheel rotate"},{action:v.select,input:"left",modifiers:{shift:!0,ctrl:!0},selectionRectangle:y.select,owner:"geo.mapInteractor",name:"drag select"},{action:v.zoomselect,input:"left",modifiers:{shift:!0,ctrl:!1},selectionRectangle:y.zoomselect,owner:"geo.mapInteractor",name:"drag zoom"},{action:v.unzoomselect,input:"right",modifiers:{shift:!0,ctrl:!1},selectionRectangle:y.unzoomselect,owner:"geo.mapInteractor",name:"drag unzoom"},{action:v.pan,input:"pan",owner:"geo.mapInteractor",name:"touch pan"},{action:v.zoomrotate,input:"rotate",owner:"geo.mapInteractor",name:"touch zoom and rotate"},{action:v.pan,input:"middle",modifiers:{shift:!1,ctrl:!1},owner:"geo.mapInteractor",name:"button pan"}],click:{enabled:!0,buttons:{left:!0,right:!0,middle:!0},duration:0,cancelOnMove:!0},keyboard:{actions:{"zoom.in":["plus","shift+plus","shift+ctrl+plus","=","shift+=","shift+ctrl+="],"zoom.out":["-","shift+-","shift+ctrl+-","_","shift+_","shift+ctrl+_"],"zoom.0":["1"],"zoom.3":["2"],"zoom.6":["3"],"zoom.9":["4"],"zoom.12":["5"],"zoom.15":["6"],"zoom.18":["7"],"pan.left":["left","shift+left","shift+ctrl+left"],"pan.right":["right","shift+right","shift+ctrl+right"],"pan.up":["up","shift+up","shift+ctrl+up"],"pan.down":["down","shift+down","shift+ctrl+down"],"rotate.ccw":["<","shift+<","shift+ctrl+<",".","shift+.","shift+ctrl+."],"rotate.cw":[">","shift+>","shift+ctrl+>",",","shift+,","shift+ctrl+,"],"rotate.0":["0"]},meta:{0:{shift:!1,ctrl:!1},1:{shift:!0,ctrl:!0},2:{shift:!0,ctrl:!1}},metakeyMouseEvents:["shift","ctrl","shift+ctrl","shift+alt","shift+meta"],focusHighlight:!0},alwaysTouch:!1,wheelScaleX:1,wheelScaleY:1,zoomScale:1,rotateWheelScale:6*Math.PI/180,zoomrotateMinimumRotation:5*Math.PI/180,zoomrotateReverseRotation:4*Math.PI/180,zoomrotateMinimumZoom:.05,zoomrotateMinimumPan:5,touchPanDelay:50,momentum:{enabled:!0,maxSpeed:2.5,minSpeed:.01,stopTime:250,drag:.01,actions:[v.pan,v.zoom]},spring:{enabled:!1,springConstant:5e-5},zoomAnimation:{enabled:!0,duration:500,ease:function(t){return(2-t)*t}}},t||{}),t&&t.actions&&(e.actions=o.deepMerge([],t.actions)),t&&t.momentum&&t.momentum.actions&&(e.momentum.actions=o.deepMerge([],t.momentum.actions)),t&&t.keyboard&&void 0!==t.keyboard.actions&&(e.keyboard.actions=o.deepMerge({},t.keyboard.actions)),i={page:{x:0,y:0},map:{x:0,y:0},geo:{x:0,y:0},mapgcs:{x:0,y:0},buttons:{left:!1,right:!1,middle:!1},modifiers:{alt:!1,ctrl:!1,shift:!1,meta:!1},time:new Date,deltaTime:1,velocity:{x:0,y:0}},h={},d={},this._handleKeys=function(t,n,i){i&&!0===i.simulated&&(n=i);var r,o,a=e.keyboard.meta||{0:{}},s=M.map(),l=s.size(),u=t,c="",h={};for(r in a)a.hasOwnProperty(r)&&(void 0!==a[r].shift&&n.shiftKey!==!!a[r].shift||void 0!==a[r].ctrl&&n.ctrlKey!==!!a[r].ctrl||void 0!==a[r].alt&&n.altKey!==!!a[r].alt||void 0!==a[r].meta&&n.metaKey!==!!a[r].meta||(o=r));if(void 0!==o){switch(n.stopPropagation(),n.preventDefault(),t.indexOf(".")>=0&&(u=t.substr(0,t.indexOf(".")),c=t.substr(t.indexOf(".")+1)),u){case"zoom":switch(c){case"in":h.zoomDelta=[.05,.25,1][o];break;case"out":h.zoomDelta=-[.05,.25,1][o];break;default:isNaN(parseFloat(c))||(h.zoom=parseFloat(c))}break;case"pan":switch(c){case"down":h.panY=-Math.max(1,[0,.05,.5][o]*l.height);break;case"left":h.panX=Math.max(1,[0,.05,.5][o]*l.width);break;case"right":h.panX=-Math.max(1,[0,.05,.5][o]*l.width);break;case"up":h.panY=Math.max(1,[0,.05,.5][o]*l.height)}break;case"rotate":switch(c){case"ccw":h.rotationDelta=[1,5,90][o]*Math.PI/180;break;case"cw":h.rotationDelta=-[1,5,90][o]*Math.PI/180;break;default:isNaN(parseFloat(c))||(h.rotation=parseFloat(c))}}s.geoTrigger(y.keyaction,{move:h,action:t,factor:o,event:n}),h.cancel||(void 0!==h.zoom?s.zoom(h.zoom):h.zoomDelta&&s.zoom(s.zoom()+h.zoomDelta),void 0!==h.rotation?s.rotation(h.rotation):h.rotationDelta&&s.rotation(s.rotation()+h.rotationDelta),(h.panX||h.panY)&&s.pan({x:h.panX||0,y:h.panY||0}))}},this.hasTouchSupport=function(){return"ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof window.DocumentTouch||(navigator.msMaxTouchPoints||navigator.maxTouchPoints)>1},this._handleTouch=function(t){var n=!1;if("mouse"===t.pointerType&&c.touchSupport&&(n=!0),"hammer.input"===t.type){if("pan"!==c.lastEventType||1===t.pointers.length)return;n=!0,c.lastEventType=null}var i=/^(.*)(start|end|move|tap)$/.exec(t.type);if(i&&3===i.length||(n=!0),n)h.boundDocumentHandlers&&c.lastEvent&&M._handleMouseUpDocument(c.lastEvent);else{t.which=i[1];var r=(new Date).valueOf();"pan"===t.which&&"pan"!==c.lastEventType&&r-c.lastTime<e.touchPanDelay||(c.lastTime=r,c.lastEventType=t.which,c.lastEvent=t,void 0===t.pageX&&void 0!==t.center&&void 0!==t.center.x&&(t.pageX=t.center.x,t.pageY=t.center.y),"start"===i[2]&&(M._handleMouseDown(t),M._setClickMaybe(!1),h.boundDocumentHandlers&&g(document).on("mousemove.geojs",M._handleMouseUpDocument)),"start"!==i[2]&&"move"!==i[2]||(h.boundDocumentHandlers?M._handleMouseMoveDocument(t):M._handleMouseMove(t)),"end"!==i[2]&&"cancel"!==i[2]||(h.boundDocumentHandlers?M._handleMouseUpDocument(t):M._handleMouseUp(t),c.lastEvent=null),"tap"!==i[2]||h.boundDocumentHandlers||(t.which=1,c.lastEventType=null,M._handleMouseDown(t),M._handleMouseUp(t),c.lastEventType=i[2]))}},this._repeatMouseMoveEvent=function(t){if(i&&i.modifiers){var e=i.modifiers.alt,n=i.modifiers.ctrl,r=i.modifiers.meta,o=i.modifiers.shift;M._getMouseModifiers(t),i.modifiers.alt===e&&i.modifiers.ctrl===n&&i.modifiers.meta===r&&i.modifiers.shift===o||(h.boundDocumentHandlers?M.map().geoTrigger(y.actionmove,{state:M.state(),mouse:M.mouse(),event:t}):M.map().geoTrigger(y.mousemove,M.mouse()))}},this.retriggerMouseMove=function(){M.map().geoTrigger(y.mousemove,M.mouse())},this._connectEvents=function(){if(!e.map)return M;M._disconnectEvents(),f=g(e.map.node()),M._handleMouseWheel=function(){var t={};function n(n){var i,r;T||(t!==d&&(d=t={kind:"wheel",scroll:{x:0,y:0}}),n.preventDefault(),n.deltaFactor=1,1===n.originalEvent.deltaMode?n.deltaFactor=40:2===n.originalEvent.deltaMode&&(n.deltaFactor=g(window).height()),i=n.originalEvent.deltaX||0,r=n.originalEvent.deltaY||0,i=i*e.wheelScaleX*n.deltaFactor/120,r=r*e.wheelScaleY*n.deltaFactor/120,t.scroll.x+=i,t.scroll.y+=r)}function r(n){var r,o;if(t===d){if(M._getMousePosition(n),M._getMouseButton(n),M._getMouseModifiers(n),o=(b({wheel:!0},i.modifiers,e.actions)||{}).action){var a=M.map().transitionCancel("wheel."+o);switch((a|=M.cancel(v.momentum,!0))&&(i.geo=M.map().displayToGcs(i.map),i.mapgcs=M.map().displayToGcs(i.map,null)),o){case v.pan:M.map().pan({x:d.scroll.x,y:d.scroll.y},void 0,"limited");break;case v.zoom:r=-d.scroll.y,C(r,i);break;case v.rotate:M.map().rotation(M.map().rotation()+d.scroll.y*e.rotateWheelScale,i)}M.map().geoTrigger(y.actionwheel,{state:M.state(),mouse:M.mouse(),eventData:n})}d={}}}return e.throttle>0?x(e.throttle,!1,r,n):function(t){n(t),r(t)}}(),C=function(){var t,n,i,r=0,a=400;function s(a,s){var l,u=M.map();t=o.deepMerge({},s),r+=a,void 0===i&&(n=i=u.zoom()),i+=a,u&&Math.abs(r)>=1&&e.discreteZoom&&!e.zoomAnimation.enabled&&(l=Math.round(r+u.zoom()),r=r+u.zoom()-l,u.zoom(l,t))}function l(){var o,a=M.map();a&&(e.zoomAnimation.enabled?(o=i,e.discreteZoom&&(o=Math.round(o))===n&&i!==n&&(o=n+(i>n?1:-1)),(o=Math.round(1e6*a._fix_zoom(o))/1e6)!==a.zoom()?(a.transitionCancel("debounced_zoom."+v.zoom),a.transition({zoom:o,zoomOrigin:t,duration:e.zoomAnimation.duration,ease:e.zoomAnimation.ease,done:function(t){t=t||{};var n=new RegExp("\\."+v.zoom+"$");t.next||t.cancel&&!((""+t.source).search(n)<0)||(i=void 0),e.discreteZoom&&t.cancel&&t.transition&&t.transition.end&&(""+t.source).search(n)<0&&a.zoom(t.transition.end.zoom,t.transition.end.zoomOrigin)}})):i=void 0):(o=r+a.zoom(),e.discreteZoom&&(o=Math.round(o)),a.zoom(o,t))),r=0}!0!==e.discreteZoom&&e.discreteZoom>0&&(a=e.discreteZoom);return(!0===e.discreteZoom||e.discreteZoom>0)&&!e.zoomAnimation.enabled?_(a,!1,l,s):function(t,e){(t||void 0!==i)&&(s(t,e),l())}}(),o.adjustActions(e.actions);var t={};if(["right","pan","rotate"].forEach(function(n){t[n]=e.actions.some(function(t){return t.input[n]})}),f.on("wheel.geojs",M._handleMouseWheel),f.on("mousemove.geojs",M._handleMouseMove),f.on("mousedown.geojs",M._handleMouseDown),f.on("mouseup.geojs",M._handleMouseUp),f.on("dragstart",function(){return!1}),t.right&&f.on("contextmenu.geojs",function(){return!1}),e.keyboard&&e.keyboard.actions){l=a(f[0]);var r=[];for(var s in e.keyboard.actions)e.keyboard.actions.hasOwnProperty(s)&&(l.bind(e.keyboard.actions[s],function(t){return function(e,n){M._handleKeys(t,e,n)}}(s)),r=r.concat(e.keyboard.actions[s]));e.keyboard.metakeyMouseEvents&&e.keyboard.metakeyMouseEvents.forEach(function(t){l.bind(t,M._repeatMouseMoveEvent,"keydown"),l.bind(t,M._repeatMouseMoveEvent,"keyup"),r.push(t)}),u=r}if(f.toggleClass("highlight-focus",!!(u&&u.length&&e.keyboard.focusHighlight)),(M.hasTouchSupport()||e.alwaysTouch)&&(t.pan||t.rotate)){var h;try{(h=n(7606))&&h.Manager||(h=void 0)}catch(t){}if(void 0!==h){var p=[],m=["hammer.input"];t.rotate&&(p.push([h.Rotate,{enable:!0}]),m=m.concat(["rotatestart","rotateend","rotatemove"])),t.pan&&(p.push([h.Pan,{direction:h.DIRECTION_ALL}]),m=m.concat(["panstart","panend","panmove"])),p.push([h.Tap,{event:"doubletap",taps:2}]),p.push([h.Tap,{event:"singletap"},void 0,["doubletap"]]),m=m.concat(["singletap"]);var w={recognizers:p,preventDefault:!0};(c={manager:new h.Manager(f[0],w),touchSupport:M.hasTouchSupport(),lastTime:0}).manager.get("doubletap").recognizeWith("singletap"),m.forEach(function(t){c.manager.on(t,M._handleTouch)})}}return M},this._disconnectEvents=function(){return u&&(l&&l.unbind(u),u=null,l=null),c&&(c.manager.destroy(),c=null),f&&(f.off(".geojs"),f=null),M._handleMouseWheel=function(){},C=function(){},M},this.map=function(t){return void 0!==t?(e.map=t,M._connectEvents(),M):e.map},this.options=function(t){return void 0===t?Object.assign({},e):(Object.assign(e,t),M._connectEvents(),M)},this._getMousePosition=function(t){if(void 0!==t.pageX&&void 0!==t.pageY){var e,n,r=f.offset();e=(n=(new Date).valueOf())-i.time,i.time=n,i.deltaTime=e,i.velocity={x:(t.pageX-i.page.x)/e,y:(t.pageY-i.page.y)/e},i.page={x:t.pageX,y:t.pageY},i.map={x:t.pageX-r.left,y:t.pageY-r.top};try{i.geo=M.map().displayToGcs(i.map),i.mapgcs=M.map().displayToGcs(i.map,null)}catch(t){i.geo=i.mapgcs=null}}},this._getMouseButton=function(t){if(void 0!==t.buttons||void 0!==t.which){for(var e in i.buttons)i.buttons.hasOwnProperty(e)&&(i.buttons[e]=!1);if(void 0!==t.buttons)i.buttons.left=!!(1&t.buttons),i.buttons.right=!!(2&t.buttons),i.buttons.middle=!!(4&t.buttons);else if("mouseup"!==t.type)switch(t.which){case 1:i.buttons.left=!0;break;case 2:i.buttons.middle=!0;break;case 3:i.buttons.right=!0}!t.which||t.which>=1&&t.which<=3||(i.buttons[t.which]=!0)}},this._getMouseModifiers=function(t){i.modifiers.alt=t.altKey,i.modifiers.ctrl=t.ctrlKey,i.modifiers.meta=t.metaKey,i.modifiers.shift=t.shiftKey},this._getSelection=function(){var t=h.origin,e=M.mouse(),n=M.map(),i={},r={},a=e.map;if(h.actionRecord&&o.isFunction(h.actionRecord.selectionConstraint)){var s=h.actionRecord.selectionConstraint(e.mapgcs,t.mapgcs);a=s?n.gcsToDisplay(s.pos,null):a}else if(e.modifiers.shift){var l=Math.pow(Math.abs((a.x-t.map.x)*(a.y-t.map.y)),.5);a={x:t.map.x+Math.sign(a.x-t.map.x)*l,y:t.map.y+Math.sign(a.y-t.map.y)*l}}return i.upperLeft={x:Math.min(t.map.x,a.x),y:Math.min(t.map.y,a.y)},i.lowerRight={x:Math.max(t.map.x,a.x),y:Math.max(t.map.y,a.y)},i.upperRight={x:i.lowerRight.x,y:i.upperLeft.y},i.lowerLeft={x:i.upperLeft.x,y:i.lowerRight.y},r.upperLeft=n.displayToGcs(i.upperLeft,null),r.lowerRight=n.displayToGcs(i.lowerRight,null),r.upperRight=n.displayToGcs(i.upperRight,null),r.lowerLeft=n.displayToGcs(i.lowerLeft,null),p.data([{ul:r.upperLeft,ur:r.upperRight,ll:r.lowerLeft,lr:r.lowerRight}]),p.draw(),{display:i,gcs:r,mouse:e,origin:Object.assign({},h.origin)}},this.cancel=function(t,e){var n;return(n=t?h.action===t:!!h.action)&&(e||(d={}),P()),n},this._setClickMaybe=function(t){S=t,m&&(window.clearTimeout(m),m=null)},this._handleMouseDown=function(t){var n,r;if(!(T||c&&"tap"===c.lastEventType&&(new Date).valueOf()-c.lastTime<1e3)){M._getMousePosition(t),M._getMouseButton(t),M._getMouseModifiers(t),M.map().geoTrigger(y.mousedown,M.mouse()),!e.click.enabled||i.buttons.left&&!e.click.buttons.left||i.buttons.right&&!e.click.buttons.right||i.buttons.middle&&!e.click.buttons.middle||(M._setClickMaybe({x:i.page.x,y:i.page.y,buttons:Object.assign({},i.buttons)}),e.click.duration>0&&(m=window.setTimeout(function(){S=!1,m=null},e.click.duration))),n=((r=b(i.buttons,i.modifiers,e.actions))||{}).action;var a=M.map();a.transitionCancel("_handleMouseDown"+(n?"."+n:"")),M.cancel(v.momentum),i.velocity={x:0,y:0},n&&(d={kind:"move"},A+=1,h={action:n,actionRecord:r,origin:o.deepMerge({},i),initialZoom:a.zoom(),initialRotation:a.rotation(),initialEventRotation:t.rotation,stateId:A,delta:{x:0,y:0}},r.selectionRectangle&&(E&&(E.clear(),a.deleteLayer(E),E=null),E=a.createLayer("feature",{features:[w.capabilities.color],autoshareRenderer:!1}),(p=E.createFeature("quad",{gcs:a.gcs()})).style({opacity:.25,color:{r:.3,g:.3,b:.3}}),a.geoTrigger(y.brushstart,M._getSelection())),a.geoTrigger(y.actiondown,{state:M.state(),mouse:M.mouse(),event:t}),e.throttle>0?g(document).on("mousemove.geojs",x(e.throttle,M._handleMouseMoveDocument)):g(document).on("mousemove.geojs",M._handleMouseMoveDocument),g(document).on("mouseup.geojs",M._handleMouseUpDocument),h.boundDocumentHandlers=!0)}},this._handleMouseMove=function(t){T||h.boundDocumentHandlers||(e.click.cancelOnMove&&S&&M._setClickMaybe(!1),M._getMousePosition(t),M._getMouseButton(t),M._getMouseModifiers(t),S||M.map().geoTrigger(y.mousemove,M.mouse()))},this._handleZoomrotate=function(t){var n=Math.log2(t.scale);if(!h.zoomrotateAllowZoom&&n&&Math.abs(n)>=Math.log2(1+e.zoomrotateMinimumZoom)&&(e.zoomrotateMinimumZoom&&(h.initialZoom-=n),h.zoomrotateAllowZoom=!0),h.zoomrotateAllowZoom&&n){var i=h.initialZoom+n;M.map().zoom(i,h.origin)}var r=(t.rotation-h.initialEventRotation)*Math.PI/180;if(!h.zoomrotateAllowRotation&&r&&Math.abs(r)>=e.zoomrotateMinimumRotation&&(e.zoomrotateMinimumRotation&&(h.initialEventRotation=t.rotation,r=0),h.zoomrotateAllowRotation=!0),h.zoomrotateAllowRotation){var a=h.initialRotation+r;(r=o.wrapAngle(a-M.map().rotation()))&&(r*(h.lastRotationDelta||0)>=0||Math.abs(r)>=e.zoomrotateReverseRotation)&&(M.map().rotation(a,h.origin),h.lastRotationDelta=r)}var s=h.origin.page;if(h.initialEventGeo){var l=f.offset();(s=M.map().gcsToDisplay(h.initialEventGeo)).x+=l.left,s.y+=l.top}var u=t.pageX-s.x,c=t.pageY-s.y,d=u*u+c*c;!h.zoomrotateAllowPan&&d&&d>=e.zoomrotateMinimumPan*e.zoomrotateMinimumPan&&(e.zoomrotateMinimumPan?(u=c=0,h.initialEventGeo=M.mouse().geo):h.initialEventGeo=h.origin.geo,h.zoomrotateAllowPan=!0),h.zoomrotateAllowPan&&(u||c)&&M.map().pan({x:u,y:c})},this._handleMouseMoveDocument=function(t){var n,r,o;if(M.map()&&!T&&"move"===d.kind){if(M._getMousePosition(t),M._getMouseButton(t),M._getMouseModifiers(t),e.click.cancelOnMove)if(void 0===S.x||void 0===S.y)M._setClickMaybe(!1);else if(!0!==e.click.cancelOnMove||i.page.x===S.x&&i.page.y===S.y){Math.sqrt(Math.pow(i.page.x-S.x,2)+Math.pow(i.page.y-S.y,2))>=e.click.cancelOnMove&&M._setClickMaybe(!1)}else M._setClickMaybe(!1);if(!S)if(h.action){if(n=i.map.x-h.origin.map.x-h.delta.x,r=i.map.y-h.origin.map.y-h.delta.y,h.delta.x+=n,h.delta.y+=r,h.action===v.pan)M.map().pan({x:n,y:r},void 0,"limited");else if(h.action===v.zoom)C(-r*e.zoomScale/120,h);else if(h.action===v.rotate){var a,s;void 0===h.origin.rotation&&(a=h.origin.map.x-M.map().size().width/2,s=h.origin.map.y-M.map().size().height/2,h.origin.rotation=M.map().rotation()-Math.atan2(s,a)),a=i.map.x-M.map().size().width/2,s=i.map.y-M.map().size().height/2,M.map().rotation(h.origin.rotation+Math.atan2(s,a))}else h.action===v.zoomrotate?M._handleZoomrotate(t):h.actionRecord.selectionRectangle&&(o=M._getSelection(),M.map().geoTrigger(y.brush,o));M.map().geoTrigger(y.actionmove,{state:M.state(),mouse:M.mouse(),event:t}),t.preventDefault()}else console.log("WARNING: Invalid state in mapInteractor.")}},this._zoomFromSelection=function(t,e,n){if((t===v.zoomselect||t===v.unzoomselect)&&e.x!==n.x&&e.y!==n.y){var i,r,o=M.map(),a=o.size(),s={x:Math.abs((n.x-e.x)/a.width),y:Math.abs((n.y-e.y)/a.height)};if(t===v.zoomselect?(r=o.displayToGcs({x:(e.x+n.x)/2,y:(e.y+n.y)/2},null),i=o.zoom()-Math.log2(Math.max(s.x,s.y))):(i=o.zoom()+Math.log2(Math.max(s.x,s.y)),r=o.center(void 0,null)),o.discreteZoom()&&(i=Math.floor(i)),o.zoom(i),t===v.zoomselect)o.center(r,null);else{var l=o.gcsToDisplay(r,null);o.pan({x:(e.x+n.x)/2-l.x,y:(e.y+n.y)/2-l.y})}}},this._handleMouseUpDocument=function(t){var n,r;if(!T&&(d={},M._setClickMaybe(!1),M._getMouseButton(t),M._getMouseModifiers(t),g(document).off(".geojs"),h.boundDocumentHandlers=!1,i.buttons.right&&t.preventDefault(),h.actionRecord&&h.actionRecord.selectionRectangle&&(M._getMousePosition(t),n=M._getSelection(),E.clear(),M.map().deleteLayer(E),E=null,p=null,M.map().geoTrigger(y.brushend,n),!0!==h.actionRecord.selectionRectangle&&M.map().geoTrigger(h.actionRecord.selectionRectangle,n),M._zoomFromSelection(h.action,n.display.lowerLeft,n.display.upperRight),M.map().geoTrigger(y.actionselection,{state:M.state(),mouse:M.mouse(),event:t,lowerLeft:n.display.lowerLeft,upperRight:n.display.upperRight})),M.map().geoTrigger(y.actionup,{state:M.state(),mouse:M.mouse(),event:t}),r=h.action,P(),e.momentum.enabled&&e.momentum.actions.includes(r))){var o=(new Date).valueOf(),a=o-i.time+i.deltaTime;o-i.time<e.momentum.stopTime?(i.velocity.x*=i.deltaTime/a,i.velocity.y*=i.deltaTime/a,i.deltaTime=a):i.velocity.x=i.velocity.y=0,M.springBack(!0,r)}},this._handleMouseUp=function(t){if(!T){M._getMouseButton(t),S&&M._handleMouseClick(t);var e=M.mouse();e.buttonsDown=S.buttons,M.map().geoTrigger(y.mouseup,e)}},this._handleMouseClick=function(t){h.actionRecord&&h.actionRecord.selectionRectangle&&(E.clear(),M.map().deleteLayer(E),E=null,p=null,h.action=h.actionRecord=null),M._getMouseButton(t),M._getMouseModifiers(t),M.cancel(v.pan),g(document).off(".geojs"),h.boundDocumentHandlers=!1;var e=M.mouse();e.buttonsDown=S.buttons,e.evt=t,M._setClickMaybe(!1),M.map().geoTrigger(y.mouseclick,e)},this._handleMouseWheel=function(){},this.springBack=function(t,n){h.action!==v.momentum&&(t||(i.velocity={x:0,y:0}),h.origAction=n,h.action=v.momentum,h.origin=M.mouse(),h.momentum=M.mouse(),h.start=new Date,h.handler=function(){var t,n,i,r;if(h.action===v.momentum&&M.map()&&!M.map().transition())if(r=Math.min(h.momentum.deltaTime,30),i=h.start.valueOf(),h.start=new Date,t=O(h.momentum.velocity,h.start-i)){if((n=k(t))>e.momentum.maxSpeed&&(n=e.momentum.maxSpeed/n,t.x=t.x*n,t.y=t.y*n),isFinite(t.x)&&isFinite(t.y)||(t.x=0,t.y=0),h.momentum.velocity.x=t.x,h.momentum.velocity.y=t.y,h.origAction===v.zoom){var o=h.momentum.velocity.y*r;C(-o*e.zoomScale/120,h)}else M.map().pan({x:h.momentum.velocity.x*r,y:h.momentum.velocity.y*r},void 0,"limited");h.handler&&M.map().scheduleAnimationFrame(h.handler)}else P()},h.handler&&M.map().scheduleAnimationFrame(h.handler))},this.destroy=function(){M._disconnectEvents(),M.map()&&g(M.map().node()).removeClass("highlight-focus"),M.map(null)},this.mouse=function(){return o.deepMerge({},i)},this.keyboard=function(t){return void 0===t?o.deepMerge({},e.keyboard||{}):M.options({keyboard:t})},this.state=function(){return o.deepMerge({},h)},this.pause=function(t){return void 0===t?T:(T=!!t,M)},this.addAction=function(t,n){t&&t.action&&t.input&&(o.addAction(e.actions,t,n),e.map&&e.actions.some(function(t){return t.input.right})&&(f.off("contextmenu.geojs"),f.on("contextmenu.geojs",function(){return!1})))},this.hasAction=function(t,n,i){return o.hasAction(e.actions,t,n,i)},this.removeAction=function(t,n,i){var r=o.removeAction(e.actions,t,n,i);return e.map&&!e.actions.some(function(t){return t.input.right})&&f.off("contextmenu.geojs"),r},this.simulateEvent=function(t,e){var n,i,r,o,a;if(!M.map())return M;if("keyboard"===t&&l){var s={shiftKey:e.shift||e.shiftKey||!1,ctrlKey:e.ctrl||e.ctrlKey||!1,altKey:e.alt||e.altKey||!1,metaKey:e.meta||e.metaKey||!1,toString:function(){return e.keys},stopPropagation:function(){},preventDefault:function(){},simulated:!0};return l.trigger(s,e.event),M}return i=e.page||{},e.map&&(r=f.offset(),i.x=e.map.x+r.left,i.y=e.map.y+r.top),"left"===e.button?(o=1,a=1):"right"===e.button?(o=3,a=2):"middle"===e.button&&(o=2,a=4),e.modifiers=e.modifiers||[],e.wheelDelta=e.wheelDelta||{},n=g.Event(t,{pageX:i.x,pageY:i.y,which:o,buttons:a,altKey:e.modifiers.indexOf("alt")>=0,ctrlKey:e.modifiers.indexOf("ctrl")>=0,metaKey:e.modifiers.indexOf("meta")>=0,shiftKey:e.modifiers.indexOf("shift")>=0,center:e.center,rotation:e.touch?e.rotation||0:e.rotation,scale:e.touch?e.scale||1:e.scale,pointers:e.pointers,pointerType:e.pointerType,originalEvent:{deltaX:e.wheelDelta.x,deltaY:e.wheelDelta.y,deltaMode:e.wheelMode,preventDefault:function(){},stopPropagation:function(){},stopImmediatePropagation:function(){}}}),e.touch&&c?M._handleTouch(n):f.trigger(n),t.indexOf(".geojs")>=0&&g(document).trigger(n),M},this._connectEvents(),this};i(s,r),t.exports=s},2225:function(t,e,n){function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(s.push(i.value),s.length!==e);l=!0);}catch(t){u=!0,r=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw r}}return s}}(t,e)||r(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){if(t){if("string"==typeof t)return o(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}var a=n(4626),s=n(1275),l=n(7541),u=function(t){"use strict";if(!(this instanceof u))return new u(t);t=t||{},l.call(this,t);var e=n(77),o=n(642),a=n(4279);a=a.__esModule?a.default:a;var s=this,c=this._init,h=null,d=e(),f=0,p=0,m=0;return this.featureType="marker",this._updateRangeTree=function(){if(!(d.timestamp()>=s.dataTime().timestamp()&&d.timestamp()>=s.timestamp())){var t,e,n=s.style.get("radius"),o=s.style.get("strokeWidth"),l=s.style.get("radiusIncludesStroke"),c=s.style.get("strokeOffset"),g=s.style.get("scaleWithZoom");e=s.position(),f=0,p=0,m=0,t=s.data().map(function(t,i){var r=e(t,i),a=g(t,i),s=n(t,i),h=o(t,i),d=Math.sign(c(t,i)),y=l(t,i),v=(y=void 0===y||y)?s+h*(d+1)/2:s+h,x=y?s+h*(d-1)/2:s;switch(a=u.scaleMode[a]||(a>=1&&a<=3?a:0)){case u.scaleMode.stroke:x>f&&(f=x),h>m&&(m=h);break;case u.scaleMode.fill:case u.scaleMode.all:v>p&&(p=v);break;default:v>f&&(f=v)}return[r.x,r.y]}),h=new a(t.length);var y,v=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}(t);try{for(v.s();!(y=v.n()).done;){var x=i(y.value,2),_=x[0],b=x[1];h.add(_,b)}}catch(t){v.e(t)}finally{v.f()}h.finish(),d.modified()}},this._approximateMaxRadius=function(t){s._updateRangeTree();var e=Math.pow(2,t);return Math.max(f+m*e,p*e)},this.pointSearch=function(t,e){var n,i,r,o,a=[],l=[],c=[],d=s.gcs(),f=s.style.get("radius"),p=s.style.get("strokeWidth"),m=s.style.get("radiusIncludesStroke"),g=s.style.get("strokeOffset"),y=s.style.get("scaleWithZoom");if(!(r=s.data())||!r.length)return{found:[],index:[]};s._updateRangeTree();var v=s.layer().map();e=null===e?v.gcs():void 0===e?v.ingcs():e;var x=v.gcsToDisplay(t,e),_=v.zoom(),b=Math.pow(2,_),w=this._approximateMaxRadius(_);return o=[v.displayToGcs({x:x.x-w,y:x.y-w},d),v.displayToGcs({x:x.x+w,y:x.y-w},d),v.displayToGcs({x:x.x-w,y:x.y+w},d),v.displayToGcs({x:x.x+w,y:x.y+w},d)],n={x:Math.min(o[0].x,o[1].x,o[2].x,o[3].x),y:Math.min(o[0].y,o[1].y,o[2].y,o[3].y)},i={x:Math.max(o[0].x,o[1].x,o[2].x,o[3].x),y:Math.max(o[0].y,o[1].y,o[2].y,o[3].y)},a=h.range(n.x,n.y,i.x,i.y),(a=Uint32Array.from(a).sort()).forEach(function(t){var e=r[t],n=f(r[t],t),i=y(r[t],t),o=g(r[t],t),a=i?p(r[t],t):0,h=m(e,t),_=(h=void 0===h||h)?n+a*(o-1)/2:n;n=_+a;var w,M,A,E=s.position()(e,t);switch(i=u.scaleMode[i]||(i>=1&&i<=3?i:0)){case u.scaleMode.fill:n=_*b+a;break;case u.scaleMode.stroke:n=_+a*b;break;case u.scaleMode.all:n*=b}n&&(A=n*n,(w=(E=v.gcsToDisplay(E,d)).x-x.x)*w+(M=E.y-x.y)*M<=A&&(l.push(e),c.push(t)))}),{found:l,index:c}},this.polygonSearch=function(t,e,n){var i,r,a,l,c=s.gcs(),d=[],f=[],p={},m=s.layer().map(),g=s.data(),y=s.style.get("radius"),v=s.style.get("strokeWidth"),x=s.style.get("radiusIncludesStroke"),_=s.style.get("strokeOffset"),b=s.style.get("scaleWithZoom"),w=m.zoom(),M=Math.pow(2,w),A=this._approximateMaxRadius(w);return n=null===n?m.gcs():void 0===n?m.ingcs():n,t.outer||(t={outer:t,inner:[]}),t.outer.length<3||!g||!g.length?{found:[],index:[],extra:{}}:((e=e||{}).partial=e.partial||!1,(t={outer:m.gcsToDisplay(t.outer,n),inner:(t.inner||[]).map(function(t){return m.gcsToDisplay(t,n)})}).outer.forEach(function(t){r||(r={x:t.x,y:t.y},a={x:t.x,y:t.y}),t.x<r.x&&(r.x=t.x),t.x>a.x&&(a.x=t.x),t.y<r.y&&(r.y=t.y),t.y>a.y&&(a.y=t.y)}),s._updateRangeTree(),l=[m.displayToGcs({x:r.x-A,y:r.y-A},c),m.displayToGcs({x:a.x+A,y:r.y-A},c),m.displayToGcs({x:a.x+A,y:a.y+A},c),m.displayToGcs({x:r.x-A,y:a.y+A},c)],r={x:Math.min(l[0].x,l[1].x,l[2].x,l[3].x),y:Math.min(l[0].y,l[1].y,l[2].y,l[3].y)},a={x:Math.max(l[0].x,l[1].x,l[2].x,l[3].x),y:Math.max(l[0].y,l[1].y,l[2].y,l[3].y)},i=h.range(r.x,r.y,a.x,a.y),(i=Uint32Array.from(i).sort()).forEach(function(n){var i=g[n],r=s.position()(i,n),a=y(i,n),l=b(i,n),h=_(i,n),w=l?v(i,n):0,A=x(i,n),E=(A=void 0===A||A)?a+w*(h-1)/2:a;switch(a=E+w,l=u.scaleMode[l]||(l>=1&&l<=3?l:0)){case u.scaleMode.fill:a=E*M+w;break;case u.scaleMode.stroke:a=E+w*M;break;case u.scaleMode.all:a*=M}if(a){r=m.gcsToDisplay(r,c);var T=o.distanceToPolygon2d(r,t);(T>=a||T>=0&&"center"===e.partial||T>=-a&&e.partial&&"center"!==e.partial)&&(d.push(i),f.push(n),p[n]={partial:T<a,distance:T})}}),{found:d,index:f,extra:p})},this._init=function(t){return t=o.deepMerge({},{style:Object.assign({},{radius:6.25,radiusIncludesStroke:!0,strokeColor:{r:.851,g:.604,b:0},strokeOffset:-1,strokeOpacity:1,strokeWidth:1.25,fillColor:{r:1,g:.839,b:.439},fillOpacity:.8,symbol:0,symbolValue:0,rotation:0,scaleWithZoom:u.scaleMode.none,rotateWithMap:!1},t&&void 0===t.style?{}:t.style)},t),c.call(s,t),s},s};u.create=function(t,e){"use strict";return(e=e||{}).type="marker",s.create(t,e)},u.capabilities={feature:"marker"},u.primitiveShapes=l.primitiveShapes,u.symbols={circle:0,ellipse:0,flowerBase:1,flowerMax:16,triangle:16,diamond:17,starBase:17,starMax:16,square:32,rectangle:32,crossBase:33,crossMax:16,oval:48,jackBase:49,jackMax:16,drop:64,dropBase:65,dropMax:16,arrow:80,arrowBase:81,arrowMax:16,length:96},["flower","star","cross","jack","drop","arrow"].forEach(function(t){for(var e=2;e<=u.symbols[t+"Max"];e+=1)u.symbols[t+e]=u.symbols[t+"Base"]-2+e}),u.scaleMode={none:0,fill:1,stroke:2,all:3},a(u,l),t.exports=u},6124:function(t,e,n){var i=n(4626),r=n(1275),o=function(t){"use strict";if(!(this instanceof o))return new o(t);var e=n(642);t=t||{},r.call(this,t);var i=this,a=this._init,s={};return this.featureType="mesh",this.mesh=function(t,e){if(void 0===t)return s;if("string"==typeof t&&void 0===e)return s[t];if(void 0===e){var n=Object.assign({},{gridWidth:function(){return t.gridHeight?Math.floor(i.data().length/t.gridHeight):Math.floor(Math.sqrt(i.data().length))},gridHeight:function(){return t.gridWidth?Math.floor(i.data().length/t.gridWidth):Math.floor(Math.sqrt(i.data().length))}},s,t);s=n}else s[t]=e;return i.modified(),i},this.mesh.get=function(t){if(void 0===t){var n,r={};for(n in s)s.hasOwnProperty(n)&&(r[n]=i.mesh.get(n));return r}return e.ensureFunction(s[t])},this.position=function(t){return void 0===t?i.style("position"):(i.style("position",t),i.dataTime().modified(),i.modified(),i)},this._createMesh=function(t,e){t=t||{},e=e||{};var n,r,o,a,s,l,u,c,h,d,f,p,m,g,y,v,x=i.data(),_=i.position(),b=i.mesh.get("elements")(x),w=i.mesh.get("elementPacking")(x),M=i.mesh.get("gridWidth")(x),A=i.mesh.get("gridHeight")(x),E=i.mesh.get("wrapLongitude")(x),T=i.mesh.get("x0")(x),S=i.mesh.get("y0")(x),C=i.mesh.get("dx")(x),k=i.mesh.get("dy")(x),P=M,O={shape:"square",elements:[],elementIndex:[]};if(b){var L=b.length&&Array.isArray(b[0]);if("square"===w||"triangle"!==w&&(!L&&!(b.length%4)&&b.length%3||L&&4===b[0].length))if(O.shape="square",L)for(n=0;n<b.length;n+=1)O.elements.push(b[n][0]),O.elements.push(b[n][1]),O.elements.push(b[n][3]),O.elements.push(b[n][2]),O.elements.push(b[n][3]),O.elements.push(b[n][1]),O.elementIndex.push(n),O.elementIndex.push(n);else for(n=o=0;n<b.length-3;n+=4,o+=1)O.elements.push(b[n]),O.elements.push(b[n+1]),O.elements.push(b[n+3]),O.elements.push(b[n+2]),O.elements.push(b[n+3]),O.elements.push(b[n+1]),O.elementIndex.push(o),O.elementIndex.push(o);else if(O.shape="triangle",L)for(n=0;n<b.length;n+=1)O.elements.push(b[n][0]),O.elements.push(b[n][1]),O.elements.push(b[n][2]),O.elementIndex.push(n);else for(O.elements=b.slice(0,b.length-b.length%3),n=o=0;n<b.length-2;n+=3,o+=1)O.elementIndex.push(o);l=x.length,c=!0}else{if(Object.keys(t).length?M*A>x.length&&(A=Math.floor(x.length/M)):Object.keys(e).length&&(M-1)*(A-1)>x.length&&(A=Math.floor(x.length/(M-1))+1),E=!(void 0!==E&&!E),!(c=null==T||null==S||!C||!k)&&E&&(T<-180||T>180||T+C*(M-1)<-180||T+C*(M-1)>180)&&C>-180&&C<180&&C*(M-1)<360.0001){for(p=[],m=[],n=0;n<M;n+=1){for(y=T+n*C;y<-180;)y+=360;for(;y>180;)y-=360;n&&Math.abs(y-p[p.length-1])>180&&(y>p[p.length-1]?(p.push(y-360),p.push(p[p.length-2]+360),m.push(n),m.push(n+1)):(p.push(y+360),p.push(p[p.length-2]-360),m.push(n),m.push(n+1)),g=n),p.push(y),m.push(n)}if(M+=2,Math.abs(Math.abs(P*C)-360)<.01){for(M+=1,y=T+P*C;y<-180;)y+=360;for(;y>180;)y-=360;p.push(y),m.push(0)}}if(l=M*A,void 0!==g)for(O.index=new Array(l),n=0;n<l;n+=1)v=n-(o=Math.floor(n/M))*M,(v+=v>g?-2:0)>=P&&(v-=P),v+=o*P,O.index[n]=v;for(o=s=0;o<A-1;o+=1,s+=1)for(n=0;n<M-1;n+=1,s+=1)n!==g&&(O.elements.push(s),O.elements.push(s+1),O.elements.push(s+M),O.elements.push(s+M+1),O.elements.push(s+M),O.elements.push(s+1),O.elementIndex.push(o*(M-1)+(m?m[n]:n)),O.elementIndex.push(o*(M-1)+(m?m[n]:n)))}O.verticesPerElement="triangle"===O.shape?3:6;var I=O.verticesPerElement;if(e.used){var R=new Array(O.elementIndex[O.elementIndex.length-1]+1);for(n=0;n<R.length;n+=1)R[n]=e.used(x[n],n);for(n=0;n<O.elementIndex.length&&R[O.elementIndex[n]];n+=1);if(n<O.elementIndex.length){for(o=n;n<O.elementIndex.length;n+=1)if(R[O.elementIndex[n]]){for(O.elementIndex[o]=O.elementIndex[n],a=0;a<3;a+=1)O.elements[3*o+a]=O.elements[3*n+a];o+=1}O.elements.splice(3*o),O.elementIndex.splice(o)}}if(t.used){for(n=0;n<l&&(s=O.index?O.index[n]:n,t.used(x[s],s));n+=1);if(n!==l){u=n;var D=new Array(l);for(o=0;o<u;o+=1)D[o]=o;if(D[u]=-1,!O.index)for(O.index=new Array(x.length),o=0;o<x.length;o+=1)O.index[o]=o;for(n=u+1;n<l;n+=1)s=O.index[n],t.used(x[s],s)?(D[n]=u,O.index[u]=O.index[n],u+=1):D[n]=-1;for(O.index.splice(u),n=a=0;n<O.elements.length;n+=I){for(o=0;o<I&&!(D[O.elements[n+o]]<0);o+=1)O.elements[a+o]=D[O.elements[n+o]];o===I&&(O.elementIndex[Math.floor(a/3)]=O.elementIndex[Math.floor(n/3)],6===I&&(O.elementIndex[Math.floor(a/3)+1]=O.elementIndex[Math.floor(n/3)+1]),a+=I)}O.elements.splice(a),O.elementIndex.splice(Math.floor(a/3)),l=u}}if(e.used&&void 0===g){var j=new Array(l),F=O.index;for(O.index=[],n=0;n<O.elements.length;n+=1)void 0===j[a=O.elements[n]]&&(j[a]=O.index.length,O.index.push(F?F[a]:a)),O.elements[n]=j[a];l=O.index.length}for(d in O.pos=new Array(3*l),t)"used"!==d&&t.hasOwnProperty(d)&&(O[d]=new Array(l));for(n=r=0;n<l;n+=1,r+=3)for(d in h=x[s=O.index?O.index[n]:n],c?(f=_(h,s),O.pos[r]=f.x,O.pos[r+1]=f.y,O.pos[r+2]=f.z||0):(O.pos[r]=void 0===g?T+C*(s%M):p[n%M],O.pos[r+1]=S+k*Math.floor(s/M),O.pos[r+2]=0,f={x:O.pos[r],y:O.pos[r+1],z:O.pos[r+2]}),t)"used"!==d&&t.hasOwnProperty(d)&&(O[d][n]=t[d](h,s,f));for(d in e)if("used"!==d&&e.hasOwnProperty(d)){var G=e[d];for(O[d]=new Array(O.elementIndex.length),n=0;n<O.elementIndex.length;n+=1)h=x[s=O.elementIndex[n]],O[d][n]=G(h,s)}return O.numVertices=l,O.numElements=O.elements.length/O.verticesPerElement,O},this._init=function(t){a.call(i,t),t=t||{};var e=Object.assign({},{position:function(t){return Array.isArray(t)?{x:t[0],y:t[1],z:t[2]||0}:t}},t.style||{});i.mesh(t.mesh||{}),i.style(e)},this};i(o,r),t.exports=o},1338:function(t,e,n){var i=n(4626),r=n(77),o=0,a=function(){"use strict";if(!(this instanceof a))return new a;var t=n(642),e=this,i=++o,s={},l=[],u=0;return this.onIdle=function(t){return u?l.push(t):t(),e},Object.defineProperty(this,"idle",{get:function(){return!u},configurable:!0}),Object.defineProperty(this,"_promises",{get:function(){return u},configurable:!0}),this.addPromise=function(t){function n(){t._geojsTracked&&t._geojsTracked[i]&&(u-=1,delete t._geojsTracked[i]),u||l.splice(0,l.length).forEach(function(t){t()})}return t._geojsTracked||(t._geojsTracked={}),t._geojsTracked[i]||(t._geojsTracked[i]=!0,u+=1),t.always?t.always(n):t.then(n,n),e},this.removePromise=function(t){return t._geojsTracked&&t._geojsTracked[i]&&(u-=1,delete t._geojsTracked[i],u||l.splice(0,l.length).forEach(function(t){t()})),e},this.geoOn=function(n,i){return Array.isArray(n)?(n.forEach(function(t){e.geoOn(t,i)}),e):t.isFunction(i)?(s.hasOwnProperty(n)||(s[n]=[]),s[n].push(i),e):(console.warn("Handler for "+n+" is not a function",i,e),e)},this.geoOnce=function(t,n){var i=function(r){e.geoOff(t,i),n.call(e,r)};return e.geoOn(t,i),i},this.geoIsOn=function(t,n){return Array.isArray(t)?t.some(function(t){return e.geoIsOn(t,n)}):(s[t]||[]).some(function(t){return t===n||void 0===n})},this.geoTrigger=function(t,n){return Array.isArray(t)?(t.forEach(function(t){e.geoTrigger(t,n)}),e):((n=n||{}).event=t,s.hasOwnProperty(t)&&s[t].forEach(function(i){try{i.call(e,n)}catch(e){console.warn("Event handler for "+t+" threw an error",e)}}),e)},this.geoOff=function(t,n){if(void 0===t&&(s={},l=[],u=0,i=++o),Array.isArray(t))return t.forEach(function(t){e.geoOff(t,n)}),e;if(n){if(Array.isArray(n))return n.forEach(function(n){e.geoOff(t,n)}),e}else s[t]=[];return s.hasOwnProperty(t)&&(s[t]=s[t].filter(function(t){return t!==n})),e},this._eventHandlers=function(){return s},this._exit=function(){e.geoOff()},r.call(this),this.modified(),this};i(a,r),t.exports=a},4880:function(t,e,n){var i=n(4626),r=n(9264),o=n(1098),a=n(3842),s=n(642),l=function(t){var e=n(4912);if(!(this instanceof l))return new l(t);void 0!==(t=t||{}).mapOpacity&&void 0===t.opacity&&((t=Object.assign({},t)).opacity=t.mapOpacity),t=s.deepMerge({},this.constructor.defaults,l.tileSources[this.constructor.defaults.source]||{},l.tileSources[t.source]||{},{name:""},t),r.call(this,t);var i=this;this.mapOpacity=this.opacity,this._getTile=function(t,n){var r=n||t;return e({index:t,size:{x:i._options.tileWidth,y:i._options.tileHeight},queue:i._queue,overlap:i._options.tileOverlap,scale:i._options.tileScale,url:i._options.url.call(i,r.x,r.y,Math.max(r.level||0,Math.min(0,i._options.minLevel||0)),i._options.subdomains),crossDomain:i._options.crossDomain})},this.source=function(t){if(void 0!==t)return l.tileSources[t]&&(i.url(l.tileSources[t].url),i.subdomains(l.tileSources[t].subdomains||"abc"),i.attribution(l.tileSources[t].attribution||""),i._options.maxLevel=l.tileSources[t].maxLevel||18,i._options.minLevel=l.tileSources[t].minLevel||0),i;for(var e in l.tileSources)if(l.tileSources[e].url===i.url())return e}};l.defaults=Object.assign({},r.defaults,{tileOffset:function(t){var e=256*Math.pow(2,t-1);return{x:e,y:e}},url:"",source:"osm"});var u='Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',c='<a href="https://carto.com"> Carto</a> Contributors <a href="https://www.openstreetmap.org/"> OpenStreetMap</a>';l.tileSources={"dark-matter-with-labels":{url:" https://{s}.basemaps.cartocdn.com/rastertiles/dark_all/{z}/{x}/{y}.png",attribution:c,name:"Carto Dark Matter With Labels",minLevel:0,maxLevel:18},"dark-matter-without-labels":{url:"https://{s}.basemaps.cartocdn.com/rastertiles/dark_nolabels/{z}/{x}/{y}.png",attribution:c,name:"Carto Dark Matter Without Labels",minLevel:0,maxLevel:18},"nationalmap-relief":{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSShadedReliefOnly/MapServer/tile/{z}/{y}/{x}",attribution:'Tile data from <a href="https://basemap.nationalmap.gov/">USGS</a>',name:"National Map Shaded Relief",minLevel:0,maxLevel:16},"nationalmap-satellite":{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryOnly/MapServer/tile/{z}/{y}/{x}",attribution:'Tile data from <a href="https://basemap.nationalmap.gov/">USGS</a>',name:"National Map Satellite",minLevel:0,maxLevel:16},"nationalmap-satellite-topo":{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryTopo/MapServer/tile/{z}/{y}/{x}",attribution:'Tile data from <a href="https://basemap.nationalmap.gov/">USGS</a>',name:"National Map Satellite and Topo",minLevel:0,maxLevel:16},"nationalmap-topo":{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer/tile/{z}/{y}/{x}",attribution:'Tile data from <a href="https://basemap.nationalmap.gov/">USGS</a>',name:"National Map Topo",minLevel:0,maxLevel:16},osm:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'Tile data &copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors',name:"OpenStreetMap",subdomains:"abc",minLevel:0,maxLevel:19},"positron-with-labels":{url:"https://{s}.basemaps.cartocdn.com/rastertiles/light_all/{z}/{x}/{y}.png",attribution:c,name:"Carto Positron With Labels",minLevel:0,maxLevel:18},"positron-without-labels":{url:"https://{s}.basemaps.cartocdn.com/rastertiles/light_nolabels/{z}/{x}/{y}.png",attribution:c,name:"Carto Positron Without Labels",minLevel:0,maxLevel:18},"stamen-terrain":{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png",attribution:u,name:"Stamen Terrain",subdomains:"abcd",minLevel:0,maxLevel:14},"stamen-terrain-background":{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/terrain-background/{z}/{x}/{y}.png",attribution:u,name:"Stamen Terrain Background",subdomains:"abcd",minLevel:0,maxLevel:14},"stamen-toner":{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png",attribution:u,name:"Stamen Toner",subdomains:"abcd",minLevel:0,maxLevel:20},"stamen-toner-lite":{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png",attribution:u,name:"Stamen Toner Lite",subdomains:"abcd",minLevel:0,maxLevel:20},"voyager-with-labels":{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}.png",attribution:c,name:"Carto Voyager With Labels",minLevel:0,maxLevel:18},"voyager-without-labels":{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager_nolabels/{z}/{x}/{y}.png",attribution:c,name:"Carto Voyager Without Labels",minLevel:0,maxLevel:18}},i(l,r),o.registerLayer("osm",l,[a.capabilities.image]),t.exports=l},2266:function(t,e,n){var i=n(4626),r=n(1275),o=function(t){"use strict";if(!(this instanceof o))return new o(t);t=t||{},r.call(this,t);var e=this,n=this._init;return this.featureType="path",this.position=function(t){return void 0===t?e.style("position"):(t!==e.style("position")&&(e.style("position",t),e.dataTime().modified(),e.modified()),e)},this._init=function(t){n.call(e,t);var i=Object.assign({},{strokeWidth:1,strokeColor:{r:1,g:1,b:1},position:function(t){return Array.isArray(t)?{x:t[0],y:t[1],z:t[2]||0}:t}},void 0===t.style?{}:t.style);return void 0!==t.position&&(i.position=t.position),e.style(i),i.position&&e.position(i.position),e.dataTime().modified(),e},this._init(t),this};i(o,r),t.exports=o},7761:function(t,e,n){var i=n(5616),r=n(4626),o=n(1275),a=n(642),s=function(t){"use strict";if(!(this instanceof s))return new s(t);t=t||{},o.call(this,t);var e,n=this,r=this._update,l=this._init;return this.featureType="pixelmap",this.position=function(t){return void 0===t?n.style("position"):(t!==n.style("position")&&(n.style("position",t),n.dataTime().modified(),n.modified()),n)},this.url=function(t){return void 0===t?n.style("url"):(t!==n.style("url")&&(n.m_srcImage=n.m_info=void 0,n.style("url",t),n.dataTime().modified(),n.modified()),n)},this.color=function(t){return void 0===t?n.style("color"):(t!==n.style("color")&&(n.style("color",t),n.dataTime().modified(),n.modified()),n)},this.indexModified=function(t,i){if(void 0===t){var r=e;return"clear"===i&&(e=void 0),r}return n.modified(),void 0===e&&(e=[t,t]),t<e[0]&&(e[0]=t),(i||t)>e[1]&&(e[1]=i||t),n},this._update=function(){return r.call(n),(n.buildTime().timestamp()<=n.dataTime().timestamp()||n.updateTime().timestamp()<n.timestamp())&&n._build(),n.updateTime().modified(),n},this.maxIndex=function(){if(n.m_info){if(void 0===n.m_info.maxIndex)for(var t in n.m_info.maxIndex=0,n.m_info.mappedColors)n.m_info.mappedColors.hasOwnProperty(t)&&(n.m_info.maxIndex=Math.max(n.m_info.maxIndex,t));return n.m_info.maxIndex}},this._computePixelmap=function(){},this._build=function(){if(n.m_srcImage)n.m_info,n._computePixelmap();else{var t=n.style.get("url")();if(a.isReadyImage(t))n.m_srcImage=t,n._computePixelmap();else if(t){var e,r,o=i.Deferred();t instanceof Image?(n.m_srcImage=t,e=t.onload,r=t.onerror):(n.m_srcImage=new Image,t.indexOf(":")>=0&&t.indexOf("/")===t.indexOf(":")+1&&(n.m_srcImage.crossOrigin=n.style.get("crossDomain")()||"anonymous")),n.m_srcImage.onload=function(){e&&e.apply(n,arguments),n.style.get("url")()===t&&(n.m_info=void 0,n._computePixelmap()),o.resolve()},n.m_srcImage.onerror=function(){r&&r.apply(n,arguments),o.reject()},o.promise(n),n.layer().addPromise(n),t instanceof Image||(n.m_srcImage.src=t)}}return n.buildTime().modified(),n},this._pointSearchProcess=function(t){for(var e=t.index.length-1;e>=0;e-=1)if(t.extra[t.index[e]]._quad&&t.extra[t.index[e]]._quad.image){var i=t.extra[t.index[e]]._quad.image;t.extra[t.index[e]]._quad.m_srcImage&&(i=t.extra[t.index[e]]._quad.m_srcImage);var r=t.extra[t.index[e]].basis,o=Math.floor(r.x*i.width),a=Math.floor(r.y*i.height),s=document.createElement("canvas");s.width=s.height=1;var l=s.getContext("2d");l.drawImage(i,o,a,1,1,0,0,1,1);var u=l.getImageData(0,0,1,1).data,c=u[0]+256*u[1]+256*u[2]*256;if(16777215===c)continue;return t={index:[c],found:[n.data()[c]]}}return{index:[],found:[]}},this._init=function(t){t=t||{},l.call(n,t);var e=Object.assign({},{color:function(t,e){return{r:(255&e)/255,g:(e>>8&255)/255,b:(e>>16&255)/255,a:1}},position:a.identityFunction},void 0===t.style?{}:t.style);return void 0!==t.position&&(e.position=t.position),void 0!==t.url&&(e.url=t.url),void 0!==t.color&&(e.color=t.color),n.style(e),n.dataTime().modified(),t.quadFeature&&(n.m_srcImage=!0,n._computePixelmap()),n},this};s.create=function(t,e){"use strict";return(e=e||{}).type="pixelmap",o.create(t,e)},s.capabilities={feature:"pixelmap",lookup:"pixelmap.lookup"},r(s,o),t.exports=s},534:function(t,e,n){var i=n(4626),r=n(9264),o=n(1098),a=n(3842),s=n(7761),l=n(642),u=function(t){var e,i=n(4912);if(!(this instanceof u))return new u(t);(t=t||{}).data&&(e=t.data,delete t.data),t=l.deepMerge({},this.constructor.defaults,t),r.call(this,t);var o,a=this._init,s=this;return this._getTile=function(t,e){var n=e||t;return i({index:t,size:{x:s._options.tileWidth,y:s._options.tileHeight},queue:s._queue,overlap:s._options.tileOverlap,scale:s._options.tileScale,url:s._options.url.call(s,n.x,n.y,Math.max(n.level||0,Math.min(0,s._options.minLevel||0)),s._options.subdomains),crossDomain:s._options.crossDomain})},this._init=function(){a.apply(s,arguments),s.nearestPixel(!0,!0);var n={quadFeature:s.features()[0]};t.style&&(n.style=t.style),t.color&&(n.color=t.color),o=s.createFeature("pixelmap",n),e&&o.data(e),s.style=o.style,s.data=o.data,s.indexModified=o.indexModified;var i=s.dataTime().modified;return s.dataTime().modified=function(){return o.dataTime().modified(),i()},["modified","geoOn","geoOff","geoOnce"].forEach(function(t){var e=s[t];s[t]=function(){return Array.isArray(arguments[0])||o[t].apply(this,arguments),e.apply(this,arguments)}}),s},s};u.defaults=Object.assign({},r.defaults,{features:[a.capabilities.image,s.capabilities.lookup],tileOffset:function(t){var e=256*Math.pow(2,t-1);return{x:e,y:e}},url:""}),i(u,r),o.registerLayer("pixelmap",u,[a.capabilities.image]),t.exports=u},7541:function(t,e,n){function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(s.push(i.value),s.length!==e);l=!0);}catch(t){u=!0,r=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw r}}return s}}(t,e)||r(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){if(t){if("string"==typeof t)return o(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}var a=n(4626),s=n(1275),l=function(t){"use strict";if(!(this instanceof l))return new l(t);t=t||{},s.call(this,t);var e=n(77),o=n(5966),a=n(6409),u=n(642),c=n(4279);c=c.__esModule?c.default:c;var h=this,d=this._init,f=null,p=e(),m=this.data,g=0,y=t.clustering,v=null,x=[],_=null,b=!1;return this.featureType="point",this.clustering=function(t){return void 0===t?y:(y&&!t?(v=null,y=!1,m(x)):t&&y!==t&&(y=t,h._clusterData()),h)},this._clusterData=function(){if(y){var t=!0===y?{radius:10}:y;!t.maxZoom&&this.layer()&&this.layer().map()&&((t=Object.assign({},t)).maxZoom=this.layer().map().zoomRange().max);var e=h.position(),n=h.layer().map(),i=n.gcsToDisplay(n.center(void 0,null),null),r=n.displayToGcs(i,h.gcs()),a=n.displayToGcs({x:i.x+t.radius,y:i.y},h.gcs()),s=Math.pow(Math.pow(a.y-r.y,2)+Math.pow(a.x-r.x,2),.5),l=n.zoom(),c=s*Math.pow(2,l);t=Object.assign({},t,{radius:c}),v=new o(t),x.forEach(function(t,n){var i=u.normalizeCoordinates(e(t,n));i.index=n,v.addPoint(i)}),_=null,h._handleZoom(n.zoom())}},this._handleZoom=function(t){var e=Math.floor(t);if(y&&e!==_){_=e;for(var n=v.points(e),i=v.clusters(e),r=new Array(n.length+i.length),o=0;o<n.length;o+=1)r[o]=x[n[o].index];for(var a=0,s=n.length;a<i.length;a+=1,s+=1){var l=i[a];l.__cluster=!0,r[s]=l}b=!0,h.data(r)}},this.position=function(t){if(void 0===t)return h.style("position");var e=u.isFunction(t);return h.style("position",function(n,i){return null!=n&&n.__cluster?n:e?t(n,i):t}),h.dataTime().modified(),h.modified(),h},this._updateRangeTree=function(){if(!(p.timestamp()>=h.dataTime().timestamp()&&p.timestamp()>=h.timestamp())){var t,e,n=h.style.get("radius"),o=h.style.get("stroke"),a=h.style.get("strokeWidth");e=h.position(),g=0,t=h.data().map(function(t,i){var r=e(t,i);return g=Math.max(g,n(t,i)+(o(t,i)?a(t,i):0)),[r.x,r.y]}),f=new c(t.length);var s,l=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}(t);try{for(l.s();!(s=l.n()).done;){var u=i(s.value,2),d=u[0],m=u[1];f.add(d,m)}}catch(t){l.e(t)}finally{l.f()}f.finish(),p.modified()}},this.pointSearch=function(t,e){var n,i,r,o,a,s,l=[],u=[],c=[],d=h.gcs(),p=h.style.get("fill"),m=h.style.get("stroke"),y=h.style.get("strokeWidth"),v=h.style.get("radius");return(r=h.data())&&r.length?(h._updateRangeTree(),o=h.layer().map(),a=o.gcsToDisplay(t,e),s=[o.displayToGcs({x:a.x-g,y:a.y-g},d),o.displayToGcs({x:a.x+g,y:a.y-g},d),o.displayToGcs({x:a.x-g,y:a.y+g},d),o.displayToGcs({x:a.x+g,y:a.y+g},d)],n={x:Math.min(s[0].x,s[1].x,s[2].x,s[3].x),y:Math.min(s[0].y,s[1].y,s[2].y,s[3].y)},i={x:Math.max(s[0].x,s[1].x,s[2].x,s[3].x),y:Math.max(s[0].y,s[1].y,s[2].y,s[3].y)},l=f.range(n.x,n.y,i.x,i.y),(l=Uint32Array.from(l).sort()).forEach(function(t){var e=r[t],n=m(r[t],t);if(n||p(r[t],t)){var i,s,l,f,g=h.position()(e,t);l=v(r[t],t),(l+=n?y(r[t],t):0)&&(f=l*l,(i=(g=o.gcsToDisplay(g,d)).x-a.x)*i+(s=g.y-a.y)*s<=f&&(u.push(e),c.push(t)))}}),{found:u,index:c}):{found:[],index:[]}},this.polygonSearch=function(t,e,n){var i,r,o,a,s=h.gcs(),l=[],c=[],d={},p=h.layer().map(),m=h.data(),y=h.style.get("fill"),v=h.style.get("stroke"),x=h.style.get("strokeWidth"),_=h.style.get("radius");return t.outer||(t={outer:t,inner:[]}),t.outer.length<3||!m||!m.length?{found:[],index:[],extra:{}}:((e=e||{}).partial=e.partial||!1,(t={outer:p.gcsToDisplay(t.outer,n),inner:(t.inner||[]).map(function(t){return p.gcsToDisplay(t,n)})}).outer.forEach(function(t){r||(r={x:t.x,y:t.y},o={x:t.x,y:t.y}),t.x<r.x&&(r.x=t.x),t.x>o.x&&(o.x=t.x),t.y<r.y&&(r.y=t.y),t.y>o.y&&(o.y=t.y)}),h._updateRangeTree(),a=[p.displayToGcs({x:r.x-g,y:r.y-g},s),p.displayToGcs({x:o.x+g,y:r.y-g},s),p.displayToGcs({x:o.x+g,y:o.y+g},s),p.displayToGcs({x:r.x-g,y:o.y+g},s)],r={x:Math.min(a[0].x,a[1].x,a[2].x,a[3].x),y:Math.min(a[0].y,a[1].y,a[2].y,a[3].y)},o={x:Math.max(a[0].x,a[1].x,a[2].x,a[3].x),y:Math.max(a[0].y,a[1].y,a[2].y,a[3].y)},i=f.range(r.x,r.y,o.x,o.y),(i=Uint32Array.from(i).sort()).forEach(function(n){var i=m[n],r=v(m[n],n);if(r||y(m[n],n)){var o=h.position()(i,n),a=_(m[n],n);if(a+=r?x(m[n],n):0){o=p.gcsToDisplay(o,s);var f=u.distanceToPolygon2d(o,t);(f>=a||f>=0&&"center"===e.partial||f>=-a&&e.partial&&"center"!==e.partial)&&(l.push(i),c.push(n),d[n]={partial:f<a,distance:f})}}}),{found:l,index:c,extra:d})},this.data=function(t){return void 0===t?m():(b||(x=t),y&&!b?h._clusterData():m(t),b=!1,h)},this._init=function(t){t=t||{},d.call(h,t);var e=u.deepMerge({},{radius:5,stroke:!0,strokeColor:{r:.851,g:.604,b:0},strokeWidth:1.25,strokeOpacity:1,fillColor:{r:1,g:.839,b:.439},fill:!0,fillOpacity:.8,position:function(t){return Array.isArray(t)?{x:t[0],y:t[1],z:t[2]||0}:t},origin:function(t){return t.length>=3?t.slice(0,3):[0,0,0]}},void 0===t.style?{}:t.style);return void 0!==t.position&&(e.position=t.position),h.style(e),e.position&&h.position(e.position),h.dataTime().modified(),h.geoOn(a.zoom,function(t){h._handleZoom(t.zoomLevel)}),h},h};l.create=function(t,e){"use strict";return(e=e||{}).type="point",s.create(t,e)},l.capabilities={feature:"point",stroke:"point.stroke"},l.primitiveShapes={auto:"auto",sprite:"sprite",triangle:"triangle",square:"square"},a(l,s),t.exports=l},6645:function(t,e,n){var i=n(4626),r=n(1275),o=n(5325),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},r.call(this,t);var e,i=n(642),s=this,l=this._init,u=this._exit,c=this.data,h=this.draw,d=this.modified,f=this.style,p=[];function m(t,e,n){var i=s.gcs(),r=s.layer().map().gcs();return t=t||s.data(),e=e||s.style.get("position"),n=n||s.style.get("polygon"),t.map(function(t,a){var l=n(t,a);if(l){var u,c,h,d,f,p,m,g,y;d=l.outer||(Array.isArray(l)?l:[]),u=new Array(d.length);for(var v=0;v<d.length;v+=1)u[v]=e.call(s,d[v],v,t,a),f=u[v].x,p=u[v].y,v?(f<h.min.x&&(h.min.x=f),p<h.min.y&&(h.min.y=p),f>h.max.x&&(h.max.x=f),p>h.max.y&&(h.max.y=p)):h={min:{x:f,y:p},max:{x:f,y:p}};c=(l.inner||[]).map(function(n){d=n||[];for(var i=new Array(d.length),r=0;r<d.length;r+=1)i[r]=e.call(s,d[r],r,t,a);return i}),m=o.transformCoordinates(i,r,u),g=c.map(function(t){return o.transformCoordinates(i,r,t)});for(var x=0;x<m.length;x+=1)f=m[x].x,p=m[x].y,x?(f<y.min.x&&(y.min.x=f),p<y.min.y&&(y.min.y=p),f>y.max.x&&(y.max.x=f),p>y.max.y&&(y.max.y=p)):y={min:{x:f,y:p},max:{x:f,y:p}};return{outer:u,inner:c,range:h,mapouter:m,mapinner:g,maprange:y}}})}function g(t){return i.isFunction(t)?function(e){return t(e[0],e[1],e[2],e[3])}:t}return this.featureType="polygon",this._subfeatureStyles={fillColor:!0,fillOpacity:!0,lineCap:!0,lineJoin:!0,strokeColor:!0,strokeOffset:!0,strokeOpacity:!0,strokeWidth:!0},this.data=function(t){var e=c(t);return void 0!==t&&(p=m(),s._checkForStroke()),e},this.polygonCoordinates=function(){return p},this.polygon=function(t){return void 0===t?s.style("polygon"):(s.style("polygon",t),s.dataTime().modified(),s.modified(),p=m(),s)},this.position=function(t){return void 0===t?s.style("position"):(s.style("position",t),s.dataTime().modified(),s.modified(),p=m(),s)},this.pointSearch=function(t,n){var r=[],a=[],l={},u=s.data(),c=s.layer().map();n=null===n?c.gcs():void 0===n?c.ingcs():n;var h=o.transformCoordinates(n,c.gcs(),t);(p.forEach(function(t,e){i.pointInPolygon(h,t.mapouter,t.mapinner,t.maprange)&&(a.push(e),l[e]=!0,r.push(u[e]))}),e)&&e.pointSearch(t).found.forEach(function(t){t.length&&4===t[0].length&&!l[t[0][3]]&&(a.push(t[0][3]),l[t[0][3]]=!0,r.push(u[t[0][3]]))});return{index:a,found:r}},this.polygonSearch=function(t,n,r){var a,l,u=s.data(),c=[],h=[],d={},f=t,m={},g=s.layer().map();if(r=null===r?g.gcs():void 0===r?g.ingcs():r,t.outer||(t={outer:t,inner:[]}),!u||!u.length||t.outer.length<3)return{found:h,index:c,extra:d};if((n=n||{}).partial=n.partial||!1,(t={outer:o.transformCoordinates(r,g.gcs(),t.outer),inner:(t.inner||[]).map(function(t){return o.transformCoordinates(r,g.gcs(),t)})}).outer.forEach(function(t){a||(a={x:t.x,y:t.y},l={x:t.x,y:t.y}),t.x<a.x&&(a.x=t.x),t.x>l.x&&(l.x=t.x),t.y<a.y&&(a.y=t.y),t.y>l.y&&(l.y=t.y)}),p.forEach(function(e,r){if(!(!e.mapouter.length||e.maprange&&(e.maprange.max.x<a.x||e.maprange.min.x>l.x||e.maprange.max.y<a.y||e.maprange.min.y>l.y))){for(var o,s,f=-1;f<e.mapinner.length&&!s;f+=1)for(var p=f<0?e.mapouter:e.mapinner[f],g=0,y=p.length,v=y-1;g<y;v=g,g+=1){var x=i.distanceToPolygon2d(p[g],t);if(x*i.distanceToPolygon2d(p[v],t)<0){s=!0;break}if(i.crossedLineSegmentPolygon2d(p[g],p[v],t)){s=!0;break}x>0&&(o=!0)}o||s||!i.pointInPolygon(t.outer[0],e.mapouter,e.mapinner,e.maprange)||(s=!0),(!n.partial&&o&&!s||n.partial&&(o||s))&&(c.push(r),h.push(u[r]),d[r]={partial:s},m[r]=!0)}}),e){var y=e.polygonSearch(f,n);y.found.forEach(function(t,e){t.length&&4===t[0].length&&(m[t[0][3]]||(c.push(t[0][3]),m[t[0][3]]=!0,h.push(u[t[0][3]]),d[y.index[e]]={partial:!1}),y.extra[y.index[e]].partial&&(d[y.index[e]].partial=!0))})}return{found:h,index:c,extra:d}},this.style=function(t,e){var n=f.apply(s,arguments);return void 0===t||"string"==typeof t&&void 0===e||s._checkForStroke(),n},this.style.get=f.get,this._getLoopData=function(t,e,n){var i,r=[];for(i=0;i<n.length;i+=1)r.push([n[i],i,t,e]);return r},this._checkForStroke=function(){if(!1!==f("stroke")){if(s.layer()){e||(e=s.layer().createFeature("line",{selectionAPI:!1,gcs:s.gcs(),visible:s.visible(void 0,!0),dynamicDraw:!0}),s.dependentFeatures([e]));var t,n=s.style();if(i.isFunction(n.stroke)||!n.stroke){var r=s.style.get("stroke"),o=s.style.get("strokeOpacity");t=function(t){return r(t[2],t[3])?o(t[0],t[1],t[2],t[3]):0}}else t=g(n.strokeOpacity);e.style({antialiasing:g(n.antialiasing),closed:!0,lineCap:g(n.lineCap),lineJoin:g(n.lineJoin),miterLimit:g(n.miterLimit),strokeWidth:g(n.strokeWidth),strokeStyle:g(n.strokeStyle),strokeColor:g(n.strokeColor),strokeOffset:g(n.strokeOffset),strokeOpacity:t,uniformLine:g(n.uniformPolygon)});var a=s.data(),l=s.style("position");if(a!==e._lastData||l!==e._lastPosVal){var u,c,h,d=[],p=s.style.get("position"),m=s.style.get("polygon");for(u=0;u<a.length;u+=1)(c=m(a[u],u))&&(h=c.outer||(Array.isArray(c)?c:[])).length>=2&&(d.push(s._getLoopData(a[u],u,h)),c.inner&&c.inner.forEach(function(t){t.length>=2&&d.push(s._getLoopData(a[u],u,t))}));e.position(function(t,e,n,i){return p(t[0],t[1],t[2],t[3])}),e.data(d),e._lastData=a,e._lastPosVal=l}}}else e&&s.layer()&&(s.layer().deleteFeature(e),e=null,s.dependentFeatures([]))},this.draw=function(){var t=h();return e&&e.draw(),t},this.modified=function(){var t=d();return e&&e.modified(),t},this.rdpSimplifyData=function(t,e,n,r,a){var l=s.layer().map(),u=l.gcs(),c=s.gcs(),h=m(t,n,r);return void 0===e&&(e=.5*l.unitsPerPixel(l.zoom())),h=h.map(function(t){return{outer:o.transformCoordinates(c,u,t.outer),inner:t.inner.map(function(t){return o.transformCoordinates(c,u,t)})}}),t=t.map(function(t,n){var r=h[n],a={};for(var s in t)!t.hasOwnProperty(s)||Array.isArray(t)&&s>=0&&s<t.length||(a[s]=t[s]);if(r&&r.outer.length>=3)if(a.inner=r.inner.filter(function(t){return t.length>=3}),a.outer=i.rdpLineSimplify(r.outer,e,!0,a.inner),a.outer.length>=3){var l=a.inner.slice();a.inner.map(function(t,n){l[n]=a.outer;var r=i.rdpLineSimplify(t,e,!0,l);return l[n]=r,r}).filter(function(t){return t.length>=3}),a.outer=o.transformCoordinates(u,c,a.outer),a.inner=a.inner.map(function(t){return o.transformCoordinates(u,c,t)})}else a.outer=a.inner=[];else a.outer=[];return a}),a?t:(s.style("position",i.identityFunction),s.style("polygon",i.identityFunction),s.data(t),s)},this.mouseOverOrderClosestBorder=function(t){var e=t.feature.data(),n=t.feature.layer().map(),r=o.transformCoordinates(n.ingcs(),t.feature.gcs(),t.mouse.geo),a=t.feature.polygonCoordinates(),s={};t.over.index.forEach(function(t,e){var n,o=a[t];o.outer.forEach(function(t,e){var a=o.outer[(e+1)%o.outer.length],s=i.distance2dToLineSquared(r,t,a);(void 0===n||s<n)&&(n=s)}),o.inner.forEach(function(t){t.forEach(function(e,o){var a=t[(o+1)%t.length],s=i.distance2dToLineSquared(r,e,a);(void 0===n||s<n)&&(n=s)})}),s[t]=n}),t.over.index.sort(function(t,e){return s[t]-s[e]}).reverse(),t.over.index.forEach(function(n,i){t.over.found[i]=e[n]})},this.toPolygonList=function(t){var e=s.style.get("polygon"),n=s.style.get("position");return s.data().map(function(t,i){var r=e(t,i),o=r.outer||(Array.isArray(r)?r:[]);if(o.length<3)return[];var a=[o.map(function(e,r){var o=n(e,r,t,i);return[o.x,o.y]})];return r.inner&&r.inner.forEach(function(e){a.push(e.map(function(e,r){var o=n(e,r,t,i);return[o.x,o.y]}))}),a})},this.fromPolygonList=function(t,e){return s.style({position:function(t){return{x:t[0],y:t[1]}},polygon:function(t){return{outer:t[0],inner:t.slice(1)}}}),s.data(t),s},this._exit=function(){e&&s.layer()&&(s.layer().deleteFeature(e),e=null,s.dependentFeatures([])),u()},this._init=function(t){t=t||{},l.call(s,t);var e=Object.assign({},{fill:!0,fillColor:{r:0,g:.5,b:.5},fillOpacity:1,stroke:!1,strokeWidth:1,strokeStyle:"solid",strokeColor:{r:0,g:1,b:1},strokeOpacity:1,polygon:i.identityFunction,position:function(t){return Array.isArray(t)?{x:t[0],y:t[1],z:t[2]||0}:t},origin:function(t){for(var e=0;e<t.length;e+=1)if(t[e].vertices.length>=3)return t[e].vertices.slice(0,3);return[0,0,0]}},void 0===t.style?{}:t.style);void 0!==t.polygon&&(e.polygon=t.polygon),void 0!==t.position&&(e.position=t.position),s.style(e),s._checkForStroke()},this};a.create=function(t,e){"use strict";return(e=e||{}).type="polygon",r.create(t,e)},a.capabilities={feature:"polygon"},i(a,r),t.exports=a},3842:function(t,e,n){var i=n(5616),r=n(4626),o=n(1275),a=function(t){"use strict";var e=n(5325),r=n(642);if(!(this instanceof a))return new a(t);t=t||{},o.call(this,t);var s,l,u=this,c=this._init,h=t.nearestPixel,d=0,f=[],p=[];return this.featureType="quad",this._objectListStart=function(t){i.each(t,function(t,e){e.used=!1})},this._objectListGet=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].entry===e)return t[n].used=!0,t[n].value},this._objectListAdd=function(t,e,n){t.push({entry:e,value:n,used:!0})},this._objectListEnd=function(t){for(var e=t.length-1;e>=0;e-=1)t[e].used||t.splice(e,1)},this.pointSearch=function(t,n){var o,a,s=[],c=[],h={},d=[{},{},{},{}],f=[{},{},{},{}],p=[0,1,2,0],m=[1,2,3,1],g=u.data(),y=u.layer().map();return n=null===n?y.gcs():void 0===n?y.ingcs():n,t=e.transformCoordinates(n,y.gcs(),t),l||u._generateQuads(),i.each([l.clrQuads,l.imgQuads,l.vidQuads],function(e,n){n.forEach(function(e,n){for(o=0;o<p.length;o+=1)d[o].x=e.pos[3*p[o]],d[o].y=e.pos[3*p[o]+1],d[o].z=e.pos[3*p[o]+2],f[o].x=e.pos[3*m[o]],f[o].y=e.pos[3*m[o]+1],f[o].z=e.pos[3*m[o]+2];if((r.pointInPolygon(t,d)||r.pointInPolygon(t,f))&&(c.push(e.idx),s.push(g[e.idx]),!(a=r.pointToTriangleBasis2d(t,d[0],d[1],d[2]))||a.x+a.y>1?(a=r.pointToTriangleBasis2d(t,f[2],f[1],f[0]))&&(a.x=1-a.x):a.y=1-a.y,a)){if(e.crop&&void 0!==e.crop.x&&void 0!==e.crop.y&&(a.x>=e.crop.x||a.y>=e.crop.y))return c.pop(),void s.pop();h[e.idx]={basis:a,_quad:e}}})}),{index:c,found:s,extra:h}},this.position=function(t){return void 0===t?u.style("position"):(u.style("position",r.ensureFunction(t)),u.dataTime().modified(),u.modified(),u)},this._positionToQuad=function(t,n,r,o){var a=t.call(u,r,o);if(a.ll&&a.ur||a.ul&&a.lr){var s=u.gcs(),l=u.layer().map().gcs(),c={};return i.each(["ll","lr","ul","ur"],function(t,i){void 0!==a[i]&&(c[i]={},void 0===a[i].x?c[i]=[a[i][0],a[i][1],a[i][2]]:c[i]=[a[i].x,a[i].y,a[i].z],void 0===c[i][2]&&(c[i][2]=n.call(u,r,o)),s!==l&&!1!==s&&(c[i]=e.transformCoordinates(s,l,c[i])))}),c.ll=c.ll||[c.ul[0],c.lr[1],(c.ul[2]+c.lr[2])/2],c.lr=c.lr||[c.ur[0],c.ll[1],(c.ur[2]+c.ll[2])/2],c.ur=c.ur||[c.lr[0],c.ul[1],(c.lr[2]+c.ul[2])/2],c.ul=c.ul||[c.ll[0],c.ur[1],(c.ll[2]+c.ur[2])/2],c}},this._checkQuadUpdate=function(t,e){},this._generateQuads=function(){var t,e,n=u.position(),o=u.style.get("image"),a=u.style.get("video"),c=u.style.get("delayRenderWhenSeeking"),h=u.style.get("color"),m=u.style.get("depth"),g=u.style.get("opacity"),y=u.style.get("drawOnAsyncResourceLoaded"),v=u.style.get("previewColor"),x=u.style.get("previewImage"),_=u.data(),b=[],w=[],M=[],A=[0,0,0];return u._objectListStart(f),u._objectListStart(p),i.each(_,function(l,_){if(_._cachedQuad)return e=_._cachedQuad.diag2,(void 0===t||_._cachedQuad.diag2&&_._cachedQuad.diag2<t)&&(A=_._cachedQuad.ll,t=_._cachedQuad.diag2),_._cachedQuad.clrquad&&b.push(_._cachedQuad.clrquad),_._cachedQuad.imgquad&&(_._cachedQuad.imageEntry&&u._objectListGet(f,_._cachedQuad.imageEntry),w.push(_._cachedQuad.imgquad)),void(_._cachedQuad.vidquad&&(_._cachedQuad.videoEntry&&u._objectListGet(p,_._cachedQuad.videoEntry),M.push(_._cachedQuad.vidquad)));var E,T,S,C,k,P,O,L,I,R,D,j,F={};if(O=u._positionToQuad(n,m,_,l),R=g.call(u,_,l),void 0!==O&&R&&!(R<0)){if(e=Math.pow(O.ll[0]-O.ur[0],2)+Math.pow(O.ll[1]-O.ur[1],2)+Math.pow(O.ll[2]-O.ur[0],2)+Math.pow(O.lr[0]-O.ur[0],2)+Math.pow(O.lr[1]-O.ur[1],2)+Math.pow(O.lr[2]-O.ur[0],2),F.diag2=e,F.ll=O.ll,(void 0===t||e&&e<t)&&(A=O.ll,t=e),O=[O.ll[0],O.ll[1],O.ll[2],O.lr[0],O.lr[1],O.lr[2],O.ul[0],O.ul[1],O.ul[2],O.ur[0],O.ur[1],O.ur[2]],E={idx:l,pos:O,opacity:R,zOffset:_.zOffset},_.reference&&(E.reference=_.reference),_.crop&&(E.crop=_.crop),I=(L=o.call(u,_,l))?null:a.call(u,_,l),_.texture&&_.texture.data&&_.texture.width&&_.texture.height){var G={width:_.texture.width,height:_.texture.height,type:_.texture.type||"RGBA",data:_.texture.data};E.imageTexture=G,w.push(E),F.imgquad=E}else if(L){if(F.imageEntry=L,void 0===(T=u._objectListGet(f,L))&&(L instanceof Image||L instanceof HTMLCanvasElement?T=L:(T=new Image).src=L,u._objectListAdd(f,L,T)),r.isReadyImage(T)||T instanceof HTMLCanvasElement)E.image=T;else if(D=void 0,(j=x.call(u,_,l))&&r.isReadyImage(j)?E.image=j:(D=v.call(u,_,l),E.color=r.convertColor(D),E.color&&void 0!==E.color.r&&void 0!==E.color.g&&void 0!==E.color.b?(b.push(E),F.clrquad=E):D=void 0),y.call(u,_,l))P=r.isReadyImage(T,!0)?null:i.Deferred(),C=T.onload,T.onload=function(){if(void 0!==D&&(b.includes(E)&&b.splice(b.indexOf(E),1),delete F.clrquad),E.image=T,u.dataTime().modified(),u.modified(),u._update(),u.layer().draw(),P&&P.resolve(),C)return C.apply(u,arguments)},k=T.onerror,T.onerror=function(){if(P&&P.reject(),k)return k.apply(u,arguments)},P&&u.layer().addPromise(P.promise());else if(void 0===D&&!E.image)return;w.push(E),F.imgquad=E}else if(I){if(F.videoEntry=I,void 0===(S=u._objectListGet(p,I))&&(I instanceof HTMLVideoElement?S=I:(S=document.createElement("video")).src=I,u._objectListAdd(p,I,S),i(S).off(".geojsvideo").on("seeking.geojsvideo canplay.geojsvideo pause.geojsvideo playing.geojsvideo",function(t){u._checkQuadUpdate(E,t)})),E.delayRenderWhenSeeking=c.call(u,_,l),void 0===E.delayRenderWhenSeeking&&(E.delayRenderWhenSeeking=!0),r.isReadyVideo(S))E.video=S;else if(D=v.call(u,_,l),E.color=r.convertColor(D),E.color&&void 0!==E.color.r&&void 0!==E.color.g&&void 0!==E.color.b?(b.push(E),F.clrquad=E):D=void 0,y.call(u,_,l))P=r.isReadyVideo(S,!0)?null:i.Deferred(),C=S.onloadeddata,S.onloadeddata=function(){if(void 0!==D&&(b.includes(E)&&b.splice(b.indexOf(E),1),delete F.clrquad),E.video=S,u.dataTime().modified(),u.modified(),u._update(),u.layer().draw(),P&&P.resolve(),C)return C.apply(u,arguments)},k=S.onerror,S.onerror=function(){if(P&&P.reject(),k)return k.apply(u,arguments)},P&&u.layer().addPromise(P.promise());else if(void 0===D&&!E.video)return;M.push(E),F.vidquad=E}else{if(E.color=r.convertColor(h.call(u,_,l)),!E.color||void 0===E.color.r||void 0===E.color.g||void 0===E.color.b)return;b.push(E),F.clrquad=E}F.clrquad&&(d+=1,F.clrquad.quadId=d),F.imgquad&&(d+=1,F.imgquad.quadId=d),F.vidquad&&(d+=1,F.vidquad.quadId=d),!1!==s&&(_._cachedQuad=F)}}),u._objectListEnd(f),u._objectListEnd(p),l={clrQuads:b,imgQuads:w,vidQuads:M,origin:new Float32Array(A)}},this.cacheUpdate=function(t){return null==t?i.each(u.data(),function(t,e){e._cachedQuad&&delete e._cachedQuad}):(isFinite(t)&&(t=u.data()[t]),t._cachedQuad&&delete t._cachedQuad),u.modified(),u},this.video=function(t){var e,n;return isFinite(t)&&(t=u.data()[t]),t._cachedQuad?e=(t._cachedQuad.vidquad||{}).video:(l||u._generateQuads(),(n=u.data().indexOf(t))>=0&&(e=u._objectListGet(p,u.style.get("video")(t,n)))),e instanceof HTMLVideoElement?e:null},this.nearestPixel=function(t){return void 0===t?h:(h=t,u.modified(),u)},this._init=function(t){t=t||{},c.call(u,t),s=!1!==t.cacheQuads;var e=Object.assign({},{color:{r:1,g:1,b:1},opacity:1,depth:0,drawOnAsyncResourceLoaded:!0,previewColor:null,previewImage:null,image:function(t){return t.image},video:function(t){return t.video},position:r.identityFunction},void 0===t.style?{}:t.style);void 0!==t.position&&(e.position=r.ensureFunction(t.position)),u.style(e),u.dataTime().modified()},u};a.create=function(t,e){"use strict";return(e=e||{}).type="quad",o.create(t,e)},a.capabilities={color:"quad.color",image:"quad.image",imageCrop:"quad.imageCrop",imageFixedScale:"quad.imageFixedScale",imageFull:"quad.imageFull",canvas:"quad.canvas",video:"quad.video",texture:"quad.texture"},r(a,o),t.exports=a},1098:function(t,e,n){var i=n(8695),r=n(1949),o={dom:{}},a={},s={},l={},u={},c={},h={},d={},f={},p={registerFileReader:function(t,e){h[t]=e},createFileReader:function(t,e){return h.hasOwnProperty(t)?h[t](e):null},registerRenderer:function(t,e){l[t]=e},createRenderer:function(t,e,n,i){if(l.hasOwnProperty(t)){var r=l[t]({layer:e,canvas:n,options:i});return r._init(),r}return null},checkRenderer:function(t,e){if(null===t)return t;if(l.hasOwnProperty(t)){var n=l[t];if(!n.supported||n.supported())return n.apiname||t;if(!n.fallback||e)return!1;var i=p.checkRenderer(n.fallback(),!0);return!1!==i&&console.warn(t+" renderer is unavailable, using "+i+" renderer instead"),i}return!1},rendererForFeatures:function(t){var e,n,i,r,o,a,s=["webgl","canvas","svg","vtkjs",null];for(n=0;n<s.length;n+=1)if(e=s[n],!1!==p.checkRenderer(e,!0)){if(!t)return e;if(u[e]){for(a=!0,r=0;r<t.length;r+=1){if(o=null,(i=t[r]).indexOf(".")>=0&&(o=i,i=i.substr(0,i.indexOf("."))),void 0===u[e][i]){a=!1;break}if(o&&c[e][i]&&!c[e][i][o]){a=!1;break}}if(a)return e}}return console.warn('There is no renderer available for the feature list "'+(t||[]).join(", ")+'".'),!1},registerFeature:function(t,e,n,i){t in u||(u[t]={},c[t]={});var r=u[t][e];return r&&console.warn("The "+t+"."+e+" feature is already registered"),u[t][e]=n,c[t][e]=i,r},createFeature:function(t,e,n,i){var o=n.api(),a={layer:e,renderer:n};if(o in u&&t in u[o]){void 0!==i&&r.deepMerge(a,i);var s=u[o][t](a);return void 0===e.gcs&&(e.gcs=function(){return e.map().gcs()}),s}return null},registerLayerAdjustment:function(t,e,n){t in d||(d[t]={});var i=d[t][e];return i&&console.warn("The "+t+"."+e+" layer adjustment is already registered"),d[t][e]=n,i},adjustLayerForRenderer:function(t,e){var n=e.rendererName();n&&d&&d[n]&&d[n][t]&&d[n][t].apply(e)},registerLayer:function(t,e,n){a[t]=e,s[t]=n},createLayer:function(t,e,n){var i={map:e},o=null;if(t in a){if(n.renderer||n.features||!s||(i.features=s[t]),void 0!==n){var l=n.data;delete n.data,r.deepMerge(i,n),l&&(i.data=l)}return(o=a[t](i)).layerName=t,o._init(),o}return null},registerWidget:function(t,e,n){t in o||(o[t]={});var i=o[t][e];return i&&console.warn("The "+t+"."+e+" widget is already registered"),o[t][e]=n,i},createWidget:function(t,e,n){var i={layer:e};if(t in o.dom)return void 0!==n&&r.deepMerge(i,n),o.dom[t](i);throw new Error("Cannot create unknown widget "+t)},registerAnnotation:function(t,e,n){var r=f[t];return r&&console.warn("The "+t+" annotation is already registered"),f[t]={func:e,features:n||{}},i["annotation_"+t]="geo_annotation_"+t,r},createAnnotation:function(t,e){if(f[t])return f[t].func(e);console.warn("The "+t+" annotation is not registered")},listAnnotations:function(){return Object.keys(f)},featuresForAnnotations:function(t){var e=[];return(Array.isArray(t)?t:Object.keys(t)).forEach(function(n){f[n]&&Object.keys(f[n].features).forEach(function(i){Array.isArray(t)||!0===t[n]||!Array.isArray(f[n].features[i])?e.push(i):t[n].forEach(function(t){f[n].features[i].includes(t)&&e.push(i)})})}),e},rendererForAnnotations:function(t){return p.rendererForFeatures(p.featuresForAnnotations(t))}};p.registries={annotations:f,features:u,featureCapabilities:c,fileReaders:h,layers:a,renderers:l,widgets:o},t.exports=p},2274:function(t,e,n){var i=n(4626),r=n(1338),o=function(t){"use strict";if(!(this instanceof o))return new o(t);r.call(this);var e=this,n=0,i=0,a=void 0===(t=t||{}).layer?null:t.layer,s=void 0===t.canvas?null:t.canvas,l=!1;return this.layer=function(){return a},this.canvas=function(t){return void 0===t?s:(s=t,e.modified(),e)},this.map=function(){return a?a.map():null},this.initialized=function(t){return void 0===t?l:(l=t,e)},this.api=function(){throw new Error("Should be implemented by derived classes")},this.width=function(){return n},this.height=function(){return i},this._setWidthHeight=function(t,r){return n=t,i=r,e},this._init=function(){return e},this._resize=function(t,n,i,r){return e._setWidthHeight(i,r),e},this._render=function(){return e},this};i(o,r),t.exports=o},5402:function(t,e,n){var i=n(4626),r=n(1338),o=function(t){"use strict";if(!(this instanceof o))return new o;r.call(this,t);var e=this,n=null,i=[],a=this._exit,s=this.geoTrigger,l=this.addPromise,u=this.removePromise;return this.addPromise=function(t){return n&&n.addPromise(t),l(t),e},this.removePromise=function(t){return n&&n.removePromise(t),u(t),e},this.parent=function(t){return void 0===t?n:(n=t,e)},this.addChild=function(t){return Array.isArray(t)?(t.forEach(e.addChild),e):(t.parent(e),i.push(t),e)},this.removeChild=function(t){return Array.isArray(t)?(t.forEach(e.removeChild),e):(i=i.filter(function(e){return e!==t}),e)},this.children=function(){return i.slice()},this.draw=function(t){return e.children().forEach(function(e){e.draw(t)}),e},this.geoTrigger=function(t,r,o){var a;return a=(r=r||{}).geo||{},r.geo=a,a.stopPropagation?e:!o&&n&&a._triggeredBy!==n?(a._triggeredBy=e,n.geoTrigger(t,r),e):(s.call(e,t,r),a.stopPropagation||i.forEach(function(n){n.geoTrigger&&(a._triggeredBy=e,n.geoTrigger(t,r))}),e)},this._exit=function(){i=[],n=null,a()},this};i(o,r),t.exports=o},9079:function(t){t.exports="ee211d0404e96876a22a741f9b0a90002ca0a983"},3832:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(3187),a=function(t){"use strict";var e=this;return this instanceof a?(o.call(this,t),this.select=function(){var t=e.renderer(),n={},i=e.nodeFeature(),r=e.linkFeatures();return n.nodes=t.select(i._svgid()),n.links=r.map(function(e){return t.select(e._svgid())}),n},this):new a(t)};i(a,o),r("svg","graph",a),t.exports=a},6488:function(t,e,n){n(6409).svg={rescale:n(4765)},t.exports={graphFeature:n(3832),lineFeature:n(9456),object:n(5005),pathFeature:n(9927),pointFeature:n(2602),quadFeature:n(4087),renderer:n(2493),tileLayer:n(4061),trackFeature:n(2037),uniqueID:n(7376),vectorFeature:n(5747)}},9456:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(9281),a=function(t){"use strict";if(!(this instanceof a))return new a(t);var e=n(2493).d3,i=n(5005),r=n(77),s=n(642);t=t||{},o.call(this,t),i.call(this);var l=this,u=this._init,c=r(),h=0,d=this._update;return this._init=function(t){return u.call(l,t),l},this._build=function(){var t,n,i=l.data()||[],r=l.style(),o=l.renderer(),a=l.position();for(d.call(l),r.fill=function(){return!1},i.forEach(function(n,i){var u,c,h=l.line()(n,i),d={};function f(t){return s.isFunction(t)?function(){return t(h[0],0,n,i)}:t}for(c in r)r.hasOwnProperty(c)&&(d[c]=f(r[c]));t=e.line().x(function(t){return l.featureGcsToDisplay(t).x}).y(function(t){return l.featureGcsToDisplay(t).y}).curve(l.style.get("closed")(n,i)&&h.length>2?e.curveLinearClosed:e.curveLinear),u={data:[h.map(function(t,e){return a(t,e,n,i)})],append:"path",attributes:{d:t},id:l._svgid()+i,classes:["svgLineFeature","svgSubLine-"+i],visible:l.visible,style:d},o._drawFeatures(u)}),n=i.length;n<h;n+=1)o._removeFeature(l._svgid()+n);return h=i.length,c.modified(),l.updateTime().modified(),l},this._update=function(){return d.call(l),l.timestamp()>=c.timestamp()&&l._build(),l},this._init(t),this};i(a,o);var s={};s[o.capabilities.basic]=!0,s[o.capabilities.multicolor]=!1,r("svg","line",a,s),t.exports=a},5005:function(t,e,n){var i=function(t){"use strict";var e=n(1338),r=n(7376);if(!(this instanceof e))return new i(t);var o="svg-"+r(),a=this._exit,s=this,l=this.visible,u=this.draw;return this._svgid=function(){return o},this.select=function(){return s.renderer().select(s._svgid())},this.draw=function(){return s.ready&&(s._update(),u()),s},this._exit=function(){s.renderer()._removeFeature(s._svgid()),a()},this.visible=function(t,e){return void 0!==t&&t!==l(void 0,!0)&&s.renderer()&&s.renderer()._scheduleUpdate(),l(t,e)},this};t.exports=i},9927:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(2266),a=function(t){"use strict";if(!(this instanceof a))return new a(t);var e=n(5005),i=n(77);t=t||{},o.call(this,t),e.call(this);var r=this,s=i(),l=this._update,u={style:{}};return this._build=function(){var t,e,n=r.data()||[],i=r.style.get(),o=r.style.get("position");return l.call(r),e=function(t){return"M"+t.source.x+","+t.source.y+"C"+t.source.x+","+(t.source.y+t.target.y)/2+" "+t.target.x+","+(t.source.y+t.target.y)/2+" "+t.target.x+","+t.target.y},t=[],n.forEach(function(e,i){var a,s;i<n.length-1&&(a=o(e,i),s=o(n[i+1],i+1),t.push({source:r.featureGcsToDisplay(a),target:r.featureGcsToDisplay(s)}))}),u.data=t,u.attributes={d:e},u.id=r._svgid(),u.append="path",u.classes=["svgPathFeature"],u.style=Object.assign({fill:function(){return!1},fillColor:{r:0,g:0,b:0}},i),u.visible=r.visible,r.renderer()._drawFeatures(u),s.modified(),r.updateTime().modified(),r},this._update=function(){return l.call(r),r.dataTime().timestamp()>=s.timestamp()&&r._build(),r},this._init(t),this};i(a,o),r("svg","path",a),t.exports=a},2602:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(7541),a=function(t){"use strict";if(!(this instanceof a))return new a(t);var e=n(5005),i=n(77);t=t||{},o.call(this,t),e.call(this);var r=this,s=this._init,l=this._update,u=i(),c={};return this._init=function(t){return s.call(r,t),r},this._build=function(){var t=r.data(),e=r.style.get(),n=r.renderer(),i=r.position();return l.call(r),t||(t=[]),c.id=r._svgid(),c.data=t,c.append="circle",c.attributes={r:n._convertScale(e.radius),cx:function(t){return r.featureGcsToDisplay(i(t)).x},cy:function(t){return r.featureGcsToDisplay(i(t)).y}},c.style=e,c.classes=["svgPointFeature"],c.visible=r.visible,r.renderer()._drawFeatures(c),u.modified(),r.updateTime().modified(),r},this._update=function(){return l.call(r),r.timestamp()>=u.timestamp()&&r._build(),r},this._init(t),this};i(a,o);var s={};s[o.capabilities.stroke]=!0,r("svg","point",a,s),t.exports=a},4087:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(3842),a=function(t){"use strict";if(!(this instanceof a))return new a(t);var e=n(5616),i=n(2493).d3,r=n(5005);o.call(this,t),r.call(this);var s,l=this,u=this._exit,c=this._init,h=this._update;return this._build=function(){if(this.position()){var t=l.renderer(),n=t.layer().map();s=l._generateQuads();var r=[];e.each(s.clrQuads,function(t,e){r.push({type:"clr",quad:e,zIndex:e.pos[2]})}),e.each(s.imgQuads,function(t,e){e.image&&r.push({type:"img",quad:e,zIndex:e.pos[2]})});var o={id:l._svgid(),data:r,dataIndex:function(t){return t.quad.quadId},append:function(t){var e=this.namespaceURI,n="clr"===t.type?"polygon":"image";return e?document.createElementNS(e,n):document.createElement(n)},attributes:{fill:function(t){if("clr"===t.type)return i.rgb(255*t.quad.color.r,255*t.quad.color.g,255*t.quad.color.b);1!==t.quad.opacity&&i.select(this).style("opacity",t.quad.opacity)},height:function(t){return"clr"===t.type?void 0:1},points:function(e){if("clr"===e.type&&!e.points){var i,r=[];for(i=0;i<e.quad.pos.length;i+=3){var o={x:e.quad.pos[i],y:e.quad.pos[i+1],z:e.quad.pos[i+2]};o=n.gcsToDisplay(o,null),o=t.baseToLocal(o),r.push(o.x+","+o.y)}e.points=r[0]+" "+r[1]+" "+r[3]+" "+r[2]}return"clr"===e.type?e.points:void 0},preserveAspectRatio:function(t){return"clr"===t.type?void 0:"none"},reference:function(t){return t.quad.reference},stroke:!1,transform:function(e){if("img"===e.type&&e.quad.image&&!e.svgTransform){var i,r,o,a,s=[],l=-1,u=e.quad.image.width,c=e.quad.image.height;for(o=0;o<e.quad.pos.length;o+=3){var h={x:e.quad.pos[o],y:e.quad.pos[o+1],z:e.quad.pos[o+2]};h=n.gcsToDisplay(h,null),h=t.baseToLocal(h),s.push(h)}for(o=0;o<4;o+=1)(i=Math.abs(s[(o+1)%4].x*(s[(o+2)%4].y-s[(o+3)%4].y)+s[(o+2)%4].x*(s[(o+3)%4].y-s[(o+1)%4].y)+s[(o+3)%4].x*(s[(o+1)%4].y-s[(o+2)%4].y))/2)>l&&(l=i,r=o);e.svgTransform=[3===r||2===r?s[1].x-s[0].x:s[3].x-s[2].x,3===r||2===r?s[1].y-s[0].y:s[3].y-s[2].y,0===r||2===r?s[1].x-s[3].x:s[0].x-s[2].x,0===r||2===r?s[1].y-s[3].y:s[0].y-s[2].y,2===r?s[3].x+s[0].x-s[1].x:s[2].x,2===r?s[3].y+s[0].y-s[1].y:s[2].y],Math.abs(e.svgTransform[1]/u)<1e-6&&Math.abs(e.svgTransform[2]/c)<1e-6&&(a=e.svgTransform[0]/u,e.svgTransform[4]=Math.round(e.svgTransform[4]/a)*a,a=e.svgTransform[3]/c,e.svgTransform[5]=Math.round(e.svgTransform[5]/a)*a)}return"img"===e.type&&e.quad.image?"matrix("+e.svgTransform.join(" ")+")":void 0},width:function(t){return"clr"===t.type?void 0:1},x:function(t){return"clr"===t.type?void 0:0},"xlink:href":function(t){return"clr"!==t.type&&t.quad.image?t.quad.image.src:void 0},y:function(t){return"clr"===t.type?void 0:0}},style:{fillOpacity:function(t){return"clr"===t.type?t.quad.opacity:void 0}},onlyRenderNew:!this.style("previewColor")&&!this.style("previewImage"),sortByZ:!0,visible:l.visible,classes:["svgQuadFeature"]};t._drawFeatures(o),l.buildTime().modified()}},this._update=function(){return h.call(l),(l.buildTime().timestamp()<=l.dataTime().timestamp()||l.buildTime().timestamp()<l.timestamp())&&l._build(),l},this._init=function(){c.call(l,t)},this._exit=function(){u.call(l)},l._init(t),this};i(a,o);var s={};s[o.capabilities.color]=!0,s[o.capabilities.image]=!0,s[o.capabilities.imageCrop]=!1,s[o.capabilities.imageFixedScale]=!1,s[o.capabilities.imageFull]=!1,s[o.capabilities.canvas]=!1,s[o.capabilities.video]=!1,r("svg","quad",a,s),t.exports=a},4765:function(t){t.exports="geo_svg_rescale"},2493:function(t,e,n){var i=n(4626),r=n(1098).registerRenderer,o=n(2274),a=function(t){"use strict";var e=a.d3,i=n(5005),r=n(642),s=n(6409),l=n(4765);if(!(this instanceof a))return new a(t);o.call(this,t);var u=this._exit;i.call(this,t),t=t||{};var c=this,h=null,d={},f=null,p=null,m=1,g={dx:0,dy:0,rx:0,ry:0,rotation:0},y={},v={},x=null,_=null;function b(t){return t?x.select(".group-"+t):x.select(".group-"+c._svgid())}function w(){var t=c.layer().map(),e=t.size().width,n=t.size().height;if(!e||!n)throw new Error("Map layer has size 0");c._setWidthHeight(e,n),p=Math.pow(e*e+n*n,.5),f={upperLeft:t.displayToGcs({x:0,y:0},null),lowerRight:t.displayToGcs({x:e,y:n},null),center:t.displayToGcs({x:e/2,y:n/2},null)}}return this._convertColor=function(t,n){return t=r.ensureFunction(t),n=n||function(){return!0},function(){var i="none";return n.apply(c,arguments)&&(i=t.apply(c,arguments)).hasOwnProperty("r")&&i.hasOwnProperty("g")&&i.hasOwnProperty("b")&&(i=e.rgb(255*i.r,255*i.g,255*i.b)),i}},this._convertScale=function(t){return t=r.ensureFunction(t),function(){return t.apply(c,arguments)/m}},this._setTransform=function(){if(f||w(),h){var t,e,n,i,r,o,a=c.layer().map(),s=a.gcsToDisplay(f.upperLeft,null),l=a.gcsToDisplay(f.lowerRight,null),u=a.gcsToDisplay(f.center,null),d=b();n=Math.sqrt(Math.pow(l.y-s.y,2)+Math.pow(l.x-s.x,2))/p,i=a.rotation(),r=-c.width()/2,o=-c.height()/2,t=n*r+u.x,e=n*o+u.y,i||(t=Math.round(t),e=Math.round(e));var y="matrix("+[n,0,0,n,t,e].join()+")";i&&(y+=" rotate("+[180*i/Math.PI,-r,-o].join()+")"),d.attr("transform",y),m=n,g.dx=t,g.dy=e,g.rx=r,g.ry=o,g.rotation=i}},this.baseToLocal=function(t){if(t={x:(t.x-g.dx)/m,y:(t.y-g.dy)/m},g.rotation){var e=Math.sin(-g.rotation),n=Math.cos(-g.rotation),i=t.x+g.rx,r=t.y+g.ry;t={x:i*n-r*e-g.rx,y:i*e+r*n-g.ry}}return t},this.localToBase=function(t){if(g.rotation){var e=Math.sin(g.rotation),n=Math.cos(g.rotation),i=t.x+g.rx,r=t.y+g.ry;t={x:i*n-r*e-g.rx,y:i*e+r*n-g.ry}}return t={x:t.x*m+g.dx,y:t.y*m+g.dy}},this._init=function(t){if(!c.canvas()){var n;t.widget=t.widget||!1,(x="d3Parent"in t?e.select(t.d3Parent).append("svg"):e.select(c.layer().node().get(0)).append("svg")).attr("display","block");var i=(_=x.append("defs")).append("filter").attr("id","geo-highlight").attr("x","-100%").attr("y","-100%").attr("width","300%").attr("height","300%");i.append("feMorphology").attr("operator","dilate").attr("radius",2).attr("in","SourceAlpha").attr("result","dilateOut"),i.append("feGaussianBlur").attr("stdDeviation",5).attr("in","dilateOut").attr("result","blurOut"),i.append("feColorMatrix").attr("type","matrix").attr("values","-1 0 0 0 1  0 -1 0 0 1  0 0 -1 0 1  0 0 0 1 0").attr("in","blurOut").attr("result","invertOut"),i.append("feBlend").attr("in","SourceGraphic").attr("in2","invertOut").attr("mode","normal"),t.widget||(n=t.canvas||x.append("g")),(i=_.append("filter").attr("id","geo-blur").attr("x","-100%").attr("y","-100%").attr("width","300%").attr("height","300%")).append("feGaussianBlur").attr("stdDeviation",20).attr("in","SourceGraphic"),h=c.layer().sticky(),x.attr("class",c._svgid()),x.attr("width",c.layer().node().width()),x.attr("height",c.layer().node().height()),t.widget?c.canvas(x):(n.attr("class","group-"+c._svgid()),c.canvas(n))}return c._setTransform(),c},this.api=function(){return a.apiname},this.scaleFactor=function(){return m},this._resize=function(t,e,n,i){return f||w(),x.attr("width",n),x.attr("height",i),c._setTransform(),c._setWidthHeight(n,i),c.layer().geoTrigger(l,{scale:m},!0),c},this._exit=function(){d={},c.canvas().remove(),x.remove(),x=void 0,_.remove(),_=void 0,y={},v={},u()},this._definitions=function(){return _},this._drawFeatures=function(t){return d[t.id]={data:t.data,index:t.dataIndex,style:t.style,visible:t.visible,attributes:t.attributes,classes:t.classes,append:t.append,onlyRenderNew:t.onlyRenderNew,sortByZ:t.sortByZ,parentId:t.parentId},c.__render(t.id,t.parentId)},this.__render=function(t,e){var n;if(void 0===t){for(n in d)d.hasOwnProperty(n)&&c.__render(n);return c}return e?c._renderFeature(t,e):(y[t]=!0,c.layer().map().scheduleAnimationFrame(c._renderFrame)),c},this._scheduleUpdate=function(){c.layer().map().scheduleAnimationFrame(c._renderFrame)},this._renderFrame=function(){var t;for(t in v)c.select(t).remove(),_.selectAll("."+t).remove();v={};var e=y;for(t in y={},e)e.hasOwnProperty(t)&&c._renderFeature(t);for(t in d)d.hasOwnProperty(t)&&void 0===e[t]&&c.select(t).attr("visibility",!d[t].visible||d[t].visible()?"visible":"hidden")},this._renderFeature=function(t,e){if(!d[t])return c;c.select(t).remove();var n,i,r=d[t].data,o=d[t].index,a=d[t].style,s=d[t].visible,l=d[t].attributes,u=d[t].classes,h=d[t].append,f=c.select(t,e).data(r,o);return n=f.enter().append(h),f.exit().remove(),function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&t.attr(n,e[n])}(i=n,l),i.attr("class",u.concat([t]).join(" ")),function(t,e){var n,i,r;function o(){return e.fill.apply(c,arguments)?null:"none"}function a(){return e.stroke.apply(c,arguments)?null:"none"}for(n in e)e.hasOwnProperty(n)&&(r=null,i=null,"strokeColor"===n?(i="stroke",r=c._convertColor(e[n],e.stroke)):"stroke"===n&&e[n]&&!e.hasOwnProperty("strokeColor")?(i="stroke",r=a):"strokeWidth"===n?(i="stroke-width",r=c._convertScale(e[n])):"strokeOpacity"===n?(i="stroke-opacity",r=e[n]):"fillColor"===n?(i="fill",r=c._convertColor(e[n],e.fill)):"fill"!==n||e.hasOwnProperty("fillColor")?"fillOpacity"===n?(i="fill-opacity",r=e[n]):"lineCap"===n?(i="stroke-linecap",r=e[n]):"lineJoin"===n?(i="stroke-linejoin",r=e[n]):"miterLimit"===n&&(i="stroke-miterlimit",r=e[n]):(i="fill",r=o),i&&t.style(i,r))}(i,a),s&&i.attr("visibility",s()?"visible":"hidden"),n.size()&&d[t].sortByZ&&f.sort(function(t,e){return(t.zIndex||0)-(e.zIndex||0)}),c},this.select=function(t,e){return b(e).selectAll("."+t)},this._removeFeature=function(t){return v[t]=!0,c.layer().map().scheduleAnimationFrame(c._renderFrame),delete d[t],y[t]&&delete y[t],c},this.draw=function(){},this.layer().geoOn(s.pan,c._setTransform),this.layer().geoOn(s.rotate,c._setTransform),this.layer().geoOn(s.zoom,function(){c._setTransform(),c.__render(),c.layer().geoTrigger(l,{scale:m},!0)}),this.layer().geoOn(s.resize,function(t){c._resize(t.x,t.y,t.width,t.height)}),this._init(t),this};a.apiname="svg",i(a,o),r("svg",a),r("d3",a),a.supported=function(){delete a.d3;try{a.d3=n(3893),a.d3&&a.d3.rgb||(a.d3=void 0)}catch(t){}return void 0!==a.d3},a.fallback=function(){return null},a.supported(),t.exports=a},4061:function(t,e,n){var i=function(){"use strict";var t,e=this,n=this._init,i=this._exit,r=this._update,o=0,a=[];this._drawTile=function(n){if(t){var i=e._tileBounds(n),r=n.index.level||0,s=e._tileOffset(r),l={};l.ul=e.fromLocal(e.fromLevel({x:i.left-s.x,y:i.top-s.y},r),0),l.ll=e.fromLocal(e.fromLevel({x:i.left-s.x,y:i.bottom-s.y},r),0),l.ur=e.fromLocal(e.fromLevel({x:i.right-s.x,y:i.top-s.y},r),0),l.lr=e.fromLocal(e.fromLevel({x:i.right-s.x,y:i.bottom-s.y},r),0),l.ul.z=l.ll.z=l.ur.z=l.lr.z=r,o+=1,l.id=o,n.quadId=l.id,l.image=n.image,l.reference=n.toString(),a.push(l),t.data(a),t._update(),e.draw()}},this._remove=function(n){if(void 0!==n.quadId&&t){for(var i=0;i<a.length;i+=1)if(a[i].id===n.quadId){a.splice(i,1);break}t.data(a),t._update(),e.draw()}},this._update=function(n){return r.call(e,n),e._addBaseQuadToTiles(t,a),e},this._exit=function(){e.deleteFeature(t),t=null,a=[],i.apply(e,arguments)},this._init=function(){n.apply(e,arguments),(t=e.createFeature("quad",{previewColor:e._options.previewColor,previewImage:e._options.previewImage})).geoTrigger=void 0,t.gcs(e._options.gcs||e.map().gcs()),t.data(a),t._update()},this._getSubLayer=function(){},this._updateSubLayers=void 0};(0,n(1098).registerLayerAdjustment)("svg","tile",i),t.exports=i},2037:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(338),a=function(t){"use strict";return this instanceof a?(t=t||{},o.call(this,t),n(5005).call(this),this._init(t),this):new a(t)};i(a,o),r("svg","track",a),t.exports=a},7376:function(t){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";t.exports=function(){var t,n=[];for(n.length=8,t=0;t<8;t+=1)n[t]=e.charAt(Math.floor(61*Math.random()));return n.join("")}},5747:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(6858),a={arrow:{attrs:{class:"geo-vector-arrow geo-vector-marker",viewBox:"0 0 10 10",refX:1,refY:5,markerHeight:5,markerWidth:5,orient:"auto"},path:"M 0 0 L 10 5 L 0 10 z"},point:{attrs:{class:"geo-vector-point geo-vector-marker",viewBox:"0 0 12 12",refX:6,refY:6,markerHeight:8,markerWidth:8,orient:"auto"},path:"M 6 3 A 3 3 0 1 1 5.99999 3 Z"},bar:{attrs:{class:"geo-vector-bar geo-vector-marker",viewBox:"0 0 10 10",refX:0,refY:5,markerHeight:6,markerWidth:6,orient:"auto"},path:"M 0 0 L 2 0 L 2 10 L 0 10 z"},wedge:{attrs:{class:"geo-vector-wedge geo-vector-marker",viewBox:"0 0 10 10",refX:10,refY:5,markerHeight:5,markerWidth:5,orient:"auto"},path:"M 0 0 L 1 0 L 10 5 L 1 10 L 0 10 L 9 5 L 0 0"}},s=function(t){"use strict";if(!(this instanceof s))return new s(t);var e=n(5005),i=n(77),r=n(2493).d3;t=t||{},o.call(this,t),e.call(this);var l=this,u=this._exit,c=this._update,h=i(),d={};function f(t,e,n){return l._svgid()+"_marker_"+e+"_"+n}function p(t,e,n,i,o){var s=l.renderer()._definitions().selectAll("g.marker-group#"+l._svgid()).data(t.length?[1]:[]);s.enter().append("g").attr("id",l._svgid).attr("class","marker-group"),s.exit().remove();var u=t.reduce(function(t,e,n){var r=a[o(e,n)],s=a[i(e,n)];return r&&t.push({data:e,dataIndex:n,head:!0}),s&&t.push({data:e,dataIndex:n,head:!1}),t},[]),c=(s=l.renderer()._definitions().selectAll("g.marker-group#"+l._svgid())).selectAll("marker.geo-vector-marker").data(u),h=l.renderer();c.enter().append("marker").each(function(t){var e=r.select(this),n=t.head?a[o(t.data,t.dataIndex)]:a[i(t.data,t.dataIndex)];Object.keys(n.attrs).forEach(function(t){e.attr(t,n.attrs[t])})}).attr("id",function(t){return f(t.data,t.dataIndex,t.head?"head":"tail")}).style("stroke",function(t){return h._convertColor(e)(t.data,t.dataIndex)}).style("fill",function(t){return h._convertColor(e)(t.data,t.dataIndex)}).style("opacity",function(t){return n(t.data,t.dataIndex)}).append("path").attr("d",function(t){return t.head?a[o(t.data,t.dataIndex)].path:a[i(t.data,t.dataIndex)].path}),c.exit().remove()}return this._build=function(){var t,e=l.data(),n=l.style.get(),i=l.renderer(),r=l.origin(),o=l.delta(),a=l.style("scale"),s=0;function u(){return a/i.scaleFactor()}return c.call(l),e||(e=[]),t=e.map(function(t,e){var n=l.featureGcsToDisplay(r(t,e)),i=o(t,e);return s=Math.max(s,i.x*i.x+i.y*i.y),{x1:n.x,y1:n.y,dx:i.x,dy:-i.y}}),s=Math.sqrt(s),a||(a=75/(s||1)),d.id=l._svgid(),d.data=e,d.append="line",d.attributes={x1:function(e,n){return t[n].x1},y1:function(e,n){return t[n].y1},x2:function(e,n){return t[n].x1+u()*t[n].dx},y2:function(e,n){return t[n].y1+u()*t[n].dy},"marker-start":function(t,e){return"url(#"+f(0,e,"tail")+")"},"marker-end":function(t,e){return"url(#"+f(0,e,"head")+")"}},d.style={stroke:function(){return!0},strokeColor:n.strokeColor,strokeWidth:n.strokeWidth,strokeOpacity:n.strokeOpacity,originStyle:n.originStyle,endStyle:n.endStyle},d.classes=["svgVectorFeature"],d.visible=l.visible,p(e,n.strokeColor,n.strokeOpacity,n.originStyle,n.endStyle),l.renderer()._drawFeatures(d),h.modified(),l.updateTime().modified(),l},this._update=function(){return c.call(l),l.timestamp()>=h.timestamp()?l._build():p(d.data,d.style.strokeColor,d.style.strokeOpacity,d.style.originStyle,d.style.endStyle),l},this._exit=function(){u.call(l),d={},p([],null,null,null,null)},this._init(t),this};s.markerConfigs=a,i(s,o),r("svg","vector",s),t.exports=s},6546:function(t,e,n){var i=n(4626),r=n(1275),o=function(t){"use strict";if(!(this instanceof o))return new o(t);t=t||{},r.call(this,t);var e=this,n=this._init;return this.featureType="text",this.position=function(t){return void 0===t?e.style("position"):(t!==e.style("position")&&(e.style("position",t),e.dataTime().modified(),e.modified()),e)},this.text=function(t){return void 0===t?e.style("text"):(t!==e.style("text")&&(e.style("text",t),e.dataTime().modified(),e.modified()),e)},this._init=function(t){t=t||{},n.call(e,t);var i=Object.assign({},{font:"bold 16px sans-serif",textAlign:"center",textBaseline:"middle",color:{r:0,g:0,b:0},rotation:0,rotateWithMap:!1,textScaled:!1,position:function(t){return Array.isArray(t)?{x:t[0],y:t[1],z:t[2]||0}:t},text:function(t){return t.text}},void 0===t.style?{}:t.style);void 0!==t.position&&(i.position=t.position),void 0!==t.text&&(i.text=t.text),e.style(i),i.position&&e.position(i.position),i.text&&e.text(i.text),e.dataTime().modified()},this._init(t),e};o.usedStyles=["visible","font","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","lineHeight","fontFamily","textAlign","textBaseline","color","textOpacity","rotation","rotateWithMap","textScaled","offset","shadowColor","shadowOffset","shadowBlur","shadowRotate","textStrokeColor","textStrokeWidth"],o.create=function(t,e){"use strict";return(e=e||{}).type="text",r.create(t,e)},o.capabilities={feature:"text"},i(o,r),t.exports=o},5289:function(t,e,n){var i=n(5616),r=function(t){if(!(this instanceof r))return new r(t);this._index=t.index,this._size=t.size,this._overlap=t.overlap||{x:0,y:0},this._wrap=t.wrap||{x:1,y:1},this._url=t.url,this._fetched=!1,this._queue=t.queue||null,Object.defineProperty(this,"index",{get:function(){return this._index}}),Object.defineProperty(this,"size",{get:function(){return this._size}}),Object.defineProperty(this,"overlap",{get:function(){return this._overlap}}),this.fetch=function(){return this._fetched||i.get(this._url).done(function(){this._fetched=!0}.bind(this)).promise(this),this},this.fetched=function(){return this._fetched},this.then=function(t,e){return this.fetched()||!this._queue||!this._queue.add||this.state&&"pending"!==this.state()?this.fetch():this._queue.add(this,this.fetch),this.done&&this.fail?this.done(t).fail(e):this.then(t,e),this},this.catch=function(t){return this.then(void 0,t),this},this.toString=function(){return[this._index.level||0,this._index.y,this._index.x,this._index.reference||0].join("_")},this.bounds=function(t,e){var n,i,r,o;return i=(n=this.size.x*(this.index.x-t.x)-this.overlap.x-e.x)+this.size.x+2*this.overlap.x,r=(o=this.size.y*(this.index.y-t.y)-this.overlap.y-e.y)+this.size.y+2*this.overlap.y,this.overlap.x&&this.index.x===t.x&&(n+=this.overlap.x),this.overlap.y&&this.index.y===t.y&&(o+=this.overlap.y),{left:n,right:i,bottom:r,top:o}},Object.defineProperty(this,"bottom",{get:function(){return this.size.y*(this.index.y+1)+this.overlap.y}}),Object.defineProperty(this,"top",{get:function(){return this.size.y*this.index.y-(this.index.y?this.overlap.y:0)}}),Object.defineProperty(this,"left",{get:function(){return this.size.x*this.index.x-(this.index.x?this.overlap.x:0)}}),Object.defineProperty(this,"right",{get:function(){return this.size.x*(this.index.x+1)+this.overlap.x}}),this.fadeIn=function(t){return i.noop(t),this}};t.exports=r},9123:function(t){var e=function(t){return this instanceof e?(t=t||{},this._size=t.size||64,Object.defineProperty(this,"size",{get:function(){return this._size},set:function(t){for(;this._atime.length>t;)this.remove(this._atime[this._atime.length-1]);this._size=t}}),Object.defineProperty(this,"length",{get:function(){return this._atime.length}}),this._access=function(t){return this._atime.indexOf(t)},this.remove=function(t){var e="string"==typeof t?t:t.toString();return e in this._cache&&(this._atime.splice(this._access(e),1),delete this._cache[e],!0)},this.clear=function(){return this._cache={},this._atime=[],this},this.get=function(t,e){return(t="string"==typeof t?t:t.toString())in this._cache?(e||(this._atime.splice(this._access(t),1),this._atime.unshift(t)),this._cache[t]):null},this.add=function(t,e,n){this.remove(t);var i=t.toString();this._cache[i]=t,this._atime.unshift(i),n||this.purge(e)},this.purge=function(t){for(var e;this._atime.length>this.size;){e=this._atime.pop();var n=this._cache[e];t&&t(n),delete this._cache[e]}},this.clear(),this):new e(t)};t.exports=e},9264:function(t,e,n){var i=n(4626),r=n(6498),o=n(642);function a(t,e){return(t%e+e)%e}function s(t){var e,n=/\$?\{(s|S|[sS]:[^{}]+|[^-{}]-[^-{}]|([^,{}]+,)+[^,{}]+)\}/,i=t.replace(new RegExp(n,"g"),"{s}").replace(/\$?\{[xX]\}/g,"{x}").replace(/\$?\{[yY]\}/g,"{y}").replace(/\$?\{[zZ]\}/g,"{z}"),r=t.match(n);if(r)if(r[2])e=r[1].split(",");else if(":"===r[1][1])e=r[1].substr(2).split("");else if("-"===r[1][1]){e=[];for(var o=r[1].charCodeAt(0),s=r[1].charCodeAt(2),l=Math.min(o,s);l<=Math.max(o,s);l+=1)e.push(String.fromCharCode(l))}return function(t,n,r,o){return i.replace(/\{s\}/g,function(t,e,n,i){return i[a(t+e+n,i.length)]}(t,n,r,e||o)).replace(/\{x\}/g,t).replace(/\{y\}/g,n).replace(/\{z\}/g,r)}}var l=function(t){"use strict";if(!(this instanceof l))return new l(t);r.call(this,t);var e=n(5616),i=n(6409),u=n(5325),c=n(9123),h=n(5938),d=n(1098).adjustLayerForRenderer,f=n(5289);if((t=o.deepMerge({},this.constructor.defaults,t||{})).cacheSize||(t.cacheSize=t.keepLower?600:200),"string"===e.type(t.subdomains)&&(t.subdomains=t.subdomains.split("")),t.baseUrl){var p=t.baseUrl;p&&"/"!==p.charAt(p.length-1)&&(p+="/"),t.url=p+"{z}/{x}/{y}."+(t.imageFormat||"png")}t.originalUrl=t.url,"string"===e.type(t.url)&&(t.url=s(t.url));var m,g,y,v=this._init,x=this._exit,_=this.visible,b=t.queueSize||6,w=t.initialQueueSize||0,M=[],A={},E=[],T=t.nearestPixel,S=this;this._options=o.deepMerge({},t),this.attribution(t.attribution),this._activeTiles={},this._tileTree={},this._cache=c({size:t.cacheSize}),this._queue=t.queue||h({size:b,initialSize:w,track:t.cacheSize,needed:function(t){return this._tileLayers&&this._tileLayers.length?this._tileLayers.some(function(e){return t===e.cache.get(t.toString(),!0)}):t===S.cache.get(t.toString(),!0)}}),this._queue._tileLayers=this._queue._tileLayers||[],this._queue._tileLayers.push(S),this._queue.initialTrack&&this._queue.track&&(this._queue.track=this._queue.initialTrack*this._queue._tileLayers.length);var C={};return Object.defineProperty(this,"options",{get:function(){return Object.assign({},S._options)}}),Object.defineProperty(this,"cache",{get:function(){return S._cache}}),Object.defineProperty(this,"activeTiles",{get:function(){return Object.assign({},S._activeTiles)}}),Object.defineProperty(this,"queue",{get:function(){return S._queue},set:function(t){S._queue!==t&&(this._queue&&this._queue._tileLayers&&this._queue._tileLayers.indexOf(S)>=0&&(this._queue._tileLayers.splice(this._queue._tileLayers.indexOf(S),1),this._queue.initialTrack&&this._queue.track&&this._queue._tileLayers.length&&(this._queue.track=this._queue.initialTrack*this._queue._tileLayers.length)),S._queue=t,S._queue._tileLayers=S._queue._tileLayers||[],S._queue._tileLayers.push(S),S._queue.initialTrack&&S._queue.track&&(S._queue.track=S._queue.initialTrack*S._queue._tileLayers.length))}}),Object.defineProperty(this,"queueSize",{get:function(){return b},set:function(t){b=t,S._queue.size=t}}),Object.defineProperty(this,"initialQueueSize",{get:function(){return w},set:function(t){w=t||0,S._queue.initialSize=t||b}}),Object.defineProperty(this,"reference",{get:function(){return S.id()+"_"+(m||0)},set:function(t){m=t},configurable:!0}),this.tilesAtZoom=function(t){if(S._options.tilesAtZoom)return S._options.tilesAtZoom.call(S,t);var e=Math.pow(2,t);return{x:e,y:e}},this.tilesMaxBounds=function(t){return S._options.tilesMaxBounds?S._options.tilesMaxBounds.call(S,t):null},this.tileCropFromBounds=function(t){if(S._options.tilesMaxBounds){var e=t.index.level,n=S._tileBounds(t);return void 0===E[e]&&(E[e]=S.tilesMaxBounds(e)||null),E[e]&&(n.right>E[e].x||n.bottom>E[e].y)?{x:Math.max(0,Math.min(E[e].x,n.right)-n.left),y:Math.max(0,Math.min(E[e].y,n.bottom)-n.top)}:void 0}},this.isValid=function(t){return S._options.minLevel<=t.level&&t.level<=S._options.maxLevel&&(!!(S._options.wrapX||0<=t.x&&t.x<=S.tilesAtZoom(t.level).x-1)&&!!(S._options.wrapY||0<=t.y&&t.y<=S.tilesAtZoom(t.level).y-1))},this._origin=function(t){var e,n=S.toLevel(S.toLocal(S.map().origin()),t),i=S._options;return{index:e={x:Math.floor(n.x/i.tileWidth),y:Math.floor(n.y/i.tileHeight)},offset:{x:n.x-i.tileWidth*e.x,y:n.y-i.tileHeight*e.y}}},this._tileBounds=function(t){var e=S._origin(t.index.level);return t.bounds(e.index,e.offset)},this.tileAtPoint=function(t,e){var n=S._origin(e),i=S.map();t=S.displayToLevel(i.gcsToDisplay(t,null),e),isNaN(t.x)&&(t.x=0),isNaN(t.y)&&(t.y=0);var r=S._tileOffset(e);return r&&(t.x+=r.x,t.y+=r.y),{x:Math.floor(n.index.x+(n.offset.x+t.x)/S._options.tileWidth),y:Math.floor(n.index.y+(n.offset.y+t.y)/S._options.tileHeight)}},this.gcsTileBounds=function(t,e){var n=t.index?t:f({index:t,size:{x:S._options.tileWidth,y:S._options.tileHeight},url:""}),i=S._tileOffset(n.index.level),r=n.bounds({x:0,y:0},i),o=S.map(),a=o.unitsPerPixel(n.index.level),s=[{x:r.left*a,y:S._topDown()*r.top*a},{x:r.right*a,y:S._topDown()*r.bottom*a}];return(e=null===e?o.gcs():void 0===e?o.ingcs():e)!==o.gcs()&&(s=u.transformCoordinates(o.gcs(),e,s)),{left:s[0].x,top:s[0].y,right:s[1].x,bottom:s[1].y}},this._getTile=function(t,e){var n=e||t;return f({index:t,size:{x:S._options.tileWidth,y:S._options.tileHeight},queue:S._queue,url:S._options.url.call(S,n.x,n.y,Math.max(n.level||0,Math.min(0,S._options.minLevel||0)),S._options.subdomains)})},this._getTileCached=function(t,e,n){var i=S.cache.get(S._tileHash(t));return null===i&&(i=S._getTile(t,e),S.cache.add(i,S.remove,n)),i},this._tileHash=function(t){return[t.level||0,t.y,t.x,t.reference||0].join("_")},this._getTileRange=function(t,e){var n=[S.tileAtPoint({x:e.left,y:e.top},t),S.tileAtPoint({x:e.right,y:e.top},t),S.tileAtPoint({x:e.left,y:e.bottom},t),S.tileAtPoint({x:e.right,y:e.bottom},t)];return{start:{x:Math.min(n[0].x,n[1].x,n[2].x,n[3].x),y:Math.min(n[0].y,n[1].y,n[2].y,n[3].y)},end:{x:Math.max(n[0].x,n[1].x,n[2].x,n[3].x),y:Math.max(n[0].y,n[1].y,n[2].y,n[3].y)}}},this._getTiles=function(t,n,i,r){var o,s,l,u,c,h,d,f,p,m,g,y=[],v=!1,x=S._options.keepLower?S._options.minLevel:Math.min(Math.max(t,S._options.minLevel),S._options.maxLevel);for(t<x&&(t=x),g=x;g<=t;g+=1){if(c=(d=S._getTileRange(g,n)).start,h=d.end,u=S.tilesAtZoom(g),!S._options.wrapX){if(c.x>=u.x||h.x<0)continue;c.x=Math.min(Math.max(c.x,0),u.x-1),h.x=Math.min(Math.max(h.x,0),u.x-1),g===x&&S._options.keepLower&&(c.x=0,h.x=u.x-1)}if(!S._options.wrapY){if(c.y>u.y||h.y<0)continue;c.y=Math.min(Math.max(c.y,0),u.y-1),h.y=Math.min(Math.max(h.y,0),u.y-1),g===x&&S._options.keepLower&&(c.y=0,h.y=u.y-1)}if(S._options.gcs&&S._options.gcs!==S.map().gcs()&&g!==x&&(h.x+1-c.x)*(h.y+1-c.y)>S.map().size().width*S.map().size().height/S._options.tileWidth/S._options.tileHeight*16)break;for(o=c.x;o<=h.x;o+=1)for(s=c.y;s<=h.y;s+=1)l={level:g,x:o,y:s,reference:S.reference},f={level:g,x:o,y:s,reference:S.reference},S._options.wrapX&&(f.x=a(f.x,u.x)),S._options.wrapY&&(f.y=a(f.y,u.y)),S.isValid(f)&&(r&&y.length<M.length&&(m=M[y.length],v=v||l.level!==m.level||l.x!==m.x||l.y!==m.y),y.push({index:l,source:f}))}if(r){if(!v&&y.length===M.length)return;M.splice(0,M.length),e.each(y,function(t,e){M.push(e.index)})}if(i){p={x:(c.x+h.x)/2,y:(c.y+h.y)/2,level:t,bottomLevel:t};for(var _=Math.max(h.x-c.x,h.y-c.y)+1;_>=1;_/=2)p.bottomLevel-=1;y.sort(S._loadMetric(p)),S._queue&&S._queue.batch(!0)}for(S.cache.size<y.length&&(console.log("Increasing cache size to "+y.length),S.cache.size=y.length),o=0;o<y.length;o+=1)y[o]=S._getTileCached(y[o].index,y[o].source,!0);return S.cache.purge(S.remove),y},this.gcs=function(t){if(void 0===t)return S._options.gcs||S.map().gcs();var e=S.gcs();return null===t?delete S._options.gcs:S._options.gcs=t,S.gcs()!==e&&(S.clear(),S.gcsFeatures(S.gcs()),S.modified(),S._update()),S},this.prefetch=function(t,n){var i;return i=S._getTiles(t,n,!0),e.when.apply(e,i.map(function(t){return t.fetch()}))},this._loadMetric=function(t){return function(e,n){var i,r,o,a,s;return e=e.index||e,n=n.index||n,e.level!==n.level?t.bottomLevel&&e.level>=t.bottomLevel!=n.level>=t.bottomLevel?e.level>=t.bottomLevel?-1:1:e.level-n.level:(s=Math.pow(2,e.level-t.level),o=(t.x+.5)*s-.5,a=(t.y+.5)*s-.5,(i=e.x-o)*i+(r=e.y-a)*r-((i=n.x-o)*i+(r=n.y-a)*r))}},this.fromLevel=function(t,e){var n=Math.pow(2,-e);return{x:t.x*n,y:t.y*n}},this.toLevel=function(t,e){var n=Math.pow(2,e);return{x:t.x*n,y:t.y*n}},this.drawTile=function(t){var e=t.toString();S._activeTiles.hasOwnProperty(e)?S._moveToTop(t):S._drawTile(t),S._activeTiles[e]=t},this._drawTile=function(t){if(null!==S.renderer())throw new Error("This draw method is not valid on renderer managed layers.");var n,i=t.index.level,r=e(S._getSubLayer(i)),o=S._tileBounds(t),a=S._options.animationDuration,s=e('<div class="geo-tile-container"/>').attr("tile-reference",t.toString());s.append(t.image),s.css({left:o.left-parseInt(r.attr("offsetx")||0,10)+"px",top:o.top-parseInt(r.attr("offsety")||0,10)+"px"}),(n=S.tileCropFromBounds(t))&&s.addClass("crop").css({width:n.x+"px",height:n.y+"px"}),a>0&&t.fadeIn(a),r.append(s),t.catch(function(){console.warn("Could not load tile at "+t.toString()),S._remove(t)})},this.remove=function(t){var e=t.toString(),n=S._activeTiles[e];if(n instanceof f&&S._remove(n),delete S._activeTiles[e],M&&t.index)for(var i=t.index,r=M.length-1;r>=0;r-=1){var o=M[r];if(o.level===i.level&&o.x===i.x&&o.y===i.y&&o.reference===i.reference){M.splice(r,1);break}}return n},this._remove=function(t){t.image&&(t.image.parentElement?e(t.image.parentElement).remove():console.log("No parent element to remove "+t.toString(),t),e(t.image).remove())},this._moveToTop=function(t){e.noop(t)},this._getViewBounds=function(){var t=S.map(),e=t.zoom(),n=S._options.tileRounding(e),i=Math.pow(2,e-n),r=t.size(),o=S.displayToLevel({x:0,y:0}),a=S.displayToLevel({x:r.width,y:0}),s=S.displayToLevel({x:0,y:r.height}),l=S.displayToLevel({x:r.width,y:r.height});return{level:n,scale:i,left:Math.min(o.x,a.x,s.x,l.x),right:Math.max(o.x,a.x,s.x,l.x),top:Math.min(o.y,a.y,s.y,l.y),bottom:Math.max(o.y,a.y,s.y,l.y)}},this._purge=function(t,e,n){var i,r;if(S._updating)return S;for(r in n||(n=S._getViewBounds()),S._activeTiles)i=S._activeTiles[r],S._canPurge(i,n,t,e)&&S.remove(i);return S},this.clear=function(){var t,e=[];for(t in S._activeTiles)e.push(S.remove(t));return S._tileTree={},M=[],e},this.reset=function(){return S.clear(),S._cache.clear(),S._queue.initialSize=w,S},this.toLocal=function(t,e){var n=S.map(),i=n.unitsPerPixel(void 0===e?n.zoom():e);return{x:t.x/i,y:S._topDown()*t.y/i}},this.fromLocal=function(t,e){var n=S.map(),i=n.unitsPerPixel(void 0===e?n.zoom():e);return{x:t.x*i,y:S._topDown()*t.y*i}},this._topDown=function(){return S._options.topDown?1:-1},this._getSubLayer=function(t){if(S.canvas()){var n=S.canvas().find("div[data-tile-layer="+t.toFixed()+"]").get(0);return n||(n=e('<div class=geo-tile-layer data-tile-layer="'+t.toFixed()+'"/>').get(0),S.canvas().append(n)),n}},this._updateSubLayers=function(t,n){var i=S.canvas(),r=parseInt(i.attr("lastlevel"),10),o=parseInt(i.attr("lastoffsetx")||0,10),a=parseInt(i.attr("lastoffsety")||0,10);if(r===t&&Math.abs(o-n.left)<65536&&Math.abs(a-n.top)<65536)return{x:o,y:a};var s=S.map(),l=S._tileOffset(t),u=parseInt((n.left+n.right-s.size().width)/2+l.x,10),c=parseInt((n.top+n.bottom-s.size().height)/2+l.y,10);return i.find(".geo-tile-layer").each(function(n,i){var r=e(i),o=parseInt(r.data("tileLayer"),10);r.css("transform","scale("+Math.pow(2,t-o)+")");var a=parseInt(u/Math.pow(2,t-o),10),s=parseInt(c/Math.pow(2,t-o),10),l=a-parseInt(r.attr("offsetx")||0,10),h=s-parseInt(r.attr("offsety")||0,10);r.attr({offsetx:a,offsety:s}),r.find(".geo-tile-container").each(function(t,n){e(n).css({left:parseInt(e(n).css("left"),10)-l+"px",top:parseInt(e(n).css("top"),10)-h+"px"})})}),i.attr({lastoffsetx:u,lastoffsety:c,lastlevel:t}),{x:u,y:c}},this._update=function(t){if(t&&t.event&&(t.event.event===i.zoom||t.event.event===i.rotate))return S;if(!S.visible())return S;var n,r=S.map(),o=r.bounds(void 0,null),a=r.zoom(),s=S._options.tileRounding(a);if(S._updateSubLayers){var l=S._getViewBounds(),u=S._updateSubLayers(s,l)||{x:0,y:0},c=S._tileOffset(s);if(null===S.renderer()){var h=Math.pow(2,a-s),d=r.rotation(),f=-c.x+-(l.left+l.right)/2+u.x,p=-c.y+-(l.bottom+l.top)/2+u.y,m=f+r.size().width/2,y=p+r.size().height/2;S.canvas().css({"transform-origin":-f+"px "+-p+"px"});var v="translate("+m+"px,"+y+"px)scale("+h+")";d&&(v+="rotate("+180*d/Math.PI+"deg)"),S.canvas().css("transform",v)}S.canvas().attr({scale:Math.pow(2,a-s),dx:-c.x+-(l.left+l.right)/2,dy:-c.y+-(l.bottom+l.top)/2,offsetx:u.x,offsety:u.y,rotation:r.rotation()})}if(void 0===(n=S._getTiles(s,o,!0,!0)))return S;if(S._tileTree={},n.forEach(function(t){if(t.fetched())delete A[t.toString()],S.drawTile(t),S._setTileTree(t);else{if(t._queued)(S._queue?S._queue.get(t):-1)>=0&&S._queue.add(t);else t.then(function(){if(!g&&t===S.cache.get(t.toString())){var e=r.zoom(),n=S._options.tileRounding(e),i=S._getViewBounds();S._canPurge(t,i,n)?S.remove(t):(S.drawTile(t),S._setTileTree(t))}}),t._queued=!0;S.addPromise(t),A[t.toString()]=t}}),e.when.apply(e,n).done(function(){var t=S.map().zoom(),e=S._options.tileRounding(t);S._purge(e,!0)}),"all"!==S._options.idleAfter)for(var x in A){var _=A[x];n.indexOf(_)<0&&(S.removePromise(_),delete A[x])}return S},this._setTileTree=function(t){if(!S._options.keepLower){var e=t.index;S._tileTree[e.level]=S._tileTree[e.level]||{},S._tileTree[e.level][e.x]=S._tileTree[e.level][e.x]||{},S._tileTree[e.level][e.x][e.y]=t}},this._getTileTree=function(t){return((S._tileTree[t.level]||{})[t.x]||{})[t.y]||null},this._isCovered=function(t){var e=t.index.level,n=t.index.x,i=t.index.y,r=[];return(r=S._getTileTree({level:e-1,x:Math.floor(n/2),y:Math.floor(i/2)}))?[r]:(r=[S._getTileTree({level:e+1,x:2*n,y:2*i}),S._getTileTree({level:e+1,x:2*n+1,y:2*i}),S._getTileTree({level:e+1,x:2*n,y:2*i+1}),S._getTileTree({level:e+1,x:2*n+1,y:2*i+1})]).every(function(t){return null!==t})?r:null},this._outOfBounds=function(t,e){var n=S._tileOffset(t.index.level),i=1;return t.index.level!==e.level&&(i=Math.pow(2,(e.level||0)-(t.index.level||0))),(t.bottom-n.y)*i<e.top||(t.left-n.x)*i>e.right||(t.top-n.y)*i>e.bottom||(t.right-n.x)*i<e.left},this._canPurge=function(t,e,n,i){if(S._options.keepLower){if((n=n||0)<t.index.level&&t.index.level!==S._options.minLevel)return!0;if(t.index.level===S._options.minLevel&&!S._options.wrapX&&!S._options.wrapY)return!1}else if((i||S._isCovered(t))&&n!==t.index.level&&(n>=S._options.minLevel||t.index.level!==S._options.minLevel)&&(n<S._options.maxLevel||t.index.level!==S._options.maxLevel))return!0;return!!e&&S._outOfBounds(t,e)},this.displayToLevel=function(t,e){var n,i=S.map(),r=i.zoom(),o=S._options.tileRounding(r),a=i.unitsPerPixel(void 0===e?o:e);if(void 0===t){var s=i.size();t={x:s.width/2,y:s.height/2}}try{n=i.displayToGcs(t,S._options.gcs||null)}catch(t){n={x:0,y:0}}return{x:n.x/a,y:S._topDown()*n.y/a}},this.url=function(t){return void 0===t?S._options.originalUrl:(t===S._options.originalUrl||(S._options.originalUrl=t,"string"===e.type(t)&&(t=s(t)),S._options.url=t,S.reset(),S.map().draw()),S)},this.subdomains=function(t){return void 0===t?S._options.subdomains:(t&&("string"===e.type(t)&&(t=t.indexOf(",")>=0?t.split(","):t.split("")),S._options.subdomains=t,S.reset(),S.map().draw()),S)},this._tileOffset=function(t){return void 0===C[t]&&(C[t]=S._options.tileOffset(t)),C[t]},this.visible=function(t){return void 0===t?_():(S.visible()!==t&&(_(t),t&&S._update()),S)},this.nearestPixel=function(t,e){return void 0===t?T:(T!==t&&(T=t,e||(S.modified(),S._update())),S)},Object.defineProperty(this,"baseQuad",{get:function(){return S._options.baseQuad},set:function(t){S._options.baseQuad=t,S._update()}}),this._addBaseQuadToTiles=function(t,e){t&&(this.baseQuad!==y&&(y&&e.splice(0,1),(y=this.baseQuad)&&(e.splice(0,0,this.baseQuad),t.cacheUpdate(0)),t.data(e)),t._update())},this._init=function(){var t;if(v.apply(S,arguments),null===S.renderer())for(t=0;t<=S._options.maxLevel;t+=1)S._getSubLayer(t);return S},this._exit=function(){return S.reset(),x.apply(S,arguments),g=!0,this._queue&&this._queue._tileLayers&&this._queue._tileLayers.indexOf(S)>=0&&(this._queue._tileLayers.splice(this._queue._tileLayers.indexOf(S),1),this._queue.initialTrack&&this._queue.track&&this._queue._tileLayers.length&&(this._queue.track=this._queue.initialTrack*this._queue._tileLayers.length)),S},d("tile",this),this};l.defaults={minLevel:0,maxLevel:18,tileOverlap:{x:0,y:0},tileWidth:256,tileHeight:256,wrapX:!0,wrapY:!1,url:null,subdomains:"abc",tileOffset:function(t){return{x:0,y:0}},tilesMaxBounds:null,topDown:!1,keepLower:!0,idleAfter:"view",tileRounding:Math.round,attribution:"",animationDuration:0},i(l,r),t.exports=l},77:function(t){var e=0,n=function(){"use strict";if(!(this instanceof n))return new n;var t=this,i=0;return this.modified=function(){return i=e+=1,t},this.timestamp=function(){return i},this.getMTime=this.timestamp,this};t.exports=n},338:function(t,e,n){var i=n(4626),r=n(1275),o=n(1098),a=n(642),s=function(t){"use strict";if(!(this instanceof s))return new s(t);var e=n(5325);t=t||{},r.call(this,t);var i,l,u,c,h,d=this,f={},p={startTime:void 0!==t.startTime?t.startTime:null,endTime:void 0!==t.endTime?t.endTime:null,duration:void 0!==t.duration?t.duration:null,start:0,end:0},m=this.draw,g=this._exit,y=this._init,v=this.modified,x=this.style,_=this._update;return this.featureType="track",this._linePosition=function(t){return function(e,n,i,r){var o=p.timeFunc(e,n,i,r);return"past"===t&&o>=p.start||"current"===t&&o<p.start?p.startPosition[r]:"current"===t&&o>p.end||"future"===t&&o<p.end?p.endPosition[r]:p.positionFunc(e,n,i,r)}},this._headPosition=function(t,e){return p.endPosition[e]},this._headText=function(t,e){return p.text[e]},this._updateTimeRange=function(){null!==p.endTime||null===p.endTime&&(null===p.startTime||null==p.duration)?(p.end=null!==p.endTime?p.endTime:p.timeExtents.end,null!==p.startTime&&(null===p.endTime||p.startTime<=p.endTime)?p.start=p.startTime:null!==p.duration?p.start=p.end-p.duration:p.start=p.timeExtents.start):(p.start=p.startTime,p.end=p.start+p.duration)},this.calculateTimePosition=function(t,n,i){d.dataTime().timestamp()>=d.buildTime().timestamp()&&d._build(),n=null===n?d.layer().map().gcs():void 0===n?d.gcs():n;var r=e({source:d.gcs(),target:n}),o=d.data(),a=[],s=o.map(function(e,n){var i=p.trackFunc(e,n);if(a.push(i),!i.length)return{x:0,y:0,z:0,posidx:-1};var r,o,s,l,u=0,c=i.length-1;if(1===i.length)return{posidx:u,angidx0:u,angidx1:u};if((r=p.timeFunc(i[u],u,e,n))>=t)return{posidx:u,angidx0:u,angidx1:u+1};if((o=p.timeFunc(i[c],c,e,n))<=t)return{posidx:c,angidx0:c-1,angidx1:c};for(;c-u>1;){if(s=Math.floor((c+u)/2),(l=p.timeFunc(i[s],s,e,n))===t)return{posidx:s,angidx0:s-1,angidx1:s+1};l<t?(r=l,u=s):(o=l,c=s)}var h=(t-r)/(o-r);return{posidx0:u,posidx1:c,factor0:1-h,factor1:h,angidx0:u,angidx1:c}});return s.forEach(function(t,e){var n,o,s;t.posidx<0||(void 0===t.posidx1?n=p.positionFunc(a[e][t.posidx],t.posidx,a[e],e):(o=r.forward(p.positionFunc(a[e][t.posidx0],t.posidx0,a[e],e),!0),s=r.forward(p.positionFunc(a[e][t.posidx1],t.posidx1,a[e],e),!0),n=r.inverse({x:o.x*t.factor0+s.x*t.factor1,y:o.y*t.factor0+s.y*t.factor1,z:(o.z||0)*t.factor0+(s.z||0)*t.factor1},!0)),t.x=n.x,t.y=n.y,t.z=n.z||0,i&&(void 0===t.posidx1&&(o=r.forward(t.angidx0===t.posidx?n:p.positionFunc(a[e][t.angidx0],t.angidx0,a[e],e),!0),s=r.forward(t.angidx1===t.posidx?n:p.positionFunc(a[e][t.angidx1],t.angidx1,a[e],e),!0)),t.angle=Math.atan2(s.y-o.y,s.x-o.x)))}),s},this._build=function(){d.buildTime().modified(),i||(i={past:d.layer().createFeature("line"),future:d.layer().createFeature("line"),current:d.layer().createFeature("line")},d.dependentFeatures([i.past,i.current,i.future]));var t=d.data();p.data=t,p.timeFunc=d.style.get("time"),p.positionFunc=d.style.get("position"),p.trackFunc=d.style.get("track"),p.textFunc=d.style.get("text"),["past","current","future"].forEach(function(e){i[e].style(d.style()).style(d[e+"Style"]()).line(d.style("track")).gcs(d.gcs()).data(t).position(d._linePosition(e))});var e,n,r={};if(t.forEach(function(t,e){var n,i=p.trackFunc(t,e);i.length&&(n=p.timeFunc(i[0],0,t,e),(void 0===r.start||n<r.start)&&(r.start=n),i.length>1&&(n=p.timeFunc(i[i.length-1],i.length-1,t,e)),(void 0===r.end||n>r.end)&&(r.end=n))}),p.timeExtents=r,d._updateTimeRange(),p.startPosition=d.calculateTimePosition(p.start,null),p.endPosition=d.calculateTimePosition(p.end,null,!0),p.text=t.map(function(t,i){var r=p.textFunc(t,i);return e|=null==r,null==r||""===r?"":(n=!0,p.startPosition[i].posidx<0&&(r=""),r)}),e&&!u){if(!(o.registries.features[d.layer().rendererName()]||{}).marker){var a=o.rendererForFeatures(["marker"]);l=o.createLayer("feature",d.layer().map(),{renderer:a}),d.layer().addChild(l),d.layer().node().append(l.node())}u=(l||d.layer()).createFeature("marker");var s=d.dependentFeatures();s.push(u),d.dependentFeatures(s)}if(n&&!h){if(!(o.registries.features[d.layer().rendererName()]||{}).text){var f=o.rendererForFeatures(["text"]);c=o.createLayer("feature",d.layer().map(),{renderer:f}),d.layer().addChild(c),d.layer().node().append(c.node())}h=(c||d.layer()).createFeature("text");var m=d.dependentFeatures();m.push(h),d.dependentFeatures(m)}if(u){u.headData=p.endPosition,u.style(d.markerStyle()).gcs(d.gcs()).data(t).position(d._headPosition);var g=u.style.get("radius");u.style("radius",function(t,e){return p.text[e]||p.startPosition[e].posidx<0?0:g(t,e)})}return h&&(h.headData=p.endPosition,h.style(d.textStyle()).gcs(d.gcs()).data(t).text(d._headText).position(d._headPosition)),d},this._updateTimeAndPosition=function(){i&&(d._updateTimeRange(),p.startPosition=d.calculateTimePosition(p.start,null),p.endPosition=d.calculateTimePosition(p.end,null,!0),i.past.modified(),i.current.modified(),i.future.modified(),u&&u.modified(),h&&h.modified(),d.updateTime().modified(),d.modified())},this._update=function(){return _.call(d),(d.dataTime().timestamp()>=d.buildTime().timestamp()||d.updateTime().timestamp()<=d.timestamp())&&d._build(),d.updateTime().modified(),d},this.draw=function(){var t=m();return i&&(i.past.draw(),i.current.draw(),i.future.draw()),u&&u.draw(),h&&h.draw(),t},this.modified=function(){var t=v();return i&&(i.past.modified(),i.current.modified(),i.future.modified()),u&&u.modified(),h&&h.modified(),t},this.style=function(t,e,n){return"style"===(n=n||"style")?x(t,e):void 0===t?f[n]:"string"==typeof t&&void 0===e?(f[n]||{})[t]:(void 0===f[n]&&(f[n]={}),void 0===e?f[n]=a.deepMerge(f[n],t):f[n][t]=e,d.modified(),d)},this.style.get=x.get,["markerStyle","textStyle","pastStyle","currentStyle","futureStyle"].forEach(function(t){d[t]=function(e,n){return d.style(e,n,t)}}),this.track=function(t){return void 0===t?d.style("track"):(d.style("track",t),d.dataTime().modified(),d.modified(),d)},this.position=function(t){return void 0===t?d.style("position"):(d.style("position",t),d.dataTime().modified(),d.modified(),d)},this.time=function(t){return void 0===t?d.style("time"):(d.style("time",t),d.dataTime().modified(),d.modified(),d)},this.timeRange=function(t){if(void 0===t)return{startTime:p.startTime,endTime:p.endTime,duration:p.duration,start:p.start,end:p.end,minimum:(p.timeExtents||{}).start,maximum:(p.timeExtents||{}).end};var e=!1;return void 0!==t.startTime&&t.startTime!==p.startTime&&(p.startTime=null===t.startTime?t.startTime:+t.startTime,e=!0),void 0!==t.endTime&&t.endTime!==p.endTime&&(p.endTime=null===t.endTime?t.endTime:+t.endTime,e=!0),void 0!==t.duration&&t.duration!==p.duration&&(p.duration=null===t.duration?t.duration:+t.duration,e=!0),e&&d._updateTimeAndPosition(),d},this.startTime=function(t){return void 0===t?p.startTime:(t!==p.startTime&&(p.startTime=null===t?t:+t,d._updateTimeAndPosition()),d)},this.endTime=function(t){return void 0===t?p.endTime:(t!==p.endTime&&(p.endTime=null===t?t:+t,d._updateTimeAndPosition()),d)},this.duration=function(t){return void 0===t?p.duration:(t!==p.duration&&(p.duration=null===t?t:+t,d._updateTimeAndPosition()),d)},this._mergeSearchResults=function(t,e){return t.extra=t.extra||{},e.forEach(function(e){return e.value.index.forEach(function(n,i){t.index.indexOf(n)<0&&(t.index.push(n),t.found.push(e.value.found[i]),t.where=t.where||{},e.value.extra&&e.value.extra[n]&&(t.extra[n]=e.value.extra[n]),a.isObject(t.extra[n])||(t.extra[n]={value:t.extra[n]}),t.extra[n].where=e.key)})}),t},this.pointSearch=function(t){var e=i.current.pointSearch(t),n=i.past.pointSearch(t),r=i.future.pointSearch(t),o=u?u.pointSearch(t):{index:[]};return this._mergeSearchResults(e,[{key:"marker",value:o},{key:"past",value:n},{key:"future",value:r}])},this.polygonSearch=function(t,e){var n=i.current.polygonSearch(t,e),r=i.past.polygonSearch(t,e),o=i.future.polygonSearch(t,e),a=u?u.polygonSearch(t,e):{index:[]};return this._mergeSearchResults(n,[{key:"marker",value:a},{key:"past",value:r},{key:"future",value:o}])},this._exit=function(){i&&d.layer()&&(d.layer().deleteFeature(i.past),d.layer().deleteFeature(i.current),d.layer().deleteFeature(i.future)),i=null,(l||d.layer())&&u&&(l||d.layer()).deleteFeature(u),l&&d.layer()&&d.layer().removeChild(l),l=null,(c||d.layer())&&h&&(c||d.layer()).deleteFeature(h),c&&d.layer()&&d.layer().removeChild(c),c=null,d.dependentFeatures([]),g()},this._init=function(t){t=t||{},y.call(d,t);var e=a.deepMerge({},{track:a.identityFunction,position:a.identityFunction,time:function(t,e){return void 0!==t.t?t.t:e},uniformLine:"drop",closed:!1},void 0===t.style?{}:t.style),n=a.deepMerge({},{rotateWithMap:!0,rotation:function(t,e){return-p.endPosition[e].angle||0}},void 0===t.markerStyle?{}:t.markerStyle),i=a.deepMerge({},{rotateWithMap:!0,rotation:function(t,e){return void 0!==p.endPosition[e].angle?-p.endPosition[e].angle+Math.PI/2:0}},void 0===t.textStyle?{}:t.textStyle),r=a.deepMerge({},{strokeOpacity:.25},void 0===t.pastStyle?{}:t.pastStyle),o=a.deepMerge({},{},void 0===t.currentStyle?{}:t.currentStyle),s=a.deepMerge({},{strokeOpacity:.25},void 0===t.futureStyle?{}:t.futureStyle);["track","position","time"].forEach(function(n){void 0!==t[n]&&(e[n]=t[n])}),d.style(e),d.markerStyle(n),d.textStyle(i),d.pastStyle(r),d.currentStyle(o),d.futureStyle(s)},this};i(s,r),t.exports=s},5325:function(t,e,n){var i=n(9677),r=n(1982),o=n(3503),a=n(642);i=i.__esModule?i.default:i;var s=n(9689);s.keys().forEach(function(t){i.Proj.projections.add(s(t))});var l={},u=/^(.* |)\+axis=e(n|s)u(| .*)$/,c=/(^|\s)\+(s[1-3][1-3]|[xyz]off)=\S/,h=function(t){"use strict";if(!(this instanceof h))return(t=t||{}).source in l||(Object.keys(l).length>=10&&(l={}),l[t.source]={}),t.target in l[t.source]||(Object.keys(l[t.source]).length>=10&&(l[t.source]={}),l[t.source][t.target]=new h(t)),l[t.source][t.target];var e,n,s,u,d,f,p,m=this,g={s11:0,s12:4,s13:8,xoff:12,s21:1,s22:5,s23:9,yoff:13,s31:2,s32:6,s33:10,zoff:14};function y(t){if(!c.exec(t))return{proj:t};var e,n,i=a.mat4AsArray(),r=[];return t.split(/(\s+)/).forEach(function(t){var e=/^\+(s[1-3][1-3]|[xyz]off)=(.*)$/.exec(t);e?i[g[e[1]]]=parseFloat(e[2]):r.push(t)}),n={proj:r.join(" "),orig:t},(e=o.invert(a.mat4AsArray(),i))?(n.matrix=i,n.inverse=e):console.warn("Affine transform is not invertable and will not be used: "+t),n}function v(){var t=y(m.source()),n=y(m.target()),r=t.proj,o=n.proj;u=t.matrix,d=t.inverse,f=n.matrix,p=n.inverse,e=new i(r,o)}this.source=function(t){return void 0===t?n||"EPSG:4326":(n=t,v(),m)},this.target=function(t){return void 0===t?s||"EPSG:3857":(s=t,v(),m)},this._forward=function(t){if(u){var n=r.transformMat4(a.vec3AsArray(),[t.x,t.y,t.z||0],d);t={x:n[0],y:n[1],z:n[2]}}var i=e.forward(t,!0);if(i.z=t.z||0,f){var o=r.transformMat4(a.vec3AsArray(),[i.x,i.y,i.z],f);i={x:o[0],y:o[1],z:o[2]}}return i},this._inverse=function(t){if(f){var n=r.transformMat4(a.vec3AsArray(),[t.x,t.y,t.z||0],p);t={x:n[0],y:n[1],z:n[2]}}var i=e.inverse(t,!0);if(i.z=t.z||0,u){var o=r.transformMat4(a.vec3AsArray(),[i.x,i.y,i.z],u);i={x:o[0],y:o[1],z:o[2]}}return i},this.forward=function(t){return Array.isArray(t)?t.map(m._forward):m._forward(t)},this.inverse=function(t){return Array.isArray(t)?t.map(m._inverse):m._inverse(t)},t=t||{};try{this.source(t.source)}catch(e){console.error("Can't use transform source: "+t.source),this.source("EPSG:4326")}try{this.target(t.target)}catch(e){console.error("Can't use transform target: "+t.target),this.target("EPSG:3857")}return this};h.defs=i.defs,h.lookup=function(t){var e,r,o=n(5616),a=o.Deferred();return i.defs.hasOwnProperty(t)?a.resolve(i.defs[t]):2!==(r=t.split(":")).length||"EPSG"!==r[0].toUpperCase()?a.reject("Invalid projection code").promise():(e=r[1],o.ajax({url:"https://epsg.io/"+encodeURIComponent(e)+".proj4"}).done(function(e){var n=(e.results||[])[0];return n?(i.defs(t,n),o.when(i.defs[t])):a.reject(e).promise()}))},h.transformCoordinates=function(t,e,n,i){"use strict";if(t===e||Array.isArray(n)&&!n.length)return n;if(Array.isArray(n)&&n.length>=3&&3===i&&!a.isObject(n[0])&&!c.test(t)&&!c.test(e))return h.transformCoordinatesFlatArray3(t,e,n);if(Array.isArray(n)&&n.length&&a.isObject(n[0])&&"x"in n[0]&&"y"in n[0]){var r=t.match(u),o=e.match(u);if(r&&o&&r[1]===o[1]&&r[3]===o[3])return"z"in n[0]?n.map(function(t){return{x:+t.x,y:-t.y,z:+t.z||0}}):n.map(function(t){return{x:+t.x,y:-t.y}})}var s,l=h({source:t,target:e});return a.isObject(n)&&"x"in n&&"y"in n?(s=l.forward({x:+n.x,y:+n.y,z:+n.z||0},!0),"z"in n?s:{x:s.x,y:s.y}):Array.isArray(n)&&1===n.length&&a.isObject(n[0])&&"x"in n[0]&&"y"in n[0]?(s=l.forward({x:+n[0].x,y:+n[0].y,z:+n[0].z||0},!0),"z"in n[0]?[s]:[{x:s.x,y:s.y}]):h.transformCoordinatesArray(l,n,i)},h.transformCoordinatesArray=function(t,e,n){var i,r,o,s,l,u,c,h,d,f={};function p(){if(Array.isArray(e[0]))if(2===e[0].length)s=function(t){return+e[t][0]},l=function(t){return+e[t][1]},c=function(t,e,n){h[t]=[e,n]};else{if(3!==e[0].length)throw new Error("Invalid coordinates. Requires two or three components per array");s=function(t){return+e[t][0]},l=function(t){return+e[t][1]},u=function(t){return+e[t][2]},c=function(t,e,n,i){h[t]=[e,n,i]}}else if(2===e.length)o=2,s=function(t){return+e[t*o]},l=function(t){return+e[t*o+1]},c=function(t,e,n){h[t]=e,h[t+1]=n};else if(3===e.length)o=3,s=function(t){return+e[t*o]},l=function(t){return+e[t*o+1]},u=function(t){return+e[t*o+2]},c=function(t,e,n,i){h[t]=e,h[t+1]=n,h[t+2]=i};else{if(!n)throw new Error("Invalid coordinates");if(2!==n&&3!==n)throw new Error("Number of components should be two or three");o=n,s=function(t){return+e[t]},l=function(t){return+e[t+1]},2===n?c=function(t,e,n){h[t]=e,h[t+1]=n}:(u=function(t){return+e[t+2]},c=function(t,e,n,i){h[t]=e,h[t+1]=n,h[t+2]=i})}}if(u=function(){return 0},!Array.isArray(e))throw new Error("Coordinates are not valid");if((h=[]).length=e.length,r=e.length,!e.length)return h;for(Array.isArray(e[0])||a.isObject(e[0])?(o=1,Array.isArray(e[0])?p():a.isObject(e[0])&&function(){if(!(e[0]&&"x"in e[0]&&"y"in e[0]))throw new Error("Invalid coordinates");s=function(t){return+e[t].x},l=function(t){return+e[t].y},"z"in e[0]?(u=function(t){return+e[t].z},c=function(t,e,n,r){h[i]={x:e,y:n,z:r}}):c=function(t,e,n){h[t]={x:e,y:n}}}()):p(),i=0;i<r;i+=o)f.x=s(i),f.y=l(i),f.z=u(i),d=t.forward(f,!0),c(i,d.x,d.y,d.z);return h},h.transformCoordinatesFlatArray3=function(t,e,n){"use strict";var r,o=t.match(u),a=e.match(u);if(o&&a&&o[1]===a[1]&&o[3]===a[3]){for(r=n.length-3+1;r>=0;r-=3)n[r]*=-1;return n}var s,l=i.Proj(t),c=i.Proj(e),h={},d=new i(l,c);for(r=n.length-3;r>=0;r-=3)h.x=+n[r],h.y=+n[r+1],h.z=+(n[r+2]||0),s=d.forward(h,!0),n[r]=s.x,n[r+1]=s.y,n[r+2]=void 0===s.z?h.z:s.z;return n},h.affineForward=function(t,e){"use strict";var n,i=t.origin,r=t.scale||{x:1,y:1,z:1};for(n=0;n<e.length;n+=1)e[n].x=(e[n].x-i.x)*r.x,e[n].y=(e[n].y-i.y)*r.y,e[n].z=((e[n].z||0)-(i.z||0))*r.z;return e},h.affineInverse=function(t,e){"use strict";var n,i=t.origin,r=t.scale||{x:1,y:1,z:1};for(n=0;n<e.length;n+=1)e[n].x=e[n].x/r.x+i.x,e[n].y=e[n].y/r.y+i.y,e[n].z=(e[n].z||0)/r.z+(i.z||0);return e},h.sphericalDistance=function(t,e,n,r,o){if(r=r||"EPSG:4326",o=o||i.WGS84,(n=n||r)!==r){var a=h.transformCoordinates(n,r,[t,e]);t=a[0],e=a[1]}var s=t.y*Math.PI/180,l=e.y*Math.PI/180,u=(e.x-t.x)*Math.PI/180,c=Math.sin(s),d=Math.cos(s),f=Math.sin(l),p=Math.cos(l),m=Math.atan2(Math.pow(Math.pow(p*Math.sin(u),2)+Math.pow(d*f-c*p*Math.cos(u),2),.5),c*f+d*p*Math.cos(u));return o.a*m},h.vincentyDistance=function(t,e,n,r,o,a){if(r=r||"EPSG:4326",o=o||i.WGS84,a=a||100,(n=n||r)!==r){var s=h.transformCoordinates(n,r,[t,e]);t=s[0],e=s[1]}var l,u,c,d,f,p,m,g,y,v,x=o.a,_=o.b||o.a*(1-(o.f||1/o.rf)),b=o.f||(o.rf?1/o.rf:1-_/x),w=t.y*Math.PI/180,M=e.y*Math.PI/180,A=((e.x-t.x)%360+360)%360*Math.PI/180,E=Math.atan((1-b)*Math.tan(w)),T=Math.atan((1-b)*Math.tan(M)),S=Math.sin(E),C=Math.cos(E),k=Math.sin(T),P=Math.cos(T),O=A,L=A+2*Math.PI;if(w===M&&!A)return{distance:0,alpha1:0,alpha2:0};for(v=a;v>0&&Math.abs(O-L)>1e-12;v-=1)l=Math.pow(Math.pow(P*Math.sin(O),2)+Math.pow(C*k-S*P*Math.cos(O),2),.5),u=S*k+C*P*Math.cos(O),c=Math.atan2(l,u),d=C*P*Math.sin(O)/l,L=O,O=A+(1-(m=b/16*(f=1-Math.pow(d,2))*(4+b*(4-3*f))))*b*d*(c+m*l*((p=u-(f?2*S*k/f:0))+m*u*(2*Math.pow(p,2)-1)));return v?{distance:_*(1+(g=f*(x*x-_*_)/(_*_))/16384*(4096+g*(g*(320-175*g)-768)))*(c-(y=g/1024*(256+g*(g*(74-47*g)-128)))*l*(p+y/4*(u*(2*Math.pow(p,2)-1)-y/6*p*(4*l*l-3)*(4*Math.pow(p,2)-3)))),alpha1:Math.atan2(P*Math.sin(O),C*k-S*P*Math.cos(O)),alpha2:Math.atan2(C*Math.sin(O),-S*P+C*k*Math.cos(O))}:void 0},h.onlyInvertedY=function(t,e){var n=t.match(u),i=e.match(u);return n&&i&&n[1]===i[1]&&n[3]===i[3]},h.proj4=i,t.exports=h},3170:function(t){t.exports={}},5734:function(t,e,n){var i=n(2493).d3,r=n(8524),o=n(4626),a=n(1098).registerWidget,s=n(642),l=n(7376);n(1159);var u=function(t){"use strict";if(!(this instanceof u))return new u(t);r.call(this,t);var e=this,n=[],o=t.width||300,a=t.ticks||6,h=this._init;return this._init=function(){h();var n=e.canvas();i.select(n).attr("class","color-legend-container"),e.popup=i.select(n).append("div").attr("class","color-legend-popup"),t.categories&&e.categories(t.categories)},this._draw=function(){if(i.select(e.canvas()).selectAll("div.geojs-color-legends").remove(),n.length){i.select(e.canvas()).style("display","block");var t=i.select(e.canvas()).append("div").attr("class","geojs-color-legends"),r=o;n.forEach(function(n,i){var o=t.append("div").attr("class","geojs-color-legend");o.append("div").attr("class","geojs-title").text(n.name);var a=o.append("svg").attr("class","svg").attr("width",r).attr("height","40px").attr("viewBox","-20 0 "+r+" 40");"discrete"===n.type?e._drawDiscrete(a,r-40,n):"continuous"===n.type&&e._drawContinous(a,r-40,n)})}else i.select(e.canvas()).style("display","none")},this.categories=function(t){return void 0===t?n:(n=e._prepareCategories(t),e._draw(),e)},this.addCategories=function(t){return n=n.concat(e._prepareCategories(t)),e._draw(),e},this.removeCategories=function(t){return n=n.filter(function(e){return-1===t.indexOf(e)}),e._draw(),e},this._prepareCategories=function(t){return t.forEach(function(t){t.color=t.colors.map(function(t){return s.convertColorToHex(t,!0)})}),t},this._drawDiscrete=function(t,n,r){function o(t){var e=Math.ceil(t.domain().length/a),n=t.domain().filter(function(t,n){return n%e===0});return i.axisBottom(t).tickFormat(i.format(".2s")).tickValues(n)}if(-1===["linear","log","sqrt","pow","quantile","ordinal"].indexOf(r.scale))throw new Error("unsupported scale");var l,u,h,d,f,p,m;if("ordinal"===r.scale){h=i.scaleOrdinal().domain(r.domain).range(r.colors),e._renderDiscreteColors(t,r.domain,h,n,function(t){return t}),d=i.scaleBand().domain(r.domain).rangeRound([0,n]);var g=Math.ceil(r.domain.length/a),y=r.domain.filter(function(t,e){return e%g===0});f=i.axisBottom(d).tickValues(y)}else if("quantile"===r.scale){l=[0,r.colors.length],p=s.range(0,r.colors.length-1),u=i.scaleQuantile().domain(r.domain).range(p),h=i.scaleQuantize().domain(l).range(r.colors),e._renderDiscreteColors(t,p,h,n,function(t){return u.invertExtent(t).join(" - ")});var v=[u.invertExtent(0)[0]];v=v.concat(p.map(function(t){return u.invertExtent(t)[1]})),f=o(d=i.scalePoint().domain(v).range([0,n]))}else if(-1!==["linear","log","sqrt","pow"].indexOf(r.scale)){l=[0,r.colors.length],u=i["scale"+r.scale.charAt(0).toUpperCase()+r.scale.slice(1)]().domain(r.domain).range(l).nice(),h=i.scaleQuantize().domain(l).range(r.colors),p=s.range(0,r.colors.length-1);var x=Math.max.apply(null,r.domain.map(function(t){return c(t)}));e._renderDiscreteColors(t,p,h,n,function(t){return e._popupFormatter(u.invert(t),x)+" - "+e._popupFormatter(u.invert(t+1),x)}),(m=p.slice()).push(r.colors.length),f=o(d=i.scalePoint().domain(m.map(function(t){return u.invert(t)})).range([0,n]))}r.endAxisLabelOnly&&f.tickValues([d.domain()[0],d.domain()[d.domain().length-1]]),e._renderAxis(t,f)},this._renderDiscreteColors=function(t,n,i,r,o){t.selectAll("rect").data(n).enter().append("rect").attr("width",r/n.length).attr("height","20px").attr("fill",function(t){return i(t)}).attr("transform",function(t,e){return"translate("+e*r/n.length+" ,0)"}).on("mousemove",function(t,n){e._showPopup(t,o(n))}).on("mouseout",e._hidePopup)},this._drawContinous=function(t,n,r){var o,s,u;if(-1===["linear","log","sqrt","pow"].indexOf(r.scale))throw new Error("unsupported scale");var h=[0];for(u=1;u<r.domain.length-1;u++)h.push(n/(r.domain.length-1)*u);h.push(n),o=i["scale"+r.scale.charAt(0).toUpperCase()+r.scale.slice(1)]().domain(r.domain).range(h).nice(),"log"===r.scale&&r.base&&o.base(r.base),"pow"===r.scale&&r.exponent&&o.exponent(r.exponent);var d=l(),f=Math.max.apply(null,r.domain.map(function(t){return c(t)})),p=t.append("defs").append("linearGradient").attr("id","gradient"+d);for(p.append("stop").attr("offset","0%").attr("stop-color",r.colors[0]),u=1;u<r.colors.length-1;u++)p.append("stop").attr("offset",(100/(r.colors.length-1)*u).toFixed(6)+"%").attr("stop-color",r.colors[u]);p.append("stop").attr("offset","100%").attr("stop-color",r.colors[r.colors.length-1]),t.append("rect").attr("fill","url(#gradient"+d+")").attr("width",n).attr("height","20px").on("mousemove",function(t){var n=o.invert(i.pointer(t)[0]),r=e._popupFormatter(n,f);e._showPopup(t,r)}).on("mouseout",e._hidePopup),s=i.axisBottom(o).ticks(a,".2s"),r.endAxisLabelOnly&&s.tickValues([r.domain[0],r.domain[r.domain.length-1]]),e._renderAxis(t,s)},this._renderAxis=function(t,e){t.append("g").attr("class","axis x").attr("transform","translate(0, 20)").call(e)},this._popupFormatter=function(t,e){return t=parseFloat(t.toFixed(8)),e=Math.min(e,c(t)),e=Math.min(e,Math.max(3,7-Math.trunc(t).toString().length)),i.format("."+e+"f")(t)},this.width=function(t){return void 0===t?o:(t!==o&&(o=t,e._prepareCategories(n),e._draw()),e)},this.ticks=function(t){return void 0===t?a:(t!==a&&(a=t,e._prepareCategories(n),e._draw()),e)},this._showPopup=function(t,n){var r=i.pointer(t,e.canvas());e.popup.text(n);var o=e.canvas().clientWidth,a=e.popup.node().clientWidth;e.popup.style("left",r[0]-(r[0]+a-o>-10?a:0)+"px").style("top",r[1]-22+"px").transition().duration(200).style("opacity",1)},this._hidePopup=function(){e.popup.transition().duration(200).style("opacity",0)},this};function c(t){if(!isFinite(t))return 0;for(var e=1,n=0;Math.round(t*e)/e!==t;){if(!isFinite(t*e))return 0;e*=10,n++}return n}o(u,r),a("dom","colorLegend",u),t.exports=u},8524:function(t,e,n){var i=n(8738),r=n(4626),o=n(1098).registerWidget,a=function(t){"use strict";if(!(this instanceof a))return new a(t);i.call(this,t);var e=this;return this._init=function(){return t.hasOwnProperty("parent")&&t.parent.addChild(e),e._createCanvas(),e._appendCanvasToParent(),e.canvas().addEventListener("mousedown",function(t){t.stopPropagation()}),e.reposition(),e},this._createCanvas=function(){e.canvas(document.createElement(t.el||"div"))},this};r(a,i),o("dom","dom",a),t.exports=a},4812:function(t,e,n){t.exports={colorLegendWidget:n(5734),domWidget:n(8524),legendWidget:n(9443),scaleWidget:n(2894),sliderWidget:n(3019),svgWidget:n(7854),uiLayer:n(4231),widget:n(8738)}},9443:function(t,e,n){var i=n(7854),r=n(4626),o=n(1098).registerWidget,a=function(t){"use strict";if(!(this instanceof a))return new a(t);i.call(this,t);var e=n(2493).d3,r=n(6409),o=this,s=[],l=null,u=null,c=null;this.categories=function(t){return void 0===t?s.slice():(s=t.slice().map(function(t){return"line"===t.type&&(t.style.fill=!1,t.style.stroke=!0),t}),o.draw(),o)},this.size=function(){var t,n=1,i=e.select(o.canvas()).append("text").style("opacity",1e-6);return s.forEach(function(t){i.text(t.name),n=Math.max(n,i.node().getBBox().width)}),i.remove(),t=20*(s.length+1),{width:n+50,height:t}},this.draw=function(){function t(t){t.style("fill",function(t){return t.style.fill||void 0===t.style.fill?t.style.fillColor:"none"}).style("fill-opacity",function(t){return void 0===t.style.fillOpacity?1:t.style.fillOpacity}).style("stroke",function(t){return t.style.stroke||void 0===t.style.stroke?t.style.strokeColor:"none"}).style("stroke-opacity",function(t){return void 0===t.style.strokeOpacity?1:t.style.strokeOpacity}).style("stroke-width",function(t){return void 0===t.style.strokeWidth?1.5:t.style.strokeWidth})}o._init(),c.attr("height",o.size().height+24).style("display",null);var e=o._scale(),n=u.selectAll("g.geo-label").data(s,function(t){return t.name}).enter().append("g").attr("class","geo-label").attr("transform",function(t,n){return"translate(0,"+e.y(n)+")"});return t(n.filter(function(t){return"point"!==t.type&&"line"!==t.type}).append("rect").attr("x",0).attr("y",-6).attr("rx",5).attr("ry",5).attr("width",40).attr("height",12)),t(n.filter(function(t){return"point"===t.type}).append("circle").attr("cx",20).attr("cy",0).attr("r",6)),t(n.filter(function(t){return"line"===t.type}).append("line").attr("x1",0).attr("y1",0).attr("x2",40).attr("y2",0)),n.append("text").attr("x","50px").attr("y",0).attr("dy","0.3em").text(function(t){return t.name}),o.reposition(),o},this._scale=function(){return{x:e.scaleLinear().domain([0,1]).range([0,o.size().width]),y:e.scaleLinear().domain([0,s.length-1]).range([6,o.size().height-6])}},this._init=function(){l||(o._createCanvas(),o._appendCanvasToParent());var t=o.size().width+24+4,n=o.size().height+24+4;l&&l.remove(),e.select(o.canvas()).attr("width",t).attr("height",n),l=e.select(o.canvas()).append("g"),u=l.append("g").attr("transform","translate("+[14,14]+")"),(c=u.append("rect").attr("x",-12).attr("y",-12).attr("width",t-4).attr("height",n-4).attr("rx",3).attr("ry",3)).style("stroke","black").style("stroke-width","1.5px").style("fill","white").style("fill-opacity",.75).style("display","none"),u.on("mousedown",function(t){t.stopPropagation()}),u.on("mouseover",function(){c.transition().duration(250).style("fill-opacity",1)}),u.on("mouseout",function(){c.transition().duration(250).style("fill-opacity",.75)}),o.reposition()},this.geoOn(r.resize,function(){o.draw()})};r(a,i),o("dom","legend",a),t.exports=a},2894:function(t,e,n){var i=n(5616),r=n(4626),o=n(7854),a=n(1098).registerWidget;n(615);var s=function(t){"use strict";if(!(this instanceof s))return new s(t);o.call(this,t);var e=n(6409),r=n(5325),a=n(642),l=n(2493).d3,u=this,c=this._exit,h=Object.assign({},{scale:1,maxWidth:200,maxHeight:"left"===t.orientation||"right"===t.orientation?200:20,orientation:"bottom",strokeWidth:2,tickLength:10,units:"si",distance:function(t,e,n){return"+proj=longlat +axis=enu"===n?Math.sqrt(a.distance2dSquared(t,e)):r.sphericalDistance(t,e,n)}},t);this._init=function(){return u._createCanvas(),u._appendCanvasToParent(),u.reposition(),l.select(u.canvas()).attr("width",h.maxWidth).attr("height",h.maxHeight),u.geoOn(e.pan,u._update),u._render(),u},this._exit=function(){u.geoOff(e.pan,u._update),c()},this._vertical=function(){return"left"===h.orientation||"right"===h.orientation},this._scaleValue=function(t,e,n){var i,r,o,a=[{multiple:1,digits:1},{multiple:1.5,digits:2},{multiple:2,digits:1},{multiple:3,digits:1},{multiple:5,digits:1},{multiple:8,digits:1}],l=(n=s.unitsTable[n]||n||s.unitsTable[h.units]||h.units)[0];return n.forEach(function(e){t>=e.scale*(e.minimum||1)&&(l=e)}),r=Math.floor(Math.log(t/l.scale)/Math.log(l.basis||10)),(a=l.multiples||a).forEach(function(e){var n=l.scale*e.multiple*Math.pow(10,r);n<=t&&(i=e,o=n)}),{html:(i.multiple*Math.pow(10,r)).toFixed(Math.max(0,-r+i.digits-1))+" "+l.unit,value:o,pixels:o/t*e,power:r,multiple:i,unitRecord:l,originalValue:t,originalPixels:e}},this._render=function(){var t,e,n,r,o,a,s=l.select(u.canvas()),c=u.layer().map(),d=h.maxWidth,f=h.maxHeight,p=h.strokeWidth,m=.5*p,g=h.tickLength,y=u._vertical();if(t=(y?h.maxHeight:h.maxWidth)-p,n={x:(e={x:(e=i(s.node()).offset()).left+("left"===h.orientation?d-m:m),y:e.top+("top"===h.orientation?f-m:m)}).x+(y?0:t),y:e.y+(y?t:0)},(r=h.distance(c.displayToGcs(e,null),c.displayToGcs(n,null),c.gcs())*h.scale)<=0||!isFinite(r))console.warn("The distance calculated for the scale is invalid: "+r);else{switch(o=u._scaleValue(r,t),y?f=o.pixels+p:d=o.pixels+p,s.attr("width",d).attr("height",f),s.select("polyline").empty()&&s.append("polyline").classed("geojs-scale-widget-bar",!0).attr("fill","none").attr("stroke-width",p),s.select("text").empty()&&s.append("text").classed("geojs-scale-widget-text",!0),h.orientation){case"bottom":a=[[m,g],[m,m],[d-m,m],[d-m,g]],s.select("text").attr("x",d/2).attr("y",2*p).attr("text-anchor","middle").attr("dominant-baseline","hanging");break;case"top":a=[[m,f-g],[m,f-m],[d-m,f-m],[d-m,f-g]],s.select("text").attr("x",d/2).attr("y",f-2*p).attr("text-anchor","middle").attr("dominant-baseline","alphabetic");break;case"left":a=[[d-g,m],[d-m,m],[d-m,f-m],[d-g,f-m]],s.select("text").attr("x",d-2*p).attr("y",f/2).attr("text-anchor","end").attr("dominant-baseline","middle");break;case"right":a=[[g,m],[m,m],[m,f-m],[g,f-m]],s.select("text").attr("x",2*p).attr("y",f/2).attr("text-anchor","start").attr("dominant-baseline","middle")}s.select("polyline").attr("points",a.map(function(t){return t.join(",")}).join(" ")),s.select("text").html(o.html)}},this._update=function(){u._render()},this.options=function(t,e){if(void 0===t){var n=Object.assign({},h);return n.position=u.position(void 0,!0),n}return"string"==typeof t&&void 0===e?"position"===t?u.position(void 0,!0):h[t]:(void 0===e?h=a.deepMerge(h,t):h[t]=e,(t.position||"position"===t)&&u.position(t.position||e),u._render(),u)}};r(s,o),s.unitsTable={si:[{unit:"nm",scale:1e-9},{unit:"m",scale:1e-6},{unit:"mm",scale:.001},{unit:"m",scale:1},{unit:"km",scale:1e3}],miles:[{unit:"in",scale:.0254},{unit:"in",scale:.0254,basis:12,multiples:[{multiple:1,digits:1},{multiple:1.5,digits:2},{multiple:2,digits:1},{multiple:3,digits:1},{multiple:6,digits:1},{multiple:9,digits:1}]},{unit:"ft",scale:.3048},{unit:"mi",scale:1609.344}],decmiles:[{unit:"mi",scale:1609.344}]},s.areaUnitsTable={si:[{unit:"nm",scale:1e-18},{unit:"m",scale:1e-12},{unit:"mm",scale:1e-6},{unit:"m",scale:1},{unit:"km",scale:1e6}],hectares:[{unit:"ha",scale:1e4}],decmiles:[{unit:"mi",scale:2589988.110336}],miles:[{unit:"in",scale:64516e-8},{unit:"ft",scale:.09290304},{unit:"mi",scale:2589988.110336}],acres:[{unit:"pl",scale:25.29285264},{unit:"rd",scale:1011.7141056},{unit:"ac",scale:4046.8564224}]},s.formatUnit=function(t,e,n,i){if(null!=t){if(!Array.isArray(e)){if(!(n=n||s.unitsTable)||!n[e||"si"])return;e=n[e||"si"]}var r;for(r=0;r<e.length-1&&!(t<e[r+1].scale);r+=1);if(t/=(e=e[r]).scale,!((i=Math.max(0,-Math.ceil(Math.log10(t))+(void 0===i||i<0?3:i)))>10)){var o=t.toFixed(i);if(i){for(;"0"===o.substr(o.length-1);)o=o.substr(0,o.length-1);"."===o.substr(o.length-1)&&(o=o.substr(0,o.length-1))}return o+" "+e.unit}}},a("dom","scale",s),t.exports=s},3019:function(t,e,n){var i=n(7854),r=n(4626),o=n(1098).registerWidget,a=function(t){"use strict";if(!(this instanceof a))return new a(t);i.call(this,t);var e,r,o,s,l,u,c,h=n(2493).d3,d=n(6409),f=this,p=this._exit,m=t.width||20,g=t.height||160,y=t.width?.5*t.width:10;function v(t,e,n,i,r){var o=e.append("g"),a=r/1024;return o.append("g").append("g").attr("transform","translate("+n+","+i+") scale("+a+") translate(-512,-512)").append("path").attr("d",t).attr("class","geo-glyphicon"),o}c={white:"#f4f4f4",black:"#505050"},this.size=function(){return{width:m,height:g}},this._init=function(){f._createCanvas(),f._appendCanvasToParent(),f.reposition();var t=h.select(f.canvas()),n=f.layer().map();function i(e,i){var o=r.invert(h.pointer(event,t.node())[1]),a=n.zoomRange();o=(1-o)*(a.max-a.min)+a.min,i?n.transition({zoom:o,ease:h.easeCubicInOut,duration:500,done:f._update()}):(n.zoom(o),f._update()),e.stopPropagation()}function a(){h.select(this).attr("filter",null),u.selectAll("circle,rect,path").transition().duration(100).style("fill",function(t){return c[t.fill]||null}).style("stroke",function(t){return c[t.stroke]||null})}return t.attr("width",m).attr("height",g),e=h.scaleLinear().domain([-4,4]).range([0,m]),r=h.scaleLinear().domain([0,1]).range([1.5*m,g-1.5*m]),t=t.append("g").classed("geo-ui-slider",!0),u=t,(o=t.append("g")).append("circle").datum({fill:"white",stroke:null}).classed("geo-zoom-in",!0).attr("cx",e(0)).attr("cy",r(0)-m+2).attr("r",(m-2)/2).style("cursor","pointer").on("click",function(){var t=n.zoom();n.transition({zoom:t+1,ease:h.easeCubicInOut,duration:500})}).on("mousedown",function(t){t.stopPropagation()}),v("M512 81.92c-237.568 0-430.080 192.614-430.080 430.080 0 237.568 192.563 430.080 430.080 430.080s430.080-192.563 430.080-430.080c0-237.517-192.563-430.080-430.080-430.080zM564.326 564.326v206.182h-104.653v-206.182h-206.234v-104.653h206.182v-206.234h104.704v206.182h206.182v104.704h-206.182z",o,e(0),r(0)-m+2,m+4).style("cursor","pointer").style("pointer-events","none").select("path").datum({fill:"black",stroke:null}),(s=t.append("g")).append("circle").datum({fill:"white",stroke:null}).classed("geo-zoom-out",!0).attr("cx",e(0)).attr("cy",r(1)+m-2).attr("r",(m-2)/2).style("cursor","pointer").on("click",function(){var t=n.zoom();n.transition({zoom:t-1,ease:h.easeCubicInOut,duration:500})}).on("mousedown",function(t){t.stopPropagation()}),v("M512 81.92c-237.568 0-430.080 192.614-430.080 430.080 0 237.568 192.563 430.080 430.080 430.080s430.080-192.563 430.080-430.080c0-237.517-192.563-430.080-430.080-430.080zM770.56 459.674v104.704h-517.12v-104.704h517.12z",s,e(0),r(1)+m-2,m+4).style("cursor","pointer").style("pointer-events","none").select("path").datum({fill:"black",stroke:null}),t.append("rect").datum({fill:"white",stroke:"black"}).classed("geo-zoom-track",!0).attr("x",e(0)-m/6).attr("y",r(0)).attr("rx",m/10).attr("ry",m/10).attr("width",m/3).attr("height",g-3*m).style("cursor","pointer").on("click",function(t){i(t,!0)}),l=t.append("rect").datum({fill:"black",stroke:null}).classed("geo-zoom-nub",!0).attr("x",e(-4)).attr("y",r(.5)-y/2).attr("rx",3).attr("ry",3).attr("width",m).attr("height",y).style("cursor","pointer").on("mousedown",function(t){h.select(document).on("mousemove.geo.slider",function(){i(t)}),h.select(document).on("mouseup.geo.slider",function(){i(t),h.select(document).on(".geo.slider",null)}),t.stopPropagation()}),u.selectAll("*").on("mouseover",function(){h.select(this).attr("filter","url(#geo-highlight)"),u.selectAll("rect,path,circle").transition().duration(100).style("fill",function(t){return t.fill||null}).style("stroke",function(t){return t.stroke||null})}).on("mouseout",a),f.geoOn(d.zoom,f._update),a(),f._update(),f},this._exit=function(){f.geoOff(d.zoom,f._update),u.remove(),p()},this._update=function(t){var e=f.layer().map(),n=e.zoomRange(),i=e.zoom(),o=h.scaleLinear();i=(t=t||{}).value||i,o.domain([n.min,n.max]).range([1,0]).clamp(!0),l.attr("y",r(o(i))-y/2)}};r(a,i),o("dom","slider",a),t.exports=a},7854:function(t,e,n){var i=n(8738),r=n(4626),o=n(1098).registerWidget,a=function(t){"use strict";if(!(this instanceof a))return new a(t);i.call(this,t);var e=n(2493),r=this,o=this._exit,s=null;return this._init=function(){var e;return t.hasOwnProperty("parent")&&(t.parent.addChild(r),e=t.parent.canvas()),r._createCanvas(e),r.canvas().addEventListener("mousedown",function(t){t.stopPropagation()}),r.reposition(),r},this._exit=function(){s&&s._exit(),o()},this._createCanvas=function(t){var n={layer:r.layer(),widget:!0};t&&(n.d3Parent=t),(s=e(n))._resize=function(){},r.canvas(s.canvas().node())},this};r(a,i),o("dom","svg",a),t.exports=a},4231:function(t,e,n){var i=n(4626),r=n(1098).registerLayer,o=n(5156),a=function(t){"use strict";var e=n(1098).createWidget;if(t.renderer="dom",t.sticky=!1,!(this instanceof a))return new a(t);o.call(this,t);var i=this,r=this._exit;this.createWidget=function(t,n){var r=e(t,i,n);return n&&"parent"in n||i.addChild(r),r._init(n),i.modified(),r},this.deleteWidget=function(t){return t._exit(),i.removeChild(t),i.modified(),i},this._exit=function(){i.children().forEach(function(t){i.deleteWidget(t)}),r()}};i(a,o),r("ui",a),t.exports=a},8738:function(t,e,n){var i=n(4626),r=n(5402),o=function(t){"use strict";if(!(this instanceof o))return new o(t);t=t||{},r.call(this,t);var e=n(6409),i=this,a=this._exit,s=t.layer,l=null,u=void 0===t.position?{left:0,top:0}:t.position;if(!(void 0===t.parent||t.parent instanceof o))throw new Error("Parent must be of type geo.gui.widget");t.parent&&i.parent(t.parent),this._init=function(){return i.modified(),i},this._exit=function(){if(i.children().forEach(function(t){i.removeChild(t),t._exit()}),i.layer().geoOff(e.pan,i.repositionEvent),i.parentCanvas().removeChild&&i.canvas())try{i.parentCanvas().removeChild(i.canvas())}catch(t){}a()},this.layer=function(){return s||i.parent()&&i.parent().layer()},this._createCanvas=function(){throw new Error("Must be defined in derived classes")},this.canvas=function(t){return void 0===t?l:(l=t,i)},this._appendCanvasToParent=function(){i.parentCanvas().appendChild(i.canvas())},this.parentCanvas=function(){return i.parent()?i.parent().canvas():i.layer().canvas()},this.position=function(t,n){if(void 0!==t){i.layer().geoOff(e.pan,i.repositionEvent);var r={};for(var o in u)u.hasOwnProperty(o)&&(r[o]=null);return(u=t).hasOwnProperty("x")&&u.hasOwnProperty("y")&&i.layer().geoOn(e.pan,i.repositionEvent),i.reposition(Object.assign(r,i.position())),i}if(u.hasOwnProperty("x")&&u.hasOwnProperty("y")&&!n){var a=i.layer().map().gcsToDisplay(u);return{left:a.x,top:a.y,right:null,bottom:null}}return u},this.reposition=function(t){if(t=t||i.position(),i.canvas()&&i.canvas().style)for(var e in i.canvas().style.position="absolute",t)t.hasOwnProperty(e)&&(/^\s*(-|\+)?(\d+(\.\d*)?|\d*\.\d+)([eE](-|\+)?\d+)?\s*$/.test(t[e])?i.canvas().style[e]=parseFloat(parseFloat(t[e]).toFixed(3))+"px":i.canvas().style[e]=t[e]);return i},this.repositionEvent=function(){return i.reposition()},this.isInViewport=function(){var t=i.position(),e=i.layer();return t.left>=0&&t.top>=0&&t.left<=e.width()&&t.top<=e.height()},u.hasOwnProperty("x")&&u.hasOwnProperty("y")&&this.layer().geoOn(e.pan,i.repositionEvent)};i(o,r),t.exports=o},5966:function(t,e,n){function i(t,e,n){this._group=t,this._zoom=e,this._points=[],this._clusters=[],this._count=0,this._parent=null,this._coord=null;var i=this;(n||[]).forEach(function(t){i._add(t)})}function r(t){var e,r,o=n(7235);for(this._opts=Object.assign({maxZoom:18,radius:5},t),this._clusters={},this._points={},e=this._opts.maxZoom;e>=0;e-=1)r=this._opts.radius*Math.pow(2,-e),this._clusters[e]=new o(r),this._points[e]=new o(r);this._topClusterLevel=new i(this,-1)}i.prototype._add=function(t){var e=1;t instanceof i?(this._clusters.push(t),e=t._count):this._points.push(t),t._parent=this,this._increment(e)},i.prototype._increment=function(t){this._coord=null,this._count+=t,this._parent&&this._parent._increment(t)},i.prototype.count=function(){return this._count},i.prototype.each=function(t){var e;for(e=0;e<this._points.length;e+=1)t.call(this,this._points[e],this._zoom);for(e=0;e<this._clusters.length;e+=1)this._clusters[e].each.call(this._clusters[e],t)},i.prototype.coords=function(){if(this._coord)return this._coord;var t,e={x:0,y:0};for(t=0;t<this._points.length;t+=1)e.x+=this._points[t].x,e.y+=this._points[t].y;for(t=0;t<this._clusters.length;t+=1)e.x+=this._clusters[t].coords().x*this._clusters[t].count(),e.y+=this._clusters[t].coords().y*this._clusters[t].count();return this._coord={x:e.x/this.count(),y:e.y/this.count()},this._coord},r.prototype.addPoint=function(t){var e,n,r,o,a,s;for(e=this._opts.maxZoom;e>=0;e-=1){if(n=this._clusters[e].getNearObject(t))return void n._add(t);if(n=this._points[e].getNearObject(t)){if(r=n._parent)for(s=r._points.length-1;s>=0;s-=1)if(r._points[s]===n){r._points.splice(s,1),r._increment(-1);break}for(o=new i(this,e,[n,t]),this._clusters[e].addObject(o,o.coords()),a=o,s=e-1;s>r._zoom;s-=1)a=new i(this,s,[a]),this._clusters[s].addObject(a,a.coords());for(r._add(a),s=e;s>=0&&this._points[s].removeObject(n,n);s-=1);return}this._points[e].addObject(t,t)}this._topClusterLevel._add(t)},r.prototype.points=function(t){return t=Math.min(Math.max(Math.floor(t),0),this._opts.maxZoom-1),this._points[Math.floor(t)].contents()},r.prototype.clusters=function(t){return t=Math.min(Math.max(Math.floor(t),0),this._opts.maxZoom-1),this._clusters[Math.floor(t)].contents()},t.exports=r},5637:function(t,e,n){var i=n(1949),r=n(3087);r=r.__esModule?r.default:r;var o={maxCount:1e3,count:0,memo:{}};function a(t,e){return o.count+=1,o.count>=o.maxCount&&(o.memo={},o.count=0),o.memo[t]=e,e}var s={convertColor:function(t){if(null==t||void 0!==t.r&&void 0!==t.g&&void 0!==t.b)return t;if(void 0!==o.memo[t])return o.memo[t];var e,n=t;if("string"==typeof t){var i=t.toLowerCase();if(r.hasOwnProperty(i))t={r:r[i][0]/255,g:r[i][1]/255,b:r[i][2]/255};else if("#"===t.charAt(0))4===t.length||5===t.length?(5===t.length&&(e=parseInt(t.slice(4),16)/15),t=4352*(3840&(t=parseInt(t.slice(1,4),16)))+272*(240&t)+17*(15&t)):7!==t.length&&9!==t.length||(9===t.length&&(e=parseInt(t.slice(7),16)/255),t=parseInt(t.slice(1,7),16));else if("transparent"===i)e=t=0;else if(i.indexOf("(")>=0)for(var l=0;l<s.cssColorConversions.length;l+=1){var u=s.cssColorConversions[l].regex.exec(i);if(u)return a(n,t=s.cssColorConversions[l].process(i,u))}}return isFinite(t)&&(t={r:((16711680&t)>>16)/255,g:((65280&t)>>8)/255,b:(255&t)/255}),void 0!==e&&t&&void 0!==t.r&&(t.a=e),a(n,t)},convertColorAndOpacity:function(t,e,n){return(t=s.convertColor(t))&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b||(t=s.convertColor(n||{r:0,g:0,b:0})),t&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b||(t={r:0,g:0,b:0}),t={r:isFinite(t.r)&&t.r>=0?t.r<=1?+t.r:1:0,g:isFinite(t.g)&&t.g>=0?t.g<=1?+t.g:1:0,b:isFinite(t.b)&&t.b>=0?t.b<=1?+t.b:1:0,a:i.isNonNullFinite(t.a)&&t.a>=0&&t.a<1?+t.a:1},i.isNonNullFinite(e)&&e<1&&(t.a=e<=0?0:t.a*e),t},convertColorToHex:function(t,e){var n,i=s.convertColor(t);return n=i.r||i.g||i.b?"#"+((1<<24)+(Math.round(255*i.r)<<16)+(Math.round(255*i.g)<<8)+Math.round(255*i.b)).toString(16).slice(1):"#000000",void 0!==i.a&&e&&(i.a<1||"needed"!==e)&&(n+=(256+Math.round(255*i.a)).toString(16).slice(1)),n},convertColorToRGBA:function(t){var e=s.convertColor(t);return e||(e={r:0,g:0,b:0}),(!i.isNonNullFinite(e.a)||e.a>1)&&(e.a=1),"rgba("+Math.round(255*e.r)+", "+Math.round(255*e.g)+", "+Math.round(255*e.b)+", "+ +(+e.a).toFixed(5)+")"},cssAngleUnitsBase:{deg:360,grad:400,rad:2*Math.PI,turn:1},cssNumberRegex:"[+-]?(?:\\d+\\.?\\d*|\\.\\d+)(?:[eE][+-]?\\d+)?"};s.cssColorConversions=[{name:"rgb",regex:new RegExp("^\\s*rgba?\\(\\s*("+s.cssNumberRegex+")\\s*(%?)\\s*,?\\s*("+s.cssNumberRegex+")\\s*(%?)\\s*,?\\s*("+s.cssNumberRegex+")\\s*(%?)\\s*([/,]?\\s*("+s.cssNumberRegex+")\\s*(%?)\\s*)?\\)\\s*$"),process:function(t,e){return t={r:Math.min(1,Math.max(0,+e[1]/(e[2]?100:255))),g:Math.min(1,Math.max(0,+e[3]/(e[4]?100:255))),b:Math.min(1,Math.max(0,+e[5]/(e[6]?100:255)))},e[7]&&(t.a=Math.min(1,Math.max(0,+e[8]/(e[9]?100:1)))),t}},{name:"hsl",regex:new RegExp("^\\s*hsla?\\(\\s*("+s.cssNumberRegex+")\\s*(deg|grad|rad|turn)?\\s*,?\\s*("+s.cssNumberRegex+")\\s*%\\s*,?\\s*("+s.cssNumberRegex+")\\s*%\\s*([/,]?\\s*("+s.cssNumberRegex+")\\s*(%?)\\s*)?\\)\\s*$"),process:function(t,e){var n=function(t,e,n){return 6*(n-=Math.floor(n))<1?t+(e-t)*n*6:6*n<3?e:6*n<4?t+(e-t)*(2/3-n)*6:t},i=+e[1]/(s.cssAngleUnitsBase[e[2]]||360),r=Math.min(1,Math.max(0,+e[3]/100)),o=Math.min(1,Math.max(0,+e[4]/100)),a=o<=.5?o*(r+1):o+r-o*r,l=2*o-a;return t={r:n(l,a,i+1/3),g:n(l,a,i),b:n(l,a,i-1/3)},e[5]&&(t.a=Math.min(1,Math.max(0,+e[6]/(e[7]?100:1)))),t}}],t.exports=s},1949:function(t,e,n){function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}var r=n(5616),o=n(9677);o=o.__esModule?o.default:o;var a,s,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",u='<svg xmlns="http://www.w3.org/2000/svg"><foreignObject width="100%" height="100%"></foreignObject></svg>',c={},h=200,d=15;function f(){var t;for(t=0;t<arguments.length;t+=1)if(isFinite(arguments[t]))return arguments[t]}var p={pointInPolygon:function(t,e,n,i){return e.outer&&(n=e.inner,e=e.outer),!(e.length<3)&&(!(i&&i.min&&i.max&&(t.x<i.min.x||t.y<i.min.y||t.x>i.max.x||t.y>i.max.y))&&p.distanceToPolygon2d(t,n?{outer:e,inner:n}:e,!0)>0)},pointToTriangleBasis2d:function(t,e,n,i){var r=n.x-e.x,o=i.x-e.x,a=n.y-e.y,s=i.y-e.y,l=t.x-e.x,u=t.y-e.y,c=r*s-o*a;if(c)return{x:(l*s-u*o)/c,y:(l*-a+u*r)/c}},isReadyImage:function(t,e){return!!(t instanceof Image&&t.complete&&t.src&&(t.naturalWidth&&t.naturalHeight||e))},isReadyVideo:function(t,e){return!!(t instanceof HTMLVideoElement&&t.src&&void 0!==t.HAVE_CURRENT_DATA&&(t.videoWidth&&t.videoHeight&&t.readyState>=t.HAVE_CURRENT_DATA||e&&t.error))},isFunction:function(t){return"function"==typeof t},ensureFunction:function(t){return p.isFunction(t)?t:function(){return t}},isNonNullFinite:function(t){return isFinite(t)&&null!==t&&!1!==t&&""!==t},randomString:function(t){var e,n,i;for(t=t||8,e="",n=0;n<t;n+=1)i=Math.floor(62*Math.random()),e+=l.substring(i,i+1);return e},normalizeCoordinates:function(t){return t=t||{},Array.isArray(t)?{x:t[0],y:t[1],z:t[2]||0}:{x:f(t.x,t.longitude,t.lng,t.lon,0),y:f(t.y,t.latitude,t.lat,0),z:f(t.z,t.elevation,t.elev,t.height,0)}},range:function(t,e,n){n=n||1;for(var i=[],r=t;r<=e;r+=n)i.push(r);return i},compareArrays:function(t,e){return t.length===e.length&&t.every(function(t,n){return t===e[n]})},vec3AsArray:function(){return[0,0,0]},mat3AsArray:function(){return[1,0,0,0,1,0,0,0,1]},mat4AsArray:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},getGeomBuffer:function(t,e,n,i,r){i=void 0===i?.2:i,r=void 0===r?.1:r;var o=t.sourceByName(e),a=o.data(),s=Math.floor((i+1)*n);if((a=o.data())instanceof Float32Array&&(a.length===n||a.length>=n&&a.length<=s))return a;var l=n;return a instanceof Float32Array&&a.length&&n&&r>0&&(l=Math.floor((r+1)*n)),a=new Float32Array(l),o.setData(a),a},adjustActions:function(t){var e,n;for(n=0;n<t.length;n+=1){if(e=t[n],"string"===r.type(e.input)){var i={};i[e.input]=!0,e.input=i}if(e.modifiers||(e.modifiers={}),"string"===r.type(e.modifiers)){var o={};o[e.modifiers]=!0,e.modifiers=o}}},addAction:function(t,e,n){n?t.push(e):t.unshift(e),p.adjustActions(t)},hasAction:function(t,e,n,i){e&&e.action&&(n=e.name,i=e.owner,e=e.action);for(var r=0;r<t.length;r+=1)if(!(e&&t[r].action!==e||n&&t[r].name!==n||i&&t[r].owner!==i))return t[r];return null},removeAction:function(t,e,n,i){var r,o=0;do{(r=p.hasAction(t,e,n,i))&&(t.splice(t.indexOf(r),1),o+=1)}while(r);return o},actionMatch:function(t,e,n){var i;if(n.some(function(n){for(var r in n.input)if(n.input.hasOwnProperty(r)&&(!1===n.input[r]&&t[r]||n.input[r]&&!t[r]))return!1;for(var o in n.modifiers)if(n.modifiers.hasOwnProperty(o)&&(!1===n.modifiers[o]&&e[o]||n.modifiers[o]&&!e[o]))return!1;return i=n,!0}))return i},pixelCoordinateParams:function(t,e,n,i,o){var a,s,l;t&&(a=(t=r(t)).innerWidth(),s=t.innerHeight()),o=o||n,l=(i=i||e)!==e||o!==n;var u=Math.min(0,Math.floor(Math.log(Math.min((a||i)/i,(s||o)/o))/Math.log(2))),c=Math.max(0,Math.ceil(Math.log(Math.max(e/i,n/o))/Math.log(2)));return{map:{node:t,ingcs:"+proj=longlat +axis=esu",gcs:"+proj=longlat +axis=enu",maxBounds:{left:0,top:0,right:e,bottom:n},unitsPerPixel:Math.pow(2,c),center:{x:e/2,y:n/2},min:u,max:c,zoom:u,clampBoundsX:!0,clampBoundsY:!0,clampZoom:!0},layer:{maxLevel:c,minLevel:Math.min(0,c),wrapX:!1,wrapY:!1,tileOffset:function(){return{x:0,y:0}},attribution:"",tileWidth:i,tileHeight:o,tileRounding:Math.ceil,tilesAtZoom:l?function(t){var r=Math.pow(2,c-t);return{x:Math.ceil(e/i/r),y:Math.ceil(n/o/r)}}:void 0,tilesMaxBounds:l?function(t){var i=Math.pow(2,c-t);return{x:Math.floor(e/i),y:Math.floor(n/i)}}:void 0}}},centerFromPerimeter:function(t){var e,n,i,r,o,a;if(t&&t.outer&&(t=t.outer),t&&t.length){if(1===t.length)return{x:t[0].x,y:t[0].y};for(e={x:0,y:0},o=0,n=t[t.length-1],a=0;a<t.length;a+=1)i=n,n=t[a],r=Math.sqrt(Math.pow(i.x-n.x,2)+Math.pow(i.y-n.y,2)),e.x+=(n.x+i.x)*r,e.y+=(n.y+i.y)*r,o+=2*r;return e.x/=o,e.y/=o,o?e:{x:n.x,y:n.y}}},distance2dSquared:function(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},distance2dToLineSquared:function(t,e,n){var i=n.x-e.x,r=n.y-e.y,o=i*i+r*r,a=0;return o&&(a=((t.x-e.x)*i+(t.y-e.y)*r)/o,a=Math.max(0,Math.min(1,a))),p.distance2dSquared(t,{x:e.x+a*i,y:e.y+a*r})},distanceToPolygon2d:function(t,e,n){for(var i,r,o=e.outer||e,a=!1,s=0,l=o.length,u=l-1;s<l;u=s,s+=1){var c=o[s],h=o[u];c.y>t.y!=h.y>t.y&&t.x<(h.x-c.x)*(t.y-c.y)/(h.y-c.y)+c.x&&(a=!a),r=n?1:p.distance2dToLineSquared(t,c,h),(void 0===i||r<i)&&(i=r)}return e.inner&&e.inner.forEach(function(e){var r=p.distanceToPolygon2d(t,e,n);r*r<i&&(i=r*r),r>0&&(a=!a)}),(a?1:-1)*Math.sqrt(i)},triangleTwiceSignedArea2d:function(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)},crossedLineSegmentPolygon2d:function(t,e,n){var i,r,o=n.outer||n,a=o.length;for(i=0,r=a-1;i<a;r=i,i+=1)if(p.crossedLineSegments2d(t,e,o[i],o[r]))return!0;if(n.inner)for(i=0;i<n.inner.length;i+=1)if(p.crossedLineSegmentPolygon2d(t,e,n.inner[i]))return!0;return!1},crossedLineSegments2d:function(t,e,n,i){return!(t.x>n.x&&t.x>i.x&&e.x>n.x&&e.x>i.x||t.x<n.x&&t.x<i.x&&e.x<n.x&&e.x<i.x||t.y>n.y&&t.y>i.y&&e.y>n.y&&e.y>i.y||t.y<n.y&&t.y<i.y&&e.y<n.y&&e.y<i.y)&&(!(t.x===n.x&&t.y===n.y||t.x===i.x&&t.y===i.y||e.x===n.x&&e.y===n.y||e.x===i.x&&e.y===i.y)&&!(p.triangleTwiceSignedArea2d(t,e,n)*p.triangleTwiceSignedArea2d(t,e,i)>0||p.triangleTwiceSignedArea2d(n,i,t)*p.triangleTwiceSignedArea2d(n,i,e)>0))},segmentCrossesLineList2d:function(t,e,n){return n.some(function(n){return n.some(function(i,r){return!!r&&p.crossedLineSegments2d(t,e,n[r-1],i)})})},rdpLineSimplify:function(t,e,n,i){if(t.length<=2||e<0)return t;var r,o,a,s=-1,l=e*e;if(n){for(r=1;r<t.length;r+=1)(o=p.distance2dSquared(t[0],t[r]))>s&&(s=o,a=r);return 4*s<=l?t.slice(a,a+1):(t=t.slice(a).concat(t.slice(0,a+1)),(t=p.rdpLineSimplify(t,e,!1,i)).splice(t.length-1),t)}for(r=1;r<t.length-1;r+=1)(o=p.distance2dToLineSquared(t[r],t[0],t[t.length-1]))>s&&(s=o,a=r);if(s<=l&&(!i||!p.segmentCrossesLineList2d(t[0],t[t.length-1],i)))return[t[0],t[t.length-1]];var u=t.slice(0,a+1),c=t.slice(a),h=p.rdpLineSimplify(u,e,!1,i?i.concat([c]):null),d=p.rdpLineSimplify(c,e,!1,i?i.concat([u]):null);return h.slice(0,h.length-1).concat(d)},getMinMaxValues:function(t,e,n,i){if(t.length&&(i||!r.isNumeric(e)||!r.isNumeric(n))){var o,a,s=t[0],l=t[0];for(a=t.length-1;a>0;a-=1)(o=t[a])<s&&(s=o),o>l&&(l=o);(!r.isNumeric(e)||i&&s>e)&&(e=s),(!r.isNumeric(n)||i&&l<n)&&(n=l)}return{min:e,max:n}},wrapAngle:function(t){return(t%=2*Math.PI)<-Math.PI?t+=2*Math.PI:t>=Math.PI&&(t-=2*Math.PI),t},escapeUnicodeHTML:function(t){return t.replace(/[^- 0-9A-Za-z~`!@#$%^&*()_+={}|[\]\\:";'<>?,./]/g,function(e,n){var i=e.charCodeAt(0);if(i<127)return e;if(i>=55296&&i<=57344){if(i<56320||n)return"";var r=t.charCodeAt(n-1);if(r<55296||r>=56320)return"";i=1024*(r-55296)+(i-56320)}return"&#"+i.toString(10)+";"})},deepMerge:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var o=0,a=n;o<a.length;o++){var s=a[o];if(null!=s)for(var l in s)if("__proto__"!==l&&t!==s[l]){var u=s[l];if(u&&"object"===i(u)&&(u.constructor===Object||Array.isArray(u))){var c=t[l];Array.isArray(u)?Array.isArray(c)||(c=[]):("object"!==i(c)||Array.isArray(c))&&(c={}),t[l]=p.deepMerge(c,u)}else void 0!==u&&(t[l]=u)}}return t},dereferenceElements:function(t){var e=[];return r("img,image",t).each(function(){var t=r(this),n=t.is("image")?"href":"src";if(t.attr(n)){var i=new Image;("http"===t.attr(n).substr(0,4)||t[0].crossOrigin)&&(i.crossOrigin=t[0].crossOrigin||"anonymous");var o=r.Deferred();i.onload=function(){var e=document.createElement("canvas");e.width=i.naturalWidth,e.height=i.naturalHeight,e.getContext("2d").drawImage(i,0,0),t.attr(n,e.toDataURL("image/png")),"data:image"!==t.attr(n).substr(0,10)&&t.remove(),o.resolve()},i.onerror=function(){t.remove(),o.resolve()},i.src=t.attr(n),e.push(o)}}),e},dereferenceCssUrlsRegex:/url\(["']?(http[^)"']+|[^:)"']+)["']?\)/g,dereferenceCssUrls:function(t,e,n,i,o){var a=[],s=[];if(t=(t=t.replace(/\/\*[^\0]*?\*\//g,"")).replace(/\r/g,"\n").replace(/\s+\n/g,"\n").replace(/\n\s+/g,"\n").replace(/\n\n+/g,"\n"),o){var l=/(^[^?#]*)\/[^?#/]*([?#]|$)/g.exec(o);o=l&&l[1]?l[1]+"/":null}t.replace(p.dereferenceCssUrlsRegex,function(t,e){var n=a.length,i=r.Deferred(),l=new XMLHttpRequest;return a.push(i),s.push(""),/^[^/:][^:]*(\/|$)/g.exec(e)&&o&&(e=o+e),l.open("GET",e,!0),l.responseType="arraybuffer",l.onload=function(){if(200===this.status){var t,e=new Uint8Array(this.response),r=new Array(e.length);for(t=0;t<e.length;t+=1)r[t]=String.fromCharCode(e[t]);r=r.join(""),s[n]="url(data:"+l.getResponseHeader("content-type")+";base64,"+btoa(r)+")"}i.resolve()},l.onerror=i.resolve,l.send(),t}),r.when.apply(r,a).then(function(){var r=0;t=t.replace(p.dereferenceCssUrlsRegex,function(t,e){return s[(r+=1)-1]}),void 0===i?e.text(t):e.style[i]=t,n.resolve()})},htmlToImageSupported:function(){if(void 0===s){var t=r.Deferred(),e=r(u);e.attr({width:"10px",height:"10px","text-rendering":"optimizeLegibility"}),r("foreignObject",e).append("<div/>");var n=new Image;return n.onload=n.onerror=function(){var e=document.createElement("canvas");e.width=10,e.height=10,e.getContext("2d").drawImage(n,0,0);try{e.toDataURL(),s=!0}catch(t){console.warn("This browser does not support converting HTML to an image via SVG foreignObject.  Some functionality will be limited.",t),s=!1}t.resolve(s)},n.src="data:image/svg+xml;base64,"+btoa(p.escapeUnicodeHTML((new XMLSerializer).serializeToString(e[0]))),t}return s},htmlToImage:function(t,e){var n,i=r.Deferred(),o=[p.htmlToImageSupported()],a=r(t);for(t=r(t).clone();e&&e>0;)(a=a.parent()).is("div")&&((n=r("<div>").attr({class:a.attr("class"),id:a.attr("id")}).css({width:"100%",height:"100%",background:"none",margin:0})).append(t),t=n),e-=1;r("canvas",t).remove(),r("*",t).addBack().each(function(){for(var t=this.style,e=0;e<t.length;e+=1){var n=this.style[e];if(this.style[n].match(p.dereferenceCssUrlsRegex)){var i=r.Deferred();p.dereferenceCssUrls(this.style[n],this,i,n),o.push(i)}}}),(n=r('<div xmlns="http://www.w3.org/1999/xhtml">')).css({width:a.width()+"px",height:a.height()+"px"}),n.append(r("<head>"));var s=r("<body>");return n.append(s),s.css({width:a.width()+"px",height:a.height()+"px",background:"none",margin:0}),s.append(t),o=o.concat(p.dereferenceElements(t)),r('style,link[rel="stylesheet"]').each(function(){var t=r('<style type="text/css">'),e=r.Deferred();if(r(this).is("style")){var i=r(this).text();p.dereferenceCssUrls(i,t,e)}else{var a=r(this).attr("href");r.get(a).done(function(n){p.dereferenceCssUrls(n,t,e,void 0,a)}).fail(function(n,i,r){console.warn("Failed to dereference "+a,i,r),t.remove(),e.resolve()})}o.push(e),r("head",n).append(t)}),r.when.apply(r,o).then(function(){var t=r(u);t.attr({width:a.width()+"px",height:a.height()+"px","text-rendering":"optimizeLegibility"}),r("foreignObject",t).append(n);var e=new Image;p.htmlToImageSupported()?(e.onload=function(){i.resolve(e)},e.onerror=function(){console.warn("Failed to render html to image"),i.reject()},e.src="data:image/svg+xml;base64,"+btoa(p.escapeUnicodeHTML((new XMLSerializer).serializeToString(t[0])))):i.resolve(e)}),i},timeReport:function(t){return r.each(c,function(t,e){e.count?(e.stddev=Math.sqrt(Math.abs((e.sum2-e.sum*e.sum/e.count)/e.count)),e.average=e.sum/e.count):(e.stddev=0,e.average=0)}),t?c[t]:c},timeFunctionStart:function(t,e){c[t]&&!e||(c[t]={count:0,sum:0,sum2:0,max:0,recent:[]}),c[t].start=window.performance.now()},timeFunctionStop:function(t){if(c[t]&&c[t].start){var e=window.performance.now()-c[t].start;c[t].start=null,c[t].sum+=e,c[t].sum2+=e*e,c[t].count+=1,c[t].max=Math.max(c[t].max,e),c[t].recent.push(e),c[t].recent.length>h&&c[t].recent.splice(0,c[t].recent.length-h)}},timeRequestAnimationFrame:function(t,e,n,i){c.requestAnimationFrame&&!e||(c.requestAnimationFrame={count:0,sum:0,sum2:0,max:0,above_threshold:0,recent:[],recentsub:[]}),n&&(d=n),i&&(h=i),t&&a?(window.requestAnimationFrame=a,a=null):t||a||(a=window.requestAnimationFrame,window.requestAnimationFrame=function(t){return a.call(window,function(e){var n,i=c.requestAnimationFrame;i.timestamp!==e&&(i.nowDelta=window.performance.now()-e,Math.abs(i.nowDelta)<1e3&&(i.nowDelta=0),i.timestamp=e,i.subcalls=i.subcalls||0,i.start={sum:i.sum,sum2:i.sum2,count:i.count,max:i.max,above_threshold:i.above_threshold},i.recent.push([0]),i.recentsub.push([]),i.recent.length>h&&(i.recent.splice(0,i.recent.length-h),i.recentsub.splice(0,i.recentsub.length-h))),i.subcalls+=1,t.apply(this,arguments);var r=window.performance.now()-e;r-=i.nowDelta,i.sum=i.start.sum+r,i.sum2=i.start.sum2+r*r,i.count=i.start.count+1,i.max=Math.max(i.max,r),i.above_threshold=i.start.above_threshold+(r>=d?1:0),i.recent[i.recent.length-1]=r,(n=i.recentsub[i.recent.length-1]).push({total_duration:r,duration:r-(n.length?n[n.length-1].total_duration:0),callback:t.name||t})})})},isObject:function(t){var e=i(t);return null!=t&&("object"===e||"function"===e)},identityFunction:function(t){return t},packFloats:function(t){return t.length?((void 0===t[0]?0:Math.floor(250*Math.abs(t[0]))+1)+252*(void 0===t[1]?0:Math.floor(250*Math.abs(t[1]))+1)+252*(void 0===t[2]?0:Math.floor(250*Math.abs(t[2]))+1)*252)*(t[3]?-1:1):void 0===t?0:Math.floor(250*Math.abs(t))+1},radiusEarth:o.WGS84.a};t.exports=p},7235:function(t){var e={};e.Util={stamp:function(t){return t._leaflet_id=t._leaflet_id||++e.Util.lastId,t._leaflet_id},lastId:0};var n=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}};n.prototype={addObject:function(t,n){var i=this._getCoord(n.x),r=this._getCoord(n.y),o=this._grid,a=o[r]=o[r]||{},s=a[i]=a[i]||[],l=e.Util.stamp(t);n.obj=t,this._objectPoint[l]=n,s.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,n){var i,r,o=this._getCoord(n.x),a=this._getCoord(n.y),s=this._grid,l=s[a]=s[a]||{},u=l[o]=l[o]||[];for(delete this._objectPoint[e.Util.stamp(t)],i=0,r=u.length;i<r;i++)if(u[i]===t)return u.splice(i,1),1===r&&delete l[o],!0},eachObject:function(t,e){var n,i,r,o,a,s,l=this._grid;for(n in l)for(i in a=l[n])for(r=0,o=(s=a[i]).length;r<o;r++)t.call(e,s[r])&&(r--,o--)},getNearObject:function(t){var n,i,r,o,a,s,l,u,c=this._getCoord(t.x),h=this._getCoord(t.y),d=this._objectPoint,f=this._sqCellSize,p=null;for(n=h-1;n<=h+1;n++)if(o=this._grid[n])for(i=c-1;i<=c+1;i++)if(a=o[i])for(r=0,s=a.length;r<s;r++)l=a[r],(u=this._sqDist(d[e.Util.stamp(l)],t))<f&&(f=u,p=l);return p},contents:function(){return Object.values(this._objectPoint)},_getCoord:function(t){return Math.floor(t/this._cellSize)},_sqDist:function(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i}},t.exports=n},642:function(t,e,n){t.exports=Object.assign(n(1949),n(5637),n(208),n(269),{DistanceGrid:n(7235),ClusterGroup:n(5966),mesh:n(5905),polyops:n(5647)})},5905:function(t,e,n){t.exports={createColoredMesh:function(t,e){var i,r,o,a,s,l=n(642),u=t.mesh,c=t.style.get("value"),h={used:void 0!==t.style("used")?t.style.get("used"):function(t,e){return l.isNonNullFinite(c(t,e))},opacity:t.style.get("opacity"),value:c},d=t._createMesh(e?{}:h,e?h:{});if(d.elementValues=!!e,!d.numVertices||!d.numElements)return d;var f=u.get("stepped")(d),p=u.get("opacityRange")(d),m=u.get("rangeValues")(d);if(d.stepped=!(void 0!==f&&!f),d.colorMap=[],d.minColor=Object.assign({a:u.get("minOpacity")(d)||0},l.convertColor(u.get("minColor")(d))),d.maxColor=Object.assign({a:u.get("maxOpacity")(d)||0},l.convertColor(u.get("maxColor")(d))),u.get("colorRange")(d).forEach(function(t,e){d.colorMap.push(Object.assign({a:p&&void 0!==p[e]?p[e]:1},l.convertColor(t)))}),i=l.getMinMaxValues(d.value,u.get("min")(d),u.get("max")(d)),d.minValue=i.min,d.maxValue=i.max,m&&d.colorMap&&(m.length===d.colorMap.length+1||!f&&m.length===d.colorMap.length)||(m=null),m)for(s=1;s<m.length;s+=1)if(m[s-1]>m[s]){m=null;break}for(m&&(d.minValue=m[0],d.maxValue=m[m.length-1]),(o=d.maxValue-d.minValue)||(d.colorMap=d.colorMap.slice(0,1),o=1,m=null),d.rangeValues=m,d.factor=(d.colorMap.length-(f?0:1))/o,a=0;a<d.value.length;a+=1)if(r=d.value[a],m&&r>=d.minValue&&r<=d.maxValue){for(s=1;s<m.length;s+=1)if(r<=m[s]){d.value[a]=s-1+(r-m[s-1])/(m[s]-m[s-1]);break}}else d.value[a]=(r-d.minValue)*d.factor;return d}}},269:function(t,e,n){var i,r,o=n(7945);t.exports={},t.exports.mockWebglRenderer=function(t){"use strict";var e=n(1611);if(void 0===t&&(t=!0),e._mocked)throw new Error("webgl renderer already mocked");var a={},s=function(t){a[t]=(a[t]||0)+1},l=function(t){return function(){s(t)}},u=0,c=function(t){return function(){return s(t),u+=1}},h={activeTexture:l("activeTexture"),attachShader:l("attachShader"),bindAttribLocation:l("bindAttribLocation"),bindBuffer:l("bindBuffer"),bindFramebuffer:l("bindFramebuffer"),bindTexture:l("bindTexture"),blendFuncSeparate:l("blendFuncSeparate"),bufferData:l("bufferData"),bufferSubData:l("bufferSubData"),checkFramebufferStatus:function(t){if(s("checkFramebufferStatus"),t===e.GL.FRAMEBUFFER)return e.GL.FRAMEBUFFER_COMPLETE},clear:l("clear"),clearColor:l("clearColor"),clearDepth:l("clearDepth"),compileShader:l("compileShader"),createBuffer:c("createBuffer"),createFramebuffer:l("createFramebuffer"),createProgram:c("createProgram"),createShader:c("createShader"),createTexture:c("createTexture"),deleteBuffer:l("deleteBuffer"),deleteProgram:l("deleteProgram"),deleteShader:l("deleteShader"),deleteTexture:l("deleteTexture"),detachShader:l("detachShader"),depthFunc:l("depthFunc"),disable:l("disable"),disableVertexAttribArray:l("disableVertexAttribArray"),drawArrays:l("drawArrays"),enable:l("enable"),enableVertexAttribArray:l("enableVertexAttribArray"),finish:l("finish"),getError:l("getError"),getExtension:c("getExtension"),getParameter:function(t){switch(s("getParameter"),t){case e.GL.ALIASED_POINT_SIZE_RANGE:return[1,64];case e.GL.DEPTH_BITS:return 16;case e.GL.MAX_TEXTURE_SIZE:return 4096}},getProgramParameter:function(t,n){if(s("getProgramParameter"),n===e.GL.LINK_STATUS)return!0},getShaderInfoLog:function(){return s("getShaderInfoLog"),"log"},getShaderParameter:function(t,n){if(s("getShaderParameter"),n===e.GL.COMPILE_STATUS)return!0},getSupportedExtensions:function(){return s("getSupportedExtensions"),[]},getUniformLocation:c("getUniformLocation"),isEnabled:function(t){if(s("isEnabled"),t===e.GL.BLEND)return!0},linkProgram:l("linkProgram"),pixelStorei:l("pixelStorei"),shaderSource:l("shaderSource"),texImage2D:l("texImage2D"),texParameteri:l("texParameteri"),uniform1iv:l("uniform1iv"),uniform1fv:l("uniform1fv"),uniform2fv:l("uniform2fv"),uniform3fv:l("uniform3fv"),uniform4fv:l("uniform4fv"),uniformMatrix3fv:l("uniformMatrix3fv"),uniformMatrix4fv:l("uniformMatrix4fv"),useProgram:l("useProgram"),vertexAttribPointer:l("vertexAttribPointer"),vertexAttrib3fv:l("vertexAttrib3fv"),viewport:l("viewport")};i=e.renderWindow;var d=function(){e.renderWindow=i;var t,n=new e.renderWindow;return e.renderWindow=d,n._setup=function(){var i,r=n.renderers(),o=n.windowSize(),a=n.windowPosition();for(t=Object.assign({},e.GL,h),i=0;i<r.length;i+=1)(r[i].width()>o[0]||0===r[i].width()||r[i].height()>o[1]||0===r[i].height())&&r[i].resize(a[0],a[1],o[0],o[1]);return!0},n.context=function(){return t},n};e.renderWindow=d,r=o.supported,o.supported=function(){return!!t},o._maxTextureSize=4096,o._maxPointSize=64,e._mocked=!0,e.mockCounts=function(){return a}},t.exports.restoreWebglRenderer=function(){var t=n(1611);t._mocked&&(t.renderWindow=i,o.supported=r,delete t._mocked,delete t.mockCounts)}},5647:function(t,e,n){function i(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}var o=n(9061),a=o.PolyBool,s=o.GeometryEpsilon,l=new a,u=n(6211),c=n(1949),h={"+":"union","|":"union",add:"union","-":"difference",sub:"difference",subtract:"difference",minus:"difference","*":"intersect","&":"intersect",mul:"intersect",multiply:"intersect",intersection:"intersect",x:"xor","^":"xor"};function d(t,e,n){t="select"+t.charAt(0).toUpperCase()+t.slice(1);for(var i=new a(new s(e));n.length>1;){for(var r=[],o=Math.ceil(n.length/2),l=0;l<o;l+=1){var u=n[l];if(l+o<n.length){var c=n[l+o];try{u=i.combine(u,c)}catch(t){u=i.segments(i.polygon(u)),c=i.segments(i.polygon(c));for(var h=20;h>=6;h-=1){var d=new a(new s(Math.pow(.1,h)));try{u=d.combine(u,c);break}catch(t){}}}u=i[t](u)}r.push(u)}n=r}return n}function f(t,e,n){if(e=e||{},t.toPolygonList){if(e.style=t,!(t=t.toPolygonList(n)).length)return e.min=e.max=[0,0],e.epsilon=1e-10,t}else{if(e.style="",t.outer?(e.style="-outer",t=[[t.outer].concat(i(t.inner||[]))]):t.length&&t[0].outer&&(e.style="-outer-list",t=t.map(function(t){return[t.outer].concat(i(t.inner||[]))})),!t.length)return e.style="flat-listlist"+e.style,e.min=e.max=[0,0],e.epsilon=1e-10,t;void 0!==t[0].x?(e.style="object",t=[[t.map(function(t){return[t.x,t.y]})]]):void 0!==t[0][0].x?(e.style="object-list"+e.style,t=[t.map(function(t){return t.map(function(t){return[t.x,t.y]})})]):void 0===t[0][0][0]?(e.style="flat",t=[[t]]):void 0!==t[0][0][0].x?(e.style="object-listlist"+e.style,t=t.map(function(t){return t.map(function(t){return t.map(function(t){return[t.x,t.y]})})})):void 0===t[0][0][0][0]?(e.style="flat-list",t=[t]):e.style="flat-listlist"+e.style}return e.min=[t[0][0][0][0],t[0][0][0][1]],e.max=[t[0][0][0][0],t[0][0][0][1]],t.forEach(function(t){return t.forEach(function(t){return t.forEach(function(t){t[0]<e.min[0]&&(e.min[0]=t[0]),t[0]>e.max[0]&&(e.max[0]=t[0]),t[1]<e.min[1]&&(e.min[1]=t[1]),t[1]>e.max[1]&&(e.max[1]=t[1])})})}),e.epsilon=1e-10*Math.max(Math.max(e.max[0],e.max[1]),Math.max(Math.abs(e.min[0]),Math.abs(e.min[1]))),t}function p(t,e,n){return e.style.fromPolygonList?e.style.fromPolygonList(t,n):(e.style.includes("object")&&(t=t.map(function(t){return t.map(function(t){return t.map(function(t){return{x:t[0],y:t[1]}})})})),e.style.includes("outer")&&(t=[t.map(function(t){return{outer:t[0],inner:t.slice(1)}})]),e.style.endsWith("listlist")||(t=e.style.endsWith("list")?t[0]:t[0][0]),t)}function m(t,e,i,r){var o=n(5325);t=h[t]||t,e.poly1&&(e=(r=e).poly1,i=r.poly2);var a=(r=r||{}).ingcs||(r.map?r.map.ingcs():e.gcs?e.gcs():e.layer&&e.layer().gcs?e.layer().gcs():e.layer?e.layer().map().ingcs():e.map instanceof u?e.map().ingcs():void 0),s=r.ingcs||(r.map?r.map.ingcs():i.gcs?i.gcs():i.layer&&i.layer().gcs?i.layer().gcs():i.layer?i.layer().map().ingcs():i.map instanceof u?i.map().ingcs():a),m=r.gcs||(r.map?r.map.gcs():e.layer?e.layer().map().gcs():e.map instanceof u?e.map().gcs():void 0),g={},y={};e=f(e,g,r),i=f(i,y,r),g.epsilon=r.epsilon1||g.epsilon,y.epsilon=r.epsilon2||g.epsilon,a&&m&&a!==m&&(e=e.map(function(t){return t.map(function(t){return o.transformCoordinates(a,m,t)})})),s&&m&&s!==m&&(i=i.map(function(t){return t.map(function(t){return o.transformCoordinates(s,m,t)})}));var v=e.map(function(t){return l.segments({regions:t})}),x=i.map(function(t){return l.segments({regions:t})});v=d(r.innerOperation||"union",g.epsilon,v),x=d(r.innerOperation||"union",y.epsilon,x);var _=v;v[0]&&x[0]?(v[0].inverted=!1,x[0].inverted=!1,_=d(t,Math.max(g.epsilon,y.epsilon),[v[0],x[0]])):x[0]&&(_=x);var b,w,M=function(t){var e=[],n=[],i=[],r=[];t.forEach(function(t){return l.polygon(t).regions.forEach(function(t){var e=t.map(function(t){return{x:t[0],y:t[1]}});e.length<3||(r.push([]),n.forEach(function(t,i){c.pointInPolygon(e[0],t)?r[n.length].push(i):c.pointInPolygon(t[0],e)&&r[i].push(n.length)}),i.push(t),n.push(e))})});for(var o=Array(i.length),a=0;a<i.length;){for(var s=0;s<i.length;s+=1)void 0!==o[s]||r[s].length||(o[s]=e.length,e.push([i[s].reverse()]),a+=1);for(var u=0;u<i.length;u+=1)void 0===o[u]&&1===r[u].length&&void 0!==o[r[u][0]]&&(e[o[r[u][0]]].push(i[u]),o[u]=o[r[u][0]],a+=1);for(var h=0;h<i.length;h+=1)r[h]=r[h].filter(function(t){return void 0===o[t]})}return e.length?e:[[]]}(_);return r.correspond&&function(t,e,n,i){var r={},o=[];n.forEach(function(t,e){return t.forEach(function(t){return t.forEach(function(t){var n="_"+t[0]+"_"+t[1];r[n]?-1===r[n].indexOf(e)&&r[n].push(e):r[n]=[e],o.length<=e&&o.push(0),o[e]+=1})})}),["poly1","poly2"].forEach(function(a){var s="poly1"===a?t:e,l="poly1"===a?"exact1":"exact2";i[a]=Array(s.length),i[l]=Array(s.length),s.forEach(function(t,e){var s={},u=0;t.forEach(function(t){return t.forEach(function(t){var e="_"+t[0]+"_"+t[1];r[e]?r[e].forEach(function(t){s[t]=(s[t]||0)+1}):u+=1})}),Object.keys(s).forEach(function(r){s[r]!==o[+r]||u||t.length!==n[+r].length||(i[l][e]||(i[l][e]=[]),i[l][e].push(+r)),s[r]>=2&&(i[a][e]||(i[a][e]=[]),i[a][e].push(+r))})})})}(e,i,M,r.correspond),a&&m&&a!==m&&(M=M.map(function(t){return t.map(function(t){return o.transformCoordinates(m,a,t)})})),p(M,{style:r.style||(b=M,w=g.style,w.fromPolygonList?w:b.length>1?w.includes("outer")?w+(w.endsWith("list")?"":"-list"):w.endsWith("listlist")?w:w+(w.endsWith("list")?"list":"-listlist"):1===b.length&&b[0].length>1?w.includes("outer")||w.endsWith("list")?w:w+"-list":w)},r)}function g(t){return function(e,n,i){return m(t,e,n,i)}}t.exports={union:g("union"),intersect:g("intersect"),difference:g("difference"),xor:g("xor"),toPolygonList:f,fromPolygonList:p}},208:function(t){var e=function(t,e,n,i,r){var o,a=0;return"boolean"!=typeof e&&(r=i,i=n,n=e,e=void 0),"function"!=typeof i&&(r=i,i=function(){}),function(){var s=this,l=+new Date-a,u=arguments;function c(){a=+new Date,n.apply(s,u)}i.apply(s,u),r&&!o&&c(),o&&clearTimeout(o),void 0===r&&l>t?c():!0!==e&&(o=setTimeout(r?function(){o=void 0}:c,void 0===r?t-l:t))}};t.exports={throttle:e,debounce:function(t,n,i,r){return"boolean"!=typeof n&&(r=i,i=n,n=!1),e(t,!1,i,r=r||function(){},!!n)}}},6858:function(t,e,n){var i=n(4626),r=n(1275),o=n(642),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},r.call(this,t);var e=this,n=this._init;this.featureType="vector",this.origin=function(t){return void 0===t?e.style("origin"):(e.style("origin",t),e.dataTime().modified(),e)},this.delta=function(t){return void 0===t?e.style("delta"):(e.style("delta",t),e.dataTime().modified(),e)},this._init=function(t){n.call(e,t);var i=Object.assign({},{strokeColor:"black",strokeWidth:2,strokeOpacity:1,originStyle:"none",endStyle:"arrow",origin:{x:0,y:0,z:0},delta:o.identityFunction,scale:null},void 0===t.style?{}:t.style);return void 0!==t.origin&&(i.origin=t.origin),e.style(i),e.dataTime().modified(),e}};i(a,r),t.exports=a},4081:function(t){t.exports="0.0.0-semantically-released"},6552:function(t,e,n){n(698).GL={ACTIVE_ATTRIBUTES:35721,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALPHA:6406,ALPHA_BITS:3413,ALWAYS:519,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATTACHED_SHADERS:35717,BACK:1029,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BROWSER_DEFAULT_WEBGL:37444,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_BUFFER_BIT:16384,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,COMPILE_STATUS:35713,COMPRESSED_TEXTURE_FORMATS:34467,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_LOST_WEBGL:37442,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH_ATTACHMENT:36096,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DONT_CARE:4352,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,FASTEST:4353,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GREATER:516,GREEN_BITS:3411,HIGH_FLOAT:36338,HIGH_INT:36341,INCR:7682,INCR_WRAP:34055,INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE_ALPHA:6410,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_RENDERBUFFER_SIZE:34024,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIRRORED_REPEAT:33648,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,RED_BITS:3410,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,REPEAT:10497,REPLACE:7681,RGB:6407,RGB565:36194,RGB5_A1:32855,RGBA:6408,RGBA4:32854,SAMPLER_2D:35678,SAMPLER_CUBE:35680,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_CLEAR_VALUE:2961,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE2:33986,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE3:33987,TEXTURE30:34014,TEXTURE31:34015,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE_2D:3553,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,UNPACK_ALIGNMENT:3317,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VIEWPORT:2978,ZERO:0}},10:function(t,e,n){var i=n(698),r=n(4626),o=n(1982),a=n(3503);i.actor=function(){"use strict";if(!(this instanceof i.actor))return new i.actor;i.node.call(this);var t=this,e=a.create(),n=i.boundingObject.ReferenceFrame.Relative,r=null;return this.matrix=function(){return e},this.referenceFrame=function(){return n},this.mapper=function(){return r},this.setMapper=function(e){e!==r&&(r=e,t.boundsModified())},this.computeBounds=function(){if(null!=r){var n,i,a,s,l=t.computeBoundsTimestamp();(t.boundsDirtyTimestamp().getMTime()>l.getMTime()||r.boundsDirtyTimestamp().getMTime()>l.getMTime())&&(r.computeBounds(),i=[(n=r.bounds())[0],n[2],n[4]],a=[n[1],n[3],n[5]],o.transformMat4(i,i,e),o.transformMat4(a,a,e),s=[i[0]>a[0]?a[0]:i[0],i[0]>a[0]?i[0]:a[0],i[1]>a[1]?a[1]:i[1],i[1]>a[1]?i[1]:a[1],i[2]>a[2]?a[2]:i[2],i[2]>a[2]?i[2]:a[2]],t.setBounds(s[0],s[1],s[2],s[3],s[4],s[5]),l.modified())}else t.resetBounds()},t},r(i.actor,i.node)},8576:function(t,e,n){var i=n(698),r=n(4626);i.blendFunction=function(t,e){"use strict";if(!(this instanceof i.blendFunction))return new i.blendFunction(t,e);var n=t,r=e;return this.apply=function(t){t.m_context.blendFuncSeparate(n,r,i.GL.ONE,i.GL.ONE_MINUS_SRC_ALPHA)},this},i.blend=function(){"use strict";if(!(this instanceof i.blend))return new i.blend;i.materialAttribute.call(this,i.materialAttributeType.Blend);var t=!1,e=i.blendFunction(i.GL.SRC_ALPHA,i.GL.ONE_MINUS_SRC_ALPHA);return this.bind=function(n){return t=n.m_context.isEnabled(i.GL.BLEND),this.enabled()?(n.m_context.enable(i.GL.BLEND),e.apply(n)):n.m_context.disable(i.GL.BLEND),!0},this.undoBind=function(e){return t?e.m_context.enable(i.GL.BLEND):e.m_context.disable(i.GL.BLEND),!0},this},r(i.blend,i.materialAttribute)},3556:function(t,e,n){var i=n(698),r=n(4626),o=n(77);i.boundingObject=function(){"use strict";if(!(this instanceof i.boundingObject))return new i.boundingObject;i.object.call(this);var t=[0,0,0,0,0,0],e=o(),n=o();return e.modified(),n.modified(),this.bounds=function(){return t},this.hasValidBounds=function(t){return t[0]!==Number.MAX_VALUE&&t[1]!==-Number.MAX_VALUE&&t[2]!==Number.MAX_VALUE&&t[3]!==-Number.MAX_VALUE&&t[4]!==Number.MAX_VALUE&&t[5]!==-Number.MAX_VALUE},this.setBounds=function(n,i,r,o,a,s){if(this.hasValidBounds([n,i,r,o,a,s]))return t[0]=n,t[1]=i,t[2]=r,t[3]=o,t[4]=a,t[5]=s,this.modified(),e.modified(),!0},this.resetBounds=function(){t[0]=Number.MAX_VALUE,t[1]=-Number.MAX_VALUE,t[2]=Number.MAX_VALUE,t[3]=-Number.MAX_VALUE,t[4]=Number.MAX_VALUE,t[5]=-Number.MAX_VALUE,this.modified()},this.computeBounds=function(){},this.computeBoundsTimestamp=function(){return e},this.boundsDirtyTimestamp=function(){return n},this.resetBounds(),this},i.boundingObject.ReferenceFrame={Relative:0,Absolute:1},r(i.boundingObject,i.object)},4580:function(t,e,n){var i=n(698),r=n(4626),o=n(77),a=n(1982),s=n(4663),l=n(3503);i.camera=function(t){"use strict";if(!(this instanceof i.camera))return new i.camera(t);i.groupNode.call(this),t=t||{};var e=30*Math.PI/180,n=s.fromValues(0,0,1,1),r=s.fromValues(0,0,0,1),u=s.fromValues(0,1,0,0),c=1,h=s.fromValues(0,0,-1,0),d=l.create(),f=l.create(),p=o(),m=o(),g=-1,y=1,v=1,x=-1,_={zoom:1,tilesize:256},b=!1,w=[0,0,0,0],M=i.GL.COLOR_BUFFER_BIT|i.GL.DEPTH_BUFFER_BIT;return void 0!==t.parallelProjection&&(b=!!t.parallelProjection),this.setViewAspect=function(t){c=t,this.modified()},this.parallelExtents=function(){return _},this.setParallelExtents=function(t){var e,n,i=["width","height","zoom","tilesize"],r=!1;for(e=0;e<i.length;e+=1)void 0!==t[n=i[e]]&&t[n]!==_[n]&&(_[n]=t[n],r=!0);if(r&&_.width&&_.height&&void 0!==_.zoom&&_.tilesize){var o=this.unitsPerPixel(_.zoom,_.tilesize);y=o*_.width/2,g=-y,v=o*_.height/2,x=-v,this.modified()}},this.unitsPerPixel=function(t,e){return e=e||256,360*Math.pow(2,-t)/e},this.viewMatrix=function(){return this.computeViewMatrix()},this.setViewMatrix=function(t,e){e?d=t.slice():l.copy(d,t),p.modified()},this.projectionMatrix=function(){return this.computeProjectionMatrix()},this.setProjectionMatrix=function(t){l.copy(f,t),m.modified()},this.clearMask=function(){return M},this.clearColor=function(){return w},this.clearDepth=function(){return 1},this.computeDirectionOfProjection=function(){a.subtract(h,r,n),a.normalize(h,h),this.modified()},this.computeViewMatrix=function(){return p.getMTime()<this.getMTime()&&(l.lookAt(d,n,r,u),p.modified()),d},this.computeProjectionMatrix=function(){return m.getMTime()<this.getMTime()&&(b?l.ortho(f,g,y,x,v,.01,1e4):l.perspective(f,e,c,.01,1e4),m.modified()),f},this.computeDirectionOfProjection(),this},r(i.camera,i.groupNode)},7695:function(t,e,n){var i=n(698);i.data=function(){"use strict";if(!(this instanceof i.data))return new i.data;this.type=function(){}},i.data.raster=0,i.data.point=1,i.data.lineString=2,i.data.polygon=3,i.data.geometry=10},4831:function(t,e,n){var i=n(698);i.event={},i.event.keyPress="vgl.event.keyPress",i.event.mousePress="vgl.event.mousePress",i.event.mouseRelease="vgl.event.mouseRelease",i.event.contextMenu="vgl.event.contextMenu",i.event.configure="vgl.event.configure",i.event.enable="vgl.event.enable",i.event.mouseWheel="vgl.event.mouseWheel",i.event.keyRelease="vgl.event.keyRelease",i.event.middleButtonPress="vgl.event.middleButtonPress",i.event.startInteraction="vgl.event.startInteraction",i.event.enter="vgl.event.enter",i.event.rightButtonPress="vgl.event.rightButtonPress",i.event.middleButtonRelease="vgl.event.middleButtonRelease",i.event.char="vgl.event.char",i.event.disable="vgl.event.disable",i.event.endInteraction="vgl.event.endInteraction",i.event.mouseMove="vgl.event.mouseMove",i.event.mouseOut="vgl.event.mouseOut",i.event.expose="vgl.event.expose",i.event.timer="vgl.event.timer",i.event.leftButtonPress="vgl.event.leftButtonPress",i.event.leave="vgl.event.leave",i.event.rightButtonRelease="vgl.event.rightButtonRelease",i.event.leftButtonRelease="vgl.event.leftButtonRelease",i.event.click="vgl.event.click",i.event.dblClick="vgl.event.dblClick"},7327:function(t,e,n){var i=n(698),r=n(4626),o=n(77);i.primitive=function(){"use strict";if(!(this instanceof i.primitive))return new i.primitive;var t=0,e=0,n=null;return this.indices=function(){return n},this.numberOfIndices=function(){return null===n?0:n.length},this.primitiveType=function(){return t},this.setPrimitiveType=function(e){t=e},this.indicesValueType=function(){return e},this.setIndicesValueType=function(t){e=t},this.setIndices=function(t){n=new Uint16Array(t)},this},i.triangles=function(){"use strict";return this instanceof i.triangles?(i.primitive.call(this),this.setPrimitiveType(i.GL.TRIANGLES),this.setIndicesValueType(i.GL.UNSIGNED_SHORT),this):new i.triangles},r(i.triangles,i.primitive),i.points=function(){"use strict";return this instanceof i.points?(i.primitive.call(this),this.setPrimitiveType(i.GL.POINTS),this.setIndicesValueType(i.GL.UNSIGNED_SHORT),this):new i.points},r(i.points,i.primitive),i.sourceData=function(t){"use strict";if(!(this instanceof i.sourceData))return new i.sourceData(t);var e={},n=[],r=(t=t||{}).name||"Source "+(new Date).toISOString(),o=function(){this.m_numberOfComponents=0,this.m_dataType=0,this.m_dataTypeSize=0,this.m_normalized=!1,this.m_stride=0,this.m_offset=0};return this.data=function(){return n},this.getData=function(){return this.data()},this.dataToFloat32Array=function(){return n instanceof Float32Array||(n=new Float32Array(n)),n},this.setData=function(t){t instanceof Array||t instanceof Float32Array?n=t instanceof Float32Array?t:t.slice(0):console.log("[error] Requires array")},this.addAttribute=function(t,n,i,r,a,s,l){if(!e.hasOwnProperty(t)){var u=new o;u.m_dataType=n,u.m_dataTypeSize=i,u.m_offset=r,u.m_stride=a,u.m_numberOfComponents=s,u.m_normalized=l,e[t]=u}},this.hasKey=function(t){return e.hasOwnProperty(t)},this.keys=function(){return Object.keys(e)},this.attributeNumberOfComponents=function(t){return e.hasOwnProperty(t)?e[t].m_numberOfComponents:0},this.normalized=function(t){return!!e.hasOwnProperty(t)&&e[t].m_normalized},this.attributeDataType=function(t){if(e.hasOwnProperty(t))return e[t].m_dataType},this.attributeOffset=function(t){return e.hasOwnProperty(t)?e[t].m_offset:0},this.attributeStride=function(t){return e.hasOwnProperty(t)?e[t].m_stride:0},this.pushBack=function(t){},this.insert=function(t){var e;if(!n.length&&t.length&&t instanceof Float32Array)n=t;else if(n.slice||!n.length&&t.slice||(n=Array.prototype.slice.call(n)),t.length)if(!n.length&&t.slice)n=t.slice(0);else for(e=0;e<t.length;e+=1)n[n.length]=t[e];else n[n.length]=t},this.name=function(){return r},this},i.sourceDataAnyfv=function(t,e,n){"use strict";return this instanceof i.sourceDataAnyfv?(i.sourceData.call(this,n),this.addAttribute(e,i.GL.FLOAT,4,0,4*t,t,!1),this.pushBack=function(t){this.insert(t)},this):new i.sourceDataAnyfv(t,e,n)},r(i.sourceDataAnyfv,i.sourceData),i.sourceDataP3fv=function(t){"use strict";return this instanceof i.sourceDataP3fv?(i.sourceData.call(this,t),this.addAttribute(i.vertexAttributeKeys.Position,i.GL.FLOAT,4,0,12,3,!1),this.pushBack=function(t){this.insert(t)},this):new i.sourceDataP3fv(t)},r(i.sourceDataP3fv,i.sourceData),i.sourceDataT2fv=function(t){"use strict";return this instanceof i.sourceDataT2fv?(i.sourceData.call(this,t),this.addAttribute(i.vertexAttributeKeys.TextureCoordinate,i.GL.FLOAT,4,0,8,2,!1),this.pushBack=function(t){this.insert(t)},this):new i.sourceDataT2fv(t)},r(i.sourceDataT2fv,i.sourceData),i.geometryData=function(){"use strict";if(!(this instanceof i.geometryData))return new i.geometryData;i.data.call(this);var t=[],e=[],n=[0,0,0,0,0,0],r=o(),a=o();return this.type=function(){return i.data.geometry},this.name=function(){return""},this.addSource=function(t){return-1===e.indexOf(t)&&(e.push(t),t.hasKey(i.vertexAttributeKeys.Position)&&a.modified(),!0)},this.source=function(t){return t<e.length?e[t]:0},this.sourceByName=function(t){for(var n=0;n<e.length;n+=1)if(e[n].name()===t)return e[n];return 0},this.numberOfSources=function(){return e.length},this.sourceData=function(t){var n;for(n=0;n<e.length;n+=1)if(e[n].hasKey(t))return e[n];return null},this.addPrimitive=function(e){return t.push(e),!0},this.primitive=function(e){return e<t.length?t[e]:null},this.numberOfPrimitives=function(){return t.length},this.bounds=function(){return a.getMTime()>r.getMTime()&&this.computeBounds(),n},this.boundsDirty=function(t){return t&&a.modified(),a.getMTime()>r.getMTime()},this.setBounds=function(t,e,i,o,a,s){return n[0]=t,n[1]=e,n[2]=i,n[3]=o,n[4]=a,n[5]=s,r.modified(),!0},this},r(i.geometryData,i.data)},29:function(t,e,n){var i=n(698),r=n(4626);i.graphicsObject=function(t){"use strict";if(!(this instanceof i.graphicsObject))return new i.graphicsObject;i.object.call(this);return this._setup=function(t){return!1},this._cleanup=function(t){return!1},this},r(i.graphicsObject,i.object)},7616:function(t,e,n){var i=n(698),r=n(4626);i.groupNode=function(){"use strict";if(!(this instanceof i.groupNode))return new i.groupNode;i.node.call(this);var t=[];return this.addChild=function(e){return e instanceof i.node&&(-1===t.indexOf(e)&&(e.setParent(this),t.push(e),this.boundsDirtyTimestamp().modified(),!0))},this.removeChild=function(e){if(e.parent()===this){var n=t.indexOf(e);if(n>=0)return t.splice(n,1),e.setParent(null),this.boundsDirtyTimestamp().modified(),!0}return!1},this.removeChildren=function(){for(;t.length;)this.removeChild(t[0]);this.modified()},this.children=function(){return t},this.hasChild=function(e){var n=0,i=!1;for(n=0;n<t.length;n+=1)if(t[n]===e){i=!0;break}return i},this},r(i.groupNode,i.node)},1611:function(t,e,n){t.exports=n(698),n(6552),n(9156),n(3556),n(9838),n(4831),n(29),n(4970),n(1232),n(2971),n(10),n(7616),n(4580),n(8576),n(7695),n(7327),n(5763),n(5796),n(5794),n(796),n(8888),n(3471),n(4933),n(7205)},9838:function(t,e,n){var i=n(698),r=n(4626),o=n(77);i.mapper=function(t){"use strict";if(!(this instanceof i.mapper))return new i.mapper(t);i.boundingObject.call(this);var e=[0,1,1],n=null,r=[],a={},s=void 0!==(t=t||{}).dynamicDraw&&t.dynamicDraw,l=o(),u=null,c=this;function h(t){a={},r=[]}function d(t){c.deleteVertexBufferObjects(t),h(),function(t){if(n){t&&(u=t.m_context);var e,o,c,h,d,f,p,m=n.numberOfSources(),g=null;for(e=0;e<m;e+=1){for(g=u.createBuffer(),u.bindBuffer(i.GL.ARRAY_BUFFER,g),(p=n.source(e).data())instanceof Float32Array||(p=new Float32Array(p)),u.bufferData(i.GL.ARRAY_BUFFER,p,s?i.GL.DYNAMIC_DRAW:i.GL.STATIC_DRAW),h=n.source(e).keys(),d=[],o=0;o<h.length;o+=1)d.push(h[o]);a[e]=d,r[e]=g}for(f=n.numberOfPrimitives(),c=0;c<f;c+=1)g=u.createBuffer(),u.bindBuffer(i.GL.ARRAY_BUFFER,g),u.bufferData(i.GL.ARRAY_BUFFER,n.primitive(c).indices(),i.GL.STATIC_DRAW),r[e]=g,e+=1;l.modified()}}(t)}return this.deleteVertexBufferObjects=function(t){var e,n=u;if(t&&(n=t.m_context),n)for(e=0;e<r.length;e+=1)n.deleteBuffer(r[e])},this._cleanup=function(t){c.deleteVertexBufferObjects(t),h(t),c.modified()},this.computeBounds=function(){if(null!=n){var t=this.computeBoundsTimestamp(),e=null;this.boundsDirtyTimestamp().getMTime()>t.getMTime()&&(e=n.bounds(),this.setBounds(e[0],e[1],e[2],e[3],e[4],e[5]),t.modified())}else this.resetBounds()},this.color=function(){return e},this.geometryData=function(){return n},this.setGeometryData=function(t){n!==t&&(n=t,this.modified(),this.boundsDirtyTimestamp().modified())},this.updateSourceBuffer=function(t,e,o){if(o&&(u=o.m_context),!u)return!1;for(var a=-1,s=0;s<n.numberOfSources();s+=1)if(n.source(s).name()===t){a=s;break}return!(a<0||a>=r.length)&&(e||(e=n.source(s).dataToFloat32Array()),u.bindBuffer(i.GL.ARRAY_BUFFER,r[a]),e instanceof Float32Array?u.bufferSubData(i.GL.ARRAY_BUFFER,0,e):u.bufferSubData(i.GL.ARRAY_BUFFER,0,new Float32Array(e)),!0)},this.getSourceBuffer=function(t){var e=n.sourceByName(t);return e?e.dataToFloat32Array():new Float32Array},this.render=function(t,e){(this.getMTime()>l.getMTime()||t.m_contextChanged)&&d(t),(u=t.m_context).vertexAttrib3fv(i.vertexAttributeKeys.Color,this.color());var o,s,c=0,h=0,f=null;for(o in a)if(a.hasOwnProperty(o)){for(u.bindBuffer(i.GL.ARRAY_BUFFER,r[c]),h=0;h<a[o].length;h+=1)t.m_material.bindVertexData(t,a[o][h]);c+=1}for(s=n.numberOfPrimitives(),h=0;h<s;h+=1,c+=1)if((f=n.primitive(h)).numberOfIndices()){switch(u.bindBuffer(i.GL.ARRAY_BUFFER,r[c]),f.primitiveType()){case i.GL.POINTS:u.drawArrays(i.GL.POINTS,0,f.numberOfIndices());break;case i.GL.LINES:u.drawArrays(i.GL.LINES,0,f.numberOfIndices());break;case i.GL.LINE_STRIP:u.drawArrays(i.GL.LINE_STRIP,0,f.numberOfIndices());break;case i.GL.TRIANGLES:u.drawArrays(i.GL.TRIANGLES,0,f.numberOfIndices());break;case i.GL.TRIANGLE_STRIP:u.drawArrays(i.GL.TRIANGLE_STRIP,0,f.numberOfIndices())}u.bindBuffer(i.GL.ARRAY_BUFFER,null)}e||this.undoBindVertexData(t)},this.undoBindVertexData=function(t){var e,n;for(e in a)if(a.hasOwnProperty(e))for(n=0;n<a[e].length;n+=1)t.m_material.undoBindVertexData(t,a[e][n])},this},r(i.mapper,i.boundingObject)},4970:function(t,e,n){var i=n(698),r=n(4626);i.material=function(){"use strict";if(!(this instanceof i.material))return new i.material;i.graphicsObject.call(this);var t=this,e=new i.shaderProgram,n=100,r={},o={};return this.binNumber=function(){return n},this.setBinNumber=function(e){n=e,t.modified()},this.exists=function(t){return t.type()===i.materialAttributeType.Texture?r.hasOwnProperty(t.textureUnit()):o.hasOwnProperty(t.type())},this.addAttribute=function(n){return!t.exists(n)&&(n.type()===i.materialAttributeType.Texture?(r[n.textureUnit()]=n,t.modified(),!0):(n.type()===i.materialAttributeType.ShaderProgram&&(e=n),o[n.type()]=n,t.modified(),!0))},this.shaderProgram=function(){return e},this._cleanup=function(n){for(var i in o)o.hasOwnProperty(i)&&o[i]._cleanup(n);for(i in r)r.hasOwnProperty(i)&&r[i]._cleanup(n);e._cleanup(n),t.modified()},this.bind=function(t){var n=null;for(n in e.bind(t),o)o.hasOwnProperty(n)&&o[n]!==e&&o[n].bind(t);for(n in r)r.hasOwnProperty(n)&&r[n].bind(t)},this.undoBind=function(t){var e=null;for(e in o)o.hasOwnProperty(e)&&o[e].undoBind(t);for(e in r)r.hasOwnProperty(e)&&r[e].undoBind(t)},this.bindVertexData=function(t,e){var n=null;for(n in o)o.hasOwnProperty(n)&&o[n].bindVertexData(t,e)},this.undoBindVertexData=function(t,e){var n=null;for(n in o)o.hasOwnProperty(n)&&o[n].undoBindVertexData(t,e)},t},i.material.RenderBin={Base:0,Default:100,Opaque:100,Transparent:1e3,Overlay:1e4},r(i.material,i.graphicsObject)},1232:function(t,e,n){var i=n(698),r=n(4626);i.materialAttributeType={Undefined:0,ShaderProgram:1,Texture:2,Blend:3,Depth:4},i.materialAttribute=function(t){"use strict";if(!(this instanceof i.materialAttribute))return new i.materialAttribute(t);i.graphicsObject.call(this);var e=t;return this.type=function(){return e},this.enabled=function(){return true},this.bindVertexData=function(t,e){return!1},this.undoBindVertexData=function(t,e){return!1},this},r(i.materialAttribute,i.graphicsObject)},2971:function(t,e,n){var i=n(698),r=n(4626);i.node=function(){"use strict";if(!(this instanceof i.node))return new i.node;i.boundingObject.call(this);var t=null,e=null,n=!0;return this.material=function(){return e},this.setMaterial=function(t){return t!==e&&(e=t,this.modified(),!0)},this.visible=function(){return n},this.setVisible=function(t){return t!==n&&(n=t,this.modified(),!0)},this.parent=function(){return t},this.setParent=function(e){return e!==t&&(null!==t&&t.removeChild(this),t=e,this.modified(),!0)},this.boundsModified=function(){this.boundsDirtyTimestamp().modified(),null!==t&&t.boundsModified()},this},r(i.node,i.boundingObject)},9156:function(t,e,n){var i=n(698),r=n(77);i.object=function(){"use strict";if(!(this instanceof i.object))return new i.object;var t=r();return t.modified(),this.modified=function(){t.modified()},this.getMTime=function(){return t.getMTime()},this}},5763:function(t,e,n){var i=n(698),r=n(4626);i.renderWindow=function(t){"use strict";if(!(this instanceof i.renderWindow))return new i.renderWindow(t);i.graphicsObject.call(this);var e=this,n=0,r=0,o=400,a=400,s=t,l=null,u=[],c=null;return this.windowSize=function(){return[o,a]},this.windowPosition=function(){return[n,r]},this.renderers=function(){return u},this.activeRenderer=function(){return l},this.addRenderer=function(t){return!1===e.hasRenderer(t)&&(u.push(t),t.setRenderWindow(e),null===l&&(l=t),0!==t.layer()&&t.camera().setClearMask(i.GL.DepthBufferBit),e.modified(),!0)},this.hasRenderer=function(t){var e;for(e=0;e<u.length;e+=1)if(t===u[e])return!0;return!1},this.positionAndResize=function(t,i,s,l){var c;for(n=t,r=i,o=s,a=l,c=0;c<u.length;c+=1)u[c].positionAndResize(n,r,o,a);e.modified()},this._setup=function(t){c=null;try{var e;for(c=s.getContext("webgl")||s.getContext("experimental-webgl"),e=0;e<u.length;e+=1)(u[e].width()>o||0===u[e].width()||u[e].height()>a||0===u[e].height())&&u[e].resize(n,r,o,a);return!0}catch(t){}return c||console.warn("[ERROR] Unable to initialize WebGL. Your browser may not support it."),!1},this.context=function(){return c},this._cleanup=function(t){var n;for(n=0;n<u.length;n+=1)u[n]._cleanup(t);i.clearCachedShaders(t?t.m_context:null),e.modified()},this.render=function(){var t;for(u.sort(function(t,e){return t.layer()-e.layer()}),t=0;t<u.length;t+=1)u[t].render()},e},r(i.renderWindow,i.graphicsObject)},5796:function(t,e,n){var i=n(698),r=n(4626),o=n(3503);i.renderState=function(){"use strict";this.m_context=null,this.m_modelViewMatrix=o.create(),this.m_normalMatrix=o.create(),this.m_projectionMatrix=null,this.m_material=null,this.m_mapper=null},i.renderer=function(t){"use strict";if(!(this instanceof i.renderer))return new i.renderer(t);i.graphicsObject.call(this),t=t||{};var e=this;return e.m_renderWindow=null,e.m_contextChanged=!1,e.m_sceneRoot=new i.groupNode,e.m_camera=new i.camera(t),e.m_nearClippingPlaneTolerance=null,e.m_x=0,e.m_y=0,e.m_width=0,e.m_height=0,e.m_resizable=!0,e.m_resetScene=!0,e.m_layer=0,e.m_renderPasses=null,e.m_resetClippingRange=!0,e.m_depthBits=null,e.m_camera.addChild(e.m_sceneRoot),this.width=function(){return e.m_width},this.height=function(){return e.m_height},this.layer=function(){return e.m_layer},this.setLayer=function(t){e.m_layer=t,e.modified()},this.renderWindow=function(){return e.m_renderWindow},this.setRenderWindow=function(t){e.m_renderWindow!==t&&(e.m_renderWindow&&e.m_renderWindow.removeRenderer(this),e.m_renderWindow=t,e.m_contextChanged=!0,e.modified())},this.camera=function(){return e.m_camera},this.render=function(){var t,n,r,a=null,s=[],l=o.create(),u=null;if((n=new i.renderState).m_renderer=e,n.m_context=e.renderWindow().context(),e.m_depthBits&&!e.m_contextChanged||(e.m_depthBits=n.m_context.getParameter(i.GL.DEPTH_BITS)),n.m_contextChanged=e.m_contextChanged,e.m_renderPasses)for(t=0;t<e.m_renderPasses.length;t+=1){if(e.m_renderPasses[t].render(n))return void e.m_renderPasses[t].remove(n);e.m_renderPasses[t].remove(n)}for(n.m_context.enable(i.GL.DEPTH_TEST),n.m_context.depthFunc(i.GL.LEQUAL),e.m_camera.clearMask()&i.GL.COLOR_BUFFER_BIT&&(u=e.m_camera.clearColor(),n.m_context.clearColor(u[0],u[1],u[2],u[3])),e.m_camera.clearMask()&i.GL.DEPTH_BUFFER_BIT&&n.m_context.clearDepth(e.m_camera.clearDepth()),n.m_context.clear(e.m_camera.clearMask()),n.m_context.viewport(e.m_x,e.m_y,e.m_width,e.m_height),(r=e.m_sceneRoot.children()).length>0&&e.m_resetScene&&(e.m_resetScene=!1),t=0;t<r.length;t+=1)(a=r[t]).computeBounds(),a.visible()&&a.material().binNumber()>=0&&s.push([a.material().binNumber(),a]);for(s.sort(function(t,e){return t[0]-e[0]}),t=0;t<s.length;t+=1){if((a=s[t][1]).referenceFrame()===i.boundingObject.ReferenceFrame.Relative){var c=e.m_camera.viewMatrix();c instanceof Array&&(n.m_modelViewMatrix=new Array(16)),o.multiply(n.m_modelViewMatrix,c,a.matrix()),n.m_projectionMatrix=e.m_camera.projectionMatrix(),n.m_modelViewAlignment=e.m_camera.viewAlignment()}else n.m_modelViewMatrix=a.matrix(),n.m_modelViewAlignment=null,n.m_projectionMatrix=o.create(),o.ortho(n.m_projectionMatrix,0,e.m_width,0,e.m_height,-1,1);o.invert(l,n.m_modelViewMatrix),o.transpose(n.m_normalMatrix,l),n.m_material=a.material(),n.m_mapper=a.mapper(),n.m_material.bind(n),n.m_mapper.render(n),n.m_material.undoBind(n)}n.m_context.finish(),e.m_contextChanged=!1,e.m_lastRenderState=n},this.resize=function(t,n){t&&n&&e.positionAndResize(e.m_x,e.m_y,t,n)},this.positionAndResize=function(t,n,i,r){var o;if(t<0||n<0||i<=0||r<=0)console.log("[error] Invalid position and resize values",t,n,i,r);else if(e.m_resizable&&(e.m_width=i,e.m_height=r,e.m_camera.setViewAspect(i/r),e.m_camera.setParallelExtents({width:i,height:r}),e.modified()),e.m_renderPasses)for(o=0;o<e.m_renderPasses.length;o+=1)e.m_renderPasses[o].resize(i,r),e.m_renderPasses[o].renderer().positionAndResize(t,n,i,r)},this.addActor=function(t){return t instanceof i.actor&&(e.m_sceneRoot.addChild(t),e.modified(),!0)},this.hasActor=function(t){return e.m_sceneRoot.hasChild(t)},this.removeActor=function(t){return-1!==e.m_sceneRoot.children().indexOf(t)&&(e.m_lastRenderState&&(t.mapper()&&t.mapper()._cleanup(e.m_lastRenderState),t.material()&&t.material()._cleanup(e.m_lastRenderState)),t.modified(),e.m_sceneRoot.removeChild(t),e.modified(),!0)},this.setResetScene=function(t){e.m_resetScene!==t&&(e.m_resetScene=t,e.modified())},this._cleanup=function(t){for(var n=e.m_sceneRoot.children(),i=0;i<n.length;i+=1){var r=n[i];r.material()._cleanup(t),r.mapper()._cleanup(t)}e.m_sceneRoot.removeChildren(),e.modified()},e},r(i.renderer,i.graphicsObject)},5794:function(t,e,n){var i=n(698),r=n(4626),o=n(77);i.shader=function(t){"use strict";if(!(this instanceof i.shader))return new i.shader(t);i.object.call(this);var e=[],n=t,r="";this._getContextEntry=function(t){var n,i,r=t.m_context;for(n=0;n<e.length;n+=1)if(e[n].context===r)return e[n];return i={context:r,compileTimestamp:o()},e.push(i),i},this.removeContext=function(t){var n,i=t.m_context;for(n=0;n<e.length;n+=1)if(e[n].context===i)return void e.splice(n,1)},this.shaderHandle=function(t){return this._getContextEntry(t).shaderHandle},this.setShaderSource=function(t){r=t,this.modified()},this.compile=function(t){var e=this._getContextEntry(t);return this.getMTime()<e.compileTimestamp.getMTime()?e.shaderHandle:(t.m_context.deleteShader(e.shaderHandle),e.shaderHandle=t.m_context.createShader(n),t.m_context.shaderSource(e.shaderHandle,r),t.m_context.compileShader(e.shaderHandle),t.m_context.getShaderParameter(e.shaderHandle,i.GL.COMPILE_STATUS)?(e.compileTimestamp.modified(),e.shaderHandle):(console.log("[ERROR] An error occurred compiling the shaders: "+t.m_context.getShaderInfoLog(e.shaderHandle)),console.log(r),t.m_context.deleteShader(e.shaderHandle),null))},this.attachShader=function(t,e){t.m_context.attachShader(e,this.shaderHandle(t))}},r(i.shader,i.object),function(){"use strict";var t=[];i.getCachedShader=function(e,n,r){for(var o=0;o<t.length;o+=1)if(t[o].type===e&&t[o].context===n&&t[o].source===r)return o&&t.splice(0,0,t.splice(o,1)[0]),t[0].shader;var a=new i.shader(e);return a.setShaderSource(r),t.unshift({type:e,context:n,source:r,shader:a}),t.length>=10&&t.splice(10,t.length-10),a},i.clearCachedShaders=function(e){for(var n=t.length-1;n>=0;n-=1)null!=e&&t[n].context!==e||t.splice(n,1)}}()},796:function(t,e,n){var i=n(698),r=n(4626),o=n(77);i.shaderProgram=function(){"use strict";if(!(this instanceof i.shaderProgram))return new i.shaderProgram;i.materialAttribute.call(this,i.materialAttributeType.ShaderProgram);var t=this,e=0,n=o(),r=o(),a=[],s=[],l={},u={},c={};return this.queryUniformLocation=function(t,n){return t.m_context.getUniformLocation(e,n)},this.queryAttributeLocation=function(t,n){return t.m_context.getAttribLocation(e,n)},this.addShader=function(e){if(a.indexOf(e)>-1)return!1;var n;for(n=a.length-2;n>=0;n-=1)a[n].shaderType()===e.shaderType()&&a.splice(n,1);return a.push(e),t.modified(),!0},this.addUniform=function(e){return!(s.indexOf(e)>-1)&&(s.push(e),t.modified(),!0)},this.addVertexAttribute=function(e,n){l[n]=e,t.modified()},this.uniformLocation=function(t){return u[t]},this.attributeLocation=function(t){return c[t]},this.uniform=function(t){var e;for(e=0;e<s.length;e+=1)if(s[e].name()===t)return s[e];return null},this.updateUniforms=function(t){var e;for(e=0;e<s.length;e+=1)s[e].callGL(t,u[s[e].name()])},this.link=function(t){return t.m_context.linkProgram(e),!!t.m_context.getProgramParameter(e,i.GL.LINK_STATUS)||(console.log("[ERROR] Unable to initialize the shader program."),!1)},this.use=function(t){t.m_context.useProgram(e)},this._setup=function(t){0===e&&(e=t.m_context.createProgram())},this._cleanup=function(e){t.deleteVertexAndFragment(e),t.deleteProgram(e),t.modified()},this.deleteProgram=function(t){e&&t.m_context.deleteProgram(e),e=0},this.deleteVertexAndFragment=function(t){var n;for(n=0;n<a.length;n+=1)a[n].shaderHandle(t)&&t.m_context.detachShader(e,a[n].shaderHandle(t)),t.m_context.deleteShader(a[n].shaderHandle(t)),a[n].removeContext(t)},this.compileAndLink=function(i){var r;if(!(n.getMTime()>=this.getMTime())){for(t._setup(i),r=0;r<a.length;r+=1)a[r].compile(i),a[r].attachShader(i,e);t.bindAttributes(i),t.link(i)||(console.log("[ERROR] Failed to link Program"),t._cleanup(i)),n.modified()}},this.bind=function(e){var n=0;for(r.getMTime()<t.getMTime()?(t.compileAndLink(e),t.use(e),t.bindUniforms(e),r.modified()):t.use(e),n=0;n<s.length;n+=1)s[n].update(e,t);t.updateUniforms(e)},this.undoBind=function(t){t.m_context.useProgram(null)},this.bindVertexData=function(t,e){l.hasOwnProperty(e)&&l[e].bindVertexData(t,e)},this.undoBindVertexData=function(t,e){l.hasOwnProperty(e)&&l[e].undoBindVertexData(t,e)},this.bindUniforms=function(t){var e;for(e=0;e<s.length;e+=1)u[s[e].name()]=this.queryUniformLocation(t,s[e].name())},this.bindAttributes=function(t){var n,i;for(n in l)l.hasOwnProperty(n)&&(i=l[n].name(),t.m_context.bindAttribLocation(e,n,i),c[i]=n)},t},r(i.shaderProgram,i.materialAttribute)},8888:function(t,e,n){var i=n(698),r=n(4626),o=n(77);i.texture=function(){"use strict";if(!(this instanceof i.texture))return new i.texture;i.materialAttribute.call(this,i.materialAttributeType.Texture),this.m_width=0,this.m_height=0,this.m_depth=0,this.m_textureHandle=null,this.m_textureUnit=0,this.m_pixelFormat=i.GL.RGBA,this.m_pixelDataType=i.GL.UNSIGNED_BYTE,this.m_internalFormat=i.GL.RGBA,this.m_nearestPixel=!1,this.m_image=null,this.m_texture=null;var t=o(),e=this;function n(t){if(!(e.m_textureUnit>=0&&e.m_textureUnit<32))throw"[error] Texture unit "+e.m_textureUnit+" is not supported";t.m_context.activeTexture(i.GL.TEXTURE0+e.m_textureUnit)}return this.setup=function(e){n(e),e.m_context.deleteTexture(this.m_textureHandle),this.m_textureHandle=e.m_context.createTexture(),e.m_context.bindTexture(i.GL.TEXTURE_2D,this.m_textureHandle),e.m_context.texParameteri(i.GL.TEXTURE_2D,i.GL.TEXTURE_MIN_FILTER,this.m_nearestPixel?i.GL.NEAREST:i.GL.LINEAR),e.m_context.texParameteri(i.GL.TEXTURE_2D,i.GL.TEXTURE_MAG_FILTER,this.m_nearestPixel?i.GL.NEAREST:i.GL.LINEAR),e.m_context.texParameteri(i.GL.TEXTURE_2D,i.GL.TEXTURE_WRAP_S,i.GL.CLAMP_TO_EDGE),e.m_context.texParameteri(i.GL.TEXTURE_2D,i.GL.TEXTURE_WRAP_T,i.GL.CLAMP_TO_EDGE),null!==this.m_image?(e.m_context.pixelStorei(i.GL.UNPACK_ALIGNMENT,1),e.m_context.pixelStorei(i.GL.UNPACK_FLIP_Y_WEBGL,!0),this.updateDimensions(),this.computeInternalFormatUsingImage(),e.m_context.texImage2D(i.GL.TEXTURE_2D,0,this.m_internalFormat,this.m_pixelFormat,this.m_pixelDataType,this.m_image)):null!==this.m_texture?(e.m_context.pixelStorei(i.GL.UNPACK_ALIGNMENT,1),e.m_context.pixelStorei(i.GL.UNPACK_FLIP_Y_WEBGL,!0),this.updateDimensions(),e.m_context.texImage2D(i.GL.TEXTURE_2D,0,this.m_internalFormat,this.m_texture.width,this.m_texture.height,0,this.m_pixelFormat,this.m_pixelDataType,this.m_texture.data)):e.m_context.texImage2D(i.GL.TEXTURE_2D,0,this.m_internalFormat,this.m_width,this.m_height,0,this.m_pixelFormat,this.m_pixelDataType,null),e.m_context.bindTexture(i.GL.TEXTURE_2D,null),t.modified()},this.bind=function(e){this.getMTime()>t.getMTime()&&this.setup(e),n(e),e.m_context.bindTexture(i.GL.TEXTURE_2D,this.m_textureHandle)},this.undoBind=function(t){t.m_context.bindTexture(i.GL.TEXTURE_2D,null)},this.image=function(){return this.m_image},this.texture=function(){return this.m_texture},this.setImage=function(t){return null!==t&&(this.m_image=t,this.updateDimensions(),this.modified(),!0)},this.setTexture=function(t){return null!==t&&(this.m_texture=t,"Luminance"===t.type?(this.m_internalFormat=i.GL.LUMINANCE,this.m_pixelFormat=i.GL.LUMINANCE):"LuminanceAlpha"===t.type?(this.m_internalFormat=i.GL.LUMINANCE_ALPHA,this.m_pixelFormat=i.GL.LUMINANCE_ALPHA):(this.m_internalFormat=i.GL.RGBA,this.m_pixelFormat=i.GL.RGBA),this.updateDimensions(),this.modified(),!0)},this.nearestPixel=function(){return this.m_nearestPixel},this.setNearestPixel=function(t){return(t=!!t)!==this.m_nearestPixel&&(this.m_nearestPixel=t,this.modified(),!0)},this.textureUnit=function(){return this.m_textureUnit},this.setTextureUnit=function(t){return this.m_textureUnit!==t&&(this.m_textureUnit=t,this.modified(),!0)},this.computeInternalFormatUsingImage=function(){this.m_internalFormat=i.GL.RGBA,this.m_pixelFormat=i.GL.RGBA,this.m_pixelDataType=i.GL.UNSIGNED_BYTE},this.updateDimensions=function(){null!==this.m_image&&(this.m_width=this.m_image.width,this.m_height=this.m_image.height,this.m_depth=0),null!==this.m_texture&&(this.m_width=this.m_texture.width,this.m_height=this.m_texture.height,this.m_depth=0)},this.textureHandle=function(){return this.m_textureHandle},this},r(i.texture,i.materialAttribute),i.lookupTable=function(){"use strict";if(!(this instanceof i.lookupTable))return new i.lookupTable;i.texture.call(this);var t=o();return this.m_colorTable=[.07514311,.468049805,1,1,.247872569,.498782363,1,1,.339526309,.528909511,1,1,.409505078,.558608486,1,1,.468487184,.588057293,1,1,.520796675,.617435078,1,1,.568724526,.646924167,1,1,.613686735,.676713218,1,1,.656658579,.707001303,1,1,.698372844,.738002964,1,1,.739424025,.769954435,1,1,.780330104,.803121429,1,1,.821573924,.837809045,1,1,.863634967,.874374691,1,1,.907017747,.913245283,1,1,.936129275,.938743558,.983038586,1,.943467973,.943498599,.943398095,1,.990146732,.928791426,.917447482,1,1,.88332677,.861943246,1,1,.833985467,.803839606,1,1,.788626485,.750707739,1,1,.746206642,.701389973,1,1,.70590052,.654994046,1,1,.667019783,.610806959,1,1,.6289553,.568237474,1,1,.591130233,.526775617,1,1,.552955184,.485962266,1,1,.513776083,.445364274,1,1,.472800903,.404551679,1,1,.428977855,.363073592,1,1,.380759558,.320428137,1,.961891484,.313155629,.265499262,1,.916482116,.236630659,.209939162,1].map(function(t){return 255*t}),this.setup=function(e){0===this.textureUnit()?e.m_context.activeTexture(i.GL.TEXTURE0):1===this.textureUnit()&&e.m_context.activeTexture(i.GL.TEXTURE1),e.m_context.deleteTexture(this.m_textureHandle),this.m_textureHandle=e.m_context.createTexture(),e.m_context.bindTexture(i.GL.TEXTURE_2D,this.m_textureHandle),e.m_context.texParameteri(i.GL.TEXTURE_2D,i.GL.TEXTURE_MIN_FILTER,i.GL.LINEAR),e.m_context.texParameteri(i.GL.TEXTURE_2D,i.GL.TEXTURE_MAG_FILTER,i.GL.LINEAR),e.m_context.texParameteri(i.GL.TEXTURE_2D,i.GL.TEXTURE_WRAP_S,i.GL.CLAMP_TO_EDGE),e.m_context.texParameteri(i.GL.TEXTURE_2D,i.GL.TEXTURE_WRAP_T,i.GL.CLAMP_TO_EDGE),e.m_context.pixelStorei(i.GL.UNPACK_ALIGNMENT,1),this.m_width=this.m_colorTable.length/4,this.m_height=1,this.m_depth=0,e.m_context.texImage2D(i.GL.TEXTURE_2D,0,i.GL.RGBA,this.m_width,this.m_height,this.m_depth,i.GL.RGBA,i.GL.UNSIGNED_BYTE,new Uint8Array(this.m_colorTable)),e.m_context.bindTexture(i.GL.TEXTURE_2D,null),t.modified()},this.colorTable=function(){return this.m_colorTable},this.setColorTable=function(t){return this.m_colorTable!==t&&(this.m_colorTable=t,this.modified(),!0)},this},r(i.lookupTable,i.texture)},3471:function(t,e,n){var i=n(698),r=n(4626),o=n(3503);i.uniform=function(t,e){"use strict";if(!(this instanceof i.uniform))return new i.uniform(t,e);this.getTypeNumberOfComponents=function(t){switch(t){case i.GL.FLOAT:case i.GL.INT:case i.GL.BOOL:return 1;case i.GL.FLOAT_VEC2:case i.GL.INT_VEC2:case i.GL.BOOL_VEC2:return 2;case i.GL.FLOAT_VEC3:case i.GL.INT_VEC3:case i.GL.BOOL_VEC3:return 3;case i.GL.FLOAT_VEC4:case i.GL.INT_VEC4:case i.GL.BOOL_VEC4:return 4;case i.GL.FLOAT_MAT3:return 9;case i.GL.FLOAT_MAT4:return 16;default:return 0}};var n=t,r=e,o=new Array(this.getTypeNumberOfComponents(n)).fill(0);return this.name=function(){return r},this.set=function(t){var e=0,n=o.length;if(1!==n)for(e=0;e<n;e+=1)o[e]=t[e];else o[0]=t},this.callGL=function(t,e){switch(n){case i.GL.BOOL:case i.GL.INT:t.m_context.uniform1iv(e,o);break;case i.GL.FLOAT:t.m_context.uniform1fv(e,o);break;case i.GL.BOOL_VEC2:case i.GL.INT_VEC2:t.m_context.uniform2iv(e,o);break;case i.GL.FLOAT_VEC2:t.m_context.uniform2fv(e,o);break;case i.GL.BOOL_VEC3:case i.GL.INT_VEC3:t.m_context.uniform3iv(e,o);break;case i.GL.FLOAT_VEC3:t.m_context.uniform3fv(e,o);break;case i.GL.BOOL_VEC4:case i.GL.INT_VEC4:t.m_context.uniform4iv(e,o);break;case i.GL.FLOAT_VEC4:t.m_context.uniform4fv(e,o);break;case i.GL.FLOAT_MAT3:t.m_context.uniformMatrix3fv(e,i.GL.FALSE,o);break;case i.GL.FLOAT_MAT4:t.m_context.uniformMatrix4fv(e,i.GL.FALSE,o)}},this.update=function(t,e){},this},i.modelViewOriginUniform=function(t,e){"use strict";if(!(this instanceof i.modelViewOriginUniform))return new i.modelViewOriginUniform(t,e);t||(t="modelViewMatrix");var n=[(e=e||[0,0,0])[0],e[1],e[2]||0];return i.uniform.call(this,i.GL.FLOAT_MAT4,t),this.set(o.create()),this.setOrigin=function(t){n=[(t=t||[0,0,0])[0],t[1],t[2]||0]},this.update=function(t,e){var i=t.m_modelViewMatrix;if(t.m_modelViewAlignment){var r=t.m_modelViewAlignment;(i=i.slice?i.slice():Array.prototype.slice.call(i))[12]=Math.round(i[12]/r.roundx)*r.roundx+r.dx,i[13]=Math.round(i[13]/r.roundy)*r.roundy+r.dy}i=o.translate(o.create(),i,n),this.set(i)},this},r(i.modelViewOriginUniform,i.uniform),i.projectionUniform=function(t){"use strict";return this instanceof i.projectionUniform?(t||(t="projectionMatrix"),i.uniform.call(this,i.GL.FLOAT_MAT4,t),this.set(o.create()),this.update=function(t,e){this.set(t.m_projectionMatrix)},this):new i.projectionUniform(t)},r(i.projectionUniform,i.uniform),i.floatUniform=function(t,e){"use strict";if(!(this instanceof i.floatUniform))return new i.floatUniform(t,e);t||(t="floatUniform"),e=void 0===e?1:e,i.uniform.call(this,i.GL.FLOAT,t),this.set(e)},r(i.floatUniform,i.uniform)},4933:function(t,e,n){var i=n(698);i.vertexAttributeKeys={Position:0,Normal:1,TextureCoordinate:2,Color:3,Scalar:4,CountAttributeIndex:5},i.vertexAttributeKeysIndexed={Zero:0,One:1,Two:2,Three:3,Four:4,Five:5,Six:6,Seven:7,Eight:8,Nine:9},i.vertexAttribute=function(t){"use strict";if(!(this instanceof i.vertexAttribute))return new i.vertexAttribute(t);var e=t;this.name=function(){return e},this.bindVertexData=function(t,n){var i=t.m_mapper.geometryData().sourceData(n),r=t.m_material.shaderProgram();t.m_context.vertexAttribPointer(r.attributeLocation(e),i.attributeNumberOfComponents(n),i.attributeDataType(n),i.normalized(n),i.attributeStride(n),i.attributeOffset(n)),t.m_context.enableVertexAttribArray(r.attributeLocation(e))},this.undoBindVertexData=function(t,n){var i=t.m_material.shaderProgram();t.m_context.disableVertexAttribArray(i.attributeLocation(e))}}},698:function(t){t.exports={}},7205:function(t,e,n){var i=n(5616),r=n(698),o=n(4626);r.viewer=function(t,e){"use strict";if(!(this instanceof r.viewer))return new r.viewer(t,e);r.object.call(this);var n=t,o=r.renderer(e),a=r.renderWindow(n);return this.canvas=function(){return n},this.renderWindow=function(){return a},this.init=function(){null!==a?a._setup():console.log("[ERROR] No render window attached")},this.exit=function(t){null!==a?a._cleanup(t):console.log("[ERROR] No render window attached")},this.render=function(){a.render()},this.bindEventHandlers=function(){i(n).on("mousedown",this.handleMouseDown),i(n).on("mouseup",this.handleMouseUp),i(n).on("mousemove",this.handleMouseMove),i(n).on("mousewheel",this.handleMouseWheel),i(n).on("contextmenu",this.handleContextMenu)},this.unbindEventHandlers=function(){i(n).off("mousedown",this.handleMouseDown),i(n).off("mouseup",this.handleMouseUp),i(n).off("mousemove",this.handleMouseMove),i(n).off("mousewheel",this.handleMouseWheel),i(n).off("contextmenu",this.handleContextMenu)},this._init=function(){this.bindEventHandlers(),a.addRenderer(o)},this._init(),this},o(r.viewer,r.object)},394:function(t,e,n){t.exports={pointFeature:n(5380),vtkjsRenderer:n(9897)}},7015:function(t,e,n){var i=function(t){"use strict";if(!(this instanceof n(1338)))return new i(t);var e=this,r=this.draw;return this.draw=function(){return e.ready&&(e._update(),e.renderer()._render(),r()),e},this};t.exports=i},5380:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(7541),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},o.call(this,t);var e=n(5325),i=n(7015),r=n(9897).vtkjs,s=r.Rendering.Core.vtkActor,l=r.Common.Core.vtkDataArray,u=r.Rendering.Core.vtkGlyph3DMapper,c=r.Rendering.Core.vtkMapper,h=r.Common.DataModel.vtkPointSet,d=r.Filters.Sources.vtkSphereSource;i.call(this);var f,p,m,g,y,v=this,x=this._init,_=this._exit,b=this._update;return this._createPipeline=function(){p=h.newInstance(),(m=d.newInstance()).setThetaResolution(30),m.setPhiResolution(30);var t=u.newInstance({orient:!1,colorByArrayName:"color",scalarMode:c.ScalarMode.USE_POINT_FIELD_DATA,colorMode:c.ColorMode.DIRECT_SCALARS,scaling:!0,scaleArray:"diam",scaleMode:u.ScaleModes.SCALE_BY_MAGNITUDE});t.setInputData(p,0),t.setInputConnection(m.getOutputPort(),1),(f=s.newInstance()).setMapper(t),f.getProperty().setAmbient(1),v.renderer().contextRenderer().addActor(f)},this._init=function(){x.call(v,t),v.renderer().contextRenderer().setLayer(0),v._createPipeline()},this._build=function(){var t,n,i,r,o,a,s=v.data().length,u=new Array(3*s),c=v.data(),h=v.position(),d=v.style.get("radius"),f=v.style.get("fill"),m=v.style.get("fillColor"),x=v.style.get("fillOpacity"),_=v.layer().map().unitsPerPixel(v.layer().map().zoom());for(y&&y.length===s||(y=new Float32Array(s)),g&&g.length===4*s||(g=new Uint8Array(4*s)),t=n=i=0;t<s;t+=1,n+=3,i+=4)r=h(c[t],t),u[n]=r.x,u[n+1]=r.y,u[n+2]=r.z||0,a=a||u[n+2],y[t]=d(c[t],t)*_*2,o=m(c[t],t),g[i]=255*o.r,g[i+1]=255*o.g,g[i+2]=255*o.b,g[i+3]=f(c[t],t)?255*x(c[t],t):0;if(u=e.transformCoordinates(v.gcs(),v.layer().map().gcs(),u,3),!a&&v.gcs()!==v.layer().map().gcs())for(t=n=0;t<s;t+=1,n+=3)u[n+2]=0;p.getPoints().setData(u,3),p.getPointData().addArray(l.newInstance({name:"color",values:g,numberOfComponents:4})),p.getPointData().addArray(l.newInstance({name:"diam",values:y})),v.buildTime().modified()},this._update=function(){if(b.call(v),v.dataTime().getMTime()>=v.buildTime().getMTime()||v.updateTime().getMTime()<v.getMTime())v._build();else{var t=v.data(),e=v.style.get("radius"),n=v.layer().map().unitsPerPixel(v.layer().map().zoom()),i=p.getPointData().getArray("diam"),r=i.getData().map(function(i,r){return e(t[r],r)*n*2});i.setData(r),p.modified()}v.updateTime().modified()},this._exit=function(){v.renderer().contextRenderer().removeActor(f),_()},v._init(),this};i(a,o);var s={};s[o.capabilities.stroke]=!1,r("vtkjs","point",a,s),t.exports=a},9897:function(t,e,n){var i=n(4626),r=n(1098).registerRenderer,o=n(2274),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},o.call(this,t);var e=n(3503),i=n(6409),r=a.vtkjs.Rendering.Misc.vtkGenericRenderWindow,s=this,l=this._init,u=r.newInstance({background:[0,0,0,0]});u.setContainer(s.layer().node().get(0)),u.getInteractor().unbindEvents(),u.resize();var c=u.getRenderer(),h=u.getRenderWindow();return this.contextRenderer=function(){return c},this.api=function(){return a.apiname},this._init=function(){if(s.initialized())return s;l.call(s);var t=s.layer().map(),e=t.size();return s._resize(0,0,e.width,e.height),t.camera().clipbounds={near:-t.unitsPerPixel(),far:t.unitsPerPixel()},s},this._resize=function(t,e,n,i){return s._setWidthHeight(n,i),u.resize(),s._render(),s},this._render=function(){return s.layer().map().scheduleAnimationFrame(s._renderFrame,!0),s},this._renderFrame=function(){var t,e=s.layer().features();for(t=0;t<e.length;t+=1)e[t].visible()&&e[t]._update();s._updateRendererCamera(),h.render()},this._exit=function(){},this._updateRendererCamera=function(){var t=s.layer().map().camera(),n=t.view,i=t.projectionMatrix,r=e.create();e.copy(r,n);var o=e.create();e.copy(o,i),s.contextRenderer().getActiveCamera().setViewMatrix(r),s.contextRenderer().getActiveCamera().setProjectionMatrix(o)},s.layer().geoOn(i.pan,function(t){s._render()}),s.layer().geoOn(i.parallelprojection,function(t){}),this};a.apiname="vtkjs",i(a,o),r("vtkjs",a),a.supported=function(){delete a.vtkjs;try{a.vtkjs=n(4436)}catch(t){}return a.vtkjs&&a.vtkjs.Rendering||!window.vtk||!window.vtk.Rendering||(a.vtkjs=window.vtk),a.vtkjs&&a.vtkjs.Rendering||(a.vtkjs=void 0),void 0!==a.vtkjs},a.fallback=function(){return null},a.supported(),t.exports=a},3559:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(3561),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},o.call(this,t);var e=this,n=null,i=this._exit,r=this.draw,s=this._update;return this.draw=function(){if(e._update(),n)for(var t=0;t<n.length;t+=1)n[t].draw();return r(),e},this._build=function(){return e.buildTime().modified(),n=e.createChoropleth()},this._update=function(){s.call(e),(e.dataTime().timestamp()>=e.buildTime().timestamp()||e.updateTime().timestamp()<=e.timestamp())&&(e._wipePolygons(),e._build()),e.updateTime().modified()},this._wipePolygons=function(){n&&n.map(function(t){return t._exit()}),n=null},this._exit=function(){e._wipePolygons(),i()},this._init(t),this};i(a,o),r("webgl","choropleth",a),t.exports=a},6791:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(6761),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},o.call(this,t),n(2778).call(this,t);var e=this;return this._build=function(){e.actors()[0]&&e.renderer().contextRenderer().removeActor(e.actors()[0]),e.createGLMeshColored(e._createContours()),e.renderer().contextRenderer().addActor(e.actors()[0]),e.buildTime().modified()},this._init(t),this};i(a,o),r("webgl","contour",a),t.exports=a},8257:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(2499),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},o.call(this,t),n(2778).call(this,t);var e=this;return this._build=function(){e.actors()[0]&&e.renderer().contextRenderer().removeActor(e.actors()[0]),e.createGLMeshColored(e._createGrids()),e.renderer().contextRenderer().addActor(e.actors()[0]),e.buildTime().modified()},this._init(t),this};i(a,o),r("webgl","grid",a),t.exports=a},8635:function(t,e,n){t.exports={choroplethFeature:n(3559),contourFeature:n(6791),gridFeature:n(8257),isolineFeature:n(960),layer:n(6982),lineFeature:n(5795),lookupTable2D:n(411),markerFeature:n(3403),meshColored:n(2778),pixelmapFeature:n(7759),pointFeature:n(5407),polygonFeature:n(8511),quadFeature:n(9304),tileLayer:n(1474),trackFeature:n(536),webglRenderer:n(7945)}},960:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(2586),a=function(t){"use strict";return this instanceof a?(t=t||{},o.call(this,t),n(4084).call(this),this._init(t),this):new a(t)};i(a,o),r("webgl","isoline",a),t.exports=a},6982:function(t,e,n){var i=function(){"use strict";var t=n(1098).createRenderer,e=n(6409),i=n(7945),r=n(9264),o=this,a=this._init,s=this.opacity,l=this.visible,u=this.zIndex;this.opacity=function(t){var e=s.apply(o,arguments);return void 0!==t&&o.initialized()&&o.map()._updateAutoshareRenderers(),e},this.visible=function(t){if(void 0===t)return l();var e=l(),n=l.apply(o,arguments);return e!==t&&o.initialized()&&(o.map().scheduleAnimationFrame(o._update,!0),o.renderer()._render()),n},this.zIndex=function(t,e){var n=u.apply(o,arguments);return void 0!==t&&o.initialized()&&(o.map().scheduleAnimationFrame(o._update,!0),o.renderer()._render(),o.map()._updateAutoshareRenderers()),n},this.switchRenderer=function(t,e){if(t instanceof i&&t!==o.renderer()){var n=o.renderer(),r=[],a=[];o.map().listSceneObjects([o]).forEach(function(t){t._cleanup&&(t._cleanup(),t._update&&a.push(t)),t.actors&&(r=r.concat(t.actors()))}),r.forEach(function(e){n.contextRenderer().removeActor(e),t.contextRenderer().addActor(e)}),o._renderer(t),o._canvas(t.canvas()),e&&(r.length||a.length)&&(n._render(),a.forEach(function(t){t._update()}),t._render())}return o},this._init=function(){var n=o.map();return n._updateAutoshareRenderers||(n._updateAutoshareRenderers=function(){var e,o,a,s=n.sortedLayers(),l=[];s.forEach(function(n){var s=n.autoshareRenderer(),u=n instanceof r;s&&n.renderer()&&n.renderer().api()===i.apiname?!e||n.opacity()!==o||"more"!==s&&(n.opacity()>0&&n.opacity()<1||u&&!a)?(n.node()[0].contains(n.renderer().canvas()[0])||(n.switchRenderer(t(i.apiname,n),!1),l.push(n.renderer())),e=n.renderer(),o=n.opacity(),a=u):(n.renderer()!==e&&(l.push(n.renderer()),n.switchRenderer(e,!1),l.push(n.renderer())),a&=u):e=null}),s.forEach(function(t){l.indexOf(t.renderer())>=0&&t._update&&t._update()}),s.forEach(function(t){l.indexOf(t.renderer())>=0&&(t.renderer()._renderFrame(),l=l.filter(function(e){return e!==t.renderer()}))}),l.forEach(function(t){t._exit()})},n.geoOn(e.layerAdd,function(){return n._updateAutoshareRenderers()}),n.geoOn(e.layerRemove,function(){return n._updateAutoshareRenderers()})),a.apply(o,arguments)}};(0,n(1098).registerLayerAdjustment)("webgl","all",i),t.exports=i},5795:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(9281),a=0,s=1,l=3,u={butt:0,square:1,round:2},c={passthrough:3,miter:4,bevel:5,round:6,"miter-clip":7},h={normal:0,debug:1},d=function(t){"use strict";if(!(this instanceof d))return new d(t);t=t||{},o.call(this,t);var e=n(1611),i=n(5325),r=n(642),f=n(4084),p=n(5685),m=n(1388),g=n(9336);f.call(this);var y,v,x,_,b,w,M,A,E,T,S,C=this,k=this._exit,P=void 0!==t.dynamicDraw&&t.dynamicDraw,O=this._init,L=this._update;return this.featureVertices=function(){return[[0,"corner",-1,a],[0,"near",1,s],[1,"far",-1,l],[1,"corner",1,a],[1,"near",-1,s],[0,"far",1,l]]},this.verticesPerFeature=function(){return C.featureVertices().length},this._init=function(t){var n,i=e.shaderProgram(),r=((n=new e.shader(e.GL.VERTEX_SHADER)).setShaderSource(g),n),o=function(t){var n=new e.shader(e.GL.FRAGMENT_SHADER);return n.setShaderSource(t?m:p),n}(void 0!==((t||{}).style||{}).debug),a=e.vertexAttribute("pos"),s=e.vertexAttribute("prev"),l=e.vertexAttribute("next"),u=e.vertexAttribute("far"),c=e.vertexAttribute("flags"),h=e.vertexAttribute("strokeWidth"),d=e.vertexAttribute("strokeColor"),f=e.vertexAttribute("strokeOpacity"),E=new e.projectionUniform("projectionMatrix"),T=e.geometryData(),k=e.sourceDataP3fv({name:"pos"}),L=e.sourceDataAnyfv(3,e.vertexAttributeKeysIndexed.Four,{name:"prev"}),I=e.sourceDataAnyfv(3,e.vertexAttributeKeysIndexed.Five,{name:"next"}),R=e.sourceDataAnyfv(3,e.vertexAttributeKeysIndexed.Six,{name:"far"}),D=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Seven,{name:"flags"}),j=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.One,{name:"strokeWidth"}),F=e.sourceDataAnyfv(3,e.vertexAttributeKeysIndexed.Two,{name:"strokeColor"}),G=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Three,{name:"strokeOpacity"}),N=e.triangles();return S=new e.modelViewOriginUniform("modelViewMatrix"),_=new e.floatUniform("pixelWidth",1/C.renderer().width()),b=new e.floatUniform("aspect",C.renderer().width()/C.renderer().height()),w=new e.floatUniform("miterLimit",10),M=new e.floatUniform("antialiasing",0),A=new e.floatUniform("fixedFlags",0),O.call(C,t),x=e.material(),v=e.mapper({dynamicDraw:P}),i.addVertexAttribute(a,e.vertexAttributeKeys.Position),i.addVertexAttribute(h,e.vertexAttributeKeysIndexed.One),i.addVertexAttribute(d,e.vertexAttributeKeysIndexed.Two),i.addVertexAttribute(f,e.vertexAttributeKeysIndexed.Three),i.addVertexAttribute(s,e.vertexAttributeKeysIndexed.Four),i.addVertexAttribute(l,e.vertexAttributeKeysIndexed.Five),i.addVertexAttribute(u,e.vertexAttributeKeysIndexed.Six),i.addVertexAttribute(c,e.vertexAttributeKeysIndexed.Seven),i.addUniform(S),i.addUniform(E),i.addUniform(_),i.addUniform(b),i.addUniform(w),i.addUniform(M),i.addUniform(A),i.addShader(o),i.addShader(r),x.addAttribute(i),x.addAttribute(e.blend()),(y=e.actor()).setMaterial(x),y.setMapper(v),T.addSource(k),T.addSource(L),T.addSource(I),T.addSource(R),T.addSource(j),T.addSource(F),T.addSource(G),T.addSource(D),N.setIndices(new Uint16Array(1)),T.addPrimitive(N),T.computeBounds=function(){T.setBounds(0,0,0,0,0,0)},v.setGeometryData(T),C},this.actors=function(){return y?[y]:[]},this._build=function(){return function(t){var e,n,o,a,s,l,d,f,p,m,g,y,x,_,b,k,P,O,L,I,R,D,j,F,G,N,z,B,V,q,U,H,W,X,K,Q,Z,Y,J,$=C.data(),tt=0,et=[{strokeOffset:0,posStrokeOffset:0,negStrokeOffset:0},{strokeOffset:0,posStrokeOffset:0,negStrokeOffset:0}],nt=et[1],it=C.gcs(),rt=C.layer().map().gcs(),ot=C.line(),at=C.style.get("strokeWidth"),st=C.style.get("strokeColor"),lt=C.style.get("strokeOpacity"),ut=C.style.get("lineCap"),ct=C.style.get("lineJoin"),ht=C.style.get("strokeOffset"),dt=C.style.get("miterLimit")($),ft=C.style.get("antialiasing")($)||0,pt=C.style.get("uniformLine"),mt=C.featureVertices(),gt=mt.length,yt=h[C.style.get("debug")($)?"debug":"normal"]||0,vt=v.geometryData(),xt=C.style.get("closed"),_t=!0;if(Y=r.isFunction(C.style("closed"))?void 0:xt()||!1,I=r.isFunction(C.style("lineCap"))?void 0:u[ut()||"butt"],R=r.isFunction(C.style("lineJoin"))?void 0:c[ct()||"miter"],O=r.isFunction(C.style("strokeColor"))?void 0:st(),D=r.isFunction(C.style("strokeOffset"))?void 0:ht()||0,L=r.isFunction(C.style("strokeOpacity"))?void 0:lt(),P=r.isFunction(C.style("strokeWidth"))?void 0:at(),j=r.isFunction(C.style("uniformLine"))?void 0:pt(),void 0!==dt&&w.set(Math.max(1,Math.min(100,dt))),A.set(yt),M.set(ft),t)tt=E.numSegments,J=E.closed,m=E.lineItemList,p=tt*gt,_t=I!==E.lineCapVal||void 0===I||R!==E.lineJoinVal||void 0===R||D!==E.strokeOffsetVal||void 0===D;else{var bt=[],wt=C.position();for(wt=wt===r.identityFunction?null:wt,m=new Array($.length),J=new Array($.length),n=0;n<$.length;n+=1)if(g=ot(e=$[n],n),m[n]=g,!(g.length<2)){for(tt+=g.length-1,o=0;o<g.length;o+=1)x=wt?wt(g[o],o,e,n):g[o],bt.push(x.x),bt.push(x.y),bt.push(x.z||0),o||(b=x);g.length>2&&(void 0===Y?xt(e,n):Y)?x.x!==b.x||x.y!==b.y||x.z!==b.z?(tt+=1,J[n]=2):J[n]=1:J[n]=0}if(bt=i.transformCoordinates(it,rt,bt,3),(T=new Float32Array(C.style.get("origin")(bt)))[0]||T[1]||T[2]){var Mt=T[0],At=T[1],Et=T[2];for(n=0;n<bt.length;n+=3)bt[n]-=Mt,bt[n+1]-=At,bt[n+2]-=Et}S.setOrigin(T),p=tt*gt,B=r.getGeomBuffer(vt,"pos",3*p),V=r.getGeomBuffer(vt,"prev",3*p),q=r.getGeomBuffer(vt,"next",3*p),U=r.getGeomBuffer(vt,"far",3*p),vt.primitive(0).numberOfIndices()!==p&&(vt.primitive(0).numberOfIndices=function(){return p}),E={numSegments:tt,closed:J,lineItemList:m,lineCapVal:I,lineJoinVal:R,strokeOffsetVal:D}}for(H=r.getGeomBuffer(vt,"flags",p),W=r.getGeomBuffer(vt,"strokeWidth",p),X=r.getGeomBuffer(vt,"strokeColor",3*p),K=r.getGeomBuffer(vt,"strokeOpacity",p),n=_=Q=Z=0;n<$.length;n+=1)if(!((g=m[n]).length<2)){for(G="drop"===(F=void 0===j?pt(g,n):j),e=$[n],Y=J[n],k=_,f=g.length+(2===Y?1:0),N=0,o=0;o<f;o+=1,_+=3)if(d=o,o===g.length&&(d=0,_-=3),y=g[d],o&&(nt=et[0],et[0]=et[1],et[1]=nt),t||(nt.pos=o===d?_:k,nt.prev=d?_-3:Y?k+3*(g.length-3+Y):_,nt.next=o+1<g.length?_+3:Y?o!==d?k+3:k+6-3*Y:_),F&&o>0?1===o&&(nt.strokeWidth=et[0].strokeWidth,nt.strokeColor=et[0].strokeColor,nt.strokeOpacity=et[0].strokeOpacity):(nt.strokeWidth=void 0===P?at(y,d,e,n):P,nt.strokeColor=void 0===O?st(y,d,e,n):O,nt.strokeOpacity=void 0===L?lt(y,d,e,n):L),_t&&(0!==D&&(F&&o>0?1===o&&(nt.strokeOffset=et[0].strokeOffset):nt.strokeOffset=(void 0===D?ht(y,d,e,n):D)||0,nt.strokeOffset?(nt.posStrokeOffset=2047&Math.round(2048+1023*Math.min(1,Math.max(-1,nt.strokeOffset))),nt.negStrokeOffset=2047&Math.round(2048-1023*Math.min(1,Math.max(-1,nt.strokeOffset)))):nt.posStrokeOffset=nt.negStrokeOffset=0),Y||o&&o!==g.length-1?nt.flags=void 0===R?c[ct(y,d,e,n)]||c.miter:R:nt.flags=void 0===I?u[ut(y,d,e,n)]||u.butt:I),o){if(G&&o>1&&bt[et[0].pos]===bt[et[1].pos]&&bt[et[0].pos+1]===bt[et[1].pos+1]){N+=1;continue}for(a=0;a<gt;a+=1,Q+=1,Z+=3)G&&et[0].strokeOpacity<=0&&et[1].strokeOpacity<=0?K[Q]=-1:(s=et[z=mt[a][0]],l=et[1-z],t||(B[Z]=bt[s.pos],B[Z+1]=bt[s.pos+1],B[Z+2]=0,V[Z]=bt[z?s.next:s.prev],V[Z+1]=bt[(z?s.next:s.prev)+1],V[Z+2]=0,q[Z]=bt[z?s.prev:s.next],q[Z+1]=bt[(z?s.prev:s.next)+1],q[Z+2]=0,U[Z]=bt[z?l.prev:l.next],U[Z+1]=bt[(z?l.prev:l.next)+1],U[Z+2]=0),_t&&(H[Q]=mt[a][3]+4*s.flags+32*l.flags+256*(z?s.posStrokeOffset:s.negStrokeOffset)),W[Q]=s.strokeWidth,X[Z]=s.strokeColor.r,X[Z+1]=s.strokeColor.g,X[Z+2]=s.strokeColor.b,s.strokeOpacity<=0&&l.strokeOpacity<=0||s.strokeWidth<=0&&l.strokeWidth<=0?K[Q]=-1:K[Q]=s.strokeOpacity)}if(N)for(a=0;a<N*gt;a+=1,Q+=1,Z+=3)K[Q]=-1}t?(_t&&v.updateSourceBuffer("flags"),v.updateSourceBuffer("strokeWidth"),v.updateSourceBuffer("strokeOpacity"),v.updateSourceBuffer("strokeColor")):(v.modified(),vt.boundsDirty(!0),v.boundsDirtyTimestamp().modified())}(!!(C.dataTime().timestamp()<C.buildTime().timestamp()&&E)),C.renderer().contextRenderer().hasActor(y)||C.renderer().contextRenderer().addActor(y),C.buildTime().modified(),C},this._update=function(){return L.call(C),(C.dataTime().timestamp()>=C.buildTime().timestamp()||C.updateTime().timestamp()<=C.timestamp())&&C._build(),_.set(1/C.renderer().width()),b.set(C.renderer().width()/C.renderer().height()),y.setVisible(C.visible()),y.material().setBinNumber(C.bin()),C.updateTime().modified(),C},this._exit=function(){C.renderer().contextRenderer().removeActor(y),y=null,k()},this._init(t),this};i(d,o);var f={};f[o.capabilities.basic]=!0,f[o.capabilities.multicolor]=!0,r("webgl","line",d,f),t.exports=d},411:function(t,e,n){var i=n(4626),r=n(77),o=n(1611);var a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},o.texture.call(this);var e,n=r(),i=t.maxWidth||4096,s=new Uint8Array([0,0,0,0]),l=this;return this.setup=function(t){!function(t,e){if(!(e>=0&&e<=31))throw Error("[error] Texture unit "+e+" is not supported");t.m_context.activeTexture(o.GL.TEXTURE0+e)}(t,l.textureUnit()),t.m_context.deleteTexture(l.m_textureHandle),l.m_textureHandle=t.m_context.createTexture(),t.m_context.bindTexture(o.GL.TEXTURE_2D,l.m_textureHandle),t.m_context.texParameteri(o.GL.TEXTURE_2D,o.GL.TEXTURE_MIN_FILTER,o.GL.NEAREST),t.m_context.texParameteri(o.GL.TEXTURE_2D,o.GL.TEXTURE_MAG_FILTER,o.GL.NEAREST),t.m_context.texParameteri(o.GL.TEXTURE_2D,o.GL.TEXTURE_WRAP_S,o.GL.CLAMP_TO_EDGE),t.m_context.texParameteri(o.GL.TEXTURE_2D,o.GL.TEXTURE_WRAP_T,o.GL.CLAMP_TO_EDGE),t.m_context.pixelStorei(o.GL.UNPACK_ALIGNMENT,1),t.m_context.pixelStorei(o.GL.UNPACK_FLIP_Y_WEBGL,!0),t.m_context.texImage2D(o.GL.TEXTURE_2D,0,o.GL.RGBA,l.width,l.height,0,o.GL.RGBA,o.GL.UNSIGNED_BYTE,s),t.m_context.bindTexture(o.GL.TEXTURE_2D,null),n.modified()},this.colorTable=function(t){return void 0===t?e:(e=t,t.length<4&&(t=[0,0,0,0]),l.width=Math.min(i,t.length/4),l.height=Math.ceil(t.length/4/i),t instanceof Uint8Array&&t.length===l.width*l.height*4?s=t:(t.length<l.width*l.height*4&&(t=t.concat(new Array(l.width*l.height*4-t.length).fill(0))),s=new Uint8Array(t)),l.modified(),l)},this.maxWidth=function(){return i},this.colorTable(t.colorTable||[]),this};i(a,o.texture),t.exports=a},3403:function(t,e,n){var i=n(5616),r=n(4626),o=n(1098).registerFeature,a=n(2225),s=n(7945),l=function(t){"use strict";if(!(this instanceof l))return new l(t);t=t||{},a.call(this,t);var e=n(1611),r=n(5325),o=n(642),u=n(4084),c=n(2709),h=n(6409),d=n(9923),f=n(3724),p=n(1202),m=n(7665);u.call(this);var g,y,v=this,x=this._exit,_=null,b=null,w={},M=this._init,A=this._update,E=this.updateStyleFromArray;function T(t){var e,n,i,l,u,c,h,d,f,p,m,x,w=v.data().length,M=v._pointPolygon(0,0,1,1),A=new Array(3*w),E={},S={},C={},k={},P={radius:1,fillColor:3,fillOpacity:1,strokeColor:3,strokeOpacity:1,strokeOffset:0,strokeWidth:1,symbol:1,symbolValue:1,rotation:1,scaleWithZoom:0,rotateWithMap:0,radiusIncludesStroke:0},O=v.verticesPerFeature(),L=v.data(),I=b.geometryData();for(var R in u=v.position(),P)C[R]=v.style.get(R),o.isFunction(v.style(R))||(k[R]=C[R]()),P[R]&&(E[R]=o.getGeomBuffer(I,R,O*w*P[R]));if(!t){for(e=x=0;e<w;e+=1,x+=3)l=u(L[e],e),A[x]=l.x,A[x+1]=l.y,A[x+2]=0;if(A=r.transformCoordinates(v.gcs(),v.layer().map().gcs(),A,3),(y=new Float32Array(v.style.get("origin")(A)))[0]||y[1]||y[2])for(e=x=0;e<w;e+=1,x+=3)A[x]-=y[0],A[x+1]-=y[1],A[x+2]-=y[2];g.setOrigin(y),i=o.getGeomBuffer(I,"pos",O*w*3),v._primitiveShape!==a.primitiveShapes.sprite&&(h=o.getGeomBuffer(I,"unit",O*w*2)),(c=I.primitive(0).indices())instanceof Uint16Array&&c.length===O*w||(c=new Uint16Array(O*w),I.primitive(0).setIndices(c))}for(e=f=p=m=x=0;e<w;e+=1,x+=3){if(d=L[e],!t&&v._primitiveShape!==a.primitiveShapes.sprite)for(n=0;n<M.length;n+=1,m+=1)h[m]=M[n];for(var D in P)S[D]=void 0===k[D]?C[D](d,e):k[D];for(S.scaleWithZoom=a.scaleMode[S.scaleWithZoom]||(S.scaleWithZoom>=1&&S.scaleWithZoom<=3?S.scaleWithZoom:0),S.symbolComputed=S.scaleWithZoom+(S.rotateWithMap?4:0)+16*(Math.sign(void 0!==S.radiusIncludesStroke&&S.radiusIncludesStroke?S.strokeOffset:1)+1)+64*S.symbol,S.symbolValue&&S.symbol>=a.symbols.arrow&&S.symbol<a.symbols.arrow+a.symbols.arrowMax&&(S.symbolValue=o.packFloats(S.symbolValue)),n=0;n<O;n+=1,f+=1,p+=3)t||(i[p]=A[x],i[p+1]=A[x+1],i[p+2]=A[x+2]),E.radius[f]=S.radius,E.fillColor[p]=S.fillColor.r,E.fillColor[p+1]=S.fillColor.g,E.fillColor[p+2]=S.fillColor.b,E.fillOpacity[f]=S.fillOpacity,E.strokeColor[p]=S.strokeColor.r,E.strokeColor[p+1]=S.strokeColor.g,E.strokeColor[p+2]=S.strokeColor.b,E.strokeOpacity[f]=S.strokeOpacity,E.strokeWidth[f]=S.strokeWidth,E.symbol[f]=S.symbolComputed,E.symbolValue[f]=S.symbolValue,E.rotation[f]=S.rotation}if(v._primitiveShapeAuto){var j=v._approximateMaxRadius(v.renderer().map().zoom());if(v._primitiveShape===a.primitiveShapes.sprite&&j>s._maxPointSize||v._primitiveShape!==a.primitiveShapes.sprite&&j<=s._maxPointSize)return v._primitiveShape=j>s._maxPointSize?a.primitiveShapes.triangle:a.primitiveShapes.sprite,v.renderer().contextRenderer().removeActor(_),_=null,v._init(!0),void T()}t?Object.keys(E).forEach(function(t){return b.updateSourceBuffer(t)}):(I.boundsDirty(!0),b.modified(),b.boundsDirtyTimestamp().modified())}return c(v,t),this.actors=function(){return _?[_]:[]},this.updateStyleFromArray=function(t,e,n){var r,o,a={radius:1,fillColor:3,fillOpacity:1,strokeColor:3,strokeOpacity:1,strokeWidth:1,symbolComputed:1,symbolValueComputed:1,rotation:1};if("string"==typeof t){var s={};s[t]=e,t=s}return i.each(t,function(t,e){var n,i,s,l,u,c,h,d,f,p="symbolComputed"===t?"symbol":"symbolValueComputed"===t?"symbolValue":t;if(v.visible()&&_&&a[t]&&!r&&!v.clustering())if(f=a[t],l=v.data().length,s=(i=_.mapper()).getSourceBuffer(p),n=v.verticesPerFeature(),s&&l&&l*n*f===s.length){switch(a[t]){case 1:for(c=0,d=0;c<l;c+=1)for(u=e[c],h=0;h<n;h+=1,d+=1)s[d]=u;break;case 3:for(c=0,d=0;c<l;c+=1)for(u=e[c],h=0;h<n;h+=1,d+=3)s[d]=u.r,s[d+1]=u.g,s[d+2]=u.b}i.updateSourceBuffer(p),o=!0}else r=!0;else r=!0;var m=v.modified;r||t!==p||(v.modified=function(){}),E(t,e,!1),v.modified=m}),n&&(v.visible()&&r?v.draw():o&&v.renderer()._render()),v},this._handleZoom=function(t){v._primitiveShapeAuto&&v._primitiveShape===a.primitiveShapes.sprite&&2*v._approximateMaxRadius(t)>s._maxPointSize&&(v._primitiveShape=a.primitiveShapes.triangle,v.renderer().contextRenderer().removeActor(v.actors()[0]),v._init(!0),v.dataTime().modified(),v.draw())},this._init=function(n){var i,r,o=e.shaderProgram(),s=((r=new e.shader(e.GL.VERTEX_SHADER)).setShaderSource(v._primitiveShape===a.primitiveShapes.sprite?m:p),r),l=function(){var t=new e.shader(e.GL.FRAGMENT_SHADER);return t.setShaderSource(v._primitiveShape===a.primitiveShapes.sprite?f:d),t}(),u=e.material(),c=e.blend(),x=e.geometryData(),A=e.sourceDataP3fv({name:"pos"}),E={fillColor:3,fillOpacity:1,radius:1,rotation:1,strokeColor:3,strokeOpacity:1,strokeWidth:1,symbol:1,symbolValue:1},T={pixelWidth:e.GL.FLOAT,aspect:e.GL.FLOAT,zoom:e.GL.FLOAT,rotationUniform:e.GL.FLOAT},S=new e.projectionUniform("projectionMatrix");g=new e.modelViewOriginUniform("modelViewMatrix",y),v._primitiveShape===a.primitiveShapes.sprite?i=new e.points:(i=new e.triangles,E.unit=2),i.setIndices(new Uint16Array),n||M.call(v,t),b=e.mapper(),o.addVertexAttribute(e.vertexAttribute("pos"),e.vertexAttributeKeys.Position),x.addSource(A),Object.keys(E).forEach(function(t,n){o.addVertexAttribute(e.vertexAttribute(t),n+1),x.addSource(e.sourceDataAnyfv(E[t],n+1,{name:t}))}),w={},Object.keys(T).forEach(function(t){w[t]=new e.uniform(T[t],t),o.addUniform(w[t])}),o.addUniform(g),o.addUniform(S),o.addShader(l),o.addShader(s),u.addAttribute(o),u.addAttribute(c),(_=e.actor()).setMaterial(u),_.setMapper(b),x.addPrimitive(i),x.computeBounds=function(){x.setBounds(0,0,0,0,0,0)},b.setGeometryData(x),n||v.geoOn(h.zoom,function(t){v._handleZoom(t.zoomLevel)})},this._build=function(){return T(v.dataTime().timestamp()<v.buildTime().timestamp()),v.renderer().contextRenderer().hasActor(_)||v.renderer().contextRenderer().addActor(_),v.buildTime().modified(),v},this._update=function(){return A.call(v),(v.dataTime().timestamp()>=v.buildTime().timestamp()||v.updateTime().timestamp()<v.timestamp())&&v._build(),w.pixelWidth.set(2/v.renderer().width()),w.aspect.set(v.renderer().width()/v.renderer().height()),w.zoom.set(v.renderer().map().zoom()),w.rotationUniform.set(v.renderer().map().rotation()),_.setVisible(v.visible()),_.material().setBinNumber(v.bin()),v.updateTime().modified(),v},this._exit=function(){v.renderer().contextRenderer().removeActor(_),_=null,w={},x()},v._init(),this};r(l,a);o("webgl","marker",l,{}),t.exports=l},2778:function(t,e,n){t.exports=function(t){"use strict";t=t||{};var e=n(1611),i=n(5325),r=n(642),o=n(428),a=n(4993);n(4084).call(this);var s,l,u=this,c=this._exit,h=null,d=null,f=null,p=null,m=null,g=null,y=null,v=null,x=void 0!==t.dynamicDraw&&t.dynamicDraw,_=this._init,b=this._update;function w(){var t=new e.shader(e.GL.VERTEX_SHADER);return t.setShaderSource(a),t}function M(){var t=new e.shader(e.GL.FRAGMENT_SHADER);return t.setShaderSource(o),t}return this.createGLMeshColored=function(t){var e,n,o,a,c,h,f,x,_,b=t.elements.length,w=[],M=d.geometryData();for(m.set([t.minColor.r,t.minColor.g,t.minColor.b,t.minColor.a]),g.set([t.maxColor.r,t.maxColor.g,t.maxColor.b,t.maxColor.a]),y.set(t.colorMap.length),v.set(t.stepped),e=-1;e<t.colorMap.length+1;e+=1)o=Math.max(0,Math.min(t.colorMap.length-1,e)),w.push(255*t.colorMap[o].r),w.push(255*t.colorMap[o].g),w.push(255*t.colorMap[o].b),w.push(255*t.colorMap[o].a);if(p.setColorTable(w),t.pos=i.transformCoordinates(u.gcs(),u.layer().map().gcs(),t.pos,3),(s=new Float32Array(u.style.get("origin")(t.pos)))[0]||s[1]||s[2])for(e=0;e<t.pos.length;e+=3)t.pos[e]-=s[0],t.pos[e+1]-=s[1],t.pos[e+2]-=s[2];for(l.setOrigin(s),h=r.getGeomBuffer(M,"pos",3*b),f=r.getGeomBuffer(M,"opacity",b),x=r.getGeomBuffer(M,"value",b),e=n=0;e<b;e+=1,n+=3)a=3*(o=t.elements[e]),h[n]=t.pos[a],h[n+1]=t.pos[a+1],h[n+2]=t.pos[a+2],c=t.elementValues?Math.floor(e/3):o,f[e]=t.opacity[c],x[e]=t.value[c];(_=M.primitive(0).indices())instanceof Uint16Array&&_.length===b||(_=new Uint16Array(b),M.primitive(0).setIndices(_)),M.boundsDirty(!0),d.modified(),d.boundsDirtyTimestamp().modified()},this._init=function(t){var n=e.blend(),i=e.shaderProgram(),r=e.material(),o=e.lookupTable(),a=e.geometryData(),s=new e.projectionUniform("projectionMatrix"),c=new e.uniform(e.GL.INT,"sampler2d"),b=w(),A=M(),E=e.vertexAttribute("pos"),T=e.vertexAttribute("value"),S=e.vertexAttribute("opacity"),C=e.sourceDataP3fv({name:"pos"}),k=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.One,{name:"value"}),P=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Two,{name:"opacity"}),O=new e.triangles;l=new e.modelViewOriginUniform("modelViewMatrix"),_.call(u,t),d=e.mapper({dynamicDraw:x}),i.addVertexAttribute(E,e.vertexAttributeKeys.Position),i.addVertexAttribute(T,e.vertexAttributeKeysIndexed.One),i.addVertexAttribute(S,e.vertexAttributeKeysIndexed.Two),i.addUniform(l),i.addUniform(s),m=new e.uniform(e.GL.FLOAT_VEC4,"minColor"),i.addUniform(m),g=new e.uniform(e.GL.FLOAT_VEC4,"maxColor"),i.addUniform(g),y=new e.uniform(e.GL.FLOAT,"steps"),i.addUniform(y),v=new e.uniform(e.GL.BOOL,"stepped"),i.addUniform(v),i.addShader(A),i.addShader(b),i.addUniform(c),o.setTextureUnit(7),c.set(7),(f=r).addAttribute(i),f.addAttribute(n),p=o,f.addAttribute(p),(h=e.actor()).setMaterial(f),h.setMapper(d),a.addSource(C),a.addSource(k),a.addSource(P),a.addPrimitive(O),a.computeBounds=function(){a.setBounds(0,0,0,0,0,0)},d.setGeometryData(a)},this.actors=function(){return h?[h]:[]},this._update=function(){b.call(u),(u.dataTime().timestamp()>=u.buildTime().timestamp()||u.updateTime().timestamp()<=u.timestamp())&&u._build(),h.setVisible(u.visible()),h.material().setBinNumber(u.bin()),u.updateTime().modified()},this._exit=function(){u.renderer().contextRenderer().removeActor(h),c()},this}},4084:function(t,e,n){var i=function(t){"use strict";if(!(this instanceof n(1338)))return new i(t);var e=this,r=this.draw;if(this.draw=function(){return e.ready&&(e._update({mayDelay:!0}),e.renderer()._render(),r()),e},this.bin){var o=this.bin;this.bin=function(t,n){if(void 0===t&&!n&&null===o(void 0,!0)){var i=e.layer&&e.layer(),r=i&&i.map&&i.map(),a=(r&&r.listSceneObjects()||[]).indexOf(e);if(a>=0)return a}return o.apply(e,arguments)}}return this};t.exports=i},7759:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(7761),a=n(411),s=n(642),l=function(t){"use strict";if(!(this instanceof l))return new l(t);o.call(this,t),n(4084).call(this);var e,i,r,u=n(1611),c=n(3925),h=this._exit,d=this;return this.pointSearch=function(t,n){if(e&&d.m_info){var i=e.pointSearch(t,n);return this._pointSearchProcess(i)}return{index:[],found:[]}},this._computePixelmap=function(){var t=d.data()||[],n=d.style.get("color"),o=d.indexModified(void 0,"clear"),l=d.dataTime().timestamp()>=d.buildTime().timestamp()||void 0===o;r||((r=a()).setTextureUnit(1),l=!0);var h,f=Math.max(1,t.length),p=r.maxWidth();f>p&&f%p&&(f+=p-f%p),l||(l=(h=r.colorTable()).length!==4*f,o[0]=Math.max(0,o[0]),o[1]=Math.min(t.length,o[1]+1)),l&&(h=new Uint8Array(4*f),o=[0,t.length]);for(var m=o[0];m<o[1];m+=1){var g=t[m],y=s.convertColor(n.call(d,g,m));h[4*m]=255*y.r,h[4*m+1]=255*y.g,h[4*m+2]=255*y.b,h[4*m+3]=void 0===y.a?255:255*y.a}d.m_info={colors:h};var v=r.colorTable();if(v&&v.length===h.length){for(var x=4*o[0];x<4*o[1]&&h[x]===v[x];x+=1);if(x===4*o[1])return}r.colorTable(h),e||(e=d.layer().createFeature("quad",{selectionAPI:!1,gcs:d.gcs(),visible:d.visible(void 0,!0),nearestPixel:!0}),i=!1),i||(d.dependentFeatures([e]),e.setShader("image_fragment",c),e._hookBuild=function(t){var e=new u.uniform(u.GL.INT,"lutSampler");e.set(r.textureUnit()),t.addUniform(e);var n=new u.uniform(u.GL.INT,"lutWidth");n.set(r.width),t.addUniform(n);var i=new u.uniform(u.GL.INT,"lutHeight");i.set(r.height),t.addUniform(i)},e._hookRenderImageQuads=function(t,e){r.bind(t,e)},!1===i&&e.style({image:d.m_srcImage,position:d.style.get("position")}).data([{}]).draw(),i=!0)},this._exit=function(){return e&&d.layer()&&(d.layer().deleteFeature(e),e=null,d.dependentFeatures([])),h(),d},t.quadFeature&&(e=t.quadFeature).nearestPixel&&e.nearestPixel(!0),this._init(t),this};i(l,o);var u={};u[o.capabilities.lookup]=!0,r("webgl","pixelmap",l,u),t.exports=l},5407:function(t,e,n){var i=n(5616),r=n(4626),o=n(1098).registerFeature,a=n(7541),s=n(7945),l=function(t){"use strict";if(!(this instanceof l))return new l(t);t=t||{},a.call(this,t);var e=n(1611),r=n(5325),o=n(642),u=n(4084),c=n(2709),h=n(4317),d=n(2682),f=n(8208),p=n(6979);u.call(this);var m,g,y=this,v=this._exit,x=null,_=null,b=null,w=null,M=void 0!==t.dynamicDraw&&t.dynamicDraw,A=this._init,E=this._update,T=this.updateStyleFromArray;function S(t){var e,n,i,l,u,c,h,d,f,p,v,b,w,M,A,E,T,C,k,P,O,L,I,R,D,j,F,G,N,z,B,V,q,U,H,W,X=y.data().length,K=y._pointPolygon(0,0,1,1),Q=new Array(3*X),Z=y.verticesPerFeature(),Y=y.data(),J=0,$=_.geometryData();if(u=y.position(),p=y.style.get("radius"),w=y.style.get("stroke"),E=y.style.get("strokeWidth"),k=y.style.get("strokeOpacity"),L=y.style.get("strokeColor"),D=y.style.get("fill"),G=y.style.get("fillOpacity"),B=y.style.get("fillColor"),!t){for(e=W=0;e<X;e+=1,W+=3)l=u(Y[e],e),Q[W]=l.x,Q[W+1]=l.y,Q[W+2]=0;if(Q=r.transformCoordinates(y.gcs(),y.layer().map().gcs(),Q,3),(g=new Float32Array(y.style.get("origin")(Q)))[0]||g[1]||g[2])for(e=W=0;e<X;e+=1,W+=3)Q[W]-=g[0],Q[W+1]-=g[1],Q[W+2]-=g[2];m.setOrigin(g),i=o.getGeomBuffer($,"pos",Z*X*3),c=o.getGeomBuffer($,"unit",Z*X*2),(h=$.primitive(0).indices())instanceof Uint16Array&&h.length===Z*X||(h=new Uint16Array(Z*X),$.primitive(0).setIndices(h))}for(d=o.getGeomBuffer($,"radius",Z*X),v=o.getGeomBuffer($,"stroke",Z*X),M=o.getGeomBuffer($,"strokeWidth",Z*X),T=o.getGeomBuffer($,"strokeOpacity",Z*X),P=o.getGeomBuffer($,"strokeColor",Z*X*3),I=o.getGeomBuffer($,"fill",Z*X),j=o.getGeomBuffer($,"fillOpacity",Z*X),N=o.getGeomBuffer($,"fillColor",Z*X*3),e=q=U=H=W=0;e<X;e+=1,W+=3){if(V=Y[e],!t&&y._primitiveShape!==a.primitiveShapes.sprite)for(n=0;n<K.length;n+=1,H+=1)c[H]=K[n];for(f=p(V,e),b=w(V,e)?1:0,A=E(V,e),C=k(V,e),O=L(V,e),R=D(V,e)?1:0,F=G(V,e),z=B(V,e),y._primitiveShapeAuto&&(R&&F||b&&C)&&f+(b&&C?A:0)>J&&(J=f+(b&&C?A:0)),n=0;n<Z;n+=1,q+=1,U+=3)t||(i[U]=Q[W],i[U+1]=Q[W+1],i[U+2]=Q[W+2]),d[q]=f,v[q]=b,M[q]=A,T[q]=C,P[U]=O.r,P[U+1]=O.g,P[U+2]=O.b,I[q]=R,j[q]=F,N[U]=z.r,N[U+1]=z.g,N[U+2]=z.b}if(y._primitiveShapeAuto&&(y._primitiveShape===a.primitiveShapes.sprite&&J>s._maxPointSize||y._primitiveShape!==a.primitiveShapes.sprite&&J<=s._maxPointSize))return y._primitiveShape=J>s._maxPointSize?a.primitiveShapes.triangle:a.primitiveShapes.sprite,y.renderer().contextRenderer().removeActor(x),x=null,y._init(!0),void S();t?(_.updateSourceBuffer("radius"),_.updateSourceBuffer("stroke"),_.updateSourceBuffer("strokeWidth"),_.updateSourceBuffer("strokeColor"),_.updateSourceBuffer("strokeOpacity"),_.updateSourceBuffer("fill"),_.updateSourceBuffer("fillColor"),_.updateSourceBuffer("fillOpacity")):($.boundsDirty(!0),_.modified(),_.boundsDirtyTimestamp().modified())}return c(y,t),this.actors=function(){return x?[x]:[]},this.updateStyleFromArray=function(t,e,n){var r,o,a={fill:"bool",fillColor:3,fillOpacity:1,radius:1,stroke:"bool",strokeColor:3,strokeOpacity:1,strokeWidth:1};if("string"==typeof t){var s={};s[t]=e,t=s}return i.each(t,function(t,e){var n,i,s,l,u,c,h,d,f;if(y.visible()&&x&&a[t]&&!r&&!y.clustering())if(f="bool"===a[t]?1:a[t],l=y.data().length,s=(i=x.mapper()).getSourceBuffer(t),n=y.verticesPerFeature(),s&&l&&l*n*f===s.length){switch(a[t]){case 1:for(c=0,d=0;c<l;c+=1)for(u=e[c],h=0;h<n;h+=1,d+=1)s[d]=u;break;case 3:for(c=0,d=0;c<l;c+=1)for(u=e[c],h=0;h<n;h+=1,d+=3)s[d]=u.r,s[d+1]=u.g,s[d+2]=u.b;break;case"bool":for(c=0,d=0;c<l;c+=1)for(u=e[c]?1:0,h=0;h<n;h+=1,d+=1)s[d]=u}i.updateSourceBuffer(t),o=!0}else r=!0;else r=!0;var p=y.modified;r||(y.modified=function(){}),T(t,e,!1),y.modified=p}),n&&(y.visible()&&r?y.draw():o&&y.renderer()._render()),y},this._init=function(n){var i,r,o=e.shaderProgram(),s=((r=new e.shader(e.GL.VERTEX_SHADER)).setShaderSource(y._primitiveShape===a.primitiveShapes.sprite?p:f),r),l=function(){var t=new e.shader(e.GL.FRAGMENT_SHADER);return t.setShaderSource(y._primitiveShape===a.primitiveShapes.sprite?d:h),t}(),u=e.vertexAttribute("pos"),c=e.vertexAttribute("unit"),v=e.vertexAttribute("radius"),E=e.vertexAttribute("strokeWidth"),T=e.vertexAttribute("fillColor"),S=e.vertexAttribute("fill"),C=e.vertexAttribute("strokeColor"),k=e.vertexAttribute("stroke"),P=e.vertexAttribute("fillOpacity"),O=e.vertexAttribute("strokeOpacity"),L=new e.projectionUniform("projectionMatrix"),I=e.material(),R=e.blend(),D=e.geometryData(),j=e.sourceDataP3fv({name:"pos"}),F=e.sourceDataAnyfv(2,e.vertexAttributeKeysIndexed.One,{name:"unit"}),G=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Two,{name:"radius"}),N=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Three,{name:"strokeWidth"}),z=e.sourceDataAnyfv(3,e.vertexAttributeKeysIndexed.Four,{name:"fillColor"}),B=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Five,{name:"fill"}),V=e.sourceDataAnyfv(3,e.vertexAttributeKeysIndexed.Six,{name:"strokeColor"}),q=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Seven,{name:"stroke"}),U=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Eight,{name:"fillOpacity"}),H=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Nine,{name:"strokeOpacity"});m=new e.modelViewOriginUniform("modelViewMatrix",g),(i=y._primitiveShape===a.primitiveShapes.sprite?new e.points:new e.triangles).setIndices(new Uint16Array),b=new e.floatUniform("pixelWidth",2/y.renderer().width()),w=new e.floatUniform("aspect",y.renderer().width()/y.renderer().height()),n||A.call(y,t),_=e.mapper({dynamicDraw:M}),o.addVertexAttribute(u,e.vertexAttributeKeys.Position),y._primitiveShape!==a.primitiveShapes.sprite&&o.addVertexAttribute(c,e.vertexAttributeKeysIndexed.One),o.addVertexAttribute(v,e.vertexAttributeKeysIndexed.Two),o.addVertexAttribute(E,e.vertexAttributeKeysIndexed.Three),o.addVertexAttribute(T,e.vertexAttributeKeysIndexed.Four),o.addVertexAttribute(S,e.vertexAttributeKeysIndexed.Five),o.addVertexAttribute(C,e.vertexAttributeKeysIndexed.Six),o.addVertexAttribute(k,e.vertexAttributeKeysIndexed.Seven),o.addVertexAttribute(P,e.vertexAttributeKeysIndexed.Eight),o.addVertexAttribute(O,e.vertexAttributeKeysIndexed.Nine),o.addUniform(b),o.addUniform(w),o.addUniform(m),o.addUniform(L),o.addShader(l),o.addShader(s),I.addAttribute(o),I.addAttribute(R),(x=e.actor()).setMaterial(I),x.setMapper(_),D.addSource(j),D.addSource(F),D.addSource(G),D.addSource(N),D.addSource(z),D.addSource(B),D.addSource(V),D.addSource(q),D.addSource(U),D.addSource(H),D.addPrimitive(i),D.computeBounds=function(){D.setBounds(0,0,0,0,0,0)},_.setGeometryData(D)},this._build=function(){return S(y.dataTime().timestamp()<y.buildTime().timestamp()),y.renderer().contextRenderer().hasActor(x)||y.renderer().contextRenderer().addActor(x),y.buildTime().modified(),y},this._update=function(){return E.call(y),(y.dataTime().timestamp()>=y.buildTime().timestamp()||y.updateTime().timestamp()<y.timestamp())&&y._build(),b.set(2/y.renderer().width()),w.set(y.renderer().width()/y.renderer().height()),x.setVisible(y.visible()),x.material().setBinNumber(y.bin()),y.updateTime().modified(),y},this._exit=function(){y.renderer().contextRenderer().removeActor(x),x=null,v()},y._init(),this};r(l,a);var u={};u[a.capabilities.stroke]=!0,o("webgl","point",l,u),t.exports=l},2709:function(t,e,n){var i=n(7541);t.exports=function(t,e){e=e||{},t._primitiveShapeAuto=!0,t._primitiveShape=i.primitiveShapes.auto,void 0!==i.primitiveShapes[e.primitiveShape]&&(t._primitiveShape=e.primitiveShape),t._primitiveShapeAuto=t._primitiveShape===i.primitiveShapes.auto,t._primitiveShapeAuto&&(t._primitiveShape=i.primitiveShapes.sprite,t._primitiveShapeAuto=!0),t._pointPolygon=function(e,n,r,o){var a;switch(t._primitiveShape){case i.primitiveShapes.triangle:a=[e,n-2*o,e-r*Math.sqrt(3),n+o,e+r*Math.sqrt(3),n+o];break;case i.primitiveShapes.square:a=[e-r,n+o,e-r,n-o,e+r,n+o,e-r,n-o,e+r,n-o,e+r,n+o];break;default:a=[e,n]}return a},t.verticesPerFeature=function(){return t._pointPolygon(0,0,1,1).length/2},t.primitiveShape=function(e,n){if(void 0===e)return n||!t._primitiveShapeAuto?t._primitiveShape:i.primitiveShapes.auto;if(void 0!==i.primitiveShapes[e]){var r=!1;e===i.primitiveShapes.auto?(r=!t._primitiveShapeAuto,t._primitiveShapeAuto=!0):(r=t._primitiveShapeAuto||t._primitiveShape!==e,t._primitiveShapeAuto=!1,t._primitiveShape=e),r&&(t.renderer().contextRenderer().removeActor(t.actors()[0]),t._init(!0),t.dataTime().modified())}return t}}},8511:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(6645),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},o.call(this,t);var e=n(1611),i=n(9747);i=i.__esModule?i.default:i;var r=n(5325),s=n(642),l=n(4084),u=n(2225),c=n(4547),h=n(6207),d=n(9506),f=n(1030);l.call(this);var p,m,g,y,v,x,_=this,b=this._exit,w=null,M=null,A=this._init,E=this._update;function T(){var t=new e.shader(e.GL.VERTEX_SHADER);return _._hasPatterns?t.setShaderSource(f):t.setShaderSource(d),t}function S(){var t=new e.shader(e.GL.FRAGMENT_SHADER);return _._hasPatterns?t.setShaderSource(h):t.setShaderSource(c),t}function C(t,e,n,i,r){if(!t&&void 0===e)return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var o,a,l=Array(16);if(void 0===t&&(t=e(n,i)),!t)return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];void 0===t.fillColor?(o=s.convertColor(_.style.get("strokeColor")(r,0,n,i))).a=_.style.get("strokeOpacity")(r,0,n,i):o=s.convertColor(t.fillColor),l[0]=o.r,l[1]=o.g,l[2]=o.b,l[3]=o.a,void 0===t.strokeColor?(a=s.convertColor(_.style.get("fillColor")(r,0,n,i))).a=_.style.get("fillOpacity")(r,0,n,i):a=s.convertColor(t.strokeColor),l[4]=a.r,l[5]=a.g,l[6]=a.b,l[7]=a.a,l[8]=void 0===t.strokeWidth?1.25:t.strokeWidth,l[9]=void 0===t.radius?6.25:t.radius;var c=void 0===t.scaleWithZoom?u.scaleMode.none:t.scaleWithZoom;c=u.scaleMode[c]||c;var h=void 0===t.strokeOffset||t.strokeOffset<0?-1:t.strokeOffset>0?1:0;return l[10]=c+(t.rotateWithMap?0:4)+16*((t.radiusIncludeStroke?h:1)+1)+64*(t.symbol||0),t.symbol&&t.symbolValue&&t.symbol>=u.symbols.arrow&&t.symbol<u.symbols.arrow+u.symbols.arrowMax?l[11]=s.packFloats(t.symbolValue||0):l[11]=t.symbolValue||0,l[12]=t.rotation||0,l[13]=void 0===t.spacing?20:t.spacing,l[14]=void 0===t.origin?0:t.origin[0],l[15]=void 0===t.origin?0:t.origin[1],l}return this._init=function(t){_._hasPatterns=!0===t;var n=e.shaderProgram(),i=e.vertexAttribute("pos"),r=e.vertexAttribute("fillColor"),o=e.vertexAttribute("fillOpacity"),a=new e.projectionUniform("projectionMatrix"),s=T(),l=S(),u=e.blend(),c=e.geometryData(),h=e.sourceDataP3fv({name:"pos"}),d=e.sourceDataAnyfv(3,e.vertexAttributeKeysIndexed.Two,{name:"fillColor"}),f=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Three,{name:"fillOpacity"}),p=e.triangles(),m=e.material();if(y=new e.modelViewOriginUniform("modelViewMatrix"),n.addVertexAttribute(i,e.vertexAttributeKeys.Position),n.addVertexAttribute(r,e.vertexAttributeKeysIndexed.Two),n.addVertexAttribute(o,e.vertexAttributeKeysIndexed.Three),_._hasPatterns){var v=e.vertexAttribute("patternFillColor"),x=e.vertexAttribute("patternStrokeColor"),b=e.vertexAttribute("patternSymbolProps"),E=e.vertexAttribute("patternPositionProps");n.addVertexAttribute(v,e.vertexAttributeKeysIndexed.Four),n.addVertexAttribute(x,e.vertexAttributeKeysIndexed.Five),n.addVertexAttribute(b,e.vertexAttributeKeysIndexed.Six),n.addVertexAttribute(E,e.vertexAttributeKeysIndexed.Seven)}if(n.addUniform(y),n.addUniform(a),n.addShader(l),n.addShader(s),m.addAttribute(n),m.addAttribute(u),M=e.mapper(),(w=e.actor()).setMaterial(m),w.setMapper(M),c.addSource(h),c.addSource(d),c.addSource(f),_._hasPatterns){var C={pixelWidth:e.GL.FLOAT,aspect:e.GL.FLOAT,zoom:e.GL.FLOAT,rotationUniform:e.GL.FLOAT};g={},Object.keys(C).forEach(function(t){g[t]=new e.uniform(C[t],t),n.addUniform(g[t])});var k=e.sourceDataAnyfv(4,e.vertexAttributeKeysIndexed.Four,{name:"patternFillColor"}),P=e.sourceDataAnyfv(4,e.vertexAttributeKeysIndexed.Five,{name:"patternStrokeColor"}),O=e.sourceDataAnyfv(4,e.vertexAttributeKeysIndexed.Six,{name:"patternSymbolProps"}),L=e.sourceDataAnyfv(4,e.vertexAttributeKeysIndexed.Seven,{name:"patternPositionProps"});c.addSource(k),c.addSource(P),c.addSource(O),c.addSource(L)}c.addPrimitive(p),c.computeBounds=function(){c.setBounds(0,0,0,0,0,0)},M.setGeometryData(c),!0!==t&&A.call(_,t)},this.actors=function(){return[w]},this._build=function(){!function(t){var e,n,o,a,l,u,c,h,d,f,g,v,x,b,A,E,T,S,k,P,O,L,I,R,D,j,F,G,N,z,B,V,q,U,H,W,X,K,Q,Z=[],Y=_.gcs(),J=_.layer().map().gcs(),$=0;for(l=_.style.get("fillColor"),u=s.isFunction(_.style("fillColor"))?void 0:l(),h=_.style.get("fillOpacity"),d=s.isFunction(_.style("fillOpacity"))?void 0:h(),f=_.style.get("fill"),g=s.isFunction(_.style("fill"))?void 0:f(),k=_.style.get("uniformPolygon"),P=s.isFunction(_.style("uniformPolygon"))?void 0:k(),v=_.style.get("pattern"),null!==(x=s.isFunction(_.style("pattern"))?void 0:v()||null)&&!0!==_._hasPatterns&&(_.renderer().contextRenderer().removeActor(w),w=null,_._init(!0)),D=M.geometryData(),t?(Z=p.items,$=p.numPts):(n=(n=_.style.get("position"))===s.identityFunction?null:n,o=(o=_.style.get("polygon"))===s.identityFunction?null:o,_.data().forEach(function(t,e){var a,s,l,u;if((a=o?o(t,e):t)&&!((s=a.outer||(Array.isArray(a)?a:[])).length<3)){for(l=new Array(3*s.length),V=z=0;V<s.length;V+=1,z+=3)u=n?n(s[V],V,t,e):s[V],l[z]=u.x,l[z+1]=u.y,l[z+2]=0;l={vertices:l,dimensions:3,holes:[]},Q=s,a.inner&&a.inner.forEach(function(i){if(!(i.length<3))for(Q=Q.concat(i),l.holes.push(z/3),V=0;V<i.length;V+=1,z+=3)u=n?n(i[V],V,t,e):i[V],l.vertices[z]=u.x,l.vertices[z+1]=u.y,l.vertices[z+2]=0}),l.vertices=r.transformCoordinates(Y,J,l.vertices,l.dimensions),(W={triangles:i(l.vertices,l.holes,l.dimensions),vertices:l.vertices,original:Q,item:t,itemIndex:e}).triangles.length&&(Z.push(W),$+=W.triangles.length)}}),e=s.getGeomBuffer(D,"pos",3*$),(L=D.primitive(0).indices())instanceof Uint16Array&&L.length===$||(L=new Uint16Array($),D.primitive(0).setIndices(L)),p={items:Z,numPts:$},m=new Float32Array(_.style.get("origin")(Z)),y.setOrigin(m)),a=s.getGeomBuffer(D,"fillColor",3*$),c=s.getGeomBuffer(D,"fillOpacity",$),N=z=0,j=u,G=g,_._hasPatterns&&(A=s.getGeomBuffer(D,"patternFillColor",4*$),E=s.getGeomBuffer(D,"patternStrokeColor",4*$),T=s.getGeomBuffer(D,"patternSymbolProps",4*$),S=s.getGeomBuffer(D,"patternPositionProps",4*$)),U=0;U<Z.length;U+=1)if(H=(R=(I=Z[U]).triangles).length,B=I.vertices,X=I.item,K=I.itemIndex,Q=I.original,F=d,(O=void 0===P?k(X,K):P)&&(void 0===u&&(j=l(B[0],0,X,K)),void 0===d&&(F=h(B[0],0,X,K))),void 0===g&&(G=f(X,K)),G||(F=0),_._hasPatterns&&(void 0===b&&x||void 0===x)&&(b=C(x,v,X,K,B[0])),O&&t&&I.uniform&&I.color&&j.r===I.color.r&&j.g===I.color.g&&j.b===I.color.b&&F===I.opacity)N+=H,z+=3*H;else{for(V=0;V<H;V+=1,N+=1,z+=3)t&&O?(a[z]=j.r,a[z+1]=j.g,a[z+2]=j.b,c[N]=F):(q=3*R[V],t||(e[z]=B[q]-m[0],e[z+1]=B[q+1]-m[1],e[z+2]=B[q+2]-m[2],L[N]=V),O||void 0!==u||(j=l(Q[q],q,X,K)),a[z]=j.r,a[z+1]=j.g,a[z+2]=j.b,!O&&G&&void 0===d&&(F=h(Q[q],q,X,K)),c[N]=F),_._hasPatterns&&(A[4*N]=b[0],A[4*N+1]=b[1],A[4*N+2]=b[2],A[4*N+3]=b[3],E[4*N]=b[4],E[4*N+1]=b[5],E[4*N+2]=b[6],E[4*N+3]=b[7],T[4*N]=b[8],T[4*N+1]=b[9],T[4*N+2]=b[10],T[4*N+3]=b[11],S[4*N]=b[12],S[4*N+1]=b[13],S[4*N+2]=b[14],S[4*N+3]=b[15]);(O||I.uniform)&&(I.uniform=O,I.color=j,I.opacity=F)}t?(M.updateSourceBuffer("fillOpacity"),M.updateSourceBuffer("fillColor"),_._hasPatterns&&(M.updateSourceBuffer("patternFillColor"),M.updateSourceBuffer("patternStrokeColor"),M.updateSourceBuffer("patternSymbolProps"),M.updateSourceBuffer("patternPositionProps"))):(M.modified(),D.boundsDirty(!0),M.boundsDirtyTimestamp().modified())}(!!(_.dataTime().timestamp()<_.buildTime().timestamp()&&p)),_.renderer().contextRenderer().hasActor(w)||(_.renderer().contextRenderer().addActor(w),v=!0),_.buildTime().modified()},this._update=function(t){_.ready&&(t&&t.mayDelay&&v?x=_.layer().map().scheduleAnimationFrame(_._update):(x&&(_.layer().map().scheduleAnimationFrame(_._update,"remove"),x=null),E.call(_),(_.dataTime().timestamp()>=_.buildTime().timestamp()||_.updateTime().timestamp()<=_.timestamp())&&_._build(),_._hasPatterns&&(g.pixelWidth.set(2/_.renderer().width()),g.aspect.set(_.renderer().width()/_.renderer().height()),g.zoom.set(_.renderer().map().zoom()),g.rotationUniform.set(_.renderer().map().rotation())),w.setVisible(_.visible()),w.material().setBinNumber(_.bin()),_.updateTime().modified()))},this._exit=function(){x&&_.layer()&&(_.layer().map().scheduleAnimationFrame(_._update,"remove"),x=null),_.renderer().contextRenderer().removeActor(w),w=null,g={},b()},this._init(t),this};i(a,o),r("webgl","polygon",a),t.exports=a},9304:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(3842),a=n(77),s=n(642),l=16777216,u=function(t){"use strict";if(!(this instanceof u))return new u(t);o.call(this,t);var e=n(5616),i=n(1611),r=n(4084),c=n(8711),h=n(6238),d=n(8961),f=n(3260);r.call(this);var p,m,g,y,v,x,_,b=this,w=this._exit,M=this._update,A={},E=a(),T=a();function S(t){var e=new i.mapper({dynamicDraw:!0});return e.s_modified=e.modified,e.g_timestamp=a(),e.timestamp=e.g_timestamp.timestamp,e.modified=function(){return e.s_modified(),e.g_timestamp.modified(),e},e.s_render=e.render,e.render=t,e}return this.actors=function(){var t=[];return m&&t.push(m),g&&t.push(g),t},this._build=function(){var t,e,n,r,o,a,s,l,u;b.position()&&((_=b._generateQuads()).imgQuads.length&&!m&&(b.visible(!1),t=S(b._renderImageQuads),(m=new i.actor).setMapper(t),e=new i.material,(n=new i.shaderProgram).addVertexAttribute(new i.vertexAttribute("vertexPosition"),i.vertexAttributeKeys.Position),n.addVertexAttribute(new i.vertexAttribute("textureCoord"),i.vertexAttributeKeys.TextureCoordinate),p=new i.modelViewOriginUniform("modelViewMatrix",_.origin),n.addUniform(p),n.addUniform(new i.projectionUniform("projectionMatrix")),n.addUniform(new i.floatUniform("opacity",1)),n.addUniform(new i.floatUniform("zOffset",0)),(u=new i.uniform(i.GL.INT,"sampler2d")).set(0),n.addUniform(u),l=b.renderer()._glContext(),(o=new i.uniform(l.FLOAT_VEC2,"crop")).set([1,1]),n.addUniform(o),(a=new i.uniform(l.FLOAT_VEC4,"cropsource")).set([0,0,0,0]),n.addUniform(a),n.addShader(i.getCachedShader(l.VERTEX_SHADER,l,h)),n.addShader(i.getCachedShader(l.FRAGMENT_SHADER,l,c)),b._hookBuild&&b._hookBuild(n),e.addAttribute(n),e.addAttribute(new i.blend),s=new i.geometryData,y=void 0,(r=new i.sourceDataT2fv).pushBack([0,0,1,0,0,1,1,1]),s.addSource(r),t.setGeometryData(s),m.setMaterial(e),b.renderer().contextRenderer().addActor(m),b.visible(!0)),_.clrQuads.length&&!g&&(b.visible(!1),t=S(b._renderColorQuads),(g=new i.actor).setMapper(t),e=new i.material,(n=new i.shaderProgram).addVertexAttribute(new i.vertexAttribute("vertexPosition"),i.vertexAttributeKeys.Position),x=new i.modelViewOriginUniform("modelViewMatrix",_.origin),n.addUniform(x),n.addUniform(new i.projectionUniform("projectionMatrix")),n.addUniform(new i.floatUniform("opacity",1)),n.addUniform(new i.floatUniform("zOffset",0)),l=b.renderer()._glContext(),n.addUniform(new i.uniform(l.FLOAT_VEC3,"vertexColor")),n.addShader(i.getCachedShader(l.VERTEX_SHADER,l,f)),n.addShader(i.getCachedShader(l.FRAGMENT_SHADER,l,d)),e.addAttribute(n),e.addAttribute(new i.blend),s=new i.geometryData,v=void 0,t.setGeometryData(s),g.setMaterial(e),b.renderer().contextRenderer().addActor(g),b.visible(!0)),p&&p.setOrigin(_.origin),x&&x.setOrigin(_.origin),b._updateTextures(),b.buildTime().modified())},this._updateTextures=function(){e.each(_.imgQuads,function(t,e){var n=e.imageTexture||e.image;if(n)if(n._texture)e.texture=n._texture;else{var r=new i.texture;e.imageTexture?r.setTexture(n):r.setImage(n);var o=b.nearestPixel();if(void 0!==o)if(!0!==o&&s.isNonNullFinite(o))o=b.layer().map().zoom()>=o;o&&r.setNearestPixel(!0),e.texture=n._texture=r}})},this._renderColorQuads=function(t){if(_.clrQuads.length){var n=this;(n.timestamp()>T.timestamp()||b.dataTime().timestamp()>T.timestamp()||t.m_contextChanged||!v||12*_.clrQuads.length>v.length)&&function(t){var n=t.m_context,i=!1;_.clrQuads.length&&((!v||v.length<12*_.clrQuads.length||!A.clrQuadsPosition)&&(A.clrQuadsPosition&&n.deleteBuffer(A.clrQuadsPosition),A.clrQuadsPosition=n.createBuffer(),v=new Float32Array(12*Math.max(128,2*_.clrQuads.length)),i=!0),e.each(_.clrQuads,function(t,e){for(var n=0;n<12;n+=1)v[12*t+n]=e.pos[n]-_.origin[n%3]}),n.bindBuffer(n.ARRAY_BUFFER,A.clrQuadsPosition),i?n.bufferData(n.ARRAY_BUFFER,v,n.DYNAMIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,v)),T.modified()}(t),n.s_render(t,!0);var r,o,a,s=t.m_context;s.bindBuffer(s.ARRAY_BUFFER,A.clrQuadsPosition),e.each(_.clrQuads,function(e,n){n.opacity!==r&&(r=n.opacity,s.uniform1fv(t.m_material.shaderProgram().uniformLocation("opacity"),new Float32Array([r]))),(n.zOffset||0)!==o&&(o=n.zOffset||0,s.uniform1fv(t.m_material.shaderProgram().uniformLocation("zOffset"),new Float32Array([o]))),a&&a.r===n.color.r&&a.g===n.color.g&&a.b===n.color.b||(a=n.color,s.uniform3fv(t.m_material.shaderProgram().uniformLocation("vertexColor"),new Float32Array([a.r,a.g,a.b]))),s.bindBuffer(s.ARRAY_BUFFER,A.clrQuadsPosition),s.vertexAttribPointer(i.vertexAttributeKeys.Position,3,s.FLOAT,!1,12,12*e*4),s.enableVertexAttribArray(i.vertexAttributeKeys.Position),s.drawArrays(s.TRIANGLE_STRIP,0,4)}),s.bindBuffer(s.ARRAY_BUFFER,null),n.undoBindVertexData(t)}},this._renderImageQuads=function(t){if(_.imgQuads.length){var n=this;(n.timestamp()>E.timestamp()||b.dataTime().timestamp()>E.timestamp()||t.m_contextChanged||!y||12*_.imgQuads.length>y.length)&&function(t){var n=t.m_context,i=!1;_.imgQuads.length&&((!y||y.length<12*_.imgQuads.length||!A.imgQuadsPosition)&&(A.imgQuadsPosition&&n.deleteBuffer(A.imgQuadsPosition),A.imgQuadsPosition=n.createBuffer(),y=new Float32Array(12*Math.max(128,2*_.imgQuads.length)),i=!0),e.each(_.imgQuads,function(t,e){for(var n=0;n<12;n+=1)y[12*t+n]=e.pos[n]-_.origin[n%3]}),n.bindBuffer(n.ARRAY_BUFFER,A.imgQuadsPosition),i?n.bufferData(n.ARRAY_BUFFER,y,n.DYNAMIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,y)),E.modified()}(t),n.s_render(t,!0);var r,o,a,u,c,h,d,f,p=t.m_context,m={x:1,y:1},g={x0:0,y0:0,x1:1,y1:1},v=b.nearestPixel();if(void 0!==v){if(!0!==v&&s.isNonNullFinite(v)){var x=b.layer().map().zoom();v=x>=v}_.imgQuads.forEach(function(e){if((e.image||e.imageTexture)&&e.texture&&e.texture.nearestPixel()!==v&&e.texture.textureHandle()){t.m_context.bindTexture(i.GL.TEXTURE_2D,e.texture.textureHandle()),t.m_context.texParameteri(i.GL.TEXTURE_2D,i.GL.TEXTURE_MIN_FILTER,v?i.GL.NEAREST:i.GL.LINEAR),t.m_context.texParameteri(i.GL.TEXTURE_2D,i.GL.TEXTURE_MAG_FILTER,v?i.GL.NEAREST:i.GL.LINEAR),t.m_context.bindTexture(i.GL.TEXTURE_2D,null);var n=e.texture.modified;e.texture.modified=function(){},e.texture.setNearestPixel(v),e.texture.modified=n}})}b._hookRenderImageQuads&&b._hookRenderImageQuads(t,_.imgQuads),p.bindBuffer(p.ARRAY_BUFFER,A.imgQuadsPosition),e.each(_.imgQuads,function(e,n){(n.image||n.imageTexture)&&(n.texture.bind(t),n.image&&(c=n.image.width,h=n.image.height),n.imageTexture&&(c=n.imageTexture.width,h=n.imageTexture.height),(n.image||n.imageTexture)&&c*h>l&&(l=c*h,p.getError()===p.OUT_OF_MEMORY&&console.log("Insufficient GPU memory for texture")),n.opacity!==r&&(r=n.opacity,p.uniform1fv(t.m_material.shaderProgram().uniformLocation("opacity"),new Float32Array([r]))),(n.zOffset||0)!==o&&(o=n.zOffset||0,p.uniform1fv(t.m_material.shaderProgram().uniformLocation("zOffset"),new Float32Array([o]))),a=n.crop||{x:1,y:1},m&&a.x===m.x&&a.y===m.y||(m=a,p.uniform2fv(t.m_material.shaderProgram().uniformLocation("crop"),new Float32Array([void 0===m.x?1:m.x,void 0===m.y?1:m.y]))),u=n.crop||{left:0,top:0,right:c,bottom:h},g&&u.left===g.left&&u.top===g.top&&u.right===g.right&&u.bottom===g.bottom&&d===c&&f===h||(g=u,d=c,f=h,p.uniform4fv(t.m_material.shaderProgram().uniformLocation("cropsource"),new Float32Array([g.left/c,g.top/h,g.right/c,g.bottom/h]))),p.bindBuffer(p.ARRAY_BUFFER,A.imgQuadsPosition),p.vertexAttribPointer(i.vertexAttributeKeys.Position,3,p.FLOAT,!1,12,12*e*4),p.enableVertexAttribArray(i.vertexAttributeKeys.Position),p.drawArrays(p.TRIANGLE_STRIP,0,4),n.texture.undoBind(t))}),p.bindBuffer(p.ARRAY_BUFFER,null),n.undoBindVertexData(t)}},this._update=function(){M.call(b),(b.buildTime().timestamp()<=b.dataTime().timestamp()||b.updateTime().timestamp()<b.timestamp())&&b._build(),g&&(g.setVisible(b.visible()),g.material().setBinNumber(b.bin())),m&&(m.setVisible(b.visible()),m.material().setBinNumber(b.bin())),b.updateTime().modified()},this._cleanup=function(){m&&(b.renderer().contextRenderer().removeActor(m),m=null),g&&(b.renderer().contextRenderer().removeActor(g),g=null),y=void 0,v=void 0,A&&Object.keys(A).forEach(function(t){delete A[t]}),_&&_.imgQuads&&(_.imgQuads.forEach(function(t){t.texture&&(delete t.texture,t.image&&t.image._texture&&delete t.image._texture),t.imageTexture&&delete t.imageTexture._texture}),b._updateTextures()),b.modified()},this.setShader=function(t,e){switch(t){case"image_vertex":h=e;break;case"image_fragment":c=e;break;case"color_vertex":f=e;break;case"color_fragment":d=e;break;default:return}return b},this._exit=function(){b._cleanup(),w.call(b)},b._init(t),this};i(u,o);var c={};c[o.capabilities.color]=!0,c[o.capabilities.image]=!0,c[o.capabilities.imageCrop]=!0,c[o.capabilities.imageFixedScale]=!1,c[o.capabilities.imageFull]=!0,c[o.capabilities.canvas]=!1,c[o.capabilities.video]=!1,c[o.capabilities.texture]=!0,r("webgl","quad",u,c),t.exports=u},1474:function(t,e,n){var i=n(1098).registerLayerAdjustment,r=n(9264),o=function(){"use strict";var t,e=n(6409),i=this,o=this._init,a=this._exit,s=this._update,l=this.visible,u=this.zIndex,c=0,h=[];this._drawTile=function(e){if(t){var n,o,a=i._tileBounds(e),s=e.index.level||0,l=i._tileOffset(s),u=i.tileCropFromBounds(e),d={},f=i.renderer().contextRenderer().m_depthBits;u&&(d.crop={x:u.x/i._options.tileWidth,y:u.y/i._options.tileHeight}),d.ul=i.fromLocal(i.fromLevel({x:a.left-l.x,y:a.top-l.y},s),0),d.ll=i.fromLocal(i.fromLevel({x:a.left-l.x,y:a.bottom-l.y},s),0),d.ur=i.fromLocal(i.fromLevel({x:a.right-l.x,y:a.top-l.y},s),0),d.lr=i.fromLocal(i.fromLevel({x:a.right-l.x,y:a.bottom-l.y},s),0),d.ul.z=d.ll.z=d.ur.z=d.lr.z=0,n=i._options.keepLower?i._options.maxLevel-s+1:1,(o=(o=i.map().listSceneObjects().filter(function(t){return t instanceof r})).slice(o.indexOf(i)+1)).forEach(function(t){n+=t._options.keepLower?t._options.maxLevel-t._options.minLevel+1:1}),d.zOffset=n*Math.pow(2,-f)*r._zOffsetMultiple,c+=1,d.id=c,e.quadId=d.id,d.image=e.image,h.push(d),t.data(h),t._update(),i.draw()}},this._remove=function(e){if(void 0!==e.quadId&&t){for(var n=0;n<h.length;n+=1)if(h[n].id===e.quadId){h.splice(n,1);break}t.data(h),t._update(),i.draw()}},this.visible=function(e){return void 0===e?l():(i.visible()!==e&&(l(e),t&&t.visible(t.visible(void 0,!0),!0)),i)},this.zIndex=function(t,e){return void 0!==t&&i._clearQuads(),u.apply(i,arguments)},this._clearQuads=function(n){(!n||n.layer&&n.layer instanceof r&&n.layer.autoshareRenderer()&&(n.event!==e.layerAdd&&n.event!==e.layerRemove||!i.map().layers().every(function(t){return t===n.layer||n.layer.zIndex()>t.zIndex()})))&&(i.clear(),t&&t.modified(),n&&i.draw())},this._update=function(e){return s.call(i,e),t&&t.nearestPixel&&t.nearestPixel(i.nearestPixel()),i._addBaseQuadToTiles(t,h),i},this._cleanup=function(){var t;if(i.cache&&i.cache._cache){for(var e in i.cache._cache)(t=i.cache._cache[e])._image&&t._image._texture&&delete t._image._texture;i.cache.clear()}i.clear()},this._exit=function(){var n=i.map();n.geoOff(e.layerAdd,i._clearQuads),n.geoOff(e.layerRemove,i._clearQuads),i._cleanup(),i.deleteFeature(t),t=null,h=[],a.apply(i,arguments)},this._init=function(){o.apply(i,arguments),(t=i.createFeature("quad",{previewColor:i._options.previewColor,previewImage:i._options.previewImage})).geoTrigger=void 0,t.gcs(i._options.gcs||i.map().gcs()),t.data(h),t._update();var n=i.map();n.geoOn(e.layerAdd,i._clearQuads),n.geoOn(e.layerRemove,i._clearQuads),i.geoOn(e.unhidden,function(){i.map().scheduleAnimationFrame(function(){i._clearQuads(),i.map().draw()})})},this._getSubLayer=function(){},this._updateSubLayers=void 0};r._zOffsetMultiple=2,i("webgl","tile",o),t.exports=o},536:function(t,e,n){var i=n(4626),r=n(1098).registerFeature,o=n(338),a=function(t){"use strict";return this instanceof a?(t=t||{},o.call(this,t),n(4084).call(this),this._init(t),this):new a(t)};i(a,o),r("webgl","track",a),t.exports=a},7945:function(t,e,n){var i,r=n(4626),o=n(1098).registerRenderer,a=n(2274),s=function(t){"use strict";if(!(this instanceof s))return new s(t);t=t||{},a.call(this,t);var e,i=n(5616),r=n(1611),o=n(3503),l=n(642),u=n(6409),c=this,h=null,d=null,f=!1,p=this._init,m=this._exit;return this.contextRenderer=function(){return h},this.api=function(){return s.apiname},this._init=function(){if(c.initialized())return c;p.call(c);var e=t.canvas||i(document.createElement("canvas"));if(e.addClass("webgl-canvas"),i(c.layer().node().get(0)).append(e),window.overrideContextAttributes){var n=e.get(0),o=n.getContext;n.getContext=function(t,e){if(e=e||{},window.overrideContextAttributes)for(var i in window.overrideContextAttributes)window.overrideContextAttributes.hasOwnProperty(i)&&(e[i]=window.overrideContextAttributes[i]);return o.call(n,t,e)}}(d=r.viewer(e.get(0),t.options)).init(),(h=d.renderWindow().activeRenderer()).setResetScene(!1),e.get(0).addEventListener("webglcontextlost",function(t){return t.preventDefault()},!1),e.get(0).addEventListener("webglcontextrestored",function(){return d.renderWindow()._init()},!1),d.renderWindow().renderers().length>0&&h.setLayer(d.renderWindow().renderers().length),c.canvas(e);var a=c.layer().map().size();return c._resize(0,0,a.width,a.height),c},this._resize=function(t,e,n,i){var r=d.renderWindow();return t===r.windowPosition[0]&&e===r.windowPosition[1]&&n===c.width()&&i===c.height()||(c._setWidthHeight(n,i),c.canvas().attr("width",n),c.canvas().attr("height",i),r.positionAndResize(t,e,n,i),f=!0,c._render()),c},this._render=function(){return c.layer().map().scheduleAnimationFrame(c._renderFrame,!0),c},this._renderFrame=function(){d&&(f&&(f=!1,c._updateRendererCamera()),d.render())},this._glContext=function(){return d&&d.renderWindow()?d.renderWindow().context():r.GL},this._exit=function(){if(c.layer().map().scheduleAnimationFrame(c._renderFrame,"remove"),c.canvas().remove(),d){var t=new r.renderState;t.m_renderer=d,t.m_context=c._glContext(),d.exit(t);var e=c._glContext();e!==r.GL&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext&&e.getExtension("WEBGL_lose_context").loseContext()}r.clearCachedShaders(r.GL),d=null,m()},this._updateRendererCamera=function(){var t=d.renderWindow(),n=c.layer().map(),i=n.camera(),r=n.rotation()||0,a=i.view,s=i.projectionMatrix;if(s[15])s=o.copy(l.mat4AsArray(),s),s=o.scale(s,s,[1,1,-.5]),s=o.translate(s,s,[0,0,i.clipbounds.far]);else{var u=i.clipbounds.near,h=i.clipbounds.far;s=o.copy(l.mat4AsArray(),s),s=o.scale(s,s,[1/u,1/u,-1/h])}var f=Math.PI/2,p=r%f,m=Math.min(Math.abs(p),Math.abs(p-f))<1e-5;t.renderers().forEach(function(t){var r=t.camera();if(!l.compareArrays(a,r.viewMatrix())||!l.compareArrays(s,r.projectionMatrix())||e!==n.zoom()){e=n.zoom(),r.setViewMatrix(a,!0),r.setProjectionMatrix(s);var o=i.viewport;s[1]||s[2]||s[3]||s[4]||s[6]||s[7]||s[8]||s[9]||s[11]||1!==s[15]||!m||o.left&&o.left%1||o.top&&o.top%1||parseFloat(e.toFixed(6))!==parseFloat(e.toFixed(0))?r.viewAlignment=function(){return null}:r.viewAlignment=function(){var t={roundx:2/o.width,roundy:2/o.height};return t.dx=o.width%2?.5*t.roundx:0,t.dy=o.height%2?.5*t.roundy:0,t}}})},c.layer().geoOn(u.pan,function(t){f=!0}),c.layer().geoOn(u.parallelprojection,function(t){var e=c.contextRenderer(),n=c.layer();if(t.geo&&t.geo._triggeredBy!==n){if(!e||!e.camera())return void console.log("Parallel projection event triggered on unconnected VGL renderer.");e.camera().setEnableParallelProjection(t.parallelProjection),f=!0}}),this};s.apiname="webgl",r(s,a),o("webgl",s),o("vgl",s),s.supported=function(){if(void 0===i){var t,e;try{(e=(t=document.createElement("canvas")).getContext("webgl")||t.getContext("experimental-webgl")).getSupportedExtensions().indexOf("WEBGL_debug_renderer_info")>=0&&(s._unmaskedRenderer=e.getParameter(e.getExtension("WEBGL_debug_renderer_info").UNMASKED_RENDERER_WEBGL)),s._maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),s._maxPointSize=e.getParameter(e.ALIASED_POINT_SIZE_RANGE)[1],i=!0}catch(t){console.warn("No webGL support"),i=!1}t=void 0,e=void 0}return i},s.fallback=function(){return null},t.exports=s},632:function(t,e,n){"use strict";var i=n(4942),r=n.n(i),o=n(278),a=n.n(o),s=n(3021),l=n.n(s),u=new URL(n(3158),n.b),c=new URL(n(5245),n.b),h=new URL(n(8546),n.b),d=new URL(n(9803),n.b),f=new URL(n(9463),n.b),p=a()(r()),m=l()(u),g=l()(c),y=l()(h),v=l()(d),x=l()(f);p.push([t.id,'.geojs-map{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;overflow:hidden}.geojs-map .geo-attribution{position:absolute;right:0;bottom:0;padding-right:5px;cursor:auto;font:11px/1.5 "Helvetica Neue",Arial,Helvetica,sans-serif;z-index:1001;background:rgba(255,255,255,0.7);clear:both;display:block;pointer-events:auto}.geojs-map .geo-attribution .geo-attribution-layer{padding-left:5px}.geojs-map .canvas-canvas{display:block;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}.geojs-map .webgl-canvas{display:block}.geojs-map .geojs-layer{position:absolute;width:100%;height:100%;left:0;top:0;pointer-events:none}.geojs-map .geojs-layer.active:not(.hidden) > *{pointer-events:auto}.geojs-map .geojs-layer.hidden{display:none}.geojs-map .geojs-layer.hidden[renderer="webgl"]{display:inherit}.geojs-map .geo-tile-layer{-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0;line-height:0;font-size:0}.geojs-map.annotation-input{cursor:crosshair}.geojs-map.annotation-input.annotation-intersect{cursor:url('+m+") 12 12,crosshair}.geojs-map.annotation-input.annotation-difference{cursor:url("+g+") 12 12,crosshair}.geojs-map.annotation-input.annotation-union{cursor:url("+y+") 12 12,crosshair}.geojs-map.annotation-input.annotation-xor{cursor:url("+v+") 12 12,crosshair}.geojs-map.annotation-input.annotation-cut{cursor:url("+x+") 12 12,crosshair}.geojs-map.annotation-cursor{cursor:crosshair}.geojs-map.annotation-cursor.annotation-intersect{cursor:url("+m+") 12 12,crosshair}.geojs-map.annotation-cursor.annotation-difference{cursor:url("+g+") 12 12,crosshair}.geojs-map.annotation-cursor.annotation-union{cursor:url("+y+") 12 12,crosshair}.geojs-map.annotation-cursor.annotation-xor{cursor:url("+v+') 12 12,crosshair}.geojs-map.highlight-focus:after{content:"";display:block;position:absolute;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;left:0;top:0;right:0;bottom:0;border:3px solid Highlight;opacity:1;-ms-filter:none;filter:none;-webkit-transition:opacity 0s;-moz-transition:opacity 0s;-o-transition:opacity 0s;-ms-transition:opacity 0s;transition:opacity 0s;visibility:hidden}.geojs-map.highlight-focus:focus:after{visibility:visible;-webkit-transition:opacity 2.5s ease-in;-moz-transition:opacity 2.5s ease-in;-o-transition:opacity 2.5s ease-in;-ms-transition:opacity 2.5s ease-in;transition:opacity 2.5s ease-in;opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}.geo-tile-container{position:absolute}.geo-tile-container.crop{overflow:hidden}',"",{version:3,sources:["webpack://./main.styl","webpack://./../node_modules/nib/lib/nib/vendor.styl","webpack://./../node_modules/nib/lib/nib/overflow.styl","webpack://./../node_modules/nib/lib/nib/flex.styl","webpack://./../node_modules/nib/lib/nib/border.styl"],names:[],mappings:"AAEA,WACE,iBAAS,CCwCO,wBAAG,CAAH,qBAAG,CAAH,oBAAG,CARN,gBAAG,CChBd,eAAU,CFZZ,4BACE,iBAAS,CACT,OAAM,CACN,QAAO,CACP,iBAAc,CC4ed,WAAO,CD1eP,yDAA8B,CAC9B,YAAQ,CC6dR,gCAAW,CD3dX,UAAM,CGMN,aAAS,CHJT,mBAAe,CAEf,mDACE,gBAAa,CAEjB,0BGDE,aAAS,CFqBK,4BAAG,CAAH,yBAAG,CAAH,uBAAG,CAAH,wBAAG,CARN,oBAAG,CDThB,yBGJE,aAAS,CHOX,wBACE,iBAAS,CACT,UAAM,CACN,WAAO,CACP,MAAK,CACL,KAAI,CACJ,mBAAe,CAEb,gDACE,mBAAe,CACnB,+BGjBA,YAAS,CHmBT,iDGnBA,eAAS,CHsBX,2BCDgB,4BAAG,CAAH,yBAAG,CAAH,uBAAG,CAAH,wBAAG,CARN,oBAAG,CDWd,aAAY,CACZ,WAAU,CAEZ,4BCscE,gBAAO,CDpcP,iDCocA,8DAAO,CDlcP,kDCkcA,8DAAO,CDhcP,6CCgcA,8DAAO,CD9bP,2CC8bA,8DAAO,CD5bP,2CC4bA,8DAAO,CDzbT,6BCybE,gBAAO,CDvbP,kDCubA,8DAAO,CDrbP,mDCqbA,8DAAO,CDnbP,8CCmbA,8DAAO,CDjbP,4CCibA,8DAAO,CD7aP,iCACE,UAAQ,CGrDV,aAAS,CHuDP,iBAAS,CClCG,6BAAG,CAAH,0BAAG,CARN,qBAAG,CD4CZ,MAAK,CACL,KAAI,CACJ,OAAM,CACN,QAAO,CIzET,0BAAQ,CH4PV,SAAS,CAQH,eAAY,CACZ,WAAQ,CArOE,6BAAG,CAAH,0BAAG,CAAH,wBAAG,CAAH,yBAAG,CARN,qBAAG,CDuDZ,iBAAW,CACb,uCACE,kBAAW,CCjDC,uCAAG,CAAH,oCAAG,CAAH,kCAAG,CAAH,mCAAG,CARN,+BAAG,CAoOhB,SAAS,CAWH,+DAAyE,CACzE,uBAAiC,CDnLzC,oBACE,iBAAS,CACT,yBE7EE,eAAU",sourcesContent:['@import \'~nib/index.styl\'\n\n.geojs-map\n  position relative\n  user-select none\n  overflow hidden\n\n  .geo-attribution\n    position absolute\n    right 0\n    bottom 0\n    padding-right 5px\n    cursor auto\n    font 11px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif\n    z-index 1001\n    background rgba(255,255,255,0.7)\n    clear both\n    display block\n    pointer-events auto\n\n    .geo-attribution-layer\n      padding-left 5px\n\n  .canvas-canvas\n    display block\n    transform-origin 0px 0px\n  .webgl-canvas\n    display block\n\n  .geojs-layer\n    position absolute\n    width 100%\n    height 100%\n    left 0\n    top 0\n    pointer-events none\n    &.active:not(.hidden)\n      > *\n        pointer-events auto\n    &.hidden\n      display none\n    &.hidden[renderer="webgl"]\n      display inherit\n\n  .geo-tile-layer\n    transform-origin 0px 0px\n    line-height 0\n    font-size 0\n\n  &.annotation-input\n    cursor crosshair\n    &.annotation-intersect\n      cursor embedurl("./css/cursor-crosshair-intersect.svg") 12 12,crosshair\n    &.annotation-difference\n      cursor embedurl("./css/cursor-crosshair-difference.svg") 12 12,crosshair\n    &.annotation-union\n      cursor embedurl("./css/cursor-crosshair-union.svg") 12 12,crosshair\n    &.annotation-xor\n      cursor embedurl("./css/cursor-crosshair-xor.svg") 12 12,crosshair\n    &.annotation-cut\n      cursor embedurl("./css/cursor-crosshair-cut.svg") 12 12,crosshair\n\n  &.annotation-cursor\n    cursor crosshair\n    &.annotation-intersect\n      cursor embedurl("./css/cursor-crosshair-intersect.svg") 12 12,crosshair\n    &.annotation-difference\n      cursor embedurl("./css/cursor-crosshair-difference.svg") 12 12,crosshair\n    &.annotation-union\n      cursor embedurl("./css/cursor-crosshair-union.svg") 12 12,crosshair\n    &.annotation-xor\n      cursor embedurl("./css/cursor-crosshair-xor.svg") 12 12,crosshair\n\n  &.highlight-focus\n    &:after\n      content ""\n      display block\n      position absolute\n      box-sizing border-box\n      left 0px\n      top 0px\n      right 0px\n      bottom 0px\n      // Highlight is technically a css2 color.  We may need to specify it\n      // explicitly.  #3B66A6 seems close\n      border 3px solid Highlight\n      opacity 1\n      transition opacity 0s\n      visibility hidden\n    &:focus:after\n      visibility visible\n      transition opacity 2.5s ease-in\n      opacity 0\n\n.geo-tile-container\n  position absolute\n  &.crop\n    overflow hidden\n',"use('../nodes/vendor-helpers.js')\n@import 'config'\n\n/*\n * Alias \"nowrap\" as \"no-wrap\".\n */\n\nno-wrap = unquote('nowrap')\n\n/*\n * Helper to find out if a given value is a width\n */\n\nis-width(val)\n  if auto == val\n    return true\n  else if val && 'unit' == type(val)\n    // Stylus does not short circuit so we need to perform this as a distinct\n    // operation to prevent errors\n    return '' != unit(val)\n  return false\n\n/*\n * Vendor support for the given prop / arguments, optionally specifying the\n * only prefixes to utilize, or those which should be ignored.\n */\n\nvendor(prop, args, only = null, ignore = null, vendor-property = true)\n  need_normalize = !vendor-property or prop in ('transition' 'transition-property' 'border-image' 'border-image-slice')\n  for prefix in vendor-prefixes\n    unless (only and !(prefix in only)) or (ignore and prefix in ignore)\n      if official == prefix\n        if need_normalize\n          {prop}: normalize(prop,('%s' % args))\n        else\n          {prop}: args\n      else\n        newprop = prop\n        newprop = '-' + prefix + '-' + prop if vendor-property\n\n        if need_normalize\n          {newprop}: normalize(prop,('%s' % args),prefix)\n        else\n          {newprop}: args\n/*\n * Vendorize the given value.\n */\n\nvendor-value(arg, only = null, ignore = null)\n  prop = current-property[0]\n  for prefix in vendor-prefixes\n    unless (only and !(prefix in only)) or (ignore and prefix in ignore) or official == prefix\n      add-property(prop, '-%s-%s' % (prefix arg))\n  arg\n\n/*\n * Vendor \"box-shadow\" support.\n */\n\nbox-shadow()\n  vendor('box-shadow', arguments, only: webkit official)\n\n/*\n * Vendor \"user-select\" support.\n */\n\nuser-select()\n  vendor('user-select', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"column-count\" support.\n */\n\ncolumn-count()\n  vendor('column-count', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-gap\" support.\n */\n\ncolumn-gap()\n  vendor('column-gap', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-rule\" support.\n */\n\ncolumn-rule()\n  vendor('column-rule', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-rule-color\" support.\n */\n\ncolumn-rule-color()\n  vendor('column-rule-color', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-rule-width\" support.\n */\n\ncolumn-rule-width()\n  vendor('column-rule-width', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-rule-style\" support.\n */\n\ncolumn-rule-style()\n  vendor('column-rule-style', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-width\" support.\n */\n\ncolumn-width()\n  vendor('column-width', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-span\" support.\n */\n\ncolumn-span()\n  vendor('column-span', arguments, only: webkit official)\n\n/*\n * Vendor \"column-fill\" support.\n */\n\ncolumn-fill()\n  vendor('column-fill', arguments, only: moz official)\n\n/*\n * Legacy syntax support for background-clip and background-origin\n */\n\nlegacy-bg-values(property, args)\n  legacy_args = ()\n  importance = unquote('')\n  for subargs in args\n    for arg in subargs\n      if arg in (border-box padding-box content-box)\n        arg = unquote('border')  if arg == border-box\n        arg = unquote('padding') if arg == padding-box\n        arg = unquote('content') if arg == content-box\n      if arg != '!important'\n        push(legacy_args,arg)\n      else\n        importance = !important\n  vendor(property, unquote(join(', ',legacy_args)) importance, only: moz webkit)\n\n/*\n * Vendor \"background-clip\" support.\n */\n\nbackground-clip()\n  if arguments[0] == text\n    vendor('background-clip', arguments, only: webkit)\n  else\n    legacy-bg-values('background-clip', arguments)\n    background-clip: arguments\n\n/*\n * Vendor \"background-origin\" support.\n */\n\nbackground-origin()\n  legacy-bg-values('background-origin', arguments)\n  background-origin: arguments\n\n/*\n * Vendor \"transform\" support.\n */\n\ntransform()\n  vendor('transform', arguments)\n\n/*\n * Vendor \"transform-origin\" support.\n */\ntransform-origin()\n    vendor('transform-origin', arguments)\n\n/*\n * Vendor \"transform-style\" support.\n */\n\ntransform-style()\n  vendor('transform-style', arguments)\n\n/*\n * Vendor \"border-image\" support.\n */\n\nborder-image()\n  vendor('border-image', arguments, only: webkit moz o official)\n\n/*\n * Vendor \"transition\" support.\n */\n\ntransition()\n  vendor('transition', arguments)\n\n/*\n * Vendor \"transition-property\" support.\n */\n\ntransition-property()\n  vendor('transition-property', arguments)\n\n/*\n * Vendor \"transition-duration\" support.\n */\n\ntransition-duration()\n  vendor('transition-duration', arguments)\n\n/*\n * Vendor \"transition-timing-function\" support.\n */\n\ntransition-timing-function()\n  vendor('transition-timing-function', arguments)\n\n/*\n * Vendor \"transition-delay\" support.\n */\n\ntransition-delay()\n  vendor('transition-delay', arguments)\n\n/*\n * Vendor \"backface-visibility\" support.\n */\n\nbackface-visibility()\n  vendor('backface-visibility', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"perspective\" support.\n */\n\nperspective()\n  if mixin\n    vendor('perspective', arguments, only: webkit moz ms official)\n  else\n    'perspective(%s)' % arguments\n\n/*\n * Vendor \"perspective-origin\" support.\n */\n\nperspective-origin()\n  vendor('perspective-origin', arguments, only: webkit moz ms official)\n\n/*\n * Opacity with conditional IE support.\n */\n\nopacity(n, args...)\n  opacity: n args\n  if support-for-ie\n    if n == inherit or n == initial\n      -ms-filter: n args\n      filter: n args\n    else\n      val = round(n * 100)\n      if val == 100\n        -ms-filter: none args\n        filter: none args\n      else\n        -ms-filter: '\"progid:DXImageTransform.Microsoft.Alpha(Opacity=%s)\"' % val args\n        filter: 'alpha(opacity=%s)' % val args\n\n/*\n * Vendor \"text-size-adjust\"\n */\n\ntext-size-adjust()\n  vendor('text-size-adjust', arguments)\n\n/*\n * Alias the \"white-space\" property.\n */\n\nwhitespace()\n  white-space: arguments\n\n/*\n * Vendor \"box-sizing\" support.\n */\n\nbox-sizing()\n  vendor('box-sizing', arguments, only: webkit moz official)\n\n/*\n * Vendor \"box-orient\" support.\n */\n\nbox-orient()\n  vendor('box-orient', arguments, only: webkit moz official)\n\n/*\n * Vendor \"box-flex-group\" support.\n */\n\nbox-flex-group()\n  vendor('box-flex-group', arguments, only: webkit moz official)\n\n/*\n * Vendor \"box-ordinal-group\" support.\n */\n\nbox-ordinal-group()\n  vendor('box-ordinal-group', arguments, only: webkit moz ms official)\n\n\n/*\n * Vendor \"box-align\" support.\n */\n\nbox-align()\n  vendor('box-align', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"box-pack\" support.\n */\n\nbox-pack()\n  vendor('box-pack', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"box-direction\" support.\n */\n\nbox-direction()\n  vendor('box-direction', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"animation\" support.\n */\n\nanimation()\n  vendor('animation', arguments)\n\n\n/*\n * Vendor \"animation-name\" support.\n */\n\nanimation-name()\n  vendor('animation-name', arguments)\n\n/*\n * Vendor \"animation-duration\" support.\n */\n\nanimation-duration()\n  vendor('animation-duration', arguments)\n\n/*\n * Vendor \"animation-delay\" support.\n */\n\nanimation-delay()\n  vendor('animation-delay', arguments)\n\n/*\n * Vendor \"animation-direction\" support.\n */\n\nanimation-direction()\n  vendor('animation-direction', arguments)\n\n/*\n * Vendor \"animation-iteration-count\" support.\n */\n\nanimation-iteration-count()\n  vendor('animation-iteration-count', arguments)\n\n/*\n * Vendor \"animation-timing-function\" support.\n */\n\nanimation-timing-function()\n  vendor('animation-timing-function', arguments)\n\n/*\n * Vendor \"animation-play-state\" support.\n */\n\nanimation-play-state()\n  vendor('animation-play-state', arguments)\n\n/*\n * Vendor \"animation-fill-mode\" support.\n */\n\nanimation-fill-mode()\n  vendor('animation-fill-mode', arguments)\n\n/*\n * Vendor \"hyphens\" support.\n */\n\nhyphens()\n  vendor('hyphens', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"appearance\" support.\n */\n\nappearance()\n  vendor('appearance', arguments, only: webkit moz official)\n\n/*\n * Vendor \"tab-size\" support.\n */\n\ntab-size()\n  vendor('tab-size', arguments, only: moz o official)\n\n/*\n * Vendor \"overflow-scrolling\" support.\n */\n\noverflow-scrolling()\n  vendor('overflow-scrolling', arguments, only: webkit official)\n\n/*\n * Vendor \"text-overflow\" support, , -o- for opera 9.* - 10.*\n */\n\ntext-overflow()\n  vendor('text-overflow', arguments, only: official o)\n\n/*\n * Vendor \"text-size-adjust\" support.\n */\ntext-size-adjust()\n  vendor('text-size-adjust', arguments, only: official webkit ms)\n\n/*\n * Vendor \"font-smoothing\" support, webkit only.\n */\nfont-smoothing()\n  vendor('font-smoothing', arguments, only: webkit)\n\n\n/**\n * Vendor input-placeholder/placeholder support.\n *\n * Examples:\n *    // Default syntax\n *    body\n *      placeholder(color #333, font-weight normal)\n *\n *    // The comma is important\n *    .placeholder-red\n *      placeholder(color red,)\n *\n *    // We can pass a function\n *    green-placeholder()\n *      color green\n *    .placeholder-green\n *      placeholder(green-placeholder)\n *\n *    // We can pass a hash\n *    textarea\n *      placeholder((font-style italic) (font-weight bold) (padding '4px 10px'))\n */\nplaceholder()\n  for v in ':-webkit-input' '-moz' ':-moz' '-ms-input'\n    &:{v}-placeholder\n      for pair in arguments\n        if typeof(pair) == 'function'\n          pair()\n        else if pair is not null && pair[0] is not null\n          {pair[0]}: type(pair[1]) == 'string' ? s(pair[1]) : pair[1]\ninput-placeholder = placeholder\n\n/*\n * Vendor background support (gradients).\n */\n\nbackground()\n  if match('-gradient\\(', ''+arguments)\n    vendor('background', arguments, vendor-property: false)\n  else\n    background arguments\n\nbackground-image()\n  if match('-gradient\\(', ''+arguments)\n    vendor('background-image', arguments, vendor-property: false)\n  else\n    background-image arguments\n\ncursor()\n  if match('-gradient\\(', ''+arguments)\n    vendor('cursor', arguments, vendor-property: false)\n  else\n    cursor arguments\n\nlist-style()\n  if match('-gradient\\(', ''+arguments)\n    vendor('list-style', arguments, vendor-property: false)\n  else\n    list-style arguments\n\nlist-style-image()\n  if match('-gradient\\(', ''+arguments)\n    vendor('list-style-image', arguments, vendor-property: false)\n  else\n    list-style-image arguments\n","/*\n * Overflow utility. Maps to regular overflow, and adds an ellipsis value.\n *\n * Synopsis:\n *\n *   overflow: <type>\n *\n * Examples:\n *\n *     overflow: auto\n *     overflow: hidden\n *     overflow: ellipsis\n *\n */\n\noverflow()\n  if arguments[0] == ellipsis\n    ellipsis()\n  else\n    overflow: arguments\n","/*\n * Vendor \"display: flex\" support with fallback to obsolete versions.\n */\n\nflex-version ?= box flex\n\n//\n// 1. Display values\n//    - http://www.w3.org/TR/css3-flexbox/#flex-containers\n//\ndisplay(type, args...)\n  if flex == type || inline-flex == type\n    if box in flex-version\n      if flex == type\n        display: -ms-flexbox args\n        display: vendor-value(box args, only: moz webkit)\n      else\n        display: -ms-inline-flexbox args\n        display: vendor-value(inline-box args, only: moz webkit)\n    if flex in flex-version\n      display: vendor-value(arguments, only: webkit official) // overwrites old webkit\n  else\n    display: arguments\n\n/*\n * New syntax for browsers like Google Chrome.\n * Plus a translation to the old syntax, if possible.\n */\n\n\n//\n// 5. Ordering and Orientation\n//    - http://www.w3.org/TR/css3-flexbox/#ordering-and-orientation\n//\n-flex-obsolete-direction(direction)\n  if box in flex-version\n    if row-reverse == direction || column-reverse == direction\n      vendor('box-direction', reverse, ignore: ms official)\n\n    if row == direction || row-reverse == direction\n      vendor('box-orient', horizontal, ignore: ms official)\n    else if column == direction || column-reverse == direction\n      vendor('box-orient', vertical, ignore: ms official)\n\n-flex-obsolete-wrap(value)\n  if box in flex-version\n    // WARN: wrap-reverse does not have a box equivalent. This will render in different manners\n    //    on box vs. flex values.\n    if 'wrap' == value || wrap-reverse == value\n      vendor('box-lines', multiple, ignore: ms official)\n    else if nowrap == value\n      vendor('box-lines', single, ignore: ms official)\n\nflex-direction(direction)\n  // obsolete\n  -flex-obsolete-direction(direction)\n\n  // new\n  if flex in flex-version\n    vendor('flex-direction', arguments, only: webkit ms official)\n\nflex-wrap(value)\n  // obsolete\n  -flex-obsolete-wrap(value)\n\n  if flex in flex-version\n    vendor('flex-wrap', arguments, only: webkit ms official)\n\nflex-flow()\n  // obsolete\n  -flex-obsolete-direction(arguments[0])\n  -flex-obsolete-direction(arguments[1])\n  -flex-obsolete-wrap(arguments[0])\n  -flex-obsolete-wrap(arguments[1])\n\n  // new\n  if flex in flex-version\n    vendor('flex-flow', arguments, only: webkit ms official)\n\n\norder()\n  // obsolete\n  if box in flex-version\n    vendor('box-ordinal-group', arguments, ignore: ms official)\n\n  // new\n  if flex in flex-version\n    vendor('flex-order', arguments, only: ms)\n    vendor('order', arguments, only: webkit official)\n\n\n//\n// 7. Flexibility\n//    - http://www.w3.org/TR/css3-flexbox/#flexibility\n//\nflex-grow(growth)\n  // obsolete\n  if box in flex-version\n    vendor('box-flex', growth)\n\n  // new\n  if flex in flex-version\n    vendor('flex-grow', arguments, only: webkit official)\n\nflex-basis()\n  if flex in flex-version\n    vendor('flex-basis', arguments, only: webkit official)\n\nflex-shrink()\n  if flex in flex-version\n    vendor('flex-shrink', arguments, only: webkit official)\n\nflex(growth)\n\n  // obsolete\n  if box in flex-version\n    shrink = 1\n\n    if none == growth || initial == growth\n      // Well known values\n      shrink = 0 if none == growth\n      growth = 0\n    else if is-width(growth) == true\n      // Basis is defined as the first parameter\n      growth = arguments[1] || 0\n      shrink = arguments[2] if 3 <= length(arguments)\n    else if arguments[1] && is-width(arguments[1]) == false\n      // Growth is first and shrink is second\n      shrink = arguments[1]\n\n    // Since we can't make the distinction between growing and shrinking in the box model, take\n    // the one that provides the most flexibility.\n    vendor('box-flex', max(growth, shrink), ignore: ms)\n\n  // new\n  if flex in flex-version\n    vendor('flex', arguments, only: webkit ms official)\n\n\n// converts the justification alignment\n-convert-justify(align)\n  if flex-start == align\n    return start\n  else if flex-end == align\n    return end\n  else if space-around == align\n    return distribute\n  else if space-between == align\n    return justify\n  else\n    return align\n\n//\n// 8. Alignment\n//    - http://www.w3.org/TR/css3-flexbox/#alignment\n//\njustify-content(align)\n  // obsolete\n  if box in flex-version\n    vendor('box-pack', -convert-justify(align), ignore: ms official)\n\n  // new\n  if flex in flex-version\n    vendor('flex-pack', -convert-justify(align), only: ms)\n    vendor('justify-content', align, only: webkit official)\n\nalign-content(align)\n  // WARN: Obsolete spec does not allow for adjustment here\n  if flex in flex-version\n    vendor('flex-line-pack', -convert-justify(align), only: ms)\n    vendor('align-content', align, only: webkit official)\n\n// converts alignment from 'flex' to normal value\n-convert-alignment(align)\n  if flex-start == align\n    return start\n  else if flex-end == align\n    return end\n  else\n    return align\n\nalign-items(align)\n  // obsolete\n  if box in flex-version\n    vendor('box-align', -convert-alignment(align), ignore: ms official)\n\n  // new\n  if flex in flex-version\n    vendor('flex-align', -convert-alignment(align), only: ms)\n    vendor('align-items', arguments, only: webkit official)\n\nalign-self(align)\n  // WARN: Obsolete spec does not allow for overriding alignment on individual items.\n  if flex in flex-version\n    vendor('align-self', align, only: webkit official)\n    vendor('flex-item-align', -convert-alignment(align), only: ms)\n","/*\n * border: <color>\n * border: ...\n */\n\nborder(color, args...)\n  if color is a 'color'\n    border: 1px solid color args\n  else\n    border: arguments\n"],sourceRoot:""}]),e.A=p},7046:function(t,e,n){"use strict";var i=n(4942),r=n.n(i),o=n(278),a=n.n(o)()(r());a.push([t.id,".color-legend-container{display:none;padding:10px;border:1.5px solid #000;border-radius:3px;transition:250ms background linear;background-color:rgba(255,255,255,0.75)}.color-legend-container:hover{background-color:#fff}.color-legend-container .geojs-color-legends .geojs-color-legend{margin-bottom:10px}.color-legend-container .geojs-color-legends .geojs-color-legend .geojs-title{text-align:center}.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg{display:block}.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg .axis.x path.domain,.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg .axis.x line{fill:none;stroke:#000;stroke-width:.7}.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg .axis.x text{font-size:12px}.color-legend-container .color-legend-popup{position:absolute;background:#fff;height:22px;font-size:14px;border:solid 1px #000;padding:0 5px;pointer-events:none;white-space:nowrap;z-index:100000;opacity:0}","",{version:3,sources:["webpack://./ui/colorLegendWidget.styl"],names:[],mappings:"AAAA,wBACE,YAAQ,CACR,YAAQ,CACR,uBAAO,CACP,iBAAc,CACd,kCAAW,CACX,uCAAiB,CAEjB,8BACE,qBAAiB,CAIjB,iEACE,kBAAc,CAEd,8EACE,iBAAW,CAEb,yEACE,aAAQ,CAGN,mLACE,SAAK,CACL,WAAO,CACP,eAAa,CACf,sFACE,cAAU,CAEpB,4CACE,iBAAS,CACT,eAAW,CACX,WAAO,CACP,cAAU,CACV,qBAAO,CACP,aAAQ,CACR,mBAAe,CACf,kBAAY,CACZ,cAAQ,CACR,SAAQ",sourcesContent:[".color-legend-container\n  display none\n  padding 10px\n  border 1.5px solid black\n  border-radius 3px\n  transition 250ms background linear\n  background-color rgba(255, 255, 255, 0.75)\n\n  &:hover\n    background-color rgba(255, 255, 255, 1)\n\n  .geojs-color-legends\n\n    .geojs-color-legend\n      margin-bottom 10px\n\n      .geojs-title\n        text-align center\n\n      svg.svg\n        display block\n\n        .axis.x\n          path.domain, line\n            fill none\n            stroke black\n            stroke-width 0.7\n          text\n            font-size 12px\n\n  .color-legend-popup\n    position absolute\n    background white\n    height 22px\n    font-size 14px\n    border solid 1px black\n    padding 0 5px\n    pointer-events none\n    white-space nowrap\n    z-index 100000\n    opacity 0\n"],sourceRoot:""}]),e.A=a},5290:function(t,e,n){"use strict";var i=n(4942),r=n.n(i),o=n(278),a=n.n(o)()(r());a.push([t.id,".geojs-scale-widget-bar{stroke:#000}.geojs-scale-widget-text{font-weight:bold;font-size:16px;font-family:serif}","",{version:3,sources:["webpack://./ui/scaleWidget.styl"],names:[],mappings:"AAAA,wBACE,WAAO,CACT,yBACE,gBAAY,CACZ,cAAU,CACV,iBAAY",sourcesContent:[".geojs-scale-widget-bar\n  stroke black\n.geojs-scale-widget-text\n  font-weight bold\n  font-size 16px\n  font-family serif\n"],sourceRoot:""}]),e.A=a},278:function(t){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n}).join("")},e.i=function(t,n,i,r,o){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(i)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var u=0;u<t.length;u++){var c=[].concat(t[u]);i&&a[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),r&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=r):c[4]="".concat(r)),e.push(c))}},e}},3021:function(t){"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},4942:function(t){"use strict";t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),o="/*# ".concat(r," */");return[e].concat([o]).join("\n")}return[e].join("\n")}},3369:function(t){t.exports=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8];return t[0]=a*c-s*u,t[1]=r*u-i*c,t[2]=i*s-r*a,t[3]=s*l-o*c,t[4]=n*c-r*l,t[5]=r*o-n*s,t[6]=o*u-a*l,t[7]=i*l-n*u,t[8]=n*a-i*o,t}},5723:function(t){t.exports=function(t){var e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}},817:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}},6396:function(t){t.exports=function(){var t=new Float32Array(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}},9133:function(t){t.exports=function(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8];return e*(u*o-a*l)+n*(a*s-u*r)+i*(l*r-o*s)}},7053:function(t){t.exports=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]+t[3]*t[3]+t[4]*t[4]+t[5]*t[5]+t[6]*t[6]+t[7]*t[7]+t[8]*t[8])}},7068:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}},5018:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}},3955:function(t){t.exports=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n+n,s=i+i,l=r+r,u=n*a,c=i*a,h=i*s,d=r*a,f=r*s,p=r*l,m=o*a,g=o*s,y=o*l;return t[0]=1-h-p,t[3]=c-y,t[6]=d+g,t[1]=c+y,t[4]=1-u-p,t[7]=f-m,t[2]=d-g,t[5]=f+m,t[8]=1-u-h,t}},6658:function(t){t.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}},3638:function(t,e,n){t.exports={adjoint:n(3369),clone:n(5723),copy:n(817),create:n(6396),determinant:n(9133),frob:n(7053),fromMat2:n(7068),fromMat4:n(5018),fromQuat:n(3955),identity:n(6658),invert:n(6028),multiply:n(4980),normalFromMat4:n(8093),rotate:n(8163),scale:n(2311),str:n(6321),translate:n(5068),transpose:n(6333)}},6028:function(t){t.exports=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=c*a-s*u,d=-c*o+s*l,f=u*o-a*l,p=n*h+i*d+r*f;return p?(p=1/p,t[0]=h*p,t[1]=(-c*i+r*u)*p,t[2]=(s*i-r*a)*p,t[3]=d*p,t[4]=(c*n-r*l)*p,t[5]=(-s*n+r*o)*p,t[6]=f*p,t[7]=(-u*n+i*l)*p,t[8]=(a*n-i*o)*p,t):null}},4980:function(t){t.exports=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=n[0],f=n[1],p=n[2],m=n[3],g=n[4],y=n[5],v=n[6],x=n[7],_=n[8];return t[0]=d*i+f*a+p*u,t[1]=d*r+f*s+p*c,t[2]=d*o+f*l+p*h,t[3]=m*i+g*a+y*u,t[4]=m*r+g*s+y*c,t[5]=m*o+g*l+y*h,t[6]=v*i+x*a+_*u,t[7]=v*r+x*s+_*c,t[8]=v*o+x*l+_*h,t}},8093:function(t){t.exports=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],y=e[15],v=n*s-i*a,x=n*l-r*a,_=n*u-o*a,b=i*l-r*s,w=i*u-o*s,M=r*u-o*l,A=c*m-h*p,E=c*g-d*p,T=c*y-f*p,S=h*g-d*m,C=h*y-f*m,k=d*y-f*g,P=v*k-x*C+_*S+b*T-w*E+M*A;return P?(P=1/P,t[0]=(s*k-l*C+u*S)*P,t[1]=(l*T-a*k-u*E)*P,t[2]=(a*C-s*T+u*A)*P,t[3]=(r*C-i*k-o*S)*P,t[4]=(n*k-r*T+o*E)*P,t[5]=(i*T-n*C-o*A)*P,t[6]=(m*M-g*w+y*b)*P,t[7]=(g*_-p*M-y*x)*P,t[8]=(p*w-m*_+y*v)*P,t):null}},8163:function(t){t.exports=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=Math.sin(n),f=Math.cos(n);return t[0]=f*i+d*a,t[1]=f*r+d*s,t[2]=f*o+d*l,t[3]=f*a-d*i,t[4]=f*s-d*r,t[5]=f*l-d*o,t[6]=u,t[7]=c,t[8]=h,t}},2311:function(t){t.exports=function(t,e,n){var i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}},6321:function(t){t.exports=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}},5068:function(t){t.exports=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=n[0],f=n[1];return t[0]=i,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=d*i+f*a+u,t[7]=d*r+f*s+c,t[8]=d*o+f*l+h,t}},6333:function(t){t.exports=function(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}},5200:function(t){t.exports=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],y=e[15];return t[0]=s*(d*y-f*g)-h*(l*y-u*g)+m*(l*f-u*d),t[1]=-(i*(d*y-f*g)-h*(r*y-o*g)+m*(r*f-o*d)),t[2]=i*(l*y-u*g)-s*(r*y-o*g)+m*(r*u-o*l),t[3]=-(i*(l*f-u*d)-s*(r*f-o*d)+h*(r*u-o*l)),t[4]=-(a*(d*y-f*g)-c*(l*y-u*g)+p*(l*f-u*d)),t[5]=n*(d*y-f*g)-c*(r*y-o*g)+p*(r*f-o*d),t[6]=-(n*(l*y-u*g)-a*(r*y-o*g)+p*(r*u-o*l)),t[7]=n*(l*f-u*d)-a*(r*f-o*d)+c*(r*u-o*l),t[8]=a*(h*y-f*m)-c*(s*y-u*m)+p*(s*f-u*h),t[9]=-(n*(h*y-f*m)-c*(i*y-o*m)+p*(i*f-o*h)),t[10]=n*(s*y-u*m)-a*(i*y-o*m)+p*(i*u-o*s),t[11]=-(n*(s*f-u*h)-a*(i*f-o*h)+c*(i*u-o*s)),t[12]=-(a*(h*g-d*m)-c*(s*g-l*m)+p*(s*d-l*h)),t[13]=n*(h*g-d*m)-c*(i*g-r*m)+p*(i*d-r*h),t[14]=-(n*(s*g-l*m)-a*(i*g-r*m)+p*(i*l-r*s)),t[15]=n*(s*d-l*h)-a*(i*d-r*h)+c*(i*l-r*s),t}},1130:function(t){t.exports=function(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},74:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},3783:function(t){t.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},8844:function(t){t.exports=function(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],h=t[10],d=t[11],f=t[12],p=t[13],m=t[14],g=t[15];return(e*a-n*o)*(h*g-d*m)-(e*s-i*o)*(c*g-d*p)+(e*l-r*o)*(c*m-h*p)+(n*s-i*a)*(u*g-d*f)-(n*l-r*a)*(u*m-h*f)+(i*l-r*s)*(u*p-c*f)}},5936:function(t){t.exports=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n+n,s=i+i,l=r+r,u=n*a,c=i*a,h=i*s,d=r*a,f=r*s,p=r*l,m=o*a,g=o*s,y=o*l;return t[0]=1-h-p,t[1]=c+y,t[2]=d-g,t[3]=0,t[4]=c-y,t[5]=1-u-p,t[6]=f+m,t[7]=0,t[8]=d+g,t[9]=f-m,t[10]=1-u-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},5405:function(t){t.exports=function(t,e,n){var i,r,o,a=n[0],s=n[1],l=n[2],u=Math.sqrt(a*a+s*s+l*l);if(Math.abs(u)<1e-6)return null;return a*=u=1/u,s*=u,l*=u,i=Math.sin(e),r=Math.cos(e),o=1-r,t[0]=a*a*o+r,t[1]=s*a*o+l*i,t[2]=l*a*o-s*i,t[3]=0,t[4]=a*s*o-l*i,t[5]=s*s*o+r,t[6]=l*s*o+a*i,t[7]=0,t[8]=a*l*o+s*i,t[9]=s*l*o-a*i,t[10]=l*l*o+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},3310:function(t){t.exports=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=i+i,l=r+r,u=o+o,c=i*s,h=i*l,d=i*u,f=r*l,p=r*u,m=o*u,g=a*s,y=a*l,v=a*u;return t[0]=1-(f+m),t[1]=h+v,t[2]=d-y,t[3]=0,t[4]=h-v,t[5]=1-(c+m),t[6]=p+g,t[7]=0,t[8]=d+y,t[9]=p-g,t[10]=1-(c+f),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}},1826:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},4692:function(t){t.exports=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}},1349:function(t){t.exports=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},8034:function(t){t.exports=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},1655:function(t){t.exports=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},3277:function(t){t.exports=function(t,e,n,i,r,o,a){var s=1/(n-e),l=1/(r-i),u=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(r+i)*l,t[10]=(a+o)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*u,t[15]=0,t}},257:function(t){t.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},3503:function(t,e,n){t.exports={create:n(3783),clone:n(1130),copy:n(74),identity:n(257),transpose:n(2664),invert:n(6583),adjoint:n(5200),determinant:n(8844),multiply:n(9899),translate:n(573),scale:n(177),rotate:n(648),rotateX:n(5618),rotateY:n(5345),rotateZ:n(5208),fromRotation:n(5405),fromRotationTranslation:n(3310),fromScaling:n(1826),fromTranslation:n(4692),fromXRotation:n(1349),fromYRotation:n(8034),fromZRotation:n(1655),fromQuat:n(5936),frustum:n(3277),perspective:n(2649),perspectiveFromFieldOfView:n(7733),ortho:n(2337),lookAt:n(8541),str:n(6600)}},6583:function(t){t.exports=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],y=e[15],v=n*s-i*a,x=n*l-r*a,_=n*u-o*a,b=i*l-r*s,w=i*u-o*s,M=r*u-o*l,A=c*m-h*p,E=c*g-d*p,T=c*y-f*p,S=h*g-d*m,C=h*y-f*m,k=d*y-f*g,P=v*k-x*C+_*S+b*T-w*E+M*A;if(!P)return null;return P=1/P,t[0]=(s*k-l*C+u*S)*P,t[1]=(r*C-i*k-o*S)*P,t[2]=(m*M-g*w+y*b)*P,t[3]=(d*w-h*M-f*b)*P,t[4]=(l*T-a*k-u*E)*P,t[5]=(n*k-r*T+o*E)*P,t[6]=(g*_-p*M-y*x)*P,t[7]=(c*M-d*_+f*x)*P,t[8]=(a*C-s*T+u*A)*P,t[9]=(i*T-n*C-o*A)*P,t[10]=(p*w-m*_+y*v)*P,t[11]=(h*_-c*w-f*v)*P,t[12]=(s*E-a*S-l*A)*P,t[13]=(n*S-i*E+r*A)*P,t[14]=(m*x-p*b-g*v)*P,t[15]=(c*b-h*x+d*v)*P,t}},8541:function(t,e,n){var i=n(257);t.exports=function(t,e,n,r){var o,a,s,l,u,c,h,d,f,p,m=e[0],g=e[1],y=e[2],v=r[0],x=r[1],_=r[2],b=n[0],w=n[1],M=n[2];if(Math.abs(m-b)<1e-6&&Math.abs(g-w)<1e-6&&Math.abs(y-M)<1e-6)return i(t);h=m-b,d=g-w,f=y-M,p=1/Math.sqrt(h*h+d*d+f*f),o=x*(f*=p)-_*(d*=p),a=_*(h*=p)-v*f,s=v*d-x*h,(p=Math.sqrt(o*o+a*a+s*s))?(o*=p=1/p,a*=p,s*=p):(o=0,a=0,s=0);l=d*s-f*a,u=f*o-h*s,c=h*a-d*o,(p=Math.sqrt(l*l+u*u+c*c))?(l*=p=1/p,u*=p,c*=p):(l=0,u=0,c=0);return t[0]=o,t[1]=l,t[2]=h,t[3]=0,t[4]=a,t[5]=u,t[6]=d,t[7]=0,t[8]=s,t[9]=c,t[10]=f,t[11]=0,t[12]=-(o*m+a*g+s*y),t[13]=-(l*m+u*g+c*y),t[14]=-(h*m+d*g+f*y),t[15]=1,t}},9899:function(t){t.exports=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],f=e[10],p=e[11],m=e[12],g=e[13],y=e[14],v=e[15],x=n[0],_=n[1],b=n[2],w=n[3];return t[0]=x*i+_*s+b*h+w*m,t[1]=x*r+_*l+b*d+w*g,t[2]=x*o+_*u+b*f+w*y,t[3]=x*a+_*c+b*p+w*v,x=n[4],_=n[5],b=n[6],w=n[7],t[4]=x*i+_*s+b*h+w*m,t[5]=x*r+_*l+b*d+w*g,t[6]=x*o+_*u+b*f+w*y,t[7]=x*a+_*c+b*p+w*v,x=n[8],_=n[9],b=n[10],w=n[11],t[8]=x*i+_*s+b*h+w*m,t[9]=x*r+_*l+b*d+w*g,t[10]=x*o+_*u+b*f+w*y,t[11]=x*a+_*c+b*p+w*v,x=n[12],_=n[13],b=n[14],w=n[15],t[12]=x*i+_*s+b*h+w*m,t[13]=x*r+_*l+b*d+w*g,t[14]=x*o+_*u+b*f+w*y,t[15]=x*a+_*c+b*p+w*v,t}},2337:function(t){t.exports=function(t,e,n,i,r,o,a){var s=1/(e-n),l=1/(i-r),u=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(r+i)*l,t[14]=(a+o)*u,t[15]=1,t}},2649:function(t){t.exports=function(t,e,n,i,r){var o=1/Math.tan(e/2),a=1/(i-r);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+i)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*i*a,t[15]=0,t}},7733:function(t){t.exports=function(t,e,n,i){var r=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),l=2/(a+s),u=2/(r+o);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(a-s)*l*.5,t[9]=(r-o)*u*.5,t[10]=i/(n-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*n/(n-i),t[15]=0,t}},648:function(t){t.exports=function(t,e,n,i){var r,o,a,s,l,u,c,h,d,f,p,m,g,y,v,x,_,b,w,M,A,E,T,S,C=i[0],k=i[1],P=i[2],O=Math.sqrt(C*C+k*k+P*P);if(Math.abs(O)<1e-6)return null;C*=O=1/O,k*=O,P*=O,r=Math.sin(n),o=Math.cos(n),a=1-o,s=e[0],l=e[1],u=e[2],c=e[3],h=e[4],d=e[5],f=e[6],p=e[7],m=e[8],g=e[9],y=e[10],v=e[11],x=C*C*a+o,_=k*C*a+P*r,b=P*C*a-k*r,w=C*k*a-P*r,M=k*k*a+o,A=P*k*a+C*r,E=C*P*a+k*r,T=k*P*a-C*r,S=P*P*a+o,t[0]=s*x+h*_+m*b,t[1]=l*x+d*_+g*b,t[2]=u*x+f*_+y*b,t[3]=c*x+p*_+v*b,t[4]=s*w+h*M+m*A,t[5]=l*w+d*M+g*A,t[6]=u*w+f*M+y*A,t[7]=c*w+p*M+v*A,t[8]=s*E+h*T+m*S,t[9]=l*E+d*T+g*S,t[10]=u*E+f*T+y*S,t[11]=c*E+p*T+v*S,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t}},5618:function(t){t.exports=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=o*r+u*i,t[5]=a*r+c*i,t[6]=s*r+h*i,t[7]=l*r+d*i,t[8]=u*r-o*i,t[9]=c*r-a*i,t[10]=h*r-s*i,t[11]=d*r-l*i,t}},5345:function(t){t.exports=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],u=e[8],c=e[9],h=e[10],d=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=o*r-u*i,t[1]=a*r-c*i,t[2]=s*r-h*i,t[3]=l*r-d*i,t[8]=o*i+u*r,t[9]=a*i+c*r,t[10]=s*i+h*r,t[11]=l*i+d*r,t}},5208:function(t){t.exports=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],h=e[6],d=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=o*r+u*i,t[1]=a*r+c*i,t[2]=s*r+h*i,t[3]=l*r+d*i,t[4]=u*r-o*i,t[5]=c*r-a*i,t[6]=h*r-s*i,t[7]=d*r-l*i,t}},177:function(t){t.exports=function(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},6600:function(t){t.exports=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}},573:function(t){t.exports=function(t,e,n){var i,r,o,a,s,l,u,c,h,d,f,p,m=n[0],g=n[1],y=n[2];e===t?(t[12]=e[0]*m+e[4]*g+e[8]*y+e[12],t[13]=e[1]*m+e[5]*g+e[9]*y+e[13],t[14]=e[2]*m+e[6]*g+e[10]*y+e[14],t[15]=e[3]*m+e[7]*g+e[11]*y+e[15]):(i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],f=e[10],p=e[11],t[0]=i,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=d,t[10]=f,t[11]=p,t[12]=i*m+s*g+h*y+e[12],t[13]=r*m+l*g+d*y+e[13],t[14]=o*m+u*g+f*y+e[14],t[15]=a*m+c*g+p*y+e[15]);return t}},2664:function(t){t.exports=function(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=o,t[11]=e[14],t[12]=r,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}},3197:function(t){t.exports=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}},577:function(t,e,n){t.exports=function(t,e){var n=i(t[0],t[1],t[2]),a=i(e[0],e[1],e[2]);r(n,n),r(a,a);var s=o(n,a);return s>1?0:Math.acos(s)};var i=n(9666),r=n(1205),o=n(6517)},9913:function(t){t.exports=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}},7091:function(t){t.exports=function(t){var e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},3497:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},1220:function(t){t.exports=function(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}},6902:function(t){t.exports=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[0],s=n[1],l=n[2];return t[0]=r*l-o*s,t[1]=o*a-i*l,t[2]=i*s-r*a,t}},5140:function(t,e,n){t.exports=n(5055)},5055:function(t){t.exports=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(n*n+i*i+r*r)}},6669:function(t,e,n){t.exports=n(9737)},9737:function(t){t.exports=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}},6517:function(t){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}},6532:function(t){t.exports=1e-6},1077:function(t,e,n){t.exports=function(t,e){var n=t[0],r=t[1],o=t[2],a=e[0],s=e[1],l=e[2];return Math.abs(n-a)<=i*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=i*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-l)<=i*Math.max(1,Math.abs(o),Math.abs(l))};var i=n(6532)},5696:function(t){t.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}},1899:function(t){t.exports=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}},9436:function(t,e,n){t.exports=function(t,e,n,r,o,a){var s,l;e||(e=3);n||(n=0);l=r?Math.min(r*e+n,t.length):t.length;for(s=n;s<l;s+=e)i[0]=t[s],i[1]=t[s+1],i[2]=t[s+2],o(i,i,a),t[s]=i[0],t[s+1]=i[1],t[s+2]=i[2];return t};var i=n(1220)()},9666:function(t){t.exports=function(t,e,n){var i=new Float32Array(3);return i[0]=t,i[1]=e,i[2]=n,i}},1982:function(t,e,n){t.exports={EPSILON:n(6532),create:n(1220),clone:n(7091),angle:n(577),fromValues:n(9666),copy:n(3497),set:n(3926),equals:n(1077),exactEquals:n(5696),add:n(3197),subtract:n(1040),sub:n(8560),multiply:n(8044),mul:n(8516),divide:n(9737),div:n(6669),min:n(4370),max:n(7484),floor:n(1899),ceil:n(9913),round:n(4622),scale:n(9404),scaleAndAdd:n(8544),distance:n(5055),dist:n(5140),squaredDistance:n(2340),sqrDist:n(3108),length:n(9852),len:n(4001),squaredLength:n(2775),sqrLen:n(9249),negate:n(2926),inverse:n(3346),normalize:n(1205),dot:n(6517),cross:n(6902),lerp:n(1817),random:n(1844),transformMat4:n(9564),transformMat3:n(553),transformQuat:n(4997),rotateX:n(6899),rotateY:n(8028),rotateZ:n(5493),forEach:n(9436)}},3346:function(t){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}},4001:function(t,e,n){t.exports=n(9852)},9852:function(t){t.exports=function(t){var e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)}},1817:function(t){t.exports=function(t,e,n,i){var r=e[0],o=e[1],a=e[2];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=a+i*(n[2]-a),t}},7484:function(t){t.exports=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}},4370:function(t){t.exports=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}},8516:function(t,e,n){t.exports=n(8044)},8044:function(t){t.exports=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}},2926:function(t){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}},1205:function(t){t.exports=function(t,e){var n=e[0],i=e[1],r=e[2],o=n*n+i*i+r*r;o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o);return t}},1844:function(t){t.exports=function(t,e){e=e||1;var n=2*Math.random()*Math.PI,i=2*Math.random()-1,r=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*r,t[1]=Math.sin(n)*r,t[2]=i*e,t}},6899:function(t){t.exports=function(t,e,n,i){var r=n[1],o=n[2],a=e[1]-r,s=e[2]-o,l=Math.sin(i),u=Math.cos(i);return t[0]=e[0],t[1]=r+a*u-s*l,t[2]=o+a*l+s*u,t}},8028:function(t){t.exports=function(t,e,n,i){var r=n[0],o=n[2],a=e[0]-r,s=e[2]-o,l=Math.sin(i),u=Math.cos(i);return t[0]=r+s*l+a*u,t[1]=e[1],t[2]=o+s*u-a*l,t}},5493:function(t){t.exports=function(t,e,n,i){var r=n[0],o=n[1],a=e[0]-r,s=e[1]-o,l=Math.sin(i),u=Math.cos(i);return t[0]=r+a*u-s*l,t[1]=o+a*l+s*u,t[2]=e[2],t}},4622:function(t){t.exports=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}},9404:function(t){t.exports=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}},8544:function(t){t.exports=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t}},3926:function(t){t.exports=function(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t}},3108:function(t,e,n){t.exports=n(2340)},9249:function(t,e,n){t.exports=n(2775)},2340:function(t){t.exports=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return n*n+i*i+r*r}},2775:function(t){t.exports=function(t){var e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i}},8560:function(t,e,n){t.exports=n(1040)},1040:function(t){t.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}},553:function(t){t.exports=function(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t}},9564:function(t){t.exports=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[3]*i+n[7]*r+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*i+n[4]*r+n[8]*o+n[12])/a,t[1]=(n[1]*i+n[5]*r+n[9]*o+n[13])/a,t[2]=(n[2]*i+n[6]*r+n[10]*o+n[14])/a,t}},4997:function(t){t.exports=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[0],s=n[1],l=n[2],u=n[3],c=s*o-l*r,h=l*i-a*o,d=a*r-s*i;return c*=2,h*=2,d*=2,t[0]=i+u*c+s*d-l*h,t[1]=r+u*h+l*c-a*d,t[2]=o+u*d+a*h-s*c,t}},2108:function(t){t.exports=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}},7682:function(t){t.exports=function(t){var e=new Float32Array(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},9298:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}},3071:function(t){t.exports=function(){var t=new Float32Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}},5476:function(t){t.exports=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+i*i+r*r+o*o)}},1350:function(t){t.exports=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}},216:function(t){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}},8741:function(t){t.exports=function(t,e,n,i){var r=new Float32Array(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r}},4663:function(t,e,n){t.exports={create:n(3071),clone:n(7682),fromValues:n(8741),copy:n(9298),set:n(6675),add:n(2108),subtract:n(6919),multiply:n(9363),divide:n(1350),min:n(9271),max:n(2045),scale:n(7705),scaleAndAdd:n(2869),distance:n(5476),squaredDistance:n(6733),length:n(7159),squaredLength:n(2678),negate:n(6977),inverse:n(3095),normalize:n(8308),dot:n(216),lerp:n(2710),random:n(9960),transformMat4:n(8773),transformQuat:n(2508)}},3095:function(t){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}},7159:function(t){t.exports=function(t){var e=t[0],n=t[1],i=t[2],r=t[3];return Math.sqrt(e*e+n*n+i*i+r*r)}},2710:function(t){t.exports=function(t,e,n,i){var r=e[0],o=e[1],a=e[2],s=e[3];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=a+i*(n[2]-a),t[3]=s+i*(n[3]-s),t}},2045:function(t){t.exports=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}},9271:function(t){t.exports=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}},9363:function(t){t.exports=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}},6977:function(t){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}},8308:function(t){t.exports=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n*n+i*i+r*r+o*o;a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=i*a,t[2]=r*a,t[3]=o*a);return t}},9960:function(t,e,n){var i=n(8308),r=n(7705);t.exports=function(t,e){return e=e||1,t[0]=Math.random(),t[1]=Math.random(),t[2]=Math.random(),t[3]=Math.random(),i(t,t),r(t,t,e),t}},7705:function(t){t.exports=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}},2869:function(t){t.exports=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t}},6675:function(t){t.exports=function(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t}},6733:function(t){t.exports=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return n*n+i*i+r*r+o*o}},2678:function(t){t.exports=function(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r}},6919:function(t){t.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}},8773:function(t){t.exports=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*a,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*a,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*a,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*a,t}},2508:function(t){t.exports=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[0],s=n[1],l=n[2],u=n[3],c=u*i+s*o-l*r,h=u*r+l*i-a*o,d=u*o+a*r-s*i,f=-a*i-s*r-l*o;return t[0]=c*u+f*-a+h*-l-d*-s,t[1]=h*u+f*-s+d*-a-c*-l,t[2]=d*u+f*-l+c*-s-h*-a,t[3]=e[3],t}},5616:function(t,e){var n;
/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(i,r){"use strict";var o=[],a=Object.getPrototypeOf,s=o.slice,l=o.flat?function(t){return o.flat.call(t)}:function(t){return o.concat.apply([],t)},u=o.push,c=o.indexOf,h={},d=h.toString,f=h.hasOwnProperty,p=f.toString,m=p.call(Object),g={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},v=function(t){return null!=t&&t===t.window},x=i.document,_={type:!0,src:!0,nonce:!0,noModule:!0};function b(t,e,n){var i,r,o=(n=n||x).createElement("script");if(o.text=t,e)for(i in _)(r=e[i]||e.getAttribute&&e.getAttribute(i))&&o.setAttribute(i,r);n.head.appendChild(o).parentNode.removeChild(o)}function w(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?h[d.call(t)]||"object":typeof t}var M="3.7.1",A=/HTML$/i,E=function(t,e){return new E.fn.init(t,e)};function T(t){var e=!!t&&"length"in t&&t.length,n=w(t);return!y(t)&&!v(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function S(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}E.fn=E.prototype={jquery:M,constructor:E,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=E.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return E.each(this,t)},map:function(t){return this.pushStack(E.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(E.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:o.sort,splice:o.splice},E.extend=E.fn.extend=function(){var t,e,n,i,r,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||y(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)i=t[e],"__proto__"!==e&&a!==i&&(u&&i&&(E.isPlainObject(i)||(r=Array.isArray(i)))?(n=a[e],o=r&&!Array.isArray(n)?[]:r||E.isPlainObject(n)?n:{},r=!1,a[e]=E.extend(u,o,i)):void 0!==i&&(a[e]=i));return a},E.extend({expando:"jQuery"+(M+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==d.call(t))&&(!(e=a(t))||"function"==typeof(n=f.call(e,"constructor")&&e.constructor)&&p.call(n)===m)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){b(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,i=0;if(T(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},text:function(t){var e,n="",i=0,r=t.nodeType;if(!r)for(;e=t[i++];)n+=E.text(e);return 1===r||11===r?t.textContent:9===r?t.documentElement.textContent:3===r||4===r?t.nodeValue:n},makeArray:function(t,e){var n=e||[];return null!=t&&(T(Object(t))?E.merge(n,"string"==typeof t?[t]:t):u.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:c.call(e,t,n)},isXMLDoc:function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!A.test(e||n&&n.nodeName||"HTML")},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,o=t.length,a=!n;r<o;r++)!e(t[r],r)!==a&&i.push(t[r]);return i},map:function(t,e,n){var i,r,o=0,a=[];if(T(t))for(i=t.length;o<i;o++)null!=(r=e(t[o],o,n))&&a.push(r);else for(o in t)null!=(r=e(t[o],o,n))&&a.push(r);return l(a)},guid:1,support:g}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=o[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){h["[object "+e+"]"]=e.toLowerCase()});var C=o.pop,k=o.sort,P=o.splice,O="[\\x20\\t\\r\\n\\f]",L=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g");E.contains=function(t,e){var n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(t.contains?t.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))};var I=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function R(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}E.escapeSelector=function(t){return(t+"").replace(I,R)};var D=x,j=u;!function(){var t,e,n,r,a,l,u,h,d,p,m=j,y=E.expando,v=0,x=0,_=tt(),b=tt(),w=tt(),M=tt(),A=function(t,e){return t===e&&(a=!0),0},T="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="(?:\\\\[\\da-fA-F]{1,6}"+O+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",R="\\["+O+"*("+I+")(?:"+O+"*([*^$|!~]?=)"+O+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+O+"*\\]",F=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+R+")*)|.*)\\)|)",G=new RegExp(O+"+","g"),N=new RegExp("^"+O+"*,"+O+"*"),z=new RegExp("^"+O+"*([>+~]|"+O+")"+O+"*"),B=new RegExp(O+"|>"),V=new RegExp(F),q=new RegExp("^"+I+"$"),U={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+R),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),bool:new RegExp("^(?:"+T+")$","i"),needsContext:new RegExp("^"+O+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)","i")},H=/^(?:input|select|textarea|button)$/i,W=/^h\d$/i,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,Q=new RegExp("\\\\[\\da-fA-F]{1,6}"+O+"?|\\\\([^\\r\\n\\f])","g"),Z=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},Y=function(){lt()},J=dt(function(t){return!0===t.disabled&&S(t,"fieldset")},{dir:"parentNode",next:"legend"});try{m.apply(o=s.call(D.childNodes),D.childNodes),o[D.childNodes.length].nodeType}catch(t){m={apply:function(t,e){j.apply(t,s.call(e))},call:function(t){j.apply(t,s.call(arguments,1))}}}function $(t,e,n,i){var r,o,a,s,u,c,f,p=e&&e.ownerDocument,v=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==v&&9!==v&&11!==v)return n;if(!i&&(lt(e),e=e||l,h)){if(11!==v&&(u=X.exec(t)))if(r=u[1]){if(9===v){if(!(a=e.getElementById(r)))return n;if(a.id===r)return m.call(n,a),n}else if(p&&(a=p.getElementById(r))&&$.contains(e,a)&&a.id===r)return m.call(n,a),n}else{if(u[2])return m.apply(n,e.getElementsByTagName(t)),n;if((r=u[3])&&e.getElementsByClassName)return m.apply(n,e.getElementsByClassName(r)),n}if(!(M[t+" "]||d&&d.test(t))){if(f=t,p=e,1===v&&(B.test(t)||z.test(t))){for((p=K.test(t)&&st(e.parentNode)||e)==e&&g.scope||((s=e.getAttribute("id"))?s=E.escapeSelector(s):e.setAttribute("id",s=y)),o=(c=ct(t)).length;o--;)c[o]=(s?"#"+s:":scope")+" "+ht(c[o]);f=c.join(",")}try{return m.apply(n,p.querySelectorAll(f)),n}catch(e){M(t,!0)}finally{s===y&&e.removeAttribute("id")}}}return vt(t.replace(L,"$1"),e,n,i)}function tt(){var t=[];return function n(i,r){return t.push(i+" ")>e.cacheLength&&delete n[t.shift()],n[i+" "]=r}}function et(t){return t[y]=!0,t}function nt(t){var e=l.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function it(t){return function(e){return S(e,"input")&&e.type===t}}function rt(t){return function(e){return(S(e,"input")||S(e,"button"))&&e.type===t}}function ot(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&J(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function at(t){return et(function(e){return e=+e,et(function(n,i){for(var r,o=t([],n.length,e),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function st(t){return t&&void 0!==t.getElementsByTagName&&t}function lt(t){var n,i=t?t.ownerDocument||t:D;return i!=l&&9===i.nodeType&&i.documentElement?(u=(l=i).documentElement,h=!E.isXMLDoc(l),p=u.matches||u.webkitMatchesSelector||u.msMatchesSelector,u.msMatchesSelector&&D!=l&&(n=l.defaultView)&&n.top!==n&&n.addEventListener("unload",Y),g.getById=nt(function(t){return u.appendChild(t).id=E.expando,!l.getElementsByName||!l.getElementsByName(E.expando).length}),g.disconnectedMatch=nt(function(t){return p.call(t,"*")}),g.scope=nt(function(){return l.querySelectorAll(":scope")}),g.cssHas=nt(function(){try{return l.querySelector(":has(*,:jqfake)"),!1}catch(t){return!0}}),g.getById?(e.filter.ID=function(t){var e=t.replace(Q,Z);return function(t){return t.getAttribute("id")===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&h){var n=e.getElementById(t);return n?[n]:[]}}):(e.filter.ID=function(t){var e=t.replace(Q,Z);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&h){var n,i,r,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(r=e.getElementsByName(t),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),e.find.TAG=function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):e.querySelectorAll(t)},e.find.CLASS=function(t,e){if(void 0!==e.getElementsByClassName&&h)return e.getElementsByClassName(t)},d=[],nt(function(t){var e;u.appendChild(t).innerHTML="<a id='"+y+"' href='' disabled='disabled'></a><select id='"+y+"-\r\\' disabled='disabled'><option selected=''></option></select>",t.querySelectorAll("[selected]").length||d.push("\\["+O+"*(?:value|"+T+")"),t.querySelectorAll("[id~="+y+"-]").length||d.push("~="),t.querySelectorAll("a#"+y+"+*").length||d.push(".#.+[+~]"),t.querySelectorAll(":checked").length||d.push(":checked"),(e=l.createElement("input")).setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),u.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),(e=l.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||d.push("\\["+O+"*name"+O+"*="+O+"*(?:''|\"\")")}),g.cssHas||d.push(":has"),d=d.length&&new RegExp(d.join("|")),A=function(t,e){if(t===e)return a=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!g.sortDetached&&e.compareDocumentPosition(t)===n?t===l||t.ownerDocument==D&&$.contains(D,t)?-1:e===l||e.ownerDocument==D&&$.contains(D,e)?1:r?c.call(r,t)-c.call(r,e):0:4&n?-1:1)},l):l}for(t in $.matches=function(t,e){return $(t,null,null,e)},$.matchesSelector=function(t,e){if(lt(t),h&&!M[e+" "]&&(!d||!d.test(e)))try{var n=p.call(t,e);if(n||g.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){M(e,!0)}return $(e,l,null,[t]).length>0},$.contains=function(t,e){return(t.ownerDocument||t)!=l&&lt(t),E.contains(t,e)},$.attr=function(t,n){(t.ownerDocument||t)!=l&&lt(t);var i=e.attrHandle[n.toLowerCase()],r=i&&f.call(e.attrHandle,n.toLowerCase())?i(t,n,!h):void 0;return void 0!==r?r:t.getAttribute(n)},$.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},E.uniqueSort=function(t){var e,n=[],i=0,o=0;if(a=!g.sortStable,r=!g.sortStable&&s.call(t,0),k.call(t,A),a){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)P.call(t,n[i],1)}return r=null,t},E.fn.uniqueSort=function(){return this.pushStack(E.uniqueSort(s.apply(this)))},e=E.expr={cacheLength:50,createPseudo:et,match:U,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Q,Z),t[3]=(t[3]||t[4]||t[5]||"").replace(Q,Z),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||$.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&$.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return U.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&V.test(n)&&(e=ct(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Q,Z).toLowerCase();return"*"===t?function(){return!0}:function(t){return S(t,e)}},CLASS:function(t){var e=_[t+" "];return e||(e=new RegExp("(^|"+O+")"+t+"("+O+"|$)"))&&_(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var r=$.attr(i,t);return null==r?"!="===e:!e||(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r.replace(G," ")+" ").indexOf(n)>-1:"|="===e&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var u,c,h,d,f,p=o!==a?"nextSibling":"previousSibling",m=e.parentNode,g=s&&e.nodeName.toLowerCase(),x=!l&&!s,_=!1;if(m){if(o){for(;p;){for(h=e;h=h[p];)if(s?S(h,g):1===h.nodeType)return!1;f=p="only"===t&&!f&&"nextSibling"}return!0}if(f=[a?m.firstChild:m.lastChild],a&&x){for(_=(d=(u=(c=m[y]||(m[y]={}))[t]||[])[0]===v&&u[1])&&u[2],h=d&&m.childNodes[d];h=++d&&h&&h[p]||(_=d=0)||f.pop();)if(1===h.nodeType&&++_&&h===e){c[t]=[v,d,_];break}}else if(x&&(_=d=(u=(c=e[y]||(e[y]={}))[t]||[])[0]===v&&u[1]),!1===_)for(;(h=++d&&h&&h[p]||(_=d=0)||f.pop())&&(!(s?S(h,g):1===h.nodeType)||!++_||(x&&((c=h[y]||(h[y]={}))[t]=[v,_]),h!==e)););return(_-=r)===i||_%i===0&&_/i>=0}}},PSEUDO:function(t,n){var i,r=e.pseudos[t]||e.setFilters[t.toLowerCase()]||$.error("unsupported pseudo: "+t);return r[y]?r(n):r.length>1?(i=[t,t,"",n],e.setFilters.hasOwnProperty(t.toLowerCase())?et(function(t,e){for(var i,o=r(t,n),a=o.length;a--;)t[i=c.call(t,o[a])]=!(e[i]=o[a])}):function(t){return r(t,0,i)}):r}},pseudos:{not:et(function(t){var e=[],n=[],i=yt(t.replace(L,"$1"));return i[y]?et(function(t,e,n,r){for(var o,a=i(t,null,r,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,r,o){return e[0]=t,i(e,null,o,n),e[0]=null,!n.pop()}}),has:et(function(t){return function(e){return $(t,e).length>0}}),contains:et(function(t){return t=t.replace(Q,Z),function(e){return(e.textContent||E.text(e)).indexOf(t)>-1}}),lang:et(function(t){return q.test(t||"")||$.error("unsupported lang: "+t),t=t.replace(Q,Z).toLowerCase(),function(e){var n;do{if(n=h?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(t){var e=i.location&&i.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===u},focus:function(t){return t===function(){try{return l.activeElement}catch(t){}}()&&l.hasFocus()&&!!(t.type||t.href||~t.tabIndex)},enabled:ot(!1),disabled:ot(!0),checked:function(t){return S(t,"input")&&!!t.checked||S(t,"option")&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!e.pseudos.empty(t)},header:function(t){return W.test(t.nodeName)},input:function(t){return H.test(t.nodeName)},button:function(t){return S(t,"input")&&"button"===t.type||S(t,"button")},text:function(t){var e;return S(t,"input")&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:at(function(){return[0]}),last:at(function(t,e){return[e-1]}),eq:at(function(t,e,n){return[n<0?n+e:n]}),even:at(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:at(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:at(function(t,e,n){var i;for(i=n<0?n+e:n>e?e:n;--i>=0;)t.push(i);return t}),gt:at(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}},e.pseudos.nth=e.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})e.pseudos[t]=it(t);for(t in{submit:!0,reset:!0})e.pseudos[t]=rt(t);function ut(){}function ct(t,n){var i,r,o,a,s,l,u,c=b[t+" "];if(c)return n?0:c.slice(0);for(s=t,l=[],u=e.preFilter;s;){for(a in i&&!(r=N.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),i=!1,(r=z.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(L," ")}),s=s.slice(i.length)),e.filter)!(r=U[a].exec(s))||u[a]&&!(r=u[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?$.error(t):b(t,l).slice(0)}function ht(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function dt(t,e,n){var i=e.dir,r=e.next,o=r||i,a=n&&"parentNode"===o,s=x++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||a)return t(e,n,r);return!1}:function(e,n,l){var u,c,h=[v,s];if(l){for(;e=e[i];)if((1===e.nodeType||a)&&t(e,n,l))return!0}else for(;e=e[i];)if(1===e.nodeType||a)if(c=e[y]||(e[y]={}),r&&S(e,r))e=e[i]||e;else{if((u=c[o])&&u[0]===v&&u[1]===s)return h[2]=u[2];if(c[o]=h,h[2]=t(e,n,l))return!0}return!1}}function ft(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function pt(t,e,n,i,r){for(var o,a=[],s=0,l=t.length,u=null!=e;s<l;s++)(o=t[s])&&(n&&!n(o,i,r)||(a.push(o),u&&e.push(s)));return a}function mt(t,e,n,i,r,o){return i&&!i[y]&&(i=mt(i)),r&&!r[y]&&(r=mt(r,o)),et(function(o,a,s,l){var u,h,d,f,p=[],g=[],y=a.length,v=o||function(t,e,n){for(var i=0,r=e.length;i<r;i++)$(t,e[i],n);return n}(e||"*",s.nodeType?[s]:s,[]),x=!t||!o&&e?v:pt(v,p,t,s,l);if(n?n(x,f=r||(o?t:y||i)?[]:a,s,l):f=x,i)for(u=pt(f,g),i(u,[],s,l),h=u.length;h--;)(d=u[h])&&(f[g[h]]=!(x[g[h]]=d));if(o){if(r||t){if(r){for(u=[],h=f.length;h--;)(d=f[h])&&u.push(x[h]=d);r(null,f=[],u,l)}for(h=f.length;h--;)(d=f[h])&&(u=r?c.call(o,d):p[h])>-1&&(o[u]=!(a[u]=d))}}else f=pt(f===a?f.splice(y,f.length):f),r?r(null,a,f,l):m.apply(a,f)})}function gt(t){for(var i,r,o,a=t.length,s=e.relative[t[0].type],l=s||e.relative[" "],u=s?1:0,h=dt(function(t){return t===i},l,!0),d=dt(function(t){return c.call(i,t)>-1},l,!0),f=[function(t,e,r){var o=!s&&(r||e!=n)||((i=e).nodeType?h(t,e,r):d(t,e,r));return i=null,o}];u<a;u++)if(r=e.relative[t[u].type])f=[dt(ft(f),r)];else{if((r=e.filter[t[u].type].apply(null,t[u].matches))[y]){for(o=++u;o<a&&!e.relative[t[o].type];o++);return mt(u>1&&ft(f),u>1&&ht(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(L,"$1"),r,u<o&&gt(t.slice(u,o)),o<a&&gt(t=t.slice(o)),o<a&&ht(t))}f.push(r)}return ft(f)}function yt(t,i){var r,o=[],a=[],s=w[t+" "];if(!s){for(i||(i=ct(t)),r=i.length;r--;)(s=gt(i[r]))[y]?o.push(s):a.push(s);s=w(t,function(t,i){var r=i.length>0,o=t.length>0,a=function(a,s,u,c,d){var f,p,g,y=0,x="0",_=a&&[],b=[],w=n,M=a||o&&e.find.TAG("*",d),A=v+=null==w?1:Math.random()||.1,T=M.length;for(d&&(n=s==l||s||d);x!==T&&null!=(f=M[x]);x++){if(o&&f){for(p=0,s||f.ownerDocument==l||(lt(f),u=!h);g=t[p++];)if(g(f,s||l,u)){m.call(c,f);break}d&&(v=A)}r&&((f=!g&&f)&&y--,a&&_.push(f))}if(y+=x,r&&x!==y){for(p=0;g=i[p++];)g(_,b,s,u);if(a){if(y>0)for(;x--;)_[x]||b[x]||(b[x]=C.call(c));b=pt(b)}m.apply(c,b),d&&!a&&b.length>0&&y+i.length>1&&E.uniqueSort(c)}return d&&(v=A,n=w),_};return r?et(a):a}(a,o)),s.selector=t}return s}function vt(t,n,i,r){var o,a,s,l,u,c="function"==typeof t&&t,d=!r&&ct(t=c.selector||t);if(i=i||[],1===d.length){if((a=d[0]=d[0].slice(0)).length>2&&"ID"===(s=a[0]).type&&9===n.nodeType&&h&&e.relative[a[1].type]){if(!(n=(e.find.ID(s.matches[0].replace(Q,Z),n)||[])[0]))return i;c&&(n=n.parentNode),t=t.slice(a.shift().value.length)}for(o=U.needsContext.test(t)?0:a.length;o--&&(s=a[o],!e.relative[l=s.type]);)if((u=e.find[l])&&(r=u(s.matches[0].replace(Q,Z),K.test(a[0].type)&&st(n.parentNode)||n))){if(a.splice(o,1),!(t=r.length&&ht(a)))return m.apply(i,r),i;break}}return(c||yt(t,d))(r,n,!h,i,!n||K.test(t)&&st(n.parentNode)||n),i}ut.prototype=e.filters=e.pseudos,e.setFilters=new ut,g.sortStable=y.split("").sort(A).join("")===y,lt(),g.sortDetached=nt(function(t){return 1&t.compareDocumentPosition(l.createElement("fieldset"))}),E.find=$,E.expr[":"]=E.expr.pseudos,E.unique=E.uniqueSort,$.compile=yt,$.select=vt,$.setDocument=lt,$.tokenize=ct,$.escape=E.escapeSelector,$.getText=E.text,$.isXML=E.isXMLDoc,$.selectors=E.expr,$.support=E.support,$.uniqueSort=E.uniqueSort}();var F=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&E(t).is(n))break;i.push(t)}return i},G=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},N=E.expr.match.needsContext,z=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function B(t,e,n){return y(e)?E.grep(t,function(t,i){return!!e.call(t,i,t)!==n}):e.nodeType?E.grep(t,function(t){return t===e!==n}):"string"!=typeof e?E.grep(t,function(t){return c.call(e,t)>-1!==n}):E.filter(e,t,n)}E.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?E.find.matchesSelector(i,t)?[i]:[]:E.find.matches(t,E.grep(e,function(t){return 1===t.nodeType}))},E.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(E(t).filter(function(){for(e=0;e<i;e++)if(E.contains(r[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)E.find(t,r[e],n);return i>1?E.uniqueSort(n):n},filter:function(t){return this.pushStack(B(this,t||[],!1))},not:function(t){return this.pushStack(B(this,t||[],!0))},is:function(t){return!!B(this,"string"==typeof t&&N.test(t)?E(t):t||[],!1).length}});var V,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(E.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||V,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:q.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof E?e[0]:e,E.merge(this,E.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:x,!0)),z.test(i[1])&&E.isPlainObject(e))for(i in e)y(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=x.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==n.ready?n.ready(t):t(E):E.makeArray(t,this)}).prototype=E.fn,V=E(x);var U=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function W(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}E.fn.extend({has:function(t){var e=E(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(E.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,r=this.length,o=[],a="string"!=typeof t&&E(t);if(!N.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&E.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?E.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?c.call(E(t),this[0]):c.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),E.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return F(t,"parentNode")},parentsUntil:function(t,e,n){return F(t,"parentNode",n)},next:function(t){return W(t,"nextSibling")},prev:function(t){return W(t,"previousSibling")},nextAll:function(t){return F(t,"nextSibling")},prevAll:function(t){return F(t,"previousSibling")},nextUntil:function(t,e,n){return F(t,"nextSibling",n)},prevUntil:function(t,e,n){return F(t,"previousSibling",n)},siblings:function(t){return G((t.parentNode||{}).firstChild,t)},children:function(t){return G(t.firstChild)},contents:function(t){return null!=t.contentDocument&&a(t.contentDocument)?t.contentDocument:(S(t,"template")&&(t=t.content||t),E.merge([],t.childNodes))}},function(t,e){E.fn[t]=function(n,i){var r=E.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=E.filter(i,r)),this.length>1&&(H[t]||E.uniqueSort(r),U.test(t)&&r.reverse()),this.pushStack(r)}});var X=/[^\x20\t\r\n\f]+/g;function K(t){return t}function Q(t){throw t}function Z(t,e,n,i){var r;try{t&&y(r=t.promise)?r.call(t).done(e).fail(n):t&&y(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}E.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return E.each(t.match(X)||[],function(t,n){e[n]=!0}),e}(t):E.extend({},t);var e,n,i,r,o=[],a=[],s=-1,l=function(){for(r=r||t.once,i=e=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&t.stopOnFalse&&(s=o.length,n=!1);t.memory||(n=!1),e=!1,r&&(o=n?[]:"")},u={add:function(){return o&&(n&&!e&&(s=o.length-1,a.push(n)),function e(n){E.each(n,function(n,i){y(i)?t.unique&&u.has(i)||o.push(i):i&&i.length&&"string"!==w(i)&&e(i)})}(arguments),n&&!e&&l()),this},remove:function(){return E.each(arguments,function(t,e){for(var n;(n=E.inArray(e,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(t){return t?E.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return r=a=[],n||e||(o=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=[t,(n=n||[]).slice?n.slice():n],a.push(n),e||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},E.extend({Deferred:function(t){var e=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return E.Deferred(function(n){E.each(e,function(e,i){var r=y(t[i[4]])&&t[i[4]];o[i[1]](function(){var t=r&&r.apply(this,arguments);t&&y(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,r?[t]:arguments)})}),t=null}).promise()},then:function(t,n,r){var o=0;function a(t,e,n,r){return function(){var s=this,l=arguments,u=function(){var i,u;if(!(t<o)){if((i=n.apply(s,l))===e.promise())throw new TypeError("Thenable self-resolution");u=i&&("object"==typeof i||"function"==typeof i)&&i.then,y(u)?r?u.call(i,a(o,e,K,r),a(o,e,Q,r)):(o++,u.call(i,a(o,e,K,r),a(o,e,Q,r),a(o,e,K,e.notifyWith))):(n!==K&&(s=void 0,l=[i]),(r||e.resolveWith)(s,l))}},c=r?u:function(){try{u()}catch(i){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(i,c.error),t+1>=o&&(n!==Q&&(s=void 0,l=[i]),e.rejectWith(s,l))}};t?c():(E.Deferred.getErrorHook?c.error=E.Deferred.getErrorHook():E.Deferred.getStackHook&&(c.error=E.Deferred.getStackHook()),i.setTimeout(c))}}return E.Deferred(function(i){e[0][3].add(a(0,i,y(r)?r:K,i.notifyWith)),e[1][3].add(a(0,i,y(t)?t:K)),e[2][3].add(a(0,i,y(n)?n:Q))}).promise()},promise:function(t){return null!=t?E.extend(t,r):r}},o={};return E.each(e,function(t,i){var a=i[2],s=i[5];r[i[1]]=a.add,s&&a.add(function(){n=s},e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),a.add(i[3].fire),o[i[0]]=function(){return o[i[0]+"With"](this===o?void 0:this,arguments),this},o[i[0]+"With"]=a.fireWith}),r.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,i=Array(n),r=s.call(arguments),o=E.Deferred(),a=function(t){return function(n){i[t]=this,r[t]=arguments.length>1?s.call(arguments):n,--e||o.resolveWith(i,r)}};if(e<=1&&(Z(t,o.done(a(n)).resolve,o.reject,!e),"pending"===o.state()||y(r[n]&&r[n].then)))return o.then();for(;n--;)Z(r[n],a(n),o.reject);return o.promise()}});var Y=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(t,e){i.console&&i.console.warn&&t&&Y.test(t.name)&&i.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},E.readyException=function(t){i.setTimeout(function(){throw t})};var J=E.Deferred();function $(){x.removeEventListener("DOMContentLoaded",$),i.removeEventListener("load",$),E.ready()}E.fn.ready=function(t){return J.then(t).catch(function(t){E.readyException(t)}),this},E.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==t&&--E.readyWait>0||J.resolveWith(x,[E]))}}),E.ready.then=J.then,"complete"===x.readyState||"loading"!==x.readyState&&!x.documentElement.doScroll?i.setTimeout(E.ready):(x.addEventListener("DOMContentLoaded",$),i.addEventListener("load",$));var tt=function(t,e,n,i,r,o,a){var s=0,l=t.length,u=null==n;if("object"===w(n))for(s in r=!0,n)tt(t,e,s,n[s],!0,o,a);else if(void 0!==i&&(r=!0,y(i)||(a=!0),u&&(a?(e.call(t,i),e=null):(u=e,e=function(t,e,n){return u.call(E(t),n)})),e))for(;s<l;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return r?t:u?e.call(t):l?e(t[0],n):o},et=/^-ms-/,nt=/-([a-z])/g;function it(t,e){return e.toUpperCase()}function rt(t){return t.replace(et,"ms-").replace(nt,it)}var ot=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function at(){this.expando=E.expando+at.uid++}at.uid=1,at.prototype={cache:function(t){var e=t[this.expando];return e||(e={},ot(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[rt(e)]=n;else for(i in e)r[rt(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][rt(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(rt):(e=rt(e))in i?[e]:e.match(X)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||E.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!E.isEmptyObject(e)}};var st=new at,lt=new at,ut=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ct=/[A-Z]/g;function ht(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(ct,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:ut.test(t)?JSON.parse(t):t)}(n)}catch(t){}lt.set(t,e,n)}else n=void 0;return n}E.extend({hasData:function(t){return lt.hasData(t)||st.hasData(t)},data:function(t,e,n){return lt.access(t,e,n)},removeData:function(t,e){lt.remove(t,e)},_data:function(t,e,n){return st.access(t,e,n)},_removeData:function(t,e){st.remove(t,e)}}),E.fn.extend({data:function(t,e){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(r=lt.get(o),1===o.nodeType&&!st.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(i=a[n].name).indexOf("data-")&&(i=rt(i.slice(5)),ht(o,i,r[i]));st.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){lt.set(this,t)}):tt(this,function(e){var n;if(o&&void 0===e)return void 0!==(n=lt.get(o,t))||void 0!==(n=ht(o,t))?n:void 0;this.each(function(){lt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){lt.remove(this,t)})}}),E.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=st.get(t,e),n&&(!i||Array.isArray(n)?i=st.access(t,e,E.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=E.queue(t,e),i=n.length,r=n.shift(),o=E._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,function(){E.dequeue(t,e)},o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return st.get(t,n)||st.access(t,n,{empty:E.Callbacks("once memory").add(function(){st.remove(t,[e+"queue",n])})})}}),E.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?E.queue(this[0],t):void 0===e?this:this.each(function(){var n=E.queue(this,t,e);E._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&E.dequeue(this,t)})},dequeue:function(t){return this.each(function(){E.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=E.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=st.get(o[a],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(e)}});var dt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ft=new RegExp("^(?:([+-])=|)("+dt+")([a-z%]*)$","i"),pt=["Top","Right","Bottom","Left"],mt=x.documentElement,gt=function(t){return E.contains(t.ownerDocument,t)},yt={composed:!0};mt.getRootNode&&(gt=function(t){return E.contains(t.ownerDocument,t)||t.getRootNode(yt)===t.ownerDocument});var vt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&gt(t)&&"none"===E.css(t,"display")};function xt(t,e,n,i){var r,o,a=20,s=i?function(){return i.cur()}:function(){return E.css(t,e,"")},l=s(),u=n&&n[3]||(E.cssNumber[e]?"":"px"),c=t.nodeType&&(E.cssNumber[e]||"px"!==u&&+l)&&ft.exec(E.css(t,e));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;a--;)E.style(t,e,c+u),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),c/=o;c*=2,E.style(t,e,c+u),n=n||[]}return n&&(c=+c||+l||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=r)),r}var _t={};function bt(t){var e,n=t.ownerDocument,i=t.nodeName,r=_t[i];return r||(e=n.body.appendChild(n.createElement(i)),r=E.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),_t[i]=r,r)}function wt(t,e){for(var n,i,r=[],o=0,a=t.length;o<a;o++)(i=t[o]).style&&(n=i.style.display,e?("none"===n&&(r[o]=st.get(i,"display")||null,r[o]||(i.style.display="")),""===i.style.display&&vt(i)&&(r[o]=bt(i))):"none"!==n&&(r[o]="none",st.set(i,"display",n)));for(o=0;o<a;o++)null!=r[o]&&(t[o].style.display=r[o]);return t}E.fn.extend({show:function(){return wt(this,!0)},hide:function(){return wt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){vt(this)?E(this).show():E(this).hide()})}});var Mt,At,Et=/^(?:checkbox|radio)$/i,Tt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,St=/^$|^module$|\/(?:java|ecma)script/i;Mt=x.createDocumentFragment().appendChild(x.createElement("div")),(At=x.createElement("input")).setAttribute("type","radio"),At.setAttribute("checked","checked"),At.setAttribute("name","t"),Mt.appendChild(At),g.checkClone=Mt.cloneNode(!0).cloneNode(!0).lastChild.checked,Mt.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!Mt.cloneNode(!0).lastChild.defaultValue,Mt.innerHTML="<option></option>",g.option=!!Mt.lastChild;var Ct={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function kt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&S(t,e)?E.merge([t],n):n}function Pt(t,e){for(var n=0,i=t.length;n<i;n++)st.set(t[n],"globalEval",!e||st.get(e[n],"globalEval"))}Ct.tbody=Ct.tfoot=Ct.colgroup=Ct.caption=Ct.thead,Ct.th=Ct.td,g.option||(Ct.optgroup=Ct.option=[1,"<select multiple='multiple'>","</select>"]);var Ot=/<|&#?\w+;/;function Lt(t,e,n,i,r){for(var o,a,s,l,u,c,h=e.createDocumentFragment(),d=[],f=0,p=t.length;f<p;f++)if((o=t[f])||0===o)if("object"===w(o))E.merge(d,o.nodeType?[o]:o);else if(Ot.test(o)){for(a=a||h.appendChild(e.createElement("div")),s=(Tt.exec(o)||["",""])[1].toLowerCase(),l=Ct[s]||Ct._default,a.innerHTML=l[1]+E.htmlPrefilter(o)+l[2],c=l[0];c--;)a=a.lastChild;E.merge(d,a.childNodes),(a=h.firstChild).textContent=""}else d.push(e.createTextNode(o));for(h.textContent="",f=0;o=d[f++];)if(i&&E.inArray(o,i)>-1)r&&r.push(o);else if(u=gt(o),a=kt(h.appendChild(o),"script"),u&&Pt(a),n)for(c=0;o=a[c++];)St.test(o.type||"")&&n.push(o);return h}var It=/^([^.]*)(?:\.(.+)|)/;function Rt(){return!0}function Dt(){return!1}function jt(t,e,n,i,r,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(i=i||n,n=void 0),e)jt(t,s,n,i,e[s],o);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=Dt;else if(!r)return t;return 1===o&&(a=r,r=function(t){return E().off(t),a.apply(this,arguments)},r.guid=a.guid||(a.guid=E.guid++)),t.each(function(){E.event.add(this,e,r,i,n)})}function Ft(t,e,n){n?(st.set(t,e,!1),E.event.add(t,e,{namespace:!1,handler:function(t){var n,i=st.get(this,e);if(1&t.isTrigger&&this[e]){if(i)(E.event.special[e]||{}).delegateType&&t.stopPropagation();else if(i=s.call(arguments),st.set(this,e,i),this[e](),n=st.get(this,e),st.set(this,e,!1),i!==n)return t.stopImmediatePropagation(),t.preventDefault(),n}else i&&(st.set(this,e,E.event.trigger(i[0],i.slice(1),this)),t.stopPropagation(),t.isImmediatePropagationStopped=Rt)}})):void 0===st.get(t,e)&&E.event.add(t,e,Rt)}E.event={global:{},add:function(t,e,n,i,r){var o,a,s,l,u,c,h,d,f,p,m,g=st.get(t);if(ot(t))for(n.handler&&(n=(o=n).handler,r=o.selector),r&&E.find.matchesSelector(mt,r),n.guid||(n.guid=E.guid++),(l=g.events)||(l=g.events=Object.create(null)),(a=g.handle)||(a=g.handle=function(e){return void 0!==E&&E.event.triggered!==e.type?E.event.dispatch.apply(t,arguments):void 0}),u=(e=(e||"").match(X)||[""]).length;u--;)f=m=(s=It.exec(e[u])||[])[1],p=(s[2]||"").split(".").sort(),f&&(h=E.event.special[f]||{},f=(r?h.delegateType:h.bindType)||f,h=E.event.special[f]||{},c=E.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&E.expr.match.needsContext.test(r),namespace:p.join(".")},o),(d=l[f])||((d=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,i,p,a)||t.addEventListener&&t.addEventListener(f,a)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,c):d.push(c),E.event.global[f]=!0)},remove:function(t,e,n,i,r){var o,a,s,l,u,c,h,d,f,p,m,g=st.hasData(t)&&st.get(t);if(g&&(l=g.events)){for(u=(e=(e||"").match(X)||[""]).length;u--;)if(f=m=(s=It.exec(e[u])||[])[1],p=(s[2]||"").split(".").sort(),f){for(h=E.event.special[f]||{},d=l[f=(i?h.delegateType:h.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)c=d[o],!r&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(t,c));a&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,p,g.handle)||E.removeEvent(t,f,g.handle),delete l[f])}else for(f in l)E.event.remove(t,f+e[u],n,i,!0);E.isEmptyObject(l)&&st.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,o,a,s=new Array(arguments.length),l=E.event.fix(t),u=(st.get(this,"events")||Object.create(null))[l.type]||[],c=E.event.special[l.type]||{};for(s[0]=l,e=1;e<arguments.length;e++)s[e]=arguments[e];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){for(a=E.event.handlers.call(this,l,u),e=0;(r=a[e++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(i=((E.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,s))&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(t,e){var n,i,r,o,a,s=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!("click"===t.type&&t.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||!0!==u.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[r=(i=e[n]).selector+" "]&&(a[r]=i.needsContext?E(r,this).index(u)>-1:E.find(r,this,null,[u]).length),a[r]&&o.push(i);o.length&&s.push({elem:u,handlers:o})}return u=this,l<e.length&&s.push({elem:u,handlers:e.slice(l)}),s},addProp:function(t,e){Object.defineProperty(E.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[E.expando]?t:new E.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return Et.test(e.type)&&e.click&&S(e,"input")&&Ft(e,"click",!0),!1},trigger:function(t){var e=this||t;return Et.test(e.type)&&e.click&&S(e,"input")&&Ft(e,"click"),!0},_default:function(t){var e=t.target;return Et.test(e.type)&&e.click&&S(e,"input")&&st.get(e,"click")||S(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},E.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},E.Event=function(t,e){if(!(this instanceof E.Event))return new E.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Rt:Dt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&E.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:Dt,isPropagationStopped:Dt,isImmediatePropagationStopped:Dt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Rt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Rt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Rt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},function(t,e){function n(t){if(x.documentMode){var n=st.get(this,"handle"),i=E.event.fix(t);i.type="focusin"===t.type?"focus":"blur",i.isSimulated=!0,n(t),i.target===i.currentTarget&&n(i)}else E.event.simulate(e,t.target,E.event.fix(t))}E.event.special[t]={setup:function(){var i;if(Ft(this,t,!0),!x.documentMode)return!1;(i=st.get(this,e))||this.addEventListener(e,n),st.set(this,e,(i||0)+1)},trigger:function(){return Ft(this,t),!0},teardown:function(){var t;if(!x.documentMode)return!1;(t=st.get(this,e)-1)?st.set(this,e,t):(this.removeEventListener(e,n),st.remove(this,e))},_default:function(e){return st.get(e.target,t)},delegateType:e},E.event.special[e]={setup:function(){var i=this.ownerDocument||this.document||this,r=x.documentMode?this:i,o=st.get(r,e);o||(x.documentMode?this.addEventListener(e,n):i.addEventListener(t,n,!0)),st.set(r,e,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=x.documentMode?this:i,o=st.get(r,e)-1;o?st.set(r,e,o):(x.documentMode?this.removeEventListener(e,n):i.removeEventListener(t,n,!0),st.remove(r,e))}}}),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){E.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=t.relatedTarget,r=t.handleObj;return i&&(i===this||E.contains(this,i))||(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),E.fn.extend({on:function(t,e,n,i){return jt(this,t,e,n,i)},one:function(t,e,n,i){return jt(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,E(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Dt),this.each(function(){E.event.remove(this,t,n,e)})}});var Gt=/<script|<style|<link/i,Nt=/checked\s*(?:[^=]|=\s*.checked.)/i,zt=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Bt(t,e){return S(t,"table")&&S(11!==e.nodeType?e:e.firstChild,"tr")&&E(t).children("tbody")[0]||t}function Vt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function qt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Ut(t,e){var n,i,r,o,a,s;if(1===e.nodeType){if(st.hasData(t)&&(s=st.get(t).events))for(r in st.remove(e,"handle events"),s)for(n=0,i=s[r].length;n<i;n++)E.event.add(e,r,s[r][n]);lt.hasData(t)&&(o=lt.access(t),a=E.extend({},o),lt.set(e,a))}}function Ht(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Et.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Wt(t,e,n,i){e=l(e);var r,o,a,s,u,c,h=0,d=t.length,f=d-1,p=e[0],m=y(p);if(m||d>1&&"string"==typeof p&&!g.checkClone&&Nt.test(p))return t.each(function(r){var o=t.eq(r);m&&(e[0]=p.call(this,r,o.html())),Wt(o,e,n,i)});if(d&&(o=(r=Lt(e,t[0].ownerDocument,!1,t,i)).firstChild,1===r.childNodes.length&&(r=o),o||i)){for(s=(a=E.map(kt(r,"script"),Vt)).length;h<d;h++)u=r,h!==f&&(u=E.clone(u,!0,!0),s&&E.merge(a,kt(u,"script"))),n.call(t[h],u,h);if(s)for(c=a[a.length-1].ownerDocument,E.map(a,qt),h=0;h<s;h++)u=a[h],St.test(u.type||"")&&!st.access(u,"globalEval")&&E.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?E._evalUrl&&!u.noModule&&E._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},c):b(u.textContent.replace(zt,""),u,c))}return t}function Xt(t,e,n){for(var i,r=e?E.filter(e,t):t,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||E.cleanData(kt(i)),i.parentNode&&(n&&gt(i)&&Pt(kt(i,"script")),i.parentNode.removeChild(i));return t}E.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var i,r,o,a,s=t.cloneNode(!0),l=gt(t);if(!(g.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||E.isXMLDoc(t)))for(a=kt(s),i=0,r=(o=kt(t)).length;i<r;i++)Ht(o[i],a[i]);if(e)if(n)for(o=o||kt(t),a=a||kt(s),i=0,r=o.length;i<r;i++)Ut(o[i],a[i]);else Ut(t,s);return(a=kt(s,"script")).length>0&&Pt(a,!l&&kt(t,"script")),s},cleanData:function(t){for(var e,n,i,r=E.event.special,o=0;void 0!==(n=t[o]);o++)if(ot(n)){if(e=n[st.expando]){if(e.events)for(i in e.events)r[i]?E.event.remove(n,i):E.removeEvent(n,i,e.handle);n[st.expando]=void 0}n[lt.expando]&&(n[lt.expando]=void 0)}}}),E.fn.extend({detach:function(t){return Xt(this,t,!0)},remove:function(t){return Xt(this,t)},text:function(t){return tt(this,function(t){return void 0===t?E.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Wt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Bt(this,t).appendChild(t)})},prepend:function(){return Wt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Bt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Wt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Wt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(E.cleanData(kt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return E.clone(this,t,e)})},html:function(t){return tt(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Gt.test(t)&&!Ct[(Tt.exec(t)||["",""])[1].toLowerCase()]){t=E.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(E.cleanData(kt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Wt(this,arguments,function(e){var n=this.parentNode;E.inArray(this,t)<0&&(E.cleanData(kt(this)),n&&n.replaceChild(e,this))},t)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){E.fn[t]=function(t){for(var n,i=[],r=E(t),o=r.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),E(r[a])[e](n),u.apply(i,n.get());return this.pushStack(i)}});var Kt=new RegExp("^("+dt+")(?!px)[a-z%]+$","i"),Qt=/^--/,Zt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=i),e.getComputedStyle(t)},Yt=function(t,e,n){var i,r,o={};for(r in e)o[r]=t.style[r],t.style[r]=e[r];for(r in i=n.call(t),e)t.style[r]=o[r];return i},Jt=new RegExp(pt.join("|"),"i");function $t(t,e,n){var i,r,o,a,s=Qt.test(e),l=t.style;return(n=n||Zt(t))&&(a=n.getPropertyValue(e)||n[e],s&&a&&(a=a.replace(L,"$1")||void 0),""!==a||gt(t)||(a=E.style(t,e)),!g.pixelBoxStyles()&&Kt.test(a)&&Jt.test(e)&&(i=l.width,r=l.minWidth,o=l.maxWidth,l.minWidth=l.maxWidth=l.width=a,a=n.width,l.width=i,l.minWidth=r,l.maxWidth=o)),void 0!==a?a+"":a}function te(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",mt.appendChild(u).appendChild(c);var t=i.getComputedStyle(c);n="1%"!==t.top,l=12===e(t.marginLeft),c.style.right="60%",a=36===e(t.right),r=36===e(t.width),c.style.position="absolute",o=12===e(c.offsetWidth/3),mt.removeChild(u),c=null}}function e(t){return Math.round(parseFloat(t))}var n,r,o,a,s,l,u=x.createElement("div"),c=x.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===c.style.backgroundClip,E.extend(g,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,e,n,r;return null==s&&(t=x.createElement("table"),e=x.createElement("tr"),n=x.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="box-sizing:content-box;border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",mt.appendChild(t).appendChild(e).appendChild(n),r=i.getComputedStyle(e),s=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===e.offsetHeight,mt.removeChild(t)),s}}))}();var ee=["Webkit","Moz","ms"],ne=x.createElement("div").style,ie={};function re(t){var e=E.cssProps[t]||ie[t];return e||(t in ne?t:ie[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=ee.length;n--;)if((t=ee[n]+e)in ne)return t}(t)||t)}var oe=/^(none|table(?!-c[ea]).+)/,ae={position:"absolute",visibility:"hidden",display:"block"},se={letterSpacing:"0",fontWeight:"400"};function le(t,e,n){var i=ft.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function ue(t,e,n,i,r,o){var a="width"===e?1:0,s=0,l=0,u=0;if(n===(i?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=E.css(t,n+pt[a],!0,r)),i?("content"===n&&(l-=E.css(t,"padding"+pt[a],!0,r)),"margin"!==n&&(l-=E.css(t,"border"+pt[a]+"Width",!0,r))):(l+=E.css(t,"padding"+pt[a],!0,r),"padding"!==n?l+=E.css(t,"border"+pt[a]+"Width",!0,r):s+=E.css(t,"border"+pt[a]+"Width",!0,r));return!i&&o>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-s-.5))||0),l+u}function ce(t,e,n){var i=Zt(t),r=(!g.boxSizingReliable()||n)&&"border-box"===E.css(t,"boxSizing",!1,i),o=r,a=$t(t,e,i),s="offset"+e[0].toUpperCase()+e.slice(1);if(Kt.test(a)){if(!n)return a;a="auto"}return(!g.boxSizingReliable()&&r||!g.reliableTrDimensions()&&S(t,"tr")||"auto"===a||!parseFloat(a)&&"inline"===E.css(t,"display",!1,i))&&t.getClientRects().length&&(r="border-box"===E.css(t,"boxSizing",!1,i),(o=s in t)&&(a=t[s])),(a=parseFloat(a)||0)+ue(t,e,n||(r?"border":"content"),o,i,a)+"px"}function he(t,e,n,i,r){return new he.prototype.init(t,e,n,i,r)}E.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=$t(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,s=rt(e),l=Qt.test(e),u=t.style;if(l||(e=re(s)),a=E.cssHooks[e]||E.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(t,!1,i))?r:u[e];"string"===(o=typeof n)&&(r=ft.exec(n))&&r[1]&&(n=xt(t,e,r),o="number"),null!=n&&n==n&&("number"!==o||l||(n+=r&&r[3]||(E.cssNumber[s]?"":"px")),g.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,i))||(l?u.setProperty(e,n):u[e]=n))}},css:function(t,e,n,i){var r,o,a,s=rt(e);return Qt.test(e)||(e=re(s)),(a=E.cssHooks[e]||E.cssHooks[s])&&"get"in a&&(r=a.get(t,!0,n)),void 0===r&&(r=$t(t,e,i)),"normal"===r&&e in se&&(r=se[e]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),E.each(["height","width"],function(t,e){E.cssHooks[e]={get:function(t,n,i){if(n)return!oe.test(E.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ce(t,e,i):Yt(t,ae,function(){return ce(t,e,i)})},set:function(t,n,i){var r,o=Zt(t),a=!g.scrollboxSize()&&"absolute"===o.position,s=(a||i)&&"border-box"===E.css(t,"boxSizing",!1,o),l=i?ue(t,e,i,s,o):0;return s&&a&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-ue(t,e,"border",!1,o)-.5)),l&&(r=ft.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=E.css(t,e)),le(0,n,l)}}}),E.cssHooks.marginLeft=te(g.reliableMarginLeft,function(t,e){if(e)return(parseFloat($t(t,"marginLeft"))||t.getBoundingClientRect().left-Yt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),E.each({margin:"",padding:"",border:"Width"},function(t,e){E.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+pt[i]+e]=o[i]||o[i-2]||o[0];return r}},"margin"!==t&&(E.cssHooks[t+e].set=le)}),E.fn.extend({css:function(t,e){return tt(this,function(t,e,n){var i,r,o={},a=0;if(Array.isArray(e)){for(i=Zt(t),r=e.length;a<r;a++)o[e[a]]=E.css(t,e[a],!1,i);return o}return void 0!==n?E.style(t,e,n):E.css(t,e)},t,e,arguments.length>1)}}),E.Tween=he,he.prototype={constructor:he,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||E.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(E.cssNumber[n]?"":"px")},cur:function(){var t=he.propHooks[this.prop];return t&&t.get?t.get(this):he.propHooks._default.get(this)},run:function(t){var e,n=he.propHooks[this.prop];return this.options.duration?this.pos=e=E.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):he.propHooks._default.set(this),this}},he.prototype.init.prototype=he.prototype,he.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=E.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){E.fx.step[t.prop]?E.fx.step[t.prop](t):1!==t.elem.nodeType||!E.cssHooks[t.prop]&&null==t.elem.style[re(t.prop)]?t.elem[t.prop]=t.now:E.style(t.elem,t.prop,t.now+t.unit)}}},he.propHooks.scrollTop=he.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},E.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},E.fx=he.prototype.init,E.fx.step={};var de,fe,pe=/^(?:toggle|show|hide)$/,me=/queueHooks$/;function ge(){fe&&(!1===x.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(ge):i.setTimeout(ge,E.fx.interval),E.fx.tick())}function ye(){return i.setTimeout(function(){de=void 0}),de=Date.now()}function ve(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=pt[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function xe(t,e,n){for(var i,r=(_e.tweeners[e]||[]).concat(_e.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,e,t))return i}function _e(t,e,n){var i,r,o=0,a=_e.prefilters.length,s=E.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=de||ye(),n=Math.max(0,u.startTime+u.duration-e),i=1-(n/u.duration||0),o=0,a=u.tweens.length;o<a;o++)u.tweens[o].run(i);return s.notifyWith(t,[u,i,n]),i<1&&a?n:(a||s.notifyWith(t,[u,1,0]),s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:E.extend({},e),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},n),originalProperties:e,originalOptions:n,startTime:de||ye(),duration:n.duration,tweens:[],createTween:function(e,n){var i=E.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)u.tweens[n].run(1);return e?(s.notifyWith(t,[u,1,0]),s.resolveWith(t,[u,e])):s.rejectWith(t,[u,e]),this}}),c=u.props;for(!function(t,e){var n,i,r,o,a;for(n in t)if(r=e[i=rt(n)],o=t[n],Array.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),(a=E.cssHooks[i])&&"expand"in a)for(n in o=a.expand(o),delete t[i],o)n in t||(t[n]=o[n],e[n]=r);else e[i]=r}(c,u.opts.specialEasing);o<a;o++)if(i=_e.prefilters[o].call(u,t,c,u.opts))return y(i.stop)&&(E._queueHooks(u.elem,u.opts.queue).stop=i.stop.bind(i)),i;return E.map(c,xe,u),y(u.opts.start)&&u.opts.start.call(t,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),E.fx.timer(E.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u}E.Animation=E.extend(_e,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return xt(n.elem,t,ft.exec(e),n),n}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(X);for(var n,i=0,r=t.length;i<r;i++)n=t[i],_e.tweeners[n]=_e.tweeners[n]||[],_e.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,r,o,a,s,l,u,c,h="width"in e||"height"in e,d=this,f={},p=t.style,m=t.nodeType&&vt(t),g=st.get(t,"fxshow");for(i in n.queue||(null==(a=E._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,E.queue(t,"fx").length||a.empty.fire()})})),e)if(r=e[i],pe.test(r)){if(delete e[i],o=o||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}f[i]=g&&g[i]||E.style(t,i)}if((l=!E.isEmptyObject(e))||!E.isEmptyObject(f))for(i in h&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(u=g&&g.display)&&(u=st.get(t,"display")),"none"===(c=E.css(t,"display"))&&(u?c=u:(wt([t],!0),u=t.style.display||u,c=E.css(t,"display"),wt([t]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===E.css(t,"float")&&(l||(d.done(function(){p.display=u}),null==u&&(c=p.display,u="none"===c?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,f)l||(g?"hidden"in g&&(m=g.hidden):g=st.access(t,"fxshow",{display:u}),o&&(g.hidden=!m),m&&wt([t],!0),d.done(function(){for(i in m||wt([t]),st.remove(t,"fxshow"),f)E.style(t,i,f[i])})),l=xe(m?g[i]:0,i,d),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?_e.prefilters.unshift(t):_e.prefilters.push(t)}}),E.speed=function(t,e,n){var i=t&&"object"==typeof t?E.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};return E.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in E.fx.speeds?i.duration=E.fx.speeds[i.duration]:i.duration=E.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){y(i.old)&&i.old.call(this),i.queue&&E.dequeue(this,i.queue)},i},E.fn.extend({fadeTo:function(t,e,n,i){return this.filter(vt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=E.isEmptyObject(t),o=E.speed(e,n,i),a=function(){var e=_e(this,E.extend({},t),o);(r||st.get(this,"finish"))&&e.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=E.timers,a=st.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&me.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(n),e=!1,o.splice(r,1));!e&&n||E.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=st.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],o=E.timers,a=i?i.length:0;for(n.finish=!0,E.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),E.each(["toggle","show","hide"],function(t,e){var n=E.fn[e];E.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ve(e,!0),t,i,r)}}),E.each({slideDown:ve("show"),slideUp:ve("hide"),slideToggle:ve("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){E.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),E.timers=[],E.fx.tick=function(){var t,e=0,n=E.timers;for(de=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||E.fx.stop(),de=void 0},E.fx.timer=function(t){E.timers.push(t),E.fx.start()},E.fx.interval=13,E.fx.start=function(){fe||(fe=!0,ge())},E.fx.stop=function(){fe=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(t,e){return t=E.fx&&E.fx.speeds[t]||t,e=e||"fx",this.queue(e,function(e,n){var r=i.setTimeout(e,t);n.stop=function(){i.clearTimeout(r)}})},function(){var t=x.createElement("input"),e=x.createElement("select").appendChild(x.createElement("option"));t.type="checkbox",g.checkOn=""!==t.value,g.optSelected=e.selected,(t=x.createElement("input")).value="t",t.type="radio",g.radioValue="t"===t.value}();var be,we=E.expr.attrHandle;E.fn.extend({attr:function(t,e){return tt(this,E.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){E.removeAttr(this,t)})}}),E.extend({attr:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?E.prop(t,e,n):(1===o&&E.isXMLDoc(t)||(r=E.attrHooks[e.toLowerCase()]||(E.expr.match.bool.test(e)?be:void 0)),void 0!==n?null===n?void E.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=E.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!g.radioValue&&"radio"===e&&S(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(X);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),be={set:function(t,e,n){return!1===e?E.removeAttr(t,n):t.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),function(t,e){var n=we[e]||E.find.attr;we[e]=function(t,e,i){var r,o,a=e.toLowerCase();return i||(o=we[a],we[a]=r,r=null!=n(t,e,i)?a:null,we[a]=o),r}});var Me=/^(?:input|select|textarea|button)$/i,Ae=/^(?:a|area)$/i;function Ee(t){return(t.match(X)||[]).join(" ")}function Te(t){return t.getAttribute&&t.getAttribute("class")||""}function Se(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(X)||[]}E.fn.extend({prop:function(t,e){return tt(this,E.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[E.propFix[t]||t]})}}),E.extend({prop:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&E.isXMLDoc(t)||(e=E.propFix[e]||e,r=E.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=E.find.attr(t,"tabindex");return e?parseInt(e,10):Me.test(t.nodeName)||Ae.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(E.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){E.propFix[this.toLowerCase()]=this}),E.fn.extend({addClass:function(t){var e,n,i,r,o,a;return y(t)?this.each(function(e){E(this).addClass(t.call(this,e,Te(this)))}):(e=Se(t)).length?this.each(function(){if(i=Te(this),n=1===this.nodeType&&" "+Ee(i)+" "){for(o=0;o<e.length;o++)r=e[o],n.indexOf(" "+r+" ")<0&&(n+=r+" ");a=Ee(n),i!==a&&this.setAttribute("class",a)}}):this},removeClass:function(t){var e,n,i,r,o,a;return y(t)?this.each(function(e){E(this).removeClass(t.call(this,e,Te(this)))}):arguments.length?(e=Se(t)).length?this.each(function(){if(i=Te(this),n=1===this.nodeType&&" "+Ee(i)+" "){for(o=0;o<e.length;o++)for(r=e[o];n.indexOf(" "+r+" ")>-1;)n=n.replace(" "+r+" "," ");a=Ee(n),i!==a&&this.setAttribute("class",a)}}):this:this.attr("class","")},toggleClass:function(t,e){var n,i,r,o,a=typeof t,s="string"===a||Array.isArray(t);return y(t)?this.each(function(n){E(this).toggleClass(t.call(this,n,Te(this),e),e)}):"boolean"==typeof e&&s?e?this.addClass(t):this.removeClass(t):(n=Se(t),this.each(function(){if(s)for(o=E(this),r=0;r<n.length;r++)i=n[r],o.hasClass(i)?o.removeClass(i):o.addClass(i);else void 0!==t&&"boolean"!==a||((i=Te(this))&&st.set(this,"__className__",i),this.setAttribute&&this.setAttribute("class",i||!1===t?"":st.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+Ee(Te(n))+" ").indexOf(e)>-1)return!0;return!1}});var Ce=/\r/g;E.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=y(t),this.each(function(n){var r;1===this.nodeType&&(null==(r=i?t.call(this,n,E(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=E.map(r,function(t){return null==t?"":t+""})),(e=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=E.valHooks[r.type]||E.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(Ce,""):null==n?"":n:void 0}}),E.extend({valHooks:{option:{get:function(t){var e=E.find.attr(t,"value");return null!=e?e:Ee(E.text(t))}},select:{get:function(t){var e,n,i,r=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],l=a?o+1:r.length;for(i=o<0?l:a?o:0;i<l;i++)if(((n=r[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!S(n.parentNode,"optgroup"))){if(e=E(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,i,r=t.options,o=E.makeArray(e),a=r.length;a--;)((i=r[a]).selected=E.inArray(E.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),E.each(["radio","checkbox"],function(){E.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=E.inArray(E(t).val(),e)>-1}},g.checkOn||(E.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var ke=i.location,Pe={guid:Date.now()},Oe=/\?/;E.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new i.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||E.error("Invalid XML: "+(n?E.map(n.childNodes,function(t){return t.textContent}).join("\n"):t)),e};var Le=/^(?:focusinfocus|focusoutblur)$/,Ie=function(t){t.stopPropagation()};E.extend(E.event,{trigger:function(t,e,n,r){var o,a,s,l,u,c,h,d,p=[n||x],m=f.call(t,"type")?t.type:t,g=f.call(t,"namespace")?t.namespace.split("."):[];if(a=d=s=n=n||x,3!==n.nodeType&&8!==n.nodeType&&!Le.test(m+E.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),u=m.indexOf(":")<0&&"on"+m,(t=t[E.expando]?t:new E.Event(m,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:E.makeArray(e,[t]),h=E.event.special[m]||{},r||!h.trigger||!1!==h.trigger.apply(n,e))){if(!r&&!h.noBubble&&!v(n)){for(l=h.delegateType||m,Le.test(l+m)||(a=a.parentNode);a;a=a.parentNode)p.push(a),s=a;s===(n.ownerDocument||x)&&p.push(s.defaultView||s.parentWindow||i)}for(o=0;(a=p[o++])&&!t.isPropagationStopped();)d=a,t.type=o>1?l:h.bindType||m,(c=(st.get(a,"events")||Object.create(null))[t.type]&&st.get(a,"handle"))&&c.apply(a,e),(c=u&&a[u])&&c.apply&&ot(a)&&(t.result=c.apply(a,e),!1===t.result&&t.preventDefault());return t.type=m,r||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),e)||!ot(n)||u&&y(n[m])&&!v(n)&&((s=n[u])&&(n[u]=null),E.event.triggered=m,t.isPropagationStopped()&&d.addEventListener(m,Ie),n[m](),t.isPropagationStopped()&&d.removeEventListener(m,Ie),E.event.triggered=void 0,s&&(n[u]=s)),t.result}},simulate:function(t,e,n){var i=E.extend(new E.Event,n,{type:t,isSimulated:!0});E.event.trigger(i,null,e)}}),E.fn.extend({trigger:function(t,e){return this.each(function(){E.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return E.event.trigger(t,e,n,!0)}});var Re=/\[\]$/,De=/\r?\n/g,je=/^(?:submit|button|image|reset|file)$/i,Fe=/^(?:input|select|textarea|keygen)/i;function Ge(t,e,n,i){var r;if(Array.isArray(e))E.each(e,function(e,r){n||Re.test(t)?i(t,r):Ge(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,i)});else if(n||"object"!==w(e))i(t,e);else for(r in e)Ge(t+"["+r+"]",e[r],n,i)}E.param=function(t,e){var n,i=[],r=function(t,e){var n=y(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!E.isPlainObject(t))E.each(t,function(){r(this.name,this.value)});else for(n in t)Ge(n,t[n],e,r);return i.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=E.prop(this,"elements");return t?E.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!E(this).is(":disabled")&&Fe.test(this.nodeName)&&!je.test(t)&&(this.checked||!Et.test(t))}).map(function(t,e){var n=E(this).val();return null==n?null:Array.isArray(n)?E.map(n,function(t){return{name:e.name,value:t.replace(De,"\r\n")}}):{name:e.name,value:n.replace(De,"\r\n")}}).get()}});var Ne=/%20/g,ze=/#.*$/,Be=/([?&])_=[^&]*/,Ve=/^(.*?):[ \t]*([^\r\n]*)$/gm,qe=/^(?:GET|HEAD)$/,Ue=/^\/\//,He={},We={},Xe="*/".concat("*"),Ke=x.createElement("a");function Qe(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(X)||[];if(y(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function Ze(t,e,n,i){var r={},o=t===We;function a(s){var l;return r[s]=!0,E.each(t[s]||[],function(t,s){var u=s(e,n,i);return"string"!=typeof u||o||r[u]?o?!(l=u):void 0:(e.dataTypes.unshift(u),a(u),!1)}),l}return a(e.dataTypes[0])||!r["*"]&&a("*")}function Ye(t,e){var n,i,r=E.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&E.extend(!0,t,i),t}Ke.href=ke.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ke.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ke.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ye(Ye(t,E.ajaxSettings),e):Ye(E.ajaxSettings,t)},ajaxPrefilter:Qe(He),ajaxTransport:Qe(We),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r,o,a,s,l,u,c,h,d,f=E.ajaxSetup({},e),p=f.context||f,m=f.context&&(p.nodeType||p.jquery)?E(p):E.event,g=E.Deferred(),y=E.Callbacks("once memory"),v=f.statusCode||{},_={},b={},w="canceled",M={readyState:0,getResponseHeader:function(t){var e;if(u){if(!a)for(a={};e=Ve.exec(o);)a[e[1].toLowerCase()+" "]=(a[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=a[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(t,e){return null==u&&(t=b[t.toLowerCase()]=b[t.toLowerCase()]||t,_[t]=e),this},overrideMimeType:function(t){return null==u&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(u)M.always(t[M.status]);else for(e in t)v[e]=[v[e],t[e]];return this},abort:function(t){var e=t||w;return n&&n.abort(e),A(0,e),this}};if(g.promise(M),f.url=((t||f.url||ke.href)+"").replace(Ue,ke.protocol+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(X)||[""],null==f.crossDomain){l=x.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=Ke.protocol+"//"+Ke.host!=l.protocol+"//"+l.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=E.param(f.data,f.traditional)),Ze(He,f,e,M),u)return M;for(h in(c=E.event&&f.global)&&0===E.active++&&E.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!qe.test(f.type),r=f.url.replace(ze,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Ne,"+")):(d=f.url.slice(r.length),f.data&&(f.processData||"string"==typeof f.data)&&(r+=(Oe.test(r)?"&":"?")+f.data,delete f.data),!1===f.cache&&(r=r.replace(Be,"$1"),d=(Oe.test(r)?"&":"?")+"_="+Pe.guid+++d),f.url=r+d),f.ifModified&&(E.lastModified[r]&&M.setRequestHeader("If-Modified-Since",E.lastModified[r]),E.etag[r]&&M.setRequestHeader("If-None-Match",E.etag[r])),(f.data&&f.hasContent&&!1!==f.contentType||e.contentType)&&M.setRequestHeader("Content-Type",f.contentType),M.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Xe+"; q=0.01":""):f.accepts["*"]),f.headers)M.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(p,M,f)||u))return M.abort();if(w="abort",y.add(f.complete),M.done(f.success),M.fail(f.error),n=Ze(We,f,e,M)){if(M.readyState=1,c&&m.trigger("ajaxSend",[M,f]),u)return M;f.async&&f.timeout>0&&(s=i.setTimeout(function(){M.abort("timeout")},f.timeout));try{u=!1,n.send(_,A)}catch(t){if(u)throw t;A(-1,t)}}else A(-1,"No Transport");function A(t,e,a,l){var h,d,x,_,b,w=e;u||(u=!0,s&&i.clearTimeout(s),n=void 0,o=l||"",M.readyState=t>0?4:0,h=t>=200&&t<300||304===t,a&&(_=function(t,e,n){for(var i,r,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(f,M,a)),!h&&E.inArray("script",f.dataTypes)>-1&&E.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),_=function(t,e,n,i){var r,o,a,s,l,u={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(r in u)if((s=r.split(" "))[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[r]:!0!==u[r]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(f,_,M,h),h?(f.ifModified&&((b=M.getResponseHeader("Last-Modified"))&&(E.lastModified[r]=b),(b=M.getResponseHeader("etag"))&&(E.etag[r]=b)),204===t||"HEAD"===f.type?w="nocontent":304===t?w="notmodified":(w=_.state,d=_.data,h=!(x=_.error))):(x=w,!t&&w||(w="error",t<0&&(t=0))),M.status=t,M.statusText=(e||w)+"",h?g.resolveWith(p,[d,w,M]):g.rejectWith(p,[M,w,x]),M.statusCode(v),v=void 0,c&&m.trigger(h?"ajaxSuccess":"ajaxError",[M,f,h?d:x]),y.fireWith(p,[M,w]),c&&(m.trigger("ajaxComplete",[M,f]),--E.active||E.event.trigger("ajaxStop")))}return M},getJSON:function(t,e,n){return E.get(t,e,n,"json")},getScript:function(t,e){return E.get(t,void 0,e,"script")}}),E.each(["get","post"],function(t,e){E[e]=function(t,n,i,r){return y(n)&&(r=r||i,i=n,n=void 0),E.ajax(E.extend({url:t,type:e,dataType:r,data:n,success:i},E.isPlainObject(t)&&t))}}),E.ajaxPrefilter(function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")}),E._evalUrl=function(t,e,n){return E.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){E.globalEval(t,e,n)}})},E.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=E(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return y(t)?this.each(function(e){E(this).wrapInner(t.call(this,e))}):this.each(function(){var e=E(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=y(t);return this.each(function(n){E(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){E(this).replaceWith(this.childNodes)}),this}}),E.expr.pseudos.hidden=function(t){return!E.expr.pseudos.visible(t)},E.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(t){}};var Je={0:200,1223:204},$e=E.ajaxSettings.xhr();g.cors=!!$e&&"withCredentials"in $e,g.ajax=$e=!!$e,E.ajaxTransport(function(t){var e,n;if(g.cors||$e&&!t.crossDomain)return{send:function(r,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)s.setRequestHeader(a,r[a]);e=function(t){return function(){e&&(e=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Je[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=e(),n=s.onerror=s.ontimeout=e("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&i.setTimeout(function(){e&&n()})},e=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),E.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return E.globalEval(t),t}}}),E.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),E.ajaxTransport("script",function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(i,r){e=E("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),x.head.appendChild(e[0])},abort:function(){n&&n()}}});var tn,en=[],nn=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=en.pop()||E.expando+"_"+Pe.guid++;return this[t]=!0,t}}),E.ajaxPrefilter("json jsonp",function(t,e,n){var r,o,a,s=!1!==t.jsonp&&(nn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(nn,"$1"+r):!1!==t.jsonp&&(t.url+=(Oe.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||E.error(r+" was not called"),a[0]},t.dataTypes[0]="json",o=i[r],i[r]=function(){a=arguments},n.always(function(){void 0===o?E(i).removeProp(r):i[r]=o,t[r]&&(t.jsonpCallback=e.jsonpCallback,en.push(r)),a&&y(o)&&o(a[0]),a=o=void 0}),"script"}),g.createHTMLDocument=((tn=x.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===tn.childNodes.length),E.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(g.createHTMLDocument?((i=(e=x.implementation.createHTMLDocument("")).createElement("base")).href=x.location.href,e.head.appendChild(i)):e=x),o=!n&&[],(r=z.exec(t))?[e.createElement(r[1])]:(r=Lt([t],e,o),o&&o.length&&E(o).remove(),E.merge([],r.childNodes)));var i,r,o},E.fn.load=function(t,e,n){var i,r,o,a=this,s=t.indexOf(" ");return s>-1&&(i=Ee(t.slice(s)),t=t.slice(0,s)),y(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),a.length>0&&E.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(i?E("<div>").append(E.parseHTML(t)).find(i):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},E.expr.pseudos.animated=function(t){return E.grep(E.timers,function(e){return t===e.elem}).length},E.offset={setOffset:function(t,e,n){var i,r,o,a,s,l,u=E.css(t,"position"),c=E(t),h={};"static"===u&&(t.style.position="relative"),s=c.offset(),o=E.css(t,"top"),l=E.css(t,"left"),("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1?(a=(i=c.position()).top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),y(e)&&(e=e.call(t,n,E.extend({},s))),null!=e.top&&(h.top=e.top-s.top+a),null!=e.left&&(h.left=e.left-s.left+r),"using"in e?e.using.call(t,h):c.css(h)}},E.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){E.offset.setOffset(this,t,e)});var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===E.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===E.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((r=E(t).offset()).top+=E.css(t,"borderTopWidth",!0),r.left+=E.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-E.css(i,"marginTop",!0),left:e.left-r.left-E.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===E.css(t,"position");)t=t.offsetParent;return t||mt})}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;E.fn[t]=function(i){return tt(this,function(t,i,r){var o;if(v(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===r)return o?o[e]:t[i];o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):t[i]=r},t,i,arguments.length)}}),E.each(["top","left"],function(t,e){E.cssHooks[e]=te(g.pixelPosition,function(t,n){if(n)return n=$t(t,e),Kt.test(n)?E(t).position()[e]+"px":n})}),E.each({Height:"height",Width:"width"},function(t,e){E.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){E.fn[i]=function(r,o){var a=arguments.length&&(n||"boolean"!=typeof r),s=n||(!0===r||!0===o?"margin":"border");return tt(this,function(e,n,r){var o;return v(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===r?E.css(e,n,s):E.style(e,n,r,s)},e,a?r:void 0,a)}})}),E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){E.fn[e]=function(t){return this.on(e,t)}}),E.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.on("mouseenter",t).on("mouseleave",e||t)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){E.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}});var rn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;E.proxy=function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),y(t))return i=s.call(arguments,2),r=function(){return t.apply(e||this,i.concat(s.call(arguments)))},r.guid=t.guid=t.guid||E.guid++,r},E.holdReady=function(t){t?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=S,E.isFunction=y,E.isWindow=v,E.camelCase=rt,E.type=w,E.now=Date.now,E.isNumeric=function(t){var e=E.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},E.trim=function(t){return null==t?"":(t+"").replace(rn,"$1")},void 0===(n=function(){return E}.apply(e,[]))||(t.exports=n);var on=i.jQuery,an=i.$;return E.noConflict=function(t){return i.$===E&&(i.$=an),t&&i.jQuery===E&&(i.jQuery=on),E},void 0===r&&(i.jQuery=i.$=E),E})},7549:function(t,e,n){var i;!function(r,o){if(r){for(var a,s={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},l={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},u={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},c={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},h=1;h<20;++h)s[111+h]="f"+h;for(h=0;h<=9;++h)s[h+96]=h.toString();x.prototype.bind=function(t,e,n){var i=this;return t=t instanceof Array?t:[t],i._bindMultiple.call(i,t,e,n),i},x.prototype.unbind=function(t,e){return this.bind.call(this,t,function(){},e)},x.prototype.trigger=function(t,e){var n=this;return n._directMap[t+":"+e]&&n._directMap[t+":"+e]({},t),n},x.prototype.reset=function(){var t=this;return t._callbacks={},t._directMap={},t},x.prototype.stopCallback=function(t,e){if((" "+e.className+" ").indexOf(" mousetrap ")>-1)return!1;if(v(e,this.target))return!1;if("composedPath"in t&&"function"==typeof t.composedPath){var n=t.composedPath()[0];n!==t.target&&(e=n)}return"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},x.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},x.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(s[e]=t[e]);a=null},x.init=function(){var t=x(o);for(var e in t)"_"!==e.charAt(0)&&(x[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},x.init(),r.Mousetrap=x,t.exports&&(t.exports=x),void 0===(i=function(){return x}.call(e,n,e,t))||(t.exports=i)}function d(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function f(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return s[t.which]?s[t.which]:l[t.which]?l[t.which]:String.fromCharCode(t.which).toLowerCase()}function p(t,e){return t.sort().join(",")===e.sort().join(",")}function m(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function g(t,e,n){return n||(n=function(){if(!a)for(var t in a={},s)t>95&&t<112||s.hasOwnProperty(t)&&(a[s[t]]=t);return a}()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function y(t,e){var n,i,r,o=[];for(n=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),r=0;r<n.length;++r)i=n[r],c[i]&&(i=c[i]),e&&"keypress"!=e&&u[i]&&(i=u[i],o.push("shift")),m(i)&&o.push(i);return{key:i,modifiers:o,action:e=g(i,o,e)}}function v(t,e){return null!==t&&t!==o&&(t===e||v(t.parentNode,e))}function x(t){var e=this;if(t=t||o,!(e instanceof x))return new x(t);e.target=t,e._callbacks={},e._directMap={};var n,i={},r=!1,a=!1,s=!1;function l(t){t=t||{};var e,n=!1;for(e in i)t[e]?n=!0:i[e]=0;n||(s=!1)}function u(t,n,r,o,a,s){var l,u,c=[],h=r.type;if(!e._callbacks[t])return[];for("keyup"==h&&m(t)&&(n=[t]),l=0;l<e._callbacks[t].length;++l)if(u=e._callbacks[t][l],(o||!u.seq||i[u.seq]==u.level)&&h==u.action&&("keypress"==h&&!r.metaKey&&!r.ctrlKey||p(n,u.modifiers))){var d=!o&&u.combo==a,f=o&&u.seq==o&&u.level==s;(d||f)&&e._callbacks[t].splice(l,1),c.push(u)}return c}function c(t,n,i,r){e.stopCallback(n,n.target||n.srcElement,i,r)||!1===t(n,i)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(n),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(n))}function h(t){"number"!=typeof t.which&&(t.which=t.keyCode);var n=f(t);n&&("keyup"!=t.type||r!==n?e.handleKey(n,function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}(t),t):r=!1)}function g(t,e,o,a){function u(e){return function(){s=e,++i[t],clearTimeout(n),n=setTimeout(l,1e3)}}function h(e){c(o,e,t),"keyup"!==a&&(r=f(e)),setTimeout(l,10)}i[t]=0;for(var d=0;d<e.length;++d){var p=d+1===e.length?h:u(a||y(e[d+1]).action);v(e[d],p,a,t,d)}}function v(t,n,i,r,o){e._directMap[t+":"+i]=n;var a,s=(t=t.replace(/\s+/g," ")).split(" ");s.length>1?g(t,s,n,i):(a=y(t,i),e._callbacks[a.key]=e._callbacks[a.key]||[],u(a.key,a.modifiers,{type:a.action},r,t,o),e._callbacks[a.key][r?"unshift":"push"]({callback:n,modifiers:a.modifiers,action:a.action,seq:r,level:o,combo:t}))}e._handleKey=function(t,e,n){var i,r=u(t,e,n),o={},h=0,d=!1;for(i=0;i<r.length;++i)r[i].seq&&(h=Math.max(h,r[i].level));for(i=0;i<r.length;++i)if(r[i].seq){if(r[i].level!=h)continue;d=!0,o[r[i].seq]=1,c(r[i].callback,n,r[i].combo,r[i].seq)}else d||c(r[i].callback,n,r[i].combo);var f="keypress"==n.type&&a;n.type!=s||m(t)||f||l(o),a=d&&"keydown"==n.type},e._bindMultiple=function(t,e,n){for(var i=0;i<t.length;++i)v(t[i],e,n)},d(t,"keypress",h),d(t,"keydown",h),d(t,"keyup",h)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},9689:function(t,e,n){var i={"./aea.js":4894,"./aeqd.js":6014,"./bonne.js":9265,"./cass.js":3245,"./cea.js":8104,"./eqc.js":780,"./eqdc.js":7724,"./eqearth.js":8197,"./equi.js":63,"./etmerc.js":3426,"./gauss.js":4025,"./geocent.js":5904,"./geos.js":1017,"./gnom.js":5106,"./gstmerc.js":6500,"./krovak.js":6167,"./laea.js":8506,"./lcc.js":993,"./longlat.js":2308,"./merc.js":9402,"./mill.js":969,"./moll.js":6155,"./nzmg.js":6731,"./ob_tran.js":4076,"./omerc.js":431,"./ortho.js":6145,"./poly.js":741,"./qsc.js":2513,"./robin.js":8067,"./sinu.js":1034,"./somerc.js":9872,"./stere.js":3084,"./sterea.js":6789,"./tmerc.js":5518,"./tpers.js":251,"./utm.js":2924,"./vandg.js":6671};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=o,t.exports=r,r.id=9689},5685:function(t){t.exports="/* lineFeature fragment shader */\n\n#ifdef GL_ES\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n  #else\n    precision mediump float;\n  #endif\n#endif\nvarying vec4 strokeColorVar;\nvarying vec4 subpos;\nvarying vec4 info;\nvarying vec4 angles;\nuniform float antialiasing;\nuniform float miterLimit;\nuniform float fixedFlags;\n\nvoid main () {\n  vec4 color = strokeColorVar;\n  float opacity = 1.0;\n  int nearMode = int(floor(info.x + 0.5));\n  int farMode = int(floor(info.y + 0.5));\n  float cosABC = angles.x;\n  float sinABC = angles.y;\n  float cosBCD = angles.z;\n  float sinBCD = angles.w;\n  // never render on the opposite side of a miter.  This uses a bit of\n  // slop, via pow(smoothstep()) instead of step(), since there are\n  // precision issues in this calculation.  This doesn't wholly solve\n  // the precision issue; sometimes pixels are missed or double\n  // rendered along the inside seam of a miter.\n  if (nearMode >= 4) {\n    float dist = cosABC * subpos.x - sinABC * subpos.y;\n    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));\n    if (opacity == 0.0) {\n      discard;\n    }\n  }\n  if (farMode >= 4) {\n    float dist = cosBCD * subpos.z - sinBCD * subpos.y;\n    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));\n    if (opacity == 0.0) {\n      discard;\n    }\n  }\n  // butt or square cap\n  if ((nearMode == 0 || nearMode == 1) && subpos.x < antialiasing) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.x + subpos.w * float(nearMode)));\n  }\n  if ((farMode == 0 || farMode == 1) && subpos.z < antialiasing) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.z + subpos.w * float(farMode)));\n  }\n  // round cap\n  if (nearMode == 2 && subpos.x <= 0.0) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));\n  }\n  if (farMode == 2 && subpos.z <= 0.0) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));\n  }\n  // bevel and clip joins\n  if ((nearMode == 5 || nearMode == 7) && subpos.x < antialiasing) {\n    float dist = (sinABC * subpos.x + cosABC * subpos.y) * sign(sinABC);\n    float w = subpos.w * (1.0 - info.z * sign(sinABC));\n    float maxDist;\n    if (nearMode == 5)  maxDist = cosABC * w;\n    else                maxDist = miterLimit * w;\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));\n  }\n  if ((farMode == 5 || farMode == 7) && subpos.z < antialiasing) {\n    float dist = (sinBCD * subpos.z + cosBCD * subpos.y) * sign(sinBCD);\n    float w = subpos.w * (1.0 - info.z * sign(sinBCD));\n    float maxDist;\n    if (farMode == 5)  maxDist = cosBCD * w;\n    else               maxDist = miterLimit * w;\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));\n  }\n  // round join\n  if (nearMode == 6 && subpos.x <= 0.0) {\n    float w = subpos.w * (1.0 - info.z * sign(sinABC));\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y, 2.0))));\n  }\n  if (farMode == 6 && subpos.z <= 0.0) {\n    float w = subpos.w * (1.0 - info.z * sign(sinBCD));\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y, 2.0))));\n  }\n  // antialias along main edges\n  if (antialiasing > 0.0) {\n    if (subpos.y > subpos.w * (1.0 + info.z) - antialiasing) {\n      opacity = min(opacity, smoothstep(antialiasing, -antialiasing, subpos.y - subpos.w * (1.0 + info.z)));\n    }\n    if (subpos.y < subpos.w * (-1.0 + info.z) + antialiasing) {\n      opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.y - subpos.w * (-1.0 + info.z)));\n    }\n  }\n  if (opacity == 0.0) {\n    discard;\n  }\n  color.a *= opacity;\n  gl_FragColor = color;\n}\n"},9336:function(t){t.exports="/* lineFeature vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute vec3 prev;\nattribute vec3 next;\nattribute vec3 far;\nattribute float flags;\n\nattribute vec3 strokeColor;\nattribute float strokeOpacity;\nattribute float strokeWidth;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float pixelWidth;\nuniform float aspect;\nuniform float miterLimit;\nuniform float antialiasing;\n\nvarying vec4 strokeColorVar;\nvarying vec4 subpos;  /* px, py, length - px, width */\nvarying vec4 info;  /* near mode, far mode, offset */\nvarying vec4 angles; /* near angle cos, sin, far angle cos, sin */\n\nconst float PI = 3.14159265358979323846264;\n\nvec4 viewCoord(vec3 c) {\n  vec4 result = projectionMatrix * modelViewMatrix * vec4(c.xyz, 1.0);\n  if (result.w != 0.0)  result = result / result.w;\n  return result;\n}\n\nfloat atan2(float y, float x) {\n  if (x > 0.0)  return atan(y / x);\n  if (x < 0.0 && y >= 0.0)  return atan(y / x) + PI;\n  if (x < 0.0)  return atan(y / x) - PI;\n  return sign(y) * 0.5 * PI;\n}\n\nvoid main(void)\n{\n  /* If any vertex has been deliberately set to a negative opacity,\n   * skip doing computations on it. */\n  if (strokeOpacity < 0.0) {\n    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);\n    return;\n  }\n  /* convert coordinates.  We have four values, since we need to\n   * calculate the angles between the lines formed by prev-pos and\n   * pos-next, and between pos-next and next-far, plus know the angle\n   *   (prev)---(pos)---(next)---(far) => A---B---C---D */\n  vec4 A = viewCoord(prev);\n  vec4 B = viewCoord(pos);\n  vec4 C = viewCoord(next);\n  vec4 D = viewCoord(far);\n  // calculate line segment vector and angle\n  vec2 deltaCB = C.xy - B.xy;\n  if (deltaCB == vec2(0.0, 0.0)) {\n    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);\n    return;\n  }\n  float lineLength = length(vec2(deltaCB.x, deltaCB.y / aspect)) / pixelWidth;\n  // if lines reverse upon themselves and are not nearly the same length, skip\n  // joins.  This is a heuristic; the correct method would to be to pass some\n  // sort of length of the adjacent line to the fragment renderer and adjust\n  // which fragments are rendered, but this is much more complex.\n  float abLimit = length(vec2(A.x - B.x, (A.y - B.y) / aspect)) / pixelWidth;\n  float dcLimit = length(vec2(D.x - C.x, (D.y - C.y) / aspect)) / pixelWidth;\n  if (abLimit >= lineLength - antialiasing - strokeWidth * 0.5 && abLimit <= lineLength + antialiasing + strokeWidth * 0.5) {\n    abLimit = 0.0001;\n  } else {\n    if (abLimit < lineLength)  abLimit = lineLength;\n    abLimit = (strokeWidth - antialiasing) / (abLimit + antialiasing);\n    if (abLimit < 0.0001) abLimit = 0.0001;\n    if (abLimit > 0.1) abLimit = 0.1;\n  }\n  if (dcLimit >= lineLength - antialiasing - strokeWidth * 0.5 && dcLimit <= lineLength + antialiasing + strokeWidth * 0.5) {\n    dcLimit = 0.0001;\n  } else {\n    if (dcLimit < lineLength)  dcLimit = lineLength;\n    dcLimit = (strokeWidth - antialiasing) / (dcLimit + antialiasing);\n    if (dcLimit < 0.0001) dcLimit = 0.0001;\n    if (dcLimit > 0.1) dcLimit = 0.1;\n  }\n  float angleCB = atan2(deltaCB.y, deltaCB.x * aspect);\n  // values we need to pass along\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  // extract values from our flags field\n  int vertex = int(mod(flags, 4.0));\n  int nearMode = int(mod(floor(flags / 4.0), 8.0));\n  int farMode = int(mod(floor(flags / 32.0), 8.0));\n  // we use 11 bits of the flags for the offset, where -1023 to 1023\n  // maps to -1 to 1.  The 11 bits are a signed value, so simply\n  // selecting the bits will result in an unsigned values that may be\n  // greater than 1, in which case we have to subtract appropriately.\n  float offset = mod(floor(flags / 256.0), 2048.0) / 1023.0;\n  if (offset > 1.0)  offset -= 2048.0 / 1023.0;\n  // by default, offset by the width and don't extend lines.  Later,\n  // calculate line extensions based on end cap and end join modes\n  float yOffset = strokeWidth + antialiasing;\n  if (vertex == 0)  yOffset *= -1.0;\n  yOffset += strokeWidth * offset;\n  float xOffset = 0.0;\n  // end caps\n  if (nearMode == 0) {\n    xOffset = antialiasing;\n  } else if (nearMode == 1 || nearMode == 2) {\n    xOffset = strokeWidth + antialiasing;\n  }\n\n  // If joining lines, calculate the angles in screen space formed by\n  // the near end (A-B-C) and far end (B-C-D), and determine how much\n  // space is needed for the particular join.\n  //   This could be changed: if the lines are not a uniform width and\n  // offset, then the functional join angle is not simply half the\n  // angle between the two lines, but rather half the angle of the\n  // inside edge of the the two lines.\n  float cosABC = 1.0, sinABC = 0.0, cosBCD = 1.0, sinBCD = 0.0;  // of half angles\n  // handle near end\n  if (nearMode >= 4) {\n    float angleBA = atan2(B.y - A.y, (B.x - A.x) * aspect);\n    if (A.xy == B.xy)  angleBA = angleCB;\n    float angleABC = angleCB - angleBA;\n    // ensure angle is in the range [-PI, PI], then take the half angle\n    angleABC = (mod(angleABC + 3.0 * PI, 2.0 * PI) - PI) / 2.0;\n    cosABC = cos(angleABC);  sinABC = sin(angleABC);\n    // if this angle is close to flat, pass-through the join\n    if (nearMode >= 4 && (cosABC > 0.999999 || cosABC < abLimit)) {\n      nearMode = 3;\n    }\n    // miter, miter-clip\n    if (nearMode == 4 || nearMode == 7) {\n      if (cosABC < 0.000001 || 1.0 / cosABC > miterLimit) {\n        if (nearMode == 4) {\n          nearMode = 5;\n        } else {\n          xOffset = miterLimit * strokeWidth * (1.0 - offset * sign(sinABC)) + antialiasing;\n        }\n      } else {\n        // we add an extra 1.0 to the xOffset to make sure that fragment\n        // shader is doing the clipping\n        xOffset = abs(sinABC / cosABC) * strokeWidth * (1.0 - offset * sign(sinABC)) + antialiasing + 1.0;\n        nearMode = 4;\n      }\n    }\n    // bevel or round join\n    if (nearMode == 5 || nearMode == 6) {\n      xOffset = strokeWidth * (1.0 - offset * sign(sinABC)) + antialiasing;\n    }\n  }\n\n  // handle far end\n  if (farMode >= 4) {\n    float angleDC = atan2(D.y - C.y, (D.x - C.x) * aspect);\n    if (D.xy == C.xy)  angleDC = angleCB;\n    float angleBCD = angleDC - angleCB;\n    // ensure angle is in the range [-PI, PI], then take the half angle\n    angleBCD = (mod(angleBCD + 3.0 * PI, 2.0 * PI) - PI) / 2.0;\n    cosBCD = cos(angleBCD);  sinBCD = sin(angleBCD);\n    // if this angle is close to flat, pass-through the join\n    if (farMode >= 4 && (cosBCD > 0.999999 || cosBCD < dcLimit)) {\n      farMode = 3;\n    }\n    // miter, miter-clip\n    if (farMode == 4 || farMode == 7) {\n      if (cosBCD < 0.000001 || 1.0 / cosBCD > miterLimit) {\n        if (farMode == 4)  farMode = 5;\n      } else {\n        farMode = 4;\n      }\n    }\n  }\n\n  // compute the location of a vertex to include everything that might\n  // need to be rendered\n  xOffset *= -1.0;\n  gl_Position = vec4(\n    B.x + (xOffset * cos(angleCB) - yOffset * sin(angleCB)) * pixelWidth,\n    B.y + (xOffset * sin(angleCB) + yOffset * cos(angleCB)) * pixelWidth * aspect,\n    B.z, 1.0);\n  // store other values needed to determine which pixels to plot.\n  if (vertex == 0 || vertex == 1) {\n    subpos = vec4(xOffset, yOffset, lineLength - xOffset, strokeWidth);\n    info = vec4(float(nearMode), float(farMode), offset, 0.0);\n    angles = vec4(cosABC, sinABC, cosBCD, sinBCD);\n  } else {\n    subpos = vec4(lineLength - xOffset, -yOffset, xOffset, strokeWidth);\n    info = vec4(float(farMode), float(nearMode), -offset, 0.0);\n    angles = vec4(cosBCD, -sinBCD, cosABC, -sinABC);\n  }\n}\n"},1388:function(t){t.exports="/* lineFeature debug fragment shader */\n\n#ifdef GL_ES\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n  #else\n    precision mediump float;\n  #endif\n#endif\nvarying vec4 strokeColorVar;\nvarying vec4 subpos;\nvarying vec4 info;\nvarying vec4 angles;\nuniform float antialiasing;\nuniform float miterLimit;\nuniform float fixedFlags;\n\nvoid main () {\n  vec4 color = strokeColorVar;\n  bool debug = bool(mod(fixedFlags, 2.0));\n  float opacity = 1.0;\n  int nearMode = int(floor(info.x + 0.5));\n  int farMode = int(floor(info.y + 0.5));\n  float cosABC = angles.x;\n  float sinABC = angles.y;\n  float cosBCD = angles.z;\n  float sinBCD = angles.w;\n  // never render on the opposite side of a miter.  This uses a bit of\n  // slop, via pow(smoothstep()) instead of step(), since there are\n  // precision issues in this calculation.  This doesn't wholly solve\n  // the precision issue; sometimes pixels are missed or double\n  // rendered along the inside seam of a miter.\n  if (nearMode >= 4) {\n    float dist = cosABC * subpos.x - sinABC * subpos.y;\n    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));\n    if (opacity == 0.0) {\n      if (debug) {\n        color.r = 255.0 / 255.0;\n        gl_FragColor = color;\n        return;\n      }\n      discard;\n    }\n  }\n  if (farMode >= 4) {\n    float dist = cosBCD * subpos.z - sinBCD * subpos.y;\n    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));\n    if (opacity == 0.0) {\n      if (debug) {\n        color.r = 254.0 / 255.0;\n        gl_FragColor = color;\n        return;\n      }\n      discard;\n    }\n  }\n  // butt or square cap\n  if ((nearMode == 0 || nearMode == 1) && subpos.x < antialiasing) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.x + subpos.w * float(nearMode)));\n  }\n  if ((farMode == 0 || farMode == 1) && subpos.z < antialiasing) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.z + subpos.w * float(farMode)));\n  }\n  // round cap\n  if (nearMode == 2 && subpos.x <= 0.0) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));\n  }\n  if (farMode == 2 && subpos.z <= 0.0) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));\n  }\n  // bevel and clip joins\n  if ((nearMode == 5 || nearMode == 7) && subpos.x < antialiasing) {\n    float dist = (sinABC * subpos.x + cosABC * subpos.y) * sign(sinABC);\n    float w = subpos.w * (1.0 - info.z * sign(sinABC));\n    float maxDist;\n    if (nearMode == 5)  maxDist = cosABC * w;\n    else                maxDist = miterLimit * w;\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));\n  }\n  if ((farMode == 5 || farMode == 7) && subpos.z < antialiasing) {\n    float dist = (sinBCD * subpos.z + cosBCD * subpos.y) * sign(sinBCD);\n    float w = subpos.w * (1.0 - info.z * sign(sinBCD));\n    float maxDist;\n    if (farMode == 5)  maxDist = cosBCD * w;\n    else               maxDist = miterLimit * w;\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));\n  }\n  // round join\n  if (nearMode == 6 && subpos.x <= 0.0) {\n    float w = subpos.w * (1.0 - info.z * sign(sinABC));\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y, 2.0))));\n  }\n  if (farMode == 6 && subpos.z <= 0.0) {\n    float w = subpos.w * (1.0 - info.z * sign(sinBCD));\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y, 2.0))));\n  }\n  // antialias along main edges\n  if (antialiasing > 0.0) {\n    if (subpos.y > subpos.w * (1.0 + info.z) - antialiasing) {\n      opacity = min(opacity, smoothstep(antialiasing, -antialiasing, subpos.y - subpos.w * (1.0 + info.z)));\n    }\n    if (subpos.y < subpos.w * (-1.0 + info.z) + antialiasing) {\n      opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.y - subpos.w * (-1.0 + info.z)));\n    }\n  }\n  if (opacity == 0.0) {\n    if (debug) {\n      color.r = 253.0 / 255.0;\n      gl_FragColor = color;\n      return;\n    }\n    discard;\n  }\n  color.a *= opacity;\n  gl_FragColor = color;\n}\n"},9923:function(t){t.exports="/* markerFeature square/triangle fragment shader */\n\n/* markerFeature common fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\n// the square/triangle shader defines unitVar\nconst int symbolEllipse = 0;\nconst int symbolFlowerBase = 1;\nconst int symbolFlowerMax = 16;\nconst int symbolTriangle = 16;\nconst int symbolStarBase = 17;\nconst int symbolStarMax = 16;\nconst int symbolRectangle = 32;\nconst int symbolCrossBase = 33;\nconst int symbolCrossMax = 16;\nconst int symbolOval = 48;\nconst int symbolJackBase = 49;\nconst int symbolJackMax = 16;\nconst int symbolDrop = 64;\nconst int symbolDropBase = 65;\nconst int symbolDropMax = 16;\nconst int symbolArrow = 80;\nconst int symbolArrowBase = 81;\nconst int symbolArrowMax = 16;\n// Distance to antialias in pixels\nconst float antialiasDist = 1.5;\n\n/* Compute the distance from a point to an arrow defined by the radiusVar and a\n * packed value containing\n *   headWidth: ratio to radius (0, 1]\n *   headLength: ratio to diameter (0, 1]\n *   stemWidth: ratio to headWidth [0, 1]\n *   sweep: boolean\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float packed: the packed value.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToArrow(vec2 pos, float value) {\n  bool sweep = value < 0.0;\n  value = abs(value);\n  float pack0 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack1 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack2 = (mod(value, 252.0) - 1.0) / 250.0;\n\n  float headWidth = (pack0 > 0.0 ? pack0 : 2.0 / 3.0);\n  float headEnd = 1.0 - 2.0 * (pack1 > 0.0 ? pack1 : 1.0 / 2.0);\n  float stemWidth = headWidth * (pack2 >= 0.0 ? pack2 : 1.0 / 3.0);\n  if (length(vec2(headWidth, headEnd)) > 1.0) {\n    vec2 scaledHead = normalize(vec2(headWidth, headEnd));\n    headWidth = scaledHead.x;\n    headEnd = scaledHead.y;\n  }\n  float stemEnd = -cos(asin(stemWidth));\n\n  headWidth *= radiusVar;\n  headEnd *= radiusVar;\n  stemWidth *= radiusVar;\n  stemEnd *= radiusVar;\n  pos.y = abs(pos.y);\n  float stemDist = pos.y - stemWidth;\n  float stemEndDist = stemEnd - pos.x;\n  float B = (radiusVar - headEnd) / headWidth;\n  float headDist = (pos.x + B * pos.y - radiusVar) / sqrt(1.0 + B * B);\n  float headEndDist;\n  if (sweep) {\n    B = (radiusVar - headEnd) / 3.0 / headWidth;\n    headEndDist = -(pos.x + B * pos.y - (radiusVar + headEnd * 2.0) / 3.0) / sqrt(1.0 + B * B);\n  } else {\n    headEndDist = headEnd - pos.x;\n  }\n  headEndDist = min(headEndDist, stemDist);\n  return max(max(headDist, headEndDist), stemEndDist);\n}\n\n/* Compute the distance from a point to a drop defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major radii).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToDrop(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float r = radiusVar * ratio;\n  float cx = radiusVar - r;\n  float rad = distance(pos.xy, vec2(cx, 0.0)) - r;\n  if (ratio < 0.5) {\n    float x = radiusVar - r - r * r / cx;\n    float y = sqrt(r * r - (cx - x) * (cx - x));\n    float Bt = (cx - x) / y;\n    if ((pos.x + Bt * abs(pos.y) - cx) / sqrt(1.0 + Bt * Bt) < 0.0) {\n      float B = -x / y;\n      return -(pos.x + B * abs(pos.y)) / sqrt(1.0 + B * B);\n    }\n  }\n  return rad;\n}\n\n/* Compute the distance from a point to the ellipse defined by the radiusVar\n * (the semimajor axis) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the ellipse in pixels.  Negative is\n *   inside.\n */\nfloat distanceToEllipse(vec2 pos, float ratio) {\n  // a and b are the semi-major and semi-minor axes\n  // ratio is the between the minor and major axes.  If > 1, swap these and\n  // rotate 90 degrees.\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  float a = radiusVar, b = abs(radiusVar * ratio);\n  if (b > a) {\n    pos = vec2(pos.y, -pos.x);\n    b = abs(radiusVar / ratio);\n  }\n  float a2 = a * a, b2 = b * b;\n  // compute the distance to the ellipse.  See this discussion:\n  // https://stackoverflow.com/questions/22959698\n  float f = sqrt(a2 - b2),\n        // this value will be positive if outside and negative if inside.  If\n        // we used it directly, the stroke would be too thick along the long\n        // edges of the ellipse\n        d = (distance(pos, vec2(f, 0.0)) + distance(pos, vec2(-f, 0.0))) * 0.5 - a;\n  // if we are outside of the ellipse, accuracy is not important, so return\n  // early.\n  if (d >= 0.0) {\n    return d;\n  }\n  // work in one quadrant\n  pos = abs(pos);\n  // t (the angle from center) could start as `atan(pos.y, pos.x)`, but this\n  // results in a slower solution near narrow ends\n  float t = 0.7;\n  float cost = cos(t), sint = sin(t), x = a * cost, y = b * sint;\n  vec2 lastxy;\n  for (int iter = 0; iter < 10; iter += 1) {\n    lastxy = vec2(x, y);\n    float ex = (a2 - b2) * pow(cost, 3.0) / a,\n          ey = (b2 - a2) * pow(sint, 3.0) / b;\n    vec2 r = vec2(x - ex, y - ey),\n         q = vec2(pos.x - ex, pos.y - ey);\n    float lenr = length(r);\n    t += lenr * asin((r.x * q.y - r.y * q.x) / lenr / length(q)) / sqrt(a2 + b2 - x * x - y * y);\n    t = clamp(t, 0.0, acos(0.0));\n    cost = cos(t);\n    sint = sin(t);\n    x = a * cost;\n    y = b * sint;\n    if (distance(lastxy, vec2(x, y)) < 0.05) {\n      break;\n    }\n  }\n  return sign(d) * distance(pos, vec2(x, y));\n}\n\n/* Compute the distance from a point to an isosceles triangle.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: length of the base compared to the other sides.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToIsoscelesTriangle(vec2 pos, float ratio) {\n  ratio = clamp(abs(ratio), 0.0, 2.0);\n  if (ratio == 0.0 || ratio == 2.0) {\n    ratio = 1.0;\n  }\n  float s1, s2, x0, x1, y1;\n  if (ratio < sqrt(2.0)) {\n    s1 = radiusVar * sqrt(4.0 - ratio * ratio); // length of equal sides\n    s2 = s1 * ratio;\n    y1 = s2 / 2.0;\n    x0 = radiusVar;\n    x1 = x0 - sqrt(s1 * s1 - y1 * y1);\n  } else {\n    s2 = radiusVar * 2.0;\n    s1 = s2 / ratio;\n    y1 = s2 / 2.0;\n    x0 = sqrt(s1 * s1 - y1 * y1);\n    x1 = 0.0;\n  }\n  float B = (x0 - x1) / y1;\n  return max(x1 - pos.x, (pos.x + B * abs(pos.y) - x0) / sqrt(1.0 + B * B));\n}\n\n/* Compute the distance from a point to an oval defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major axes).  Here an oval\n * is defined as two semicircles connected by straight line segments.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the oval in pixels.  Negative is inside.\n */\nfloat distanceToOval(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float minor = radiusVar * ratio;\n  float center = radiusVar - minor;\n  pos = abs(pos);\n  if (pos.x <= center) {\n    return pos.y - minor;\n  }\n  return distance(pos, vec2(center, 0.0)) - minor;\n}\n\n/* Compute the distance from a point to a rectangle defined by the radiusVar\n * (the semidiagonal) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToRectangle(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  vec2 wh = normalize(vec2(1.0, abs(ratio))) * radiusVar;\n  vec2 dist = abs(pos) - wh;\n  return max(dist.x, dist.y);\n}\n\n/* Based on a repetition value, return a position for rotational symmetry.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        int repetitions: number of repetitions on the cross.\n * Exit:  float dist: a point in the primary position.\n */\nvec2 rotationalSymmetry(vec2 pos, int repetitions) {\n  float pi = acos(-1.0);\n  float limit = pi / float(repetitions);\n  float ang = atan(pos.y, pos.x);\n  ang = mod(ang + pi * 2.0, limit * 2.0);\n  if (ang > limit) {\n    ang -= limit * 2.0;\n  }\n  return vec2(cos(ang), sin(ang)) * length(pos);\n}\n\nfloat markerFeatureFragment(vec3 posAndSpacing) {\n  vec2 pos = posAndSpacing.xy;\n  float spacing = posAndSpacing.z;\n  // square lattice\n  if (spacing > 0.0) {\n    pos.x = mod(pos.x + spacing * 0.5, spacing) - spacing * 0.5;\n    pos.y = mod(pos.y + spacing * 0.5, spacing) - spacing * 0.5;\n  }\n  // triangular lattice\n  if (spacing < 0.0) {\n    spacing = spacing * -1.0;\n    float cz = (2.0 * pos.y) / (sqrt(3.0) * spacing);\n    float cx = pos.x / spacing - 0.5 * cz;\n    float cy = -cx - cz;\n    float rx = floor(cx + 0.5);\n    float ry = floor(cy + 0.5);\n    float rz = floor(cz + 0.5);\n    float dx = abs(rx - cx);\n    float dy = abs(ry - cy);\n    float dz = abs(rz - cz);\n    if (dx > dy && dx > dz) {\n      rx = -ry - rz;\n    } else if (dy > dz) {\n      ry = -rx - rz;\n    } else {\n      rz = -rx - ry;\n    }\n    vec2 center = vec2(spacing * (rx + 0.5 * rz), (sqrt(3.0) * spacing * 0.5) * rz);\n    pos = pos - center;\n  }\n  // rad is a value in pixels from the edge of the symbol where negative is\n  // inside the shape\n  float rad = length(pos.xy) - radiusVar;\n  // never allow points outside of the main radius\n  if (rad > 0.0) {\n    return 0.0;\n  }\n  // apply clockwise rotation\n  if (rotationVar != 0.0) {\n    float cosr = cos(rotationVar), sinr = sin(rotationVar);\n    pos = vec2(pos.x * cosr + pos.y * sinr, -pos.x * sinr + pos.y * cosr);\n  }\n\n  int symbol = int(floor(symbolVar / 64.0));\n  bool isimage = bool(mod(floor(symbolVar / 8.0), 2.0));\n  vec4 fillColor, strokeColor;\n  float endStep;\n\n  float ratio = symbolValueVar;\n  // When ratio is 0, it usually gets changed to 1; some shapes could have\n  // better defaults\n  /* Symbol shapes */\n  if (symbol == symbolTriangle) {\n    rad = distanceToIsoscelesTriangle(pos, ratio);\n  } else if (symbol == symbolRectangle) {\n    rad = distanceToRectangle(pos, ratio);\n  } else if (symbol == symbolOval) {\n    rad = distanceToOval(pos, ratio);\n  } else if (symbol == symbolDrop) {\n    rad = distanceToDrop(pos, ratio);\n  } else if (symbol == symbolArrow) {\n    rad = distanceToArrow(pos, ratio);\n  } else if (symbol >= symbolCrossBase && symbol <= symbolCrossBase + symbolCrossMax - 2) {\n    rad = distanceToRectangle(rotationalSymmetry(pos, symbol - symbolCrossBase + 2), ratio);\n  } else if (symbol >= symbolFlowerBase && symbol <= symbolFlowerBase + symbolFlowerMax - 2) {\n    rad = distanceToEllipse(rotationalSymmetry(pos, symbol - symbolFlowerBase + 2), ratio);\n  } else if (symbol >= symbolStarBase && symbol <= symbolStarBase + symbolStarMax - 2) {\n    rad = distanceToIsoscelesTriangle(rotationalSymmetry(pos, symbol - symbolStarBase + 2), ratio);\n  } else if (symbol >= symbolJackBase && symbol <= symbolJackBase + symbolJackMax - 2) {\n    rad = distanceToOval(rotationalSymmetry(pos, symbol - symbolJackBase + 2), ratio);\n  } else if (symbol >= symbolDropBase && symbol <= symbolDropBase + symbolDropMax - 2) {\n    rad = distanceToDrop(rotationalSymmetry(pos, symbol - symbolDropBase + 2), ratio);\n  } else if (symbol >= symbolArrowBase && symbol <= symbolArrowBase + symbolArrowMax - 2) {\n    rad = distanceToArrow(rotationalSymmetry(pos, symbol - symbolArrowBase + 2), ratio);\n  } else { // default - circle or ellipse; a value of 0 or 1 is a circle\n    if (ratio != 0.0 && ratio != 1.0) {\n      rad = distanceToEllipse(pos, ratio);\n    }\n  }\n\n  if (rad >= 0.0) {\n    return 0.0;\n  }\n  // If there is no stroke, the fill region should transition to nothing\n  if (strokeColorVar.a == 0.0 || strokeWidthVar <= 0.0) {\n    strokeColor = vec4(fillColorVar.rgb, 0.0);\n    endStep = 0.0;\n  } else {\n    strokeColor = strokeColorVar;\n    endStep = -strokeWidthVar;\n  }\n  // Likewise, if there is no fill, the stroke should transition to nothing\n  if (fillColorVar.a == 0.0) {\n    fillColor = vec4(strokeColorVar.rgb, 0.0);\n  } else {\n    fillColor = fillColorVar;\n  }\n  float alpha = 1.0;\n  if (rad <= endStep) {\n    float step = smoothstep(endStep - antialiasDist, endStep, rad);\n    vec4 color = mix(fillColor, strokeColor, step);\n    float step2 = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(color, vec4(color.rgb, 0.0), step2);\n    if (color.a > 0.0)\n      alpha = gl_FragColor.a / color.a;\n  } else {\n    float step = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(strokeColor, vec4(strokeColor.rgb, 0.0), step);\n    if (strokeColor.a > 0.0)\n      alpha = gl_FragColor.a / strokeColor.a;\n  }\n  return alpha;\n}\n\n\nvarying vec2 unitVar;  // distinct for square/triangle\n\nvoid main() {\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0)\n    discard;\n  if (markerFeatureFragment(vec3(unitVar, 0.0)) == 0.0)\n    discard;\n}\n"},1202:function(t){t.exports="/* markerFeature square/triangle vertex shader */\n\n/* markerFeature common vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float radius;\nattribute vec3 fillColor;\nattribute float fillOpacity;\nattribute vec3 strokeColor;\nattribute float strokeOpacity;\nattribute float strokeWidth;\nattribute float symbol;  /* contains some bit fields */\nattribute float symbolValue;\nattribute float rotation;\nuniform float zoom;\nuniform float rotationUniform;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n// non-sprite has other definitions.\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\n\nfloat markerFeaturePrep(void)\n{\n  // No stroke or fill implies nothing to draw\n  if (radius <= 0.0 || (strokeOpacity <= 0.0 && fillOpacity <= 0.0)) {\n    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);\n    return 0.0;\n  }\n  radiusVar = radius;\n  strokeWidthVar = strokeWidth;\n  int scaleMode = int(mod(symbol, 4.0));\n  float strokeOffset = mod(floor(symbol / 16.0), 4.0) - 1.0;\n  radiusVar += (strokeOffset + 1.0) / 2.0 * strokeWidthVar;\n  if (scaleMode == 1) { // fill\n    radiusVar = (radiusVar - strokeWidthVar) * exp2(zoom) + strokeWidthVar;\n  } else if (scaleMode == 2) { // stroke\n    radiusVar += strokeWidthVar * (exp2(zoom) - 1.0);\n    strokeWidthVar *= exp2(zoom);\n  } else if (scaleMode == 3) { // all\n    radiusVar *= exp2(zoom);\n    strokeWidthVar *= exp2(zoom);\n  }\n  fillColorVar = vec4(fillColor, fillOpacity);\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  symbolVar = symbol;\n  symbolValueVar = symbolValue;\n  rotationVar = rotation;\n  if (bool(mod(floor(symbolVar / 4.0), 2.0))) {\n    rotationVar += rotationUniform;\n  }\n  return radiusVar;\n}\n\n\nuniform float pixelWidth; // for non-sprite\nuniform float aspect; // for non-sprite\nattribute vec2 unit; // for non-sprite\nvarying vec2 unitVar; // for non-sprite\n\nvoid main(void)\n{\n  radiusVar = markerFeaturePrep();\n  if (radiusVar == 0.0) {\n    return;\n  }\n  // for non-sprite\n  unitVar = unit * radiusVar;\n  unitVar.y *= -1.0;\n  vec4 p = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;\n  if (p.w != 0.0) {\n    p = p / p.w;\n  }\n  p += radiusVar * vec4(unit.x * pixelWidth, unit.y * pixelWidth * aspect, 0.0, 1.0);\n  gl_Position = vec4(p.xyz, 1.0);\n}\n"},3724:function(t){t.exports="/* markerFeature sprite fragment shader */\n\n/* markerFeature common fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\n// the square/triangle shader defines unitVar\nconst int symbolEllipse = 0;\nconst int symbolFlowerBase = 1;\nconst int symbolFlowerMax = 16;\nconst int symbolTriangle = 16;\nconst int symbolStarBase = 17;\nconst int symbolStarMax = 16;\nconst int symbolRectangle = 32;\nconst int symbolCrossBase = 33;\nconst int symbolCrossMax = 16;\nconst int symbolOval = 48;\nconst int symbolJackBase = 49;\nconst int symbolJackMax = 16;\nconst int symbolDrop = 64;\nconst int symbolDropBase = 65;\nconst int symbolDropMax = 16;\nconst int symbolArrow = 80;\nconst int symbolArrowBase = 81;\nconst int symbolArrowMax = 16;\n// Distance to antialias in pixels\nconst float antialiasDist = 1.5;\n\n/* Compute the distance from a point to an arrow defined by the radiusVar and a\n * packed value containing\n *   headWidth: ratio to radius (0, 1]\n *   headLength: ratio to diameter (0, 1]\n *   stemWidth: ratio to headWidth [0, 1]\n *   sweep: boolean\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float packed: the packed value.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToArrow(vec2 pos, float value) {\n  bool sweep = value < 0.0;\n  value = abs(value);\n  float pack0 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack1 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack2 = (mod(value, 252.0) - 1.0) / 250.0;\n\n  float headWidth = (pack0 > 0.0 ? pack0 : 2.0 / 3.0);\n  float headEnd = 1.0 - 2.0 * (pack1 > 0.0 ? pack1 : 1.0 / 2.0);\n  float stemWidth = headWidth * (pack2 >= 0.0 ? pack2 : 1.0 / 3.0);\n  if (length(vec2(headWidth, headEnd)) > 1.0) {\n    vec2 scaledHead = normalize(vec2(headWidth, headEnd));\n    headWidth = scaledHead.x;\n    headEnd = scaledHead.y;\n  }\n  float stemEnd = -cos(asin(stemWidth));\n\n  headWidth *= radiusVar;\n  headEnd *= radiusVar;\n  stemWidth *= radiusVar;\n  stemEnd *= radiusVar;\n  pos.y = abs(pos.y);\n  float stemDist = pos.y - stemWidth;\n  float stemEndDist = stemEnd - pos.x;\n  float B = (radiusVar - headEnd) / headWidth;\n  float headDist = (pos.x + B * pos.y - radiusVar) / sqrt(1.0 + B * B);\n  float headEndDist;\n  if (sweep) {\n    B = (radiusVar - headEnd) / 3.0 / headWidth;\n    headEndDist = -(pos.x + B * pos.y - (radiusVar + headEnd * 2.0) / 3.0) / sqrt(1.0 + B * B);\n  } else {\n    headEndDist = headEnd - pos.x;\n  }\n  headEndDist = min(headEndDist, stemDist);\n  return max(max(headDist, headEndDist), stemEndDist);\n}\n\n/* Compute the distance from a point to a drop defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major radii).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToDrop(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float r = radiusVar * ratio;\n  float cx = radiusVar - r;\n  float rad = distance(pos.xy, vec2(cx, 0.0)) - r;\n  if (ratio < 0.5) {\n    float x = radiusVar - r - r * r / cx;\n    float y = sqrt(r * r - (cx - x) * (cx - x));\n    float Bt = (cx - x) / y;\n    if ((pos.x + Bt * abs(pos.y) - cx) / sqrt(1.0 + Bt * Bt) < 0.0) {\n      float B = -x / y;\n      return -(pos.x + B * abs(pos.y)) / sqrt(1.0 + B * B);\n    }\n  }\n  return rad;\n}\n\n/* Compute the distance from a point to the ellipse defined by the radiusVar\n * (the semimajor axis) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the ellipse in pixels.  Negative is\n *   inside.\n */\nfloat distanceToEllipse(vec2 pos, float ratio) {\n  // a and b are the semi-major and semi-minor axes\n  // ratio is the between the minor and major axes.  If > 1, swap these and\n  // rotate 90 degrees.\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  float a = radiusVar, b = abs(radiusVar * ratio);\n  if (b > a) {\n    pos = vec2(pos.y, -pos.x);\n    b = abs(radiusVar / ratio);\n  }\n  float a2 = a * a, b2 = b * b;\n  // compute the distance to the ellipse.  See this discussion:\n  // https://stackoverflow.com/questions/22959698\n  float f = sqrt(a2 - b2),\n        // this value will be positive if outside and negative if inside.  If\n        // we used it directly, the stroke would be too thick along the long\n        // edges of the ellipse\n        d = (distance(pos, vec2(f, 0.0)) + distance(pos, vec2(-f, 0.0))) * 0.5 - a;\n  // if we are outside of the ellipse, accuracy is not important, so return\n  // early.\n  if (d >= 0.0) {\n    return d;\n  }\n  // work in one quadrant\n  pos = abs(pos);\n  // t (the angle from center) could start as `atan(pos.y, pos.x)`, but this\n  // results in a slower solution near narrow ends\n  float t = 0.7;\n  float cost = cos(t), sint = sin(t), x = a * cost, y = b * sint;\n  vec2 lastxy;\n  for (int iter = 0; iter < 10; iter += 1) {\n    lastxy = vec2(x, y);\n    float ex = (a2 - b2) * pow(cost, 3.0) / a,\n          ey = (b2 - a2) * pow(sint, 3.0) / b;\n    vec2 r = vec2(x - ex, y - ey),\n         q = vec2(pos.x - ex, pos.y - ey);\n    float lenr = length(r);\n    t += lenr * asin((r.x * q.y - r.y * q.x) / lenr / length(q)) / sqrt(a2 + b2 - x * x - y * y);\n    t = clamp(t, 0.0, acos(0.0));\n    cost = cos(t);\n    sint = sin(t);\n    x = a * cost;\n    y = b * sint;\n    if (distance(lastxy, vec2(x, y)) < 0.05) {\n      break;\n    }\n  }\n  return sign(d) * distance(pos, vec2(x, y));\n}\n\n/* Compute the distance from a point to an isosceles triangle.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: length of the base compared to the other sides.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToIsoscelesTriangle(vec2 pos, float ratio) {\n  ratio = clamp(abs(ratio), 0.0, 2.0);\n  if (ratio == 0.0 || ratio == 2.0) {\n    ratio = 1.0;\n  }\n  float s1, s2, x0, x1, y1;\n  if (ratio < sqrt(2.0)) {\n    s1 = radiusVar * sqrt(4.0 - ratio * ratio); // length of equal sides\n    s2 = s1 * ratio;\n    y1 = s2 / 2.0;\n    x0 = radiusVar;\n    x1 = x0 - sqrt(s1 * s1 - y1 * y1);\n  } else {\n    s2 = radiusVar * 2.0;\n    s1 = s2 / ratio;\n    y1 = s2 / 2.0;\n    x0 = sqrt(s1 * s1 - y1 * y1);\n    x1 = 0.0;\n  }\n  float B = (x0 - x1) / y1;\n  return max(x1 - pos.x, (pos.x + B * abs(pos.y) - x0) / sqrt(1.0 + B * B));\n}\n\n/* Compute the distance from a point to an oval defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major axes).  Here an oval\n * is defined as two semicircles connected by straight line segments.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the oval in pixels.  Negative is inside.\n */\nfloat distanceToOval(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float minor = radiusVar * ratio;\n  float center = radiusVar - minor;\n  pos = abs(pos);\n  if (pos.x <= center) {\n    return pos.y - minor;\n  }\n  return distance(pos, vec2(center, 0.0)) - minor;\n}\n\n/* Compute the distance from a point to a rectangle defined by the radiusVar\n * (the semidiagonal) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToRectangle(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  vec2 wh = normalize(vec2(1.0, abs(ratio))) * radiusVar;\n  vec2 dist = abs(pos) - wh;\n  return max(dist.x, dist.y);\n}\n\n/* Based on a repetition value, return a position for rotational symmetry.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        int repetitions: number of repetitions on the cross.\n * Exit:  float dist: a point in the primary position.\n */\nvec2 rotationalSymmetry(vec2 pos, int repetitions) {\n  float pi = acos(-1.0);\n  float limit = pi / float(repetitions);\n  float ang = atan(pos.y, pos.x);\n  ang = mod(ang + pi * 2.0, limit * 2.0);\n  if (ang > limit) {\n    ang -= limit * 2.0;\n  }\n  return vec2(cos(ang), sin(ang)) * length(pos);\n}\n\nfloat markerFeatureFragment(vec3 posAndSpacing) {\n  vec2 pos = posAndSpacing.xy;\n  float spacing = posAndSpacing.z;\n  // square lattice\n  if (spacing > 0.0) {\n    pos.x = mod(pos.x + spacing * 0.5, spacing) - spacing * 0.5;\n    pos.y = mod(pos.y + spacing * 0.5, spacing) - spacing * 0.5;\n  }\n  // triangular lattice\n  if (spacing < 0.0) {\n    spacing = spacing * -1.0;\n    float cz = (2.0 * pos.y) / (sqrt(3.0) * spacing);\n    float cx = pos.x / spacing - 0.5 * cz;\n    float cy = -cx - cz;\n    float rx = floor(cx + 0.5);\n    float ry = floor(cy + 0.5);\n    float rz = floor(cz + 0.5);\n    float dx = abs(rx - cx);\n    float dy = abs(ry - cy);\n    float dz = abs(rz - cz);\n    if (dx > dy && dx > dz) {\n      rx = -ry - rz;\n    } else if (dy > dz) {\n      ry = -rx - rz;\n    } else {\n      rz = -rx - ry;\n    }\n    vec2 center = vec2(spacing * (rx + 0.5 * rz), (sqrt(3.0) * spacing * 0.5) * rz);\n    pos = pos - center;\n  }\n  // rad is a value in pixels from the edge of the symbol where negative is\n  // inside the shape\n  float rad = length(pos.xy) - radiusVar;\n  // never allow points outside of the main radius\n  if (rad > 0.0) {\n    return 0.0;\n  }\n  // apply clockwise rotation\n  if (rotationVar != 0.0) {\n    float cosr = cos(rotationVar), sinr = sin(rotationVar);\n    pos = vec2(pos.x * cosr + pos.y * sinr, -pos.x * sinr + pos.y * cosr);\n  }\n\n  int symbol = int(floor(symbolVar / 64.0));\n  bool isimage = bool(mod(floor(symbolVar / 8.0), 2.0));\n  vec4 fillColor, strokeColor;\n  float endStep;\n\n  float ratio = symbolValueVar;\n  // When ratio is 0, it usually gets changed to 1; some shapes could have\n  // better defaults\n  /* Symbol shapes */\n  if (symbol == symbolTriangle) {\n    rad = distanceToIsoscelesTriangle(pos, ratio);\n  } else if (symbol == symbolRectangle) {\n    rad = distanceToRectangle(pos, ratio);\n  } else if (symbol == symbolOval) {\n    rad = distanceToOval(pos, ratio);\n  } else if (symbol == symbolDrop) {\n    rad = distanceToDrop(pos, ratio);\n  } else if (symbol == symbolArrow) {\n    rad = distanceToArrow(pos, ratio);\n  } else if (symbol >= symbolCrossBase && symbol <= symbolCrossBase + symbolCrossMax - 2) {\n    rad = distanceToRectangle(rotationalSymmetry(pos, symbol - symbolCrossBase + 2), ratio);\n  } else if (symbol >= symbolFlowerBase && symbol <= symbolFlowerBase + symbolFlowerMax - 2) {\n    rad = distanceToEllipse(rotationalSymmetry(pos, symbol - symbolFlowerBase + 2), ratio);\n  } else if (symbol >= symbolStarBase && symbol <= symbolStarBase + symbolStarMax - 2) {\n    rad = distanceToIsoscelesTriangle(rotationalSymmetry(pos, symbol - symbolStarBase + 2), ratio);\n  } else if (symbol >= symbolJackBase && symbol <= symbolJackBase + symbolJackMax - 2) {\n    rad = distanceToOval(rotationalSymmetry(pos, symbol - symbolJackBase + 2), ratio);\n  } else if (symbol >= symbolDropBase && symbol <= symbolDropBase + symbolDropMax - 2) {\n    rad = distanceToDrop(rotationalSymmetry(pos, symbol - symbolDropBase + 2), ratio);\n  } else if (symbol >= symbolArrowBase && symbol <= symbolArrowBase + symbolArrowMax - 2) {\n    rad = distanceToArrow(rotationalSymmetry(pos, symbol - symbolArrowBase + 2), ratio);\n  } else { // default - circle or ellipse; a value of 0 or 1 is a circle\n    if (ratio != 0.0 && ratio != 1.0) {\n      rad = distanceToEllipse(pos, ratio);\n    }\n  }\n\n  if (rad >= 0.0) {\n    return 0.0;\n  }\n  // If there is no stroke, the fill region should transition to nothing\n  if (strokeColorVar.a == 0.0 || strokeWidthVar <= 0.0) {\n    strokeColor = vec4(fillColorVar.rgb, 0.0);\n    endStep = 0.0;\n  } else {\n    strokeColor = strokeColorVar;\n    endStep = -strokeWidthVar;\n  }\n  // Likewise, if there is no fill, the stroke should transition to nothing\n  if (fillColorVar.a == 0.0) {\n    fillColor = vec4(strokeColorVar.rgb, 0.0);\n  } else {\n    fillColor = fillColorVar;\n  }\n  float alpha = 1.0;\n  if (rad <= endStep) {\n    float step = smoothstep(endStep - antialiasDist, endStep, rad);\n    vec4 color = mix(fillColor, strokeColor, step);\n    float step2 = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(color, vec4(color.rgb, 0.0), step2);\n    if (color.a > 0.0)\n      alpha = gl_FragColor.a / color.a;\n  } else {\n    float step = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(strokeColor, vec4(strokeColor.rgb, 0.0), step);\n    if (strokeColor.a > 0.0)\n      alpha = gl_FragColor.a / strokeColor.a;\n  }\n  return alpha;\n}\n\n\n// the square/triangle shader defines unitVar\n\nvoid main(void) {\n  // No stroke or fill implies nothing to draw\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0)\n    discard;\n  // for sprites, convert the position to [-radius,radius],[-radius,radius]\n  vec2 pos = (gl_PointCoord.xy - 0.5) * 2.0 * radiusVar;\n  if (markerFeatureFragment(vec3(pos, 0.0)) == 0.0)\n    discard;\n}\n"},7665:function(t){t.exports="/* markerFeature sprite vertex shader */\n\n/* markerFeature common vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float radius;\nattribute vec3 fillColor;\nattribute float fillOpacity;\nattribute vec3 strokeColor;\nattribute float strokeOpacity;\nattribute float strokeWidth;\nattribute float symbol;  /* contains some bit fields */\nattribute float symbolValue;\nattribute float rotation;\nuniform float zoom;\nuniform float rotationUniform;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n// non-sprite has other definitions.\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\n\nfloat markerFeaturePrep(void)\n{\n  // No stroke or fill implies nothing to draw\n  if (radius <= 0.0 || (strokeOpacity <= 0.0 && fillOpacity <= 0.0)) {\n    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);\n    return 0.0;\n  }\n  radiusVar = radius;\n  strokeWidthVar = strokeWidth;\n  int scaleMode = int(mod(symbol, 4.0));\n  float strokeOffset = mod(floor(symbol / 16.0), 4.0) - 1.0;\n  radiusVar += (strokeOffset + 1.0) / 2.0 * strokeWidthVar;\n  if (scaleMode == 1) { // fill\n    radiusVar = (radiusVar - strokeWidthVar) * exp2(zoom) + strokeWidthVar;\n  } else if (scaleMode == 2) { // stroke\n    radiusVar += strokeWidthVar * (exp2(zoom) - 1.0);\n    strokeWidthVar *= exp2(zoom);\n  } else if (scaleMode == 3) { // all\n    radiusVar *= exp2(zoom);\n    strokeWidthVar *= exp2(zoom);\n  }\n  fillColorVar = vec4(fillColor, fillOpacity);\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  symbolVar = symbol;\n  symbolValueVar = symbolValue;\n  rotationVar = rotation;\n  if (bool(mod(floor(symbolVar / 4.0), 2.0))) {\n    rotationVar += rotationUniform;\n  }\n  return radiusVar;\n}\n\n\nvoid main(void)\n{\n  radiusVar = markerFeaturePrep();\n  if (radiusVar == 0.0) {\n    return;\n  }\n  // for sprite\n  gl_Position = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;\n  gl_PointSize = 2.0 * radiusVar;\n}\n"},428:function(t){t.exports="/* contourFeature fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nuniform vec4 minColor;\nuniform vec4 maxColor;\nuniform float steps;\nuniform bool stepped;\nuniform sampler2D sampler2d;\nvarying float valueVar;\nvarying float opacityVar;\n\nvoid main () {\n  vec4 clr;\n  if (valueVar < 0.0) {\n    clr = minColor;\n  } else if (valueVar > steps) {\n    clr = maxColor;\n  } else {\n    float step;\n    if (stepped) {\n      step = floor(valueVar) + 0.5;\n      if (step > steps) {\n        step = steps - 0.5;\n      }\n    } else {\n      step = valueVar + 0.5;\n    }\n    // our texture is padded on either end by a repeated value to ensure\n    // we interpolate smoothly at the ends.\n    clr = texture2D(sampler2d, vec2((step + 1.0) / (steps + 2.0), 0.0));\n  }\n  gl_FragColor = vec4(clr.rgb, clr.a * opacityVar);\n}\n"},4993:function(t){t.exports="/* contourFeature vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float value;\nattribute float opacity;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying float valueVar;\nvarying float opacityVar;\n\nvoid main(void)\n{\n  /* Don't use z values */\n  vec4 scrPos = projectionMatrix * modelViewMatrix * vec4(pos.xy, 0, 1);\n  if (scrPos.w != 0.0) {\n    scrPos = scrPos / scrPos.w;\n  }\n  valueVar = value;\n  opacityVar = opacity;\n  gl_Position = scrPos;\n}\n"},3925:function(t){t.exports="/* pixelmapFeature fragment shader */\n\nvarying highp vec2 iTextureCoord;\nuniform sampler2D sampler2d;\nuniform sampler2D lutSampler;\nuniform int lutWidth;\nuniform int lutHeight;\nuniform mediump float opacity;\nuniform highp vec2 crop;\n\nvoid main(void) {\n  if ((crop.s < 1.0 && iTextureCoord.s > crop.s) || (crop.t < 1.0 && 1.0 - iTextureCoord.t > crop.t)) {\n    discard;\n  }\n  // to add anti-aliasing, we would need to know the current pixel size\n  // (probably computed in the vertex shader) and then sample the base image at\n  // multiple points, then average the output color.\n  highp vec4 lutValue = texture2D(sampler2d, iTextureCoord);\n  highp vec2 lutCoord;\n  lutCoord.s = (\n    mod(\n      // add 0.5 to handle float imprecision\n      floor(lutValue.r * 255.0 + 0.5) +\n      floor(lutValue.g * 255.0 + 0.5) * 256.0,\n      float(lutWidth)\n    // center in pixel\n    ) + 0.5) / float(lutWidth);\n  // Our image is top-down, so invert the coordinate\n  lutCoord.t = 1.0 - (\n    floor(\n      (\n        // add 0.5 to handle float imprecision\n        floor(lutValue.r * 255.0 + 0.5) +\n        floor(lutValue.g * 255.0 + 0.5) * 256.0 +\n        floor(lutValue.b * 255.0 + 0.5) * 256.0 * 256.0\n        // We may want an option to use the alpha channel to allow more indices\n      ) / float(lutWidth)\n    // center in pixel\n    ) + 0.5) / float(lutHeight);\n  if (lutCoord.t < 0.0) {\n    discard;\n  }\n  mediump vec4 color = texture2D(lutSampler, lutCoord);\n\n  color.a *= opacity;\n  gl_FragColor = color;\n}\n"},4317:function(t){t.exports="/* pointFeature square/triangle fragment shader */\n\n/* pointFeature common fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float radiusVar;\nvarying float strokeWidthVar;\n\nvoid pointFeatureFragment(float rad) {\n  vec4 strokeColor, fillColor;\n  float endStep;\n  // No stroke or fill implies nothing to draw\n  if (rad > 1.0)\n    discard;\n  // If there is no stroke, the fill region should transition to nothing\n  if (strokeColorVar.a == 0.0) {\n    strokeColor = vec4(fillColorVar.rgb, 0.0);\n    endStep = 1.0;\n  } else {\n    strokeColor = strokeColorVar;\n    endStep = radiusVar / (radiusVar + strokeWidthVar);\n  }\n  // Likewise, if there is no fill, the stroke should transition to nothing\n  if (fillColorVar.a == 0.0)\n    fillColor = vec4(strokeColor.rgb, 0.0);\n  else\n    fillColor = fillColorVar;\n  // Distance to antialias over.  First number is in pixels\n  float antialiasDist = 1.5 / (radiusVar + strokeWidthVar);\n  if (rad < endStep) {\n    float step = smoothstep(max(0.0, endStep - antialiasDist), endStep, rad);\n    vec4 color = mix(fillColor, strokeColor, step);\n    float step2 = smoothstep(max(0.0, 1.0 - antialiasDist), 1.0, rad);\n    gl_FragColor = mix(color, vec4(color.rgb, 0.0), step2);\n  } else {\n    float step = smoothstep(max(0.0, 1.0 - antialiasDist), 1.0, rad);\n    gl_FragColor = mix(strokeColor, vec4(strokeColor.rgb, 0.0), step);\n  }\n}\n\n\nvarying vec3 unitVar;  // distinct for square/triangle\n\nvoid main () {\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0)\n    discard;\n  float rad = length(unitVar.xy); // distinct for square/triangle\n  pointFeatureFragment(rad);\n}\n"},8208:function(t){t.exports="/* pointFeature square/triangle vertex shader */\n\n/* pointFeature common vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float radius;\nattribute vec3 fillColor;\nattribute vec3 strokeColor;\nattribute float fillOpacity;\nattribute float strokeWidth;\nattribute float strokeOpacity;\nattribute float fill;\nattribute float stroke;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float radiusVar;\nvarying float strokeWidthVar;\n\nfloat pointFeaturePrep() {\n  strokeWidthVar = strokeWidth;\n  fillColorVar = vec4(fillColor, fillOpacity);\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  // No stroke or fill implies nothing to draw\n  if (stroke < 1.0 || strokeWidth <= 0.0 || strokeOpacity <= 0.0) {\n    strokeColorVar.a = 0.0;\n    strokeWidthVar = 0.0;\n  }\n  if (fill < 1.0 || radius <= 0.0 || fillOpacity <= 0.0)\n    fillColorVar.a = 0.0;\n  /* If the point has no visible pixels, skip doing computations on it. */\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0) {\n    gl_Position = vec4(2, 2, 0, 1);\n    return 0.0;\n  }\n  return radius;\n}\n\n\nuniform float pixelWidth; // for non-sprite\nuniform float aspect; // for non-sprite\nattribute vec2 unit; // for non-sprite\nvarying vec3 unitVar; // for non-sprite\n\nvoid main(void)\n{\n  radiusVar = pointFeaturePrep();\n  if (radiusVar == 0.0) {\n    return;\n  }\n  // for non-sprite\n  unitVar = vec3(unit, 1.0);\n  vec4 p = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;\n  if (p.w != 0.0) {\n    p = p / p.w;\n  }\n  p += (radius + strokeWidthVar) *\n       vec4(unit.x * pixelWidth, unit.y * pixelWidth * aspect, 0.0, 1.0);\n  gl_Position = vec4(p.xyz, 1.0);\n}\n"},2682:function(t){t.exports="/* pointFeature sprite fragment shader */\n\n/* pointFeature common fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float radiusVar;\nvarying float strokeWidthVar;\n\nvoid pointFeatureFragment(float rad) {\n  vec4 strokeColor, fillColor;\n  float endStep;\n  // No stroke or fill implies nothing to draw\n  if (rad > 1.0)\n    discard;\n  // If there is no stroke, the fill region should transition to nothing\n  if (strokeColorVar.a == 0.0) {\n    strokeColor = vec4(fillColorVar.rgb, 0.0);\n    endStep = 1.0;\n  } else {\n    strokeColor = strokeColorVar;\n    endStep = radiusVar / (radiusVar + strokeWidthVar);\n  }\n  // Likewise, if there is no fill, the stroke should transition to nothing\n  if (fillColorVar.a == 0.0)\n    fillColor = vec4(strokeColor.rgb, 0.0);\n  else\n    fillColor = fillColorVar;\n  // Distance to antialias over.  First number is in pixels\n  float antialiasDist = 1.5 / (radiusVar + strokeWidthVar);\n  if (rad < endStep) {\n    float step = smoothstep(max(0.0, endStep - antialiasDist), endStep, rad);\n    vec4 color = mix(fillColor, strokeColor, step);\n    float step2 = smoothstep(max(0.0, 1.0 - antialiasDist), 1.0, rad);\n    gl_FragColor = mix(color, vec4(color.rgb, 0.0), step2);\n  } else {\n    float step = smoothstep(max(0.0, 1.0 - antialiasDist), 1.0, rad);\n    gl_FragColor = mix(strokeColor, vec4(strokeColor.rgb, 0.0), step);\n  }\n}\n\n\n// the square/triangle shader defines unitVar\n\nvoid main () {\n  // No stroke or fill implies nothing to draw\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0)\n    discard;\n  float rad = 2.0 * length(gl_PointCoord - vec2(0.5));  // distinct for sprite\n  pointFeatureFragment(rad);\n}\n"},6979:function(t){t.exports="/* pointFeature sprite vertex shader */\n\n/* pointFeature common vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float radius;\nattribute vec3 fillColor;\nattribute vec3 strokeColor;\nattribute float fillOpacity;\nattribute float strokeWidth;\nattribute float strokeOpacity;\nattribute float fill;\nattribute float stroke;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float radiusVar;\nvarying float strokeWidthVar;\n\nfloat pointFeaturePrep() {\n  strokeWidthVar = strokeWidth;\n  fillColorVar = vec4(fillColor, fillOpacity);\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  // No stroke or fill implies nothing to draw\n  if (stroke < 1.0 || strokeWidth <= 0.0 || strokeOpacity <= 0.0) {\n    strokeColorVar.a = 0.0;\n    strokeWidthVar = 0.0;\n  }\n  if (fill < 1.0 || radius <= 0.0 || fillOpacity <= 0.0)\n    fillColorVar.a = 0.0;\n  /* If the point has no visible pixels, skip doing computations on it. */\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0) {\n    gl_Position = vec4(2, 2, 0, 1);\n    return 0.0;\n  }\n  return radius;\n}\n\n\nvoid main(void)\n{\n  radiusVar = pointFeaturePrep();\n  if (radiusVar == 0.0) {\n    return;\n  }\n  // for sprite\n  gl_Position = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;\n  gl_PointSize = 2.0 * (radius + strokeWidthVar);\n}\n"},4547:function(t){t.exports="/* polygonFeature fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying vec4 fillColorVar;\n\nvoid main () {\n  gl_FragColor = fillColorVar;\n}\n"},9506:function(t){t.exports="/* polygonFeature vertex shader */\n\nattribute vec3 pos;\nattribute vec3 fillColor;\nattribute float fillOpacity;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying vec4 fillColorVar;\n\nvoid main(void)\n{\n  vec4 clipPos = projectionMatrix * modelViewMatrix * vec4(pos.xyz, 1.0);\n  if (clipPos.w != 0.0) {\n    clipPos = clipPos/clipPos.w;\n  }\n  fillColorVar = vec4(fillColor, fillOpacity);\n  gl_Position = clipPos;\n}\n"},6207:function(t){t.exports="/* polygonFeature fragment shader */\n\n/* markerFeature common fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\n// the square/triangle shader defines unitVar\nconst int symbolEllipse = 0;\nconst int symbolFlowerBase = 1;\nconst int symbolFlowerMax = 16;\nconst int symbolTriangle = 16;\nconst int symbolStarBase = 17;\nconst int symbolStarMax = 16;\nconst int symbolRectangle = 32;\nconst int symbolCrossBase = 33;\nconst int symbolCrossMax = 16;\nconst int symbolOval = 48;\nconst int symbolJackBase = 49;\nconst int symbolJackMax = 16;\nconst int symbolDrop = 64;\nconst int symbolDropBase = 65;\nconst int symbolDropMax = 16;\nconst int symbolArrow = 80;\nconst int symbolArrowBase = 81;\nconst int symbolArrowMax = 16;\n// Distance to antialias in pixels\nconst float antialiasDist = 1.5;\n\n/* Compute the distance from a point to an arrow defined by the radiusVar and a\n * packed value containing\n *   headWidth: ratio to radius (0, 1]\n *   headLength: ratio to diameter (0, 1]\n *   stemWidth: ratio to headWidth [0, 1]\n *   sweep: boolean\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float packed: the packed value.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToArrow(vec2 pos, float value) {\n  bool sweep = value < 0.0;\n  value = abs(value);\n  float pack0 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack1 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack2 = (mod(value, 252.0) - 1.0) / 250.0;\n\n  float headWidth = (pack0 > 0.0 ? pack0 : 2.0 / 3.0);\n  float headEnd = 1.0 - 2.0 * (pack1 > 0.0 ? pack1 : 1.0 / 2.0);\n  float stemWidth = headWidth * (pack2 >= 0.0 ? pack2 : 1.0 / 3.0);\n  if (length(vec2(headWidth, headEnd)) > 1.0) {\n    vec2 scaledHead = normalize(vec2(headWidth, headEnd));\n    headWidth = scaledHead.x;\n    headEnd = scaledHead.y;\n  }\n  float stemEnd = -cos(asin(stemWidth));\n\n  headWidth *= radiusVar;\n  headEnd *= radiusVar;\n  stemWidth *= radiusVar;\n  stemEnd *= radiusVar;\n  pos.y = abs(pos.y);\n  float stemDist = pos.y - stemWidth;\n  float stemEndDist = stemEnd - pos.x;\n  float B = (radiusVar - headEnd) / headWidth;\n  float headDist = (pos.x + B * pos.y - radiusVar) / sqrt(1.0 + B * B);\n  float headEndDist;\n  if (sweep) {\n    B = (radiusVar - headEnd) / 3.0 / headWidth;\n    headEndDist = -(pos.x + B * pos.y - (radiusVar + headEnd * 2.0) / 3.0) / sqrt(1.0 + B * B);\n  } else {\n    headEndDist = headEnd - pos.x;\n  }\n  headEndDist = min(headEndDist, stemDist);\n  return max(max(headDist, headEndDist), stemEndDist);\n}\n\n/* Compute the distance from a point to a drop defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major radii).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToDrop(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float r = radiusVar * ratio;\n  float cx = radiusVar - r;\n  float rad = distance(pos.xy, vec2(cx, 0.0)) - r;\n  if (ratio < 0.5) {\n    float x = radiusVar - r - r * r / cx;\n    float y = sqrt(r * r - (cx - x) * (cx - x));\n    float Bt = (cx - x) / y;\n    if ((pos.x + Bt * abs(pos.y) - cx) / sqrt(1.0 + Bt * Bt) < 0.0) {\n      float B = -x / y;\n      return -(pos.x + B * abs(pos.y)) / sqrt(1.0 + B * B);\n    }\n  }\n  return rad;\n}\n\n/* Compute the distance from a point to the ellipse defined by the radiusVar\n * (the semimajor axis) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the ellipse in pixels.  Negative is\n *   inside.\n */\nfloat distanceToEllipse(vec2 pos, float ratio) {\n  // a and b are the semi-major and semi-minor axes\n  // ratio is the between the minor and major axes.  If > 1, swap these and\n  // rotate 90 degrees.\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  float a = radiusVar, b = abs(radiusVar * ratio);\n  if (b > a) {\n    pos = vec2(pos.y, -pos.x);\n    b = abs(radiusVar / ratio);\n  }\n  float a2 = a * a, b2 = b * b;\n  // compute the distance to the ellipse.  See this discussion:\n  // https://stackoverflow.com/questions/22959698\n  float f = sqrt(a2 - b2),\n        // this value will be positive if outside and negative if inside.  If\n        // we used it directly, the stroke would be too thick along the long\n        // edges of the ellipse\n        d = (distance(pos, vec2(f, 0.0)) + distance(pos, vec2(-f, 0.0))) * 0.5 - a;\n  // if we are outside of the ellipse, accuracy is not important, so return\n  // early.\n  if (d >= 0.0) {\n    return d;\n  }\n  // work in one quadrant\n  pos = abs(pos);\n  // t (the angle from center) could start as `atan(pos.y, pos.x)`, but this\n  // results in a slower solution near narrow ends\n  float t = 0.7;\n  float cost = cos(t), sint = sin(t), x = a * cost, y = b * sint;\n  vec2 lastxy;\n  for (int iter = 0; iter < 10; iter += 1) {\n    lastxy = vec2(x, y);\n    float ex = (a2 - b2) * pow(cost, 3.0) / a,\n          ey = (b2 - a2) * pow(sint, 3.0) / b;\n    vec2 r = vec2(x - ex, y - ey),\n         q = vec2(pos.x - ex, pos.y - ey);\n    float lenr = length(r);\n    t += lenr * asin((r.x * q.y - r.y * q.x) / lenr / length(q)) / sqrt(a2 + b2 - x * x - y * y);\n    t = clamp(t, 0.0, acos(0.0));\n    cost = cos(t);\n    sint = sin(t);\n    x = a * cost;\n    y = b * sint;\n    if (distance(lastxy, vec2(x, y)) < 0.05) {\n      break;\n    }\n  }\n  return sign(d) * distance(pos, vec2(x, y));\n}\n\n/* Compute the distance from a point to an isosceles triangle.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: length of the base compared to the other sides.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToIsoscelesTriangle(vec2 pos, float ratio) {\n  ratio = clamp(abs(ratio), 0.0, 2.0);\n  if (ratio == 0.0 || ratio == 2.0) {\n    ratio = 1.0;\n  }\n  float s1, s2, x0, x1, y1;\n  if (ratio < sqrt(2.0)) {\n    s1 = radiusVar * sqrt(4.0 - ratio * ratio); // length of equal sides\n    s2 = s1 * ratio;\n    y1 = s2 / 2.0;\n    x0 = radiusVar;\n    x1 = x0 - sqrt(s1 * s1 - y1 * y1);\n  } else {\n    s2 = radiusVar * 2.0;\n    s1 = s2 / ratio;\n    y1 = s2 / 2.0;\n    x0 = sqrt(s1 * s1 - y1 * y1);\n    x1 = 0.0;\n  }\n  float B = (x0 - x1) / y1;\n  return max(x1 - pos.x, (pos.x + B * abs(pos.y) - x0) / sqrt(1.0 + B * B));\n}\n\n/* Compute the distance from a point to an oval defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major axes).  Here an oval\n * is defined as two semicircles connected by straight line segments.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the oval in pixels.  Negative is inside.\n */\nfloat distanceToOval(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float minor = radiusVar * ratio;\n  float center = radiusVar - minor;\n  pos = abs(pos);\n  if (pos.x <= center) {\n    return pos.y - minor;\n  }\n  return distance(pos, vec2(center, 0.0)) - minor;\n}\n\n/* Compute the distance from a point to a rectangle defined by the radiusVar\n * (the semidiagonal) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToRectangle(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  vec2 wh = normalize(vec2(1.0, abs(ratio))) * radiusVar;\n  vec2 dist = abs(pos) - wh;\n  return max(dist.x, dist.y);\n}\n\n/* Based on a repetition value, return a position for rotational symmetry.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        int repetitions: number of repetitions on the cross.\n * Exit:  float dist: a point in the primary position.\n */\nvec2 rotationalSymmetry(vec2 pos, int repetitions) {\n  float pi = acos(-1.0);\n  float limit = pi / float(repetitions);\n  float ang = atan(pos.y, pos.x);\n  ang = mod(ang + pi * 2.0, limit * 2.0);\n  if (ang > limit) {\n    ang -= limit * 2.0;\n  }\n  return vec2(cos(ang), sin(ang)) * length(pos);\n}\n\nfloat markerFeatureFragment(vec3 posAndSpacing) {\n  vec2 pos = posAndSpacing.xy;\n  float spacing = posAndSpacing.z;\n  // square lattice\n  if (spacing > 0.0) {\n    pos.x = mod(pos.x + spacing * 0.5, spacing) - spacing * 0.5;\n    pos.y = mod(pos.y + spacing * 0.5, spacing) - spacing * 0.5;\n  }\n  // triangular lattice\n  if (spacing < 0.0) {\n    spacing = spacing * -1.0;\n    float cz = (2.0 * pos.y) / (sqrt(3.0) * spacing);\n    float cx = pos.x / spacing - 0.5 * cz;\n    float cy = -cx - cz;\n    float rx = floor(cx + 0.5);\n    float ry = floor(cy + 0.5);\n    float rz = floor(cz + 0.5);\n    float dx = abs(rx - cx);\n    float dy = abs(ry - cy);\n    float dz = abs(rz - cz);\n    if (dx > dy && dx > dz) {\n      rx = -ry - rz;\n    } else if (dy > dz) {\n      ry = -rx - rz;\n    } else {\n      rz = -rx - ry;\n    }\n    vec2 center = vec2(spacing * (rx + 0.5 * rz), (sqrt(3.0) * spacing * 0.5) * rz);\n    pos = pos - center;\n  }\n  // rad is a value in pixels from the edge of the symbol where negative is\n  // inside the shape\n  float rad = length(pos.xy) - radiusVar;\n  // never allow points outside of the main radius\n  if (rad > 0.0) {\n    return 0.0;\n  }\n  // apply clockwise rotation\n  if (rotationVar != 0.0) {\n    float cosr = cos(rotationVar), sinr = sin(rotationVar);\n    pos = vec2(pos.x * cosr + pos.y * sinr, -pos.x * sinr + pos.y * cosr);\n  }\n\n  int symbol = int(floor(symbolVar / 64.0));\n  bool isimage = bool(mod(floor(symbolVar / 8.0), 2.0));\n  vec4 fillColor, strokeColor;\n  float endStep;\n\n  float ratio = symbolValueVar;\n  // When ratio is 0, it usually gets changed to 1; some shapes could have\n  // better defaults\n  /* Symbol shapes */\n  if (symbol == symbolTriangle) {\n    rad = distanceToIsoscelesTriangle(pos, ratio);\n  } else if (symbol == symbolRectangle) {\n    rad = distanceToRectangle(pos, ratio);\n  } else if (symbol == symbolOval) {\n    rad = distanceToOval(pos, ratio);\n  } else if (symbol == symbolDrop) {\n    rad = distanceToDrop(pos, ratio);\n  } else if (symbol == symbolArrow) {\n    rad = distanceToArrow(pos, ratio);\n  } else if (symbol >= symbolCrossBase && symbol <= symbolCrossBase + symbolCrossMax - 2) {\n    rad = distanceToRectangle(rotationalSymmetry(pos, symbol - symbolCrossBase + 2), ratio);\n  } else if (symbol >= symbolFlowerBase && symbol <= symbolFlowerBase + symbolFlowerMax - 2) {\n    rad = distanceToEllipse(rotationalSymmetry(pos, symbol - symbolFlowerBase + 2), ratio);\n  } else if (symbol >= symbolStarBase && symbol <= symbolStarBase + symbolStarMax - 2) {\n    rad = distanceToIsoscelesTriangle(rotationalSymmetry(pos, symbol - symbolStarBase + 2), ratio);\n  } else if (symbol >= symbolJackBase && symbol <= symbolJackBase + symbolJackMax - 2) {\n    rad = distanceToOval(rotationalSymmetry(pos, symbol - symbolJackBase + 2), ratio);\n  } else if (symbol >= symbolDropBase && symbol <= symbolDropBase + symbolDropMax - 2) {\n    rad = distanceToDrop(rotationalSymmetry(pos, symbol - symbolDropBase + 2), ratio);\n  } else if (symbol >= symbolArrowBase && symbol <= symbolArrowBase + symbolArrowMax - 2) {\n    rad = distanceToArrow(rotationalSymmetry(pos, symbol - symbolArrowBase + 2), ratio);\n  } else { // default - circle or ellipse; a value of 0 or 1 is a circle\n    if (ratio != 0.0 && ratio != 1.0) {\n      rad = distanceToEllipse(pos, ratio);\n    }\n  }\n\n  if (rad >= 0.0) {\n    return 0.0;\n  }\n  // If there is no stroke, the fill region should transition to nothing\n  if (strokeColorVar.a == 0.0 || strokeWidthVar <= 0.0) {\n    strokeColor = vec4(fillColorVar.rgb, 0.0);\n    endStep = 0.0;\n  } else {\n    strokeColor = strokeColorVar;\n    endStep = -strokeWidthVar;\n  }\n  // Likewise, if there is no fill, the stroke should transition to nothing\n  if (fillColorVar.a == 0.0) {\n    fillColor = vec4(strokeColorVar.rgb, 0.0);\n  } else {\n    fillColor = fillColorVar;\n  }\n  float alpha = 1.0;\n  if (rad <= endStep) {\n    float step = smoothstep(endStep - antialiasDist, endStep, rad);\n    vec4 color = mix(fillColor, strokeColor, step);\n    float step2 = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(color, vec4(color.rgb, 0.0), step2);\n    if (color.a > 0.0)\n      alpha = gl_FragColor.a / color.a;\n  } else {\n    float step = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(strokeColor, vec4(strokeColor.rgb, 0.0), step);\n    if (strokeColor.a > 0.0)\n      alpha = gl_FragColor.a / strokeColor.a;\n  }\n  return alpha;\n}\n\n\nvarying vec4 polyFillColorVar;\nvarying vec3 patternPosVar;\n\nvoid main () {\n\n  float used = 0.0;\n  if (fillColorVar.a != 0.0 || strokeColorVar.a != 0.0)\n    used = markerFeatureFragment(patternPosVar);\n  if (used != 1.0)\n    gl_FragColor = polyFillColorVar * (1.0 - used) + gl_FragColor * used;\n}\n"},1030:function(t){t.exports="/* polygonPatternFeature vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nuniform float pixelWidth;\nuniform float aspect;\nuniform float zoom;\nuniform float rotationUniform;\nattribute vec3 pos;\nattribute vec3 fillColor;\nattribute float fillOpacity;\nattribute vec4 patternFillColor;\nattribute vec4 patternStrokeColor;\n/* Symbol props are strokeWidth, radius, symbol + flags, symbolValue */\nattribute vec4 patternSymbolProps;\n/* Position props are rotation, spacing, origin x, origin y */\nattribute vec4 patternPositionProps;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying vec4 polyFillColorVar;\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\nvarying vec3 patternPosVar;\nconst float PI = 3.14159265358979323846264;\n\nvoid main(void)\n{\n  polyFillColorVar = vec4(fillColor, fillOpacity);\n  /* This is _nearly_ the same as what is in markerFeatureVS.glsl, but the\n   * attributes are named differently. */\n  radiusVar = patternSymbolProps.y;\n  strokeWidthVar = patternSymbolProps.x;\n  int scaleMode = int(mod(patternSymbolProps.z, 4.0));\n  float strokeOffset = mod(floor(patternSymbolProps.z / 16.0), 4.0) - 1.0;\n  if (radiusVar < 0.0 || (patternFillColor.a < 0.0 && patternStrokeColor.a < 0.0)) {\n    radiusVar = 0.0;\n  } else {\n    radiusVar += (strokeOffset + 1.0) / 2.0 * strokeWidthVar;\n    if (scaleMode == 1) { // fill\n      radiusVar = (radiusVar - strokeWidthVar) * exp2(zoom) + strokeWidthVar;\n    } else if (scaleMode == 2) { // stroke\n      radiusVar += strokeWidthVar * (exp2(zoom) - 1.0);\n      strokeWidthVar *= exp2(zoom);\n    } else if (scaleMode == 3) { // all\n      radiusVar *= exp2(zoom);\n      strokeWidthVar *= exp2(zoom);\n    }\n  }\n  fillColorVar = patternFillColor;\n  strokeColorVar = patternStrokeColor;\n  symbolVar = patternSymbolProps.z;\n  symbolValueVar = patternSymbolProps.w;\n  rotationVar = patternPositionProps.x;\n  if (bool(mod(floor(symbolVar / 4.0), 2.0))) {\n    rotationVar += rotationUniform;\n  }\n  /* This is distinct for polygonPattern */\n  vec4 clipPos = projectionMatrix * modelViewMatrix * vec4(pos.xyz, 1.0);\n  if (clipPos.w != 0.0) {\n    clipPos = clipPos / clipPos.w;\n  }\n  if (radiusVar > 0.0) {\n    vec4 origPos = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);\n    if (origPos.w != 0.0)\n      origPos = origPos / origPos.w;\n    patternPosVar.x = (clipPos.x - origPos.x) / pixelWidth;\n    patternPosVar.y = -(clipPos.y - origPos.y) / pixelWidth / aspect;\n    float spacing = patternPositionProps.y;\n    if (scaleMode == 0) {\n      patternPosVar.x -= patternPositionProps.z;\n      patternPosVar.y -= patternPositionProps.w;\n    } else {\n      spacing = spacing * exp2(zoom);\n      patternPosVar.x -= patternPositionProps.z * exp2(zoom);\n      patternPosVar.y -= patternPositionProps.w * exp2(zoom);\n    }\n    if (rotationUniform != 0.0) {\n      float cosR = cos(rotationUniform);\n      float sinR = sin(rotationUniform);\n      patternPosVar.xy = vec2(cosR * patternPosVar.x + sinR * patternPosVar.y, sinR * patternPosVar.x - cosR * patternPosVar.y);\n    }\n    patternPosVar.z = spacing;\n  }\n  gl_Position = clipPos;\n}\n"},8961:function(t){t.exports="/* quadFeature Color fragment shader */\n\nvarying mediump vec3 iVertexColor;\nuniform mediump float opacity;\n\nvoid main(void) {\n  gl_FragColor = vec4(iVertexColor, opacity);\n}\n"},3260:function(t){t.exports="/* quadFeature Color vertex shader */\n\nattribute vec3 vertexPosition;\nuniform float zOffset;\nuniform vec3 vertexColor;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying mediump vec3 iVertexColor;\n\nvoid main(void) {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);\n  gl_Position.z += zOffset;\n  iVertexColor = vertexColor;\n}\n"},8711:function(t){t.exports="/* quadFeature Image fragment shader */\n\nvarying highp vec2 iTextureCoord;\nuniform sampler2D sampler2d;\nuniform mediump float opacity;\nuniform highp vec2 crop;\n\nvoid main(void) {\n  mediump vec4 color = texture2D(sampler2d, iTextureCoord);\n  if ((crop.s < 1.0 && iTextureCoord.s > crop.s) || (crop.t < 1.0 && 1.0 - iTextureCoord.t > crop.t)) {\n    discard;\n  }\n  color.w *= opacity;\n  gl_FragColor = color;\n}\n"},6238:function(t){t.exports="/* quadFeature Image vertex shader */\n\nattribute vec3 vertexPosition;\nattribute vec2 textureCoord;\nuniform float zOffset;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying highp vec2 iTextureCoord;\nuniform highp vec4 cropsource;\n\nvoid main(void) {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);\n  gl_Position.z += zOffset;\n  if (cropsource.p > cropsource.s && cropsource.q > cropsource.t && (cropsource.p < 1.0 || cropsource.s > 0.0 || cropsource.q < 1.0 || cropsource.t > 0.0)) {\n    iTextureCoord.s = textureCoord.s * (cropsource.p - cropsource.s) + cropsource.s;\n    iTextureCoord.t = textureCoord.t * (cropsource.q - cropsource.t) + cropsource.t;\n  } else {\n    iTextureCoord = textureCoord;\n  }\n}\n"},7605:function(t,e,n){"use strict";n.r(e);var i=n(5292),r=n.n(i),o=n(9893),a=n.n(o),s=n(9383),l=n.n(s),u=n(6884),c=n.n(u),h=n(9088),d=n.n(h),f=n(7997),p=n.n(f),m=n(632),g={};g.styleTagTransform=p(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=d();r()(m.A,g);e.default=m.A&&m.A.locals?m.A.locals:void 0},1159:function(t,e,n){"use strict";n.r(e);var i=n(5292),r=n.n(i),o=n(9893),a=n.n(o),s=n(9383),l=n.n(s),u=n(6884),c=n.n(u),h=n(9088),d=n.n(h),f=n(7997),p=n.n(f),m=n(7046),g={};g.styleTagTransform=p(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=d();r()(m.A,g);e.default=m.A&&m.A.locals?m.A.locals:void 0},615:function(t,e,n){"use strict";n.r(e);var i=n(5292),r=n.n(i),o=n(9893),a=n.n(o),s=n(9383),l=n.n(s),u=n(6884),c=n.n(u),h=n(9088),d=n.n(h),f=n(7997),p=n.n(f),m=n(5290),g={};g.styleTagTransform=p(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=d();r()(m.A,g);e.default=m.A&&m.A.locals?m.A.locals:void 0},5292:function(t){"use strict";var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var o={},a=[],s=0;s<t.length;s++){var l=t[s],u=i.base?l[0]+i.base:l[0],c=o[u]||0,h="".concat(u," ").concat(c);o[u]=c+1;var d=n(h),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(f);else{var p=r(f,i);i.byIndex=s,e.splice(s,0,{identifier:h,updater:p,references:1})}a.push(h)}return a}function r(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var o=i(t=t||[],r=r||{});return function(t){t=t||[];for(var a=0;a<o.length;a++){var s=n(o[a]);e[s].references--}for(var l=i(t,r),u=0;u<o.length;u++){var c=n(o[u]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}o=l}}},9383:function(t){"use strict";var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},9088:function(t){"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},6884:function(t,e,n){"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},9893:function(t){"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},7997:function(t){"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},9463:function(t){"use strict";t.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj4KICAgIDxwYXRoIGQ9Ik0wLDExbDExLDBsMCwtMTFsMiwwbDAsMTFsMTEsMGwwLDJsLTExLDBsMCwxMWwtMiwwbDAsLTExbC0xMSwweiIgZmlsbD0iYmxhY2siIHN0cm9rZS13aWR0aD0iMCIvPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzIsIDE5Ljc3Nykgc2NhbGUoMC40KSByb3RhdGUoOTApIj4KICAgICAgICA8cGF0aCBkPSJNMjYuMzExLDIzLjIyNGMtMC44MTItMS40MTYtMi4wNzItMi4zNzUtMy40MDItMi43MzZjLTEuMDUxLTAuMjg3LTIuMTQxLTAuMTk5LTMuMDg0LDAuMzM0bC0yLjgwNS00LjkwNAogICAgICAgIGMxLjczNi0zLjQ2Myw1LjYzMy0xMS4yMjcsNi4zMzItMTIuNDUxQzI0LjI1OCwxLjg4NCwyMi42MzcsMCwyMi42MzcsMGwtNy4zNiwxMi44NzJMNy45MTksMGMwLDAtMS42MiwxLjg4NC0wLjcxNSwzLjQ2NgogICAgICAgIGMwLjcsMS4yMjUsNC41OTgsOC45ODgsNi4zMzIsMTIuNDUxbC0yLjgwNCw0LjkwNGMtMC45NDMtMC41MzMtMi4wMzUtMC42MjEtMy4wODQtMC4zMzRjLTEuMzMyLDAuMzYxLTIuNTkxLDEuMzItMy40MDMsMi43MzYKICAgICAgICBjLTEuNDU4LDIuNTQ3LTAuOTAxLDUuNjAyLDEuMjM5LDYuODI3YzAuOTQ5LDAuNTQ1LDIuMDQ4LDAuNjMyLDMuMTA3LDAuMzQ1YzEuMzI5LTAuMzYzLDIuNTkxLTEuMzIyLDMuNDAyLTIuNzM1CiAgICAgICAgYzAuMzU1LTAuNjI0LDAuNTktMS4yNzcsMC43MS0xLjkyNnYwLjAwMWMwLjAwMS0wLjAwNSwwLjAwMS0wLjAxLDAuMDA2LTAuMDE1YzAuMDA3LTAuMDU0LDAuMDE3LTAuMTA4LDAuMDIyLTAuMTY3CiAgICAgICAgYzAuNjAyLTQuMDM5LDEuNzQtNi4xMDIsMi41NDUtNy4xMDRjMC44MDcsMS4wMDIsMS45NDYsMy4wNjQsMi41NDcsNy4xMDRjMC4wMDYsMC4wNTksMC4wMTYsMC4xMTMsMC4wMjEsMC4xNjcKICAgICAgICBjMC4wMDQsMC4wMDUsMC4wMDQsMC4wMSwwLjAwNiwwLjAxNXYtMC4wMDFjMC4xMjEsMC42NDgsMC4zNTUsMS4zMDIsMC43MDksMS45MjZjMC44MTIsMS40MTMsMi4wNzQsMi4zNzIsMy40MDQsMi43MzUKICAgICAgICBjMS4wNTksMC4yODcsMi4xNTgsMC4yLDMuMTA5LTAuMzQ1QzI3LjIxMywyOC44MjUsMjcuNzY4LDI1Ljc3MSwyNi4zMTEsMjMuMjI0eiBNOS45MTEsMjYuNDY4CiAgICAgICAgYy0wLjQ2LDAuODAzLTEuMTg5LDEuNDA4LTEuOTQ4LDEuNjE1Yy0wLjMzOCwwLjA5Mi0wLjgzNCwwLjE0OC0xLjI4OS0wLjExM2MtMC45Ny0wLjU1NS0xLjEyOS0yLjE4Ni0wLjM0Ni0zLjU1NgogICAgICAgIGMwLjQ2OC0wLjgxMiwxLjE3Ny0xLjQwMywxLjk1LTEuNjE0YzAuMzM1LTAuMDkxLDAuODMxLTAuMTQ2LDEuMjg4LDAuMTEzQzEwLjUzNywyMy40NywxMC42OTUsMjUuMDk3LDkuOTExLDI2LjQ2OHogTTIzLjg4MSwyNy45NwogICAgICAgIGMtMC40NTUsMC4yNjItMC45NDksMC4yMDUtMS4yODcsMC4xMTNjLTAuNzYtMC4yMDctMS40ODgtMC44MTItMS45NDktMS42MTVjLTAuNzgzLTEuMzcxLTAuNjI1LTIuOTk4LDAuMzQ2LTMuNTU1CiAgICAgICAgYzAuNDU3LTAuMjYsMC45NTMtMC4yMDQsMS4yODktMC4xMTNjMC43NzEsMC4yMTEsMS40ODIsMC44MDIsMS45NDcsMS42MTRDMjUuMDEsMjUuNzg0LDI0Ljg1MiwyNy40MTUsMjMuODgxLDI3Ljk3eiIgZmlsbD0iYmxhY2siIHN0cm9rZS13aWR0aD0iMCIvPgogICAgPC9nPgo8L3N2Zz4K"},5245:function(t){"use strict";t.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj4KPHBhdGggZD0iTTAsMTFsMTEsMGwwLC0xMWwyLDBsMCwxMWwxMSwwbDAsMmwtMTEsMGwwLDExbC0yLDBsMCwtMTFsLTExLDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+CjxwYXRoIGQ9Ik0yNCwyN2w4LDBsMCwybC04LDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+Cjwvc3ZnPgo="},8546:function(t){"use strict";t.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj4KPHBhdGggZD0iTTAsMTFsMTEsMGwwLC0xMWwyLDBsMCwxMWwxMSwwbDAsMmwtMTEsMGwwLDExbC0yLDBsMCwtMTFsLTExLDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+CjxwYXRoIGQ9Ik0yNCwyN2wzLDBsMCwtM2wyLDBsMCwzbDMsMGwwLDJsLTMsMGwwLDNsLTIsMGwwLC0zbC0zLDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+Cjwvc3ZnPgo="},3158:function(t){"use strict";t.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj4KPHBhdGggZD0iTTAsMTFsMTEsMGwwLC0xMWwyLDBsMCwxMWwxMSwwbDAsMmwtMTEsMGwwLDExbC0yLDBsMCwtMTFsLTExLDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+CjxwYXRoIGQ9Ik0yNCwzMmwwLC00YTQsNCwwLDAsMSw4LDBsMCw0bC0yLDBsMCwtNGEyLDIsMCwwLDAsLTQsMGwwLDR6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+Cjwvc3ZnPgo="},9803:function(t){"use strict";t.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj4KPHBhdGggZD0iTTAsMTFsMTEsMGwwLC0xMWwyLDBsMCwxMWwxMSwwbDAsMmwtMTEsMGwwLDExbC0yLDBsMCwtMTFsLTExLDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+CjxwYXRoIGQ9Ik0zMiwzMC41OWwtMS40MSwxLjQxbC0yLjEyLC0yLjEybC0yLjEyLDIuMTJsLTEuNDEsLTEuNDFsMi4xMiwtMi4xMmwtMi4xMiwtMi4xMmwxLjQxLC0xLjQxbDIuMTIsMi4xMmwyLjEyLC0yLjEybDEuNDEsMS40MWwtMi4xMiwyLjEyeiIgZmlsbD0iYmxhY2siIHN0cm9rZS13aWR0aD0iMCIvPgo8L3N2Zz4K"},3893:function(t){"use strict";if(void 0===e){var n=new Error("Cannot find module 'd3'");throw n.code="MODULE_NOT_FOUND",n}t.exports=e},4436:function(t){"use strict";if(void 0===n){var e=new Error("Cannot find module 'vtk.js'");throw e.code="MODULE_NOT_FOUND",e}t.exports=n},7606:function(e){"use strict";if(void 0===t){var n=new Error("Cannot find module 'hammerjs'");throw n.code="MODULE_NOT_FOUND",n}e.exports=t},9061:function(t,e){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=p(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function r(t,e,i){return e=a(e),function(t,e){if(e&&("object"==n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,o()?Reflect.construct(e,i||[],a(t).constructor):e.apply(t,i))}function o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(o=function(){return!!t})()}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,h(i.key),i)}}function c(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(s.push(i.value),s.length!==e);l=!0);}catch(t){u=!0,r=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw r}}return s}}(t,e)||p(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){if(t){if("string"==typeof t)return m(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function g(t,e,n){return t+(e-t)*n}function y(t,e,n){return[g(t[0],e[0],n),g(t[1],e[1],n)]}function v(t,e){var n=f(t,2),i=n[0],r=n[1],o=f(e,2),a=o[0],s=o[1];return!(i[0]>s[0]||r[0]<a[0]||i[1]>s[1]||r[1]<a[1])}Object.defineProperty(e,"__esModule",{value:!0});var x=c(function t(){d(this,t)}),_=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e-10;return d(this,e),(t=r(this,e)).epsilon=n,t}return s(e,t),c(e,[{key:"snap0",value:function(t){return Math.abs(t)<this.epsilon?0:t}},{key:"snap01",value:function(t){return Math.abs(t)<this.epsilon?0:Math.abs(1-t)<this.epsilon?1:t}},{key:"isCollinear",value:function(t,e,n){var i=t[0]-e[0],r=t[1]-e[1],o=e[0]-n[0],a=e[1]-n[1];return Math.abs(i*a-o*r)<this.epsilon}},{key:"solveCubicNormalized",value:function(t,e,n){var i=t/3,r=e/3,o=i*i-r,a=i*(i*i-e/2)+n/2;if(Math.abs(a)<this.epsilon&&Math.abs(o)<this.epsilon)return[-i];var s=i*(i*(4*i*n-r*e)-2*e*n)+4*r*r*r+n*n;if(Math.abs(s)<this.epsilon){var l=Math.sqrt(o);return a>0?[-2*l-t/3,l-t/3]:[-l-t/3,2*l-t/3]}var u=o*o*o,c=a*a;if(c<u){var h=(a<0?-1:1)*Math.sqrt(c/u),d=Math.acos(h),f=-2*Math.sqrt(o);return[f*Math.cos(d/3)-i,f*Math.cos((d+2*Math.PI)/3)-i,f*Math.cos((d-2*Math.PI)/3)-i].sort(function(t,e){return t-e})}var p=(a<0?1:-1)*Math.pow(Math.abs(a)+Math.sqrt(c-u),1/3);return[p+(Math.abs(p)>=this.epsilon?o/p:0)-i]}},{key:"solveCubic",value:function(t,e,n,i){if(Math.abs(t)<this.epsilon){if(Math.abs(e)<this.epsilon)return Math.abs(n)<this.epsilon?Math.abs(i)<this.epsilon?[0]:[]:[-i/n];var r=2*e,o=n*n-4*e*i;return Math.abs(o)<this.epsilon?[-n/r]:o>0?[(-n+(o=Math.sqrt(o)))/r,(-n-o)/r].sort(function(t,e){return t-e}):[]}return this.solveCubicNormalized(e/t,n/t,i/t)}},{key:"isEqualVec2",value:function(t,e){return Math.abs(t[0]-e[0])<this.epsilon&&Math.abs(t[1]-e[1])<this.epsilon}},{key:"compareVec2",value:function(t,e){return Math.abs(e[0]-t[0])<this.epsilon?Math.abs(e[1]-t[1])<this.epsilon?0:t[1]<e[1]?-1:1:t[0]<e[0]?-1:1}}])}(x),b=function(){return c(function t(e){d(this,t),this.tValues=[],this.geo=e},[{key:"addArray",value:function(t){var e,n=i(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.tValues.push(r)}}catch(t){n.e(t)}finally{n.f()}return this}},{key:"add",value:function(t){if((t=this.geo.snap01(t))<0||t>1)return this;var e,n=i(this.tValues);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(0===this.geo.snap0(t-r))return this}}catch(t){n.e(t)}finally{n.f()}return this.tValues.push(t),this}},{key:"list",value:function(){return this.tValues.sort(function(t,e){return t-e}),this.tValues}}])}(),w=function(){return c(function t(e,n){d(this,t),this.tValuePairs=[],this.allowOutOfRange=e,this.geo=n},[{key:"add",value:function(t,e){if(t=this.geo.snap01(t),e=this.geo.snap01(e),!this.allowOutOfRange&&(t<0||t>1||e<0||e>1))return this;var n,r=i(this.tValuePairs);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(0===this.geo.snap0(t-o[0])||0===this.geo.snap0(e-o[1]))return this}}catch(t){r.e(t)}finally{r.f()}return this.tValuePairs.push([t,e]),this}},{key:"list",value:function(){return this.tValuePairs.sort(function(t,e){return t[0]-e[0]}),this.tValuePairs}},{key:"done",value:function(){return this.tValuePairs.length<=0?null:{kind:"tValuePairs",tValuePairs:this.list()}}}])}(),M=c(function t(){d(this,t)}),A=function(t){function e(t,n,i){var o;return d(this,e),(o=r(this,e)).p0=t,o.p1=n,o.geo=i,o}return s(e,t),c(e,[{key:"copy",value:function(){return new e(this.p0,this.p1,this.geo)}},{key:"isEqual",value:function(t){return this.geo.isEqualVec2(this.p0,t.p0)&&this.geo.isEqualVec2(this.p1,t.p1)}},{key:"start",value:function(){return this.p0}},{key:"start2",value:function(){return this.p1}},{key:"end2",value:function(){return this.p0}},{key:"end",value:function(){return this.p1}},{key:"setStart",value:function(t){this.p0=t}},{key:"setEnd",value:function(t){this.p1=t}},{key:"point",value:function(t){var e=this.p0,n=this.p1;return 0===t?e:1===t?n:[e[0]+(n[0]-e[0])*t,e[1]+(n[1]-e[1])*t]}},{key:"split",value:function(t){var n=this;if(t.length<=0)return[this];var r=t.map(function(t){return n.point(t)});r.push(this.p1);var o,a=[],s=this.p0,l=i(r);try{for(l.s();!(o=l.n()).done;){var u=o.value;a.push(new e(s,u,this.geo)),s=u}}catch(t){l.e(t)}finally{l.f()}return a}},{key:"reverse",value:function(){return new e(this.p1,this.p0,this.geo)}},{key:"boundingBox",value:function(){var t=this.p0,e=this.p1;return[[Math.min(t[0],e[0]),Math.min(t[1],e[1])],[Math.max(t[0],e[0]),Math.max(t[1],e[1])]]}},{key:"pointOn",value:function(t){return this.geo.isCollinear(t,this.p0,this.p1)}},{key:"draw",value:function(t){var e=this.p0,n=this.p1;return t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t}}])}(M),E=function(t){function e(t,n,i,o,a){var s;return d(this,e),(s=r(this,e)).p0=t,s.p1=n,s.p2=i,s.p3=o,s.geo=a,s}return s(e,t),c(e,[{key:"copy",value:function(){return new e(this.p0,this.p1,this.p2,this.p3,this.geo)}},{key:"isEqual",value:function(t){return this.geo.isEqualVec2(this.p0,t.p0)&&this.geo.isEqualVec2(this.p1,t.p1)&&this.geo.isEqualVec2(this.p2,t.p2)&&this.geo.isEqualVec2(this.p3,t.p3)}},{key:"start",value:function(){return this.p0}},{key:"start2",value:function(){return this.p1}},{key:"end2",value:function(){return this.p2}},{key:"end",value:function(){return this.p3}},{key:"setStart",value:function(t){this.p0=t}},{key:"setEnd",value:function(t){this.p3=t}},{key:"point",value:function(t){var e=this.p0,n=this.p1,i=this.p2,r=this.p3;if(0===t)return e;if(1===t)return r;var o=(1-t)*(1-t),a=t*t,s=o*(1-t),l=3*o*t,u=3*a*(1-t),c=a*t;return[e[0]*s+n[0]*l+i[0]*u+r[0]*c,e[1]*s+n[1]*l+i[1]*u+r[1]*c]}},{key:"split",value:function(t){var n=this;if(t.length<=0)return[this];var r,o=[],a=function(t,i){var r=f(t,4),a=r[0],s=r[1],l=r[2],u=r[3],c=y(a,s,i),h=y(s,l,i),d=y(l,u,i),p=y(c,h,i),m=y(h,d,i),g=y(p,m,i);return o.push(new e(a,c,p,g,n.geo)),[g,m,d,u]},s=[this.p0,this.p1,this.p2,this.p3],l=0,u=i(t);try{for(u.s();!(r=u.n()).done;){var c=r.value;s=a(s,(c-l)/(1-l)),l=c}}catch(t){u.e(t)}finally{u.f()}return o.push(new e(s[0],s[1],s[2],s[3],this.geo)),o}},{key:"reverse",value:function(){return new e(this.p3,this.p2,this.p1,this.p0,this.geo)}},{key:"getCubicCoefficients",value:function(t){var e=this.p0[t],n=this.p1[t],i=this.p2[t];return[this.p3[t]-3*i+3*n-e,3*i-6*n+3*e,3*n-3*e,e]}},{key:"boundingTValues",value:function(){var t=this,e=new b(this.geo),n=function(n,i,r,o){var a=3*o-9*r+9*i-3*n,s=6*n-12*i+6*r,l=3*i-3*n;if(0===t.geo.snap0(a))e.add(-l/s);else{var u=s*s-4*a*l;if(u>=0){var c=Math.sqrt(u);e.add((-s+c)/(2*a)),e.add((-s-c)/(2*a))}}return e},i=this.p0,r=this.p1,o=this.p2,a=this.p3;return n(i[0],r[0],o[0],a[0]),n(i[1],r[1],o[1],a[1]),e.list()}},{key:"inflectionTValues",value:function(){var t=new b(this.geo);t.addArray(this.boundingTValues());var e,n=this.p0,r=this.p1,o=this.p2,a=this.p3,s=3*(r[0]-n[0]),l=3*(r[1]-n[1]),u=6*(o[0]-r[0]),c=6*(o[1]-r[1]),h=3*(a[0]-o[0]),d=3*(a[1]-o[1]),f=6*(o[0]-2*r[0]+n[0]),p=6*(o[1]-2*r[1]+n[1]),m=s-u+h,g=l-c+d,y=u-2*s,v=c-2*l,x=6*(a[0]-2*o[0]+r[0])-f,_=6*(a[1]-2*o[1]+r[1])-p,w=m*_-g*x,M=m*p+y*_-g*f-v*x,A=y*p+s*_-v*f-l*x,E=s*p-l*f,T=i(this.geo.solveCubic(w,M,A,E));try{for(T.s();!(e=T.n()).done;){var S=e.value;t.add(S)}}catch(t){T.e(t)}finally{T.f()}return t.list()}},{key:"boundingBox",value:function(){var t,e=this.p0,n=this.p3,r=[Math.min(e[0],n[0]),Math.min(e[1],n[1])],o=[Math.max(e[0],n[0]),Math.max(e[1],n[1])],a=i(this.boundingTValues());try{for(a.s();!(t=a.n()).done;){var s=t.value,l=this.point(s);r[0]=Math.min(r[0],l[0]),r[1]=Math.min(r[1],l[1]),o[0]=Math.max(o[0],l[0]),o[1]=Math.max(o[1],l[1])}}catch(t){a.e(t)}finally{a.f()}return[r,o]}},{key:"mapXtoT",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===this.geo.snap0(this.p0[0]-t))return 0;if(0===this.geo.snap0(this.p3[0]-t))return 1;var n,r=this.p0[0]-t,o=this.p1[0]-t,a=this.p2[0]-t,s=[this.p3[0]-t-3*a+3*o-r,3*a-6*o+3*r,3*o-3*r,r],l=i(this.geo.solveCubic(s[0],s[1],s[2],s[3]));try{for(l.s();!(n=l.n()).done;){var u=n.value,c=this.geo.snap01(u);if(c>=0&&c<=1)return u}}catch(t){l.e(t)}finally{l.f()}if(e||t>=Math.min(this.p0[0],this.p3[0])&&t<=Math.max(this.p0[0],this.p3[0]))for(var h=0;h<4;h++){for(var d=-1,f=0;f<4;f++)0!==s[f]&&(d<0||Math.abs(s[f])<Math.abs(s[d]))&&(d=f);if(d<0)return 0;s[d]=0;var p,m=i(this.geo.solveCubic(s[0],s[1],s[2],s[3]));try{for(m.s();!(p=m.n()).done;){var g=p.value,y=this.geo.snap01(g);if(y>=0&&y<=1)return g}}catch(t){m.e(t)}finally{m.f()}}return!1}},{key:"mapXtoY",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.mapXtoT(t,e);return!1!==n&&this.point(n)[1]}},{key:"pointOn",value:function(t){if(this.geo.isEqualVec2(this.p0,t)||this.geo.isEqualVec2(this.p3,t))return!0;var e=this.mapXtoY(t[0]);return!1!==e&&0===this.geo.snap0(e-t[1])}},{key:"toLine",value:function(){var t=this.p0,e=this.p1,n=this.p2,i=this.p3;return 0===this.geo.snap0(t[0]-e[0])&&0===this.geo.snap0(t[0]-n[0])&&0===this.geo.snap0(t[0]-i[0])||0===this.geo.snap0(t[1]-e[1])&&0===this.geo.snap0(t[1]-n[1])&&0===this.geo.snap0(t[1]-i[1])?new A(t,i,this.geo):null}},{key:"draw",value:function(t){var e=this.p0,n=this.p1,i=this.p2,r=this.p3;return t.moveTo(e[0],e[1]),t.bezierCurveTo(n[0],n[1],i[0],i[1],r[0],r[1]),t}}])}(M);function T(t,e){var n=e.p1[0]-e.p0[0],i=e.p1[1]-e.p0[1];return((t[0]-e.p0[0])*n+(t[1]-e.p0[1])*i)/(n*n+i*i)}function S(t,e,n){var i=t.geo,r=t.p0,o=t.p1,a=e.p0,s=e.p1,l=o[0]-r[0],u=o[1]-r[1],c=s[0]-a[0],h=s[1]-a[1],d=l*h-u*c;if(0===i.snap0(d)){if(!i.isCollinear(r,o,a))return null;var f=T(e.p0,t),p=T(e.p1,t),m=i.snap01(Math.min(f,p)),g=i.snap01(Math.max(f,p));if(g<0||m>1)return null;var y=T(t.p0,e),v=T(t.p1,e),x=i.snap01(Math.min(y,v)),_=i.snap01(Math.max(y,v));return _<0||x>1?null:{kind:"tRangePairs",tStart:[Math.max(0,m),Math.max(0,x)],tEnd:[Math.min(1,g),Math.min(1,_)]}}var b=r[0]-a[0],M=r[1]-a[1];return new w(n,i).add((c*M-h*b)/d,(l*M-u*b)/d).done()}function C(t,e,n,r){var o=t.geo,a=t.p0,s=t.p1,l=s[1]-a[1],u=a[0]-s[0];if(0===o.snap0(u)){var c=e.mapXtoT(a[0],!1);if(!1===c)return null;var h=(e.point(c)[1]-a[1])/l,d=new w(n,o);return r?d.add(c,h):d.add(h,c),d.done()}var f=l*a[0]+u*a[1],p=e.getCubicCoefficients(0),m=e.getCubicCoefficients(1),g=l*p[0]+u*m[0],y=l*p[1]+u*m[1],v=l*p[2]+u*m[2],x=l*p[3]+u*m[3]-f,_=o.solveCubic(g,y,v,x),b=new w(n,o);if(0===o.snap0(l)){var M,A=i(_);try{for(A.s();!(M=A.n()).done;){var E=M.value,T=p[0]*E*E*E+p[1]*E*E+p[2]*E+p[3],S=(a[0]-T)/u;r?b.add(E,S):b.add(S,E)}}catch(t){A.e(t)}finally{A.f()}}else{var C,k=i(_);try{for(k.s();!(C=k.n()).done;){var P=C.value,O=(m[0]*P*P*P+m[1]*P*P+m[2]*P+m[3]-a[1])/l;r?b.add(P,O):b.add(O,P)}}catch(t){k.e(t)}finally{k.f()}}return b.done()}function k(t,e,n){var i=t.geo;if(i.isEqualVec2(t.p0,e.p0))return i.isEqualVec2(t.p3,e.p3)?i.isEqualVec2(t.p1,e.p1)&&i.isEqualVec2(t.p2,e.p2)?{kind:"tRangePairs",tStart:[0,0],tEnd:[1,1]}:{kind:"tValuePairs",tValuePairs:[[0,0],[1,1]]}:{kind:"tValuePairs",tValuePairs:[[0,0]]};if(i.isEqualVec2(t.p0,e.p3))return{kind:"tValuePairs",tValuePairs:[[0,1]]};if(i.isEqualVec2(t.p3,e.p0))return{kind:"tValuePairs",tValuePairs:[[1,0]]};if(i.isEqualVec2(t.p3,e.p3))return{kind:"tValuePairs",tValuePairs:[[1,1]]};var r=new w(n,i),o=function(t,e,n,a,s,l){if(v(t.boundingBox(),a.boundingBox())){var u=(e+n)/2,c=(s+l)/2;if(0!==i.snap0(n-e)||0!==i.snap0(l-s)){var h=f(t.split([.5]),2),d=h[0],p=h[1],m=f(a.split([.5]),2),g=m[0],y=m[1];o(d,e,u,g,s,c),o(p,u,n,g,s,c),o(d,e,u,y,c,l),o(p,u,n,y,c,l)}else r.add(u,c)}};return o(t,0,1,e,0,1),r.done()}function P(t,e,n){if(t instanceof A){if(e instanceof A)return S(t,e,n);if(e instanceof E)return C(t,e,n,!1)}else if(t instanceof E){if(e instanceof A)return C(e,t,n,!0);if(e instanceof E)return k(t,e,n)}throw new Error("PolyBool: Unknown segment instance in segmentsIntersect")}var O=c(function t(e){var n,i,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,t),this.otherFill=null,this.id=null!==(n=null==s?void 0:s.segmentId())&&void 0!==n?n:-1,this.data=e,this.myFill={above:null!==(i=null==o?void 0:o.above)&&void 0!==i?i:null,below:null!==(r=null==o?void 0:o.below)&&void 0!==r?r:null},this.closed=a}),L=function(t){function e(){return d(this,e),r(this,e,arguments)}return s(e,t),c(e)}(O),I=function(t){function e(){return d(this,e),r(this,e,arguments)}return s(e,t),c(e)}(O);function R(t,e){if(t instanceof L)return new L(t.data,t.myFill,t.closed,e);if(t instanceof I)return new I(t.data,t.myFill,t.closed,e);throw new Error("PolyBool: Unknown SegmentBool in copySegmentBool")}var D=c(function t(e,n,i,r){d(this,t),this.status=null,this.isStart=e,this.p=n,this.seg=i,this.primary=r}),j=function(){return c(function t(){d(this,t),this.nodes=[]},[{key:"remove",value:function(t){var e=this.nodes.indexOf(t);e>=0&&this.nodes.splice(e,1)}},{key:"getIndex",value:function(t){return this.nodes.indexOf(t)}},{key:"isEmpty",value:function(){return this.nodes.length<=0}},{key:"getHead",value:function(){return this.nodes[0]}},{key:"removeHead",value:function(){this.nodes.shift()}},{key:"insertBefore",value:function(t,e){this.findTransition(t,e).insert(t)}},{key:"findTransition",value:function(t,e){for(var n,i,r=this,o=function(t,n){return e(n)-e(t)},a=0,s=this.nodes.length;a<s;){var l=a+s>>1;o(this.nodes[l],t)>0?s=l:a=l+1}return{before:a<=0?null:null!==(n=this.nodes[a-1])&&void 0!==n?n:null,after:null!==(i=this.nodes[a])&&void 0!==i?i:null,insert:function(t){return r.nodes.splice(a,0,t),t}}}}])}(),F=function(){return c(function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,t),this.events=new j,this.status=new j,this.currentPath=[],this.selfIntersection=e,this.geo=n,this.log=i},[{key:"compareEvents",value:function(t,e,n,i,r,o,a,s){var l=this.geo.compareVec2(e,o);return 0!==l?l:i instanceof A&&s instanceof A&&this.geo.isEqualVec2(n,a)?0:t!==r?t?1:-1:this.compareSegments(s,i)}},{key:"addEvent",value:function(t){var e=this;this.events.insertBefore(t,function(n){return n===t?0:e.compareEvents(t.isStart,t.p,t.other.p,t.seg.data,n.isStart,n.p,n.other.p,n.seg.data)})}},{key:"divideEvent",value:function(t,e,n){var i,r;null===(i=this.log)||void 0===i||i.segmentDivide(t.seg,n);var o=f(t.seg.data.split([e]),2),a=o[0],s=o[1];a.setEnd(n),s.setStart(n);var l=s instanceof A?new L(s,t.seg.myFill,t.seg.closed,this.log):s instanceof E?new I(s,t.seg.myFill,t.seg.closed,this.log):null;if(!l)throw new Error("PolyBool: Unknown segment data in divideEvent");return this.events.remove(t.other),t.seg.data=a,null===(r=this.log)||void 0===r||r.segmentChop(t.seg),t.other.p=n,this.addEvent(t.other),this.addSegment(l,t.primary)}},{key:"beginPath",value:function(){this.currentPath=[]}},{key:"closePath",value:function(){var t,e=i(this.currentPath);try{for(e.s();!(t=e.n()).done;){t.value.closed=!0}}catch(t){e.e(t)}finally{e.f()}}},{key:"addSegment",value:function(t,e){var n=new D(!0,t.data.start(),t,e),i=new D(!1,t.data.end(),t,e);return n.other=i,i.other=n,this.addEvent(n),this.addEvent(i),n}},{key:"addLine",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.geo.compareVec2(t,e);if(0!==i){var r=new L(new A(i<0?t:e,i<0?e:t,this.geo),null,!1,this.log);this.currentPath.push(r),this.addSegment(r,n)}}},{key:"addCurve",value:function(t,e,n,r){var o,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=new E(t,e,n,r,this.geo),l=i(s.split(s.inflectionTValues()));try{for(l.s();!(o=l.n()).done;){var u=o.value,c=this.geo.compareVec2(u.start(),u.end());if(0!==c){var h=u.toLine();if(h)this.addLine(h.p0,h.p1,a);else{var d=new I(c<0?u:u.reverse(),null,!1,this.log);this.currentPath.push(d),this.addSegment(d,a)}}}}catch(t){l.e(t)}finally{l.f()}}},{key:"compareSegments",value:function(t,e){var n=t.start(),r=e.start2(),o=e.start();if(e.pointOn(n)){if(n=t.start2(),e.pointOn(n)){if(t instanceof A){if(e instanceof A)return 0;e instanceof E&&(n=t.point(.5))}t instanceof E&&(n=t.end())}if(e instanceof E&&0===this.geo.snap0(n[0]-o[0])&&0===this.geo.snap0(r[0]-o[0]))return Math.sign(o[1]-n[1])}else{if(e instanceof E){var a=e.mapXtoY(n[0],!0);if(!1!==a)return Math.sign(a-n[1])}if(t instanceof E){var s=P(t,e,!0);if(s&&"tValuePairs"===s.kind){var l,u=i(s.tValuePairs);try{for(u.s();!(l=u.n()).done;){var c=l.value,h=this.geo.snap01(c[0]);if(h>0&&h<1){r=t.point(h);break}}}catch(t){u.e(t)}finally{u.f()}}}}var d=f(n,2),p=d[0],m=d[1],g=f(r,2),y=g[0],v=g[1],x=f(o,2),_=x[0],b=x[1];return Math.sign((y-p)*(b-m)-(v-m)*(_-p))}},{key:"statusFindSurrounding",value:function(t){var e=this;return this.status.findTransition(t,function(n){if(t===n)return 0;var i=e.compareSegments(t.seg.data,n.seg.data);return 0===i?-1:i})}},{key:"checkIntersection",value:function(t,e){var n,i=t.seg,r=e.seg;null===(n=this.log)||void 0===n||n.checkIntersection(i,r);var o=P(i.data,r.data,!1);if(null===o)return null;if("tRangePairs"===o.kind){var a=f(o.tStart,2),s=a[0],l=a[1],u=f(o.tEnd,2),c=u[0],h=u[1];if(1===s&&1===c&&0===l&&0===h||0===s&&0===c&&1===l&&1===h)return null;if(0===s&&1===c&&0===l&&1===h)return e;var d=i.data.start(),p=i.data.end(),m=r.data.end();return 0===s&&0===l?(1===c?this.divideEvent(e,h,p):this.divideEvent(t,c,m),e):(l>0&&l<1&&(1===c&&1===h||(1===c?this.divideEvent(e,h,p):this.divideEvent(t,c,m)),this.divideEvent(e,l,d)),null)}if("tValuePairs"===o.kind){if(o.tValuePairs.length<=0)return null;for(var g=o.tValuePairs[0],y=1;y<o.tValuePairs.length&&(0===g[0]&&0===g[1]||0===g[0]&&1===g[1]||1===g[0]&&0===g[1]||1===g[0]&&1===g[1]);y++)g=o.tValuePairs[y];var v=f(g,2),x=v[0],_=v[1],b=0===_?r.data.start():1===_?r.data.end():0===x?i.data.start():1===x?i.data.end():i.data.point(x);return x>0&&x<1&&this.divideEvent(t,x,b),_>0&&_<1&&this.divideEvent(e,_,b),null}throw new Error("PolyBool: Unknown intersection type")}},{key:"calculate",value:function(){for(var t,e,n,i,r,o,a,s,l=this,u=[],c=function(){var s=l.events.getHead();if(null===(t=l.log)||void 0===t||t.vert(s.p[0]),s.isStart){null===(e=l.log)||void 0===e||e.segmentNew(s.seg,s.primary);var c=l.statusFindSurrounding(s),h=c.before,d=c.after;null===(n=l.log)||void 0===n||n.tempStatus(s.seg,!!h&&h.seg,!!d&&d.seg);var f,p=function(){if(h){var t=l.checkIntersection(s,h);if(t)return t}return d?l.checkIntersection(s,d):null}();if(p){if(l.selfIntersection)(null===s.seg.myFill.below?s.seg.closed:s.seg.myFill.above!==s.seg.myFill.below)&&(p.seg.myFill.above=!p.seg.myFill.above);else p.seg.otherFill=s.seg.myFill;null===(i=l.log)||void 0===i||i.segmentUpdate(p.seg),l.events.remove(s.other),l.events.remove(s)}if(l.events.getHead()!==s)return null===(r=l.log)||void 0===r||r.rewind(s.seg),1;if(l.selfIntersection)f=null===s.seg.myFill.below?s.seg.closed:s.seg.myFill.above!==s.seg.myFill.below,s.seg.myFill.below=!!d&&d.seg.myFill.above,s.seg.myFill.above=f?!s.seg.myFill.below:s.seg.myFill.below;else if(null===s.seg.otherFill){var m;if(d)if(s.primary===d.primary){if(null===d.seg.otherFill)throw new Error("PolyBool: Unexpected state of otherFill (null)");m=d.seg.otherFill.above}else m=d.seg.myFill.above;else m=!1;s.seg.otherFill={above:m,below:m}}null===(o=l.log)||void 0===o||o.status(s.seg,!!h&&h.seg,!!d&&d.seg),s.other.status=c.insert(s)}else{var g=s.status;if(null===g)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");var y=l.status.getIndex(g);if(y>0&&y<l.status.nodes.length-1){var v=l.status.nodes[y-1],x=l.status.nodes[y+1];l.checkIntersection(v,x)}if(null===(a=l.log)||void 0===a||a.statusRemove(g.seg),l.status.remove(g),!s.primary){if(!s.seg.otherFill)throw new Error("PolyBool: Unexpected state of otherFill (null)");var _=s.seg.myFill;s.seg.myFill=s.seg.otherFill,s.seg.otherFill=_}u.push(s.seg)}l.events.removeHead()};!this.events.isEmpty();)c();return null===(s=this.log)||void 0===s||s.done(),u}}])}();function G(t,e,n){var r,o=[],a=i(t);try{for(a.s();!(r=a.n()).done;){var s=r.value,l=e[(s.myFill.above?8:0)+(s.myFill.below?4:0)+(s.otherFill&&s.otherFill.above?2:0)+(s.otherFill&&s.otherFill.below?1:0)],u=!!(1&l),c=!!(2&l);if(!s.closed&&0!==l||s.closed&&u!==c){var h={above:u,below:c};if(s instanceof L)o.push(new L(s.data,h,s.closed,n));else{if(!(s instanceof I))throw new Error("PolyBool: Unknown SegmentBool type in SegmentSelector");o.push(new I(s.data,h,s.closed,n))}}}}catch(t){a.e(t)}finally{a.f()}return null==n||n.selected(o),o}var N=function(){return c(function t(){d(this,t)},null,[{key:"union",value:function(t,e){return G(t,[4,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],e)}},{key:"intersect",value:function(t,e){return G(t,[0,0,0,4,0,2,0,2,0,0,1,1,4,2,1,0],e)}},{key:"difference",value:function(t,e){return G(t,[4,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],e)}},{key:"differenceRev",value:function(t,e){return G(t,[4,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],e)}},{key:"xor",value:function(t,e){return G(t,[4,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],e)}}])}();function z(t,e,n){return!!n.isCollinear(t.p0,t.p1,e.p1)&&new A(t.p0,e.p1,n)}function B(t,e,n){if(n.isCollinear(t.p2,t.p3,e.p1)){var i=e.p1[0]-t.p2[0],r=e.p1[1]-t.p2[1],o=Math.abs(i)>Math.abs(r)?(t.p3[0]-t.p2[0])/i:(t.p3[1]-t.p2[1])/r,a=n.snap01(o);if(0!==a&&1!==a){var s=new E(t.p0,[t.p0[0]+(t.p1[0]-t.p0[0])/o,t.p0[1]+(t.p1[1]-t.p0[1])/o],[e.p2[0]-o*(e.p3[0]-e.p2[0])/(1-o),e.p2[1]-o*(e.p3[1]-e.p2[1])/(1-o)],e.p3,n),l=f(s.split([o]),2),u=l[0],c=l[1];if(u.isEqual(t)&&c.isEqual(e))return s}}return!1}function V(t,e,n){return t!==e&&(t instanceof A&&e instanceof A?z(t,e,n):t instanceof E&&e instanceof E&&B(t,e,n))}function q(t,e,n){var r,o=[],a=[],s=[],l=i(t);try{var u=function(){var t=r.value,l=t.data,u=t.closed,c=u?o:a,h=l.start(),d=l.end(),f=function(t){null==n||n.chainReverse(t,u);var e,r=[],o=i(c[t].segs);try{for(o.s();!(e=o.n()).done;){var a=e.value;r.unshift(a.reverse())}}catch(t){o.e(t)}finally{o.f()}return c[t]={segs:r,fill:!c[t].fill},r};if(l instanceof A&&e.isEqualVec2(h,d))return console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large"),1;null==n||n.chainStart({seg:l,fill:!!t.myFill.above},u);var p={index:0,matchesHead:!1,matchesPt1:!1},m={index:0,matchesHead:!1,matchesPt1:!1},g=p;function y(t,e,n){return g&&(g.index=t,g.matchesHead=e,g.matchesPt1=n),g===p?(g=m,!1):(g=null,!0)}for(var v=0;v<c.length;v++){var x=c[v].segs,_=x[0].start(),b=x[x.length-1].end();if(e.isEqualVec2(_,h)){if(y(v,!0,!0))break}else if(e.isEqualVec2(_,d)){if(y(v,!0,!1))break}else if(e.isEqualVec2(b,h)){if(y(v,!1,!0))break}else if(e.isEqualVec2(b,d)&&y(v,!1,!1))break}if(g===p){var w=!!t.myFill.above;c.push({segs:[l],fill:w}),null==n||n.chainNew({seg:l,fill:w},u)}else if(g===m){var M=p.index;null==n||n.chainMatch(M,u);var E=c[M],T=E.segs,S=E.fill;if(p.matchesHead?p.matchesPt1?(l=l.reverse(),null==n||n.chainAddHead(M,{seg:l,fill:S},u),T.unshift(l)):(null==n||n.chainAddHead(M,{seg:l,fill:S},u),T.unshift(l)):p.matchesPt1?(null==n||n.chainAddTail(M,{seg:l,fill:S},u),T.push(l)):(l=l.reverse(),null==n||n.chainAddTail(M,{seg:l,fill:S},u),T.push(l)),p.matchesHead){var C=T[1],k=V(l,C,e);k&&(T.shift(),T[0]=k,null==n||n.chainSimplifyHead(M,{seg:k,fill:S},u))}else{var P=V(T[T.length-2],l,e);P&&(T.pop(),T[T.length-1]=P,null==n||n.chainSimplifyTail(M,{seg:P,fill:S},u))}if(u){var O=T,L=O[0],I=O[O.length-1];if(O.length>0&&e.isEqualVec2(L.start(),I.end())){var R,D=0,j=O[0].start(),F=i(O);try{for(F.s();!(R=F.n()).done;){var G=R.value.end();D+=G[1]*j[0]-G[0]*j[1],j=G}}catch(t){F.e(t)}finally{F.f()}D<0===S&&(L=(O=f(M))[0],I=O[O.length-1]);var N=V(I,L,e);N&&(O.pop(),O[0]=N,null==n||n.chainSimplifyClose(M,{seg:N,fill:S},u)),null==n||n.chainClose(M,u),c.splice(M,1),s.push(O)}}}else{var z=function(t,i){var r=c[t],o=r.segs,a=r.fill,s=c[i].segs;null==n||n.chainAddTail(t,{seg:l,fill:a},u),o.push(l);var h=V(o[o.length-2],l,e);h&&(o.pop(),o[o.length-1]=h,null==n||n.chainSimplifyTail(t,{seg:h,fill:a},u));var d=V(o[o.length-1],s[0],e);d&&(s.shift(),o[o.length-1]=d,null==n||n.chainSimplifyJoin(t,i,{seg:d,fill:a},u)),null==n||n.chainJoin(t,i,u),c[t].segs=o.concat(s),c.splice(i,1)},B=p.index,q=m.index;null==n||n.chainConnect(B,q,u);var U=c[B].segs.length<c[q].segs.length;p.matchesHead?m.matchesHead?U?(p.matchesPt1||(l=l.reverse()),f(B),z(B,q)):(p.matchesPt1&&(l=l.reverse()),f(q),z(q,B)):(p.matchesPt1&&(l=l.reverse()),z(q,B)):m.matchesHead?(p.matchesPt1||(l=l.reverse()),z(B,q)):U?(p.matchesPt1&&(l=l.reverse()),f(B),z(q,B)):(p.matchesPt1||(l=l.reverse()),f(q),z(B,q))}};for(l.s();!(r=l.n()).done;)u()}catch(t){l.e(t)}finally{l.f()}for(var c=0,h=a;c<h.length;c++){var d=h[c].segs;s.push(d)}return s}function U(t,e,n,r){var o=f(r,6),a=o[0],s=o[1],l=o[2],u=o[3],c=o[4],h=o[5];n.beginPath();var d,p=i(t);try{for(p.s();!(d=p.n()).done;){var m=d.value;if(!(m.length<=0)){for(var g=0;g<m.length;g++){var y=m[g];if(0===g){var v=f(y.start(),2),x=v[0],_=v[1];n.moveTo(a*x+l*_+c,s*x+u*_+h)}if(y instanceof A){var b=f(y.p1,2),w=b[0],M=b[1];n.lineTo(a*w+l*M+c,s*w+u*M+h)}else{if(!(y instanceof E))throw new Error("PolyBool: Unknown segment instance");var T=f(y.p1,2),S=T[0],C=T[1],k=f(y.p2,2),P=k[0],O=k[1],L=f(y.p3,2),I=L[0],R=L[1];n.bezierCurveTo(a*S+l*C+c,s*S+u*C+h,a*P+l*O+c,s*P+u*O+h,a*I+l*R+c,s*I+u*R+h)}}var D=m[0],j=m[m.length-1];e.isEqualVec2(D.start(),j.end())&&n.closePath()}}}catch(t){p.e(t)}finally{p.f()}return n}var H=function(){return c(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,t),this.pathState={kind:"beginPath"},this.saveStack=[],this.matrix=[1,0,0,1,0,0],this.geo=e,this.log=i,this.resultState=n?{state:"seg",segments:n}:{state:"new",selfIntersect:new F(!0,this.geo,this.log)}},[{key:"setTransform",value:function(t,e,n,i,r,o){if("new"!==this.resultState.state)throw new Error("PolyBool: Cannot change shape after using it in an operation");return this.matrix=[t,e,n,i,r,o],this}},{key:"resetTransform",value:function(){return this.matrix=[1,0,0,1,0,0],this}},{key:"getTransform",value:function(){if("new"!==this.resultState.state)throw new Error("PolyBool: Cannot change shape after using it in an operation");var t=f(this.matrix,6);return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}},{key:"transform",value:function(t,e,n,i,r,o){var a=f(this.matrix,6),s=a[0],l=a[1],u=a[2],c=a[3],h=a[4],d=a[5];return this.matrix=[s*t+u*e,l*t+c*e,s*n+u*i,l*n+c*i,s*r+u*o+h,l*r+c*o+d],this}},{key:"rotate",value:function(t){var e=Math.cos(t),n=Math.sin(t),i=f(this.matrix,6),r=i[0],o=i[1],a=i[2],s=i[3],l=i[4],u=i[5];return this.matrix=[r*e+a*n,o*e+s*n,a*e-r*n,s*e-o*n,l,u],this}},{key:"rotateDeg",value:function(t){var e=(t%360+360)%360;if(0===e)return this;var n=0,i=0;if(90===e)i=1;else if(180===e)n=-1;else if(270===e)i=-1;else if(45===e)n=i=Math.SQRT1_2;else if(135===e)i=Math.SQRT1_2,n=-Math.SQRT1_2;else if(225===e)n=i=-Math.SQRT1_2;else if(315===e)n=Math.SQRT1_2,i=-Math.SQRT1_2;else if(30===e)n=Math.sqrt(3)/2,i=.5;else if(60===e)n=.5,i=Math.sqrt(3)/2;else if(120===e)n=-.5,i=Math.sqrt(3)/2;else if(150===e)n=-Math.sqrt(3)/2,i=.5;else if(210===e)n=-Math.sqrt(3)/2,i=-.5;else if(240===e)n=-.5,i=-Math.sqrt(3)/2;else if(300===e)n=.5,i=-Math.sqrt(3)/2;else if(330===e)n=Math.sqrt(3)/2,i=-.5;else{var r=Math.PI*e/180;n=Math.cos(r),i=Math.sin(r)}var o=f(this.matrix,6),a=o[0],s=o[1],l=o[2],u=o[3],c=o[4],h=o[5];return this.matrix=[a*n+l*i,s*n+u*i,l*n-a*i,u*n-s*i,c,h],this}},{key:"scale",value:function(t,e){var n=f(this.matrix,6),i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5];return this.matrix=[i*t,r*t,o*e,a*e,s,l],this}},{key:"translate",value:function(t,e){var n=f(this.matrix,6),i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5];return this.matrix=[i,r,o,a,i*t+o*e+s,r*t+a*e+l],this}},{key:"save",value:function(){if("new"!==this.resultState.state)throw new Error("PolyBool: Cannot change shape after using it in an operation");return this.saveStack.push({matrix:this.matrix}),this}},{key:"restore",value:function(){if("new"!==this.resultState.state)throw new Error("PolyBool: Cannot change shape after using it in an operation");var t=this.saveStack.pop();return t&&(this.matrix=t.matrix),this}},{key:"transformPoint",value:function(t,e){var n=f(this.matrix,6),i=n[0],r=n[1],o=n[2],a=n[3];return[i*t+o*e+n[4],r*t+a*e+n[5]]}},{key:"beginPath",value:function(){if("new"!==this.resultState.state)throw new Error("PolyBool: Cannot change shape after using it in an operation");return this.resultState.selfIntersect.beginPath(),this.endPath()}},{key:"moveTo",value:function(t,e){if("new"!==this.resultState.state)throw new Error("PolyBool: Cannot change shape after using it in an operation");"beginPath"!==this.pathState.kind&&this.beginPath();var n=this.transformPoint(t,e);return this.pathState={kind:"moveTo",start:n,current:n},this}},{key:"lineTo",value:function(t,e){if("new"!==this.resultState.state)throw new Error("PolyBool: Cannot change shape after using it in an operation");if("moveTo"!==this.pathState.kind)throw new Error("PolyBool: Must call moveTo prior to calling lineTo");var n=this.transformPoint(t,e);return this.resultState.selfIntersect.addLine(this.pathState.current,n),this.pathState.current=n,this}},{key:"rect",value:function(t,e,n,i){return this.moveTo(t,e).lineTo(t+n,e).lineTo(t+n,e+i).lineTo(t,e+i).closePath().moveTo(t,e)}},{key:"bezierCurveTo",value:function(t,e,n,i,r,o){if("new"!==this.resultState.state)throw new Error("PolyBool: Cannot change shape after using it in an operation");if("moveTo"!==this.pathState.kind)throw new Error("PolyBool: Must call moveTo prior to calling bezierCurveTo");var a=this.transformPoint(r,o);return this.resultState.selfIntersect.addCurve(this.pathState.current,this.transformPoint(t,e),this.transformPoint(n,i),a),this.pathState.current=a,this}},{key:"closePath",value:function(){if("new"!==this.resultState.state)throw new Error("PolyBool: Cannot change shape after using it in an operation");return"moveTo"!==this.pathState.kind||this.geo.isEqualVec2(this.pathState.start,this.pathState.current)||(this.resultState.selfIntersect.addLine(this.pathState.current,this.pathState.start),this.pathState.current=this.pathState.start),this.resultState.selfIntersect.closePath(),this.endPath()}},{key:"endPath",value:function(){if("new"!==this.resultState.state)throw new Error("PolyBool: Cannot change shape after using it in an operation");return this.pathState={kind:"beginPath"},this}},{key:"selfIntersect",value:function(){return"new"===this.resultState.state&&(this.resultState={state:"seg",segments:this.resultState.selfIntersect.calculate()}),this.resultState.segments}},{key:"segments",value:function(){if("reg"!==this.resultState.state){var t=this.selfIntersect();this.resultState={state:"reg",segments:t,regions:q(t,this.geo,this.log)}}return this.resultState.regions}},{key:"output",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,0,0,1,0,0];return U(this.segments(),this.geo,t,e)}},{key:"combine",value:function(t){var e,n=new F(!1,this.geo,this.log),r=i(this.selfIntersect());try{for(r.s();!(e=r.n()).done;){var o=e.value;n.addSegment(R(o,this.log),!0)}}catch(t){r.e(t)}finally{r.f()}var a,s=i(t.selfIntersect());try{for(s.s();!(a=s.n()).done;){var l=a.value;n.addSegment(R(l,this.log),!1)}}catch(t){s.e(t)}finally{s.f()}return new W(n.calculate(),this.geo,this.log)}}])}(),W=function(){return c(function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,t),this.geo=n,this.segments=e,this.log=i},[{key:"union",value:function(){return new H(this.geo,N.union(this.segments,this.log),this.log)}},{key:"intersect",value:function(){return new H(this.geo,N.intersect(this.segments,this.log),this.log)}},{key:"difference",value:function(){return new H(this.geo,N.difference(this.segments,this.log),this.log)}},{key:"differenceRev",value:function(){return new H(this.geo,N.differenceRev(this.segments,this.log),this.log)}},{key:"xor",value:function(){return new H(this.geo,N.xor(this.segments,this.log),this.log)}}])}(),X=function(){return c(function t(){d(this,t),this.list=[],this.nextSegmentId=0,this.curVert=NaN},[{key:"push",value:function(t,e){this.list.push({type:t,data:JSON.parse(JSON.stringify(e))})}},{key:"info",value:function(t,e){this.push("info",{msg:t,data:e})}},{key:"segmentId",value:function(){return this.nextSegmentId++}},{key:"checkIntersection",value:function(t,e){this.push("check",{seg1:t,seg2:e})}},{key:"segmentDivide",value:function(t,e){this.push("div_seg",{seg:t,p:e})}},{key:"segmentChop",value:function(t){this.push("chop",{seg:t})}},{key:"statusRemove",value:function(t){this.push("pop_seg",{seg:t})}},{key:"segmentUpdate",value:function(t){this.push("seg_update",{seg:t})}},{key:"segmentNew",value:function(t,e){this.push("new_seg",{seg:t,primary:e})}},{key:"tempStatus",value:function(t,e,n){this.push("temp_status",{seg:t,above:e,below:n})}},{key:"rewind",value:function(t){this.push("rewind",{seg:t})}},{key:"status",value:function(t,e,n){this.push("status",{seg:t,above:e,below:n})}},{key:"vert",value:function(t){t!==this.curVert&&(this.push("vert",{x:t}),this.curVert=t)}},{key:"selected",value:function(t){this.push("selected",{segs:t})}},{key:"chainStart",value:function(t,e){this.push("chain_start",{sf:t,closed:e})}},{key:"chainNew",value:function(t,e){this.push("chain_new",{sf:t,closed:e})}},{key:"chainMatch",value:function(t,e){this.push("chain_match",{index:t,closed:e})}},{key:"chainClose",value:function(t,e){this.push("chain_close",{index:t,closed:e})}},{key:"chainAddHead",value:function(t,e,n){this.push("chain_add_head",{index:t,sf:e,closed:n})}},{key:"chainAddTail",value:function(t,e,n){this.push("chain_add_tail",{index:t,sf:e,closed:n})}},{key:"chainSimplifyHead",value:function(t,e,n){this.push("chain_simp_head",{index:t,sf:e,closed:n})}},{key:"chainSimplifyTail",value:function(t,e,n){this.push("chain_simp_tail",{index:t,sf:e,closed:n})}},{key:"chainSimplifyClose",value:function(t,e,n){this.push("chain_simp_close",{index:t,sf:e,closed:n})}},{key:"chainSimplifyJoin",value:function(t,e,n,i){this.push("chain_simp_join",{index1:t,index2:e,sf:n,closed:i})}},{key:"chainConnect",value:function(t,e,n){this.push("chain_con",{index1:t,index2:e,closed:n})}},{key:"chainReverse",value:function(t,e){this.push("chain_rev",{index:t,closed:e})}},{key:"chainJoin",value:function(t,e,n){this.push("chain_join",{index1:t,index2:e,closed:n})}},{key:"done",value:function(){this.push("done",null)}}])}(),K=function(){return c(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;d(this,t),this.geo=e,this.log=n},[{key:"shape",value:function(){return new H(this.geo,null,this.log)}},{key:"buildLog",value:function(t){var e;return this.log=t?new X:null,null===(e=this.log)||void 0===e?void 0:e.list}},{key:"segments",value:function(t){var e=this.shape();e.beginPath();var n,r=i(t.regions);try{for(r.s();!(n=r.n()).done;){var o=n.value,a=o[o.length-1];e.moveTo(a[a.length-2],a[a.length-1]);var s,l=i(o);try{for(l.s();!(s=l.n()).done;){var u=s.value;if(2===u.length)e.lineTo(u[0],u[1]);else{if(6!==u.length)throw new Error("PolyBool: Invalid point in region");e.bezierCurveTo(u[0],u[1],u[2],u[3],u[4],u[5])}}}catch(t){l.e(t)}finally{l.f()}e.closePath()}}catch(t){r.e(t)}finally{r.f()}return{shape:e,inverted:t.inverted}}},{key:"combine",value:function(t,e){return{shape:t.shape.combine(e.shape),inverted1:t.inverted,inverted2:e.inverted}}},{key:"selectUnion",value:function(t){return{shape:t.inverted1?t.inverted2?t.shape.intersect():t.shape.difference():t.inverted2?t.shape.differenceRev():t.shape.union(),inverted:t.inverted1||t.inverted2}}},{key:"selectIntersect",value:function(t){return{shape:t.inverted1?t.inverted2?t.shape.union():t.shape.differenceRev():t.inverted2?t.shape.difference():t.shape.intersect(),inverted:t.inverted1&&t.inverted2}}},{key:"selectDifference",value:function(t){return{shape:t.inverted1?t.inverted2?t.shape.differenceRev():t.shape.union():t.inverted2?t.shape.intersect():t.shape.difference(),inverted:t.inverted1&&!t.inverted2}}},{key:"selectDifferenceRev",value:function(t){return{shape:t.inverted1?t.inverted2?t.shape.difference():t.shape.intersect():t.inverted2?t.shape.union():t.shape.differenceRev(),inverted:!t.inverted1&&t.inverted2}}},{key:"selectXor",value:function(t){return{shape:t.shape.xor(),inverted:t.inverted1!==t.inverted2}}},{key:"polygon",value:function(t){var e=[],n={beginPath:function(){},moveTo:function(){e.push([])},lineTo:function(t,n){e[e.length-1].push([t,n])},bezierCurveTo:function(t,n,i,r,o,a){e[e.length-1].push([t,n,i,r,o,a])},closePath:function(){}};return t.shape.output(n),{regions:e,inverted:t.inverted}}},{key:"union",value:function(t,e){var n=this.segments(t),i=this.segments(e),r=this.combine(n,i),o=this.selectUnion(r);return this.polygon(o)}},{key:"intersect",value:function(t,e){var n=this.segments(t),i=this.segments(e),r=this.combine(n,i),o=this.selectIntersect(r);return this.polygon(o)}},{key:"difference",value:function(t,e){var n=this.segments(t),i=this.segments(e),r=this.combine(n,i),o=this.selectDifference(r);return this.polygon(o)}},{key:"differenceRev",value:function(t,e){var n=this.segments(t),i=this.segments(e),r=this.combine(n,i),o=this.selectDifferenceRev(r);return this.polygon(o)}},{key:"xor",value:function(t,e){var n=this.segments(t),i=this.segments(e),r=this.combine(n,i),o=this.selectXor(r);return this.polygon(o)}}])}(),Q=new K;e.EventBool=D,e.Geometry=x,e.GeometryEpsilon=_,e.Intersecter=F,e.ListBool=j,e.PolyBool=K,e.SegmentBase=M,e.SegmentBoolBase=O,e.SegmentBoolCurve=I,e.SegmentBoolLine=L,e.SegmentChainer=q,e.SegmentCurve=E,e.SegmentLine=A,e.SegmentSelector=N,e.SegmentTValuePairsBuilder=w,e.SegmentTValuesBuilder=b,e.Shape=H,e.ShapeCombined=W,e.boundingBoxesIntersect=v,e.copySegmentBool=R,e.default=Q,e.joinCurves=B,e.joinLines=z,e.joinSegments=V,e.lerp=g,e.lerpVec2=y,e.projectPointOntoSegmentLine=T,e.segmentCurveIntersectSegmentCurve=k,e.segmentLineIntersectSegmentCurve=C,e.segmentLineIntersectSegmentLine=S,e.segmentsIntersect=P,e.segmentsToReceiver=U},3087:function(t,e,n){"use strict";n.r(e);var i={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};for(var r in i)Object.freeze(i[r]);e.default=Object.freeze(i)},9747:function(t,e,n){"use strict";function i(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function o(t,e){var n,i,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,s=e&&e.length,u=s?e[0]*o:t.length,c=a(t,0,u,o,!0),h=[];if(!c||c.next===c.prev)return h;if(s&&(c=function(t,e,n,i){for(var r=[],o=0,s=e.length;o<s;o++){var l=a(t,e[o]*i,o<s-1?e[o+1]*i:t.length,i,!1);l===l.next&&(l.steiner=!0),r.push(y(l))}r.sort(f);for(var u=0;u<r.length;u++)n=p(r[u],n);return n}(t,e,c,o)),t.length>80*o){for(var d=n=t[0],m=i=t[1],g=o;g<u;g+=o){var v=t[g],x=t[g+1];v<n&&(n=v),x<i&&(i=x),v>d&&(d=v),x>m&&(m=x)}r=0!==(r=Math.max(d-n,m-i))?32767/r:0}return l(c,h,o,n,i,r,0),h}function a(t,e,n,i,r){var o;if(r===L(t,e,n,i)>0)for(var a=e;a<n;a+=i)o=C(a/i|0,t[a],t[a+1],o);else for(var s=n-i;s>=e;s-=i)o=C(s/i|0,t[s],t[s+1],o);return o&&w(o,o.next)&&(k(o),o=o.next),o}function s(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!w(i,i.next)&&0!==b(i.prev,i,i.next))i=i.next;else{if(k(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function l(t,e,n,i,r,o,a){if(t){!a&&o&&function(t,e,n,i){var r=t;do{0===r.z&&(r.z=g(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n=1;do{var i=t,r=void 0;t=null;var o=null;for(e=0;i;){e++;for(var a=i,s=0,l=0;l<n&&(s++,a=a.nextZ);l++);for(var u=n;s>0||u>0&&a;)0!==s&&(0===u||!a||i.z<=a.z)?(r=i,i=i.nextZ,s--):(r=a,a=a.nextZ,u--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;i=a}o.nextZ=null,n*=2}while(e>1)}(r)}(t,i,r,o);for(var f=t;t.prev!==t.next;){var p=t.prev,m=t.next;if(o?c(t,i,r,o):u(t))e.push(p.i,t.i,m.i),k(t),t=m.next,f=m.next;else if((t=m)===f){a?1===a?l(t=h(s(t),e),e,n,i,r,o,2):2===a&&d(t,e,n,i,r,o):l(s(t),e,n,i,r,o,1);break}}}}function u(t){var e=t.prev,n=t,i=t.next;if(b(e,n,i)>=0)return!1;for(var r=e.x,o=n.x,a=i.x,s=e.y,l=n.y,u=i.y,c=Math.min(r,o,a),h=Math.min(s,l,u),d=Math.max(r,o,a),f=Math.max(s,l,u),p=i.next;p!==e;){if(p.x>=c&&p.x<=d&&p.y>=h&&p.y<=f&&x(r,s,o,l,a,u,p.x,p.y)&&b(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function c(t,e,n,i){var r=t.prev,o=t,a=t.next;if(b(r,o,a)>=0)return!1;for(var s=r.x,l=o.x,u=a.x,c=r.y,h=o.y,d=a.y,f=Math.min(s,l,u),p=Math.min(c,h,d),m=Math.max(s,l,u),y=Math.max(c,h,d),v=g(f,p,e,n,i),_=g(m,y,e,n,i),w=t.prevZ,M=t.nextZ;w&&w.z>=v&&M&&M.z<=_;){if(w.x>=f&&w.x<=m&&w.y>=p&&w.y<=y&&w!==r&&w!==a&&x(s,c,l,h,u,d,w.x,w.y)&&b(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,M.x>=f&&M.x<=m&&M.y>=p&&M.y<=y&&M!==r&&M!==a&&x(s,c,l,h,u,d,M.x,M.y)&&b(M.prev,M,M.next)>=0)return!1;M=M.nextZ}for(;w&&w.z>=v;){if(w.x>=f&&w.x<=m&&w.y>=p&&w.y<=y&&w!==r&&w!==a&&x(s,c,l,h,u,d,w.x,w.y)&&b(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;M&&M.z<=_;){if(M.x>=f&&M.x<=m&&M.y>=p&&M.y<=y&&M!==r&&M!==a&&x(s,c,l,h,u,d,M.x,M.y)&&b(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function h(t,e){var n=t;do{var i=n.prev,r=n.next.next;!w(i,r)&&M(i,n,n.next,r)&&T(i,r)&&T(r,i)&&(e.push(i.i,n.i,r.i),k(n),k(n.next),n=t=r),n=n.next}while(n!==t);return s(n)}function d(t,e,n,i,r,o){var a=t;do{for(var u=a.next.next;u!==a.prev;){if(a.i!==u.i&&_(a,u)){var c=S(a,u);return a=s(a,a.next),c=s(c,c.next),l(a,e,n,i,r,o,0),void l(c,e,n,i,r,o,0)}u=u.next}a=a.next}while(a!==t)}function f(t,e){var n=t.x-e.x;0===n&&(0===(n=t.y-e.y)&&(n=(t.next.y-t.y)/(t.next.x-t.x)-(e.next.y-e.y)/(e.next.x-e.x)));return n}function p(t,e){var n=function(t,e){var n,i=e,r=t.x,o=t.y,a=-1/0;if(w(t,i))return i;do{if(w(t,i.next))return i.next;if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a&&(a=s,n=i.x<i.next.x?i:i.next,s===r))return n}i=i.next}while(i!==e);if(!n)return null;var l=n,u=n.x,c=n.y,h=1/0;i=n;do{if(r>=i.x&&i.x>=u&&r!==i.x&&v(o<c?r:a,o,u,c,o<c?a:r,o,i.x,i.y)){var d=Math.abs(o-i.y)/(r-i.x);T(i,t)&&(d<h||d===h&&(i.x>n.x||i.x===n.x&&m(n,i)))&&(n=i,h=d)}i=i.next}while(i!==l);return n}(t,e);if(!n)return e;var i=S(n,t);return s(i,i.next),s(n,n.next)}function m(t,e){return b(t.prev,t,e.prev)<0&&b(e.next,t,t.next)<0}function g(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function y(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function v(t,e,n,i,r,o,a,s){return(r-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(i-s)>=(n-a)*(e-s)&&(n-a)*(o-s)>=(r-a)*(i-s)}function x(t,e,n,i,r,o,a,s){return!(t===a&&e===s)&&v(t,e,n,i,r,o,a,s)}function _(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&M(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(b(t.prev,t,e.prev)||b(t,e.prev,e))||w(t,e)&&b(t.prev,t,t.next)>0&&b(e.prev,e,e.next)>0)}function b(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function w(t,e){return t.x===e.x&&t.y===e.y}function M(t,e,n,i){var r=E(b(t,e,n)),o=E(b(t,e,i)),a=E(b(n,i,t)),s=E(b(n,i,e));return r!==o&&a!==s||(!(0!==r||!A(t,n,e))||(!(0!==o||!A(t,i,e))||(!(0!==a||!A(n,t,i))||!(0!==s||!A(n,e,i)))))}function A(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function E(t){return t>0?1:t<0?-1:0}function T(t,e){return b(t.prev,t,t.next)<0?b(t,e,t.next)>=0&&b(t,t.prev,e)>=0:b(t,e,t.prev)<0||b(t,t.next,e)<0}function S(t,e){var n=P(t.i,t.x,t.y),i=P(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function C(t,e,n,i){var r=P(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function k(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function O(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,a=Math.abs(L(t,0,o,n));if(r)for(var s=0,l=e.length;s<l;s++){var u=e[s]*n,c=s<l-1?e[s+1]*n:t.length;a-=Math.abs(L(t,u,c,n))}for(var h=0,d=0;d<i.length;d+=3){var f=i[d]*n,p=i[d+1]*n,m=i[d+2]*n;h+=Math.abs((t[f]-t[m])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[m+1]-t[f+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)}function L(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}function I(t){var e,n=[],r=[],o=t[0][0].length,a=0,s=0,l=i(t);try{for(l.s();!(e=l.n()).done;){var u,c=e.value,h=i(c);try{for(h.s();!(u=h.n()).done;)for(var d=u.value,f=0;f<o;f++)n.push(d[f])}catch(t){h.e(t)}finally{h.f()}s&&(a+=s,r.push(a)),s=c.length}}catch(t){l.e(t)}finally{l.f()}return{vertices:n,holes:r,dimensions:o}}n.r(e),n.d(e,{default:function(){return o},deviation:function(){return O},flatten:function(){return I}})},4279:function(t,e,n){"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(s.push(i.value),s.length!==e);l=!0);}catch(t){u=!0,r=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw r}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,s(i.key),i)}}function s(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}n.r(e),n.d(e,{default:function(){return u}});var l=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],u=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,r=arguments.length>3?arguments[3]:void 0;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=i,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var o=l.indexOf(this.ArrayType),a=2*e*this.ArrayType.BYTES_PER_ELEMENT,s=e*this.IndexArrayType.BYTES_PER_ELEMENT,u=(8-s%8)%8;if(o<0)throw new Error("Unexpected typed array class: ".concat(i,"."));r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+u,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+a+s+u),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+u,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+o]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=e)}return e=t,i=[{key:"from",value:function(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var n=r(new Uint8Array(e,0,2),2),i=n[0],o=n[1];if(219!==i)throw new Error("Data does not appear to be in a KDBush format.");var a=o>>4;if(1!==a)throw new Error("Got v".concat(a," data when expected v").concat(1,"."));var s=l[15&o];if(!s)throw new Error("Unrecognized array type.");var u=r(new Uint16Array(e,2,1),1)[0];return new t(r(new Uint32Array(e,4,1),1)[0],u,s,e)}}],(n=[{key:"add",value:function(t,e){var n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=t,this.coords[this._pos++]=e,n}},{key:"finish",value:function(){var t=this._pos>>1;if(t!==this.numItems)throw new Error("Added ".concat(t," items when expected ").concat(this.numItems,"."));return c(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}},{key:"range",value:function(t,e,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var r=this.ids,o=this.coords,a=this.nodeSize,s=[0,r.length-1,0],l=[];s.length;){var u=s.pop()||0,c=s.pop()||0,h=s.pop()||0;if(c-h<=a)for(var d=h;d<=c;d++){var f=o[2*d],p=o[2*d+1];f>=t&&f<=n&&p>=e&&p<=i&&l.push(r[d])}else{var m=h+c>>1,g=o[2*m],y=o[2*m+1];g>=t&&g<=n&&y>=e&&y<=i&&l.push(r[m]),(0===u?t<=g:e<=y)&&(s.push(h),s.push(m-1),s.push(1-u)),(0===u?n>=g:i>=y)&&(s.push(m+1),s.push(c),s.push(1-u))}}return l}},{key:"within",value:function(t,e,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var i=this.ids,r=this.coords,o=this.nodeSize,a=[0,i.length-1,0],s=[],l=n*n;a.length;){var u=a.pop()||0,c=a.pop()||0,h=a.pop()||0;if(c-h<=o)for(var d=h;d<=c;d++)p(r[2*d],r[2*d+1],t,e)<=l&&s.push(i[d]);else{var f=h+c>>1,m=r[2*f],g=r[2*f+1];p(m,g,t,e)<=l&&s.push(i[f]),(0===u?t-n<=m:e-n<=g)&&(a.push(h),a.push(f-1),a.push(1-u)),(0===u?t+n>=m:e+n>=g)&&(a.push(f+1),a.push(c),a.push(1-u))}}return s}}])&&a(e.prototype,n),i&&a(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,i}();function c(t,e,n,i,r,o){if(!(r-i<=n)){var a=i+r>>1;h(t,e,a,i,r,o),c(t,e,n,i,a-1,1-o),c(t,e,n,a+1,r,1-o)}}function h(t,e,n,i,r,o){for(;r>i;){if(r-i>600){var a=r-i+1,s=n-i+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);h(t,e,n,Math.max(i,Math.floor(n-s*u/a+c)),Math.min(r,Math.floor(n+(a-s)*u/a+c)),o)}var f=e[2*n+o],p=i,m=r;for(d(t,e,i,n),e[2*r+o]>f&&d(t,e,i,r);p<m;){for(d(t,e,p,m),p++,m--;e[2*p+o]<f;)p++;for(;e[2*m+o]>f;)m--}e[2*i+o]===f?d(t,e,i,m):d(t,e,++m,r),m<=n&&(i=m+1),n<=m&&(r=m-1)}}function d(t,e,n,i){f(t,n,i),f(e,2*n,2*i),f(e,2*n+1,2*i+1)}function f(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function p(t,e,n,i){var r=t-n,o=e-i;return r*r+o*o}},6082:function(t,e,n){"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,o(i.key),i)}}function o(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}n.d(e,{A:function(){return Y}});var a=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"getId",value:function(t){var e=t.find(function(t){return Array.isArray(t)&&"ID"===t[0]});return e&&e.length>=3?{authority:e[1],code:parseInt(e[2],10)}:null}},{key:"convertUnit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unit";if(!t||t.length<3)return{type:e,name:"unknown",conversion_factor:null};var n=t[1],i=parseFloat(t[2])||null,r=t.find(function(t){return Array.isArray(t)&&"ID"===t[0]});return{type:e,name:n,conversion_factor:i,id:r?{authority:r[1],code:parseInt(r[2],10)}:null}}},{key:"convertAxis",value:function(t){var e,n=t[1]||"Unknown",i=n.match(/^\((.)\)$/);if(i){var r=i[1].toUpperCase();if("E"===r)e="east";else if("N"===r)e="north";else{if("U"!==r)throw new Error("Unknown axis abbreviation: ".concat(r));e="up"}}else e=t[2]?t[2].toLowerCase():"unknown";var o=t.find(function(t){return Array.isArray(t)&&"ORDER"===t[0]}),a=o?parseInt(o[1],10):null,s=t.find(function(t){return Array.isArray(t)&&("LENGTHUNIT"===t[0]||"ANGLEUNIT"===t[0]||"SCALEUNIT"===t[0])});return{name:n,direction:e,unit:this.convertUnit(s),order:a}}},{key:"extractAxes",value:function(t){var e=this;return t.filter(function(t){return Array.isArray(t)&&"AXIS"===t[0]}).map(function(t){return e.convertAxis(t)}).sort(function(t,e){return(t.order||0)-(e.order||0)})}},{key:"convert",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t[0]){case"PROJCRS":n.type="ProjectedCRS",n.name=t[1],n.base_crs=t.find(function(t){return Array.isArray(t)&&"BASEGEOGCRS"===t[0]})?this.convert(t.find(function(t){return Array.isArray(t)&&"BASEGEOGCRS"===t[0]})):null,n.conversion=t.find(function(t){return Array.isArray(t)&&"CONVERSION"===t[0]})?this.convert(t.find(function(t){return Array.isArray(t)&&"CONVERSION"===t[0]})):null;var i=t.find(function(t){return Array.isArray(t)&&"CS"===t[0]});i&&(n.coordinate_system={type:i[1],axis:this.extractAxes(t)});var r=t.find(function(t){return Array.isArray(t)&&"LENGTHUNIT"===t[0]});if(r){var o=this.convertUnit(r);n.coordinate_system.unit=o}n.id=this.getId(t);break;case"BASEGEOGCRS":case"GEOGCRS":n.type="GeographicCRS",n.name=t[1];var a=t.find(function(t){return Array.isArray(t)&&("DATUM"===t[0]||"ENSEMBLE"===t[0])});if(a){var s=this.convert(a);"ENSEMBLE"===a[0]?n.datum_ensemble=s:n.datum=s;var l=t.find(function(t){return Array.isArray(t)&&"PRIMEM"===t[0]});l&&"Greenwich"!==l[1]&&(s.prime_meridian={name:l[1],longitude:parseFloat(l[2])})}n.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(t)},n.id=this.getId(t);break;case"DATUM":n.type="GeodeticReferenceFrame",n.name=t[1],n.ellipsoid=t.find(function(t){return Array.isArray(t)&&"ELLIPSOID"===t[0]})?this.convert(t.find(function(t){return Array.isArray(t)&&"ELLIPSOID"===t[0]})):null;break;case"ENSEMBLE":n.type="DatumEnsemble",n.name=t[1],n.members=t.filter(function(t){return Array.isArray(t)&&"MEMBER"===t[0]}).map(function(t){return{type:"DatumEnsembleMember",name:t[1],id:e.getId(t)}});var u=t.find(function(t){return Array.isArray(t)&&"ENSEMBLEACCURACY"===t[0]});u&&(n.accuracy=parseFloat(u[1]));var c=t.find(function(t){return Array.isArray(t)&&"ELLIPSOID"===t[0]});c&&(n.ellipsoid=this.convert(c)),n.id=this.getId(t);break;case"ELLIPSOID":n.type="Ellipsoid",n.name=t[1],n.semi_major_axis=parseFloat(t[2]),n.inverse_flattening=parseFloat(t[3]),t.find(function(t){return Array.isArray(t)&&"LENGTHUNIT"===t[0]})&&this.convert(t.find(function(t){return Array.isArray(t)&&"LENGTHUNIT"===t[0]}),n);break;case"CONVERSION":n.type="Conversion",n.name=t[1],n.method=t.find(function(t){return Array.isArray(t)&&"METHOD"===t[0]})?this.convert(t.find(function(t){return Array.isArray(t)&&"METHOD"===t[0]})):null,n.parameters=t.filter(function(t){return Array.isArray(t)&&"PARAMETER"===t[0]}).map(function(t){return e.convert(t)});break;case"METHOD":n.type="Method",n.name=t[1],n.id=this.getId(t);break;case"PARAMETER":n.type="Parameter",n.name=t[1],n.value=parseFloat(t[2]),n.unit=this.convertUnit(t.find(function(t){return Array.isArray(t)&&("LENGTHUNIT"===t[0]||"ANGLEUNIT"===t[0]||"SCALEUNIT"===t[0])})),n.id=this.getId(t);break;case"BOUNDCRS":n.type="BoundCRS";var h=t.find(function(t){return Array.isArray(t)&&"SOURCECRS"===t[0]});if(h){var d=h.find(function(t){return Array.isArray(t)});n.source_crs=d?this.convert(d):null}var f=t.find(function(t){return Array.isArray(t)&&"TARGETCRS"===t[0]});if(f){var p=f.find(function(t){return Array.isArray(t)});n.target_crs=p?this.convert(p):null}var m=t.find(function(t){return Array.isArray(t)&&"ABRIDGEDTRANSFORMATION"===t[0]});n.transformation=m?this.convert(m):null;break;case"ABRIDGEDTRANSFORMATION":if(n.type="Transformation",n.name=t[1],n.method=t.find(function(t){return Array.isArray(t)&&"METHOD"===t[0]})?this.convert(t.find(function(t){return Array.isArray(t)&&"METHOD"===t[0]})):null,n.parameters=t.filter(function(t){return Array.isArray(t)&&("PARAMETER"===t[0]||"PARAMETERFILE"===t[0])}).map(function(t){return"PARAMETER"===t[0]?e.convert(t):"PARAMETERFILE"===t[0]?{name:t[1],value:t[2],id:{authority:"EPSG",code:8656}}:void 0}),7===n.parameters.length){var g=n.parameters[6];"Scale difference"===g.name&&(g.value=Math.round(1e12*(g.value-1))/1e6)}n.id=this.getId(t);break;case"AXIS":n.coordinate_system||(n.coordinate_system={type:"unspecified",axis:[]}),n.coordinate_system.axis.push(this.convertAxis(t));break;case"LENGTHUNIT":var y=this.convertUnit(t,"LinearUnit");n.coordinate_system&&n.coordinate_system.axis&&n.coordinate_system.axis.forEach(function(t){t.unit||(t.unit=y)}),y.conversion_factor&&1!==y.conversion_factor&&n.semi_major_axis&&(n.semi_major_axis={value:n.semi_major_axis,unit:y});break;default:n.keyword=t[0]}return n}}],(e=null)&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),s=a;function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,c(i.key),i)}}function c(t){var e=function(t,e){if("object"!=l(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=l(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==l(e)?e:e+""}function h(t,e,n){return e=p(e),function(t,e){if(e&&("object"==l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,d()?Reflect.construct(e,n||[],p(t).constructor):e.apply(t,n))}function d(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(d=function(){return!!t})()}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},f.apply(null,arguments)}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function m(t,e){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},m(t,e)}var g=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}(e,t),n=e,r=[{key:"convert",value:function(t){var n,i,r,o,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(n=e,i="convert",r=this,a=f(p(1&(o=2)?n.prototype:n),i,r),2&o&&"function"==typeof a?function(t){return a.apply(r,t)}:a)([t,s]),s.coordinate_system&&"Cartesian"===s.coordinate_system.subtype&&delete s.coordinate_system,s.usage&&delete s.usage,s}}],(i=null)&&u(n.prototype,i),r&&u(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,r}(s),y=g;function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function x(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_(i.key),i)}}function _(t){var e=function(t,e){if("object"!=v(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=v(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==v(e)?e:e+""}function b(t,e,n){return e=A(e),function(t,e){if(e&&("object"==v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,w()?Reflect.construct(e,n||[],A(t).constructor):e.apply(t,n))}function w(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(w=function(){return!!t})()}function M(){return M="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=A(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},M.apply(null,arguments)}function A(t){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},A(t)}function E(t,e){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},E(t,e)}var T=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e)}(e,t),n=e,r=[{key:"convert",value:function(t){var n,i,r,o,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(n=e,i="convert",r=this,a=M(A(1&(o=2)?n.prototype:n),i,r),2&o&&"function"==typeof a?function(t){return a.apply(r,t)}:a)([t,s]);var l=t.find(function(t){return Array.isArray(t)&&"CS"===t[0]});l&&(s.coordinate_system={subtype:l[1],axis:this.extractAxes(t)});var u=t.find(function(t){return Array.isArray(t)&&"USAGE"===t[0]});if(u){var c=u.find(function(t){return Array.isArray(t)&&"SCOPE"===t[0]}),h=u.find(function(t){return Array.isArray(t)&&"AREA"===t[0]}),d=u.find(function(t){return Array.isArray(t)&&"BBOX"===t[0]});s.usage={},c&&(s.usage.scope=c[1]),h&&(s.usage.area=h[1]),d&&(s.usage.bbox=d.slice(1))}return s}}],(i=null)&&x(n.prototype,i),r&&x(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,r}(s),S=T;function C(t){var e=function(t){return t.find(function(t){return Array.isArray(t)&&"USAGE"===t[0]})?"2019":(t.find(function(t){return Array.isArray(t)&&"CS"===t[0]})||"BOUNDCRS"===t[0]||"PROJCRS"===t[0]||t[0],"2015")}(t);return("2019"===e?S:y).convert(t)}var k=function(t){var e=new j(t);return e.output()},P=1,O=/\s/,L=/[A-Za-z]/,I=/[A-Za-z84_]/,R=/[,\]]/,D=/[\d\.E\-\+]/;function j(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=P}function F(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var i=e?{}:t,r=n.reduce(function(t,e){return G(e,t),t},i);e&&(t[e]=r)}function G(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void G(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var i;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&G(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&G(t[3],e[n]));case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":return t[0]=["name",t[0]],void F(e,n,t);case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":return t[0]=["name",t[0]],F(e,n,t),void(e[n].type=n);default:for(i=-1;++i<t.length;)if(!Array.isArray(t[i]))return G(t,e[n]);return F(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}j.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;O.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case P:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},j.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(R.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},j.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=P)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=P,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},j.prototype.number=function(t){if(!D.test(t)){if(R.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},j.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},j.prototype.keyword=function(t){if(I.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=P)}if(!R.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},j.prototype.neutral=function(t){if(L.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(D.test(t))return this.word=t,void(this.state=3);if(!R.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},j.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var N=.017453292519943295;function z(t){return t*N}function B(t){var e=(t.projName||"").toLowerCase().replace(/_/g," ");t.long0||!t.longc||"albers conic equal area"!==e&&"lambert azimuthal equal area"!==e||(t.long0=t.longc),t.lat_ts||!t.lat1||"stereographic south pole"!==e&&"polar stereographic (variant b)"!==e?t.lat_ts||!t.lat0||"polar stereographic"!==e&&"polar stereographic (variant a)"!==e||(t.lat_ts=t.lat0,t.lat0=z(t.lat0>0?90:-90),delete t.lat1):(t.lat0=z(t.lat1>0?90:-90),t.lat_ts=t.lat1,delete t.lat1)}function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function q(t){var e={units:null,to_meter:void 0};return"string"==typeof t?(e.units=t.toLowerCase(),"metre"===e.units&&(e.units="meter"),"meter"===e.units&&(e.to_meter=1)):t&&t.name&&(e.units=t.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.to_meter=t.conversion_factor),e}function U(t){return"object"===V(t)?t.value*t.unit.conversion_factor:t}function H(t,e){t.ellipsoid.radius?(e.a=t.ellipsoid.radius,e.rf=0):(e.a=U(t.ellipsoid.semi_major_axis),void 0!==t.ellipsoid.inverse_flattening?e.rf=t.ellipsoid.inverse_flattening:void 0!==t.ellipsoid.semi_major_axis&&void 0!==t.ellipsoid.semi_minor_axis&&(e.rf=e.a/(e.a-U(t.ellipsoid.semi_minor_axis))))}function W(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t&&"object"===V(t)?"BoundCRS"===t.type?(W(t.source_crs,e),t.transformation&&(t.transformation.method&&"NTv2"===t.transformation.method.name?e.nadgrids=t.transformation.parameters[0].value:e.datum_params=t.transformation.parameters.map(function(t){return t.value})),e):(Object.keys(t).forEach(function(n){var i=t[n];if(null!==i)switch(n){case"name":if(e.srsCode)break;e.name=i,e.srsCode=i;break;case"type":"GeographicCRS"===i?e.projName="longlat":"ProjectedCRS"===i&&t.conversion&&t.conversion.method&&(e.projName=t.conversion.method.name);break;case"datum":case"datum_ensemble":i.ellipsoid&&(e.ellps=i.ellipsoid.name,H(i,e)),i.prime_meridian&&(e.from_greenwich=i.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=i.name,H(i,e);break;case"prime_meridian":e.long0=(i.longitude||0)*Math.PI/180;break;case"coordinate_system":if(i.axis)if(e.axis=i.axis.map(function(t){var e=t.direction;if("east"===e)return"e";if("north"===e)return"n";if("west"===e)return"w";if("south"===e)return"s";throw new Error("Unknown axis direction: ".concat(e))}).join("")+"u",i.unit){var r=q(i.unit),o=r.units,a=r.to_meter;e.units=o,e.to_meter=a}else if(i.axis[0]&&i.axis[0].unit){var s=q(i.axis[0].unit),l=s.units,u=s.to_meter;e.units=l,e.to_meter=u}break;case"id":i.authority&&i.code&&(e.title=i.authority+":"+i.code);break;case"conversion":i.method&&i.method.name&&(e.projName=i.method.name),i.parameters&&i.parameters.forEach(function(t){var n=t.name.toLowerCase().replace(/\s+/g,"_"),i=t.value;t.unit&&t.unit.conversion_factor?e[n]=i*t.unit.conversion_factor:"degree"===t.unit?e[n]=i*Math.PI/180:e[n]=i});break;case"unit":i.name&&(e.units=i.name.toLowerCase(),"metre"===e.units&&(e.units="meter")),i.conversion_factor&&(e.to_meter=i.conversion_factor);break;case"base_crs":W(i,e),e.datumCode=i.id?i.id.authority+"_"+i.id.code:i.name}}),void 0!==e.latitude_of_false_origin&&(e.lat0=e.latitude_of_false_origin),void 0!==e.longitude_of_false_origin&&(e.long0=e.longitude_of_false_origin),void 0!==e.latitude_of_standard_parallel&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),void 0!==e.latitude_of_1st_standard_parallel&&(e.lat1=e.latitude_of_1st_standard_parallel),void 0!==e.latitude_of_2nd_standard_parallel&&(e.lat2=e.latitude_of_2nd_standard_parallel),void 0!==e.latitude_of_projection_centre&&(e.lat0=e.latitude_of_projection_centre),void 0!==e.longitude_of_projection_centre&&(e.longc=e.longitude_of_projection_centre),void 0!==e.easting_at_false_origin&&(e.x0=e.easting_at_false_origin),void 0!==e.northing_at_false_origin&&(e.y0=e.northing_at_false_origin),void 0!==e.latitude_of_natural_origin&&(e.lat0=e.latitude_of_natural_origin),void 0!==e.longitude_of_natural_origin&&(e.long0=e.longitude_of_natural_origin),void 0!==e.longitude_of_origin&&(e.long0=e.longitude_of_origin),void 0!==e.false_easting&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),void 0!==e.false_northing&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),void 0!==e.standard_parallel_1&&(e.lat1=e.standard_parallel_1),void 0!==e.standard_parallel_2&&(e.lat2=e.standard_parallel_2),void 0!==e.scale_factor_at_natural_origin&&(e.k0=e.scale_factor_at_natural_origin),void 0!==e.scale_factor_at_projection_centre&&(e.k0=e.scale_factor_at_projection_centre),void 0!==e.scale_factor_on_pseudo_standard_parallel&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),void 0!==e.azimuth&&(e.alpha=e.azimuth),void 0!==e.azimuth_at_projection_centre&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),B(e),e):t}function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}var K=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Q(t){for(var e=Object.keys(t),n=0,i=e.length;n<i;++n){var r=e[n];-1!==K.indexOf(r)&&Z(t[r]),"object"===X(t[r])&&Q(t[r])}}function Z(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"===X(t.PROJECTION)?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var n="",i=0,r=t.AXIS.length;i<r;++i){var o=[t.AXIS[i][0].toLowerCase(),t.AXIS[i][1].toLowerCase()];-1!==o[0].indexOf("north")||("y"===o[0]||"lat"===o[0])&&"north"===o[1]?n+="n":-1!==o[0].indexOf("south")||("y"===o[0]||"lat"===o[0])&&"south"===o[1]?n+="s":-1!==o[0].indexOf("east")||("x"===o[0]||"lon"===o[0])&&"east"===o[1]?n+="e":-1===o[0].indexOf("west")&&("x"!==o[0]&&"lon"!==o[0]||"west"!==o[1])||(n+="w")}2===n.length&&(n+="u"),3===n.length&&(t.axis=n)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var a=t.GEOGCS;function s(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(a=t),a&&(a.DATUM?t.datumCode=a.DATUM.name.toLowerCase():t.datumCode=a.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_1949"===t.datumCode&&(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"belge_1972"===t.datumCode&&(t.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(t.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=a.DATUM.SPHEROID.a,t.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(t.datum_params=a.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),t.rectified_grid_angle&&(t.rectified_grid_angle=z(t.rectified_grid_angle));[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",z],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",z],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",z],["lat0","latitude_of_origin",z],["lat0","standard_parallel_1",z],["lat1","standard_parallel_1",z],["lat2","standard_parallel_2",z],["azimuth","Azimuth"],["alpha","azimuth",z],["srsCode","name"]].forEach(function(e){return n=t,r=(i=e)[0],o=i[1],void(!(r in n)&&o in n&&(n[r]=n[o],3===i.length&&(n[r]=i[2](n[r]))));var n,i,r,o}),B(t)}function Y(t){if("object"===X(t))return W(t);var e=function(t){var e=t.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}(t),n=k(t);if("WKT2"===e)return W(C(n));var i=n[0],r={};return G(n,r),Q(r),r[i]}}},r={};function o(t){var e=r[t];if(void 0!==e)return e.exports;var n=r[t]={id:t,exports:{}};return i[t].call(n.exports,n,n.exports,o),n.exports}return o.m=i,o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,{a:e}),e},o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.b="undefined"!=typeof document&&document.baseURI||self.location.href,o.nc=void 0,o(2257)}()});
//# sourceMappingURL=geo.lean.min.js.map